"use strict";function touchScroll(a){a.perfectScrollbar("update")}function layoutPresetPreview(a,b,c,d,e,f,g,h,i,j,k,l){function m(c,d,e,f,g){c.containingSegment.contentElement.fillValuesByMediaType();var h=a.when();d.forEach(function(a){var d=t(a,c),i=angular.element('<div class="layout-preview"></div>').css(d);h=h["finally"](function(){return b(a,c,f,d).then(function(b){b?(b.is(".strip-media-layout-preview")&&(i.parents(".column-preview").length||i.css("left",0),isNaN(g)||b.css("marginLeft",-g-a.left)),b.addClass(a.type+"-layout-preview").prependTo(i)):(i.css("background-color","blue"),i.text(a.type))})}),a.layout&&m(c,a.layout,i,f,g),i.appendTo(e)})}function n(a,b,c){var e=a.posterImageRef||a;return d.itemToThumbnailUrl({mediaType:e.type.toLowerCase(),relativeUri:e.uri},b,c)}function o(a,b,c,d){return _.sum(_.range(d),function(d){var e=b[c+d],f=e.strip||{},g=a[c+d].getRenderedHeight(),h=f.paddingTop||0,i=f.paddingBottom||0;return g+h+i})}function p(a,b,e,f,g,h){"video"===b.mediaType?a.prepend(c(b,e,f)):angular.element('<div class="media-bg"></div>').css({width:e,height:f,opacity:h||1,"background-image":"url("+d.itemToThumbnailUrl(b,e,f,{alignment:g})+")"}).addClass(b.mediaType+"-bg").prependTo(a)}function q(a,b){var c=a&&a.solution,d=a&&a.node,f=a&&a.lgDataArray;b.empty(),b.css({"background-color":v(d)});var g;_.each(c,function(d,i){var q=f[i],r=q.strip||{},s=q.menuStrip||{},t=d.getRenderedHeight(),v=q.topLine&&q.topLine.enable&&"space"===q.topLine.line&&q.topLine.space||0,x=q.bottomLine&&q.bottomLine.enable&&"space"===q.bottomLine.line&&q.bottomLine.space||0,y=r.paddingTop||0,z=r.paddingBottom||0;j.isInMobileEditMode()&&b.addClass("layout-preset-preview-mobile"),a.stripSizes[i]&&(g=angular.element('<div class="strip-preview"></div>').appendTo(b),j.isInMobileEditMode()&&g.addClass("strip-preview-mobile"),r.enable&&(g.css("background-color",e.getRGBColor(r.color||"color_18")),r.mediaRef?g.css("background-image","url("+n(r.mediaRef,b.width(),o(c,f,i,a.stripSizes[i]))+")"):r.mediaItems&&h.sectionBackground&&p(g,r.mediaItems[0],b.width(),o(c,f,i,a.stripSizes[i]),r.alignType,l.getBackgroundOpacity(d,r.color,r.mediaType,r.mediaItems))));var A=angular.element('<div class="lg-container"></div>').appendTo(g||b);if(A.css({paddingTop:Math.max(y,0)+v,paddingBottom:Math.max(z,0)+x}),j.isInMobileEditMode()&&A.addClass("lg-container-mobile"),s.enable){var B=s.paddingTop||0,C=s.paddingBottom||0,D=d.segments[0].getLENoError(),E=_.find(D.layout,function(a){return"menu"===a.type||"copyrightMSG"===a.subType});if(E){var F=void 0,G=void 0;if(d.isMobile()&&d.isSiteHeader()?(F=D.menuStripTop,G=D.menuStripBottom-D.menuStripTop):(F=E.top-B,G=B+C+E.height),!isNaN(F)&&!isNaN(G)){var H=angular.element('<div class="menu-strip-preview"></div>').appendTo(A).css({height:G,marginTop:Math.max(y,0)+v+F});H.css("background-color",e.getRGBColor(s.color||"color_18")),s.mediaRef&&H.css("background-image","url("+n(s.mediaRef,b.width(),G)+")")}}}var I=angular.element('<div class="lg-preview"></div>').appendTo(A).height(t),J=d.columns;if(J&&!J[0].isMobile){var K=k.getColumnsContainerProps(J),L=K.siteMargin||0,M=void 0;I.addClass("lg-columns-preview"),K.fullWidth?(I.addClass("lg-columns-full-width-preview"),I.css({paddingLeft:L,paddingRight:L}),M=b.width()-2*L):(I.width(w),M=w);var N=K.columnsMargin,O=K.frameMargin,P=(M-N*(J.length-1)-2*O)/k.totalStructureColumns;J.forEach(function(a,c){var d=k.getAlignment(J,c),f=Math.floor(P*a.width),g=angular.element('<div class="column-container-preview"></div>').height(t).css("width",f).css("flex","0 0 auto").css("justify-content",u[d]).appendTo(I),h=k.calculateColumnWidth(J,c),i=angular.element('<div class="column-preview"></div>').height(t).width(h).appendTo(g),j=a.segment&&a.segment.getLENoError();if(j){g.attr("le-id",j.id);var l=a.isVirtual?a.layout:j.layout,n=k.createColumnBackground(a);n&&(n.media?(l=_.filter(l,function(a){return"media"!==a.type}),p(g,n.media,f,t)):n.color&&g.css("background-color",e.getRGBColor(n.color)));var o=void 0;if(a.isVirtual&&1===J.length){var q=K.fullWidth?L:(b.width()-w)/2;o=q+(b.width()-2*q-h)*d/100}m(j,k.adjustLayoutForColumns(j,l,J,c),i,b,o)}})}else d.segments.forEach(function(a){var c=angular.element('<div class="segment-preview"></div>').width(a.width).height(a.height).css("left",a.left);c.appendTo(I);var d=a.getLENoError();d&&(c.attr("le-id",d.id),m(d,d.layout,c,b))})})}var r,s=function(a){return a.variationsMap&&a.variationsMap.media&&a.variationsMap.media.imageStretch},t=function(a,b){var c=a.width,d=a.left,e=a.top,f=a.rendererHeight||a.height;if(b.isMediaType(a)){var g=s(b);g&&(e-=g.top,d-=g.left,c+=g.left+g.right,f+=g.top+g.bottom)}else if("line"===a.type){var h=b.getLineWidthAndLeftPosition(a);c=h.width,d=h.left}return{width:c,height:f,top:e,left:d}},u={0:"flex-start",50:"center",100:"flex-end"},v=function(a){var b;if("footer"===a.containerPageId)b=e.getRGBColor(h.designKit&&g.getFooterBg()||1);else if("GeneralDescription"===a.contentElementType)b=e.getRGBColor(h.designKit&&g.getHeaderBg()||1);else{var c=f.getPageNodeById(a.containerPageId);b=e.getRGBColor(c&&c.bgObj&&c.bgObj.color||1)}return b},w=j.isInMobileEditMode()?j.mobilePageWidth:j.desktopPageWidth;return{restrict:"A",scope:{presetPreview:"=",scale:"=",onBeforeRender:"&",previewPosition:"=?","static":"="},link:function(a,b){function c(){if(a.presetPreview){if(!a.presetPreview.solution)return void i.error("preset with no solution");r=j.isInMobileEditMode()?.675:a.scale,a.onBeforeRender(a.presetPreview&&a.presetPreview.solution),q(a.presetPreview,b)}}h.mergedHeader&&i.error('Directive "layout-preset-preview" is deprecated. Use component "preset-preview" instead.');var d=b.wrap('<div class="layout-preset-preview-wrap"></div>').parent();a.$watch("presetPreview",function(){if(a.presetPreview){if(!a.presetPreview.solution)return void i.error("preset with no solution");b.attr("preset-id",a.presetPreview.preset&&a.presetPreview.preset.id),c(),d.css({width:r*b.width(),height:r*b.height(),overflow:"hidden"}),b.css({transformOrigin:"top left",transform:"matrix("+r+", 0, 0, "+r+", 0, 0)"})}}),a["static"]||a.previewPosition&&a.$watch("previewPosition",function(){return c()}),a.$on("$destroy",function(){return d.remove()})}}}function getStageBackgroundColorsFactory(a,b){return function(c){var d=b.toDarkColor(c.mainColor,c),e=a(d).hsv(),f=e[0],g=e[1],h=.05>g?0:.2,i=f,j=(i+30)%360,k=a.hsv(i,h,.8).alpha(.6),l=a.hsv(j,h,.9).alpha(.3),m=a.hsv(i,h,.5).alpha(.1),n=a.hsv(i,h,.5).alpha(.15);return{gradientStart:k,gradientEnd:l,active:n,hover:m}}}function memoize(a,b,c){if(c){var d="_memoized_"+b,e=c.get;return a[d]=MEMOIZE_IDENTIFIER,__assign({},c,{get:function(){return this[d]===MEMOIZE_IDENTIFIER&&(this[d]=e.call(this)),this[d]}})}}function FeatureListFactory(a,b,c,d,e,f){var g=function(){function e(e){e.preset?(this.featureDetector=b,this.listItemFeatureDetector=c,this.listData=this.data=this.createDataFromPreset(e)):(this.featureDetector=a,this.listItemFeatureDetector=d,this.data=this.getLayoutElementFromSection(e),this.listData=e)}return e.prototype.createDataFromPreset=function(a){return a.preset.data.isList&&this.listItemFeatureDetector.enhanceListItemWithRealStructure(a),this.featureDetector.enhanceWithRealStructure(a,a.preset.data.groups[0].layouts[0])},e.prototype.getLayoutElementFromSection=function(a){var b=a.groups.find(function(a){return"ListHeader"!==a.contentType&&"ListFooter"!==a.contentType});return b&&b.segments[0]?b.segments[0].getLENoError():void 0},Object.defineProperty(e.prototype,"horizontalTextAlignment",{get:function(){return this.featureDetector.getHorizontalTextAlignment(this.data)},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"hasColumns",{get:function(){return this.featureDetector.hasColumns(this.data)},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"numberOfColumns",{get:function(){return this.featureDetector.getNumberOfColumns(this.data)},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"isColumnBG",{get:function(){return this.featureDetector.isColumnBG(this.data)},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"textWidth",{get:function(){return this.featureDetector.getTextWidth(this.data)},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"isMediaStretched",{get:function(){return this.featureDetector.isMediaStretched(this.data)},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"isCoastToCoast",{get:function(){return this.featureDetector.isMediaStrip(this.data)},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"mediaType",{get:function(){return this.featureDetector.getMediaType(this.data)},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"mediaUrls",{get:function(){return this.featureDetector.getMediaUrls(this.data)},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"mediaObjects",{get:function(){return this.featureDetector.getMediaObjects(this.data)},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"mediaWidth",{get:function(){return this.featureDetector.getMediaWidth(this.data)},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"startsWithMedia",{get:function(){return this.featureDetector.startsWithMedia(this.data)},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"endsWithMedia",{get:function(){return this.featureDetector.endsWithMedia(this.data)},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"mediaPosition",{get:function(){return"undefined"==typeof this.hasMedia||"undefined"==typeof this.hasText?[]:this.featureDetector.getMediaPosition(this.data)},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"textPosition",{get:function(){return"undefined"==typeof this.hasMedia||"undefined"==typeof this.hasText?[]:this.featureDetector.getTextPosition(this.data)},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"hasMedia",{get:function(){return this.featureDetector.hasMedia(this.data)},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"hasText",{get:function(){return this.featureDetector.hasText(this.data)},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"columns",{get:function(){return this.featureDetector.getColumns(this.data)},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"isList",{get:function(){return this.featureDetector.isList(this.listData)},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"isListZigZag",{get:function(){return this.isList?this.featureDetector.isListZigZag(this.listData):void 0},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"hasListHeader",{get:function(){return this.featureDetector.hasListHeader(this.listData)},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"numberOfListItemsInRow",{get:function(){return this.isList?this.listItemFeatureDetector.getNumberOfItemsInRow(this.listData):void 0},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"listItemTextWidth",{get:function(){return this.isList?this.textWidth:void 0},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"listItemHorizontalTextAlignment",{get:function(){return this.isList?this.horizontalTextAlignment:void 0},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"listItemTextPosition",{get:function(){return this.isList?this.textPosition:void 0},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"listItemMediaPosition",{get:function(){return this.isList?this.mediaPosition:void 0},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"hasTextBox",{get:function(){return this.hasText?this.featureDetector.hasBox(this.data):!1},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"hasPattern",{get:function(){return this.featureDetector.hasPattern(this.data)},enumerable:!0,configurable:!0}),e.prototype.isSameMedia=function(a){return this.hasMedia&&a.hasMedia&&this.mediaUrls[0]===a.mediaUrls[0]},e.prototype.isSameTextAlignment=function(a){return this.hasText&&a.hasText&&this.horizontalTextAlignment===a.horizontalTextAlignment},e}();return __decorate([memoize],g.prototype,"horizontalTextAlignment",null),__decorate([memoize],g.prototype,"hasColumns",null),__decorate([memoize],g.prototype,"numberOfColumns",null),__decorate([memoize],g.prototype,"isColumnBG",null),__decorate([memoize],g.prototype,"textWidth",null),__decorate([memoize],g.prototype,"isMediaStretched",null),__decorate([memoize],g.prototype,"isCoastToCoast",null),__decorate([memoize],g.prototype,"mediaType",null),__decorate([memoize],g.prototype,"mediaUrls",null),__decorate([memoize],g.prototype,"mediaObjects",null),__decorate([memoize],g.prototype,"mediaWidth",null),__decorate([memoize],g.prototype,"startsWithMedia",null),__decorate([memoize],g.prototype,"endsWithMedia",null),__decorate([memoize],g.prototype,"mediaPosition",null),__decorate([memoize],g.prototype,"textPosition",null),__decorate([memoize],g.prototype,"hasMedia",null),__decorate([memoize],g.prototype,"hasText",null),__decorate([memoize],g.prototype,"columns",null),__decorate([memoize],g.prototype,"isList",null),__decorate([memoize],g.prototype,"isListZigZag",null),__decorate([memoize],g.prototype,"hasListHeader",null),__decorate([memoize],g.prototype,"numberOfListItemsInRow",null),__decorate([memoize],g.prototype,"listItemTextWidth",null),__decorate([memoize],g.prototype,"listItemHorizontalTextAlignment",null),__decorate([memoize],g.prototype,"listItemTextPosition",null),__decorate([memoize],g.prototype,"listItemMediaPosition",null),__decorate([memoize],g.prototype,"hasTextBox",null),__decorate([memoize],g.prototype,"hasPattern",null),g}getStageBackgroundColorsFactory.$inject=["chroma","themeChooserUtils"],FeatureListFactory.$inject=["sectionFeatureDetector","presetFeatureDetector","presetListItemFeatureDetector","sectionListItemFeatureDetector","LayoutUtils","clusters"],angular.module("onboardingServerJsApiAppInternal",["onboardingServerJsApiTranslations","wixAngular","wix.common.bi"]),angular.module("onboardingServerJsApiApp",["onboardingServerJsApiAppInternal"]).config(function(){});try{angular.module("onboardingServerJsApiTranslations")}catch(e){angular.module("onboardingServerJsApiTranslations",["pascalprecht.translate"])}angular.module("onboardingServerJsApiTranslations").config(["$translateProvider",function(a){var b={general:{YO:"Hello"}};a.translations("en",b),a.translations(b),a.preferredLanguage&&a.preferredLanguage("en")}]).value("preferredLanguage","en");var ob;!function(a){var b=function(){function a(a){this.$q=a,this.errorCodesCallbackMap={},this.editorSessionId=null}return a.$inject=["$q"],a.prototype.setEditorSessionId=function(a){this.editorSessionId=a},a.prototype.getEditorSessionId=function(){return this.editorSessionId},a.prototype.onSessionExpired=function(a){this.sessionExpired=a,this.setErrorCodeCallback([-12,-15,-16],this.sessionExpired)},a.prototype.onConflictingChanges=function(a){this.conflictingChanges=a,this.setErrorCodeCallback([-26e3],this.conflictingChanges)},a.prototype.onSiteNotManagedByOB=function(a){this.siteNotManagedByOB=a,this.setErrorCodeCallback([-26009],this.siteNotManagedByOB)},a.prototype.onStoryArchived=function(a){this.storyArchived=a,this.setErrorCodeCallback([-26002],this.storyArchived)},a.prototype.getResponse=function(a){var b=this;return void 0===a&&(a=!1),function(c){if(b.isErrorResponse(c)){var d=b.errorCodesCallbackMap[c.data.errorCode];return d&&d(c),b.$q.reject(c)}return a?b.$q.reject(c):c.data}},a.prototype.isErrorResponse=function(a){return a.data&&a.data.errorCode},a.prototype.setErrorCodeCallback=function(a,b){var c=this;a.forEach(function(a){return c.errorCodesCallbackMap[a]=b})},a}();a.JsApiManager=b}(ob||(ob={})),angular.module("onboardingServerJsApiAppInternal").service("jsApiManager",ob.JsApiManager);var ob;!function(a){var b=function(){function a(a,b,c){this.$http=a,this.$q=b,this.jsApiManager=c,this.endpointPrefix="/_api/onboarding-server-web/content/"}return a.$inject=["$http","$q","jsApiManager"],a.prototype.setPayload=function(a){return this.$http.post(this.endpointPrefix+"index",a).then(function(){return void 0})},a.prototype.suggest=function(a){if(!a)return this.$q.when([]);var b=this.endpointPrefix+"suggestCategory?q="+encodeURIComponent(this.sanitize(a));this.contentVersionId&&(b+="&indexVersion="+this.contentVersionId);var c=this.jsApiManager.getEditorSessionId();return c&&(b+="&editorSessionId="+c),this.$http.get(b).then(this.jsApiManager.getResponse(!1),this.jsApiManager.getResponse(!0)).then(function(a){return a.results})},a.prototype.elasticSearch=function(a,b,c){if(!a)return this.$q.when(null);var d=this.endpointPrefix+"suggestCategory2?q="+encodeURIComponent(this.sanitize(a));this.contentVersionId&&(d+="&indexVersion="+this.contentVersionId);var e=this.jsApiManager.getEditorSessionId();return e&&(d+="&editorSessionId="+e),b&&(d+="&limit="+b),c&&(d+="&relatedLimit="+c),this.$http.get(d).then(this.jsApiManager.getResponse(!1),this.jsApiManager.getResponse(!0))},a.prototype.load=function(a){var b=this.endpointPrefix+"lookup",c=[];return(a.industryId||a.structureId)&&(a.industryId&&c.push("industryId="+a.industryId),a.structureId&&c.push("structureId="+a.structureId),this.contentVersionId&&c.push("indexVersion="+this.contentVersionId),b+="?"+c.join("&")),this.$http.get(b).then(this.jsApiManager.getResponse(!1),this.jsApiManager.getResponse(!0))},a.prototype.setContentVersionId=function(a){this.contentVersionId=a},a.prototype.sanitize=function(a){return a.replace(/[^0-9a-z\s\-+\/.;()'&]/gi,"")},a}();a.CmsApi=b}(ob||(ob={})),angular.module("onboardingServerJsApiAppInternal").service("cmsApi",ob.CmsApi);var ob;!function(a){var b=function(){function a(a,b){this.$http=a,this.jsApiManager=b,this.endpointPrefix="/_api/onboarding-server-web/site"}return a.$inject=["$http","jsApiManager"],a.prototype.create=function(a,b){var c={templateMetaSiteId:a};return b&&(c.siteName=b),this.$http.post(this.endpointPrefix,c).then(this.jsApiManager.getResponse(!1),this.jsApiManager.getResponse(!0))},a}();a.SiteApi=b}(ob||(ob={})),angular.module("onboardingServerJsApiAppInternal").service("siteApi",ob.SiteApi);var ob;!function(a){var b=function(){function a(a,b,c){this.$http=a,this.jsApiManager=b,this.cacheKillerParam=c,this.endpointPrefix="/_api/onboarding-server-web/story"}return a.$inject=["$http","jsApiManager","cacheKillerParam"],a.prototype.create2=function(a){return this.$http.post(this.decorateEndpoint(this.endpointPrefix,"new"),a).then(this.jsApiManager.getResponse(!1),this.jsApiManager.getResponse(!0))},a.prototype.create=function(a){return this.$http.post(this.decorateEndpoint(this.buildEndpoint()),'"'+a+'"').then(this.jsApiManager.getResponse(!1),this.jsApiManager.getResponse(!0))},a.prototype.get=function(a,b){void 0===b&&(b=null);var c=this.decorateEndpoint(this.buildEndpoint(a,b));return this.$http.get(c,null).then(this.jsApiManager.getResponse(!1),this.jsApiManager.getResponse(!0))},a.prototype.getRevisions=function(a,b,c){void 0===b&&(b=1),void 0===c&&(c=100);var d=this.decorateEndpoint(this.buildEndpoint(a),"revisions",["from="+b,"limit="+c]);return this.$http.get(d,null).then(this.jsApiManager.getResponse(!1),this.jsApiManager.getResponse(!0))},a.prototype.getMajorRevisions=function(a){var b=this.decorateEndpoint(this.buildEndpoint(a),"revisions/major");return this.$http.get(b,null).then(this.jsApiManager.getResponse(!1),this.jsApiManager.getResponse(!0))},a.prototype.metadata=function(a){var b=this.decorateEndpoint(this.buildEndpoint(a),"metadata");return this.$http.get(b,null).then(this.jsApiManager.getResponse(!1),this.jsApiManager.getResponse(!0))},a.prototype.update=function(a,b,c,d,e){void 0===e&&(e=null);var f=jsonpatch.compare(c,d),g={diff:f,action:"update"};e&&(g.htmlRevision=e);var h=this.decorateEndpoint(this.buildEndpoint(a,b));return this.$http.put(h,g).then(this.jsApiManager.getResponse(!1),this.jsApiManager.getResponse(!0))},a.prototype.rollback=function(a,b){var c={targetRevision:b,action:"rollback"},d=this.decorateEndpoint(this.buildEndpoint(a));return this.$http.put(d,c).then(this.jsApiManager.getResponse(!1),this.jsApiManager.getResponse(!0))},a.prototype.publish=function(a){var b={action:"publish"},c=this.decorateEndpoint(this.buildEndpoint(a));return this.$http.put(c,b).then(this.jsApiManager.getResponse(!1),this.jsApiManager.getResponse(!0))},a.prototype.markAsMajorRevision=function(a){var b={action:"markAsMajor"},c=this.decorateEndpoint(this.buildEndpoint(a));return this.$http.put(c,b).then(this.jsApiManager.getResponse(!1),this.jsApiManager.getResponse(!0))},a.prototype.markCreated=function(a,b,c){var d={templateMetaSiteId:b,metaSiteId:a.metaSiteId,siteId:c},e=this.decorateEndpoint(this.buildEndpoint(a),"markCreated");return this.$http.put(e,d).then(this.jsApiManager.getResponse(!1),this.jsApiManager.getResponse(!0))},a.prototype.archive=function(a){var b=this.decorateEndpoint(this.buildEndpoint(a)),c={action:"archive"};return this.$http.put(b,c).then(this.jsApiManager.getResponse(!1),this.jsApiManager.getResponse(!0))},a.prototype.buildEndpoint=function(a,b){void 0===a&&(a=null),void 0===b&&(b=null);var c=this.endpointPrefix;return null!=a&&(c+="/"+a.instanceId+":"+a.metaSiteId),null!==b&&(c+="/"+b),c},a.prototype.decorateEndpoint=function(a,b,c){void 0===b&&(b=null),void 0===c&&(c=[]);var d=["cacheKiller="+this.cacheKillerParam()].concat(c),e=this.jsApiManager.getEditorSessionId();return e&&d.push("editorSessionId="+e),a+(b?"/"+b:"")+"?"+d.join("&")},a}();a.StoryApi=b}(ob||(ob={})),angular.module("onboardingServerJsApiAppInternal").service("storyApi",ob.StoryApi).factory("cacheKillerParam",function(){return function(){return Date.now().toString()}});var ob;!function(a){var b=function(){function a(a,b,c){var d=this;this.$q=a,this.storyApi=b,this.siteApi=c,this.create=function(a){return d.enqueue(function(){return d.createStory(a)})},this.create2=function(a){return d.enqueue(function(){return d.createStory2(a)})},this.createSiteFromTemplate=function(a,b){return d.enqueue(function(){return d.siteApi.create(a,b)})},this.get=function(a,b){return d.enqueue(function(){return d.getStory(a,b)})},this.update=function(a){return d.enqueue(function(){return d.updateStory(a)})},this.publish=function(a){return d.enqueue(function(){return d.publishStory(a)})},this.markAsMajorRevision=function(a){return d.enqueue(function(){return d.markStoryAsMajorRevision(a)})},this.markCreated=function(a,b,c){return d.enqueue(function(){return d._markCreated(a,b,c)})}}return a.$inject=["$q","storyApi","siteApi"],a.prototype.enqueue=function(a){return this.lastAction?(this.lastAction=this.lastAction.then(a,a),this.lastAction):(this.lastAction=a(),this.lastAction)},a.prototype.createStory=function(a){var b=this;return this.storyApi.create(a).then(function(c){var d={storyId:{instanceId:c.instanceId,metaSiteId:a},revision:c.revision,blob:{}};return b.currentStory=b.cloneStory(d),d})},a.prototype.createStory2=function(a){var b=this;return this.storyApi.create2(a).then(function(a){var c={storyId:{instanceId:a.instanceId,metaSiteId:a.metaSiteId},siteId:a.siteId,revision:a.revision,blob:{}};return b.currentStory=b.cloneStory(c),c})},a.prototype.getStory=function(a,b){var c=this;return this.storyApi.get(a,b).then(function(b){return b.storyId=a,c.currentStory=c.cloneStory(b),b})},a.prototype.updateStory=function(a,b){var c=this;if(void 0===b&&(b=!0),a.storyId.instanceId!==this.currentStory.storyId.instanceId||a.storyId.metaSiteId!==this.currentStory.storyId.metaSiteId)return this.$q.reject("storyId "+a.storyId.instanceId+":"+a.storyId.metaSiteId+" does not match "+this.currentStory.storyId.instanceId+":"+this.currentStory.storyId.metaSiteId);var d=angular.copy(a.blob);return this.storyApi.update(a.storyId,a.revision,this.currentStory.blob,d,a.htmlRevision).then(function(a){return c.updateCurrentBlob(d),c.currentStory.revision=a,c.cloneStory(c.currentStory)})["catch"](function(d){return b&&c.isDataCorruptionError(d)?c.handleDataCorruptionError(a):c.$q.reject(d)})},a.prototype.publishStory=function(a){var b=this;return this.storyApi.publish(a.storyId).then(function(a){return b.currentStory.revision=a,a})},a.prototype.markStoryAsMajorRevision=function(a){var b=this;return this.storyApi.markAsMajorRevision(a.storyId).then(function(a){return b.currentStory.revision=a,a})},a.prototype._markCreated=function(a,b,c){return this.storyApi.markCreated(a.storyId,b,c)},a.prototype.isDataCorruptionError=function(b){return b.status===a.DATA_CORRUPTION_STATUS&&b.data&&b.data.errorCode===a.DATA_CORRUPTION_ERROR_CODE},a.prototype.handleDataCorruptionError=function(a){var b=this;return this.getStory(a.storyId).then(function(){return b.updateStory(a,!1)})},a.prototype.cloneStory=function(a){return angular.copy(a)},a.prototype.updateCurrentBlob=function(a){this.currentStory.blob=a},a}();b.DATA_CORRUPTION_STATUS=400,b.DATA_CORRUPTION_ERROR_CODE=-26011,a.StoryManager=b}(ob||(ob={})),angular.module("onboardingServerJsApiAppInternal").service("storyManager",ob.StoryManager);var ob;!function(a){var b=function(){function a(a,b){this.$http=a,this.jsApiManager=b,this.endpointPrefix="/_api/onboarding-server-web/location"}return a.$inject=["$http","jsApiManager"],a.prototype.getGeoLocation=function(){return this.$http.get(this.endpointPrefix).then(this.jsApiManager.getResponse(!1),this.jsApiManager.getResponse(!0))},a}();a.LocationApi=b}(ob||(ob={})),angular.module("onboardingServerJsApiAppInternal").service("locationApi",ob.LocationApi);var ob;!function(a){var b=function(){function a(a,b){this.$http=a,this.jsApiManager=b,this.endpointPrefix="/_api/onboarding-server-web/sitename"}return a.$inject=["$http","jsApiManager"],a.prototype.getUniqueName=function(a){if(!a||!a.length)throw"empty site name";var b=this.endpointPrefix+"?suggestedName="+encodeURIComponent(a),c={headers:{Accept:"text/plain"}};return this.$http.get(b,c).then(this.jsApiManager.getResponse(!1),this.jsApiManager.getResponse(!0))},a.prototype.rename=function(a,b){if(!b)throw"empty name";var c=this.endpointPrefix+("/"+a+"/rename?newName="+encodeURIComponent(b));return this.$http.post(c,null).then(this.jsApiManager.getResponse(!1),this.jsApiManager.getResponse(!0))},a}();a.SiteNameApi=b}(ob||(ob={})),angular.module("onboardingServerJsApiAppInternal").service("siteNameApi",ob.SiteNameApi);var ob;!function(a){var b=function(){function a(a,b){this.$http=a,this.jsApiManager=b,this.endpointPrefix="/_api/onboarding-server-web/metasite",this.countryCodesByName={"united states":"US",france:"FR"}}return a.$inject=["$http","jsApiManager"],a.prototype.setSiteProperties=function(a,b){var c=this.prepareRequest(b);return this.$http.put(this.endpointPrefix+"/"+a+"/properties",c).then(this.jsApiManager.getResponse(!1),this.jsApiManager.getResponse(!0)).then(function(){return void 0})},a.prototype.getSiteProperties=function(a){return this.$http.get(this.endpointPrefix+"/"+a+"/properties").then(this.jsApiManager.getResponse(!1),this.jsApiManager.getResponse(!0))},a.prototype.prepareRequest=function(a){var b={};if(!a.name)throw new Error("name must be set when updating site properties");b.businessName={value:a.name},a.categories&&a.categories.primary&&a.categories.secondary&&(b.categories={primary:a.categories.primary,secondary:a.categories.secondary}),a.email&&(b.email={address:a.email}),a.phone&&(b.phone={number:a.phone}),a.fax&&(b.fax={number:a.fax}),a.logo&&(b.logo={url:a.logo});var c=a.address&&a.address.country?this.getCountryCode(a.address.country):null;return a.address&&a.address.street&&a.address.city&&a.address.country&&c&&(b.postalAddress={street:a.address.street,city:a.address.city,country:c},a.address.state&&(b.postalAddress.state=a.address.state),a.address.zip&&(b.postalAddress.zip=a.address.zip)),b},a.prototype.getCountryCode=function(a){return a=(a||"").toLowerCase(),a.length>3&&(a=this.countryCodesByName[a]),a?a.toUpperCase():""},a}();a.MetaSiteApi=b}(ob||(ob={})),angular.module("onboardingServerJsApiAppInternal").service("metaSiteApi",ob.MetaSiteApi);var ob;!function(a){var b=function(){function a(a,b){this.$http=a,this.jsApiManager=b,this.endpointPrefix="/_api/onboarding-server-web/media"}return a.$inject=["$http","jsApiManager"],a.prototype.upload=function(a){var b={albumsToUpload:_.map(a,function(a){return{albumName:a.name,mediaUrls:a.urls}})};return this.$http.post(this.endpointPrefix+this.calcESISuffix(),b).then(this.jsApiManager.getResponse(!1),this.jsApiManager.getResponse(!0))},a.prototype.calcESISuffix=function(){var a=this.jsApiManager.getEditorSessionId();return a?"?editorSessionId="+a:""},a}();a.MediaApi=b}(ob||(ob={})),angular.module("onboardingServerJsApiAppInternal").service("mediaApi",ob.MediaApi);var ob;!function(a){var b=function(){function a(a,b){this.$http=a,this.jsApiManager=b,this.endpointPrefix="/_api/wix-dealer-integration-webapp/salesSystemResolver"}return a.$inject=["$http","jsApiManager"],a.prototype.getCampaign=function(a){return this.$http.get(this.endpointPrefix+"?siteGuid="+a).then(this.jsApiManager.getResponse(!1),this.jsApiManager.getResponse(!0))},a}();a.DealerApi=b}(ob||(ob={})),angular.module("onboardingServerJsApiAppInternal").service("dealerApi",ob.DealerApi);var ob;!function(a){var b=function(){function a(a,b){this.$http=a,this.jsApiManager=b,this.endpointPrefix="/_api/onboarding-custom-pallete-server-webapp/coloring/colorMatches"}return a.$inject=["$http","jsApiManager"],a.prototype.getMatches=function(a,b,c){var d=this.buildUrl(a,b,c);return this.$http.get(d).then(this.jsApiManager.getResponse(!1),this.jsApiManager.getResponse(!0)).then(function(a){var b=a.matches;return{matches:b.map(function(a){return a.startsWith("#")?a:"#"+a})}})},a.prototype.buildUrl=function(a,b,c){a.startsWith("#")&&(a=a.substr(1));var d=this.endpointPrefix+"?color="+a;return b&&(d+="&limit="+b),c&&(d+="&nearestNeighbours="+c),d},a}();a.ColorApi=b}(ob||(ob={})),angular.module("onboardingServerJsApiAppInternal").service("colorApi",ob.ColorApi);var ob;!function(a){var b=function(){function a(a,b,c){this.$http=a,this.$q=b,this.jsApiManager=c,this.endpointPrefix="/_api/adi-node-renderer/"}return a.$inject=["$http","$q","jsApiManager"],a.prototype.sanitize=function(a){return a.replace(/[^0-9a-z\s\-+\/.;()'&]/gi,"")},a.prototype.createAndRender=function(a,b,c,d){var e=this.endpointPrefix+"create_render?";return e=e+"industryId="+encodeURIComponent(this.sanitize(b)),e=e+"&structureId="+encodeURIComponent(this.sanitize(a)),e=e+"&businessName="+encodeURIComponent(this.sanitize(c)),e=e+"&flags="+encodeURIComponent(d?this.sanitize(d):"noTour&silentBI&noSpinners"),this.$http.post(e,"").then(this.jsApiManager.getResponse(!1),this.jsApiManager.getResponse(!0)).then(function(a){return a.id})},a.prototype.renderHomePage=function(a,b){var c=this.endpointPrefix+"render_home_page/"+a;return b&&(c=c+"?flags="+encodeURIComponent(this.sanitize(b))),this.$http.post(c,"").then(this.jsApiManager.getResponse(!1),this.jsApiManager.getResponse(!0)).then(function(a){return a.id})},a.prototype.renderAlternateHomePages=function(a,b,c){throw"not implemented"},a.prototype.getTaskStatus=function(a){var b=this.endpointPrefix+"status/"+a;return this.$http.get(b).then(this.jsApiManager.getResponse(!1),this.jsApiManager.getResponse(!0))},a}();a.ServerSideRenderApi=b}(ob||(ob={})),angular.module("onboardingServerJsApiAppInternal").service("serverSideRenderApi",ob.ServerSideRenderApi),angular.module("commonControlsAppInternal",["commonControlsTranslations","commonControlsPreload","ngSanitize"]),angular.module("commonControlsApp",["commonControlsAppInternal","ngMaterial","as.sortable","monospaced.elastic","wixAngular","wix.common.bi"]).config(["CCSvgIconServiceProvider",function(a){a.setSpritePrefix("images/svg-sprites/icons.sprite.svg")}]);try{angular.module("commonControlsTranslations")}catch(e){angular.module("commonControlsTranslations",["pascalprecht.translate"])}angular.module("commonControlsTranslations").config(["$translateProvider",function(a){
var b={general:{YO:"Hello"}};a.translations("en",b),a.translations(b),a.preferredLanguage&&a.preferredLanguage("en")}]).value("preferredLanguage","en");var KeyMap=function(){function a(){this.KEY_UP=38,this.KEY_DOWN=40,this.KEY_ENTER=13,this.KEY_ESC=27,this.KEY_TAB=9,this.KEY_SHIFT=16,this.KEY_A=65,this.KEY_B=66,this.KEY_C=67}return a}();angular.module("commonControlsAppInternal").constant("keyMap",new KeyMap);var CommonTooltips=function(){function a(){this.list=[{name:"help",type:"hint",content:"Help",appearance:"info"},{name:"settings",type:"hint",content:"Settings",appearance:"info"},{name:"crop",type:"hint",content:"Crop",appearance:"info"},{name:"back",type:"hint",content:"Back",appearance:"info"},{name:"hidden_item",type:"hint",content:"Item is hidden",appearance:"info"},{name:"show_item",type:"hint",content:"Click to show",appearance:"info"},{name:"hide_item",type:"hint",content:"Click to hide",appearance:"info"},{name:"richtext_bold",type:"hint",content:"Bold",appearance:"info"},{name:"richtext_italic",type:"hint",content:"Italic",appearance:"info"},{name:"richtext_underline",type:"hint",content:"Underline",appearance:"info"},{name:"richtext_bullets",type:"hint",content:"Bullets",appearance:"info"},{name:"richtext_numbers",type:"hint",content:"Numbering",appearance:"info"},{name:"richtext_add-link",type:"hint",content:"Link",appearance:"info"},{name:"richtext_edit-link",type:"hint",content:"Edit Link",appearance:"info"},{name:"richtext_cannot-link",type:"rich",content:"Select text with no<br/>line breaks to link",appearance:"info"},{name:"richtext_clear-formatting",type:"hint",content:"Remove Formatting",appearance:"info"}]}return a.prototype.registerTooltips=function(a){_.each(this.list,function(b){return a.setToolTip(b.name,_.omit(b,"name"))})},a}();angular.module("commonControlsAppInternal").constant("commonTooltips",new CommonTooltips).run(["ccTooltipManager","commonTooltips",function(a,b){return b.registerTooltips(a)}]);var commonControls;!function(a){var b;!function(a){a[a.SingleImage=0]="SingleImage",a[a.MultipleImages=1]="MultipleImages",a[a.Video=2]="Video",a[a.ExtVideo=3]="ExtVideo",a[a.Clipart=4]="Clipart",a[a.Shape=5]="Shape"}(b=a.MediaPreviewType||(a.MediaPreviewType={}));var c;!function(a){a[a.BoldUnderlineItalic=0]="BoldUnderlineItalic",a[a.Listing=1]="Listing",a[a.Linking=2]="Linking",a[a.ClearFormatting=3]="ClearFormatting"}(c=a.RTTSection||(a.RTTSection={}));var d;!function(a){a[a.Bold=0]="Bold",a[a.Underline=1]="Underline",a[a.Italic=2]="Italic",a[a.Bullets=3]="Bullets",a[a.Numbers=4]="Numbers",a[a.Link=5]="Link",a[a.ClearFormatting=6]="ClearFormatting"}(d=a.RTTCommand||(a.RTTCommand={}))}(commonControls||(commonControls={}));var cc=commonControls,CCPlayground=function(){function a(a,b,c,d,e){var f=this;this.CcDialogBuilder=a,this.ccTooltipManager=b,this.ccTip=c,this.$scope=d,this.$location=e,this.svgIcons=["background-preview:color","background-preview:gallery","background-preview:image","background-preview:pattern","background-preview:video","background-preview:upload-gallery","background-preview:upload-image","background-preview:upload-video","coloration:add-large","coloration:add-small","coloration:check-green","coloration:dark","coloration:edit","coloration:light","coloration:magic-wand","coloration:negative-validation-outline","coloration:positive-validation-outline-small","coloration:replace","coloration:selected","design:animations","design:background","design:color","design:font","design:font-size-small","design:font-size-large","misc:loader-circle-small","misc:negative-validation-outline","misc:crop","primitives:minus","primitives:plus","rich-text:bold","rich-text:bullets","rich-text:clear-formatting","rich-text:italic","rich-text:link","rich-text:numbers","rich-text:underline"],this.complexSvgIcons=["design:headerbg","design:headerbg_hover","design:listbg","design:listbg_hover","image-positions:top-left","image-positions:top","image-positions:top-right","image-positions:left","image-positions:center","image-positions:right","image-positions:bottom-left","image-positions:bottom","image-positions:bottom-right"],this.icons=["mainpage","arrow-down","arrow-left","check","checkbox-check","delete","undo","redo","crop","show","hide","actions","add-large","add-small","arrow-right","arrow-small-new","arrow-up","close-8","close-10","close-12","close-24","customise","customise-design","dashboard","desktop","intro-next-arrow","intro-back-arrow","drag-here-arrow","drag-large","drag-small","dragsquare","duplicate","edit","help-12x7","help-24x13","help-25x14","info","home","link","mailbox","mobile","move-to","music","negative-validation","new-tab","pause","play","positive-validation","rename","replace","required","search","search-intro","seo","settings","subpage","image","gallery","video","shape","clipart","blog","store","booking","zoom-in","zoom-out","generic-social-link","blogger","facebook","fancy","flickr","google-places","google-plus","houzz","instagram","linkedin","myspace","odnok","pinterest","rss","soundcloud","shoutout","trip-advisor","tumblr","twitter","vimeo","vkontakte","whatsapp","yelp","youtube","social-placeholder","social-not-found","wix-logo","pages","page","section","switch-layout","hide-eye","show-eye","mobile-edit-notice","switch-to-mobile","switch-to-desktop"],this.animationIcons=["Fade","Float","Fly","Fold","None","Slide","Turn"],this.backgroundImageOptionsIcons=["PositionBottom","PositionCenter","PositionTop"],this.headerDesign=["solid","transparent","fixed"],this.autocompleteValue="de",this.autocompleteItems=["pace@jamil.com","Capital Typography","Kat","Doge","Kat","Hi","Ho"],this.autocompleteMediaItems=[{text:"Mr. Kat",media:{mediaType:"image",relativeUri:"5010811d6ed30a57c1390c2753ee0c9f.png"}},{text:"Mrs. Kat",media:{mediaType:"image",relativeUri:"a2438da2b4054c82ab313b96bb487827.jpg"}},{text:"Kid Kat",media:{mediaType:"image",relativeUri:"24b04690d5dc436b91637be29f8e047d.jpg"}},{text:"Karate Kat",media:{mediaType:"image",relativeUri:"24b04690d5dc436b91637be29f8e047d.jpg"}},{text:"Mr. Katiagi",media:{mediaType:"image",relativeUri:"24b04690d5dc436b91637be29f8e047d.jpg"}}],this.checkbox={label:"Checkbox",checked:!0,required:!1},this.checkboxItems=[{label:"label",checked:!0,required:!1},{label:"label2",checked:!1,required:!0}],this.sliderValue=0,this.sliderValue2=0,this.radioValue="first",this.radioButtons=[{label:"First",value:"first"},{label:"Second",value:"second"}],this.tabsItems=[{label:"private services line"},{label:"group services"}],this.labelGraphicItems=[{cssClass:"cc-icon-twitter",data:{some:"data"}},{cssClass:"cc-icon-facebook",data:{some:"data2"}}],this.media=[{fileName:"Two Flamingos",relativeUri:"0d5a8583187a44688b918f91298eba80.jpg",width:1920,height:1280,Title:"Two Flamingos",Description:"",Link:{},mediaType:"image"},{borderColor:"#999999",borderWidth:"0",fileName:"Yoga Pose 4",fillColor:"#000000",height:0,mediaType:"shape",relativeUri:"shapes/5b321028f0664becb2ef5083a72dedb3.svg",width:0},{Title:"",fileName:"Cactus 9",height:600,mediaType:"clipart",relativeUri:"ef50a06da5104118acc3804866be7059.png",width:600},{mediaType:"extVideo",videoUrl:"http://www.youtube.com/watch?v=PMWmYf2043g",Title:"Wix default video",thumbnailUrl:"http://img.youtube.com/vi/PMWmYf2043g/0.jpg"}],this.disableMediaChangeButton=!1,this.dropdownListItems=[{id:1,label:"Bob",media:{mediaType:"image",relativeUri:"images/cat1.jpg"}},{id:2,label:"George",media:{mediaType:"image",relativeUri:"images/cat2.png"}},{id:3,label:"Alice",media:{mediaType:"image",relativeUri:"images/cat3.jpg"}},{id:4,label:"Steve",media:{mediaType:"image",relativeUri:"images/cat2.png"}},{id:5,label:"Steve",media:{mediaType:"image",relativeUri:"images/cat2.png"}},{id:6,label:"Steve",media:{mediaType:"image",relativeUri:"images/cat2.png"}},{id:7,label:"Steve",media:{mediaType:"image",relativeUri:"images/cat2.png"}},{id:8,label:"Steve",media:{mediaType:"image",relativeUri:"images/cat2.png"}},{id:9,label:"Steve",media:{mediaType:"image",relativeUri:"images/cat2.png"}},{id:10,label:"Steve",media:{mediaType:"image",relativeUri:"images/cat2.png"}}],this.selectedDropDownItem={id:3,label:"Alice"},this.keyCatcherOutput="no keydown caught yet",this.currentStep=1,this.singleLine='This is a rich text. <a href="http://www.wix.com">Visit wix.com!</a>',this.richText='This<br><i>is</i>a <b>rich</b> <u>text</u>.<a href="http://www.wix.com">Visit wix.com!</a>',this.richTextValue0='<p class="font_7">This is P23 without C23</p>',this.richTextValue1='<p class="font_7">This is <span style="font-weight:bold;">bold</span></p>',this.richTextValue2='<ol class="font_7"><li><p class="font_7">First</p></li><li><p class="font_7">Last<br></p></li></ol>',this.richTextStylesManager={getFonts:function(){return{}},getThemes:function(){return{}},getCssData:function(){var a={};return a["adi-ux-fonts"]={id:"adi-ux-fonts",value:"//static.parastorage.com/services/third-party/fonts/Helvetica/fontFace.css",isLink:!0,force:!1},a.theme_fonts={id:"theme_fonts",value:".cke_editable p,.cke_editable h1,.cke_editable h2,.cke_editable h3,.cke_editable h4,.cke_editable h5,.cke_editable h6,.cke_editable div,.cke_editable li,.cke_editable ol,.cke_editable ul {-webkit-font-smoothing: antialiased;font: normal normal 300 16px/24px HelveticaNeueW01-55Roma,HelveticaNeueW02-55Roma,HelveticaNeueW10-55Roma,\"'Helvetica Neue', Helvetica, Arial, Meiryo, 'Hiragino Kaku Gothic Pro W3', 'Hiragino Kaku Gothic Pro', sans-serif\";color:#20303c;}::selection {background-color:#d3edff}.cke_editable a {color:#4196e0}.cke_editable ol,.cke_editable ul {margin-top:0;margin-bottom:0}",isLink:!1,force:!1},a}},this.showC23=!0,this.linkToggler=function(a){return angular.injector(["ng"]).get("$q").when(a?void 0:"nonEmptyLinkID")},this.toggleLeftIcon="coloration:light",this.toggleRightIcon="coloration:dark",this.customDraggableItemValidation=function(a){return"Item 2"!==a.label},this.itemsArray=[{label:"Item 1",icon:"twitter"},{label:"Item 2",icon:"whatsapp"},{label:"Item 3 long long long long long long long long long",icon:"facebook",hidden:!0}],this.listItems=_.map(this.itemsArray,function(a){return _.omit(a,"icon")}),this.listItemsA=_.map(this.itemsArray,function(a){return _.omit(a,["icon","hidden"])}).map(function(a){return a.label===f.itemsArray[0].label?{label:"Default item",selected:!0}:a}),this.listItemsB=_.map(this.itemsArray,function(a){return _.omit(a,"icon")}),this.listItemsC=_.map(this.itemsArray,function(a){return _.omit(a,"icon")}).map(function(a){return a.label===f.itemsArray[0].label?{label:"Unhidable item",canHide:!1}:a}),this.listItemsD=angular.copy(this.itemsArray),this.listItemsE=angular.copy(this.itemsArray),this.listItemsM=_.map(this.itemsArray,function(a){return _.omit(a,"icon")}),this.multiPagePopup={heading:"Welcome to mobile editing",headingNext:"Mobile affects only mobile",text:"Now you can edit the mobile version of your website. Your site will be automatically optimized to look amazing on mobile",textNext:"Changes made in your mobile editor affect only your mobile website. Your desktop site will remain unchanged",nextButtonText:"Next",icon:"EditMobileFirstTime.svg",iconNext:"EditMobileFirstTime2.svg",cancelButtonText:"Cancel",gotItButtonText:"Got it",showCancelButton:!0},this.firstTimeNotice={heading:"Editing Business Info",text:"Editing your business info will change the info in all the places it appears in",hideFirstTimeCheckBox:!0,dontBotherMe:!0,dontBotherMeText:"Don't show again",acceptButtonText:"Got it",icon:"congrats.svg",biDialogName:"edit-business-info"},this.positiveConfirmation={heading:"Editing Business Info",text:"Editing your business info will change the info in all the places it appears in",acceptButtonText:"Got it",rejectButtonText:"Cancel",icon:"badge.gif",noClose:!0,biDialogName:"edit-business-info"},this.negativeConfirmation={heading:"Delete this section",text:"Are you sure you want to delete this section?",acceptButtonText:"Delete",rejectButtonText:"Cancel",icon:"delete-single.gif",biDialogName:"delete-section"},this.continuedAction={heading:"Move section",dropDownItems:[{name:"Page 1",value:"page_1"},{name:"Page 2",value:"page_2"},{name:"Page 3",value:"page_3"}],acceptButtonText:"Move",rejectButtonText:"Cancel",text:"Select a page from the list",biDialogName:"move-section",onHelp:this.onOpenSupportIframe.bind(this)},this.linkEditorMockDropDownItems=[{name:"None",value:""},{name:"URL",value:"http://bla.bla"},{name:"email",value:"mailto:boogie@man.com"}],this.linkEditorMock=function(a){return{heading:"Choose link",text:"Select a link from the list",dropDown:_.filter(f.linkEditorMockDropDownItems,function(b){return b.value===a})[0],dropDownItems:f.linkEditorMockDropDownItems,acceptButtonText:"Done",rejectButtonText:"Cancel",biDialogName:"edit-link",onHelp:f.onOpenSupportIframe.bind(f)}},this.c12Thumbnails={onSelect:function(a){console.log("Selected thumbnail",a)},label:"My Thumbnails",thumbnails:[{label:"Thumby",picture:"images/cat1.jpg",isSelected:!0},{label:"Wumby",picture:"images/cat2.png"},{label:"Chumby",picture:"images/cat3.jpg"}]},this.c2eState=!1,this.displayedRTTSections=[RTTSection.BoldUnderlineItalic,RTTSection.Linking,RTTSection.ClearFormatting],this.displayedRTTSections2=[RTTSection.BoldUnderlineItalic,RTTSection.Linking,RTTSection.Listing,RTTSection.ClearFormatting],this.RTTCommands=[],this.RTTCommandsDisabled=[!1,!1,!0,!1,!1,!1,!1],this.scrollDisabled=!1}return a.$inject=["CcDialogBuilder","ccTooltipManager","ccTip","$scope","$location"],a.prototype.validateGraphicItems=function(a){return"data"===a.data.some},a.prototype.toggleRTTCommand=function(a){this.RTTCommands[a]=!this.RTTCommands[a]},a.prototype.getRTTCommandState=function(a){return this.RTTCommands[a]},a.prototype.isRTTCommandDisabled=function(a){return this.RTTCommandsDisabled[a]},a.prototype.$onInit=function(){this.ccTooltipManager.setToolTip("PREVIOUS",{type:"hint",content:"Previous",appearance:"info"}),this.ccTooltipManager.setToolTip("NEXT",{type:"hint",content:"Next",appearance:"info"}),this.ccTooltipManager.setToolTip("TOOLTIP",{type:"hint",content:"This is a tooltip",appearance:"info"}),this.ccTooltipManager.setToolTip("SIMPLE",{type:"hint",content:"This is an Error tooltip",appearance:"error"}),this.ccTooltipManager.setToolTip("COMPILE",{type:"hint",content:'---&gt; <span class="cc-tooltip-link"><a ng-click="$ctrl.compiledTooltipClick()" href="">Click here</a></span> &lt;---',appearance:"info",compiled:!0,interactive:!0}),this.ccTooltipManager.setToolTip("COMPLEX",{type:"rich",content:"Lorem ipsum dolor sit amet, elit sit sollicitudin enim, turpis pretium etiam immet, elit sit sollicitudin enim, turpis pretium etiam im met, elit sit sollicitudin enim, turpis pretium etiam im",appearance:"error"}),this.iconsPages=_.chunk(this.icons,12).map(function(a,b){return{icons:a,label:"Icons "+(b+1)}}),this.listItemsC[0].helpTooltip="TOOLTIP",this.listItemsC[1].onHelp=this.onOpenSupportIframe.bind(this),this.visiblePanelLabel=this.visiblePanelLabel||this.getVisiblePanelFromURL()||"all"},a.prototype.backgroundPreviewEdit=function(){console.log("backgroundPreviewEdit")},a.prototype.getVisiblePanelFromURL=function(){return this.$location.search().visiblePanel},a.prototype.onC20GraphicRadio=function(a){console.log("onC20GraphicRadio",a)},a.prototype.onP25BackgroundPreview=function(a){console.log("onP25BackgroundPreview",a)},a.prototype.isVisible=function(a){return"all"===this.visiblePanelLabel&&!a.startsWith("e2e")||this.visiblePanelLabel===a},a.prototype.help=function(){console.log("hello help"),this.onOpenSupportIframe()},a.prototype.close=function(){console.log("close")},a.prototype["return"]=function(){console.log("return"),this.visiblePanelLabel="all"},a.prototype.maskChange=function(){console.log("toggle mask")},a.prototype.valueChange=function(a){console.log("value changed: "+a)},a.prototype.onBlur=function(){console.log("blur")},a.prototype.onTooltipClick=function(){console.log("tooltip clicked")},a.prototype.genericMenuItemClick=function(){console.log("generic menu item click")},a.prototype.genericMenuClick=function(a){console.log("generic menu click, item:",a)},a.prototype.actionButtonClick=function(){console.log("action button click")},a.prototype.displayModal=function(a){var b=a.popup,c=a.model;this.CcDialogBuilder[b](this[c])},a.prototype.simulateRichTextLinkDialog=function(a){return this.CcDialogBuilder.showPositiveContinuedAction(this.linkEditorMock(a)).then(function(a){return a.selected.value})},a.prototype.displayTip=function(){this.firstTip=this.ccTip.build({scope:{contact:{name:"Rachel",profession:"Wix Specialist",img:"images/cat2.png"},title:"Your'e about to add your Practices section",contentLink:{text:"See Examples >",url:"http://www.wix.com"},footer:{closeButton:"Got it"}},style:{top:"150px",left:"1242px"},templateUrl:"views/tips/example.html",onHide:function(a){console.log("I just clicked on hide",a)}}),this.ccTip.show(this.firstTip)},a.prototype.updateTipContent=function(){this.ccTip.update(this.firstTip,{scope:{contact:{name:"Alon",profession:"FED developer",img:"images/cat3.jpg"},title:"That is a new title",contentLink:{text:"New text",url:"http://www.wix-new.com"},footer:{closeButton:"New button"}},template:"This is some new <b>content</b>"})},a.prototype.compiledTooltipClick=function(){console.log("compiled tooltip clicked")},a.prototype.onGroupToggled=function(a){console.log("group toggled",a)},a.prototype.onGroupToggled2=function(a){console.log("group toggled2",a)},a.prototype.onMediaPreviewToggled=function(a){console.log("media preview toggled",a)},a.prototype.listItemP10aClick=function(a){this.listItemsA.forEach(function(a){a.selected=!1}),a.selected=!0,console.log("list item click, item:",a)},a.prototype.listItemP10aEdit=function(a){this.listItemsA.forEach(function(a){a.selected=!1}),a.selected=!0,console.log("list item edit, item:",a)},a.prototype.onCheckboxToggle=function(a){console.log("checkbox state changed",a.checked)},a.prototype.onSliderValueChange=function(a,b){console.log("slider value changed",a,b)},a.prototype.onRadioValueChange=function(a,b){console.log("radio value changed",a,b)},a.prototype.onToggleValueChange=function(a){console.log("toggle value changed",a)},a.prototype.onItemNavigationValueChange=function(a,b){console.log("item navigation value changed",a,b)},a.prototype.onCheckboxListItemChange=function(a){console.log("checkbox list item changed",a)},a.prototype.onTabsItemChange=function(a){console.log("tabs item changed",a)},a.prototype.onAutocompleteLinkClick=function(){console.log("autocomplete link clicked")},a.prototype.onActionClick=function(){console.log("on action click")},a.prototype.onDropdownListSelectionChange=function(a){console.log("selection changed",a)},a.prototype.onListOrderChange=function(a){console.log("list order change: ",a)},a.prototype.onOpenIframe=function(){this.CcDialogBuilder.showIframe("http://www.wix.com")},a.prototype.onOpenSupportIframe=function(){this.CcDialogBuilder.showSupportIframe("https://www.wix.com/support/html5/widget/0/63ff21be-9556-4f52-9ac9-4d441bd3dae4#/main/view?itemId=8764da11-da73-4b57-adb9-cee9be8d1c4e","bi-dialog-name")},a.prototype.onMediaChange=function(a){var b=this;console.log("media change button clicked",a),this.disableMediaChangeButton=!0,setTimeout(function(){b.disableMediaChangeButton=!1,b.$scope.$apply()},2e3)},a.prototype.toggleC2EState=function(){this.c2eState=!this.c2eState},a.prototype.checkC2EValue=function(){console.log("Checking value of C2E: "+this.c2eValue)},a.prototype.labelFilter=function(a){return a.substring(0,1)},a.prototype.onColorTagsClick=function(){console.log("color tags clicked")},a.prototype.keyCatcher=function(a){this.keyCatcherOutput=(a.ctrlKey?"ctrl ":"")+(a.metaKey?"meta ":"")+(a.shiftKey?"shift ":"")+(a.altKey?"alt ":"")+a.key},a.prototype.toggleDisableScroll=function(){this.scrollDisabled=!this.scrollDisabled},a}();angular.module("commonControlsAppInternal").component("ccPlayground",{bindings:{visiblePanelLabel:"@"},templateUrl:"views/playground.html",controller:CCPlayground});var P0Spacer=function(){function a(){}return Object.defineProperty(a.prototype,"verticalSpacer",{get:function(){return!this.isHorizontal},enumerable:!0,configurable:!0}),a.prototype.$onInit=function(){"undefined"==typeof this.size||-1===["medium","large"].indexOf(this.size)?this.sizeClass="":this.sizeClass="-"+this.size},a}();angular.module("commonControlsAppInternal").component("p0Spacer",{templateUrl:"views/primitives/p0-spacer.html",controller:P0Spacer,bindings:{size:"@?",isHorizontal:"@?"}});var P1TextInput=function(){function a(a,b){this.$scope=a,this.keyMap=b}return a.$inject=["$scope","keyMap"],a.prototype.$onInit=function(){this.isLongTextFocused=!1,"undefined"==typeof this["long"]&&(this["long"]=!1),"undefined"==typeof this.debounceDelay&&(this.debounceDelay=0),"undefined"==typeof this.changeValueOnBlur&&(this.changeValueOnBlur=!1),this.initValidation(),this.initModelOptions(),this.selectOnFocus=this.selectOnFocus===!1?!1:!0},a.prototype.initValidation=function(){this.validation&&(this.validation.isValid=!0),this.validator=this.getValidation("validator",function(){return!0}),this.validationTooltip=this.getValidation("tooltip",null)},a.prototype.initModelOptions=function(){var a=this,b=function(){return a.modelOptions={updateOn:a.changeValueOnBlur?"default blur":"default",debounce:{"default":a.debounceDelay,blur:0}}};this.$scope.$watch(function(){return a.debounceDelay},b),this.$scope.$watch(function(){return a.changeValueOnBlur},b)},a.prototype.onLongTextFocus=function(a){this.$scope.$broadcast("elastic:adjust"),this.isLongTextFocused=!0,this.onFocus&&this.onFocus({$event:a})},a.prototype.onShortTextFocus=function(a){this.onFocus&&this.onFocus({$event:a})},a.prototype.onLongTextBlur=function(a){this.isLongTextFocused=!1,this.onBlur({$event:a})},a.prototype.onTextKeyUp=function(a,b){void 0===b&&(b=!1),a.keyCode===this.keyMap.KEY_ENTER&&this["long"]||((a.keyCode===this.keyMap.KEY_ENTER||a.keyCode===this.keyMap.KEY_ESC)&&this.onBlur({$event:a}),a.keyCode===this.keyMap.KEY_ENTER&&this.onSubmit&&this.onSubmit({value:this.value}),this.onKeyup&&!this["long"]&&this.onKeyup({$event:a}))},a.prototype.onChange=function(){this.setValidity(),this.onChangeValue&&this.onChangeValue({value:this.value})},a.prototype.isInputValid=function(){return this.isShowValidatorError&&this.validation?this.validation.isValid:!0},a.prototype.setValidity=function(){this.validation&&this.validator&&(this.validation.isValid=this.validator(this.value))},a.prototype.getValidation=function(a,b){return this.validation&&this.validation[a]||b},a}();angular.module("commonControlsAppInternal").component("p1TextInput",{templateUrl:"views/primitives/p1-text-input.html",controller:P1TextInput,bindings:{value:"=",isDisabled:"=",isShowValidatorError:"=?","long":"=?",focused:"=?",placeholder:"=",debounceDelay:"=?",changeValueOnBlur:"<",onChangeValue:"&",onSubmit:"&",onBlur:"&",onFocus:"&",onKeyup:"&",maxLength:"@?",validation:"=?",selectOnFocus:"=?"}});var P3DropdownList=function(){function a(a){this.$scope=a,this.showList=!1}return a.$inject=["$scope"],a.prototype.$onInit=function(){var a=this;this.selectedIndex=_.indexOf(this.items,this.value),this.$scope.$watch("$ctrl.value",function(b,c){a.selectedIndex=_.indexOf(a.items,a.value)})},a.prototype.getTitle=function(a){return this.showTitles?this.getItemLabel(a):""},Object.defineProperty(a.prototype,"mdContainerClass",{get:function(){return["cc-md-select",this.containerClass].join(" ")},enumerable:!0,configurable:!0}),a.prototype.toggleList=function(){this.showList=!this.showList},a.prototype.closeList=function(){this.showList=!1},a.prototype.getItemLabel=function(a){return this.labelKey?a[this.labelKey]:a},a.prototype.itemSelected=function(a,b){this.selectedIndex=b,this.showList=!1,this.value!==a&&(this.value=a,this.onSelectionChange&&this.onSelectionChange({item:a}))},a.prototype.onOpen=function(){return this.onOpenList?this.onOpenList():void 0},a}();angular.module("commonControlsAppInternal").component("p3DropdownList",{templateUrl:"views/primitives/p3-dropdown-list.html",controller:P3DropdownList,bindings:{value:"=",items:"=",trackByKey:"@",labelKey:"@",linkTitle:"@",onSelectionChange:"&",onLinkClick:"&",onOpenList:"&",placeholder:"@?",showTitles:"<?",containerClass:"@?",noHover:"<?",onHelp:"&?",helpTooltip:"@?"}});var P5Slider=function(){function a(a,b,c){var d=this;this.$element=a,this.$scope=b,this.keyMap=c,this.dragBegin=null,this.mouseListeners={downOnLine:function(a){if(null===d.dragBegin){var b=a.offsetX;"p5-slider"===a.target.className&&(b-=d.p5Handle.width()/2);var c=b/d.pxLength,e=c*d.unitsLength;d.unroundedValue=e+d.min,d.mouseListeners.down(a),d.mouseListeners.move(a)}},down:function(a){null===d.dragBegin&&(document.activeElement&&document.activeElement.blur(),d.dragBegin=d.pxLocation-a.screenX,a.preventDefault(),window.addEventListener("mousemove",d.mouseListeners.move,!1),d.$scope.$apply(function(){d.dragging=!0}))},move:function(a){var b=d.dragBegin+a.screenX,c=b/d.pxLength,e=c*d.unitsLength;d.unroundedValue=e+d.min,d.stepper?d.$scope.$apply(function(){d.update()}):(d.unroundedValue>d.max?d.updateHandle(d.pxLength):d.unroundedValue<d.min?d.updateHandle(0):d.updateHandle(b),d.$scope.$apply(function(){d.updateValue(),d.updateLabel()}))},up:function(a){null!==d.dragBegin&&(d.dragBegin=null,d.$scope.$apply(function(){d.dragging=!1,d.update(),d.onValueSettle&&d.onValueSettle({value:d.value})}),window.removeEventListener("mousemove",d.mouseListeners.move,!1))},enter:function(a){1!==a.buttons&&d.mouseListeners.up()}}}return a.$inject=["$element","$scope","keyMap"],Object.defineProperty(a.prototype,"pxLength",{get:function(){return this.p5Slider.width()-this.p5Handle.width()},enumerable:!0,configurable:!0}),a.prototype.updateHandle=function(a){a=Math.round(a),(this.p5Handle[0].dataset.left!==a||void 0===this.steppers)&&this.updateSteppers(),this.p5Handle[0].dataset.left=a,this.p5Handle[0].style.transform="translateX("+a+"px)",this.p5Current[0].style.width=a+"px"},a.prototype.updateValue=function(){var a=this.value;void 0===this.unroundedValue?this.value=void 0:(this.unroundedValue<this.min&&(this.unroundedValue=this.min),this.unroundedValue>this.max&&(this.unroundedValue=this.max),void 0===this.step?this.value=this.unroundedValue:(this.value=Math.round((this.unroundedValue-this.min)/this.step)*this.step+this.min,this.value=Math.round(100*this.value)/100)),this.value!==a&&this.onValueChange({value:this.value}),this.p5Slider.css("visibility",void 0!==this.value||this.stepper?"visible":"hidden")},a.prototype.updateLabel=function(){this.editing||(this.label=void 0===this.value?"":this.value.toString()+this.units)},a.prototype.update=function(){this.updateValue(),this.unroundedValue=this.value,this.updateLabel(),this.updateHandle(this.pxLocation)},Object.defineProperty(a.prototype,"pxLocation",{get:function(){return this.location*this.pxLength},enumerable:!0,configurable:!0}),Object.defineProperty(a.prototype,"location",{get:function(){return this.unitsLocation/this.unitsLength},enumerable:!0,configurable:!0}),Object.defineProperty(a.prototype,"unitsLocation",{get:function(){return void 0===this.unroundedValue?0:this.unroundedValue-this.min},enumerable:!0,configurable:!0}),Object.defineProperty(a.prototype,"unitsLength",{get:function(){return this.max-this.min},enumerable:!0,configurable:!0}),a.prototype.onIconClick=function(a){a.stopPropagation()},a.prototype.onInputFocus=function(){this.editing=!0,this.label=void 0===this.value?"":this.value.toString()},a.prototype.onInputBlur=function(){this.editing=!1,this.updateLabel()},a.prototype.onInputKeyup=function(a){a.keyCode===this.keyMap.KEY_ENTER&&this.$element.find("input").trigger("blur")},a.prototype.updateSteppers=function(){var a,b,c,d=this.pxLength,e=this.unitsLength;if(0!==this.pxLength&&this.stepper)for(this.steppers=[],a=0;a>=e&&(b=!0,a=e),c=a/e,this.steppers.push({left:c*d,filled:this.unroundedValue>=a+this.min}),!b;a+=this.step);},a.prototype.$onInit=function(){this.p5Slider=this.$element.find(".p5-slider"),this.p5Handle=this.$element.find(".p5-handle"),this.p5Current=this.$element.find(".p5-current"),this.editing=!1,this.dragging=!1,this.unroundedValue=this.value,void 0===this.units&&(this.units=""),void 0===this.stepper&&(this.stepper=!1),void 0===this.stepperTicks&&this.stepper&&(this.stepperTicks=!0)},a.prototype.$postLink=function(){var a=this;this.update(),this.$element.on("DOMNodeInsertedIntoDocument",function(){a.$scope.$apply(function(){return a.update()})}),this.$scope.$watch("$ctrl.value",function(){null===a.dragBegin&&(a.unroundedValue=a.value,a.update())}),this.$scope.$watch("$ctrl.label",function(){a.editing&&(""===a.label?a.unroundedValue=void 0:(a.unroundedValue=parseFloat(a.label),isNaN(a.unroundedValue)&&(a.unroundedValue=a.min)),a.update())}),this.p5Slider.mousedown(this.mouseListeners.downOnLine),this.p5Handle.mousedown(this.mouseListeners.down),window.addEventListener("mouseup",this.mouseListeners.up,!1),document.body.addEventListener("mouseenter",this.mouseListeners.enter)},a.prototype.$onDestroy=function(){window.removeEventListener("mouseup",this.mouseListeners.up,!1),document.body.removeEventListener("mouseenter",this.mouseListeners.enter,!1)},a}();angular.module("commonControlsAppInternal").component("p5Slider",{templateUrl:"views/primitives/p5-slider.html",controller:P5Slider,bindings:{onValueChange:"&",onValueSettle:"&?",onFocus:"&",onBlur:"&",units:"=?",step:"=",min:"=",max:"=",value:"=",stepper:"=?",stepperTicks:"=?",type:"@",iconBefore:"@?",iconAfter:"@?"}});var P6ControlHeader=function(){function a(){}return a.prototype.shouldToggle=function(a){var b=$(a.target).closest("[data-name='toggle-button']"),c=b&&"toggle-button"===b.data("name")?!0:!1;return this.onToggle&&(c||!this.active)&&!this.hideToggleButton},a.prototype.toggle=function(a){this.shouldToggle(a)&&this.onToggle({$event:a})},a}();angular.module("commonControlsAppInternal").component("p6ControlHeader",{templateUrl:"views/primitives/p6-control-header.html",controller:P6ControlHeader,transclude:!0,bindings:{label:"=",showNewTooltip:"=?",showHelpButton:"=?",hideToggleButton:"=?",onToggle:"&",onHelp:"&",active:"=?",helpTooltip:"@?"}});var P11ItemNavigation=function(){function a(){}return a.prototype.canPrev=function(){return this.current>1},a.prototype.canNext=function(){return this.current<this.count},a.prototype.goPrevious=function(){this.canPrev()&&(this.current--,this.onPrevious&&this.onPrevious({current:this.current}))},a.prototype.goNext=function(){this.canNext()&&(this.current++,this.onNext&&this.onNext({current:this.current}))},a}();angular.module("commonControlsAppInternal").component("p11ItemNavigation",{templateUrl:"views/primitives/p11-item-navigation.html",controller:P11ItemNavigation,bindings:{nextTooltip:"@",previousTooltip:"@",current:"=",count:"=",onPrevious:"&",onNext:"&"}});var P12Thumbnail=function(){function a(){}return a}();angular.module("commonControlsAppInternal").component("p12Thumbnail",{controller:P12Thumbnail,bindings:{thumbnail:"=",isSelected:"="},template:'\n                <div class="p12-thumbnail-wrapper" ng-class="{selected: $ctrl.isSelected}">\n                  <div class="p12-label-wrapper p8-label" ng-class="{\'-hidden\': !$ctrl.isSelected, \'-active\': $ctrl.isSelected}">\n                    <span class="p12-label-icon" ng-show="$ctrl.isSelected"><i class="cc-icon-check"></i></span>\n                    <span class="p12-label">{{$ctrl.thumbnail.label}}</span>\n                  </div>\n                  <div class="p12-picture-wrapper">\n                    <img class="p12-picture" ng-src="{{$ctrl.thumbnail.picture}}" />\n                  </div>\n                </div>\n              '});var P13RadioButtons=function(){function a(){this.name=Math.random().toString()}return a.prototype.setValue=function(a){this.value!==a&&(this.value=a,this.onValueChange({value:this.value}))},a}();angular.module("commonControlsAppInternal").component("p13RadioButtons",{
templateUrl:"views/primitives/p13-radio-buttons.html",controller:P13RadioButtons,bindings:{onValueChange:"&",items:"=",value:"="}});var P14Checkbox=function(){function a(){}return a.prototype.valueChanged=function(){this.onToggle&&this.onToggle({item:this.item})},a.prototype.toggleValue=function(a){this.item.checked=a,this.valueChanged()},a.prototype.toggleRequire=function(){this.item.required=!this.item.required,this.onRequiredChange&&this.onRequiredChange({item:this.item})},a}();angular.module("commonControlsAppInternal").component("p14Checkbox",{templateUrl:"views/primitives/p14-checkbox.html",controller:P14Checkbox,bindings:{item:"=",onToggle:"&",onRequiredChange:"&"}});var P15Toggle=function(){function a(a,b){this.$element=a,this.$scope=b}return a.$inject=["$element","$scope"],a.prototype.$onInit=function(){var a=this;this.value||(this.value=!1),this.$element.click(function(b){a.$scope.$apply(function(){a.value=!a.value,a.onValueChange({value:a.value})})}),this.$scope.$watch("$ctrl.value",function(b,c){a.value?angular.element(a.$element.find("div")[0]).addClass("p15-on"):angular.element(a.$element.find("div")[0]).removeClass("p15-on")})},a}();angular.module("commonControlsAppInternal").component("p15Toggle",{templateUrl:"views/primitives/p15-toggle.html",controller:P15Toggle,bindings:{onValueChange:"&",value:"=",leftIcon:"=?",rightIcon:"=?"}});var P16PanelHeader=function(){function a(a,b){this.$element=a,this.$timeout=b}return a.$inject=["$element","$timeout"],a.prototype.hasNumber=function(){return _.isFinite(parseFloat(this.number))},a}();angular.module("commonControlsAppInternal").component("p16PanelHeader",{templateUrl:"views/primitives/p16-panel-header.html",controller:P16PanelHeader,bindings:{label:"@",number:"@?",helpTooltip:"@?",onHelp:"&?",onClose:"&?",onReturn:"&?",onReset:"&?",showHelpButton:"=?",showCloseButton:"=?",showReturnButton:"=?",showResetButton:"=?"}}),angular.module("commonControlsAppInternal").component("p17Divider",{templateUrl:"views/primitives/p17-divider.html",bindings:{shorterDivider:"<"}});var P20Link=function(){function a(a){this.$translate=a,this.connectLabel=this.translateLabel("general.no-link.hover")||"Connect",this.noLinkLabel=this.translateLabel("general.no-link")||"Not Connected"}return a.$inject=["$translate"],a.prototype.translateLabel=function(a){var b=this.$translate(a);return a!==b?b:null},a}();angular.module("commonControlsAppInternal").component("p20Link",{templateUrl:"views/primitives/p20-link.html",controller:P20Link,bindings:{link:"=",onLinkClick:"&",isHover:"=?"}});var P21ColorTag=function(){function a(){this.placeholderIcon="add-large",this.defaultColor="#fff",this.buttonOffsetLarge=42}return a.prototype.handleClick=function(a){this.onClick&&this.onClick({color:this.color,$event:a})},a.prototype.getIcon=function(){return this.icon||"edit"},a}();angular.module("commonControlsAppInternal").component("p21ColorTag",{templateUrl:"views/primitives/p21-color-tag.html",controller:P21ColorTag,controllerAs:"$ctrl",bindings:{color:"@",size:"@",showIcon:"<",icon:"@",isSelected:"<",isPlaceholder:"<",tooltip:"@",onClick:"&?"}});var P22CommandState;!function(a){a[a.Active=0]="Active",a[a.Inactive=1]="Inactive",a[a.Disabled=2]="Disabled"}(P22CommandState||(P22CommandState={}));var P22RichTextToolbar=function(){function a(){var a=this;this.isBUISectionVisible=function(){return a.isSectionDisplayed(RTTSection.BoldUnderlineItalic)},this.isListingSectionVisible=function(){return a.isSectionDisplayed(RTTSection.Listing)},this.isLinkingSectionVisible=function(){return a.isSectionDisplayed(RTTSection.Linking)},this.isClearFormattingSectionVisible=function(){return a.isSectionDisplayed(RTTSection.ClearFormatting)}}return a.staticGetName=function(a){return _.kebabCase(RTTCommand[a])},a.upperFirst=function(a){return a.substring(0,1).toUpperCase()+a.substring(1)},a.prototype.getCommandByName=function(b){var c=a.upperFirst(_.camelCase(b));if("undefined"==typeof RTTCommand[c])throw Error("Unidentified command name: "+b+" ("+c+")");return RTTCommand[c]},a.prototype.isSectionDisplayed=function(a){return-1!==this.displayedSections.indexOf(a)},a.prototype.isActive=function(a){var b=this.getCommandByName(a);return this.commandState({command:b})===P22CommandState.Active},a.prototype.commandDisabled=function(a){var b=this.getCommandByName(a),c=this.commandState({command:b});return c===P22CommandState.Disabled},a.prototype.buttonClick=function(a){var b=this.getCommandByName(a);this.commandDisabled(a)||this.onClick({command:b})},a.prototype.getLinkTooltip=function(){var a=this.getCommandByName("link");switch(this.commandState({command:a})){case P22CommandState.Inactive:return"richtext_add-link";case P22CommandState.Active:return"richtext_edit-link";case P22CommandState.Disabled:return"richtext_cannot-link"}},a}();angular.module("commonControlsAppInternal").component("p22RichTextToolbar",{templateUrl:"views/primitives/p22-rich-text-toolbar.html",controller:P22RichTextToolbar,bindings:{displayedSections:"=",commandState:"&",onClick:"&"}});var P23RichTextInput=function(){function a(a,b,c,d,e,f,g){var h=this;this.$scope=a,this.$element=b,this.$timeout=c,this.osUtils=d,this.focusKeeper=e,this.keyMap=f,this.ccDebounce=g,this.ckCmdState={},this.mdDialogIsOpen=!1,this.heightStabilized=!1,this.mostUpdatedData="",this.setEditorInstance=function(a){h.instance=a,h.focusOnInit&&h.focused&&h.$timeout(function(){return h.handleFocusOnInstance()},150),h.instance.onDataChange(function(a){return h.mostUpdatedData=a,h.value=a,h.debouncedChangeHandler(a)}),h.instance.onCut(function(){h.$timeout(function(){h.instance.commands.autogrow();var a=h.instance.getData();h.onChangeValue({value:a})})}),h.instance.onCmdStateChange(function(a){h.$timeout(function(){h.ckCmdState=a})}),h.instance.onFocus(function(){h.isDisabled||(h.heightStabilized=!0,h.markAsActiveEditor(),h.mdDialogIsOpen||h.ignoreBlurAndFocus||h.focusP23())}),h.instance.onBlur(function(){!h.instance||h.instance.isIgnoringBlur||h.mdDialogIsOpen||h.ignoreBlurAndFocus||h.blurP23()}),h.instance.onKey(function(a){if(!h.mdDialogIsOpen)switch(a.keyCode){case h.keyMap.KEY_ESC:h.setIgnoreBlurAndFocus(!1),h.blurEditor();break;case h.keyMap.KEY_TAB:case h.keyMap.KEY_SHIFT:h.setIgnoreBlurAndFocus(!1);break;default:h.setIgnoreBlurAndFocus(!0)}}),h.instance.onExternalPasteHandle(function(a){h.onExternalPaste&&(a.data.pasteString=h.onExternalPaste({value:a.data.pasteString}))}),h.instance.setData(h.value||"",{setSelectionOnStart:!1,validateHtml:!1,callback:function(){h.mostUpdatedData=h.instance.getData(),h.ckCmdState=h.instance.getCommandsStates(),h.onReady&&h.onReady(),h.autogrowWhenReady(1e4)}})}}return a.$inject=["$scope","$element","$timeout","osUtils","focusKeeper","keyMap","ccDebounce"],a.prototype.$onInit=function(){var a=this;this.$scope.$watch("$ctrl.value",function(b){!a.isActiveEditor()&&a.instance&&b&&(a.instance.setData(b,{setSelectionOnStart:!1,validateHtml:!1}),a.mostUpdatedData=b)}),this.$scope.$watch("$ctrl.focused",function(b){b&&a.handleFocusOnInstance()}),this.registerCommandRunner({runner:this.runCommand.bind(this),utilFuncs:{isAlive:function(){return!!a.instance},getValue:function(){return a.mostUpdatedData},getDimensions:function(){return a.instance.getDimensions()},hasSelection:function(){return a.instance.hasSelection()},selectAll:function(){return a.selectAllInEditor()},getCKCommandState:function(b){return a.getCKCommandState(b)},focusEditor:function(b){return void 0===b&&(b=!1),a.focusEditor(b)},blurP23:function(){return a.blurP23()},isActiveEditor:function(){return a.isActiveEditor()},markAsActiveEditor:function(){return a.markAsActiveEditor()}}}),"undefined"==typeof this.debounceDelay&&(this.debounceDelay=500),this.debouncedChangeHandler=this.ccDebounce(this.debounceDelay,function(b){a.$timeout(function(){return a.onChangeValue({value:b})})},!0),this.$element.on("$destroy",function(){a.instance&&(a.focusKeeper.clearActiveEditor(a),a.instance.destroy(),a.instance=void 0)})},a.prototype.handleFocusOnInstance=function(){this.ignoreBlurAndFocus||(this.markAsActiveEditor(),this.focusEditor(!0))},a.prototype.setIgnoreBlurAndFocus=function(a){var b=this;this.ignoreBlurAndFocus!==a&&this.$scope.$apply(function(){b.ignoreBlurAndFocus=a})},a.prototype.autogrowWhenReady=function(a){var b=this;if(!this.heightStabilized&&a>=0&&this.instance){var c=this.instance.getDimensions();this.instance.commands.autogrow(),_.isEqual(this.instance.getDimensions(),c)?this.$timeout(function(){return b.autogrowWhenReady(a-100)},100):this.heightStabilized=!0}},a.prototype.focusP23=function(){this.onFocus({$event:null,$value:this.mostUpdatedData})},a.prototype.blurP23=function(){!this.osUtils.isIE&&this.instance&&this.instance.collapseSelection(),this.focusKeeper.clearActiveEditor(this),this.onBlur({$event:null,$value:this.mostUpdatedData}),this.changeValueOnBlur&&this.debouncedChangeHandler.flushPending()},a.prototype.isActiveEditor=function(){return this===this.focusKeeper.getActiveEditor()},a.prototype.markAsActiveEditor=function(){this.focusKeeper.setActiveEditor(this)},a.prototype.focusEditor=function(a){void 0===a&&(a=!0),this.instance&&this.isActiveEditor()&&(this.instance.focus(),a&&this.selectAllInEditor())},a.prototype.blurEditor=function(){this.instance&&window.focus()},a.prototype.selectAllInEditor=function(){this.instance?this.execCommand("selectAll"):console.log("trying to selectAllInEditor() when no instance!")},a.prototype.execCommand=function(a){for(var b=[],c=1;c<arguments.length;c++)b[c-1]=arguments[c];this.instance&&(d=this.instance).execCommand.apply(d,[a].concat(b));var d},a.prototype.clearFormatting=function(){this.instance&&this.instance.hasSelection()&&(this.execCommand("resetThemeAndStyles"),this.defaultFormatting&&(this.defaultFormatting.isBold()&&this.runCommand(RTTCommand.Bold),this.defaultFormatting.isItalic()&&this.runCommand(RTTCommand.Italic),this.defaultFormatting.isUnderline()&&this.runCommand(RTTCommand.Underline)))},a.prototype.linkCommand=function(){var b=this,c=this.commandState({command:RTTCommand.Link});if(this.instance&&(c===P22CommandState.Active||c===P22CommandState.Inactive)){var d=_.get(this.ckCmdState,[a.currentLinkIdField]);this.mdDialogIsOpen=!0,this.onLinkCommand({linkId:d}).then(function(a){a?b.execCommand("wixLink",a):b.execCommand("wixUnlink")})["catch"](function(a){return angular.noop})["finally"](function(){b.mdDialogIsOpen=!1,b.focusEditor(!1)})}},a.prototype.runCommand=function(b){switch(b){case RTTCommand.Bold:case RTTCommand.Underline:case RTTCommand.Italic:case RTTCommand.Bullets:case RTTCommand.Numbers:this.execCommand(a.getCKEditorCommandName(b));break;case RTTCommand.Link:this.linkCommand();break;case RTTCommand.ClearFormatting:this.clearFormatting();break;default:throw"Unknown command: "+b}},a.getCKEditorCommandName=function(a){switch(a){case RTTCommand.Bold:return"bold";case RTTCommand.Italic:return"italic";case RTTCommand.Underline:return"underline";case RTTCommand.Bullets:return"bulletedlist";case RTTCommand.Numbers:return"numberedlist";case RTTCommand.Link:return"wixLink";case RTTCommand.ClearFormatting:return"clearFormatting";default:return"unknown command!"}},a.prototype.getCKCommandState=function(b){var c=a.getCKEditorCommandName(b),d=this.ckCmdState[c];return"wixLink"===c&&0===d?P22CommandState.Disabled:d?P22CommandState.Active:P22CommandState.Inactive},a.currentLinkIdField="wixLink",a}(),RichtextProvider=function(){function a(){}return a.prototype.createInstance=function(a){richtext.createInstance(a)},a}(),FocusKeeper=function(){function a(){}return a.prototype.setActiveEditor=function(a){a!==this.activeEditor&&(this.clearActiveEditor(this.activeEditor),this.activeEditor=a)},a.prototype.clearActiveEditor=function(a){this.activeEditor===a&&(this.activeEditor&&(this.activeEditor.ignoreBlurAndFocus=!1),this.activeEditor=void 0)},a.prototype.getActiveEditor=function(){return this.activeEditor},a.prototype.setIsIgnoringBlurOnActiveEditor=function(a){this.activeEditor&&this.activeEditor.instance&&(this.activeEditor.instance.isIgnoringBlur=a)},a.prototype.restoreFocus=function(){this.activeEditor&&this.activeEditor.focusEditor(!1)},a}();angular.module("commonControlsAppInternal").component("p23RichTextInput",{templateUrl:"views/primitives/p23-rich-text-input.html",controller:P23RichTextInput,bindings:{onChangeValue:"&",debounceDelay:"=?",defaultFormatting:"=",onLinkCommand:"&?",onExternalPaste:"&?",registerCommandRunner:"&",onBlur:"&",onFocus:"&",onReady:"&?",focused:"=?",focusOnInit:"=?",isDisabled:"=?",value:"=",commandState:"&",linksManager:"=",stylesManager:"=",ignoreBlurAndFocus:"=",changeValueOnBlur:"<"}}).directive("p23RichTextInputInline",["richtextProvider",function(a){return{restrict:"A",require:"^p23RichTextInput",link:function(b,c,d,e){if(e.isDisabled)c.html(e.value);else{var f={domElement:c[0],initialData:e.value,onLoaded:e.setEditorInstance,linksManager:e.linksManager,stylesManager:e.stylesManager,setSelectionOnStart:!1,validateHtml:!1};a.createInstance(f)}}}}]).service("richtextProvider",RichtextProvider).service("focusKeeper",FocusKeeper);var P24Palette=function(){function a(){}return a}();angular.module("commonControlsAppInternal").component("p24Palette",{templateUrl:"views/primitives/p24-palette.html",controller:P24Palette,bindings:{colors:"<",isSelectable:"<",isSelected:"<"}});var P25BackgroundPreview=function(){function a(a,b,c){this.$element=a,this.mediaUrl=b,this.ccTooltipManager=c,this.$containerWidth=240,this.$containerHeight=102,this.$containerWidthBig=300,this.$containerHeightBig=118,this.$galleryItemMargin=4}return a.$inject=["$element","mediaUrl","ccTooltipManager"],Object.defineProperty(a.prototype,"dotsLimit",{get:function(){return a.DOTS_LIMIT},enumerable:!0,configurable:!0}),Object.defineProperty(a.prototype,"slidesLimit",{get:function(){return a.SLIDES_LIMIT},enumerable:!0,configurable:!0}),Object.defineProperty(a.prototype,"tooltip",{get:function(){var a="p25background_"+this.data.type,b=this.ccTooltipManager.tooltips[a];return b||this.ccTooltipManager.setToolTip(a,{type:"hint",content:this.tooltipText,appearance:"info"}),a},enumerable:!0,configurable:!0}),Object.defineProperty(a.prototype,"tooltipText",{get:function(){switch(this.data.type){case"color":return"Color";case"gallery":return"Gallery";case"pattern":return"Pattern";case"bgImage":return"Image";case"video":return"Video"}},enumerable:!0,configurable:!0}),Object.defineProperty(a.prototype,"videoTag",{get:function(){return this._videoTag||(this._videoTag=this.$element.find(".video-tag")[0]),this._videoTag},enumerable:!0,configurable:!0}),Object.defineProperty(a.prototype,"isVideo",{get:function(){return"video"===this.data.type},enumerable:!0,configurable:!0}),Object.defineProperty(a.prototype,"isGallery",{get:function(){return"gallery"===this.data.type},enumerable:!0,configurable:!0}),Object.defineProperty(a.prototype,"isSlideshow",{get:function(){return this.isGallery&&"slideshow"===this.data.metaData.galleryType},enumerable:!0,configurable:!0}),Object.defineProperty(a.prototype,"cls",{get:function(){return"container-"+(this.data.type||"").toLowerCase()},enumerable:!0,configurable:!0}),a.prototype.getImageURL=function(a){var b,c="small"===this.size?this.$containerHeight:this.$containerHeightBig;b="gallery"===this.data.type&&"showcase"===this.data.metaData.galleryType?c+this.$galleryItemMargin:"small"===this.size?this.$containerWidth:this.$containerWidthBig;var d=this.mediaUrl.generate({relativeUri:a},b,c);return d},a.prototype.getGalleryURL=function(a){return this.getImageURL(a)},Object.defineProperty(a.prototype,"imageURL",{get:function(){return this.getImageURL(this.data.value)},enumerable:!0,configurable:!0}),Object.defineProperty(a.prototype,"style",{get:function(){switch(this.data.type){case"color":return{backgroundColor:this.data.value};case"pattern":return{backgroundImage:"url("+MediaUrl.MEDIA_BASE_URL+"media/"+this.data.value+")",backgroundColor:_.get(this.data.metaData,"patternBgColor"),backgroundSize:_.get(this.data.metaData,"thumbRatio",100)+"%"};case"bgImage":return{backgroundImage:"url("+this.imageURL+")"};case"video":default:return""}},enumerable:!0,configurable:!0}),a.prototype.$onInit=function(){this.initSize(),this.initSlides()},a.prototype.initSlides=function(){var a=this;this.isGallery&&_.range(0,this.slidesLimit-this.data.value.length).forEach(function(){a.data.value.push(a.data.value[0])})},a.prototype.initSize=function(){this.size=this.size||"small"},a.prototype.mouseEnter=function(){this.isVideo&&this.videoTag.play()},a.prototype.mouseLeave=function(){this.isVideo&&this.videoTag.pause()},a.DOTS_LIMIT=5,a.SLIDES_LIMIT=3,a}();angular.module("commonControlsAppInternal").component("p25BackgroundPreview",{templateUrl:"views/primitives/p25-background-preview.html",controller:P25BackgroundPreview,controllerAs:"$ctrl",bindings:{data:"=",size:"<?",isSelected:"<?",onClick:"&?",metaData:"=?"}});var P26ImagePosition=function(){function a(){this.getClasses=function(a){var b=a===parseInt(this.selectedRectangle,10);return{"break":0===a,rectangle:0!==a,"margin-left":(a-1)%this.rectanglesCountEachRow!==0,"margin-top":a/this.rectanglesCountEachRow>1,selected:b,"cc-icon-intro-v-checkbox":b}},this.selectPosition=function(a){this.selectedRectangle=a,this.onPositionClicked&&this.onPositionClicked({index:a})},this.getElementsIndices=function(){this.elements=[];for(var a=1,b=parseInt(this.rectanglesCount,10),c=parseInt(this.rectanglesCountEachRow,10),d=1;b>=d;d+=a)this.elements.push(d),d%c===0&&b>d&&this.elements.push(0);return this.elements}}return a}();angular.module("commonControlsAppInternal").component("p26ImagePosition",{templateUrl:"views/primitives/p26-image-position.html",controller:P26ImagePosition,bindings:{rectanglesCount:"=",rectanglesCountEachRow:"=",selectedRectangle:"=",onPositionClicked:"&?"}});var TextInput=function(){function a(a,b,c){this.$timeout=a,this.$element=b,this.keyMap=c,this.inFocus=!1,this.autocompleteMatches=[],this.autocompleteHoveredIndex=-1,this.ignoreValueForAutoComplete=!0}return a.$inject=["$timeout","$element","keyMap"],a.prototype.$onInit=function(){var a=this;"undefined"==typeof this.active&&(this.active=!0),"undefined"==typeof this["long"]&&(this["long"]=!1),"undefined"==typeof this.debounceDelay&&(this.debounceDelay=0),"undefined"==typeof this.changeValueOnBlur&&(this.changeValueOnBlur=!1),"undefined"==typeof this.autocompleteMedia&&(this.autocompleteMedia=!1),"undefined"==typeof this.disableToggle&&(this.disableToggle=!1),"undefined"==typeof this.mobile&&(this.mobile=!1),(this.showIcon||this.showButton)&&(this.disableToggle=!0),"undefined"==typeof this.isDisabled&&(this.isDisabled=this.disabled),this["long"]&&this.$timeout(function(){return a.calculateInputHeight(a.$element.find("textarea"))}),this.randId=Math.random().toString().substr(2)},a.prototype.onInputFocus=function(a){this.ignoreValueForAutoComplete=!0,this.inFocus=!0,this.onFocus({$event:a})},a.prototype.onInputBlur=function(a){var b=a.target;this.inFocus=!1,!this.disableToggle&&""===b.value.trim()&&this.active&&(this.matchCount<=0||this.forceToggle)&&!this.dontAutoToggleWhenEmpty&&this.toggle(),this["long"]&&this.calculateInputHeight($(b)),this.onBlur({$event:a})},a.prototype.calculateInputHeight=function(a){var b=a.height(),c=a.attr("rows",3).height("auto").height();a.removeAttr("rows").height(Math.min(b,c))},a.prototype.scrollToHoveredItem=function(){var a=angular.element("#ac-"+this.randId+"-item-0"),b=angular.element("#ac-"+this.randId+"-item-"+this.autocompleteHoveredIndex);angular.element("#"+this.randId).animate({scrollTop:b.offset().top-a.offset().top},150)},a.prototype.onKeyUp=function(a){if(a.keyCode===this.keyMap.KEY_UP&&this.autocompleteHoveredIndex>0)this.autocompleteHoveredIndex--,this.scrollToHoveredItem();else if(a.keyCode===this.keyMap.KEY_DOWN&&this.autocompleteHoveredIndex<this.matchCount-1)this.autocompleteHoveredIndex++,this.scrollToHoveredItem();else if(a.keyCode===this.keyMap.KEY_ENTER){if(this.matchCount>0&&this.autocompleteHoveredIndex>=0&&this.autocompleteMatches.length>0){var b=this.autocompleteMatches[this.autocompleteHoveredIndex];this.autocompleteMedia?this.autocompleteMediaItemSelect(b):this.autocomplete&&this.autocompleteItemSelect(b),this.autocompleteHoveredIndex=-1}}else a.keyCode===this.keyMap.KEY_ESC?this.inFocus=!1:this.inFocus=!0},a.prototype.onChange=function(a){this.ignoreValueForAutoComplete=!1,this.onChangeValue&&this.onChangeValue({value:a})},a.prototype.toggle=function(){this.active=!this.active,this.onToggle&&this.onToggle({visibility:this.active})},a.prototype.matchChange=function(a){this.autocompleteMatches=a,this.autocompleteHoveredIndex=-1},a.prototype.autocompleteItemSelect=function(a){this.value!==a&&(this.value=a,this.onChange(this.value))},a.prototype.autocompleteMediaItemSelect=function(a){this.value!==a.text&&(this.value=a.text,this.onChange(a))},Object.defineProperty(a.prototype,"showAutocomplete",{get:function(){return"undefined"!=typeof this.autocomplete&&this.autocomplete.length>0&&this.inFocus},enumerable:!0,configurable:!0}),Object.defineProperty(a.prototype,"showTextAutocomplete",{get:function(){return this.showAutocomplete&&!this.autocompleteMedia},enumerable:!0,configurable:!0}),Object.defineProperty(a.prototype,"showMediaAutocomplete",{get:function(){return this.showAutocomplete&&this.autocompleteMedia},enumerable:!0,configurable:!0}),Object.defineProperty(a.prototype,"showNewTooltip",{get:function(){return 0===this.matchCount},enumerable:!0,configurable:!0}),Object.defineProperty(a.prototype,"matchCount",{get:function(){return this.autocompleteMatches.length},enumerable:!0,configurable:!0}),Object.defineProperty(a.prototype,"headerToggleDisabled",{get:function(){return this.disableToggle||this.mobile&&this.active},enumerable:!0,configurable:!0}),a}();angular.module("commonControlsAppInternal").component("c2TextInput",{templateUrl:"views/c2-text-input.html",controller:TextInput,bindings:{label:"@",value:"=",isDisabled:"=?",disabled:"=?",isShowValidatorError:"=?",active:"=?",focused:"=?","long":"=?",prefix:"@?",placeholder:"=?",debounceDelay:"=?",changeValueOnBlur:"<",autocomplete:"=?",autocompleteMedia:"=?",autocompleteLinkLabel:"@?",showHelpButton:"=?",disableToggle:"=?",forceToggle:"=?",dontAutoToggleWhenEmpty:"=?",onToggle:"&",onHelp:"&",helpTooltip:"@?",onChangeValue:"&",onSubmit:"&",onAutocompleteLinkClick:"&",onBlur:"&",onFocus:"&",showButton:"=?",buttonText:"@?",onButtonClick:"&?",showIcon:"=?",iconName:"@?",onIconClick:"&?",maxLength:"@?",validation:"=?",mobile:"=?",valueTooltip:"@?"}});var C3DropdownList=function(){function a(a){this.$scope=a}return a.$inject=["$scope"],a.prototype.$onInit=function(){"undefined"==typeof this.active&&(this.active=!0)},a}();angular.module("commonControlsAppInternal").component("c3DropdownList",{templateUrl:"views/c3-dropdown-list.html",controller:C3DropdownList,bindings:{label:"@",value:"=",items:"=",trackByKey:"@",labelKey:"@",linkTitle:"@",disableToggle:"=?",onSelectionChange:"&",onLinkClick:"&",onHelp:"&",showHelpButton:"=",helpTooltip:"@?",placeholder:"@?",containerClass:"@?",showTitles:"<?"}});var C4MediaPreview=function(){function a(a,b,c,d,e){this.$scope=a,this.mediaUrl=b,this.$sce=c,this.$element=d,this.ccTooltipManager=e,this.DEFAULT_PREVIEW_WIDTH=240,this.DEFAULT_PREVIEW_HEIGHT=144,this.C4M_PREVIEW_WIDTH=80,this.C4M_PREVIEW_HEIGHT=48}return a.$inject=["$scope","mediaUrl","$sce","$element","ccTooltipManager"],a.prototype.$onInit=function(){var a=this;this.showInfo=!!this.$element.attr("on-info"),"undefined"==typeof this.type&&(this.type="c4"),"undefined"==typeof this.active&&(this.active=!0),"undefined"==typeof this.showTabs&&(this.showTabs=!0),"undefined"==typeof this.visibleTabs&&(this.visibleTabs=[cc.MediaPreviewType.SingleImage]),"undefined"==typeof this.currentTab&&(this.currentTab=this.visibleTabs[0]),"undefined"==typeof this.imageCrop&&(this.imageCrop=!0),"undefined"==typeof this.label&&(this.label="Media"),"undefined"==typeof this.replaceButtonText&&(this.replaceButtonText="Replace"),"undefined"==typeof this.cropButtonText&&(this.cropButtonText=this.$sce.trustAsHtml("&#9712;")),"undefined"==typeof this.changeGalleryButtonText&&(this.changeGalleryButtonText="Change Gallery"),"undefined"==typeof this.dontCrop&&(this.showDontCrop=!1),this.previewWidth="c4m"===this.type?this.C4M_PREVIEW_WIDTH:this.DEFAULT_PREVIEW_WIDTH,this.previewHeight="c4m"===this.type?this.C4M_PREVIEW_HEIGHT:this.DEFAULT_PREVIEW_HEIGHT,this.setCurrentMedia(this.convertType(this.currentTab)),this.$scope.$watch("$ctrl.media",function(b,c){a.setCurrentMedia(a.convertType(a.currentTab))},!0),this.ccTooltipManager.setToolTip("C4_VIDEO",{type:"hint",content:"Switch to video",appearance:"info"}),this.ccTooltipManager.setToolTip("C4_GALLERY",{type:"hint",content:"Switch to gallery",appearance:"info"}),this.ccTooltipManager.setToolTip("C4_IMAGE",{type:"hint",content:"Switch to image",appearance:"info"}),this.ccTooltipManager.setToolTip("C4_SHAPE",{type:"hint",content:"Switch to shape",appearance:"info"})},a.prototype.setCurrentMedia=function(a){var b=_.filter(this.media,function(b){return b.mediaType===a});"video"===a&&(b=b.filter(function(a){return a.active===!0})),b.length>0&&(this.previewMediaUrl=this.getMediaUrl(b[0],a),this.previewMediaTitle=this.getMediaTitle(b[0]),this.previewMediaAlt=this.getMediaAlt(b[0]))},a.prototype.getTabLabel=function(a){if(this.tabLabels&&a in this.tabLabels)return this.tabLabels[a];switch(a){case cc.MediaPreviewType.Clipart:case cc.MediaPreviewType.SingleImage:return"image";case cc.MediaPreviewType.ExtVideo:case cc.MediaPreviewType.Video:return"video";case cc.MediaPreviewType.MultipleImages:return"gallery";case cc.MediaPreviewType.Shape:return"shape"}},a.prototype.getActiveLabel=function(){return this.getTabLabel(this.currentTab)||this.label},a.prototype.getMediaUrl=function(a,b){var c=a.width||this.previewWidth,d=a.height||this.previewHeight;if("image"===b)c=this.previewWidth,d=this.previewHeight;else{var e=this.previewWidth/a.width,f=this.previewHeight/a.height;f>e&&1>e?(c=this.previewWidth,d*=e):e>f&&1>f&&(d=this.previewHeight,c*=f)}return this.mediaUrl.generate(a,c,d)},a.prototype.getMediaTitle=function(a){return"extVideo"===a.mediaType||"video"===a.mediaType?a.Title:a.fileName+" - "+a.width+"x"+a.height+"px"},a.prototype.getMediaAlt=function(a){return"extVideo"===a.mediaType||"video"===a.mediaType?a.Title:a.fileName},Object.defineProperty(a.prototype,"imageSelected",{get:function(){return this.currentTab===cc.MediaPreviewType.SingleImage},enumerable:!0,configurable:!0}),Object.defineProperty(a.prototype,"videoSelected",{get:function(){return this.currentTab===cc.MediaPreviewType.Video},enumerable:!0,configurable:!0}),Object.defineProperty(a.prototype,"extVideoSelected",{get:function(){return this.currentTab===cc.MediaPreviewType.ExtVideo},enumerable:!0,configurable:!0}),Object.defineProperty(a.prototype,"gallerySelected",{get:function(){return this.currentTab===cc.MediaPreviewType.MultipleImages},enumerable:!0,configurable:!0}),Object.defineProperty(a.prototype,"shapeSelected",{get:function(){return this.currentTab===cc.MediaPreviewType.Shape},enumerable:!0,configurable:!0}),Object.defineProperty(a.prototype,"clipartSelected",{get:function(){return this.currentTab===cc.MediaPreviewType.Clipart},enumerable:!0,configurable:!0}),a.prototype.showTabSeparator=function(a){return-1!==_.findIndex(this.visibleTabs,function(b){return a>b})&&-1!==_.findIndex(this.visibleTabs,function(b){return b===a})&&this.active},a.prototype.showImage=function(){this.currentTab!==cc.MediaPreviewType.SingleImage&&(this.currentTab=cc.MediaPreviewType.SingleImage,this.changeMediaType(this.currentTab))},a.prototype.showExtVideo=function(){this.currentTab!==cc.MediaPreviewType.ExtVideo&&(this.currentTab=cc.MediaPreviewType.ExtVideo,this.changeMediaType(this.currentTab))},a.prototype.showVideo=function(){this.currentTab!==cc.MediaPreviewType.Video&&(this.currentTab=cc.MediaPreviewType.Video,this.changeMediaType(this.currentTab))},a.prototype.showGallery=function(){this.currentTab!==cc.MediaPreviewType.MultipleImages&&(this.currentTab=cc.MediaPreviewType.MultipleImages,this.changeMediaType(this.currentTab))},a.prototype.showShape=function(){this.currentTab!==cc.MediaPreviewType.Shape&&(this.currentTab=cc.MediaPreviewType.Shape,this.changeMediaType(this.currentTab))},a.prototype.showClipart=function(){this.currentTab!==cc.MediaPreviewType.Clipart&&(this.currentTab=cc.MediaPreviewType.Clipart,this.changeMediaType(this.currentTab))},a.prototype.changeMediaType=function(a){this.setCurrentMedia(this.convertType(a)),this.onMediaTypeChange&&this.onMediaTypeChange({mediaType:a})},a.prototype.convertType=function(a){switch(a){case cc.MediaPreviewType.SingleImage:return"image";case cc.MediaPreviewType.MultipleImages:return"image";case cc.MediaPreviewType.ExtVideo:return"extVideo";case cc.MediaPreviewType.Shape:return"shape";case cc.MediaPreviewType.Clipart:return"clipart";case cc.MediaPreviewType.Video:return"video";default:return"image"}},a.prototype.replaceMedia=function(){var a=cc.MediaPreviewType.SingleImage;this.gallerySelected?a=cc.MediaPreviewType.MultipleImages:this.extVideoSelected?a=cc.MediaPreviewType.ExtVideo:this.videoSelected?a=cc.MediaPreviewType.Video:this.shapeSelected?a=cc.MediaPreviewType.Shape:this.clipartSelected&&(a=cc.MediaPreviewType.Clipart),this.onMediaChange&&this.onMediaChange({mediaType:a})},a.prototype.toggle=function(){this.disableToggle||(this.active=!this.active,this.onToggle&&this.onToggle({visibility:this.active}))},a.prototype.isVisibleTab=function(a){return this.visibleTabs.indexOf(a)>-1},Object.defineProperty(a.prototype,"isImageTabVisible",{get:function(){return this.active&&this.isVisibleTab(cc.MediaPreviewType.SingleImage)},enumerable:!0,configurable:!0}),Object.defineProperty(a.prototype,"isGalleryTabVisible",{get:function(){return this.active&&this.isVisibleTab(cc.MediaPreviewType.MultipleImages)},enumerable:!0,configurable:!0}),Object.defineProperty(a.prototype,"isVideoTabVisible",{get:function(){return this.active&&this.isVisibleTab(cc.MediaPreviewType.Video)},enumerable:!0,configurable:!0}),Object.defineProperty(a.prototype,"isExtVideoTabVisible",{get:function(){return this.active&&this.isVisibleTab(cc.MediaPreviewType.ExtVideo)},enumerable:!0,configurable:!0}),Object.defineProperty(a.prototype,"isShapeTabVisible",{get:function(){return this.active&&this.isVisibleTab(cc.MediaPreviewType.Shape)},enumerable:!0,configurable:!0}),Object.defineProperty(a.prototype,"isClipArtTabVisible",{get:function(){return this.active&&this.isVisibleTab(cc.MediaPreviewType.Clipart)},enumerable:!0,configurable:!0}),Object.defineProperty(a.prototype,"isCornerIconVisible",{get:function(){return this.visibleTabs.length>1},enumerable:!0,configurable:!0}),a}();angular.module("commonControlsAppInternal").component("c4MediaPreview",{controller:C4MediaPreview,templateUrl:"views/c4-media-preview.html",bindings:{media:"=",active:"=?",visibleTabs:"=?",currentTab:"=?",imageCrop:"=?",showEditPanel:"=?",showTabs:"=?",showDontCrop:"<?",dontCrop:"<?",onToggle:"&",onMediaTypeChange:"&",onMediaChange:"&",onCrop:"&",onInfo:"&",onChangeGallery:"&",onDontCropChange:"&",replaceButtonText:"@?",dontCropToggleText:"@?",changeGalleryButtonText:"@?",cropButtonText:"@?",noHover:"=?",disableToggle:"=?",disableMediaChangeButton:"=?",label:"@?",tabLabels:"=?",type:"@?"}});var C5LinkInput=function(){function a(){}return a.prototype.$onInit=function(){"undefined"==typeof this.active&&(this.active=!0),this.isHover=!1},a.prototype.toggle=function(){this.active=!this.active,this.onToggle&&this.onToggle({visibility:this.active})},a.prototype.setIsHover=function(a){this.isHover=a},a}();angular.module("commonControlsAppInternal").component("c5LinkInput",{templateUrl:"views/c5-link-input.html",controller:C5LinkInput,bindings:{label:"@",link:"=",active:"=?",disableToggle:"=?",showHelpButton:"=",helpTooltip:"@?",onHelp:"&",onToggle:"&",
onEditLink:"&"}});var C6ListItem=function(){function a(a){var b=this;this.CcDialogBuilder=a,this.showMenu=!1,this.toggle=function(){b.item.hidden=!b.item.hidden,b.onToggle&&b.onToggle({item:b.item})},this.menuAction=function(a){a&&a({item:b.item})},this.itemToPage=function(){return b.menuAction(b.onItemToPage)},this.duplicate=function(){return b.menuAction(b.onDuplicate)},this["delete"]=function(){return b.menuAction(b.onDelete)},this.edit=function(){b.editInPlace?b.toggleEditMode():b.onEdit&&b.menuAction(b.onEdit)}}return a.$inject=["CcDialogBuilder"],a.prototype.$onInit=function(){this.labelProperty=this.labelProperty||"label",this.iconProperty=this.iconProperty||"icon"},a.prototype.getItemValue=function(a){return _.get(this.item,a)},a.prototype.setItemValue=function(a,b){return _.set(this.item,a,b)},Object.defineProperty(a.prototype,"icon",{get:function(){return this.getItemValue(this.iconProperty)},set:function(a){this.setItemValue(this.iconProperty,a)},enumerable:!0,configurable:!0}),Object.defineProperty(a.prototype,"label",{get:function(){return this.getItemValue(this.labelProperty)},set:function(a){this.setItemValue(this.labelProperty,a)},enumerable:!0,configurable:!0}),Object.defineProperty(a.prototype,"shouldHideEyeWhenActive",{get:function(){return!this.showEyeIcon||!(void 0===this.item.canHide||this.item.canHide===!0)},enumerable:!0,configurable:!0}),Object.defineProperty(a.prototype,"isHideIconEnabled",{get:function(){return this.item.hidden&&("p10c"===this.itemType||"p10e"===this.itemType)},enumerable:!0,configurable:!0}),Object.defineProperty(a.prototype,"isShowIconEnabled",{get:function(){return!this.item.hidden&&("p10c"===this.itemType||"p10e"===this.itemType)},enumerable:!0,configurable:!0}),Object.defineProperty(a.prototype,"isHideEyeIconEnabled",{get:function(){return this.item.hidden&&"p10c"!==this.itemType&&"p10e"!==this.itemType},enumerable:!0,configurable:!0}),Object.defineProperty(a.prototype,"isShowEyeIconEnabled",{get:function(){return!this.item.hidden&&"p10c"!==this.itemType&&"p10e"!==this.itemType},enumerable:!0,configurable:!0}),a.prototype.enableEditMode=function(){this.inEditMode=!0},a.prototype.disableEditMode=function(){this.inEditMode=!1},a.prototype.toggleEditMode=function(){this.inEditMode=!this.inEditMode},a.prototype.itemClicked=function(){this.onClick&&this.onClick({item:this.item}),this.editInPlace&&this.enableEditMode()},a.prototype.itemDoubleClicked=function(){this.onDoubleClick&&this.onDoubleClick({item:this.item})},a.prototype.editIconClicked=function(){this.onEdit({item:this.item})},a.prototype.onEditText=function(a){this.onEdit&&(this.label=a,this.onEdit(this.item))},a.prototype.openMenu=function(a){var b=this,c={clientPos:{clientX:a.clientX,clientY:a.clientY},item:this.item,noDelete:this.noDelete,noDuplicate:this.noDuplicate,noEdit:this.noEdit,noHide:this.noHide,onDelete:this["delete"],onDuplicate:this.duplicate,onEdit:this.edit,onItemToPage:this.itemToPage,noItemToPage:this.noItemToPage,onToggle:this.toggle};this.showMenu=!0,this.CcDialogBuilder.showListItemMenu(c)["finally"](function(){b.showMenu=!1})},a.prototype.isValid=function(){if(this.itemValidator){var a=this.itemValidator({item:this.item});return a===!0||"undefined"==typeof a}return!0},a.prototype.getLabel=function(a){return this.labelFilter?this.labelFilter(a):a},a.prototype.getInvalidTooltip=function(){return this.invalidTooltip?"string"==typeof this.invalidTooltip?this.invalidTooltip:this.invalidTooltip(this.item):void 0},a}();angular.module("commonControlsAppInternal").component("c6ListItem",{templateUrl:"views/c6-list-item.html",controller:C6ListItem,bindings:{item:"=",itemType:"=",noMenu:"=?",noDelete:"=?",noEdit:"=?",noDuplicate:"=?",noHide:"=?",invalidTooltip:"=?",onToggle:"&",onItemToPage:"&",noItemToPage:"=?",onEdit:"&",onDelete:"&",onDuplicate:"&",onClick:"&?",onDoubleClick:"&?",itemValidator:"&?",labelProperty:"=?",iconProperty:"=?",isDraggable:"=?",isSelectable:"=?",editInPlace:"=?",showEyeIcon:"=?",showEditIcon:"=?",labelFilter:"<?",cogAlwaysVisible:"=?"}});var C6List=function(){function a(){var a=this;this.sortableOptions={orderChanged:function(b){a.onOrderChange&&a.onOrderChange({event:{fromIndex:b.source.index,toIndex:b.dest.index}})},accept:function(a,b){return a.itemScope.sortableScope.$id===b.$id}}}return a.prototype.$onInit=function(){this.itemType=this.itemType||"default","undefined"==typeof this.disableToggle&&(this.disableToggle=!0);var b=a.getConfiguration(this.itemType);b.addNewTitle=a.getAddNewTitle(this.itemType),this.applyConfiguration(b)},a.getAddNewTitle=function(a){switch(a.toLowerCase()){case"p10a":case"p10b":case"p10c":case"p10d":case"p10e":case"p10m":return void 0;case"default":case"p10":default:return"+ Add Item"}},a.getConfiguration=function(a){var b;switch(a.toLowerCase()){case"p10a":b={isDraggable:!1,isSelectable:!0,showEditIcon:!0,noMenu:!0};break;case"p10b":b={isDraggable:!1,showEyeIcon:!0,noMenu:!0};break;case"p10c":b={isDraggable:!1,showEyeIcon:!0,noMenu:!0};break;case"p10d":b={editInPlace:!0,noDuplicate:!0};break;case"p10e":b={isDraggable:!1,showEyeIcon:!0,noMenu:!0};break;case"p10m":b={isDraggable:!1,noDelete:!0,noItemToPage:!0,noDuplicate:!0,cogAlwaysVisible:!0};break;case"default":case"p10":default:b={}}var c={isDraggable:!0,isSelectable:!1,editInPlace:!1,showEyeIcon:!1,showEditIcon:!1,noMenu:!1,noDelete:!1,noEdit:!1,noHide:!1,noDuplicate:!1,noItemToPage:!1,cogAlwaysVisible:!1};return _.assign(c,b),c},a.prototype.applyConfiguration=function(a){var b=this;_.forOwn(a,function(c,d){"undefined"==typeof b[d]&&(b[d]=a[d])})},a}();angular.module("commonControlsAppInternal").filter("cleanAddNewTitle",function(){return function(a){return(a||"").replace(/^\+ ?/,"")}}),angular.module("commonControlsAppInternal").component("c6List",{templateUrl:"views/c6-list.html",controller:C6List,bindings:{label:"@",items:"=",itemType:"@",addNewTitle:"@?",itemLabelProperty:"@?",itemIconProperty:"@?",enableDeleteOnSingleItem:"=?",onAddNew:"&",onEdit:"&",onDuplicate:"&",onDelete:"&",onToggle:"&",onItemToPage:"&",onOrderChange:"&",onItemClick:"&?",onItemDoubleClick:"&?",onHelp:"&",showHelpButton:"=",helpTooltip:"@?",disableToggle:"=?",itemValidator:"&?",isDraggable:"=?",editInPlace:"=?",showEyeIcon:"=?",showEditIcon:"=?",invalidTooltip:"=?",noMenu:"=?",noDelete:"=?",noEdit:"=?",noHide:"=?",noItemToPage:"=?",noDuplicate:"=?",labelFilter:"<?",cogAlwaysVisible:"=?",disableListLink:"=?"}});var C7MultiFieldGroup=function(){function a(){}return a.prototype.$onInit=function(){"undefined"==typeof this.active&&(this.active=!0)},a.prototype.toggle=function(){this.active=!this.active,this.onToggle&&this.onToggle({visibility:this.active})},a}();angular.module("commonControlsAppInternal").component("c7MultiFieldGroup",{templateUrl:"views/c7-multi-field-group.html",controller:C7MultiFieldGroup,transclude:!0,bindings:{label:"@",active:"=?",onHelp:"&",showHelpButton:"=",helpTooltip:"@?",disableToggle:"=?",onToggle:"&"}});var C8LabelAction=function(){function a(){}return a}();angular.module("commonControlsAppInternal").component("c8LabelAction",{templateUrl:"views/c8-label-action.html",controller:C8LabelAction,bindings:{label:"@",actionText:"=",onActionClick:"&"}});var C8BLabelGraphic=function(){function a(a){this.$scope=a}return a.$inject=["$scope"],a.prototype.$onInit=function(){var a=this;this.$scope.$watchCollection(function(){return a.items},function(b){b&&b.length||(a.active=!1)}),"undefined"==typeof this.active&&(this.active=!0)},a.prototype.onClick=function(a,b){this.onItemClick&&(a.stopPropagation(),this.onItemClick({item:b}))},a.prototype.toggle=function(a){a.stopPropagation(),this.active=!this.active,this.onToggle&&this.onToggle({visibility:this.active})},a.prototype.isValid=function(){var a=this;return this.itemValidator?this.items.reduce(function(b,c){return b&&a.itemValidator({item:c})},!0):!0},a}();angular.module("commonControlsAppInternal").component("c8bLabelGraphic",{templateUrl:"views/c8b-label-graphic.html",controller:C8BLabelGraphic,bindings:{label:"@",paragraph:"=?",items:"=",active:"=?",onItemClick:"&",onToggle:"&",onHelp:"&",showHelpButton:"=",helpTooltip:"@?",disableToggle:"=?",itemValidator:"&?",validationTooltip:"@?"}});var C9ActionButton=function(){function a(){}return a}();angular.module("commonControlsAppInternal").component("c9ActionButton",{templateUrl:"views/c9-action-button.html",controller:C9ActionButton,bindings:{label:"@",onClick:"&"}});var C10ItemNavigation=function(){function a(){}return a}();angular.module("commonControlsAppInternal").component("c10ItemNavigation",{templateUrl:"views/c10-item-navigation.html",controller:C10ItemNavigation,bindings:{nextTooltip:"@",previousTooltip:"@",current:"=",count:"=",onPrevious:"&",onNext:"&"}});var C11Paragraph=function(){function a(){}return a}();angular.module("commonControlsAppInternal").component("c11Paragraph",{templateUrl:"views/c11-paragraph.html",controller:C11Paragraph,bindings:{html:"="}});var C12Thumbnails=function(){function a(){}return a.prototype.onThumbnailSelect=function(a){var b=this.thumbnails.find(function(b){return b===a});this.thumbnails.forEach(function(a){return a.isSelected=!1}),b.isSelected=!0,this.onSelect({item:b})},a}();angular.module("commonControlsAppInternal").component("c12Thumbnails",{controller:C12Thumbnails,bindings:{label:"@",thumbnails:"=",onSelect:"&"},template:'\n                <div class="c12-thumbnails-wrapper">\n                  <p6-control-header label="$ctrl.label" hide-toggle-button="true"></p6-control-header>\n                  <div class="c12-thumbnail-container">\n                    <p12-thumbnail ng-repeat="thumbnail in $ctrl.thumbnails"\n                                  thumbnail="thumbnail"\n                                  is-selected="thumbnail.isSelected"\n                                  ng-click="$ctrl.onThumbnailSelect(thumbnail)">\n                    </p12-thumbnail>\n                  </div>\n                  <p17-divider></p17-divider>\n                </div>\n              '});var C13CheckBoxList=function(){function a(){}return a.prototype.checkedChange=function(a){this.onItemChange&&this.onItemChange({item:a})},a.prototype.requiredChange=function(a){this.onItemChange&&this.onItemChange({item:a})},a}();angular.module("commonControlsAppInternal").component("c13CheckboxList",{templateUrl:"views/c13-checkbox-list.html",controller:C13CheckBoxList,bindings:{label:"@",items:"=",onItemChange:"&"}});var C14Checkbox=function(){function a(){}return a}();angular.module("commonControlsAppInternal").component("c14Checkbox",{templateUrl:"views/c14-checkbox.html",controller:C14Checkbox,bindings:{item:"=",onToggle:"&",onRequiredChange:"&"}});var RadioButtons=function(){function a(){}return a.prototype.$onInit=function(){void 0===this.active&&(this.active=!0)},a.prototype.toggle=function(){this.active=!this.active,this.onToggle()},a}();angular.module("commonControlsAppInternal").component("c15RadioButtons",{templateUrl:"views/c15-radio-buttons.html",controller:RadioButtons,bindings:{active:"=?",items:"=",value:"=",showHelpButton:"=",helpTooltip:"@?",label:"@",onValueChange:"&",onToggle:"&",onHelp:"&"}});var Slider=function(){function a(){}return a.prototype.$onInit=function(){void 0===this.active&&(this.active=!0)},a.prototype.toggle=function(){this.active=!this.active,this.onToggle()},a}();angular.module("commonControlsAppInternal").component("c16Slider",{templateUrl:"views/c16-slider.html",controller:Slider,bindings:{label:"@",min:"=",max:"=",step:"=",stepper:"=?",units:"=?",value:"=",disableToggle:"=",showHelpButton:"=",helpTooltip:"@?",active:"=?",onValueChange:"&",onToggle:"&",onHelp:"&"}});var Toggle=function(){function a(a,b){var c=this;this.$element=a,this.$scope=b,this.toggle=function(){c.value=!c.value,c.onValueChange({value:c.value})}}return a.$inject=["$element","$scope"],a.prototype.$onInit=function(){var a=this;void 0===this.type&&(this.type="c19a"),"c19c"!==this.type&&this.$element.click(function(b){var c=a.$element.find("p15-toggle")[0],d=c&&(b.target===c||$.contains(c,b.target));d||a.disableToggle||a.$scope.$apply(a.toggle)}),this.$element.mousedown(function(a){a.stopPropagation(),a.preventDefault()})},a}();angular.module("commonControlsAppInternal").component("c19Toggle",{templateUrl:"views/c19-toggle.html",controller:Toggle,bindings:{label:"@",value:"=",onHelp:"&?",helpTooltip:"@?",toggleTooltip:"@?",onValueChange:"&",leftIcon:"=?",rightIcon:"=?",type:"@?",disableToggle:"=?"}});var C20GraphicRadio=function(){function a(){"undefined"==typeof this.complex&&(this.complex=!0)}return Object.defineProperty(a.prototype,"showIcon",{get:function(){return!this.selectedIcon||this.selectedIcon&&!this.isSelected},enumerable:!0,configurable:!0}),Object.defineProperty(a.prototype,"showSelectedIcon",{get:function(){return this.isSelected&&!!this.selectedIcon},enumerable:!0,configurable:!0}),Object.defineProperty(a.prototype,"displayedIcon",{get:function(){if(!this.icon)return"";var a=this.showSelectedIcon?this.selectedIcon:this.icon,b=this.complex?"graphic-radio:":"",c=""+b+a;return c.replace(":","-")},enumerable:!0,configurable:!0}),a}();angular.module("commonControlsAppInternal").component("c20GraphicRadio",{templateUrl:"views/c20-graphic-radio.html",controller:C20GraphicRadio,controllerAs:"$ctrl",bindings:{icon:"=",label:"=",onClick:"&?",isSelected:"<?",selectedIcon:"=?",complex:"<",small:"<"}});var RTTCommand=commonControls.RTTCommand,RTTSection=commonControls.RTTSection,C23RichTextInput=function(){function a(a,b,c,d){var e=this;this.$timeout=a,this.$scope=b,this.$element=c,this.osUtils=d,this.inFocus=!1,this.hasBeenBlurred=!1,this.ignoreBlurAndFocus=!1,this.shouldSelectAllOnFocus=!0,this.callOnClick=function(a){e.$timeout(function(){$.contains(e.$element.get(0),a.target)||e.osUtils.isIE&&$.contains(e.$element.get(0),a.target.correspondingUseElement)?(e.setIgnoreBlurAndFocus(!0),e.utilFuncs.focusEditor(!1)):e.setIgnoreBlurAndFocus(!1)})}}return a.$inject=["$timeout","$scope","$element","osUtils"],a.prototype.$onInit=function(){var a=this;"undefined"==typeof this.active&&(this.active=!0),"undefined"==typeof this.debounceDelay&&(this.debounceDelay=500),"undefined"==typeof this.disableToggle&&(this.disableToggle=!1),"undefined"==typeof this.maxRowsOnBlur&&(this.maxRowsOnBlur=2),"undefined"==typeof this.maxRowsOnFocus&&(this.maxRowsOnFocus=20),"undefined"==typeof this.displayedRTTSections&&(this.displayedRTTSections=[RTTSection.BoldUnderlineItalic,RTTSection.Listing,RTTSection.Linking,RTTSection.ClearFormatting]),-1===this.displayedRTTSections.indexOf(RTTSection.Listing)?this.onExternalPaste=function(a){return a.replace(/<\/?li.*?>/g,"").replace(/<\/?[ou]l.*?>/g,"")}:this.onExternalPaste=_.identity,this.$scope.$watch(function(){return a.inFocus&&a.utilFuncs&&!a.utilFuncs.isActiveEditor()},function(b,c){b&&c!==b&&(a.utilFuncs.blurP23(),a.ignoreBlurAndFocus=!1,a.inFocus=!1)})},a.prototype.$onDestroy=function(){this.onInputBlur(null,this.value)},a.prototype.log=function(a){for(var b=[],c=1;c<arguments.length;c++)b[c-1]=arguments[c];var d=(this.utilFuncs&&this.utilFuncs.getValue()||"empty").replace(/<.*?>/g,"").split(" ")[0];"mute"!==d&&console.log.apply(console,[d,a].concat(b))},a.prototype.setIgnoreBlurAndFocus=function(a){var b=this;this.$scope.$apply(function(){b.ignoreBlurAndFocus=a})},a.prototype.onMouseLeave=function(){this.osUtils.isIE||(this.ignoreBlurAndFocus=!1)},a.prototype.onMouseEnter=function(){this.utilFuncs&&!this.utilFuncs.isActiveEditor()&&(this.ignoreBlurAndFocus=!1)},a.prototype.onInputFocus=function(a){var b=this;this.$timeout(function(){b.utilFuncs.markAsActiveEditor(),b.inFocus=!0,b.hasBeenBlurred=!1,b.calculateInputHeight(),b.setIgnoreBlurAndFocus(!1),b.shouldSelectAllOnFocus&&(b.utilFuncs.selectAll(),b.shouldSelectAllOnFocus=!1),window.document.addEventListener("mousedown",b.callOnClick,!0),b.onFocus({$event:a})})},a.prototype.onInputBlur=function(a,b){var c=this;this.hasBeenBlurred||(this.inFocus=!1,this.hasBeenBlurred=!0,this.$timeout(function(){!c.disableToggle&&c.isEmptyValue({value:b})&&c.active&&!c.dontAutoToggleWhenEmpty?c.toggle():(c.calculateInputHeight(),c.inputElem.scrollTop(0)),c.setIgnoreBlurAndFocus(!1),window.document.removeEventListener("mousedown",c.callOnClick,!0),c.shouldSelectAllOnFocus=!0,c.onBlur({$event:a,$value:b})}))},a.prototype.calculateInputHeight=function(){this.inFocus?this.animateMaxHeight(this.maxRowsOnBlur,this.maxRowsOnFocus,"auto"):this.animateMaxHeight(this.maxRowsOnFocus,this.maxRowsOnBlur,"hidden")},a.prototype.animateMaxHeight=function(a,b,c){var d=24,e=180,f=this.inputElem,g=this.utilFuncs&&this.utilFuncs.isAlive()?this.utilFuncs.getDimensions().height:0,h=Math.min(g,d*a);h=b>a?Math.max(h,f.height()):Math.min(h,f.height());var i=Math.min(g,d*b);f.stop(!0,!1),f.css({overflow:"hidden","max-height":h,"animation-timing-function":"ease-out"}),f.animate({maxHeight:i},e,function(){f.css({overflow:c,"max-height":d*b})})},a.prototype.onEditorReady=function(){var a=this;this.$timeout(function(){return a.calculateInputHeight()})},Object.defineProperty(a.prototype,"inputElem",{get:function(){return $(this.$element.find("p23-rich-text-input"))},enumerable:!0,configurable:!0}),a.prototype.onChange=function(a){this.onChangeValue&&this.onChangeValue({value:a})},a.prototype.toggle=function(){this.active=!this.active,this.inFocus=!1,this.ignoreBlurAndFocus=!1,this.onToggle&&this.onToggle({visibility:this.active})},a.prototype.registerCommandRunner=function(a,b){this.commandRunner=a,this.utilFuncs=b},a.prototype.runCommand=function(a){var b=this.getCommandState(a);this.commandRunner(a),this.onRunCommand&&this.onRunCommand({command:a,state:b===P22CommandState.Inactive})},a.prototype.getCommandState=function(a){return this.utilFuncs?this.utilFuncs.getCKCommandState(a):P22CommandState.Disabled},a}();angular.module("commonControlsAppInternal").component("c23RichTextInput",{templateUrl:"views/c23-rich-text-input.html",controller:C23RichTextInput,bindings:{label:"@",value:"=",isDisabled:"=?",active:"=?",focused:"=?",focusOnInit:"=?",placeholder:"=?",debounceDelay:"=?",showHelpButton:"=?",disableToggle:"=?",dontAutoToggleWhenEmpty:"=?",helpTooltip:"@?",onToggle:"&",onHelp:"&",onChangeValue:"&",onBlur:"&",onFocus:"&",onRunCommand:"&",iconName:"@?",maxLength:"@?",validation:"=?",displayedRTTSections:"=?",defaultFormatting:"=",onLinkCommand:"&?",linksManager:"=",stylesManager:"=",isEmptyValue:"&",maxRowsOnBlur:"=?",maxRowsOnFocus:"=?",changeValueOnBlur:"<"}});var C25BackgroundPreview=function(){function a(){}return a.prototype.$onInit=function(){this.onEdit=this.onEdit||angular.noop(),this.label=this.label||"background"},a}();angular.module("commonControlsAppInternal").component("c25BackgroundPreview",{templateUrl:"views/c25-background-preview.html",controller:C25BackgroundPreview,controllerAs:"$ctrl",bindings:{data:"=",onEdit:"&?",label:"@?"}});var C26ImagePosition=function(){function a(){}return a.prototype.footerLinkClicked=function(a){"A"===a.target.tagName&&this.footerLink()},a}();angular.module("commonControlsAppInternal").component("c26ImagePosition",{templateUrl:"views/c26-image-position.html",controller:C26ImagePosition,bindings:{headerTitle:"@",body:"@",footerContentText:"@?",footerLink:"&?",showFooter:"=?",rectanglesCount:"@",rectanglesCountEachRow:"@",selectedRectangle:"@",onPositionClicked:"&?",onClose:"&"}}),angular.module("commonControlsAppInternal").component("ccValidation",{templateUrl:"views/cc-validation.html",bindings:{isValid:"=",tooltip:"@?"}}),function a(b,c,d){function e(g,h){if(!c[g]){if(!b[g]){var i="function"==typeof require&&require;if(!h&&i)return i(g,!0);if(f)return f(g,!0);var j=new Error("Cannot find module '"+g+"'");throw j.code="MODULE_NOT_FOUND",j}var k=c[g]={exports:{}};b[g][0].call(k.exports,function(a){var c=b[g][1][a];return e(c?c:a)},k,k.exports,a,b,c,d)}return c[g].exports}for(var f="function"==typeof require&&require,g=0;g<d.length;g++)e(d[g]);return e}({1:[function(a,b,c){function d(a){a.fn.perfectScrollbar=function(a){return this.each(function(){if("object"==typeof a||"undefined"==typeof a){var b=a;f.get(this)||e.initialize(this,b)}else{var c=a;"update"===c?e.update(this):"destroy"===c&&e.destroy(this)}})}}var e=a("../main"),f=a("../plugin/instances");if("function"==typeof define&&define.amd)define(["jquery"],d);else{var g=window.jQuery?window.jQuery:window.$;"undefined"!=typeof g&&d(g)}b.exports=d},{"../main":7,"../plugin/instances":18}],2:[function(a,b,c){function d(a,b){var c=a.className.split(" ");c.indexOf(b)<0&&c.push(b),a.className=c.join(" ")}function e(a,b){var c=a.className.split(" "),d=c.indexOf(b);d>=0&&c.splice(d,1),a.className=c.join(" ")}c.add=function(a,b){a.classList?a.classList.add(b):d(a,b)},c.remove=function(a,b){a.classList?a.classList.remove(b):e(a,b)},c.list=function(a){return a.classList?Array.prototype.slice.apply(a.classList):a.className.split(" ")}},{}],3:[function(a,b,c){function d(a,b){return window.getComputedStyle(a)[b]}function e(a,b,c){return"number"==typeof c&&(c=c.toString()+"px"),a.style[b]=c,a}function f(a,b){for(var c in b){var d=b[c];"number"==typeof d&&(d=d.toString()+"px"),a.style[c]=d}return a}var g={};g.e=function(a,b){var c=document.createElement(a);return c.className=b,c},g.appendTo=function(a,b){return b.appendChild(a),a},g.css=function(a,b,c){return"object"==typeof b?f(a,b):"undefined"==typeof c?d(a,b):e(a,b,c)},g.matches=function(a,b){return"undefined"!=typeof a.matches?a.matches(b):"undefined"!=typeof a.matchesSelector?a.matchesSelector(b):"undefined"!=typeof a.webkitMatchesSelector?a.webkitMatchesSelector(b):"undefined"!=typeof a.mozMatchesSelector?a.mozMatchesSelector(b):"undefined"!=typeof a.msMatchesSelector?a.msMatchesSelector(b):void 0},g.remove=function(a){"undefined"!=typeof a.remove?a.remove():a.parentNode&&a.parentNode.removeChild(a)},g.queryChildren=function(a,b){return Array.prototype.filter.call(a.childNodes,function(a){return g.matches(a,b)})},b.exports=g},{}],4:[function(a,b,c){var d=function(a){this.element=a,this.events={}};d.prototype.bind=function(a,b){"undefined"==typeof this.events[a]&&(this.events[a]=[]),this.events[a].push(b),this.element.addEventListener(a,b,!1)},d.prototype.unbind=function(a,b){var c="undefined"!=typeof b;this.events[a]=this.events[a].filter(function(d){return c&&d!==b?!0:(this.element.removeEventListener(a,d,!1),!1)},this)},d.prototype.unbindAll=function(){for(var a in this.events)this.unbind(a)};var e=function(){this.eventElements=[]};e.prototype.eventElement=function(a){var b=this.eventElements.filter(function(b){return b.element===a})[0];return"undefined"==typeof b&&(b=new d(a),this.eventElements.push(b)),b},e.prototype.bind=function(a,b,c){this.eventElement(a).bind(b,c)},e.prototype.unbind=function(a,b,c){this.eventElement(a).unbind(b,c)},e.prototype.unbindAll=function(){for(var a=0;a<this.eventElements.length;a++)this.eventElements[a].unbindAll()},e.prototype.once=function(a,b,c){var d=this.eventElement(a),e=function(a){d.unbind(b,e),c(a)};d.bind(b,e)},b.exports=e},{}],5:[function(a,b,c){b.exports=function(){function a(){return Math.floor(65536*(1+Math.random())).toString(16).substring(1)}return function(){return a()+a()+"-"+a()+"-"+a()+"-"+a()+"-"+a()+a()+a()}}()},{}],6:[function(a,b,c){var d=a("./class"),e=a("./dom"),f=c.toInt=function(a){return parseInt(a,10)||0},g=c.clone=function(a){if(null===a)return null;if(a.constructor===Array)return a.map(g);if("object"==typeof a){var b={};for(var c in a)b[c]=g(a[c]);return b}return a};c.extend=function(a,b){var c=g(a);for(var d in b)c[d]=g(b[d]);return c},c.isEditable=function(a){return e.matches(a,"input,[contenteditable]")||e.matches(a,"select,[contenteditable]")||e.matches(a,"textarea,[contenteditable]")||e.matches(a,"button,[contenteditable]")},c.removePsClasses=function(a){for(var b=d.list(a),c=0;c<b.length;c++){var e=b[c];0===e.indexOf("ps-")&&d.remove(a,e)}},c.outerWidth=function(a){return f(e.css(a,"width"))+f(e.css(a,"paddingLeft"))+f(e.css(a,"paddingRight"))+f(e.css(a,"borderLeftWidth"))+f(e.css(a,"borderRightWidth"))},c.startScrolling=function(a,b){d.add(a,"ps-in-scrolling"),"undefined"!=typeof b?d.add(a,"ps-"+b):(d.add(a,"ps-x"),d.add(a,"ps-y"))},c.stopScrolling=function(a,b){d.remove(a,"ps-in-scrolling"),"undefined"!=typeof b?d.remove(a,"ps-"+b):(d.remove(a,"ps-x"),d.remove(a,"ps-y"))},c.env={isWebKit:"WebkitAppearance"in document.documentElement.style,supportsTouch:"ontouchstart"in window||window.DocumentTouch&&document instanceof window.DocumentTouch,supportsIePointer:null!==window.navigator.msMaxTouchPoints}},{"./class":2,"./dom":3}],7:[function(a,b,c){var d=a("./plugin/destroy"),e=a("./plugin/initialize"),f=a("./plugin/update");b.exports={initialize:e,update:f,destroy:d}},{"./plugin/destroy":9,"./plugin/initialize":17,"./plugin/update":21}],8:[function(a,b,c){b.exports={handlers:["click-rail","drag-scrollbar","keyboard","wheel","touch"],maxScrollbarLength:null,minScrollbarLength:null,scrollXMarginOffset:0,scrollYMarginOffset:0,stopPropagationOnClick:!0,suppressScrollX:!1,suppressScrollY:!1,swipePropagation:!0,useBothWheelAxes:!1,wheelPropagation:!1,wheelSpeed:1,theme:"default"}},{}],9:[function(a,b,c){var d=a("../lib/helper"),e=a("../lib/dom"),f=a("./instances");b.exports=function(a){var b=f.get(a);b&&(b.event.unbindAll(),e.remove(b.scrollbarX),e.remove(b.scrollbarY),e.remove(b.scrollbarXRail),e.remove(b.scrollbarYRail),d.removePsClasses(a),f.remove(a))}},{"../lib/dom":3,"../lib/helper":6,"./instances":18}],10:[function(a,b,c){function d(a,b){function c(a){return a.getBoundingClientRect()}var d=function(a){a.stopPropagation()};b.settings.stopPropagationOnClick&&b.event.bind(b.scrollbarY,"click",d),b.event.bind(b.scrollbarYRail,"click",function(d){var f=e.toInt(b.scrollbarYHeight/2),i=b.railYRatio*(d.pageY-window.pageYOffset-c(b.scrollbarYRail).top-f),j=b.railYRatio*(b.railYHeight-b.scrollbarYHeight),k=i/j;0>k?k=0:k>1&&(k=1),h(a,"top",(b.contentHeight-b.containerHeight)*k),g(a),d.stopPropagation()}),b.settings.stopPropagationOnClick&&b.event.bind(b.scrollbarX,"click",d),b.event.bind(b.scrollbarXRail,"click",function(d){var f=e.toInt(b.scrollbarXWidth/2),i=b.railXRatio*(d.pageX-window.pageXOffset-c(b.scrollbarXRail).left-f),j=b.railXRatio*(b.railXWidth-b.scrollbarXWidth),k=i/j;0>k?k=0:k>1&&(k=1),h(a,"left",(b.contentWidth-b.containerWidth)*k-b.negativeScrollAdjustment),g(a),d.stopPropagation()})}var e=a("../../lib/helper"),f=a("../instances"),g=a("../update-geometry"),h=a("../update-scroll");b.exports=function(a){var b=f.get(a);d(a,b)}},{"../../lib/helper":6,"../instances":18,"../update-geometry":19,"../update-scroll":20}],11:[function(a,b,c){function d(a,b){function c(c){var e=d+c*b.railXRatio,g=Math.max(0,b.scrollbarXRail.getBoundingClientRect().left)+b.railXRatio*(b.railXWidth-b.scrollbarXWidth);0>e?b.scrollbarXLeft=0:e>g?b.scrollbarXLeft=g:b.scrollbarXLeft=e;var h=f.toInt(b.scrollbarXLeft*(b.contentWidth-b.containerWidth)/(b.containerWidth-b.railXRatio*b.scrollbarXWidth))-b.negativeScrollAdjustment;j(a,"left",h)}var d=null,e=null,h=function(b){c(b.pageX-e),i(a),b.stopPropagation(),b.preventDefault()},k=function(){f.stopScrolling(a,"x"),b.event.unbind(b.ownerDocument,"mousemove",h)};b.event.bind(b.scrollbarX,"mousedown",function(c){e=c.pageX,d=f.toInt(g.css(b.scrollbarX,"left"))*b.railXRatio,f.startScrolling(a,"x"),b.event.bind(b.ownerDocument,"mousemove",h),b.event.once(b.ownerDocument,"mouseup",k),c.stopPropagation(),c.preventDefault()})}function e(a,b){function c(c){var e=d+c*b.railYRatio,g=Math.max(0,b.scrollbarYRail.getBoundingClientRect().top)+b.railYRatio*(b.railYHeight-b.scrollbarYHeight);0>e?b.scrollbarYTop=0:e>g?b.scrollbarYTop=g:b.scrollbarYTop=e;var h=f.toInt(b.scrollbarYTop*(b.contentHeight-b.containerHeight)/(b.containerHeight-b.railYRatio*b.scrollbarYHeight));j(a,"top",h)}var d=null,e=null,h=function(b){c(b.pageY-e),i(a),b.stopPropagation(),b.preventDefault()},k=function(){f.stopScrolling(a,"y"),b.event.unbind(b.ownerDocument,"mousemove",h)};b.event.bind(b.scrollbarY,"mousedown",function(c){e=c.pageY,d=f.toInt(g.css(b.scrollbarY,"top"))*b.railYRatio,f.startScrolling(a,"y"),b.event.bind(b.ownerDocument,"mousemove",h),b.event.once(b.ownerDocument,"mouseup",k),c.stopPropagation(),c.preventDefault()})}var f=a("../../lib/helper"),g=a("../../lib/dom"),h=a("../instances"),i=a("../update-geometry"),j=a("../update-scroll");b.exports=function(a){var b=h.get(a);d(a,b),e(a,b)}},{"../../lib/dom":3,"../../lib/helper":6,"../instances":18,"../update-geometry":19,"../update-scroll":20}],12:[function(a,b,c){function d(a,b){function c(c,d){var e=a.scrollTop;if(0===c){if(!b.scrollbarYActive)return!1;if(0===e&&d>0||e>=b.contentHeight-b.containerHeight&&0>d)return!b.settings.wheelPropagation}var f=a.scrollLeft;if(0===d){if(!b.scrollbarXActive)return!1;if(0===f&&0>c||f>=b.contentWidth-b.containerWidth&&c>0)return!b.settings.wheelPropagation}return!0}var d=!1;b.event.bind(a,"mouseenter",function(){d=!0}),b.event.bind(a,"mouseleave",function(){d=!1});var g=!1;b.event.bind(b.ownerDocument,"keydown",function(j){if(!(j.isDefaultPrevented&&j.isDefaultPrevented()||j.defaultPrevented)){var k=f.matches(b.scrollbarX,":focus")||f.matches(b.scrollbarY,":focus");if(d||k){var l=document.activeElement?document.activeElement:b.ownerDocument.activeElement;if(l){if("IFRAME"===l.tagName)l=l.contentDocument.activeElement;else for(;l.shadowRoot;)l=l.shadowRoot.activeElement;if(e.isEditable(l))return}var m=0,n=0;switch(j.which){case 37:m=-30;break;case 38:n=30;break;case 39:m=30;break;case 40:n=-30;break;case 33:n=90;break;case 32:n=j.shiftKey?90:-90;break;case 34:n=-90;break;case 35:n=j.ctrlKey?-b.contentHeight:-b.containerHeight;break;case 36:n=j.ctrlKey?a.scrollTop:b.containerHeight;break;default:return}i(a,"top",a.scrollTop-n),i(a,"left",a.scrollLeft+m),h(a),g=c(m,n),g&&j.preventDefault()}}})}var e=a("../../lib/helper"),f=a("../../lib/dom"),g=a("../instances"),h=a("../update-geometry"),i=a("../update-scroll");b.exports=function(a){var b=g.get(a);d(a,b)}},{"../../lib/dom":3,"../../lib/helper":6,"../instances":18,"../update-geometry":19,"../update-scroll":20}],13:[function(a,b,c){function d(a,b){function c(c,d){var e=a.scrollTop;if(0===c){if(!b.scrollbarYActive)return!1;if(0===e&&d>0||e>=b.contentHeight-b.containerHeight&&0>d)return!b.settings.wheelPropagation}var f=a.scrollLeft;if(0===d){if(!b.scrollbarXActive)return!1;if(0===f&&0>c||f>=b.contentWidth-b.containerWidth&&c>0)return!b.settings.wheelPropagation}return!0}function d(a){var b=a.deltaX,c=-1*a.deltaY;return("undefined"==typeof b||"undefined"==typeof c)&&(b=-1*a.wheelDeltaX/6,c=a.wheelDeltaY/6),a.deltaMode&&1===a.deltaMode&&(b*=10,c*=10),b!==b&&c!==c&&(b=0,c=a.wheelDelta),[b,c]}function e(b,c){var d=a.querySelector("textarea:hover, select[multiple]:hover, .ps-child:hover");if(d){if("TEXTAREA"!==d.tagName&&!window.getComputedStyle(d).overflow.match(/(scroll|auto)/))return!1;var e=d.scrollHeight-d.clientHeight;if(e>0&&!(0===d.scrollTop&&c>0||d.scrollTop===e&&0>c))return!0;var f=d.scrollLeft-d.clientWidth;if(f>0&&!(0===d.scrollLeft&&0>b||d.scrollLeft===f&&b>0))return!0}return!1}function h(h){var j=d(h),k=j[0],l=j[1];e(k,l)||(i=!1,b.settings.useBothWheelAxes?b.scrollbarYActive&&!b.scrollbarXActive?(l?g(a,"top",a.scrollTop-l*b.settings.wheelSpeed):g(a,"top",a.scrollTop+k*b.settings.wheelSpeed),i=!0):b.scrollbarXActive&&!b.scrollbarYActive&&(k?g(a,"left",a.scrollLeft+k*b.settings.wheelSpeed):g(a,"left",a.scrollLeft-l*b.settings.wheelSpeed),i=!0):(g(a,"top",a.scrollTop-l*b.settings.wheelSpeed),g(a,"left",a.scrollLeft+k*b.settings.wheelSpeed)),f(a),i=i||c(k,l),i&&(h.stopPropagation(),h.preventDefault()))}var i=!1;"undefined"!=typeof window.onwheel?b.event.bind(a,"wheel",h):"undefined"!=typeof window.onmousewheel&&b.event.bind(a,"mousewheel",h)}var e=a("../instances"),f=a("../update-geometry"),g=a("../update-scroll");b.exports=function(a){var b=e.get(a);d(a,b)}},{"../instances":18,"../update-geometry":19,"../update-scroll":20}],14:[function(a,b,c){function d(a,b){b.event.bind(a,"scroll",function(){
f(a)})}var e=a("../instances"),f=a("../update-geometry");b.exports=function(a){var b=e.get(a);d(a,b)}},{"../instances":18,"../update-geometry":19}],15:[function(a,b,c){function d(a,b){function c(){var a=window.getSelection?window.getSelection():document.getSelection?document.getSelection():"";return 0===a.toString().length?null:a.getRangeAt(0).commonAncestorContainer}function d(){j||(j=setInterval(function(){return f.get(a)?(h(a,"top",a.scrollTop+k.top),h(a,"left",a.scrollLeft+k.left),void g(a)):void clearInterval(j)},50))}function i(){j&&(clearInterval(j),j=null),e.stopScrolling(a)}var j=null,k={top:0,left:0},l=!1;b.event.bind(b.ownerDocument,"selectionchange",function(){a.contains(c())?l=!0:(l=!1,i())}),b.event.bind(window,"mouseup",function(){l&&(l=!1,i())}),b.event.bind(window,"mousemove",function(b){if(l){var c={x:b.pageX,y:b.pageY},f={left:a.offsetLeft,right:a.offsetLeft+a.offsetWidth,top:a.offsetTop,bottom:a.offsetTop+a.offsetHeight};c.x<f.left+3?(k.left=-5,e.startScrolling(a,"x")):c.x>f.right-3?(k.left=5,e.startScrolling(a,"x")):k.left=0,c.y<f.top+3?(f.top+3-c.y<5?k.top=-5:k.top=-20,e.startScrolling(a,"y")):c.y>f.bottom-3?(c.y-f.bottom+3<5?k.top=5:k.top=20,e.startScrolling(a,"y")):k.top=0,0===k.top&&0===k.left?i():d()}})}var e=a("../../lib/helper"),f=a("../instances"),g=a("../update-geometry"),h=a("../update-scroll");b.exports=function(a){var b=f.get(a);d(a,b)}},{"../../lib/helper":6,"../instances":18,"../update-geometry":19,"../update-scroll":20}],16:[function(a,b,c){function d(a,b,c,d){function e(c,d){var e=a.scrollTop,f=a.scrollLeft,g=Math.abs(c),h=Math.abs(d);if(h>g){if(0>d&&e===b.contentHeight-b.containerHeight||d>0&&0===e)return!b.settings.swipePropagation}else if(g>h&&(0>c&&f===b.contentWidth-b.containerWidth||c>0&&0===f))return!b.settings.swipePropagation;return!0}function i(b,c){h(a,"top",a.scrollTop-c),h(a,"left",a.scrollLeft-b),g(a)}function j(){u=!0}function k(){u=!1}function l(a){return a.targetTouches?a.targetTouches[0]:a}function m(a){return a.targetTouches&&1===a.targetTouches.length?!0:a.pointerType&&"mouse"!==a.pointerType&&a.pointerType!==a.MSPOINTER_TYPE_MOUSE?!0:!1}function n(a){if(m(a)){v=!0;var b=l(a);q.pageX=b.pageX,q.pageY=b.pageY,r=(new Date).getTime(),null!==t&&clearInterval(t),a.stopPropagation()}}function o(a){if(!v&&b.settings.swipePropagation&&n(a),!u&&v&&m(a)){var c=l(a),d={pageX:c.pageX,pageY:c.pageY},f=d.pageX-q.pageX,g=d.pageY-q.pageY;i(f,g),q=d;var h=(new Date).getTime(),j=h-r;j>0&&(s.x=f/j,s.y=g/j,r=h),e(f,g)&&(a.stopPropagation(),a.preventDefault())}}function p(){!u&&v&&(v=!1,clearInterval(t),t=setInterval(function(){return f.get(a)?Math.abs(s.x)<.01&&Math.abs(s.y)<.01?void clearInterval(t):(i(30*s.x,30*s.y),s.x*=.8,void(s.y*=.8)):void clearInterval(t)},10))}var q={},r=0,s={},t=null,u=!1,v=!1;c&&(b.event.bind(window,"touchstart",j),b.event.bind(window,"touchend",k),b.event.bind(a,"touchstart",n),b.event.bind(a,"touchmove",o),b.event.bind(a,"touchend",p)),d&&(window.PointerEvent?(b.event.bind(window,"pointerdown",j),b.event.bind(window,"pointerup",k),b.event.bind(a,"pointerdown",n),b.event.bind(a,"pointermove",o),b.event.bind(a,"pointerup",p)):window.MSPointerEvent&&(b.event.bind(window,"MSPointerDown",j),b.event.bind(window,"MSPointerUp",k),b.event.bind(a,"MSPointerDown",n),b.event.bind(a,"MSPointerMove",o),b.event.bind(a,"MSPointerUp",p)))}var e=a("../../lib/helper"),f=a("../instances"),g=a("../update-geometry"),h=a("../update-scroll");b.exports=function(a){if(e.env.supportsTouch||e.env.supportsIePointer){var b=f.get(a);d(a,b,e.env.supportsTouch,e.env.supportsIePointer)}}},{"../../lib/helper":6,"../instances":18,"../update-geometry":19,"../update-scroll":20}],17:[function(a,b,c){var d=a("../lib/helper"),e=a("../lib/class"),f=a("./instances"),g=a("./update-geometry"),h={"click-rail":a("./handler/click-rail"),"drag-scrollbar":a("./handler/drag-scrollbar"),keyboard:a("./handler/keyboard"),wheel:a("./handler/mouse-wheel"),touch:a("./handler/touch"),selection:a("./handler/selection")},i=a("./handler/native-scroll");b.exports=function(a,b){b="object"==typeof b?b:{},e.add(a,"ps-container");var c=f.add(a);c.settings=d.extend(c.settings,b),e.add(a,"ps-theme-"+c.settings.theme),c.settings.handlers.forEach(function(b){h[b](a)}),i(a),g(a)}},{"../lib/class":2,"../lib/helper":6,"./handler/click-rail":10,"./handler/drag-scrollbar":11,"./handler/keyboard":12,"./handler/mouse-wheel":13,"./handler/native-scroll":14,"./handler/selection":15,"./handler/touch":16,"./instances":18,"./update-geometry":19}],18:[function(a,b,c){function d(a){function b(){i.add(a,"ps-focus")}function c(){i.remove(a,"ps-focus")}var d=this;d.settings=h.clone(j),d.containerWidth=null,d.containerHeight=null,d.contentWidth=null,d.contentHeight=null,d.isRtl="rtl"===k.css(a,"direction"),d.isNegativeScroll=function(){var b=a.scrollLeft,c=null;return a.scrollLeft=-1,c=a.scrollLeft<0,a.scrollLeft=b,c}(),d.negativeScrollAdjustment=d.isNegativeScroll?a.scrollWidth-a.clientWidth:0,d.event=new l,d.ownerDocument=a.ownerDocument||document,d.scrollbarXRail=k.appendTo(k.e("div","ps-scrollbar-x-rail"),a),d.scrollbarX=k.appendTo(k.e("div","ps-scrollbar-x"),d.scrollbarXRail),d.scrollbarX.setAttribute("tabindex",0),d.event.bind(d.scrollbarX,"focus",b),d.event.bind(d.scrollbarX,"blur",c),d.scrollbarXActive=null,d.scrollbarXWidth=null,d.scrollbarXLeft=null,d.scrollbarXBottom=h.toInt(k.css(d.scrollbarXRail,"bottom")),d.isScrollbarXUsingBottom=d.scrollbarXBottom===d.scrollbarXBottom,d.scrollbarXTop=d.isScrollbarXUsingBottom?null:h.toInt(k.css(d.scrollbarXRail,"top")),d.railBorderXWidth=h.toInt(k.css(d.scrollbarXRail,"borderLeftWidth"))+h.toInt(k.css(d.scrollbarXRail,"borderRightWidth")),k.css(d.scrollbarXRail,"display","block"),d.railXMarginWidth=h.toInt(k.css(d.scrollbarXRail,"marginLeft"))+h.toInt(k.css(d.scrollbarXRail,"marginRight")),k.css(d.scrollbarXRail,"display",""),d.railXWidth=null,d.railXRatio=null,d.scrollbarYRail=k.appendTo(k.e("div","ps-scrollbar-y-rail"),a),d.scrollbarY=k.appendTo(k.e("div","ps-scrollbar-y"),d.scrollbarYRail),d.scrollbarY.setAttribute("tabindex",0),d.event.bind(d.scrollbarY,"focus",b),d.event.bind(d.scrollbarY,"blur",c),d.scrollbarYActive=null,d.scrollbarYHeight=null,d.scrollbarYTop=null,d.scrollbarYRight=h.toInt(k.css(d.scrollbarYRail,"right")),d.isScrollbarYUsingRight=d.scrollbarYRight===d.scrollbarYRight,d.scrollbarYLeft=d.isScrollbarYUsingRight?null:h.toInt(k.css(d.scrollbarYRail,"left")),d.scrollbarYOuterWidth=d.isRtl?h.outerWidth(d.scrollbarY):null,d.railBorderYWidth=h.toInt(k.css(d.scrollbarYRail,"borderTopWidth"))+h.toInt(k.css(d.scrollbarYRail,"borderBottomWidth")),k.css(d.scrollbarYRail,"display","block"),d.railYMarginHeight=h.toInt(k.css(d.scrollbarYRail,"marginTop"))+h.toInt(k.css(d.scrollbarYRail,"marginBottom")),k.css(d.scrollbarYRail,"display",""),d.railYHeight=null,d.railYRatio=null}function e(a){return a.getAttribute("data-ps-id")}function f(a,b){a.setAttribute("data-ps-id",b)}function g(a){a.removeAttribute("data-ps-id")}var h=a("../lib/helper"),i=a("../lib/class"),j=a("./default-setting"),k=a("../lib/dom"),l=a("../lib/event-manager"),m=a("../lib/guid"),n={};c.add=function(a){var b=m();return f(a,b),n[b]=new d(a),n[b]},c.remove=function(a){delete n[e(a)],g(a)},c.get=function(a){return n[e(a)]}},{"../lib/class":2,"../lib/dom":3,"../lib/event-manager":4,"../lib/guid":5,"../lib/helper":6,"./default-setting":8}],19:[function(a,b,c){function d(a,b){return a.settings.minScrollbarLength&&(b=Math.max(b,a.settings.minScrollbarLength)),a.settings.maxScrollbarLength&&(b=Math.min(b,a.settings.maxScrollbarLength)),b}function e(a,b){var c={width:b.railXWidth};b.isRtl?c.left=b.negativeScrollAdjustment+a.scrollLeft+b.containerWidth-b.contentWidth:c.left=a.scrollLeft,b.isScrollbarXUsingBottom?c.bottom=b.scrollbarXBottom-a.scrollTop:c.top=b.scrollbarXTop+a.scrollTop,h.css(b.scrollbarXRail,c);var d={top:a.scrollTop,height:b.railYHeight};b.isScrollbarYUsingRight?b.isRtl?d.right=b.contentWidth-(b.negativeScrollAdjustment+a.scrollLeft)-b.scrollbarYRight-b.scrollbarYOuterWidth:d.right=b.scrollbarYRight-a.scrollLeft:b.isRtl?d.left=b.negativeScrollAdjustment+a.scrollLeft+2*b.containerWidth-b.contentWidth-b.scrollbarYLeft-b.scrollbarYOuterWidth:d.left=b.scrollbarYLeft+a.scrollLeft,h.css(b.scrollbarYRail,d),h.css(b.scrollbarX,{left:b.scrollbarXLeft,width:b.scrollbarXWidth-b.railBorderXWidth}),h.css(b.scrollbarY,{top:b.scrollbarYTop,height:b.scrollbarYHeight-b.railBorderYWidth})}var f=a("../lib/helper"),g=a("../lib/class"),h=a("../lib/dom"),i=a("./instances"),j=a("./update-scroll");b.exports=function(a){var b=i.get(a);b.containerWidth=a.clientWidth,b.containerHeight=a.clientHeight,b.contentWidth=a.scrollWidth,b.contentHeight=a.scrollHeight;var c;a.contains(b.scrollbarXRail)||(c=h.queryChildren(a,".ps-scrollbar-x-rail"),c.length>0&&c.forEach(function(a){h.remove(a)}),h.appendTo(b.scrollbarXRail,a)),a.contains(b.scrollbarYRail)||(c=h.queryChildren(a,".ps-scrollbar-y-rail"),c.length>0&&c.forEach(function(a){h.remove(a)}),h.appendTo(b.scrollbarYRail,a)),!b.settings.suppressScrollX&&b.containerWidth+b.settings.scrollXMarginOffset<b.contentWidth?(b.scrollbarXActive=!0,b.railXWidth=b.containerWidth-b.railXMarginWidth,b.railXRatio=b.containerWidth/b.railXWidth,b.scrollbarXWidth=d(b,f.toInt(b.railXWidth*b.containerWidth/b.contentWidth)),b.scrollbarXLeft=f.toInt((b.negativeScrollAdjustment+a.scrollLeft)*(b.railXWidth-b.scrollbarXWidth)/(b.contentWidth-b.containerWidth))):b.scrollbarXActive=!1,!b.settings.suppressScrollY&&b.containerHeight+b.settings.scrollYMarginOffset<b.contentHeight?(b.scrollbarYActive=!0,b.railYHeight=b.containerHeight-b.railYMarginHeight,b.railYRatio=b.containerHeight/b.railYHeight,b.scrollbarYHeight=d(b,f.toInt(b.railYHeight*b.containerHeight/b.contentHeight)),b.scrollbarYTop=f.toInt(a.scrollTop*(b.railYHeight-b.scrollbarYHeight)/(b.contentHeight-b.containerHeight))):b.scrollbarYActive=!1,b.scrollbarXLeft>=b.railXWidth-b.scrollbarXWidth&&(b.scrollbarXLeft=b.railXWidth-b.scrollbarXWidth),b.scrollbarYTop>=b.railYHeight-b.scrollbarYHeight&&(b.scrollbarYTop=b.railYHeight-b.scrollbarYHeight),e(a,b),b.scrollbarXActive?g.add(a,"ps-active-x"):(g.remove(a,"ps-active-x"),b.scrollbarXWidth=0,b.scrollbarXLeft=0,j(a,"left",0)),b.scrollbarYActive?g.add(a,"ps-active-y"):(g.remove(a,"ps-active-y"),b.scrollbarYHeight=0,b.scrollbarYTop=0,j(a,"top",0))}},{"../lib/class":2,"../lib/dom":3,"../lib/helper":6,"./instances":18,"./update-scroll":20}],20:[function(a,b,c){var d,e,f=a("./instances"),g=document.createEvent("Event"),h=document.createEvent("Event"),i=document.createEvent("Event"),j=document.createEvent("Event"),k=document.createEvent("Event"),l=document.createEvent("Event"),m=document.createEvent("Event"),n=document.createEvent("Event"),o=document.createEvent("Event"),p=document.createEvent("Event");g.initEvent("ps-scroll-up",!0,!0),h.initEvent("ps-scroll-down",!0,!0),i.initEvent("ps-scroll-left",!0,!0),j.initEvent("ps-scroll-right",!0,!0),k.initEvent("ps-scroll-y",!0,!0),l.initEvent("ps-scroll-x",!0,!0),m.initEvent("ps-x-reach-start",!0,!0),n.initEvent("ps-x-reach-end",!0,!0),o.initEvent("ps-y-reach-start",!0,!0),p.initEvent("ps-y-reach-end",!0,!0),b.exports=function(a,b,c){if("undefined"==typeof a)throw"You must provide an element to the update-scroll function";if("undefined"==typeof b)throw"You must provide an axis to the update-scroll function";if("undefined"==typeof c)throw"You must provide a value to the update-scroll function";"top"===b&&0>=c&&(a.scrollTop=c=0,a.dispatchEvent(o)),"left"===b&&0>=c&&(a.scrollLeft=c=0,a.dispatchEvent(m));var q=f.get(a);"top"===b&&c>=q.contentHeight-q.containerHeight&&(c=q.contentHeight-q.containerHeight,c-a.scrollTop<=1?c=a.scrollTop:a.scrollTop=c,a.dispatchEvent(p)),"left"===b&&c>=q.contentWidth-q.containerWidth&&(c=q.contentWidth-q.containerWidth,c-a.scrollLeft<=1?c=a.scrollLeft:a.scrollLeft=c,a.dispatchEvent(n)),d||(d=a.scrollTop),e||(e=a.scrollLeft),"top"===b&&d>c&&a.dispatchEvent(g),"top"===b&&c>d&&a.dispatchEvent(h),"left"===b&&e>c&&a.dispatchEvent(i),"left"===b&&c>e&&a.dispatchEvent(j),"top"===b&&(a.scrollTop=d=c,a.dispatchEvent(k)),"left"===b&&(a.scrollLeft=e=c,a.dispatchEvent(l))}},{"./instances":18}],21:[function(a,b,c){var d=a("../lib/helper"),e=a("../lib/dom"),f=a("./instances"),g=a("./update-geometry"),h=a("./update-scroll");b.exports=function(a){var b=f.get(a);b&&(b.negativeScrollAdjustment=b.isNegativeScroll?a.scrollWidth-a.clientWidth:0,e.css(b.scrollbarXRail,"display","block"),e.css(b.scrollbarYRail,"display","block"),b.railXMarginWidth=d.toInt(e.css(b.scrollbarXRail,"marginLeft"))+d.toInt(e.css(b.scrollbarXRail,"marginRight")),b.railYMarginHeight=d.toInt(e.css(b.scrollbarYRail,"marginTop"))+d.toInt(e.css(b.scrollbarYRail,"marginBottom")),e.css(b.scrollbarXRail,"display","none"),e.css(b.scrollbarYRail,"display","none"),g(a),h(a,"top",a.scrollTop),h(a,"left",a.scrollLeft),e.css(b.scrollbarXRail,"display",""),e.css(b.scrollbarYRail,"display",""))}},{"../lib/dom":3,"../lib/helper":6,"./instances":18,"./update-geometry":19,"./update-scroll":20}]},{},[1]);var Autocomplete=function(){function a(){this.matchedItems=[]}return Object.defineProperty(a.prototype,"matches",{get:function(){var a=this;if("undefined"==typeof this.value)return[];if(this.ignoreValue)return this.setMatches(_.uniq(this.items)),this.matchedItems;var b=_.filter(this.items,function(b){return-1!==b.toLowerCase().indexOf(a.value.toLowerCase())});return this.setMatches(_.uniq(b)),this.matchedItems},enumerable:!0,configurable:!0}),a.prototype.setMatches=function(a){_.isEqual(a,this.matchedItems)||(this.onMatchChange&&this.onMatchChange({matches:a}),this.matchedItems=a)},a}();angular.module("commonControlsAppInternal").component("ccAutocomplete",{templateUrl:"views/autocomplete.html",controller:Autocomplete,bindings:{value:"=",items:"=",linkLabel:"@",hoveredIndex:"=?",onLinkClick:"&",onMatchChange:"&",onItemSelect:"&",ignoreValue:"=?",randId:"@"}});var AutocompleteMedia=function(){function a(a,b){this.mediaUrl=a,this.keyMap=b,this.matchedItems=[]}return a.$inject=["mediaUrl","keyMap"],Object.defineProperty(a.prototype,"matches",{get:function(){var a=this;if("undefined"==typeof this.value)return[];if(this.ignoreValue)return this.setMatches(this.items),this.matchedItems;var b=_.filter(this.items,function(b){return-1!==b.text.toLowerCase().indexOf(a.value.toLowerCase())});return this.setMatches(b),this.matchedItems},enumerable:!0,configurable:!0}),a.prototype.setMatches=function(a){_.isEqual(a,this.matchedItems)||(this.onMatchChange&&this.onMatchChange({matches:a}),this.matchedItems=a)},a.prototype.isImage=function(a){return"image"===a.mediaType},a}();angular.module("commonControlsAppInternal").component("ccAutocompleteMedia",{templateUrl:"views/autocomplete-media.html",controller:AutocompleteMedia,bindings:{value:"=",items:"=",hoveredIndex:"=?",onMatchChange:"&",onItemSelect:"&",ignoreValue:"=?",randId:"@"}});var ButtonEditor=function(){function a(){}return a.prototype.$onInit=function(){"undefined"==typeof this.label&&(this.label="BUTTON"),"undefined"==typeof this.active&&(this.active=!0),"undefined"==typeof this.debounceDelay&&(this.debounceDelay=0)},a.prototype.onBlur=function(a){""===a.currentTarget.value&&this.onToggle&&(this.active=!1,this.onToggle({visibility:!1}))},a}();angular.module("commonControlsAppInternal").component("ccButtonEditor",{templateUrl:"views/button-editor.html",controller:ButtonEditor,bindings:{label:"@?",text:"=",link:"=",focused:"=?",active:"=?",debounceDelay:"=?",onToggle:"&",onTextChange:"&",onEditLink:"&",disableToggle:"="}});var C17Tabs=function(){function a(){}return a.prototype.$onInit=function(){this.items.length>0&&(-1===this.items.indexOf(this.defaultItem)?this.selectedItem=this.items[0]:this.selectedItem=this.defaultItem)},a.prototype.itemChange=function(a){a!==this.selectedItem&&(this.selectedItem=a,this.onItemChange&&this.onItemChange({item:a}))},a}();angular.module("commonControlsAppInternal").component("c17Tabs",{templateUrl:"views/c17-tabs.html",controller:C17Tabs,bindings:{items:"=",defaultItem:"=",onItemChange:"&"}});var MenuItem=function(){function a(){}return a}();angular.module("commonControlsAppInternal").component("ccMenuItem",{templateUrl:"views/menu-item.html",controller:MenuItem,bindings:{label:"@",icon:"@",svgIcon:"@",svgIconHover:"@?",svgIconFromInline:"=",onClick:"&"}});var CcPanelFrame=function(){function a(a){this.$transclude=a}return a.$inject=["$transclude"],a.prototype.$onInit=function(){this.showFooter="undefined"==typeof this.showFooter?!0:this.showFooter},a.prototype.hasFixedTop=function(){return this.$transclude.isSlotFilled("fixedTop")},a.prototype.hasFooter=function(){return this.$transclude.isSlotFilled("footer")&&this.showFooter},a.prototype.usesPanelBody=function(){return this.$transclude.isSlotFilled("body")},a}();angular.module("commonControlsAppInternal").component("ccPanelFrame",{templateUrl:"views/cc-panel-frame.html",controller:CcPanelFrame,transclude:{fixedTop:"?ccPanelFixedTop",body:"?ccPanelBody",footer:"?ccPanelFooter"},bindings:{label:"@",number:"@?",onHelp:"&?",onClose:"&?",onReturn:"&?",onReset:"&?",showHelpButton:"=?",showCloseButton:"=?",showReturnButton:"=?",showResetButton:"=?",showFooter:"=?",helpTooltip:"@",scrollDisabled:"=?"}});var Popover=function(){function a(a,b,c){this.$transclude=a,this.$timeout=b,this.$element=c,this.isAllContentVisible=null}return a.$inject=["$transclude","$timeout","$element"],a.prototype.$onInit=function(){var a=this;"undefined"==typeof this.backupPositionOn&&(this.backupPositionOn=!0),"undefined"==typeof this.triggered&&(this.triggered=!1),"undefined"==typeof this.position&&(this.position="down"),"undefined"==typeof this.marginDistance&&(this.marginDistance=9),"undefined"==typeof this.windowMarginBottom&&(this.windowMarginBottom=0),!this.triggerOnHover==!this.triggerOnClick&&(this.triggerOnClick=!1,this.triggerOnHover=!0),this.$timeout(function(){var b=a.$element.find("cc-popover-trigger").children()[0];a.distanceFromTriggerElement=a.distanceForPopoverFromTrigger(b),a.topOfMiddleTriggerElement=a.topForMiddleOfTriggerElement(b)})},a.prototype.distanceForPopoverFromTrigger=function(a){return this.marginDistance},a.prototype.topForMiddleOfTriggerElement=function(a){var b=a.offsetTop,c=a.clientHeight;return(c+b+b)/2},a.prototype.hasTrigger=function(){return this.$transclude.isSlotFilled("trigger")},a.prototype.hasContent=function(){return this.$transclude.isSlotFilled("content")},a.prototype.isTriggered=function(){return this.triggered},a.prototype.toggleTrigger=function(){this.triggered=!this.triggered,this.triggered?this.whenTriggerOn():this.whenTriggerOff()},a.prototype.enableTrigger=function(){var a=this;this.$timeout(function(){(a.contentHovered||a.buttonHovered)&&(a.triggered||a.whenTriggerOn(),a.triggered=!0)})},a.prototype.disableTrigger=function(){var a=this;this.$timeout(function(){a.contentHovered||a.buttonHovered||(a.triggered&&a.whenTriggerOff(),a.triggered=!1)})},a.prototype.whenTriggerOn=function(){var a=this;this.$timeout(function(){if(a.triggered){var b=a.$element.find(".popover-content");a.isAllContentVisible=window.innerHeight-a.windowMarginBottom-b.offset().top>b[0].clientHeight}}),this.invokeReceivedCallback(this.onTriggerOn)},a.prototype.whenTriggerOff=function(){this.isAllContentVisible=null,this.invokeReceivedCallback(this.onTriggerOff)},a.prototype.contentDisableTrigger=function(){this.triggerOnHover&&(this.contentHovered=!1,this.disableTrigger())},a.prototype.contentEnableTrigger=function(){this.triggerOnHover&&(this.contentHovered=!0,this.enableTrigger())},a.prototype.buttonDisableTrigger=function(){this.triggerOnHover&&(this.buttonHovered=!1,this.disableTrigger())},a.prototype.buttonEnableTrigger=function(){this.triggerOnHover&&(this.buttonHovered=!0,this.enableTrigger())},a.prototype.invokeReceivedCallback=function(a){a&&a()},a.prototype.notReady=function(){return null===this.isAllContentVisible},a.prototype.setClasses=function(){return this.notReady()?"notready":this.getTheAppropriatePosition()},a.prototype.setPositionStyle=function(){return this.notReady()?void 0:{top:this.calculatrTop()}},a.prototype.calculatrTop=function(){var a=this.getTheAppropriatePosition(),b=this.distanceFromTriggerElement;return(b>0&&"top"===a||0>b&&"down"===a)&&(b=-b),this.topOfMiddleTriggerElement+b},a.prototype.getTheAppropriatePosition=function(){return this.isAllContentVisible?this.position:this.backupPositionOn?a.OppositePositionMap[this.position]:this.position},a.prototype.setButtonHovered=function(a){this.buttonHovered=a},a.OppositePositionMap={top:"down",down:"top"},a}();angular.module("commonControlsAppInternal").component("ccPopover",{template:'<div class="popover-container"\n                    ng-mouseleave="$ctrl.triggerOnHover && $ctrl.disableTrigger()">\n                 <ng-transclude data-hook="popover-default-transclude" ng-if="!$ctrl.hasTrigger()"></ng-transclude>\n                 <div ng-transclude="trigger"\n                      data-hook="popover-trigger"\n                      class="popover-trigger"\n                      ng-if="$ctrl.hasTrigger()"\n                      ng-mouseenter="$ctrl.buttonEnableTrigger()"\n                      ng-mouseleave="$ctrl.buttonDisableTrigger()"\n                      ng-click="$ctrl.triggerOnClick && $ctrl.toggleTrigger()"></div>\n                 <div class="popover-content-container"\n                      ng-class="$ctrl.setClasses()"\n                      ng-mouseenter="$ctrl.contentEnableTrigger()"\n                      ng-mouseleave="$ctrl.contentDisableTrigger()"\n                      ng-style="$ctrl.setPositionStyle()">\n                    <div ng-transclude="content"\n                        data-hook="popover-content"\n                        ng-if="$ctrl.hasContent()"\n                        ng-click="$ctrl.triggerOnClick && $ctrl.toggleTrigger();$ctrl.triggerOnHover && $ctrl.contentDisableTrigger(); $event.stopPropagation()"\n                        class="popover-content"\n                        ng-class="{ enabled: $ctrl.isTriggered() }">\n                        </div>\n                 </div>\n               </div>',controller:Popover,transclude:{trigger:"?ccPopoverTrigger",content:"?ccPopoverContent"},bindings:{triggerOnHover:"<?",triggerOnClick:"<?",position:"@?",windowMarginBottom:"<",backupPositionOn:"<",marginDistance:"<",onTriggerOff:"&?",onTriggerOn:"&?"}});var CCSvgIcon=function(){function a(a,b){this.CCSvgIconService=a,this.$scope=b}return a.$inject=["CCSvgIconService","$scope"],a.prototype.$onInit=function(){var a=this;this.prefix=this.fromInline?"":this.CCSvgIconService.getSpritePrefix(),this.iconData=this.extractIconData(this.icon),this.hoverIconData=this.extractIconData(this.hoverIcon),angular.isUndefined(this.addCcSvgIconClass)&&(this.addCcSvgIconClass=!0),this.$scope.$watch("$ctrl.icon",function(){a.iconData=a.extractIconData(a.icon)}),this.$scope.$watch("$ctrl.hoverIcon",function(){a.hoverIconData=a.extractIconData(a.hoverIcon)})},a.prototype.extractIconData=function(a){if(!a)return{name:null,link:null,iconClass:null};var b={};if(-1!==a.indexOf(":")){var c=a.split(":");b.module=c[0],b.name=c[1]}else b.name=a;return b.link=this.getIconLink(b),b.iconClass=this.getIconClass(b),b},a.prototype.getIconClass=function(a){return"cc-svg-icon-"+a.name},a.prototype.getIconLink=function(a){return a.module?this.prefix+"#"+a.module+"-"+a.name:this.prefix+"#"+a.name},a}();angular.module("commonControlsAppInternal").component("ccSvgIcon",{controller:CCSvgIcon,template:"<svg data-hook='svg-icon' ng-class=\"[{'cc-svg-icon': $ctrl.addCcSvgIconClass, 'cc-svg-corner-icon': $ctrl.isCornerIcon, '-offhover': !!$ctrl.hoverIconData.name}, $ctrl.iconData.iconClass]\">\n                 <use xlink:href='{{$ctrl.iconData.link}}'/>\n               </svg>\n               <svg data-hook='svg-icon-hover' ng-class=\"[{'cc-svg-icon': $ctrl.addCcSvgIconClass, 'cc-svg-corner-icon': $ctrl.isCornerIcon}, $ctrl.hoverIconData.iconClass, '-onhover']\" ng-if=\"!!$ctrl.hoverIconData.name\">\n                 <use xlink:href='{{$ctrl.hoverIconData.link}}'/>\n               </svg>\n              ",bindings:{icon:"@",hoverIcon:"@?",isCornerIcon:"<",addCcSvgIconClass:"<?",fromInline:"<?"}});var CCSvgIconService=function(){function a(){}return a.prototype.setSpritePrefix=function(a){this.spritePrefix=a},a.prototype.$get=function(){var a=this;return{getSpritePrefix:function(){return a.spritePrefix}}},a}();angular.module("commonControlsAppInternal").provider("CCSvgIconService",CCSvgIconService).config(["CCSvgIconServiceProvider",function(a){a.setSpritePrefix("")}]);try{angular.module("commonControlsPreload")}catch(e){angular.module("commonControlsPreload",[])}angular.module("commonControlsPreload").run(["$templateCache",function(a){a.put("views/playground.html","<cc-panel-frame class='-with-p16a-header' help-tooltip='TOOLTIP' label='Panel Frame with very long title' ng-if='$ctrl.isVisible(&#39;Panel Frame&#39;)' on-close='$ctrl.close()' on-help='$ctrl.help()' show-close-button='true' show-return-button='true'>\n<cc-panel-fixed-top>\n</cc-panel-fixed-top>\n<c11-paragraph html='&quot;&lt;p&gt;&lt;strong&gt;Panel Header&lt;/strong&gt;&lt;/p&gt;Each panel frame comes with an integrated header. The header can be configured via the attributes &amp;quot;API&amp;quot; (see examples in this playground). In addition, there are 3 variations of the header: the default one, &lt;code&gt;p16a&lt;/code&gt; (with return button on the left) and &lt;code&gt;p16b&lt;/code&gt; (for narrow sub panels). Use them by applying one of these specific classes to &lt;code&gt;&amp;lt;cc-panel-frame&amp;gt;&lt;/code&gt;: &lt;code&gt;-with-p16a-header&lt;/code&gt; and &lt;code&gt;-with-p16b-header&lt;/code&gt;.&quot;'></c11-paragraph>\n<c11-paragraph html='&quot;&lt;p&gt;&lt;strong&gt;Panel Fixed Top&lt;/strong&gt;&lt;/p&gt;The panel is scrollable, but it may have a fixed area on the top. To include a fixed top area in your panel frame, add the &lt;code&gt;&amp;lt;cc-panel-fixed-top&amp;gt&lt;/code&gt; element with desired content inside it. It looks like &lt;strong&gt;Panel Frame&lt;/strong&gt; paragraph above.&quot;'></c11-paragraph>\n<c11-paragraph html='&quot;&lt;p&gt;&lt;strong&gt;Panel Footer&lt;/strong&gt;&lt;/p&gt;The footer is not built-in to the panel frame and is optional. To include a footer in your panel frame, simply add the &lt;code&gt;&amp;lt;cc-panel-footer&amp;gt&lt;/code&gt; element with your element of choice inside it (usually a button primitive).&quot;'></c11-paragraph>\n<cc-panel-footer>\n<button class='p9a-secondary cc-x-height -inverse'>\n<div class='cc-x-height'>Big inverse button here</div>\n</button>\n</cc-panel-footer>\n</cc-panel-frame>\n<cc-panel-frame class='-with-p16a-header' label='Primitives 1' ng-if='$ctrl.isVisible(&#39;Primitives 1&#39;)' on-close='$ctrl.close()' on-return='$ctrl.return()' show-close-button='true' show-return-button='true'>\n<cc-panel-body>\n<div class='cc-panel-content' ignore-this-element-and-dont-use-it-in-your-code-its-only-for-the-playground>\n<div class='p8-label'>%p17-divider</div>\n<p0-spacer></p0-spacer>\n<p17-divider></p17-divider>\n<p0-spacer></p0-spacer>\n<p0-spacer></p0-spacer>\n<div class='p8-label'>medium spacer</div>\n<p0-spacer size='medium'></p0-spacer>\n<div class='p8-label'>after medium spacer</div>\n<p0-spacer></p0-spacer>\n<div class='p8-label'>large spacer</div>\n<p0-spacer size='large'></p0-spacer>\n<div class='p8-label'>after large spacer</div>\n<p0-spacer></p0-spacer>\nhorizontal space:A\n<p0-spacer is-horizontal='true' size='medium'></p0-spacer>\nA\n<div class='p8-label'>.p8-label</div>\n<p0-spacer></p0-spacer>\n<div class='p8-label -centered'>.p8-label.-centered</div>\n<p0-spacer></p0-spacer>\n<p0-spacer></p0-spacer>\n<p0-spacer></p0-spacer>\n<div class='p8-label'>%p1-text-input</div>\n<p1-text-input focused='true' label='Regular Input' on-change-mask='$ctrl.maskChange()' on-change-value='$ctrl.valueChange(value)' placeholder='&#39;i.e. www.yourlink.com&#39;' value='&#39;Initial value 1&#39;'></p1-text-input>\n<p0-spacer></p0-spacer>\n<p0-spacer></p0-spacer>\n<p0-spacer></p0-spacer>\n<div class='p8-label'>%p3-dropdown-list</div>\n<p3-dropdown-list help-tooltip='TOOLTIP' items='$ctrl.dropdownListItems' label-key='label' on-selection-change='$ctrl.onDropdownListSelectionChange(item)' placeholder='test placeholder' track-by-key='id'></p3-dropdown-list>\n<p0-spacer></p0-spacer>\n<p0-spacer></p0-spacer>\n<p0-spacer></p0-spacer>\n<div class='p8-label'>%p5-slider</div>\n<p5-slider max='100' min='0' on-value-change='$ctrl.onSliderValueChange(&quot;slider primitive&quot;, value)' step='1' stepper='false' units='&#39;%&#39;' value='$ctrl.sliderValue'></p5-slider>\n<p0-spacer></p0-spacer>\n<p0-spacer></p0-spacer>\n<p0-spacer></p0-spacer>\n<div class='p8-label'>%p5a-slider</div>\n<p5-slider max='100' min='0' on-value-change='$ctrl.onSliderValueChange(&quot;slider primitive&quot;, value)' step='1' stepper='false' type='p5a' value='$ctrl.sliderValue'></p5-slider>\n<p0-spacer></p0-spacer>\n<p0-spacer></p0-spacer>\n<p0-spacer></p0-spacer>\n<div class='p8-label'>%p5a-slider stepper no ticks</div>\n<p5-slider icon-after='design:font-size-large' icon-before='design:font-size-small' max='7' min='0' on-value-change='$ctrl.onSliderValueChange(&quot;slider primitive&quot;, value)' step='1' stepper-ticks='false' stepper='true' type='p5a' value='$ctrl.sliderValue2'></p5-slider>\n<p0-spacer></p0-spacer>\n<p0-spacer></p0-spacer>\n<p0-spacer></p0-spacer>\n<div class='p8-label'>%p6-control-header</div>\n<p6-control-header help-tooltip='TOOLTIP' hide-toggle-button='false' label='&#39;regular&#39;' show-help-button='true'></p6-control-header>\n<p0-spacer></p0-spacer>\n<p0-spacer></p0-spacer>\n<p0-spacer></p0-spacer>\n<div class='p8-label'>%p11-item-navigation</div>\n<p11-item-navigation count='4' current='$ctrl.currentStep' next-tooltip='NEXT' on-next='$ctrl.onItemNavigationValueChange(&#39;next&#39;, current)' on-previous='$ctrl.onItemNavigationValueChange(&#39;previous&#39;, current)' previous-tooltip='PREVIOUS'></p11-item-navigation>\n<p0-spacer></p0-spacer>\n<p0-spacer></p0-spacer>\n<p0-spacer></p0-spacer>\n<div class='p8-label'>%p14-checkbox</div>\n<p14-checkbox item='$ctrl.checkbox' on-toggle='$ctrl.onCheckboxToggle($ctrl.checkbox)'></p14-checkbox>\n<p0-spacer></p0-spacer>\n<p0-spacer></p0-spacer>\n<p0-spacer></p0-spacer>\n<div class='p8-label'>%p13-radio-buttons</div>\n<p13-radio-buttons items='$ctrl.radioButtons' on-value-change='$ctrl.onRadioValueChange(&quot;primitive&quot;, value)' value='$ctrl.radioValue'></p13-radio-buttons>\n</div>\n</cc-panel-body>\n</cc-panel-frame>\n<cc-panel-frame label='Primitives 2' ng-if='$ctrl.isVisible(&#39;Primitives 2&#39;)' number='6' on-close='$ctrl.close()' on-help='$ctrl.help()' show-close-button='true' show-help-button='true'>\n<div class='cc-panel-content' ignore-this-element-and-dont-use-it-in-your-code-its-only-for-the-playground>\n<div class='p8-label'>%p15-toggle</div>\n<p15-toggle on-value-change='$ctrl.onToggleValueChange(value)' value='$ctrl.toggleValue'></p15-toggle>\n<p0-spacer></p0-spacer>\n<p0-spacer></p0-spacer>\n<p0-spacer></p0-spacer>\n<div class='p8-label'>%p15-toggle with icons</div>\n<p15-toggle left-icon='$ctrl.toggleLeftIcon' on-value-change='$ctrl.onToggleValueChange(value)' right-icon='$ctrl.toggleRightIcon' value='$ctrl.toggleValue'></p15-toggle>\n<p0-spacer></p0-spacer>\n<p0-spacer></p0-spacer>\n<p0-spacer></p0-spacer>\n<div class='p8-label'>%p20-link</div>\n<p20-link data-hook='p20-link' link='{value:&#39;https://www.wix.com/website/templates&#39;,state:true}' on-link-click='$ctrl.onEditLink({ link: $ctrl.link })'></p20-link>\n<p0-spacer></p0-spacer>\n<p0-spacer></p0-spacer>\n<p0-spacer></p0-spacer>\n<div class='p8-label'>%p21-color-tag</div>\n<div class='cc-primitives-in-row' ignore-this-element-and-dont-use-it-in-your-code-its-only-for-the-playground>\n<p21-color-tag color='#64d4d2' show-icon='true' size='lg' tooltip='TOOLTIP'></p21-color-tag>\n</div>\n<div class='cc-primitives-in-row' ignore-this-element-and-dont-use-it-in-your-code-its-only-for-the-playground>\n<p21-color-tag color='#cf262f' size='md' tooltip='TOOLTIP'></p21-color-tag>\n<p21-color-tag color='#9f9f33' is-selected='true' size='sm' tooltip='TOOLTIP'></p21-color-tag>\n<p21-color-tag color='#4286f4' size='xs' tooltip='TOOLTIP'></p21-color-tag>\n</div>\n<div class='cc-primitives-in-row' ignore-this-element-and-dont-use-it-in-your-code-its-only-for-the-playground>\n<p21-color-tag color='#eeff00' size='sm'></p21-color-tag>\n<p21-color-tag cc-tooltip='TOOLTIP' color='#6D6378' size='sm'></p21-color-tag>\n<p21-color-tag color='#00E1FF' size='sm' tooltip='TOOLTIP'></p21-color-tag>\n<p21-color-tag color='#FF005E' size='sm'></p21-color-tag>\n<p21-color-tag color='' is-placeholder='true' size='sm'></p21-color-tag>\n</div>\n<p0-spacer></p0-spacer>\n<p0-spacer></p0-spacer>\n<div class='p8-label'>%p24-palette</div>\n<p24-palette colors='[&#39;#800080&#39;, &#39;#ffb4ff&#39;, &#39;#fcdedc&#39;, &#39;#133752&#39;]'></p24-palette>\n<p0-spacer></p0-spacer>\n<p24-palette colors='[&#39;#800080&#39;, &#39;#ff68fe&#39;, &#39;#fcdedc&#39;, &#39;#133752&#39;]' is-selectable='true'></p24-palette>\n<p0-spacer></p0-spacer>\n<p24-palette colors='[&#39;#800080&#39;, &#39;#ff1bfe&#39;, &#39;#fcdedc&#39;, &#39;#133752&#39;]' is-selectable='true' is-selected='true'></p24-palette>\n<p0-spacer></p0-spacer>\n<p0-spacer></p0-spacer>\n</div>\n</cc-panel-frame>\n<cc-panel-frame label='Primitives 3' ng-if='$ctrl.isVisible(&#39;Primitives 3&#39;)' number='6' on-close='$ctrl.close()' on-help='$ctrl.help()' show-close-button='true' show-help-button='true'>\n<div class='cc-panel-content' ignore-this-element-and-dont-use-it-in-your-code-its-only-for-the-playground>\n<div class='p8-label'>%p25-background-preview</div>\n<p0-spacer></p0-spacer>\n<div class='p8-label'>color</div>\n<p25-background-preview data='{type:&#39;color&#39;, value: &#39;#000&#39;}'></p25-background-preview>\n<p0-spacer></p0-spacer>\n<div class='p8-label'>image</div>\n<p25-background-preview data='{type: &#39;bgImage&#39;, value: &#39;ccd850b43b8e4e6bb634c30e8963ec77.jpg&#39;}'></p25-background-preview>\n<p0-spacer></p0-spacer>\n<div class='p8-label'>gallery (showcase)</div>\n<p25-background-preview data='{type: &#39;gallery&#39;, metaData: {galleryType: &#39;showcase&#39;}, value: [&#39;ccd850b43b8e4e6bb634c30e8963ec77.jpg&#39;, &#39;95484500d9204ee1a35eefd4792a61a8.jpg&#39;, &#39;a04ac0cde13c4cadb5e47f2d58d8f51a.jpg&#39;]}'></p25-background-preview>\n<p0-spacer></p0-spacer>\n<div class='p8-label'>gallery (slideshow)</div>\n<p25-background-preview data='{type: &#39;gallery&#39;, metaData: {galleryType: &#39;slideshow&#39;}, value: [&#39;ccd850b43b8e4e6bb634c30e8963ec77.jpg&#39;, &#39;95484500d9204ee1a35eefd4792a61a8.jpg&#39;, &#39;a04ac0cde13c4cadb5e47f2d58d8f51a.jpg&#39;, &#39;ccd850b43b8e4e6bb634c30e8963ec77.jpg&#39;, &#39;95484500d9204ee1a35eefd4792a61a8.jpg&#39;, &#39;a04ac0cde13c4cadb5e47f2d58d8f51a.jpg&#39;]}'></p25-background-preview>\n<p0-spacer></p0-spacer>\n<div class='p8-label'>pattern</div>\n<p25-background-preview data='{type: &#39;pattern&#39;, value: &#39;121632231243445db93fce794a36a279.gif&#39;, metaData: {patternBgColor: &#39;#881414&#39;, thumbRatio: 10} }'></p25-background-preview>\n<p0-spacer></p0-spacer>\n<div class='p8-label'>video</div>\n<p25-background-preview data='{type: &#39;video&#39;, value: &#39;http://video.wixstatic.com/video/11062b_2ccb88c1c6de4151b51879d6c90fca9d/1080p/mp4/file.mp4&#39;}'></p25-background-preview>\n<p0-spacer></p0-spacer>\n<div class='p8-label'>selected</div>\n<p25-background-preview data='{type: &#39;bgImage&#39;, value: &#39;ccd850b43b8e4e6bb634c30e8963ec77.jpg&#39;}' is-selected='true'></p25-background-preview>\n<p0-spacer></p0-spacer>\n<div class='p8-label'>clickable</div>\n<p25-background-preview data='{type: &#39;pattern&#39;, value: &#39;c392c08f44fc4a26bad0228f39ffc4a1.png&#39;}' on-click='$ctrl.onP25BackgroundPreview(&#39;some value&#39;)'></p25-background-preview>\n<p0-spacer></p0-spacer>\n<div class='p8-label'>(size=\"big\")</div>\n<p25-background-preview data='{type: &#39;color&#39;, value: &#39;#000&#39;}' size='&#39;big&#39;'></p25-background-preview>\n</div>\n</cc-panel-frame>\n<cc-panel-frame class='-with-p16b-header' label='Buttons 1' ng-if='$ctrl.isVisible(&#39;Buttons 1&#39;)' on-return='$ctrl.return()' show-return-button='true'>\n<div class='cc-panel-content' ignore-this-element-and-dont-use-it-in-your-code-its-only-for-the-playground>\n<div class='p8-label'>Assets link</div>\n<p0-spacer></p0-spacer>\n<a class='cc-ellipsis' href='https://zpl.io/GFp6I'>P9 Button specification</a>\n<p0-spacer></p0-spacer>\n<p17-divider></p17-divider>\n<p0-spacer></p0-spacer>\n<div class='p8-label'>P9 Primary</div>\n<p0-spacer></p0-spacer>\n<button class='p9-primary cc-x-height'>\n<div class='cc-x-height'>.p9-primary</div>\n</button>\n<p0-spacer></p0-spacer>\n<button class='p9-primary -medium cc-x-height'>\n<div class='cc-x-height'>.p9-primary.-medium</div>\n</button>\n<p0-spacer></p0-spacer>\n<button class='p9-primary -small cc-x-height'>\n<div class='cc-x-height'>.p9-primary.-small</div>\n</button>\n<p0-spacer></p0-spacer>\n<button class='p9-primary -controlbtn cc-x-height'>\n<div class='cc-x-height'>.p9-primary.-controlbtn (WITH x-height)</div>\n</button>\n<p0-spacer></p0-spacer>\n<button class='p9-primary -controlbtn'>\n.p9-primary.-controlbtn (NO x-height)\n</button>\n<p0-spacer></p0-spacer>\n<button class='p9-primary -red -medium cc-x-height'>\n<div class='cc-x-height'>.p9-primary.-red</div>\n</button>\n<p0-spacer></p0-spacer>\n<button class='p9-primary -purple -medium cc-x-height'>\n<div class='cc-x-height'>.p9-primary.-purple</div>\n</button>\n<p0-spacer></p0-spacer>\n<button class='p9-primary -disabled -medium cc-x-height'>\n<div class='cc-x-height'>.p9-primary.-grey / .-disabled</div>\n</button>\n</div>\n</cc-panel-frame>\n<cc-panel-frame label='Buttons 2' ng-if='$ctrl.isVisible(&#39;Buttons 2&#39;)' number='666'>\n<div class='cc-panel-content' ignore-this-element-and-dont-use-it-in-your-code-its-only-for-the-playground>\n<div class='p8-label'>P9A Secondary</div>\n<p0-spacer></p0-spacer>\n<button class='p9a-secondary cc-x-height'>\n<div class='cc-x-height'>.p9a-secondary</div>\n</button>\n<p0-spacer></p0-spacer>\n<button class='p9a-secondary -medium cc-x-height'>\n<div class='cc-x-height'>.p9a-secondary.-medium</div>\n</button>\n<p0-spacer></p0-spacer>\n<button class='p9a-secondary -small cc-x-height'>\n<div class='cc-x-height'>.p9a-secondary.-small</div>\n</button>\n<p0-spacer></p0-spacer>\n<button class='p9a-secondary -red -medium cc-x-height'>\n<div class='cc-x-height'>.p9a-secondary.-red</div>\n</button>\n<p0-spacer></p0-spacer>\n<button class='p9a-secondary -purple -medium cc-x-height'>\n<div class='cc-x-height'>.p9a-secondary.-purple</div>\n</button>\n<p0-spacer></p0-spacer>\n<button class='p9a-secondary -inverse -small cc-x-height'>\n<div class='cc-x-height'>.p9a-secondary.-inverse</div>\n</button>\n<p0-spacer></p0-spacer>\n<button class='p9a-secondary -inverse -red -small cc-x-height'>\n<div class='cc-x-height'>.p9a-secondary.-inverse.-red</div>\n</button>\n<p0-spacer></p0-spacer>\n<button class='p9a-secondary -inverse -purple -small cc-x-height'><div class='cc-x-height'>.p9a-secondary.-inverse.-purple</div></button>\n<p0-spacer></p0-spacer>\n<button class='p9a-secondary -small c18-panel-button'>.c18-panel-button.p9a-secondary.-small</button>\n<p0-spacer></p0-spacer>\n<div class='cc-sit-control-with-primitives'>\n<c18-panel-button label='&#39;.c18b-panel-button&#39;' on-click='$ctrl.onActionClick()'></c18-panel-button>\n</div>\n</div>\n</cc-panel-frame>\n<cc-panel-frame label='Buttons 3' ng-if='$ctrl.isVisible(&#39;Buttons 3&#39;)'>\n<div class='cc-panel-content' ignore-this-element-and-dont-use-it-in-your-code-its-only-for-the-playground>\n<div class='p8-label'>P9B Text button</div>\n<p0-spacer></p0-spacer>\n<button cc-tooltip='TOOLTIP' class='p9b-text-button cc-x-height'>\n<div class='cc-x-height'>.p9b-text-button</div>\n</button>\n<p0-spacer></p0-spacer>\n<button cc-tooltip='TOOLTIP' class='p9b-text-button -medium cc-x-height'>\n<div class='cc-x-height'>.p9b-text-button.-medium</div>\n</button>\n<p0-spacer></p0-spacer>\n<button cc-tooltip='TOOLTIP' class='p9b-text-button -small cc-x-height'>\n<div class='cc-x-height'>.p9b-text-button.-small</div>\n</button>\n<p0-spacer></p0-spacer>\n<button class='p9b-text-button -red cc-x-height'>\n<div class='cc-x-height'>.p9b-text-button.-red</div>\n</button>\n<p0-spacer></p0-spacer>\n<button class='p9b-text-button -purple cc-x-height'>\n<div class='cc-x-height'>.p9b-text-button.-purple</div>\n</button>\n<p0-spacer></p0-spacer>\n<p17-divider></p17-divider>\n<p0-spacer></p0-spacer>\n<div class='p8-label'>P9C Media preview button</div>\n<p0-spacer></p0-spacer>\n<fieldset style='background: #00ccee'>\n<p0-spacer></p0-spacer>\n<button class='p9c-primary cc-x-height'>\n<div class='cc-x-height'>.p9c-primary</div>\n</button>\n<p0-spacer></p0-spacer>\n<button class='p9c-primary -with-icon cc-x-height'>\n<div class='cc-x-height'><i class='cc-icon-customise'></i>.p9c-primary.-with-icon</div>\n</button>\n<p0-spacer></p0-spacer>\n<button class='p9c-primary -icon-only'><i class='cc-icon-customise'></i></button>\n<span>\n.p9c-primary.-icon-only\n</span>\n<p0-spacer></p0-spacer>\n<button class='p9c-text-button cc-x-height'>\n<div class='cc-x-height'>.p9c-text-button</div>\n</button>\n<p0-spacer></p0-spacer>\n</fieldset>\n</div>\n</cc-panel-frame>\n<cc-panel-frame class='-with-p16a-header -with-control-higlights' label='Rich Text Input' ng-if='$ctrl.isVisible(&#39;Rich Text Input&#39;)' on-close='$ctrl.close()' on-return='$ctrl.return()' show-close-button='true' show-return-button='true'>\n<div class='cc-panel-content' ignore-this-element-and-dont-use-it-in-your-code-its-only-for-the-playground>\n<div class='p8-label'>P23 Rich Text Input</div>\n<p23-rich-text-input cmd-state='{}' ignore-blur-and-focus='false' on-change-value='$ctrl.valueChange(value)' on-clear-formatting='$ctrl.resetRichText(value)' value='$ctrl.richTextValue0'></p23-rich-text-input>\n</div>\n<c19-toggle label='Show C23 (for e2e tests)' type='c19a' value='$ctrl.showC23'></c19-toggle>\n<c23-rich-text-input data-hook='c23-with-listing' displayed-r-t-t-sections='$ctrl.displayedRTTSections2' label='C23 Rich Text Input with listing' max-rows-on-blur='2' max-rows-on-focus='20' ng-if='$ctrl.showC23' on-change-value='$ctrl.valueChange(value)' on-clear-formatting='$ctrl.resetRichText(value)' on-link-command='$ctrl.simulateRichTextLinkDialog(linkId)' on-toggle='$ctrl.maskChange()' styles-manager='$ctrl.richTextStylesManager' value='$ctrl.richTextValue2'></c23-rich-text-input>\n<c23-rich-text-input data-hook='c23-without-listing' displayed-r-t-t-sections='$ctrl.displayedRTTSections' label='C23 Rich Text Input without listing' max-rows-on-blur='2' max-rows-on-focus='20' ng-if='$ctrl.showC23' on-change-value='$ctrl.valueChange(value)' on-clear-formatting='$ctrl.resetRichText(value)' on-link-command='$ctrl.simulateRichTextLinkDialog(linkId)' on-toggle='$ctrl.maskChange()' styles-manager='$ctrl.richTextStylesManager' value='$ctrl.richTextValue1'></c23-rich-text-input>\n<c23-rich-text-input displayed-r-t-t-sections='$ctrl.displayedRTTSections' is-disabled='true' label='C23 Rich Text Input disabled' max-rows-on-blur='2' max-rows-on-focus='20' ng-if='$ctrl.showC23' on-change-value='$ctrl.valueChange(value)' on-clear-formatting='$ctrl.resetRichText(value)' on-link-command='$ctrl.simulateRichTextLinkDialog(linkId)' on-toggle='$ctrl.maskChange()' styles-manager='$ctrl.richTextStylesManager' value='value'></c23-rich-text-input>\n</cc-panel-frame>\n<cc-panel-frame class='-with-p16a-header -with-control-higlights' label='Text Inputs' ng-if='$ctrl.isVisible(&#39;Text Inputs&#39;)' on-close='$ctrl.close()' on-return='$ctrl.return()' show-close-button='true' show-return-button='true'>\n<c2-text-input help-tooltip='TOOLTIP' is-disabled='false' label='Regular Input' on-change-value='$ctrl.valueChange(value)' on-toggle='$ctrl.maskChange()' show-help-button='true' value='&#39;Mothers are all slightly insane&#39;'></c2-text-input>\n<c2-text-input is-disabled='true' label='Disabled input' value='&#39;Mothers are all slightly insane&#39;'></c2-text-input>\n<c2-text-input disable-toggle='true' is-disabled='false' label='Input with no toggle' value='&#39;Mothers are all slightly insane&#39;'></c2-text-input>\n<c2-text-input label='Required input with default text' placeholder='' value='&#39;Mothers are all slightly insane&#39;'></c2-text-input>\n<c2-text-input label='Long Input' long='true' placeholder='&#39;This is the placeholder text&#39;' value='&#39;If you really want to hear about it, the first thing you\\&#39;ll probably want to know is where I was born, and what my lousy childhood was like, and how my parents were occupied and all before they had me, and all that David Copperfield kind of crap, but I don\\&#39;t feel like going into it, if you want to know the truth.&#39;'></c2-text-input>\n<c2-text-input label='Prefix Input' prefix='http://www.../' value='&#39;Initial value 3&#39;'></c2-text-input>\n<c2-text-input autocomplete-link-label='link label' autocomplete='$ctrl.autocompleteItems' label='Autocomplete Input' on-autocomplete-link-click='$ctrl.onAutocompleteLinkClick()' value='$ctrl.autocompleteValue'></c2-text-input>\n<c2-text-input autocomplete-media='true' autocomplete='$ctrl.autocompleteMediaItems' label='Autocomplete Media Input' value='$ctrl.autocompleteValue'></c2-text-input>\n<c2-text-input button-text='Connect' icon-name='check-green' label='C2E input with button/icon' on-blur='$ctrl.checkC2EValue()' on-button-click='$ctrl.toggleC2EState()' on-change-value='$ctrl.checkC2EValue()' on-icon-click='$ctrl.toggleC2EState()' placeholder='&#39;Edit me&#39;' show-button='!$ctrl.c2eState' show-icon='$ctrl.c2eState' value='$ctrl.c2eValue'></c2-text-input>\n<c2-text-input label='C2M input (mobile)' mobile='true' on-toggle='$ctrl.maskChange()' value-tooltip='hidden_item' value='&#39;I\\&#39;m such a unique and graceful mobile field&#39;'></c2-text-input>\n</cc-panel-frame>\n<cc-panel-frame class='-with-p16b-header' label='Media Preview' ng-if='$ctrl.isVisible(&#39;Media Preview&#39;)' on-return='$ctrl.return()' show-return-button='true'>\n<c4-media-preview current-tab='0' disable-media-change-button='$ctrl.disableMediaChangeButton' dont-crop-toggle-text='Show Entire Image' dont-crop='true' media='$ctrl.media' on-dont-crop-change='$ctrl.maskChange(value)' on-info='alert(&#39;info&#39;)' on-media-change='$ctrl.onMediaChange(mediaType)' on-toggle='$ctrl.onMediaPreviewToggled(visibility)' show-dont-crop='true' show-edit-panel='false' show-tabs='true' visible-tabs='[0,1,2]'></c4-media-preview>\n<p0-spacer></p0-spacer>\n<c4-media-preview current-tab='3' disable-media-change-button='$ctrl.disableMediaChangeButton' media='$ctrl.media' on-info='alert(&#39;info&#39;)' on-media-change='$ctrl.onMediaChange(mediaType)' on-toggle='$ctrl.onMediaPreviewToggled(visibility)' show-edit-panel='false' show-tabs='true' visible-tabs='[3,4,5]'></c4-media-preview>\n<p0-spacer></p0-spacer>\n<c4-media-preview current-tab='0' disable-media-change-button='true' media='$ctrl.media' on-info='alert(&#39;info&#39;)' on-toggle='$ctrl.onMediaPreviewToggled(visibility)' show-edit-panel='false' show-tabs='false' type='c4m'></c4-media-preview>\n</cc-panel-frame>\n<cc-panel-frame class='-with-control-higlights' label='Lists 1' ng-if='$ctrl.isVisible(&#39;Lists 1&#39;)'>\n<c6-list help-tooltip='TOOLTIP' item-type='p10' items='$ctrl.listItems' label='C6 list of P10 (draggable) items' on-is-valid='$ctrl.customDraggableItemValidation(item)' on-order-change='$ctrl.onListOrderChange(event)' show-help-button='true'></c6-list>\n<c6-list item-type='p10a' items='$ctrl.listItemsA' label='C6 list of P10a (section states)' on-edit='$ctrl.listItemP10aEdit(item)' on-is-valid='$ctrl.customDraggableItemValidation(item)' on-item-click='$ctrl.listItemP10aClick(item)' on-order-change='$ctrl.onListOrderChange(event)'></c6-list>\n<c6-list item-type='p10b' items='$ctrl.listItemsB' label='C6 list of P10b (editable)' on-is-valid='$ctrl.customDraggableItemValidation(item)' on-order-change='$ctrl.onListOrderChange(event)'></c6-list>\n<c6-list item-type='p10c' items='$ctrl.listItemsC' label='C6 list of P10c (noneditable)' on-is-valid='$ctrl.customDraggableItemValidation(item)' on-order-change='$ctrl.onListOrderChange(event)'></c6-list>\n<c6-list item-type='p10m' items='$ctrl.listItemsM' label='C6 list of P10m' on-is-valid='$ctrl.customDraggableItemValidation(item)' on-order-change='$ctrl.onListOrderChange(event)'></c6-list>\n</cc-panel-frame>\n<cc-panel-frame class='-with-control-higlights' label='Lists 2' ng-if='$ctrl.isVisible(&#39;Lists 2&#39;)'>\n<c6-list invalid-tooltip='&#39;SIMPLE&#39;' item-type='p10d' items='$ctrl.listItemsD' label='C6 list of P10d (social links)' on-is-valid='$ctrl.customDraggableItemValidation(item)' on-order-change='$ctrl.onListOrderChange(event)'></c6-list>\n<c6-list invalid-tooltip='&#39;SIMPLE&#39;' item-type='p10d' items='$ctrl.listItemsD' label-filter='$ctrl.labelFilter' label='C6 list of P10d (social links) - with filter on the labels (show only the first letter)' on-is-valid='$ctrl.customDraggableItemValidation(item)' on-order-change='$ctrl.onListOrderChange(event)'></c6-list>\n<c6-list item-type='p10e' items='$ctrl.listItemsE' label='C6 list of P10e (social share)' on-is-valid='$ctrl.customDraggableItemValidation(item)' on-order-change='$ctrl.onListOrderChange(event)'></c6-list>\n<div class='p8-label'>cc-menu-item:</div>\n<cc-menu-item icon='cc-icon-edit' label='with cc-icon'></cc-menu-item>\n<cc-menu-item label='with cc-svg-icon' svg-icon='coloration:magic-wand'></cc-menu-item>\n<cc-menu-item label='with cc-svg-icon and a hover icon' svg-icon-hover='coloration:light' svg-icon='coloration:dark'></cc-menu-item>\n<cc-menu-item label='with complex cc-svg-icon and a hover icon' svg-icon-from-inline='true' svg-icon-hover='design:listbg_hover' svg-icon='design:listbg'></cc-menu-item>\n</cc-panel-frame>\n<cc-panel-frame class='-with-p16a-header -with-control-higlights' label='e2e - key catcher' ng-if='$ctrl.isVisible(&#39;e2e - key catcher&#39;)' on-close='$ctrl.close()' on-return='$ctrl.return()' show-close-button='true' show-return-button='true'>\n<div ng-keydown='$ctrl.keyCatcher($event)'>\n<div id='keyCatcherOutput'>{{ $ctrl.keyCatcherOutput }}</div>\n<c2-text-input is-disabled='false' label='C2 Regular Input' on-change-value='$ctrl.valueChange(value)' value='$ctrl.c2ValueForE2E'></c2-text-input>\n<c23-rich-text-input label='C23 Rich Text Input' on-change-value='$ctrl.valueChange(value)' styles-manager='$ctrl.richTextStylesManager' value='$ctrl.c23ValueForE2E'></c23-rich-text-input>\n</div>\n</cc-panel-frame>\n<cc-panel-frame class='-with-p16b-header' label='Misc 1' ng-if='$ctrl.isVisible(&#39;Misc 1&#39;)' on-return='$ctrl.return()' show-return-button='true'>\n<c17-tabs items='$ctrl.tabsItems' on-item-change='$ctrl.onTabsItemChange(item)'></c17-tabs>\n<c8-label-action action-text='&#39;Action text&#39;' label='Label with text action' on-action-click='$ctrl.onActionClick()'></c8-label-action>\n<c8b-label-graphic help-tooltip='TOOLTIP' item-validator='$ctrl.validateGraphicItems(item)' items='$ctrl.labelGraphicItems' label='Label with Graphic actions' paragraph='&quot;line1&lt;br/&gt;line2&quot;' show-help-button='true'></c8b-label-graphic>\n<cc-generic-menu-item click-handler='$ctrl.genericMenuItemClick()' label='Generic menu item'></cc-generic-menu-item>\n<c5-link-input help-tooltip='TOOLTIP' hide-toggle='true' label='Link' link='{value:&#39;https://www.wix.com/website/templates&#39;,state:false}' show-help-button='true'></c5-link-input>\n<c10-item-navigation count='4' current='$ctrl.currentStep' next-tooltip='NEXT' previous-tooltip='PREVIOUS'></c10-item-navigation>\n<c11-paragraph html='$ctrl.singleLine'></c11-paragraph>\n<c11-paragraph class='style-d' html='$ctrl.singleLine'></c11-paragraph>\n<c11-paragraph html='$ctrl.richText'></c11-paragraph>\n<c11-paragraph class='error' html='$ctrl.richText'></c11-paragraph>\n<c7-multi-field-group help-tooltip='TOOLTIP' label='multi field group label' on-toggle='$ctrl.onGroupToggled(visibility)' show-help-button='true'>\n<c2-text-input label='Text input inside group' value='&#39;edit me&#39;'></c2-text-input>\n</c7-multi-field-group>\n<cc-panel-footer>\n<c10-item-navigation count='4' current='$ctrl.currentStep' next-tooltip='NEXT' previous-tooltip='PREVIOUS'></c10-item-navigation>\n</cc-panel-footer>\n</cc-panel-frame>\n<cc-panel-frame class='-with-p16b-header' label='Misc 2' ng-if='$ctrl.isVisible(&#39;Misc 2&#39;)' on-return='$ctrl.return()' show-return-button='true'>\n<cc-button-editor link='{value:&#39;None&#39;,state:false}' on-toggle='$ctrl.onGroupToggled(visibility)' text='&#39;Click Me!&#39;'></cc-button-editor>\n<c3-dropdown-list container-class='my-container-class' help-tooltip='TOOLTIP' items='$ctrl.dropdownListItems' label-key='label' label='Dropdown list' on-selection-change='$ctrl.onDropdownListSelectionChange(item)' placeholder='test' show-help-button='true' show-titles='true' value='$ctrl.selectedDropDownItem'></c3-dropdown-list>\n<c12-thumbnails label='{{ $ctrl.c12Thumbnails.label }}' on-select='$ctrl.c12Thumbnails.onSelect(item)' thumbnails='$ctrl.c12Thumbnails.thumbnails'></c12-thumbnails>\n</cc-panel-frame>\n<cc-panel-frame class='-with-p16b-header' label='Misc 3' ng-if='$ctrl.isVisible(&#39;Misc 3&#39;)' on-return='$ctrl.return()' show-return-button='true'>\n<c15-radio-buttons help-tooltip='TOOLTIP' items='$ctrl.radioButtons' label='Radio' on-value-change='$ctrl.onRadioValueChange(&quot;component&quot;, value)' show-help-button='true' value='$ctrl.radioValue'></c15-radio-buttons>\n<c16-slider label='' max='100' min='0' on-value-change='$ctrl.onSliderValueChange(&quot;slider component&quot;, value)' step='1' stepper='false' units='&#39;%&#39;' value='$ctrl.sliderValue'></c16-slider>\n<c16-slider help-tooltip='TOOLTIP' label='Stepper' max='100' min='0' on-value-change='$ctrl.onSliderValueChange(&quot;stepper&quot;, value)' show-help-button='true' step='25' stepper='true' value='$ctrl.stepperValue'></c16-slider>\n<c19-toggle help-tooltip='TOOLTIP' label='Toggle type c19a' on-value-change='$ctrl.onToggleValueChange(value)' type='c19a' value='$ctrl.toggleValue'></c19-toggle>\n<c19-toggle label='Toggle type c19a long long long long' on-value-change='$ctrl.onToggleValueChange(value)' toggle-tooltip='TOOLTIP' type='c19a' value='$ctrl.toggleValue'></c19-toggle>\n<c19-toggle label='Toggle type c19b' on-value-change='$ctrl.onToggleValueChange(value)' type='c19b' value='$ctrl.toggleValue'></c19-toggle>\n<c19-toggle help-tooltip='TOOLTIP' label='Toggle type c19b long long long long' on-value-change='$ctrl.onToggleValueChange(value)' type='c19b' value='$ctrl.toggleValue'></c19-toggle>\n<c19-toggle label='Toggle type c19m' left-icon='$ctrl.toggleLeftIcon' on-value-change='$ctrl.onToggleValueChange(value)' right-icon='$ctrl.toggleRightIcon' toggle-tooltip='TOOLTIP' type='c19m' value='$ctrl.toggleValue'></c19-toggle>\n<c19-toggle label='Toggle type c19c' left-icon='$ctrl.toggleLeftIcon' on-value-change='$ctrl.onToggleValueChange(value)' right-icon='$ctrl.toggleRightIcon' toggle-tooltip='TOOLTIP' type='c19c' value='$ctrl.toggleValue'></c19-toggle>\n<c19-toggle help-tooltip='TOOLTIP' label='Toggle type c19c long long long long' left-icon='$ctrl.toggleLeftIcon' on-value-change='$ctrl.onToggleValueChange(value)' right-icon='$ctrl.toggleRightIcon' type='c19c' value='$ctrl.toggleValue'></c19-toggle>\n<c14-checkbox item='$ctrl.checkbox' on-toggle='$ctrl.onCheckboxToggle(item)'></c14-checkbox>\n<c13-checkbox-list items='$ctrl.checkboxItems' label='Checkbox' on-item-change='$ctrl.onCheckboxListItemChange(item)'></c13-checkbox-list>\n<div class='p8-label'>%c25-background-preview</div>\n<c25-background-preview data='{type: &#39;color&#39;, value: &#39;#000&#39;}' label='awesome background' on-edit='$ctrl.backgroundPreviewEdit()'></c25-background-preview>\n</cc-panel-frame>\n<cc-panel-frame label='Popups, tips, modals' ng-if='$ctrl.isVisible(&#39;Popups, tips, modals&#39;)'>\n<div class='cc-panel-content' ignore-this-element-and-dont-use-it-in-your-code-its-only-for-the-playground>\n<div class='p8-label'>Tips</div>\n<button class='cc-x-height p9b-text-button -medium' ng-click='$ctrl.displayTip()'>\n<div class='cc-x-height'>Show Tip</div>\n</button>\n<p0-spacer></p0-spacer>\n<button class='cc-x-height p9b-text-button -medium' ng-click='$ctrl.updateTipContent()'>\n<div class='cc-x-height'>Update current Tip content</div>\n</button>\n<p0-spacer></p0-spacer>\n<p17-divider></p17-divider>\n<p0-spacer></p0-spacer>\n<div class='p8-label'>Default popups</div>\n<p0-spacer></p0-spacer>\n<button class='cc-x-height p9-primary -medium -purple' ng-click='$ctrl.displayModal({ popup: &#39;showFirstTimeNotice&#39;, model: &#39;firstTimeNotice&#39; })'>\n<div class='cc-x-height'>First time notice</div>\n</button>\n<p0-spacer></p0-spacer>\n<button class='cc-x-height p9-primary -medium' ng-click='$ctrl.displayModal({ popup: &#39;showPositiveConfirmation&#39;, model: &#39;positiveConfirmation&#39; })'>\n<div class='cc-x-height'>Positive confirmation</div>\n</button>\n<p0-spacer></p0-spacer>\n<button class='cc-x-height p9-primary -medium -red' ng-click='$ctrl.displayModal({ popup: &#39;showNegativeConfirmation&#39;, model: &#39;negativeConfirmation&#39; })'>\n<div class='cc-x-height'>Negative confirmation</div>\n</button>\n<p0-spacer></p0-spacer>\n<button class='cc-x-height p9-primary -medium' ng-click='$ctrl.displayModal({ popup: &#39;showPositiveContinuedAction&#39;, model: &#39;continuedAction&#39; })'>\n<div class='cc-x-height'>Positive continued action</div>\n</button>\n<p0-spacer></p0-spacer>\n<button class='cc-x-height p9-primary -medium -red' ng-click='$ctrl.displayModal({ popup: &#39;showNegativeContinuedAction&#39;, model: &#39;continuedAction&#39; })'>\n<div class='cc-x-height'>Negative continued action</div>\n</button>\n<p0-spacer></p0-spacer>\n<button class='cc-x-height p9-primary -medium' ng-click='$ctrl.displayModal({ popup: &#39;showMultiPagePopup&#39;, model: &#39;multiPagePopup&#39; })'>\n<div class='cc-x-height'>Multi page popup</div>\n</button>\n<p0-spacer></p0-spacer>\n<p17-divider></p17-divider>\n<p0-spacer></p0-spacer>\n<div class='p8-label'>Iframe display</div>\n<p0-spacer></p0-spacer>\n<button class='cc-x-height p9-primary -medium' ng-click='$ctrl.onOpenIframe()'>Open Iframe</button>\n<p0-spacer></p0-spacer>\n<button class='cc-x-height p9-primary -medium' ng-click='$ctrl.onOpenSupportIframe()'>Open Support Iframe</button>\n<p17-divider></p17-divider>\n<p0-spacer></p0-spacer>\n<div class='p8-label'>Tooltips</div>\n<p0-spacer></p0-spacer>\n<button cc-tooltip-position='right' cc-tooltip='SIMPLE' class='c9-cta cc-x-height'>\nSimple tooltip\n</button>\n<p0-spacer></p0-spacer>\n<button cc-tooltip-position='bottom' cc-tooltip='COMPLEX' class='c9-cta cc-x-height'>\nRich tooltip\n</button>\n<p0-spacer></p0-spacer>\n<button cc-tooltip-options='{{ {delay: 0, offsetX: 60} }}' cc-tooltip-position='bottom' cc-tooltip='COMPLEX' class='c9-cta cc-x-height'>\nCustom options tooltip\n</button>\n<p0-spacer></p0-spacer>\n<button cc-tooltip-position='bottom' cc-tooltip='COMPILE' class='c9-cta cc-x-height'>\nCompiled tooltip\n</button>\n</div>\n</cc-panel-frame>\n<cc-panel-frame label='{{iconsPage.label}}' ng-if='$ctrl.isVisible(iconsPage.label)' ng-repeat='iconsPage in $ctrl.iconsPages'>\n<table class='playground-table'>\n<thead>\n<tr>\n<td class='p8-label' width='150'>css</td>\n<td class='p8-label' width='150'>normal</td>\n<td class='p8-label'>circle</td>\n<td class='p8-label'>white</td>\n<td class='p8-label'>disabled</td>\n</tr>\n</thead>\n<tbody>\n<tr ng-repeat='icon in iconsPage.icons'>\n<td>cc-icon-{{icon}}</td>\n<td>\n<i class='cc-icon-{{icon}}'></i>\n</td>\n<td class='bg'>\n<i class='cc-icon-circle cc-icon-{{icon}}'></i>\n</td>\n<td class='bg'>\n<i class='cc-icon-white cc-icon-{{icon}}'></i>\n</td>\n<td>\n<i class='cc-icon-{{icon}}' disabled='disabled'></i>\n</td>\n</tr>\n</tbody>\n</table>\n</cc-panel-frame>\n<cc-panel-frame label='SVG Icons' ng-if='$ctrl.isVisible(&#39;svg-icons&#39;)'>\n<table class='playground-table'>\n<tr>\n<td class='p8-label' style='width:100px'>normal</td>\n<td class='p8-label' style='width:100px'>active</td>\n<td class='p8-label' style='width:100px'>disabled</td>\n</tr>\n<tr ng-repeat='icon in $ctrl.svgIcons'>\n<td>\n<cc-svg-icon class='cc-svg-icon-circle' icon='{{icon}}'></cc-svg-icon>\n</td>\n<td>\n<cc-svg-icon class='cc-svg-icon-circle -active' icon='{{icon}}'></cc-svg-icon>\n</td>\n<td>\n<cc-svg-icon class='cc-svg-icon-circle' disabled icon='{{icon}}'></cc-svg-icon>\n</td>\n</tr>\n</table>\n<p22-rich-text-toolbar command-state='$ctrl.getRTTCommandState(command)' displayed-sections='$ctrl.displayedRTTSections2' is-disabled='$ctrl.isRTTCommandDisabled(command)' on-click='$ctrl.toggleRTTCommand(command)'></p22-rich-text-toolbar>\n</cc-panel-frame>\n<cc-panel-frame label='Complex SVG Icons' ng-if='$ctrl.isVisible(&#39;complex-svg-icons&#39;)'>\n<div class='cc-panel-content' ignore-this-element-and-dont-use-it-in-your-code-its-only-for-the-playground>\n<div class='p8-label'>Other complex icons</div>\n<div ng-repeat='icon in $ctrl.complexSvgIcons'>\n<cc-svg-icon from-inline='true' icon='{{icon}}'></cc-svg-icon>\n{{icon}}\n</div>\n<p0-spacer></p0-spacer>\n<p0-spacer></p0-spacer>\n</div>\n</cc-panel-frame>\n<cc-panel-frame label='Graphic Buttons' ng-if='$ctrl.isVisible(&#39;graphic-buttons&#39;)'>\n<div class='cc-panel-content' ignore-this-element-and-dont-use-it-in-your-code-its-only-for-the-playground>\n<div class='p8-label'>Animation icons</div>\n<div class='cc-primitives-in-row flex-wrap'>\n<c20-graphic-radio icon='&#39;animation:&#39; + icon' label='icon' ng-repeat-start='icon in $ctrl.animationIcons'></c20-graphic-radio>\n<c20-graphic-radio icon='&#39;animation:&#39; + icon + &#39;Selected&#39;' is-selected='true' label='icon + &#39;Selected&#39;' ng-repeat-end=''></c20-graphic-radio>\n</div>\n<p0-spacer></p0-spacer>\n<p0-spacer></p0-spacer>\n<div class='p8-label'>Background image options</div>\n<div class='cc-primitives-in-row flex-wrap'>\n<c20-graphic-radio icon='&#39;background-options:&#39; + icon' label='icon' ng-repeat-start='icon in $ctrl.backgroundImageOptionsIcons'></c20-graphic-radio>\n<c20-graphic-radio icon='&#39;background-options:&#39; + icon + &#39;Selected&#39;' is-selected='true' label='icon + &#39;Selected&#39;' ng-repeat-end=''></c20-graphic-radio>\n</div>\n<p0-spacer></p0-spacer>\n<p0-spacer></p0-spacer>\n<div class='p8-label'>Pro-Gallery icons</div>\n<div class='cc-primitives-in-row flex-wrap'>\n<c20-graphic-radio complex='false' icon='&#39;pro-gallery:1x1&#39;' label='&#39;1x1&#39;' small='true'></c20-graphic-radio>\n<c20-graphic-radio complex='false' icon='&#39;pro-gallery:3x4&#39;' is-selected='true' label='&#39;3x4&#39;' small='true'></c20-graphic-radio>\n<c20-graphic-radio complex='false' icon='&#39;pro-gallery:4x3&#39;' label='&#39;4x3&#39;' small='true'></c20-graphic-radio>\n<c20-graphic-radio complex='false' icon='&#39;pro-gallery:9x16&#39;' label='&#39;9x16&#39;' small='true'></c20-graphic-radio>\n<c20-graphic-radio complex='false' icon='&#39;pro-gallery:16x9&#39;' label='&#39;16x9&#39;' small='true'></c20-graphic-radio>\n</div>\n<p0-spacer></p0-spacer>\n<div class='p8-label'>Alignment</div>\n<div class='cc-primitives-in-row flex-wrap'>\n<c20-graphic-radio complex='false' icon='&#39;alignment:AlignLeft&#39;' label='&#39;left&#39;' small='true'></c20-graphic-radio>\n<c20-graphic-radio complex='false' icon='&#39;alignment:AlignCenter&#39;' is-selected='true' label='&#39;center&#39;' small='true'></c20-graphic-radio>\n<c20-graphic-radio complex='false' icon='&#39;alignment:AlignRight&#39;' label='&#39;right&#39;' small='true'></c20-graphic-radio>\n<c20-graphic-radio complex='false' icon='&#39;alignment:AlignRight&#39;' label='&#39;right&#39;' small='true'></c20-graphic-radio>\n</div>\n<p0-spacer></p0-spacer>\n<div class='p8-label'>Header Design</div>\n<div class='cc-primitives-in-row flex-wrap'>\n<c20-graphic-radio icon='&#39;header-design:&#39; + icon' label='icon' ng-repeat-start='icon in $ctrl.headerDesign'></c20-graphic-radio>\n<c20-graphic-radio icon='&#39;header-design:&#39; + icon + &#39;-selected&#39;' is-selected='true' label='icon + &#39;-selected&#39;' ng-repeat-end=''></c20-graphic-radio>\n</div>\n</div>\n</cc-panel-frame>\n<cc-panel-frame label='image positions' ng-if='$ctrl.isVisible(&#39;image positions&#39;)'>\n<div class='cc-panel-content'>\n<div class='p8-label'>Image positions (3X3)</div>\n<div class='cc-primitives-in-row'>\n<div class='rectangles-container'>\n<p26-image-position rectangles-count-each-row='3' rectangles-count='9' selected-rectangle='2'></p26-image-position>\n</div>\n</div>\n<p0-spacer></p0-spacer>\n<p0-spacer></p0-spacer>\n<p0-spacer></p0-spacer>\n<div class='p8-label'>Image positions (2X2)</div>\n<div class='cc-primitives-in-row'>\n<div class='rectangles-container'>\n<p26-image-position rectangles-count-each-row='2' rectangles-count='4' selected-rectangle='1'></p26-image-position>\n</div>\n</div>\n</div>\n</cc-panel-frame>\n<cc-panel-frame class='-with-p16a-header' help-tooltip='TOOLTIP' label='Panel Frame that can disabled scroll' ng-if='$ctrl.isVisible(&#39;Disabled Scroll Panel Frame&#39;)' on-close='$ctrl.close()' on-help='$ctrl.help()' scroll-disabled='$ctrl.scrollDisabled' show-close-button='true' show-return-button='true'>\n<cc-panel-fixed-top></cc-panel-fixed-top>\n<c11-paragraph html='&quot;&lt;p&gt;&lt;strong&gt;Panel Header&lt;/strong&gt;&lt;/p&gt;Each panel frame comes with an integrated header. The header can be configured via the attributes &amp;quot;API&amp;quot; (see examples in this playground). In addition, there are 3 variations of the header: the default one, &lt;code&gt;p16a&lt;/code&gt; (with return button on the left) and &lt;code&gt;p16b&lt;/code&gt; (for narrow sub panels). Use them by applying one of these specific classes to &lt;code&gt;&amp;lt;cc-panel-frame&amp;gt;&lt;/code&gt;: &lt;code&gt;-with-p16a-header&lt;/code&gt; and &lt;code&gt;-with-p16b-header&lt;/code&gt;.&quot;'></c11-paragraph>\n<c11-paragraph html='&quot;&lt;p&gt;&lt;strong&gt;Panel Fixed Top&lt;/strong&gt;&lt;/p&gt;The panel is scrollable, but it may have a fixed area on the top. To include a fixed top area in your panel frame, add the &lt;code&gt;&amp;lt;cc-panel-fixed-top&amp;gt&lt;/code&gt; element with desired content inside it. It looks like &lt;strong&gt;Panel Frame&lt;/strong&gt; paragraph above.&quot;'></c11-paragraph>\n<c11-paragraph html='&quot;&lt;p&gt;&lt;strong&gt;Panel Footer&lt;/strong&gt;&lt;/p&gt;The footer is not built-in to the panel frame and is optional. To include a footer in your panel frame, simply add the &lt;code&gt;&amp;lt;cc-panel-footer&amp;gt&lt;/code&gt; element with your element of choice inside it (usually a button primitive).&quot;'></c11-paragraph>\n<c11-paragraph html='&quot;&lt;p&gt;&lt;strong&gt;Panel Footer&lt;/strong&gt;&lt;/p&gt;The footer is not built-in to the panel frame and is optional. To include a footer in your panel frame, simply add the &lt;code&gt;&amp;lt;cc-panel-footer&amp;gt&lt;/code&gt; element with your element of choice inside it (usually a button primitive).&quot;'></c11-paragraph>\n<c11-paragraph html='&quot;&lt;p&gt;&lt;strong&gt;Panel Footer&lt;/strong&gt;&lt;/p&gt;The footer is not built-in to the panel frame and is optional. To include a footer in your panel frame, simply add the &lt;code&gt;&amp;lt;cc-panel-footer&amp;gt&lt;/code&gt; element with your element of choice inside it (usually a button primitive).&quot;'></c11-paragraph>\n<c11-paragraph html='&quot;&lt;p&gt;&lt;strong&gt;Panel Footer&lt;/strong&gt;&lt;/p&gt;The footer is not built-in to the panel frame and is optional. To include a footer in your panel frame, simply add the &lt;code&gt;&amp;lt;cc-panel-footer&amp;gt&lt;/code&gt; element with your element of choice inside it (usually a button primitive).&quot;'></c11-paragraph>\n<c11-paragraph html='&quot;&lt;p&gt;&lt;strong&gt;Panel Footer&lt;/strong&gt;&lt;/p&gt;The footer is not built-in to the panel frame and is optional. To include a footer in your panel frame, simply add the &lt;code&gt;&amp;lt;cc-panel-footer&amp;gt&lt;/code&gt; element with your element of choice inside it (usually a button primitive).&quot;'></c11-paragraph>\n<c11-paragraph html='&quot;&lt;p&gt;&lt;strong&gt;Panel Footer&lt;/strong&gt;&lt;/p&gt;The footer is not built-in to the panel frame and is optional. To include a footer in your panel frame, simply add the &lt;code&gt;&amp;lt;cc-panel-footer&amp;gt&lt;/code&gt; element with your element of choice inside it (usually a button primitive).&quot;'></c11-paragraph>\n<c11-paragraph html='&quot;&lt;p&gt;&lt;strong&gt;Panel Footer&lt;/strong&gt;&lt;/p&gt;The footer is not built-in to the panel frame and is optional. To include a footer in your panel frame, simply add the &lt;code&gt;&amp;lt;cc-panel-footer&amp;gt&lt;/code&gt; element with your element of choice inside it (usually a button primitive).&quot;'></c11-paragraph>\n<cc-panel-footer>\n<button class='p9a-secondary cc-x-height -inverse' ng-click='$ctrl.toggleDisableScroll()'>\n<div class='cc-x-height'>{{$ctrl.scrollDisabled ? 'Enable' : 'Disable'}} scroll</div>\n</button>\n</cc-panel-footer>\n</cc-panel-frame>\n");
}]);try{angular.module("commonControlsPreload")}catch(e){angular.module("commonControlsPreload",[])}angular.module("commonControlsPreload").run(["$templateCache",function(a){a.put("views/primitives/p0-spacer.html","<hr class='p0-spacer' ng-class='$ctrl.sizeClass' ng-if='$ctrl.verticalSpacer'>\n<span class='p0-spacer-horizontal' ng-class='$ctrl.sizeClass' ng-if='!$ctrl.verticalSpacer'></span>\n")}]);try{angular.module("commonControlsPreload")}catch(e){angular.module("commonControlsPreload",[])}angular.module("commonControlsPreload").run(["$templateCache",function(a){a.put("views/primitives/p1-text-input.html","<input cc-select-on-focus='{{$ctrl.selectOnFocus}}' class='p1-input short cc-ellipsis' data-hook='text-input' focus-delay='500' focus-if='$ctrl.focused' maxlength='{{$ctrl.maxLength}}' ng-blur='$ctrl.onBlur({ $event: $event })' ng-change='$ctrl.onChange()' ng-class='{ &#39;text-invalid&#39;: !$ctrl.isInputValid(), &#39;unselectable&#39;: $ctrl.isDisabled }' ng-disabled='$ctrl.isDisabled' ng-focus='$ctrl.onFocus({ $event: $event })' ng-if='!$ctrl.long' ng-keyup='$ctrl.onTextKeyUp($event)' ng-model-options='$ctrl.modelOptions' ng-model='$ctrl.value' placeholder='{{$ctrl.placeholder}}'>\n<textarea cc-select-on-focus='{{$ctrl.selectOnFocus}}' class='p1-input long' data-hook='long-text-input' focus-delay='500' focus-if='$ctrl.focused' msd-elastic='' ng-attr-placeholder='{{$ctrl.placeholder}}' ng-blur='$ctrl.onLongTextBlur($event)' ng-change='$ctrl.onChange()' ng-class='{&#39;focused&#39; : this.isLongTextFocused, &#39;text-invalid&#39; : !$ctrl.isInputValid()}' ng-disabled='$ctrl.isDisabled' ng-focus='$ctrl.onLongTextFocus($event)' ng-if='$ctrl.long' ng-keyup='$ctrl.onTextKeyUp($event, true)' ng-model-options='$ctrl.modelOptions' ng-model='$ctrl.value' rows='1'></textarea>\n<div class='p1-error' ng-if='!$ctrl.isInputValid() &amp;&amp; !!$ctrl.validationTooltip'>\n<cc-validation tooltip='{{$ctrl.validationTooltip}}'></cc-validation>\n</div>\n<p17-divider class='cc-control-divider' shorter-divider='!$ctrl.isInputValid() &amp;&amp; !!$ctrl.validationTooltip'></p17-divider>\n")}]);try{angular.module("commonControlsPreload")}catch(e){angular.module("commonControlsPreload",[])}angular.module("commonControlsPreload").run(["$templateCache",function(a){a.put("views/primitives/p3-dropdown-list.html","<md-input-container class='cc-md-select'>\n<div class='p3-dropdown-list-icon-arrow cc-icon-arrow-down'></div>\n<md-select data-hook='p3-md-select' md-container-class='{{$ctrl.mdContainerClass}}' md-on-open='$ctrl.onOpen()' ng-model-options='{ trackBy: $ctrl.trackByKey ? &#39;$value.&#39; + $ctrl.trackByKey : $value }' ng-model='$ctrl.value' placeholder='{{$ctrl.placeholder}}'>\n<md-option class='cc-x-height' data-hook='dropdown-list-item' ng-attr-title='{{ $ctrl.getTitle(item) }}' ng-class='[{ &#39;-selected&#39;: $ctrl.selectedIndex === $index }, item.class]' ng-click='$ctrl.itemSelected(item, $index)' ng-repeat='item in $ctrl.items' ng-value='item'>\n<img class='p3-item-media' ng-if='item.media' ng-src='{{item.media.relativeUri}}'>\n{{ $ctrl.getItemLabel(item) }}\n</md-option>\n<div class='cc-x-height p3-dropdown-action' data-hook='dropdown-action-link' ng-if='$ctrl.linkTitle' ng-mousedown='$ctrl.onLinkClick()'>\n{{ $ctrl.linkTitle }}\n</div>\n</md-select>\n</md-input-container>\n<div class='cc-aux-menu'>\n<button cc-tooltip-position='top' cc-tooltip='{{:: $ctrl.helpTooltip}}' class='cc-aux-btn' data-hook='help-button' ng-click='$ctrl.onHelp(); $event.stopPropagation()' ng-if='!!$ctrl.helpTooltip || !!$ctrl.onHelp'>\n<i class='cc-icon-info'></i>\n</button>\n</div>\n<p17-divider class='cc-control-divider' ng-class='{&#39;-ignore-control-hover&#39;: $ctrl.noHover}'></p17-divider>\n")}]);try{angular.module("commonControlsPreload")}catch(e){angular.module("commonControlsPreload",[])}angular.module("commonControlsPreload").run(["$templateCache",function(a){a.put("views/primitives/p5-slider.html","<div class='p5-slider' ng-class='{&#39;p5-state-stepper&#39;: $ctrl.stepper, &#39;p5a&#39;: $ctrl.type === &#39;p5a&#39;, &#39;p5-stepper-with-ticks&#39;: $ctrl.stepperTicks }'>\n<cc-svg-icon class='p5a-icon before' icon='{{:: $ctrl.iconBefore || &#39;primitives:minus&#39; }}' id='p5a-icon-before' ng-if='$ctrl.type === &#39;p5a&#39;' ng-mousedown='$ctrl.onIconClick($event)'></cc-svg-icon>\n<div class='p5-total'></div>\n<div class='p5-current'></div>\n<div class='p5-steppers' ng-if='$ctrl.stepper &amp;&amp; $ctrl.stepperTicks'>\n<div class='p5-stepper' ng-class='{&#39;p5-state-filled&#39;: stepper.filled}' ng-repeat='stepper in $ctrl.steppers' ng-style='{&#39;left&#39;: stepper.left + &#39;px&#39;}'></div>\n</div>\n<div class='p5-handle' ng-class='{&#39;p5-state-dragging&#39;: $ctrl.dragging}' style='position: absolute'></div>\n<cc-svg-icon class='p5a-icon after' icon='{{:: $ctrl.iconAfter || &#39;primitives:plus&#39; }}' id='p5a-icon-after' ng-if='$ctrl.type === &#39;p5a&#39;' ng-mousedown='$ctrl.onIconClick($event)'></cc-svg-icon>\n</div>\n<p1-text-input class='p5-input' ng-class='{&#39;p5-state-stepper&#39;: $ctrl.stepper}' ng-if='$ctrl.type !== &#39;p5a&#39;' on-blur='$ctrl.onInputBlur();$ctrl.onBlur();' on-change-value='$ctrl.onValueChange({value: value})' on-focus='$ctrl.onInputFocus();$ctrl.onFocus();' on-keyup='$ctrl.onInputKeyup($event);' value='$ctrl.label'></p1-text-input>\n")}]);try{angular.module("commonControlsPreload")}catch(e){angular.module("commonControlsPreload",[])}angular.module("commonControlsPreload").run(["$templateCache",function(a){a.put("views/primitives/p6-control-header.html","<div class='p8-label' data-hook='control-header-container' ng-class='{ &#39;-toggleable&#39;: !$ctrl.hideToggleButton }' ng-click='$ctrl.toggle($event)'>\n<div cc-tooltip='{{!$ctrl.hideToggleButton &amp;&amp; !$ctrl.active ? &#39;hidden_item&#39; : &#39;&#39;}}' class='p8-label-text' data-hook='label'>\n{{ $ctrl.label }}\n</div>\n<div class='cc-aux-menu'>\n<button cc-tooltip-position='top' cc-tooltip='{{$ctrl.helpTooltip}}' class='cc-aux-btn' data-hook='help-button' ng-click='$ctrl.onHelp()' ng-show='$ctrl.showHelpButton'>\n<i class='cc-icon-info'></i>\n</button>\n<button cc-tooltip='{{$ctrl.active ? &#39;hide_item&#39; : &#39;show_item&#39;}}' class='cc-aux-btn' data-hook='toggle-button' data-name='toggle-button' ng-hide='$ctrl.hideToggleButton'>\n<i data-hook='toggle-icon' ng-class='$ctrl.active ? &#39;cc-icon-show&#39; : &#39;cc-icon-hide&#39;'></i>\n</button>\n<div class='new-tooltip' data-hook='new-tooltip' ng-if='$ctrl.showNewTooltip'>NEW</div>\n</div>\n</div>\n")}]);try{angular.module("commonControlsPreload")}catch(e){angular.module("commonControlsPreload",[])}angular.module("commonControlsPreload").run(["$templateCache",function(a){a.put("views/primitives/p11-item-navigation.html","<div cc-tooltip-position='top' cc-tooltip='{{$ctrl.previousTooltip}}' class='p11-button cc-icon-arrow-left' data-hook='prev-button' ng-click='$ctrl.goPrevious()' ng-disabled='!$ctrl.canPrev()'></div>\n<div class='p11-pages'>\n<span data-hook='current'>{{ $ctrl.current }}</span>\n<span>/</span>\n<span data-hook='count'>{{ $ctrl.count }}</span>\n</div>\n<div cc-tooltip-position='top' cc-tooltip='{{$ctrl.nextTooltip}}' class='p11-button cc-icon-arrow-right' data-hook='next-button' ng-click='$ctrl.goNext()' ng-disabled='!$ctrl.canNext()'></div>\n")}]);try{angular.module("commonControlsPreload")}catch(e){angular.module("commonControlsPreload",[])}angular.module("commonControlsPreload").run(["$templateCache",function(a){a.put("views/primitives/p13-radio-buttons.html","<label class='p13-item' data-hook='label' ng-click='$ctrl.setValue(item.value);' ng-repeat='item in $ctrl.items track by item.value'>\n<input class='p13-button' data-hook='button' name='{{$ctrl.name}}' ng-checked='item.value == $ctrl.value' type='radio'>\n<span class='p13-icon'></span>\n<span class='p13-label'>{{item.label}}</span>\n</label>\n")}]);try{angular.module("commonControlsPreload")}catch(e){angular.module("commonControlsPreload",[])}angular.module("commonControlsPreload").run(["$templateCache",function(a){a.put("views/primitives/p14-checkbox.html","<div class='p14-checkbox'>\n<div class='required' data-hook='required' ng-class='{ &quot;-required&quot;: $ctrl.item.required }' ng-click='$ctrl.toggleRequire()'></div>\n<input data-hook='checkbox' id='{{$ctrl.randomId}}' ng-change='$ctrl.valueChanged(value)' ng-model='$ctrl.item.checked' type='checkbox'>\n<div class='p14-checkbox-inner'></div>\n<div class='p14-checkbox-label' data-hook='label'>{{ $ctrl.item.label }}</div>\n</div>\n")}]);try{angular.module("commonControlsPreload")}catch(e){angular.module("commonControlsPreload",[])}angular.module("commonControlsPreload").run(["$templateCache",function(a){a.put("views/primitives/p15-toggle.html","<div ng-class='{&#39;with-icons&#39;: $ctrl.leftIcon}'>\n<div class='p15-indicator' ng-if='$ctrl.value !== undefined'></div>\n<div class='p15-icons' ng-if='$ctrl.leftIcon'>\n<cc-svg-icon class='p15-icon' icon='{{$ctrl.leftIcon}}' ng-class='{&#39;indicated&#39;: !$ctrl.value}'></cc-svg-icon>\n<cc-svg-icon class='p15-icon' icon='{{$ctrl.rightIcon}}' ng-class='{&#39;indicated&#39;: !!$ctrl.value}' ng-if='$ctrl.rightIcon'></cc-svg-icon>\n</div>\n</div>\n")}]);try{angular.module("commonControlsPreload")}catch(e){angular.module("commonControlsPreload",[])}angular.module("commonControlsPreload").run(["$templateCache",function(a){a.put("views/primitives/p16-panel-header.html","<div class='p16-panel-header'>\n<div class='cc-headline'>\n<div class='cc-aux-menu -left'>\n<button class='cc-aux-btn' data-hook='return-button' ng-click='$ctrl.onReturn()' ng-if='!!$ctrl.showReturnButton'>\n<i class='cc-icon-arrow-left'></i>\n</button>\n</div>\n<span data-hook='label'>{{ $ctrl.label }}</span>\n<span class='p16-number' data-hook='number' ng-if='$ctrl.hasNumber()'>{{ $ctrl.number }}</span>\n<div class='cc-aux-menu -right'>\n<button adi-automation='reset-button' cc-tooltip='design_kit_reset' class='p9b-text-button -medium' data-hook='reset-button' ng-click='$ctrl.onReset()' ng-if='!!$ctrl.showResetButton'>\n{{:: 'design.kit.reset.button' | translate }}\n</button>\n<button cc-tooltip-position='top' cc-tooltip='{{:: $ctrl.helpTooltip || &#39;help&#39; }}' class='cc-aux-btn' data-hook='help-button' ng-click='$ctrl.onHelp()' ng-if='!!$ctrl.helpTooltip || !!$ctrl.showHelpButton'>\n<i class='cc-icon-help-12x7'></i>\n</button>\n<button class='cc-aux-btn' data-hook='close-button' ng-click='$ctrl.onClose()' ng-if='!!$ctrl.showCloseButton'>\n<i class='cc-icon-close-12'></i>\n</button>\n<button cc-tooltip-position='top' cc-tooltip='back' class='cc-aux-btn' data-hook='return-sub-button' ng-click='$ctrl.onReturn()' ng-if='!!$ctrl.showReturnButton'>\n<i class='cc-icon-arrow-left'></i>\n</button>\n</div>\n</div>\n</div>\n")}]);try{angular.module("commonControlsPreload")}catch(e){angular.module("commonControlsPreload",[])}angular.module("commonControlsPreload").run(["$templateCache",function(a){a.put("views/primitives/p17-divider.html","<hr class='p17-divider' ng-class='{ &#39;shorter-divider&#39;: $ctrl.shorterDivider}'>\n")}]);try{angular.module("commonControlsPreload")}catch(e){angular.module("commonControlsPreload",[])}angular.module("commonControlsPreload").run(["$templateCache",function(a){a.put("views/primitives/p20-link.html","<div class='c5-link cc-action cc-x-height' data-hook='link' ng-class='{&#39;hovered&#39;:$ctrl.isHover}' ng-click='$ctrl.onLinkClick({ link: $ctrl.link.value })'>\n<span class='c5-link-label cc-x-height cc-ellipsis'>\n<span class='cc-pointer' data-hook='linkDescription'>{{ $ctrl.link.state ? $ctrl.link.value : $ctrl.isHover ? $ctrl.connectLabel : $ctrl.noLinkLabel }}</span>\n</span>\n<i class='c5-link-icon cc-icon-link' ng-if='$ctrl.link.state'></i>\n<cc-svg-icon class='c5-link-negative-validation' icon='misc:negative-validation-outline' ng-if='!$ctrl.link.state &amp;&amp; !$ctrl.isHover'></cc-svg-icon>\n</div>\n<p17-divider class='cc-control-divider'></p17-divider>\n")}]);try{angular.module("commonControlsPreload")}catch(e){angular.module("commonControlsPreload",[])}angular.module("commonControlsPreload").run(["$templateCache",function(a){a.put("views/primitives/p21-color-tag.html","<div cc-tooltip-options='{&quot;offsetY&quot;: {{:: -2 + ($ctrl.size === &quot;lg&quot; &amp;&amp; !$ctrl.isPlaceholder ? -$ctrl.buttonOffsetLarge : 0)}} }' cc-tooltip='{{:: $ctrl.tooltip }}' class='p21-color-tag' data-hook='color-tag' ng-class='[&#39;p21-color-tag-{{ $ctrl.size }}&#39;, {&#39;p21-color-tag-selected&#39;: $ctrl.isSelected, &#39;p21-placeholder-tag&#39;: $ctrl.isPlaceholder}]' ng-click='$ctrl.handleClick($event)' ng-style='{backgroundColor: $ctrl.color}'>\n<cc-svg-icon icon='coloration:selected' is-corner-icon='true' ng-if='$ctrl.isSelected'></cc-svg-icon>\n<span class='p21-color-tag-overlay' data-hook='p21-color-tag-overlay' ng-show='$ctrl.showIcon || $ctrl.isPlaceholder'>\n<cc-svg-icon icon='coloration:{{$ctrl.getIcon()}}' module='coloration' ng-if='!$ctrl.isPlaceholder'></cc-svg-icon>\n<cc-svg-icon icon='coloration:{{:: $ctrl.placeholderIcon}}' module='coloration' ng-if='$ctrl.isPlaceholder'></cc-svg-icon>\n</span>\n</div>\n")}]);try{angular.module("commonControlsPreload")}catch(e){angular.module("commonControlsPreload",[])}angular.module("commonControlsPreload").run(["$templateCache",function(a){a.put("views/primitives/p22-rich-text-toolbar.html","<div class='p22-rich-text-toolbar'>\n<span class='p22-rich-text-toolbar-section' ng-if='$ctrl.isBUISectionVisible()'>\n<cc-svg-icon cc-tooltip-position='top' cc-tooltip='richtext_bold' class='cc-svg-icon-circle' data-hook='bold' icon='rich-text:bold' ng-class='{&#39;-active&#39;: $ctrl.isActive(&#39;bold&#39;)}' ng-click='$ctrl.buttonClick(&#39;bold&#39;)' ng-disabled='$ctrl.commandDisabled(&#39;bold&#39;)'></cc-svg-icon>\n<cc-svg-icon cc-tooltip-position='top' cc-tooltip='richtext_italic' class='cc-svg-icon-circle' data-hook='italic' icon='rich-text:italic' ng-class='{&#39;-active&#39;: $ctrl.isActive(&#39;italic&#39;)}' ng-click='$ctrl.buttonClick(&#39;italic&#39;)' ng-disabled='$ctrl.commandDisabled(&#39;italic&#39;)'></cc-svg-icon>\n<cc-svg-icon cc-tooltip-position='top' cc-tooltip='richtext_underline' class='cc-svg-icon-circle' data-hook='underline' icon='rich-text:underline' ng-class='{&#39;-active&#39;: $ctrl.isActive(&#39;underline&#39;)}' ng-click='$ctrl.buttonClick(&#39;underline&#39;)' ng-disabled='$ctrl.commandDisabled(&#39;underline&#39;)'></cc-svg-icon>\n<div class='p22-section-divider' data-hook='p22-section-divider'></div>\n</span>\n<span class='p22-rich-text-toolbar-section' ng-if='$ctrl.isListingSectionVisible()'>\n<cc-svg-icon cc-tooltip-position='top' cc-tooltip='richtext_bullets' class='cc-svg-icon-circle' data-hook='bullets' icon='rich-text:bullets' ng-class='{&#39;-active&#39;: $ctrl.isActive(&#39;bullets&#39;)}' ng-click='$ctrl.buttonClick(&#39;bullets&#39;)' ng-disabled='$ctrl.commandDisabled(&#39;bullets&#39;)'></cc-svg-icon>\n<cc-svg-icon cc-tooltip-position='top' cc-tooltip='richtext_numbers' class='cc-svg-icon-circle' data-hook='numbers' icon='rich-text:numbers' ng-class='{&#39;-active&#39;: $ctrl.isActive(&#39;numbers&#39;)}' ng-click='$ctrl.buttonClick(&#39;numbers&#39;)' ng-disabled='$ctrl.commandDisabled(&#39;numbers&#39;)'></cc-svg-icon>\n<div class='p22-section-divider'></div>\n</span>\n<span class='p22-rich-text-toolbar-section' ng-if='$ctrl.isLinkingSectionVisible()'>\n<cc-svg-icon cc-tooltip-position='top' cc-tooltip='{{ $ctrl.getLinkTooltip() }}' class='cc-svg-icon-circle' data-hook='link' icon='rich-text:link' ng-class='{&#39;-active&#39;: $ctrl.isActive(&#39;link&#39;)}' ng-click='$ctrl.buttonClick(&#39;link&#39;)' ng-disabled='$ctrl.commandDisabled(&#39;link&#39;)'></cc-svg-icon>\n<div class='p22-section-divider'></div>\n</span>\n<span class='p22-rich-text-toolbar-section' ng-if='$ctrl.isClearFormattingSectionVisible()'>\n<cc-svg-icon cc-tooltip-position='top' cc-tooltip='richtext_clear-formatting' class='cc-svg-icon-circle' data-hook='clear-formatting' icon='rich-text:clear-formatting' ng-class='{&#39;-active&#39;: $ctrl.isActive(&#39;clear-formatting&#39;)}' ng-click='$ctrl.buttonClick(&#39;clear-formatting&#39;)' ng-disabled='$ctrl.commandDisabled(&#39;clear-formatting&#39;)'></cc-svg-icon>\n</span>\n</div>\n")}]);try{angular.module("commonControlsPreload")}catch(e){angular.module("commonControlsPreload",[])}angular.module("commonControlsPreload").run(["$templateCache",function(a){a.put("views/primitives/p23-rich-text-input.html","<div class='p23-rich-text-input' p23-rich-text-input-inline></div>\n")}]);try{angular.module("commonControlsPreload")}catch(e){angular.module("commonControlsPreload",[])}angular.module("commonControlsPreload").run(["$templateCache",function(a){a.put("views/primitives/p24-palette.html","<div class='p24-palette' ng-class='{&#39;-selectable&#39;: $ctrl.isSelectable, &#39;-selected&#39;: $ctrl.isSelected}'>\n<div class='p24-palette-swatch' ng-repeat='color in $ctrl.colors track by $index' ng-style='{backgroundColor: color}'></div>\n<cc-svg-icon data-hook='selected-icon' icon='coloration:selected' is-corner-icon='true' ng-if='$ctrl.isSelected'></cc-svg-icon>\n</div>\n")}]);try{angular.module("commonControlsPreload")}catch(e){angular.module("commonControlsPreload",[])}angular.module("commonControlsPreload").run(["$templateCache",function(a){a.put("views/primitives/p25-background-preview.html","<div class='p25-background-preview-inner' data-hook='preview-container' ng-class='[$ctrl.cls, &#39;-&#39; + $ctrl.size, {&#39;-clickable&#39;: $ctrl.onClick, &#39;selected&#39;: $ctrl.isSelected}]' ng-click='$ctrl.onClick()' ng-mouseenter='$ctrl.mouseEnter()' ng-mouseleave='$ctrl.mouseLeave()' ng-style='::$ctrl.style'>\n<cc-svg-icon data-hook='selected-indicator' icon='coloration:selected' is-corner-icon='true' ng-if='$ctrl.isSelected'></cc-svg-icon>\n<div class='preview-container'>\n<div adi-automation='{{:: $ctrl.data.type}}' cc-tooltip='{{$ctrl.tooltip}}' class='type-icon'>\n<cc-svg-icon data-hook='icon' icon='background-preview:{{:: $ctrl.data.type}}'></cc-svg-icon>\n</div>\n<div class='video-wrapper' data-hook='video-container' ng-if='$ctrl.isVideo'>\n<video autostart='false' class='video-tag' data-hook='video-tag' loop>\n<source data-hook='video-source' ng-src='{{$ctrl.data.value}}'>\n</video>\n</div>\n<div class='gallery-wrapper' data-hook='gallery-container' ng-class='[$ctrl.data.metaData.galleryType]' ng-if='$ctrl.isGallery'>\n<div class='gallery-viewport'>\n<div class='gallery-item' data-hook='gallery-item' ng-repeat='item in $ctrl.data.value | limitTo: $ctrl.slidesLimit track by $index'>\n<img ng-src='{{$ctrl.getGalleryURL(item)}}'>\n</div>\n</div>\n<div class='gallery-dots' data-hook='slideshow-dots' ng-if='$ctrl.isSlideshow'>\n<div class='gallery-dot' ng-class='{&#39;active&#39;: $index === 0}' ng-repeat='item in $ctrl.data.value | limitTo: $ctrl.dotsLimit track by $index'></div>\n</div>\n</div>\n</div>\n</div>\n")}]);try{angular.module("commonControlsPreload")}catch(e){angular.module("commonControlsPreload",[])}angular.module("commonControlsPreload").run(["$templateCache",function(a){a.put("views/primitives/p26-image-position.html","<div class='p26-image-position' ng-class='$ctrl.getClasses(index)' ng-click='$ctrl.selectPosition(index)' ng-repeat='index in $ctrl.getElementsIndices() track by $index'></div>\n")}]);try{angular.module("commonControlsPreload")}catch(e){angular.module("commonControlsPreload",[])}angular.module("commonControlsPreload").run(["$templateCache",function(a){a.put("views/c2-text-input.html","<div class='c2-text-input' data-hook='container' ng-class='{ &#39;-active&#39;: $ctrl.active, &#39;-suggestions-visible&#39;: $ctrl.showMediaAutocomplete &amp;&amp; $ctrl.matchCount &gt; 0 || $ctrl.showTextAutocomplete, &#39;-prefixed&#39;: $ctrl.prefix, &#39;-c2e&#39;: ($ctrl.showIcon || $ctrl.showButton), &#39;-c2m&#39;: $ctrl.mobile }'>\n<p6-control-header active='$ctrl.active' class='c2-header' data-hook='p6-control-header' help-tooltip='{{$ctrl.helpTooltip}}' hide-toggle-button='$ctrl.headerToggleDisabled' label='$ctrl.label' on-help='$ctrl.onHelp()' on-toggle='$ctrl.toggle()' show-help-button='$ctrl.showHelpButton'></p6-control-header>\n<div class='cc-action' ng-class='{ &#39;-long&#39;: $ctrl.long }'>\n<div class='c2-prefix' data-hook='prefix' ng-if='$ctrl.prefix'>{{ $ctrl.prefix }}</div>\n<p1-text-input change-value-on-blur='$ctrl.changeValueOnBlur' data-hook='p1-text-input' debounce-delay='$ctrl.debounceDelay' focused='$ctrl.focused' is-disabled='$ctrl.isDisabled' is-show-validator-error='$ctrl.isShowValidatorError' long='$ctrl.long' max-length='{{$ctrl.maxLength}}' ng-if='!$ctrl.mobile' ng-keydown='$event.stopPropagation()' on-blur='$ctrl.onInputBlur($event)' on-change-value='$ctrl.onChange(value)' on-focus='$ctrl.onInputFocus($event)' on-keyup='$ctrl.onKeyUp($event)' on-submit='$ctrl.onSubmit()' placeholder='$ctrl.placeholder' validation='$ctrl.validation' value='$ctrl.value'></p1-text-input>\n<cc-autocomplete data-hook='autocomplete' hovered-index='$ctrl.autocompleteHoveredIndex' ignore-value='$ctrl.ignoreValueForAutoComplete' items='$ctrl.autocomplete' link-label='{{$ctrl.autocompleteLinkLabel}}' ng-if='$ctrl.showTextAutocomplete' on-item-select='$ctrl.autocompleteItemSelect(item)' on-link-click='$ctrl.onAutocompleteLinkClick()' on-match-change='$ctrl.matchChange(matches)' rand-id='{{$ctrl.randId}}' value='$ctrl.value'></cc-autocomplete>\n<cc-autocomplete-media data-hook='autocomplete-media' hovered-index='$ctrl.autocompleteHoveredIndex' ignore-value='$ctrl.ignoreValueForAutoComplete' items='$ctrl.autocomplete' ng-if='$ctrl.showMediaAutocomplete' on-item-select='$ctrl.autocompleteMediaItemSelect(item)' on-match-change='$ctrl.matchChange(matches)' rand-id='{{$ctrl.randId}}' value='$ctrl.value'></cc-autocomplete-media>\n<div cc-tooltip-position='top' cc-tooltip='{{$ctrl.valueTooltip}}' class='cc-ellipsis c2-text-label' data-hook='p1-text-label' ng-if='$ctrl.mobile'>{{ $ctrl.value }}</div>\n<span class='c2e-icon' data-hook='c2e-icon' ng-class='&#39;cc-icon-&#39; + $ctrl.iconName' ng-click='$ctrl.onIconClick()' ng-if='$ctrl.showIcon'></span>\n<button class='c2e-button p9-primary -controlbtn' data-hook='c2e-button' ng-click='$ctrl.onButtonClick()' ng-if='$ctrl.showButton'>{{ $ctrl.buttonText }}</button>\n<button cc-tooltip='{{$ctrl.active ? &#39;hide_item&#39; : &#39;show_item&#39;}}' class='c2-dynamic-toggle cc-aux-btn' data-hook='toggle-button' data-name='toggle-button' ng-click='$ctrl.toggle()' ng-hide='$ctrl.disableToggle' ng-if='$ctrl.mobile'>\n<i data-hook='toggle-icon' ng-class='$ctrl.active ? &#39;cc-icon-show&#39; : &#39;cc-icon-hide&#39;'></i>\n</button>\n</div>\n<p17-divider ng-class='{&#39;cc-hidden-marker&#39;: !$ctrl.showIcon &amp;&amp; !$ctrl.showButton &amp;&amp; !$ctrl.mobile}'></p17-divider>\n</div>\n")}]);try{angular.module("commonControlsPreload")}catch(e){angular.module("commonControlsPreload",[])}angular.module("commonControlsPreload").run(["$templateCache",function(a){a.put("views/c3-dropdown-list.html","<div class='c3-dropdown' ng-class='{ &#39;-active&#39;: $ctrl.active, &#39;-dropdown-open&#39;: $ctrl.showList }'>\n<p6-control-header active='$ctrl.active' data-hook='dropdown-header' help-tooltip='{{$ctrl.helpTooltip}}' hide-toggle-button='$ctrl.disableToggle' label='$ctrl.label' on-help='$ctrl.onHelp()' on-toggle='$ctrl.toggle()' show-help-button='$ctrl.showHelpButton'></p6-control-header>\n<p3-dropdown-list container-class='{{ $ctrl.containerClass }}' data-hook='dropdown' items='$ctrl.items' label-key='{{ $ctrl.labelKey }}' link-title='{{ $ctrl.linkTitle }}' on-link-click='$ctrl.onLinkClick()' on-selection-change='$ctrl.onSelectionChange({item: item})' placeholder='{{$ctrl.placeholder}}' show-titles='$ctrl.showTitles' track-by-key='{{ $ctrl.trackByKey }}' value='$ctrl.value'></p3-dropdown-list>\n</div>\n")}]);try{angular.module("commonControlsPreload")}catch(e){angular.module("commonControlsPreload",[])}angular.module("commonControlsPreload").run(["$templateCache",function(a){a.put("views/c4-media-preview.html","<div class='c4-media-preview' data-hook='container' ng-class='{ &#39;-active&#39;: $ctrl.active, &#39;c4m&#39;: $ctrl.type === &#39;c4m&#39; }'>\n<div class='p8-label' ng-class='{ &#39;-toggleable&#39;: $ctrl.type === &#39;c4m&#39; &amp;&amp; !$ctrl.disableToggle }' ng-if='$ctrl.showTabs || $ctrl.type === &quot;c4m&quot;'>\n<div class='p8-label-text cc-x-height' data-hook='tabs' ng-if='$ctrl.showTabs &amp;&amp; $ctrl.type !== &quot;c4m&quot;'>\n<span class='cc-label-tab cc-pointer' data-hook='inactive-tab' ng-if='!$ctrl.active'>{{ $ctrl.label }}</span>\n<i class='cc-icon cc-icon-intro-v-checkbox' ng-hide='!$ctrl.active || !$ctrl.imageSelected'></i>\n<span cc-tooltip='C4_IMAGE' class='cc-label-tab cc-pointer' data-hook='image-tab' ng-class='{ &#39;-active&#39;: $ctrl.imageSelected }' ng-click='$ctrl.showImage()' ng-if='$ctrl.isImageTabVisible'>{{ $ctrl.getTabLabel(0) }}</span>\n<div class='cc-label-separator cc-x-height' ng-if='$ctrl.showTabSeparator(1)'></div>\n<i class='cc-icon cc-icon-intro-v-checkbox' ng-hide='!$ctrl.active || !$ctrl.gallerySelected'></i>\n<span cc-tooltip='C4_GALLERY' class='cc-label-tab cc-pointer' data-hook='gallery-tab' ng-class='{ &#39;-active&#39;: $ctrl.gallerySelected }' ng-click='$ctrl.showGallery()' ng-if='$ctrl.isGalleryTabVisible'>{{ $ctrl.getTabLabel(1) }}</span>\n<div class='cc-label-separator cc-x-height' ng-if='$ctrl.showTabSeparator(2)'></div>\n<i class='cc-icon cc-icon-intro-v-checkbox' ng-hide='!$ctrl.active || !$ctrl.videoSelected'></i>\n<span cc-tooltip='C4_VIDEO' class='cc-label-tab cc-pointer' data-hook='video-tab' ng-class='{ &#39;-active&#39;: $ctrl.videoSelected }' ng-click='$ctrl.showVideo()' ng-if='$ctrl.isVideoTabVisible'>{{ $ctrl.getTabLabel(2) }}</span>\n<div class='cc-label-separator cc-x-height' ng-if='$ctrl.showTabSeparator(3)'></div>\n<i class='cc-icon cc-icon-intro-v-checkbox' ng-hide='!$ctrl.active || !$ctrl.extVideoSelected'></i>\n<span cc-tooltip='C4_VIDEO' class='cc-label-tab cc-pointer' data-hook='ext-video-tab' ng-class='{ &#39;-active&#39;: $ctrl.extVideoSelected }' ng-click='$ctrl.showExtVideo()' ng-if='$ctrl.isExtVideoTabVisible'>{{ $ctrl.getTabLabel(3) }}</span>\n<div class='cc-label-separator cc-x-height' ng-if='$ctrl.showTabSeparator(4)'></div>\n<i class='cc-icon cc-icon-intro-v-checkbox' ng-hide='!$ctrl.active || !$ctrl.clipartSelected'></i>\n<span cc-tooltip='C4_IMAGE' class='cc-label-tab cc-pointer' data-hook='clipart-tab' ng-class='{ &#39;-active&#39;: $ctrl.clipartSelected }' ng-click='$ctrl.showClipart()' ng-if='$ctrl.isClipArtTabVisible'>{{ $ctrl.getTabLabel(4) }}</span>\n<div class='cc-label-separator cc-x-height' ng-if='$ctrl.showTabSeparator(5)'></div>\n<i class='cc-icon cc-icon-intro-v-checkbox' ng-hide='!$ctrl.active || !$ctrl.shapeSelected'></i>\n<span cc-tooltip='C4_SHAPE' class='cc-label-tab cc-pointer' data-hook='shape-tab' ng-class='{ &#39;-active&#39;: $ctrl.shapeSelected }' ng-click='$ctrl.showShape()' ng-if='$ctrl.isShapeTabVisible'>{{ $ctrl.getTabLabel(5) }}</span>\n</div>\n<div class='p8-label-text cc-x-height' data-hook='mobile-label' ng-click='$ctrl.toggle()' ng-if='$ctrl.type === &quot;c4m&quot;'>\n{{ $ctrl.getActiveLabel() }}\n</div>\n<div class='cc-aux-menu' data-hook='c2-aux-menu' ng-hide='$ctrl.prefix || ($ctrl.type === &quot;c4m&quot; &amp;&amp; $ctrl.active)'>\n<button cc-tooltip='{{$ctrl.active ? &#39;hide_item&#39; : &#39;show_item&#39;}}' class='cc-aux-btn' data-hook='toggle-button' ng-click='$ctrl.toggle()' ng-hide='$ctrl.disableToggle'>\n<i data-hook='toggle-icon' ng-class='$ctrl.active ? &#39;cc-icon-show&#39; : &#39;cc-icon-hide&#39;'></i>\n</button>\n</div>\n</div>\n<div class='c4-body' data-hook='preview-container' ng-show='$ctrl.active'>\n<div class='c4-preview-wrapper' data-hook='preview-content' ng-mouseenter='$ctrl.hoveringEditPanel = true;' ng-mouseleave='$ctrl.hoveringEditPanel = false;'>\n<img alt='{{$ctrl.previewMediaAlt}}' class='preview is-image' data-hook='single-image-thumb' ng-if='$ctrl.imageSelected' ng-src='{{$ctrl.previewMediaUrl}}' title='{{$ctrl.previewMediaTitle}}'>\n<img class='preview is-gallery' data-hook='gallery-thumbs' ng-if='$ctrl.gallerySelected' ng-src='{{$ctrl.previewMediaUrl}}' title='{{$ctrl.previewMediaTitle}}'>\n<img class='preview is-video' data-hook='video-thumb' ng-if='$ctrl.videoSelected' ng-src='{{$ctrl.previewMediaUrl}}' title='{{$ctrl.previewMediaTitle}}'>\n<img class='preview is-ext-video' data-hook='ext-video-thumb' ng-if='$ctrl.extVideoSelected' ng-src='{{$ctrl.previewMediaUrl}}' title='{{$ctrl.previewMediaTitle}}'>\n<img class='preview is-shape' data-hook='shape-thumb' ng-if='$ctrl.shapeSelected' ng-src='{{$ctrl.previewMediaUrl}}' title='{{$ctrl.previewMediaTitle}}'>\n<img class='preview is-clipart' data-hook='clipart-thumb' ng-if='$ctrl.clipartSelected' ng-src='{{$ctrl.previewMediaUrl}}' title='{{$ctrl.previewMediaTitle}}'>\n<div class='c4-overlay preview' data-hook='overlay-controls' ng-if='$ctrl.type !== &quot;c4m&quot;' ng-show='!$ctrl.noHover &amp;&amp; ($ctrl.showEditPanel || $ctrl.hoveringEditPanel)'>\n<div class='c4-overlay-default-buttons' ng-if='!$ctrl.gallerySelected'><button class='p9c-primary cc-x-height' data-hook='replace-menu' ng-class='{&#39;-disabled&#39;: $ctrl.disableMediaChangeButton}' ng-click='$ctrl.replaceMedia()' ng-disabled='$ctrl.disableMediaChangeButton' ng-if='$ctrl.replaceButtonText != &quot;&quot;'><span class='cc-x-height font-t2' ng-bind-html='$ctrl.replaceButtonText'></span></button><button class='p9c-primary -icon-only' data-hook='crop-menu' ng-click='$ctrl.onCrop()' ng-show='$ctrl.imageSelected &amp;&amp; $ctrl.imageCrop'><i cc-tooltip-position='top' cc-tooltip='crop' class='cc-icon-circle cc-icon-crop'></i></button><button class='p9c-primary -icon-only' data-hook='info-menu' ng-click='$ctrl.onInfo()' ng-hide='$ctrl.videoSelected' ng-if='$ctrl.showInfo'><i cc-tooltip-position='top' cc-tooltip='settings' class='cc-icon-circle cc-icon-settings'></i></button></div>\n<div class='c4-overlay-gallery-buttons' ng-if='$ctrl.gallerySelected'><button class='p9c-primary cc-x-height' data-hook='organize-media' ng-class='{&#39;-disabled&#39;: $ctrl.disableMediaChangeButton}' ng-click='$ctrl.replaceMedia()' ng-disabled='$ctrl.disableMediaChangeButton'><span class='cc-x-height font-t2'>Organize Media</span></button><div class='bottom-text'><button class='p9c-text-button cc-x-height' data-hook='change-type' ng-click='$ctrl.onChangeGallery()'><span class='cc-x-height font-t2'>Change Gallery Type</span></button></div></div>\n</div>\n</div>\n<div class='c4m-controls' data-hook='side-controls' ng-if='$ctrl.type === &quot;c4m&quot; &amp;&amp; $ctrl.active'><button class='c4m-controls-crop p9-primary -controlbtn -with-icon cc-x-height' data-hook='crop-menu' ng-click='$ctrl.onCrop()' ng-show='$ctrl.imageSelected &amp;&amp; $ctrl.imageCrop'><i cc-tooltip-position='top' cc-tooltip='settings' class='cc-icon-crop'></i>Crop</button><div class='cc-aux-menu' data-hook='c2-aux-menu' ng-hide='$ctrl.prefix'>\n<button cc-tooltip='hide_item' class='cc-aux-btn' data-hook='toggle-button' ng-click='$ctrl.toggle()' ng-hide='$ctrl.disableToggle'>\n<i class='cc-icon-show' data-hook='toggle-icon'></i>\n</button>\n</div>\n</div>\n</div>\n<c19-toggle class='c19-toggle-container' data-hook='dont-crop' label='{{::$ctrl.dontCropToggleText}}' ng-if='$ctrl.showDontCrop &amp;&amp; $ctrl.imageSelected' on-value-change='$ctrl.onDontCropChange({value: value})' type='c19a' value='$ctrl.dontCrop'></c19-toggle>\n<p17-divider ng-class='{&#39;cc-hidden-marker&#39;: $ctrl.type !== &#39;c4m&#39;}'></p17-divider>\n</div>\n")}]);try{angular.module("commonControlsPreload")}catch(e){angular.module("commonControlsPreload",[])}angular.module("commonControlsPreload").run(["$templateCache",function(a){a.put("views/c5-link-input.html","<div class='c5-link-input' data-hook='link-input' ng-class='{ &#39;-active&#39;: $ctrl.active }' ng-mouseenter='$ctrl.setIsHover(true)' ng-mouseleave='$ctrl.setIsHover(false)'>\n<p6-control-header active='$ctrl.active' help-tooltip='{{$ctrl.helpTooltip}}' hide-toggle-button='$ctrl.disableToggle' label='$ctrl.label' on-help='$ctrl.onHelp()' on-toggle='$ctrl.toggle()' show-help-button='$ctrl.showHelpButton'></p6-control-header>\n<p20-link data-hook='p20-link' is-hover='$ctrl.isHover' link='$ctrl.link' on-link-click='$ctrl.onEditLink({ link: link })'></p20-link>\n</div>\n");
}]);try{angular.module("commonControlsPreload")}catch(e){angular.module("commonControlsPreload",[])}angular.module("commonControlsPreload").run(["$templateCache",function(a){a.put("views/c6-list-item.html","<div class='c6-list-item' data-hook='list-item' item-type='{{ $ctrl.itemType }}' ng-class='{ &#39;-active&#39;: !$ctrl.item.hidden, &#39;-menu-visible&#39;: $ctrl.showMenu, &#39;-draggable&#39;: $ctrl.isDraggable, &#39;-selectable&#39;: $ctrl.isSelectable, &#39;-selected&#39;: $ctrl.item.selected,&#39;-invalid&#39;: !$ctrl.isValid(), &#39;-hide-eye-when-active&#39;: $ctrl.shouldHideEyeWhenActive}'>\n<i as-sortable-item-handle class='c6-drag-handle cc-icon-dragsquare' ng-if='$ctrl.isDraggable'></i>\n<i class='c6-list-item-icon cc-icon-{{$ctrl.icon}}' data-hook='list-item-icon' ng-if='$ctrl.icon'></i>\n<span class='cc-ellipsis' data-hook='list-item-label' ng-class='{ &#39;-would-edit-if-clicked&#39;: $ctrl.editInPlace }' ng-click='$ctrl.itemClicked()' ng-dblclick='$ctrl.itemDoubleClicked()' ng-hide='$ctrl.inEditMode'>\n<label ng-bind='$ctrl.getLabel($ctrl.label)'></label>\n</span>\n<p1-text-input class='c6-list-item-editable-label' data-hook='editable-label' focused='$ctrl.inEditMode' ng-show='$ctrl.inEditMode' on-blur='$ctrl.disableEditMode()' on-change-value='$ctrl.onEditText(value)' on-submit='$ctrl.disableEditMode()' value='$ctrl.label'></p1-text-input>\n<i class='c6-list-item-arrow cc-icon-arrow-right'></i>\n<div class='cc-aux-menu' ng-hide='$ctrl.inEditMode'>\n<button cc-tooltip-position='top' cc-tooltip='{{$ctrl.item.helpTooltip}}' class='cc-aux-btn c6-help-button cc-icon-info' data-hook='help-button' ng-click='$ctrl.item.onHelp()' ng-if='!!$ctrl.item.helpTooltip || !!$ctrl.item.onHelp'></button>\n<button class='cc-aux-btn cc-cog' data-hook='cog' ng-class='$ctrl.showMenu || $ctrl.cogAlwaysVisible ? &#39;cog-visible&#39; : &#39;&#39;' ng-click='$ctrl.openMenu($event); $event.stopPropagation()' ng-dblclick='$event.stopPropagation()' ng-show='!$ctrl.noMenu'>\n<i cc-tooltip-position='top' cc-tooltip='settings' class='cc-icon-settings'></i>\n</button>\n<button cc-tooltip='{{ $ctrl.item.hidden ? &#39;show_item&#39; : &#39;hide_item&#39;}}' class='cc-aux-btn c6-eyecon' data-hook='eye' ng-class='{ &#39;-hide-eye-when-active&#39;: $ctrl.shouldHideEyeWhenActive, &#39;-eye-icon-requested&#39;: $ctrl.showEyeIcon, &#39;cc-icon-hide&#39;: $ctrl.isHideIconEnabled, &#39;cc-icon-show&#39;: $ctrl.isShowIconEnabled, &#39;cc-icon-hide-eye&#39;: $ctrl.isHideEyeIconEnabled, &#39;cc-icon-show-eye&#39;: $ctrl.isShowEyeIconEnabled }' ng-click='$ctrl.toggle(); $event.stopPropagation()'></button>\n<button class='cc-aux-btn cc-icon-edit' data-hook='edit-icon' ng-click='$ctrl.editIconClicked(); $event.stopPropagation()' ng-show='$ctrl.showEditIcon'></button>\n<i cc-tooltip='{{$ctrl.getInvalidTooltip()}}' class='c6-list-item-invalid-icon cc-icon-negative-validation' data-hook='invalid-icon'></i>\n</div>\n<p17-divider class='cc-control-divider -ignore-control-hover' ng-if='$ctrl.itemType === &#39;p10d&#39;'></p17-divider>\n</div>\n")}]);try{angular.module("commonControlsPreload")}catch(e){angular.module("commonControlsPreload",[])}angular.module("commonControlsPreload").run(["$templateCache",function(a){a.put("views/c6-list.html","<div class='c6-list -active'>\n<p6-control-header active='$ctrl.active' data-hook='c6-list-label' help-tooltip='{{$ctrl.helpTooltip}}' hide-toggle-button='$ctrl.disableToggle' label='$ctrl.label' ng-show='$ctrl.label' on-help='$ctrl.onHelp()' show-help-button='$ctrl.showHelpButton'></p6-control-header>\n<div class='c6-list-link' data-hook='add-new-item' ng-click='$ctrl.onAddNew()' ng-show='$ctrl.addNewTitle &amp;&amp; !$ctrl.disableListLink'>\n<button class='cc-x-height' data-hook='add-new-item-button'>\n<i class='c6-add-icon cc-icon-add-small'></i>\n<span class='cc-x-height'>{{ $ctrl.addNewTitle | cleanAddNewTitle }}</span>\n</button>\n</div>\n<ul as-sortable='$ctrl.sortableOptions' class='c6-list-items' data-hook='c6-list-items' data-ng-model='$ctrl.items' is-disabled='!$ctrl.isDraggable' ng-class='{&quot;-draggable&quot;: $ctrl.isDraggable}'>\n<li as-sortable-item ng-repeat='item in $ctrl.items'>\n<c6-list-item cog-always-visible='$ctrl.cogAlwaysVisible' data-hook='c6-list-item' edit-in-place='$ctrl.editInPlace' icon-property='$ctrl.itemIconProperty' invalid-tooltip='$ctrl.invalidTooltip' is-draggable='$ctrl.isDraggable' is-selectable='$ctrl.isSelectable' item-type='$ctrl.itemType' item-validator='$ctrl.itemValidator({item: item})' item='item' label-filter='$ctrl.labelFilter' label-property='$ctrl.itemLabelProperty' no-delete='!$ctrl.enableDeleteOnSingleItem &amp;&amp; $ctrl.items.length === 1 || $ctrl.noDelete' no-duplicate='$ctrl.noDuplicate' no-edit='$ctrl.noEdit' no-hide='$ctrl.noHide' no-item-to-page='$ctrl.noItemToPage' no-menu='$ctrl.noMenu' on-click='$ctrl.onItemClick({item: item})' on-delete='$ctrl.onDelete({item: item})' on-double-click='$ctrl.onItemDoubleClick({item: item})' on-duplicate='$ctrl.onDuplicate({item: item})' on-edit='$ctrl.onEdit({item: item})' on-item-to-page='$ctrl.onItemToPage({item: item})' on-toggle='$ctrl.onToggle({item: item})' show-edit-icon='$ctrl.showEditIcon' show-eye-icon='$ctrl.showEyeIcon'></c6-list-item>\n</li>\n</ul>\n<p17-divider></p17-divider>\n</div>\n")}]);try{angular.module("commonControlsPreload")}catch(e){angular.module("commonControlsPreload",[])}angular.module("commonControlsPreload").run(["$templateCache",function(a){a.put("views/c7-multi-field-group.html","<div class='c7-multi-field-group' data-hook='multi-field-group' ng-class='{ &#39;-active&#39;: $ctrl.active }'>\n<p6-control-header active='$ctrl.active' data-hook='header' help-tooltip='{{$ctrl.helpTooltip}}' hide-toggle-button='$ctrl.disableToggle' label='$ctrl.label' on-help='$ctrl.onHelp()' on-toggle='$ctrl.toggle()' show-help-button='$ctrl.showHelpButton'></p6-control-header>\n<div class='cc-group-content' data-hook='group-content' ng-if='$ctrl.active'>\n<ng-transclude></ng-transclude>\n</div>\n<p17-divider class='cc-hidden-marker'></p17-divider>\n</div>\n")}]);try{angular.module("commonControlsPreload")}catch(e){angular.module("commonControlsPreload",[])}angular.module("commonControlsPreload").run(["$templateCache",function(a){a.put("views/c8-label-action.html","<div class='c8a-action-label -active' data-hook='label'>\n<div class='p8-label' data-hook='label'>\n{{ $ctrl.label }}\n</div>\n<div class='c8-label cc-action cc-x-height' data-hook='action' ng-click='$ctrl.onActionClick()'>\n<span class='cc-x-height cc-ellipsis'>\n<span class='cc-pointer'>{{ $ctrl.actionText }}</span>\n</span>\n</div>\n</div>\n")}]);try{angular.module("commonControlsPreload")}catch(e){angular.module("commonControlsPreload",[])}angular.module("commonControlsPreload").run(["$templateCache",function(a){a.put("views/c8b-label-graphic.html","<div class='c8-graphic-label' data-hook='label' ng-class='{ &#39;-active&#39;: $ctrl.active, &#39;-is-invalid&#39;: !$ctrl.isValid() }' ng-click='$ctrl.onClick($event)'>\n<p6-control-header active='$ctrl.active' data-hook='header' help-tooltip='{{$ctrl.helpTooltip}}' hide-toggle-button='$ctrl.disableToggle' label='$ctrl.label' on-help='$ctrl.onHelp()' on-toggle='$ctrl.toggle($event)' show-help-button='$ctrl.showHelpButton'></p6-control-header>\n<c11-paragraph html='$ctrl.paragraph' ng-if='$ctrl.paragraph &amp;&amp; $ctrl.active'></c11-paragraph>\n<ul class='cc-icon-list cc-action'>\n<i class='c8-arrow-icon cc-icon-arrow-right'></i>\n<li class='cc-icon-label' data-hook='list-item' ng-click='$ctrl.onClick($event, item)' ng-model='item' ng-repeat='item in $ctrl.items'>\n<i class='{{item.cssClass}}' data-hook='list-item-icon'></i>\n{{ item.text }}\n</li>\n<li>\n<cc-validation is-valid='$ctrl.isValid()' tooltip='{{$ctrl.validationTooltip}}'></cc-validation>\n</li>\n</ul>\n</div>\n")}]);try{angular.module("commonControlsPreload")}catch(e){angular.module("commonControlsPreload",[])}angular.module("commonControlsPreload").run(["$templateCache",function(a){a.put("views/c9-action-button.html","<div class='c9-action-button'>\n<button class='c9-cta cc-x-height' data-hook='action-button' ng-click='$ctrl.onClick()'>\n<span class='cc-x-height'>{{ $ctrl.label }}</span>\n</button>\n</div>\n")}]);try{angular.module("commonControlsPreload")}catch(e){angular.module("commonControlsPreload",[])}angular.module("commonControlsPreload").run(["$templateCache",function(a){a.put("views/c10-item-navigation.html","<p11-item-navigation count='$ctrl.count' current='$ctrl.current' next-tooltip='{{$ctrl.nextTooltip}}' on-next='$ctrl.onNext({current: current})' on-previous='$ctrl.onPrevious({current: current})' previous-tooltip='{{$ctrl.previousTooltip}}'></p11-item-navigation>\n")}]);try{angular.module("commonControlsPreload")}catch(e){angular.module("commonControlsPreload",[])}angular.module("commonControlsPreload").run(["$templateCache",function(a){a.put("views/c11-paragraph.html","<p class='c11-paragraph' data-hook='paragraph' ng-bind-html='$ctrl.html'></p>\n")}]);try{angular.module("commonControlsPreload")}catch(e){angular.module("commonControlsPreload",[])}angular.module("commonControlsPreload").run(["$templateCache",function(a){a.put("views/c13-checkbox-list.html","<div class='c14-checkbox-list'>\n<div class='checkbox-list-title' data-hook='label'>\n{{ $ctrl.label }}\n</div>\n<div class='checkbox-list-items'>\n<c14-checkbox item='item' ng-repeat='item in $ctrl.items' on-required-change='$ctrl.requiredChange(item)' on-toggle='$ctrl.checkedChange(item)'></c14-checkbox>\n</div>\n</div>\n")}]);try{angular.module("commonControlsPreload")}catch(e){angular.module("commonControlsPreload",[])}angular.module("commonControlsPreload").run(["$templateCache",function(a){a.put("views/c14-checkbox.html","<div class='c14-checkbox'>\n<p14-checkbox data-hook='p14-checkbox' item='$ctrl.item' on-required-change='$ctrl.onRequiredChange({ item: $ctrl.item })' on-toggle='$ctrl.onToggle({ item: $ctrl.item })'></p14-checkbox>\n<p17-divider></p17-divider>\n</div>\n")}]);try{angular.module("commonControlsPreload")}catch(e){angular.module("commonControlsPreload",[])}angular.module("commonControlsPreload").run(["$templateCache",function(a){a.put("views/c15-radio-buttons.html","<div class='c15-radio-buttons' ng-class='{ &#39;-active&#39;: $ctrl.active }'>\n<p6-control-header active='$ctrl.active' help-tooltip='{{$ctrl.helpTooltip}}' hide-toggle-button='true' label='$ctrl.label' on-help='$ctrl.onHelp()' show-help-button='$ctrl.showHelpButton'></p6-control-header>\n<div class='cc-action'>\n<p13-radio-buttons items='$ctrl.items' on-value-change='$ctrl.onValueChange({value: value})' value='$ctrl.value'></p13-radio-buttons>\n</div>\n</div>\n")}]);try{angular.module("commonControlsPreload")}catch(e){angular.module("commonControlsPreload",[])}angular.module("commonControlsPreload").run(["$templateCache",function(a){a.put("views/c16-slider.html","<div class='c16-slider' ng-class='{ &#39;-active&#39;: $ctrl.active }'>\n<p6-control-header active='$ctrl.active' help-tooltip='{{$ctrl.helpTooltip}}' hide-toggle-button='true' label='$ctrl.label' ng-if='$ctrl.label.length &gt; 0' on-help='$ctrl.onHelp()' show-help-button='$ctrl.showHelpButton'></p6-control-header>\n<div class='cc-action'>\n<p5-slider max='$ctrl.max' min='$ctrl.min' on-value-change='$ctrl.onValueChange({value: value})' step='$ctrl.step' stepper='$ctrl.stepper' units='$ctrl.units' value='$ctrl.value'></p5-slider>\n</div>\n</div>\n")}]);try{angular.module("commonControlsPreload")}catch(e){angular.module("commonControlsPreload",[])}angular.module("commonControlsPreload").run(["$templateCache",function(a){a.put("views/c17-tabs.html","<div class='c17-tabs'>\n<div class='p8-label c17-tab-head cc-ellipsis' data-hook='tab' ng-class='{&quot;-selected&quot;: $ctrl.selectedItem === $ctrl.items[$index]}' ng-click='$ctrl.itemChange(item)' ng-repeat='item in $ctrl.items'>{{ item.label }}</div>\n</div>\n")}]);try{angular.module("commonControlsPreload")}catch(e){angular.module("commonControlsPreload",[])}angular.module("commonControlsPreload").run(["$templateCache",function(a){a.put("views/c18-panel-button.html","<div class='c18b-panel-button'>\n<button class='p9b-text-button' data-hook='button' ng-click='$ctrl.onClick()'><div class='c18b-label cc-ellipsis'><i class='c18b-label-icon cc-icon-add-small'></i>\n&nbsp;\n{{ $ctrl.label }}</div></button>\n<p17-divider class='cc-control-divider -ignore-control-hover'></p17-divider>\n</div>\n")}]);try{angular.module("commonControlsPreload")}catch(e){angular.module("commonControlsPreload",[])}angular.module("commonControlsPreload").run(["$templateCache",function(a){a.put("views/c19-toggle.html","<div class='c19-toggle' ng-class='{ &#39;c19a&#39;: !$ctrl.type || $ctrl.type === &#39;c19a&#39;, &#39;c19b&#39;: $ctrl.type === &#39;c19b&#39;, &#39;c19c&#39;: $ctrl.type === &#39;c19c&#39;, &#39;c19m&#39;: $ctrl.type === &#39;c19m&#39;, &#39;-on&#39;: $ctrl.value,   &#39;-off&#39; : !$ctrl.value, &#39;-active&#39;: $ctrl.value }'>\n<p15-toggle cc-tooltip-position='top' cc-tooltip='{{$ctrl.toggleTooltip}}' data-hook='toggle-switch' left-icon='$ctrl.leftIcon' ng-if='$ctrl.type === &#39;c19c&#39;' on-value-change='$ctrl.onValueChange({value: value})' right-icon='$ctrl.rightIcon' value='$ctrl.value'></p15-toggle>\n<p6-control-header active='$ctrl.value' help-tooltip='{{$ctrl.helpTooltip}}' hide-toggle-button='$ctrl.disableToggle' label='$ctrl.label' ng-if='$ctrl.type === &#39;c19b&#39; || $ctrl.type === &#39;c19m&#39;' show-help-button='!!$ctrl.helpTooltip || !!$ctrl.onHelp'></p6-control-header>\n<div class='c19-label cc-ellipsis' data-hook='c19-label' ng-if='!$ctrl.type || $ctrl.type === &#39;c19a&#39; || $ctrl.type === &#39;c19c&#39;'>{{$ctrl.label}}</div>\n<div class='cc-aux-menu' ng-if='!$ctrl.type || $ctrl.type === &#39;c19a&#39; || $ctrl.type === &#39;c19c&#39;'>\n<button cc-tooltip-position='top' cc-tooltip='{{$ctrl.helpTooltip}}' class='cc-aux-btn' data-hook='help-button' ng-click='$ctrl.onHelp(); $event.stopPropagation()' ng-if='!!$ctrl.helpTooltip || !!$ctrl.onHelp'>\n<i class='cc-icon-info'></i>\n</button>\n<button cc-tooltip='{{$ctrl.toggleTooltip}}' class='cc-aux-btn' data-hook='toggle-button' data-name='toggle-button' ng-if='$ctrl.type === &#39;c19m&#39;'>\n<i data-hook='toggle-icon' ng-class='$ctrl.value ? &#39;cc-icon-show&#39; : &#39;cc-icon-hide&#39;'></i>\n</button>\n<p15-toggle cc-tooltip='{{$ctrl.toggleTooltip}}' data-hook='toggle-switch' ng-if='!$ctrl.type || $ctrl.type === &#39;c19a&#39;' on-value-change='$ctrl.onValueChange({value: value})' value='$ctrl.value'></p15-toggle>\n</div>\n<p17-divider class='cc-control-divider -ignore-control-hover' ng-if='!$ctrl.type || $ctrl.type === &#39;c19a&#39; || $ctrl.type === &#39;c19b&#39; || $ctrl.type === &#39;c19m&#39;'></p17-divider>\n</div>\n")}]);try{angular.module("commonControlsPreload")}catch(e){angular.module("commonControlsPreload",[])}angular.module("commonControlsPreload").run(["$templateCache",function(a){a.put("views/c20-graphic-radio.html","<div class='c20-graphic-radio' data-hook='element' ng-class='{&#39;selected&#39;: $ctrl.isSelected, &#39;-small&#39;: $ctrl.small}' ng-click='$ctrl.onClick()'>\n<div class='icon-wrapper'>\n<cc-svg-icon data-hook='selected-indicator' icon='coloration:selected' is-corner-icon='true' ng-class='::{&#39;-small&#39;:$ctrl.small}' ng-if='$ctrl.isSelected'></cc-svg-icon>\n<cc-svg-icon class='the-icon' data-hook='the-icon' from-inline='$ctrl.complex' icon='{{$ctrl.displayedIcon}}'></cc-svg-icon>\n</div>\n<div class='label-wrapper'>\n<div class='label' data-hook='label'>{{ $ctrl.label }}</div>\n</div>\n</div>\n")}]);try{angular.module("commonControlsPreload")}catch(e){angular.module("commonControlsPreload",[])}angular.module("commonControlsPreload").run(["$templateCache",function(a){a.put("views/c23-rich-text-input.html","<div class='c23-rich-text-input' data-hook='container' ng-class='{ &#39;-active&#39;: $ctrl.active, &#39;-focused&#39;: $ctrl.inFocus }' ng-mouseenter='$ctrl.onMouseEnter()' ng-mouseleave='$ctrl.onMouseLeave()'>\n<p6-control-header active='$ctrl.active' data-hook='p6-control-header' help-tooltip='{{$ctrl.helpTooltip}}' hide-toggle-button='$ctrl.disableToggle' label='$ctrl.label' on-help='$ctrl.onHelp()' on-toggle='$ctrl.toggle()' show-help-button='$ctrl.showHelpButton'></p6-control-header>\n<div class='cc-action' ng-class='{&#39;focus&#39;: $ctrl.inFocus}' ng-if='$ctrl.active'>\n<p22-rich-text-toolbar command-state='$ctrl.getCommandState(command)' data-hook='p22-rich-text-toolbar' displayed-sections='$ctrl.displayedRTTSections' ng-class='{&#39;in-focus&#39;: $ctrl.inFocus}' on-click='$ctrl.runCommand(command)'></p22-rich-text-toolbar>\n<p23-rich-text-input change-value-on-blur='$ctrl.changeValueOnBlur' command-state='$ctrl.getCommandState(command)' data-hook='p23-rich-text-input' debounce-delay='$ctrl.debounceDelay' default-formatting='$ctrl.defaultFormatting' focus-on-init='$ctrl.focusOnInit' focused='$ctrl.focused' ignore-blur-and-focus='$ctrl.ignoreBlurAndFocus' is-disabled='$ctrl.isDisabled' links-manager='$ctrl.linksManager' max-length='{{$ctrl.maxLength}}' on-blur='$ctrl.onInputBlur($event, $value)' on-change-value='$ctrl.onChange(value)' on-external-paste='$ctrl.onExternalPaste(value)' on-focus='$ctrl.onInputFocus($event)' on-link-command='$ctrl.onLinkCommand({linkId: linkId})' on-ready='$ctrl.onEditorReady()' placeholder='$ctrl.placeholder' register-command-runner='$ctrl.registerCommandRunner(runner, utilFuncs)' styles-manager='$ctrl.stylesManager' validation='$ctrl.validation' value='$ctrl.value'></p23-rich-text-input>\n</div>\n<p17-divider></p17-divider>\n</div>\n")}]);try{angular.module("commonControlsPreload")}catch(e){angular.module("commonControlsPreload",[])}angular.module("commonControlsPreload").run(["$templateCache",function(a){a.put("views/c25-background-preview.html","<div class='c25-background-preview-inner' data-hook='inner-element' ng-click='$ctrl.onEdit()'>\n<header class='-active'>\n<p6-control-header class='p6-control-header' data-hook='label' hide-toggle-button='true' label='$ctrl.label'></p6-control-header>\n<button class='-controlbtn p9a-secondary edit-button'>Edit</button>\n</header>\n<p25-background-preview data='$ctrl.data'></p25-background-preview>\n</div>\n")}]);try{angular.module("commonControlsPreload")}catch(e){angular.module("commonControlsPreload",[])}angular.module("commonControlsPreload").run(["$templateCache",function(a){a.put("views/c26-image-position.html","<div class='c26-image-position' ng-class='{&quot;with-footer&quot;: $ctrl.showFooter}'>\n<p16-panel-header class='header-style' label='{{$ctrl.headerTitle}}' on-close='$ctrl.onClose()' show-close-button='true'></p16-panel-header>\n<c11-paragraph class='header-body' html='$ctrl.body' ng-if='$ctrl.body'></c11-paragraph>\n<div class='rectangles-container'>\n<p26-image-position on-position-clicked='$ctrl.onPositionClicked({index})' rectangles-count-each-row='$ctrl.rectanglesCountEachRow' rectangles-count='$ctrl.rectanglesCount' selected-rectangle='$ctrl.selectedRectangle'></p26-image-position>\n</div>\n<c11-paragraph class='footer-content' html='$ctrl.footerContentText' ng-click='$ctrl.footerLinkClicked($event)' ng-if='$ctrl.showFooter'></c11-paragraph>\n</div>\n")}]);try{angular.module("commonControlsPreload")}catch(e){angular.module("commonControlsPreload",[])}angular.module("commonControlsPreload").run(["$templateCache",function(a){a.put("views/autocomplete.html","<ul cc-scrollbar class='cc-autocomplete' data-hook='autocomplete' ng-attr-id='{{$ctrl.randId}}'>\n<li class='cc-suggestion' data-hook='autocomplete-item' ng-attr-id='{{&#39;ac-&#39; + $ctrl.randId + &#39;-item-&#39; + $index}}' ng-class='{&quot;-selected&quot;: $ctrl.hoveredIndex === $index}' ng-mousedown='$ctrl.onItemSelect({ item: match })' ng-repeat='match in $ctrl.matches'>\n{{ match }}\n</li>\n<li class='cc-autocomplete-action cc-x-height' data-hook='autocomplete-action-link' ng-class='{&quot;-selected&quot;: $ctrl.hoveredIndex === $ctrl.matches.length}' ng-if='$ctrl.linkLabel' ng-mousedown='$ctrl.onLinkClick()'>\n<span class='cc-x-height'>{{ $ctrl.linkLabel }}</span>\n</li>\n</ul>\n")}]);try{angular.module("commonControlsPreload")}catch(e){angular.module("commonControlsPreload",[])}angular.module("commonControlsPreload").run(["$templateCache",function(a){a.put("views/autocomplete-media.html","<ul cc-scrollbar class='cc-autocomplete cc-autocomplete-media' data-hook='autocomplete' ng-attr-id='{{$ctrl.randId}}' ng-if='$ctrl.matches.length'>\n<li class='cc-media-suggestion cc-x-height' data-hook='autocomplete-item' ng-attr-id='{{&#39;ac-&#39; + $ctrl.randId + &#39;-item-&#39; + $index}}' ng-class='{&quot;-selected&quot;: $ctrl.hoveredIndex === $index}' ng-mousedown='$ctrl.onItemSelect({ item: match })' ng-repeat='match in $ctrl.matches'>\n<img class='cc-media-suggestion-icon' data-hook='item-media' ng-class='{ &#39;-circle&#39;: $ctrl.isImage(match.media)}' ng-src='{{ $ctrl.mediaUrl.generate(match.media) }}'>\n<span class='cc-media-suggestion-text cc-x-height' data-hook='item-text'>{{ match.text }}</span>\n</li>\n</ul>\n")}]);try{angular.module("commonControlsPreload")}catch(e){angular.module("commonControlsPreload",[])}angular.module("commonControlsPreload").run(["$templateCache",function(a){a.put("views/button-editor.html","<c7-multi-field-group active='$ctrl.active' data-hook='editor-group' disable-toggle='$ctrl.disableToggle' label='{{:: $ctrl.label}}' on-toggle='$ctrl.onToggle({visibility: visibility})'>\n<c2-text-input data-hook='button-text-input' debounce-delay=':: $ctrl.debounceDelay' disable-toggle='true' focused='$ctrl.focused' label='BUTTON TEXT' on-blur='$ctrl.onBlur($event)' on-change-value='$ctrl.onTextChange({value: value})' value='$ctrl.text'></c2-text-input>\n<c5-link-input data-hook='button-link-input' disable-toggle='true' label='LINK' link='$ctrl.link' on-edit-link='$ctrl.onEditLink({link: link})'></c5-link-input>\n</c7-multi-field-group>\n")}]);try{angular.module("commonControlsPreload")}catch(e){angular.module("commonControlsPreload",[])}angular.module("commonControlsPreload").run(["$templateCache",function(a){a.put("views/menu-item.html","<div class='p4-item cc-x-height contains-child-hover-icons' data-hook='menu-item' ng-click='$ctrl.onClick()'><i class='p4-item-icon' data-hook='menu-item-icon' ng-class='$ctrl.icon' ng-if='$ctrl.icon'></i><cc-svg-icon class='p4-item-icon' data-hook='menu-item-svg-icon' from-inline='$ctrl.svgIconFromInline' hover-icon='{{$ctrl.svgIconHover}}' icon='{{$ctrl.svgIcon}}' ng-if='$ctrl.svgIcon'></cc-svg-icon><span class='cc-x-height'>{{ $ctrl.label }}</span></div>\n")}]);try{angular.module("commonControlsPreload")}catch(e){angular.module("commonControlsPreload",[])}angular.module("commonControlsPreload").run(["$templateCache",function(a){a.put("views/cc-panel-frame.html","<div class='cc-panel-frame cc-container' ng-class='{ &#39;-with-p18-footer&#39;: $ctrl.hasFooter() }'>\n<p16-panel-header data-hook='panel-header' help-tooltip='{{::$ctrl.helpTooltip}}' label='{{$ctrl.label}}' number='{{$ctrl.number}}' on-close='$ctrl.onClose()' on-help='$ctrl.onHelp()' on-reset='$ctrl.onReset()' on-return='$ctrl.onReturn()' show-close-button='$ctrl.showCloseButton' show-help-button='$ctrl.showHelpButton' show-reset-button='$ctrl.showResetButton' show-return-button='$ctrl.showReturnButton'></p16-panel-header>\n<div class='cc-panel-fixed-top' data-hook='panel-fixed-top' ng-if='$ctrl.hasFixedTop()' ng-transclude='fixedTop'></div>\n<ng-transclude cc-scrollbar cc-scrollbar-disable='{{$ctrl.scrollDisabled}}' class='cc-panel-body' data-hook='default-transclude' ng-class='{&#39;scroll-disabled&#39;: $ctrl.scrollDisabled}' ng-if='!$ctrl.usesPanelBody()'></ng-transclude>\n<div cc-scrollbar cc-scrollbar-disable='{{$ctrl.scrollDisabled}}' class='cc-panel-body' data-hook='panel-body' ng-class='{&#39;scroll-disabled&#39;: $ctrl.scrollDisabled}' ng-if='$ctrl.usesPanelBody()' ng-transclude='body'></div>\n<div class='p18-panel-footer' data-hook='panel-footer' ng-if='$ctrl.hasFooter()' ng-transclude='footer'></div>\n</div>\n")}]);try{angular.module("commonControlsPreload")}catch(e){angular.module("commonControlsPreload",[])}angular.module("commonControlsPreload").run(["$templateCache",function(a){a.put("views/cc-validation.html","<div cc-tooltip='{{$ctrl.tooltip}}' class='cc-invalid-icon cc-icon-negative-validation' data-hook='cc-validation' ng-hide='$ctrl.isValid'></div>\n")}]);try{angular.module("commonControlsPreload")}catch(e){angular.module("commonControlsPreload",[])}angular.module("commonControlsPreload").run(["$templateCache",function(a){a.put("views/popups/iframe.html","<md-dialog aria-describedby='iframe' aria-label='iframe' class='cc-md-dialog md-transition-in' role='dialog' tabindex='-1'>\n<iframe ng-src='{{$ctrl.link}}'></iframe>\n</md-dialog>\n")}]);try{angular.module("commonControlsPreload")}catch(e){angular.module("commonControlsPreload",[])}angular.module("commonControlsPreload").run(["$templateCache",function(a){a.put("views/popups/support-iframe.html","<md-dialog aria-describedby='iframe' aria-label='iframe' class='cc-md-dialog support-iframe md-transition-in' role='dialog' tabindex='-1'>\n<md-progress-circular md-mode='indeterminate' ng-if='!$ctrl.loaded'></md-progress-circular>\n<div class='iframe-container'>\n<a class='drag-area' drag-me='.support-iframe' ng-if='$ctrl.isDraggable'></a>\n<button class='cc-aux-btn cc-icon-close-10 cc-icon-circle dialog-close' ng-click='$ctrl.cancel()' ng-hide='!$ctrl.loaded'></button>\n<iframe cc-support-iframe-ready='$ctrl.iframeLoaded()' ng-hide='!$ctrl.loaded' ng-src='{{$ctrl.link}}'></iframe>\n</div>\n</md-dialog>\n")}]);try{angular.module("commonControlsPreload")}catch(e){angular.module("commonControlsPreload",[])}angular.module("commonControlsPreload").run(["$templateCache",function(a){a.put("views/popups/first-time-notice.html","<md-dialog aria-describedby='first-time-notice' aria-label='{{ $ctrl.heading }}' class='cc-md-dialog md-transition-in' role='dialog' tabindex='-1'>\n<div class='cc-generic-popup'>\n<div class='cc-popup-header'>\n<div class='cc-aux-menu'>\n<button class='cc-aux-btn cc-icon-help-12x7' ng-click='$ctrl.onHelp()' ng-show='$ctrl.onHelp'></button>\n<button class='cc-aux-btn cc-icon-close-10' ng-click='$ctrl.cancel()' ng-show='$ctrl.cancel'></button>\n</div>\n</div>\n<img class='cc-popup-icon' relative-src='images/popups/{{$ctrl.icon}}'>\n<div class='text-h4 cc-popup-heading' compile='$ctrl.heading'></div>\n<p class='cc-popup-text' compile='$ctrl.text'></p>\n<button class='cc-x-height p9-primary -medium dialog-close' ng-click='$ctrl.hide()'>\n<span class='cc-x-height'>{{ $ctrl.acceptButtonText }}</span>\n</button>\n<div class='cc-popup-footer'>\n<p14-checkbox item='$ctrl.checkbox' ng-hide='$ctrl.hideFirstTimeCheckBox'></p14-checkbox>\n</div>\n</div>\n</md-dialog>\n")}]);try{angular.module("commonControlsPreload")}catch(e){angular.module("commonControlsPreload",[])}angular.module("commonControlsPreload").run(["$templateCache",function(a){a.put("views/popups/positive-confirmation.html","<md-dialog aria-describedby='positive-confirmation' aria-label='{{ $ctrl.heading }}' class='cc-md-dialog md-transition-in' role='dialog' tabindex='-1'>\n<div class='cc-generic-popup'>\n<div class='cc-popup-header'>\n<div class='cc-aux-menu'>\n<button class='cc-aux-btn cc-icon-help-12x7' ng-click='$ctrl.onHelp()' ng-show='$ctrl.onHelp'></button>\n<button class='cc-aux-btn cc-icon-close-10' ng-click='$ctrl.$mdDialog.cancel()' ng-hide='$ctrl.noClose'></button>\n</div>\n</div>\n<img class='cc-popup-icon' ng-if='$ctrl.icon' relative-src='images/popups/{{$ctrl.icon}}'>\n<div class='cc-popup-icon -positive' ng-if='!$ctrl.icon'></div>\n<div class='text-h4 cc-popup-heading' compile='$ctrl.heading'></div>\n<p class='cc-popup-text' compile='$ctrl.text'></p>\n<button class='cc-x-height cc-popup-accept p9-primary -medium dialog-close' ng-click='$ctrl.$mdDialog.hide()'>\n<span class='cc-x-height'>{{ $ctrl.acceptButtonText }}</span>\n</button>\n<button class='cc-x-height p9b-text-button -medium' ng-click='$ctrl.$mdDialog.cancel()' ng-if='$ctrl.rejectButtonText.trim()'>\n<span class='cc-x-height'>{{ $ctrl.rejectButtonText }}</span>\n</button>\n</div>\n</md-dialog>\n")}]);try{angular.module("commonControlsPreload")}catch(e){angular.module("commonControlsPreload",[])}angular.module("commonControlsPreload").run(["$templateCache",function(a){a.put("views/popups/positive-continued-action.html","<md-dialog aria-describedby='positive-continued-action' aria-label='{{ $ctrl.heading }}' class='cc-md-dialog md-transition-in' role='dialog' tabindex='-1'>\n<div class='cc-continued-action'>\n<div class='cc-popup-header'>\n<div class='cc-aux-menu'>\n<button class='cc-aux-btn cc-icon-help-12x7' ng-click='$ctrl.onHelp()' ng-show='$ctrl.onHelp'></button>\n<button class='cc-aux-btn cc-icon-close-10' data-hook='close-dialog-button' ng-click='$ctrl.cancel()'></button>\n</div>\n</div>\n<div class='text-h4 cc-popup-heading' compile='$ctrl.heading'></div>\n<p class='cc-popup-text' compile='$ctrl.text' ng-if='$ctrl.text'></p>\n<p3-dropdown-list items='$ctrl.dropDownItems' label-key='name' track-by-key='value' value='$ctrl.dropDown'></p3-dropdown-list>\n<div class='cc-continued-action-footer'>\n<button class='cc-x-height p9a-secondary -small' ng-click='$ctrl.cancel()'>\n<span class='cc-x-height'>{{ $ctrl.rejectButtonText }}</span>\n</button>\n<button class='cc-x-height cc-continued-action-accept p9-primary -small dialog-close' ng-click='$ctrl.hide()'>\n<span class='cc-x-height'>{{ $ctrl.acceptButtonText }}</span>\n</button>\n</div>\n</div>\n</md-dialog>\n")}]);try{angular.module("commonControlsPreload")}catch(e){angular.module("commonControlsPreload",[])}angular.module("commonControlsPreload").run(["$templateCache",function(a){a.put("views/popups/negative-confirmation.html","<md-dialog aria-describedby='negative-confirmation' aria-hidden='true' aria-label='{{ $ctrl.heading }}' class='cc-md-dialog md-transition-in' role='dialog' tabindex='-1'>\n<div class='cc-generic-popup'>\n<div class='cc-popup-header'>\n<div class='cc-aux-menu'>\n<button class='cc-aux-btn cc-icon-help-12x7' ng-click='$ctrl.onHelp()' ng-show='$ctrl.onHelp'></button>\n<button class='cc-aux-btn cc-icon-close-10' ng-click='$ctrl.$mdDialog.cancel()' ng-show='$ctrl.$mdDialog.cancel'></button>\n</div>\n</div>\n<img class='cc-popup-icon' ng-if='$ctrl.icon' relative-src='images/popups/{{$ctrl.icon}}'>\n<div class='cc-popup-icon -negative' ng-if='!$ctrl.icon'></div>\n<div class='text-h4 cc-popup-heading' compile='$ctrl.heading'></div>\n<p class='cc-popup-text' compile='$ctrl.text'></p>\n<button class='cc-x-height cc-popup-accept p9-primary -medium -red dialog-close' ng-click='$ctrl.$mdDialog.hide()'>\n<span class='cc-x-height'>{{ $ctrl.acceptButtonText }}</span>\n</button>\n<button class='cc-x-height p9b-text-button -medium -red' ng-click='$ctrl.$mdDialog.cancel()' ng-if='$ctrl.rejectButtonText'>\n<span class='cc-x-height'>{{ $ctrl.rejectButtonText }}</span>\n</button>\n</div>\n</md-dialog>\n")}]);try{angular.module("commonControlsPreload")}catch(e){angular.module("commonControlsPreload",[])}angular.module("commonControlsPreload").run(["$templateCache",function(a){a.put("views/popups/negative-continued-action.html","<md-dialog aria-describedby='negative-continued-action' aria-label='{{ $ctrl.heading }}' class='cc-md-dialog md-transition-in' role='dialog' tabindex='-1'>\n<div class='cc-continued-action -negative-action'>\n<div class='cc-popup-header'>\n<div class='cc-aux-menu'>\n<button class='cc-aux-btn cc-icon-help-12x7' ng-click='$ctrl.onHelp()' ng-show='$ctrl.onHelp'></button>\n<button class='cc-aux-btn cc-icon-close-10' ng-click='$ctrl.$mdDialog.cancel()'></button>\n</div>\n</div>\n<div class='text-h4 cc-popup-heading' compile='$ctrl.heading'></div>\n<p class='cc-popup-text' compile='$ctrl.text' ng-if='$ctrl.text'></p>\n<div class='cc-continued-action-footer'>\n<button class='cc-x-height p9a-secondary -small -red' ng-click='$ctrl.$mdDialog.cancel()'>\n<span class='cc-x-height'>{{ $ctrl.rejectButtonText }}</span>\n</button>\n<button class='cc-x-height cc-continued-action-accept p9-primary -small -red dialog-close' ng-click='$ctrl.$mdDialog.hide()'>\n<span class='cc-x-height'>{{ $ctrl.acceptButtonText }}</span>\n</button>\n</div>\n</div>\n</md-dialog>\n");
}]);try{angular.module("commonControlsPreload")}catch(e){angular.module("commonControlsPreload",[])}angular.module("commonControlsPreload").run(["$templateCache",function(a){a.put("views/popups/multi-page-popup.html","<md-dialog aria-describedby='first-time-mobile-editor-notice' aria-label='{{ $ctrl.heading }}' class='cc-md-dialog md-transition-in' role='dialog' tabindex='-1'>\n<div class='cc-generic-popup cc-multi-page-popup'>\n<div class='cc-popup-header'>\n<div class='cc-aux-menu'>\n<button class='cc-aux-btn cc-icon-close-10' ng-click='$ctrl.cancel()'></button>\n</div>\n</div>\n<img class='cc-popup-icon' ng-if='!$ctrl.isNext' relative-src='images/popups/{{$ctrl.icon}}'>\n<img class='cc-popup-icon' ng-if='$ctrl.isNext' relative-src='images/popups/{{$ctrl.iconNext}}'>\n<div class='text-h4 cc-popup-heading' compile='$ctrl.heading' ng-if='!$ctrl.isNext'></div>\n<p class='cc-popup-text' compile='$ctrl.text' ng-if='!$ctrl.isNext'></p>\n<div class='text-h4 cc-popup-heading' compile='$ctrl.headingNext' ng-if='$ctrl.isNext' ng-style='{opacity:0}'></div>\n<p class='cc-popup-text' compile='$ctrl.textNext' ng-if='$ctrl.isNext' ng-style='{opacity:0}'></p>\n<div class='cc-popup-footer cc-multi-page-popup-footer'>\n<button class='cc-x-height p9b-text-button -medium cc-multi-page-popup-cancel' ng-click='$ctrl.cancel()' ng-if='$ctrl.showCancelButton &amp;&amp; !$ctrl.isNext'>\n<span class='cc-x-height'>{{ $ctrl.cancelButtonText }}</span>\n</button>\n<button class='cc-x-height p9-primary -medium' ng-click='$ctrl.next()' ng-if='!$ctrl.isNext'>\n<span class='cc-x-height'>{{ $ctrl.nextButtonText }}</span>\n</button>\n<button class='cc-x-height p9-primary -medium' ng-click='$ctrl.hide()' ng-if='$ctrl.isNext'>\n<span class='cc-x-height'>{{ $ctrl.gotItButtonText }}</span>\n</button>\n</div>\n</div>\n</md-dialog>\n")}]);try{angular.module("commonControlsPreload")}catch(e){angular.module("commonControlsPreload",[])}angular.module("commonControlsPreload").run(["$templateCache",function(a){a.put("views/popups/c6-list-item-menu.html","<md-dialog aria-describedby='list-item-menu' aria-label='{{ $ctrl.item.label }}' class='p4-action-menu md-transition-in' data-hook='list-item-menu' ng-style='::$ctrl.getDynamicPosition()' role='menu' tabindex='-1'>\n<cc-menu-item data-hook='menu-edit' icon='cc-icon-edit' label='Edit' ng-click='$ctrl.$mdDialog.hide(); $ctrl.onEdit({item: $ctrl.item});' ng-hide='$ctrl.noEdit'></cc-menu-item>\n<cc-menu-item data-hook='menu-duplicate' icon='cc-icon-duplicate' label='Duplicate' ng-click='$ctrl.$mdDialog.hide(); $ctrl.onDuplicate({item: $ctrl.item})' ng-hide='$ctrl.noDuplicate || $ctrl.item.hidden'></cc-menu-item>\n<cc-menu-item data-hook='menu-hide' icon='cc-icon-hide-eye' label='Hide' ng-click='$ctrl.$mdDialog.hide(); $ctrl.onToggle({item: $ctrl.item})' ng-hide='$ctrl.noHide || $ctrl.item.hidden || $ctrl.item.canHide === false'></cc-menu-item>\n<cc-menu-item data-hook='menu-show' icon='cc-icon-show-eye' label='Show' ng-click='$ctrl.$mdDialog.hide(); $ctrl.onToggle({item: $ctrl.item})' ng-show='!$ctrl.noHide &amp;&amp; $ctrl.item.hidden &amp;&amp; $ctrl.item.canHide !== false'></cc-menu-item>\n<cc-menu-item data-hook='menu-delete' icon='cc-icon-delete' label='Delete' ng-click='$ctrl.$mdDialog.hide(); $ctrl.onDelete({item: $ctrl.item})' ng-hide='$ctrl.noDelete'></cc-menu-item>\n<cc-menu-item data-hook='menu-item-to-page' icon='cc-icon-move-to' label='Item to Page' ng-click='$ctrl.$mdDialog.hide(); $ctrl.onItemToPage({item: $ctrl.item})' ng-hide='$ctrl.noItemToPage'></cc-menu-item>\n</md-dialog>\n")}]);try{angular.module("commonControlsPreload")}catch(e){angular.module("commonControlsPreload",[])}angular.module("commonControlsPreload").run(["$templateCache",function(a){a.put("views/tips/example.html","This is where you list the things you offer. People want to know you have what they're looking for.\n")}]),angular.module("commonControlsAppInternal").directive("focusIf",["$timeout",function(a){return{restrict:"A",link:function(b,c,d){var e=function(e){e&&a(function(){c[0].focus()},b.$eval(d.focusDelay)||0)};d.focusIf?b.$watch(d.focusIf,e):e(!0)}}}]),angular.module("commonControlsAppInternal").directive("compile",["$compile",function(a){return function(b,c,d){b.$watch(function(a){return a.$eval(d.compile)},function(d){c.html(d),a(c.contents())(b)})}}]),angular.module("commonControlsAppInternal").directive("ccScrollbar",["$rootScope",function(a){return{restrict:"A",link:function(b,c,d){function e(){b.$evalAsync(function(){c.perfectScrollbar(),touchScroll(c)})}if(c[0].hasAttribute("cc-scrollbar")){var f,g=_.debounce(function(){touchScroll(c)},200);c.addClass("cc-scrollbar"),d.$observe("ccScrollbarDisable",function(a){b.$eval(a)?c.perfectScrollbar("destroy"):e()}),e(),f=a.$watch(function(){touchScroll(c)}),window.addEventListener("resize",g),b.$on("$destroy",function(){f(),window.removeEventListener("resize",g),c.perfectScrollbar("destroy")})}}}}]),angular.module("commonControlsAppInternal").directive("ccSelectOnFocus",["$timeout",function(a){return{restrict:"A",link:function(b,c,d){function e(){c.select()}function f(){"false"!==d.ccSelectOnFocus&&c.bind("focus",function(){a(e)})}f()}}}]);var _this=this;angular.module("commonControlsAppInternal").directive("ccTooltip",["ccTooltipManager","$compile",function(a,b){return{restrict:"A",link:function(c,d,e){function f(a,b){if("top"===a.position||"bottom"===a.position){var c=b.hasClass("p9b-text-button")||b.hasClass("p9c-text-button");a.offsetY=c?-7:-2}else("right"===a.position||"left"===a.position)&&(a.offsetX=-2)}function g(){var g={};if(d.hasClass("tooltipstered")&&d.tooltipster("destroy"),h=a.getTooltip(e.ccTooltip)){g.position=e.ccTooltipPosition||"top",g.delay=250,h.shouldCompile?g.content=b(h.template)(c):g.content=h.template,g.contentAsHTML=!0,g.interactive=h.interactive,g.functionBefore=function(b,c){var d="error"===h.appearance,e="undefined"!=typeof a.isSilent&&a.isSilent();(d||!e)&&c()};var i=e.ccTooltipCustomClass||"";g.theme="cc-tooltip "+(h.appearance?"-"+h.appearance:"")+" "+(h.type?"-"+h.type:"")+" "+i,g.autoClose=!0,h.hasTitle&&(g.theme+=" -with-title"),f(g,d);var j=_.extend(g,JSON.parse(e.ccTooltipOptions||"{}"));j.restoration=j.restoration||"none",d.tooltipster(j)}}var h;e.$observe("ccTooltip",function(){return g()}),e.$observe("ccTooltipOptions",function(){return g()}),g.call(_this)}}}]);var CcTipTextChangeClass=function(){function a(a,b,c){var d=this;this.$scope=a,this.$element=b,this.$timeout=c,a.$watch(function(){return b.text()},function(a,b){a!==b&&d.classSequence()})}return a.$inject=["$scope","$element","$timeout"],a.prototype.classSequence=function(){var a=this;this.$element.addClass("cc-tip-text-has-changed"),this.$timeout(function(){a.$element.removeClass("cc-tip-text-has-changed")},600)},a}();angular.module("commonControlsAppInternal").directive("ccTipTextChangeClass",function(){return{controller:CcTipTextChangeClass,controllerAs:"ccTipTextChangeClass",bindToController:!0,restrict:"A"}}),angular.module("commonControlsAppInternal").directive("ccSupportIframeReady",["$window",function(a){return{restrict:"A",scope:{ccSupportIframeReady:"&"},link:function(b,c){var d=function(a){return/^(http|https):\/\/(\w+\.)?wix\.com/.test(a.origin)?a.data.articleId:!1},e=function(a){d(a)&&(b.ccSupportIframeReady(),a.target.removeEventListener(a.type,e))};a.addEventListener("message",e,!1)}}}]);var CcDynamicBackground=function(){function a(a,b){this.$scope=a,this.$element=b,this.appendRelativeToChildren();var c='\n      <div class="cc-dynamic-background">\n        <div class="cc-dynamic-background-pink"></div>\n        <!--<div class="cc-dynamic-background-blue"></div>-->\n      </div>\n    ';b.prepend(c),b.css({position:"relative"})}return a.$inject=["$scope","$element"],a.prototype.appendRelativeToChildren=function(){this.$element.children().each(function(a,b){var c=angular.element(b);"static"===c.css("position")&&c.css("position","relative")})},a}();angular.module("commonControlsAppInternal").directive("ccDynamicBackground",function(){return{controller:CcDynamicBackground,controllerAs:"ccDynamicBackground",bindToController:!0,restrict:"A"}});var CcDialogBuilder=function(){function a(a,b,c,d){this.$q=a,this.$mdDialog=b,this.$sce=c,this.$window=d}return a.$inject=["$q","$mdDialog","$sce","$window"],a.prototype.setIsSilentCallback=function(a){this.isSilent=a},a.prototype.setIsHelpDraggableCallback=function(a){this.isDraggable=a},a.prototype.templateUrl=function(a){return"views/popups/"+a+".html"},a.prototype.createMdDialog=function(a){var b={autoWrap:!1,templateUrl:this.templateUrl(a.template),locals:a.locals,bindToController:!0,biDialogName:a.biDialogName,biDialogTargetName:a.biDialogTargetName,controller:a.controller||["$mdDialog",function(a){this.$mdDialog=a}],controllerAs:"$ctrl",onShowing:a.onShowing,hasBackdrop:_.isBoolean(a.hasBackdrop)?a.hasBackdrop:!0,clickOutsideToClose:a.clickOutsideToClose,skipHide:a.skipHide,customBi:a.customBi};return this.show(b)},a.prototype.show=function(a){return this.$mdDialog.show(a)},a.prototype.showFirstTimeNotice=function(a){return this.isSilent&&this.isSilent()?this.$q.when({}):this.createMdDialog({template:"first-time-notice",locals:a,biDialogName:a.biDialogName,biDialogTargetName:a.biDialogTargetName,controller:["$mdDialog",function(b){var c=this;this.$mdDialog=b,this.checkbox={label:this.dontBotherMeText,checked:this.dontBotherMe,required:!1},this.hide=function(){b.hide({dontBotherMe:c.dontBotherMe})},this.cancel=function(){b.cancel({dontBotherMe:c.dontBotherMe})},this.runCallback=function(b){a.callback&&a.callback(b)}}]})},a.prototype.showListItemMenu=function(a){var b=this;return a.getDynamicPosition=function(){return b.getDynamicPosition(a.clientPos)},this.createMdDialog({template:"c6-list-item-menu",locals:a,hasBackdrop:!1,clickOutsideToClose:!0})},a.prototype.getDynamicPosition=function(a){var b=angular.element('[data-hook="list-item-menu"]').height()-30,c=this.$window.innerHeight-a.clientY,d=c-b,e=(0>d?Math.abs(d):0)+30;return{top:a.clientY-e+"px",left:a.clientX+16+"px"}},a.prototype.showPositiveConfirmation=function(a){return this.isSilent&&this.isSilent()?this.$q.when():this.createMdDialog({template:"positive-confirmation",locals:a,biDialogName:a.biDialogName,biDialogTargetName:a.biDialogTargetName})},a.prototype.showNegativeConfirmation=function(a){return this.isSilent&&this.isSilent()?this.$q.when():this.createMdDialog({template:"negative-confirmation",locals:a,biDialogName:a.biDialogName,biDialogTargetName:a.biDialogTargetName})},a.prototype.showPositiveContinuedAction=function(a,b){return this.createMdDialog({template:"positive-continued-action",locals:a,biDialogName:a.biDialogName,biDialogTargetName:a.biDialogTargetName,controller:["$mdDialog",function(a){var b=this;this.$mdDialog=a,this.hide=function(){a.hide({selected:b.dropDown,biDialogTargetName:b.dropDown.value})},this.cancel=function(){a.cancel({selected:b.dropDown})}}]})},a.prototype.showMultiPagePopup=function(a){var b;return this.createMdDialog({template:"multi-page-popup",locals:a,customBi:a.customBi,onShowing:function(a,c){b=c},controller:["$mdDialog","$timeout",function(c,d){var e=this;this.$mdDialog=c,this.isNext=!1,this.customBi&&a.biEvents.onShow(a.dialogName);var f=250,g=-20;this.next=function(){var c=function(a,c){var h=b.find(".cc-popup-icon"),i=b.find(".cc-popup-heading"),j=b.find(".cc-popup-text"),k=b.find(".cc-popup-footer");[i,j].forEach(function(b){return b.css({position:"relative",left:a?"0":-g+"px",opacity:a?"1":"0",transition:"opacity "+f+"ms ease-in-out, left "+f+"ms ease-in-out"})}),[h,k].forEach(function(b){return b.css({opacity:a?"1":"0",transition:"opacity "+f+"ms ease-in-out"})}),d(function(){[i,j].forEach(function(b){return b.css({opacity:a?"0":"1",left:a?g+"px":"0"})}),[h,k].forEach(function(b){return b.css({opacity:a?"0":"1"})}),c&&(d(function(){e.isNext=!0},f),d(c,f+50))})};c(!0,function(){e.customBi&&a.biEvents.onNextClick(a.dialogName),c(!1)})},this.hide=function(){e.customBi&&a.biEvents.onHide(),c.hide()},this.cancel=function(){e.customBi&&a.biEvents.onCancel(e.isNext,a.dialogName),c.cancel()}}]})},a.prototype.showNegativeContinuedAction=function(a,b){return this.createMdDialog({template:"negative-continued-action",locals:a,biDialogName:a.biDialogName,biDialogTargetName:a.biDialogTargetName})},a.prototype.showIframe=function(a){return this.createMdDialog({template:"iframe",locals:{link:this.$sce.trustAsResourceUrl(a)}})},a.prototype.showSupportIframe=function(a,b){var c;return this.isDraggable instanceof Function&&(c=this.isDraggable()),this.createMdDialog({template:"support-iframe",locals:{link:this.$sce.trustAsResourceUrl(a),isDraggable:c},hasBackdrop:!1,skipHide:!0,biDialogName:b,controller:["$timeout","$mdDialog",function(a,b){var c=this;c.iframeLoaded=function(){a(function(){c.loaded=!0},0)},c.cancel=function(){b.cancel()}}]})},a}();angular.module("commonControlsAppInternal").service("CcDialogBuilder",CcDialogBuilder),angular.module("commonControlsAppInternal").factory("ccDebounce",["$timeout",function(a){return function(b,c,d){function e(){k=c.apply(j||n,i||[]),j=i=null,m=!0}function f(){l&&(a.cancel(l),l=null)}function g(){j=n,i=arguments,d?m&&(m=!1,l=a(e,b)):(f(),l=a(e,b))}function h(){var a=!!j;return a&&(f(),e()),a}var i,j,k,l,m=!0,n=this;return g.flush=function(){return h()||l||e(),k},g.flushPending=function(){return h(),k},g.cancel=f,g}}]);var MediaUrl=function(){function a(){}return a.prototype.generate=function(b,c,d){return void 0===c&&(c=100),void 0===d&&(d=70),"shape"===b.mediaType?""+a.MEDIA_BASE_URL+b.relativeUri.replace(/\.js$/,".svg"):"extVideo"===b.mediaType?b.thumbnailUrl:"video"===b.mediaType?b.posters&&b.posters.length>0?this.buildUrlFromRelative(b.posters[0].uri,c,d):b.fileOutput?this.buildUrlFromRelative(b.fileOutput.image[0].url,c,d,!0):b.thumbnailUrl:this.buildUrlFromRelative(b.relativeUri,c,d)},a.prototype.buildUrlFromRelative=function(b,c,d,e){return void 0===e&&(e=!1),""+a.MEDIA_BASE_URL+(e?"":"media/")+b+"_srz_p_"+Math.round(c)+"_"+Math.round(d)+"_75_22_0.50_1.20_0.00_jpg_srz"},a.MEDIA_BASE_URL="//static.wixstatic.com/",a}();angular.module("commonControlsAppInternal").service("mediaUrl",MediaUrl);var CcTooltipManager=function(){function a(){this.tooltips={}}return a.prototype.setToolTip=function(a,b){this.tooltips[a]=new CcTooltip(b)},a.prototype.getTooltip=function(a){return this.tooltips[a]},a.prototype.setIsSilentCallback=function(a){this.isSilent=a},a}(),CcTooltip=function(){function a(a){this.tooltipData=a,this.linkRegexp=/<a.*>.*<\/a>/}return Object.defineProperty(a.prototype,"template",{get:function(){var a,b;return"hint"===this.tooltipData.type?a=this.getHintTemplate():("rich"===this.tooltipData.type||"popup"===this.tooltipData.type)&&(a=this.getRichTemplate()),b='\n      <div class="cc-tooltip -'+this.tooltipData.appearance.toLowerCase()+'">\n        '+a+"\n      </div>"},enumerable:!0,configurable:!0}),Object.defineProperty(a.prototype,"interactive",{get:function(){if(this.tooltipData.interactive)return!0;var a=this.template,b=this.linkRegexp.test(a);return"rich"===this.tooltipData.type&&b},enumerable:!0,configurable:!0}),Object.defineProperty(a.prototype,"appearance",{get:function(){return this.tooltipData.appearance},enumerable:!0,configurable:!0}),Object.defineProperty(a.prototype,"type",{get:function(){return this.tooltipData.type},enumerable:!0,configurable:!0}),Object.defineProperty(a.prototype,"hasTitle",{get:function(){return"rich"===this.tooltipData.type&&!!this.tooltipData.title},enumerable:!0,configurable:!0}),Object.defineProperty(a.prototype,"shouldCompile",{get:function(){return!!this.tooltipData.compiled},enumerable:!0,configurable:!0}),a.prototype.getHintTemplate=function(){return"<div>"+this.tooltipData.content+"<div>"},a.prototype.getRichTemplate=function(){var a="",b="",c="",d=this.tooltipData;d.title&&(a='<div class="cc-tooltip-title">'+d.title+"</div>"),d.link&&(b='<div class="cc-tooltip-link"><a target="_blank" href="'+d.link.url+'">'+d.link.label+"</a></div>"),d.content&&(c='<div class="cc-tooltip-content">'+d.content+"</div>");var e="\n      <div>\n        "+a+"\n        "+c+"\n        "+b+"\n      </div>\n    ";return e},a}();angular.module("commonControlsAppInternal").service("ccTooltipManager",CcTooltipManager);var CcTip=function(){function a(a,b,c,d,e,f){this.$document=a,this.$compile=b,this.$rootScope=c,this.$sce=d,this.$templateCache=e,this.$timeout=f,this.baseTemplate='\n      <div class="cc-tip" ng-style="style">\n        <div class="cc-tip-contact" ng-if="contact">\n          <img class="cc-tip-contact-image" ng-src="{{contact.img}}" />\n          <div class="cc-tip-contact-details">\n            <div class="cc-tip-contact-name" cc-tip-text-change-class>{{contact.name}}</div>\n            <div class="cc-tip-contact-profession" cc-tip-text-change-class>{{contact.profession}}</div>\n          </div>\n        </div>\n        <div class="cc-tip-title" ng-if="title" cc-tip-text-change-class>{{title}}</div>\n        <div class="cc-tip-content" ng-bind-html="content" cc-tip-text-change-class></div>\n        <a class="cc-tip-content-link" ng-if="contentLink" ng-href="{{contentLink.url}}" cc-tip-text-change-class>{{contentLink.text}}</a>\n        <div class="cc-tip-footer" ng-if="footer">\n          <button class="cc-tip-footer-close-button p9-primary -small cc-x-height" ng-if="footer.closeButton" ng-click="hide($event)" cc-tip-text-change-class>\n            <span class="cc-x-height">{{footer.closeButton}}</span>\n          </button>\n        </div>\n      </div>\n    '}return a.$inject=["$document","$compile","$rootScope","$sce","$templateCache","$timeout"],a.prototype.build=function(a){var b=this,c={};c.parent=angular.element(this.$document[0].body);var d=this.$rootScope.$new();return c.scope=d,c.element=this.createTip(a,d),c.onHide=a.onHide||angular.noop,d.hide=function(a){b.hide(c,a)},c},a.prototype.show=function(a){a.parent.append(a.element),this.$timeout(function(){a.element.addClass("cc-tip-visible")},0)},a.prototype.hide=function(a,b){a.element.removeClass("cc-tip-visible"),a.onHide(b),this.$timeout(function(){a.element.remove()},200)},a.prototype.update=function(a,b){return b.scope.content=this.getContent(b.template,b.templateUrl),angular.extend(a.scope,b.scope),a},a.prototype.createTip=function(a,b){return b.style=a.style,b.content=this.getContent(a.template,a.templateUrl),angular.extend(b,a.scope),this.$compile(this.baseTemplate)(b)},a.prototype.getContent=function(a,b){return this.$sce.trustAsHtml(a||this.$templateCache.get(b))},a}();angular.module("commonControlsAppInternal").service("ccTip",CcTip);var OSUtils=function(){function a(a){this.isIE=a.navigator.userAgent.match(/Trident\/|MSIE /)}return a.$inject=["$window"],a}();angular.module("commonControlsAppInternal").service("osUtils",OSUtils),angular.module("commonControlsAppInternal").directive("osUtils",function(){return{restrict:"A",controller:OSUtils,controllerAs:"$os"}});var CcWave=function(){function a(){}return a}();angular.module("commonControlsAppInternal").component("ccWave",{template:'<div class="cc-wave">\n                <div class="cc-wave-cradle">\n                  <div class="cc-wave-svg cc-wave-sidekick"></div>\n                </div>\n                <div class="cc-wave-effect-shadow"></div>\n                <div class="cc-wave-cradle cc-wave-cradle-second">\n                  <div class="cc-wave-svg cc-wave-main"></div>\n                </div>\n                <div class="cc-wave-effect-shadow cc-wave-effect-shadow-reverse"></div>\n               </div>',controller:CcWave});var C18PanelButton=function(){function a(){}return a}();angular.module("commonControlsAppInternal").component("c18PanelButton",{templateUrl:"views/c18-panel-button.html",controller:C18PanelButton,bindings:{label:"=",onClick:"&"}}),angular.module("dndLists",[]).directive("dndDraggable",["$parse","$timeout","dndDropEffectWorkaround","dndDragTypeWorkaround",function(a,b,c,d){return function(e,f,g){f.attr("draggable","true"),g.dndDisableIf&&e.$watch(g.dndDisableIf,function(a){f.attr("draggable",!a)}),f.on("dragstart",function(h){return h=h.originalEvent||h,"false"==f.attr("draggable")?!0:(h.dataTransfer.setData("Text",angular.toJson(e.$eval(g.dndDraggable))),h.dataTransfer.effectAllowed=g.dndEffectAllowed||"move",f.addClass("dndDragging"),b(function(){f.addClass("dndDraggingSource")},0),c.dropEffect="none",d.isDragging=!0,d.dragType=g.dndType?e.$eval(g.dndType):void 0,h._dndHandle&&h.dataTransfer.setDragImage&&h.dataTransfer.setDragImage(f[0],0,0),a(g.dndDragstart)(e,{event:h}),void h.stopPropagation())}),f.on("dragend",function(h){h=h.originalEvent||h;var i=c.dropEffect;e.$apply(function(){switch(i){case"move":a(g.dndMoved)(e,{event:h});break;case"copy":a(g.dndCopied)(e,{event:h});break;case"none":a(g.dndCanceled)(e,{event:h})}a(g.dndDragend)(e,{event:h,dropEffect:i})}),f.removeClass("dndDragging"),b(function(){f.removeClass("dndDraggingSource")},0),d.isDragging=!1,h.stopPropagation()}),f.on("click",function(b){g.dndSelected&&(b=b.originalEvent||b,e.$apply(function(){a(g.dndSelected)(e,{event:b})}),b.stopPropagation())}),f.on("selectstart",function(){this.dragDrop&&this.dragDrop()})}}]).directive("dndList",["$parse","$timeout","dndDropEffectWorkaround","dndDragTypeWorkaround",function(a,b,c,d){return function(e,f,g){function h(a,b,c){var d=r?a.offsetX||a.layerX:a.offsetY||a.layerY,e=r?b.offsetWidth:b.offsetHeight,f=r?b.offsetLeft:b.offsetTop;return f=c?f:0,f+e/2>d}function i(){var a;return angular.forEach(f.children(),function(b){var c=angular.element(b);c.hasClass("dndPlaceholder")&&(a=c)}),a||angular.element("<li class='dndPlaceholder'></li>")}function j(){return Array.prototype.indexOf.call(q.children,p)}function k(a){if(!d.isDragging&&!s)return!1;if(!n(a.dataTransfer.types))return!1;if(g.dndAllowedTypes&&d.isDragging){var b=e.$eval(g.dndAllowedTypes);if(angular.isArray(b)&&-1===b.indexOf(d.dragType))return!1}return g.dndDisableIf&&e.$eval(g.dndDisableIf)?!1:!0}function l(){return o.remove(),f.removeClass("dndDragover"),!0}function m(b,c,f,g){return a(b)(e,{event:c,index:f,item:g||void 0,external:!d.isDragging,type:d.isDragging?d.dragType:void 0})}function n(a){if(!a)return!0;for(var b=0;b<a.length;b++)if("Text"===a[b]||"text/plain"===a[b])return!0;return!1}var o=i(),p=o[0],q=f[0];o.remove();var r=g.dndHorizontalList&&e.$eval(g.dndHorizontalList),s=g.dndExternalSources&&e.$eval(g.dndExternalSources);f.on("dragenter",function(a){return a=a.originalEvent||a,k(a)?void a.preventDefault():!0}),f.on("dragover",function(a){if(a=a.originalEvent||a,!k(a))return!0;if(p.parentNode!=q&&f.append(o),a.target!==q){for(var b=a.target;b.parentNode!==q&&b.parentNode;)b=b.parentNode;b.parentNode===q&&b!==p&&(h(a,b)?q.insertBefore(p,b):q.insertBefore(p,b.nextSibling))}else if(h(a,p,!0))for(;p.previousElementSibling&&(h(a,p.previousElementSibling,!0)||0===p.previousElementSibling.offsetHeight);)q.insertBefore(p,p.previousElementSibling);else for(;p.nextElementSibling&&!h(a,p.nextElementSibling,!0);)q.insertBefore(p,p.nextElementSibling.nextElementSibling);return g.dndDragover&&!m(g.dndDragover,a,j())?l():(f.addClass("dndDragover"),a.preventDefault(),a.stopPropagation(),!1)}),f.on("drop",function(a){if(a=a.originalEvent||a,!k(a))return!0;a.preventDefault();var b,d=a.dataTransfer.getData("Text")||a.dataTransfer.getData("text/plain");try{b=JSON.parse(d)}catch(f){return l()}var h=j();return g.dndDrop&&(b=m(g.dndDrop,a,h,b),!b)?l():(b!==!0&&e.$apply(function(){e.$eval(g.dndList).splice(h,0,b)}),m(g.dndInserted,a,h,b),"none"===a.dataTransfer.dropEffect?"copy"===a.dataTransfer.effectAllowed||"move"===a.dataTransfer.effectAllowed?c.dropEffect=a.dataTransfer.effectAllowed:c.dropEffect=a.ctrlKey?"copy":"move":c.dropEffect=a.dataTransfer.dropEffect,l(),a.stopPropagation(),!1)}),f.on("dragleave",function(a){a=a.originalEvent||a,f.removeClass("dndDragover"),b(function(){f.hasClass("dndDragover")||o.remove()},100)})}}]).directive("dndNodrag",function(){return function(a,b,c){b.attr("draggable","true"),b.on("dragstart",function(a){a=a.originalEvent||a,a._dndHandle||(a.dataTransfer.types&&a.dataTransfer.types.length||a.preventDefault(),a.stopPropagation())}),b.on("dragend",function(a){a=a.originalEvent||a,a._dndHandle||a.stopPropagation()})}}).directive("dndHandle",function(){return function(a,b,c){b.attr("draggable","true"),b.on("dragstart dragend",function(a){a=a.originalEvent||a,a._dndHandle=!0})}}).factory("dndDragTypeWorkaround",function(){return{}}).factory("dndDropEffectWorkaround",function(){return{}}),angular.module("organizeMediaDialog",["organizeMediaTranslations","organizeMediaPreload","wixAngular","commonControlsApp","wix.common.bi","dndLists","ngMaterial"]).config(["CCSvgIconServiceProvider",function(a){a.setSpritePrefix("")}]),angular.module("organizeMediaApp",["organizeMediaDialog"]).config(function(){});try{angular.module("organizeMediaPreload")}catch(e){angular.module("organizeMediaPreload",[])}angular.module("organizeMediaPreload").run(["$templateCache",function(a){a.put("views/add-more-button.html","<div class='om-add-more-button media-item image-item'>\n<figure>\n<div class='om-add-more-button-container'>\n<div class='om-add-more-button-plus'>+</div>\n<div class='om-add-more-button-text bold'>Add More</div>\n<div class='om-add-more-button-text'>{{ $ctrl.itemType }}</div>\n</div>\n</figure>\n</div>\n")}]);try{angular.module("organizeMediaPreload")}catch(e){angular.module("organizeMediaPreload",[])}angular.module("organizeMediaPreload").run(["$templateCache",function(a){a.put("views/edit-link.html","<div class='om-app-main' data-hook='om-link-editor-container'>\n<div class='om-window-main'>\n<header class='om-header-dialog panel-header'>\n<span class='panel-header-title' data-hook='om-link-editor-title'>Edit Link</span>\n<button class='panel-header-button' data-hook='om-link-editor-close-button' ng-click='$ctrl.close()'>\n<svg height='25px' viewBox='0 0 25 25' width='25px'>\n<path d='M11.7928932,12.5 L8.14644661,8.85355339 L7.79289322,8.5 L8.5,7.79289322 L8.85355339,8.14644661 L12.5,11.7928932 L16.1464466,8.14644661 L16.5,7.79289322 L17.2071068,8.5 L16.8535534,8.85355339 L13.2071068,12.5 L16.8535534,16.1464466 L17.2071068,16.5 L16.5,17.2071068 L16.1464466, 16.8535534 L12.5,13.2071068 L8.85355339,16.8535534 L8.5,17.2071068 L7.79289322,16.5 L8.14644661,16.1464466 L11.7928932,12.5 Z'></path>\n</svg>\n</button>\n</header>\n<main class='om-main-container'>\n<div class='om-main is-link-editor'>\n<div class='om-link-editor-placeholder' data-hook='om-link-editor-placeholder'></div>\n</div>\n</main>\n<footer class='panel-footer'>\n<button class='btn secondary-btn' data-hook='om-link-editor-cancel-button' ng-click='$ctrl.cancel()'>Cancel</button>\n<button class='btn primary-btn' data-hook='om-link-editor-done-button' ng-click='$ctrl.done()'>Save</button>\n</footer>\n</div>\n</div>\n")}]);try{angular.module("organizeMediaPreload")}catch(e){angular.module("organizeMediaPreload",[])}angular.module("organizeMediaPreload").run(["$templateCache",function(a){a.put("views/image-carousel.html","<div class='om-image-carousel-current'>\n<c4-media-preview media='[$ctrl.getItemForMediaPreview($ctrl.item)]' ng-if='$ctrl.item !== null' no-hover='true' show-edit-panel='false' show-tabs='false'></c4-media-preview>\n<div cc-tooltip-position='top' cc-tooltip='previous' class='om-carousel-navigation is-prev' data-hook='om-carousel-prev' ng-click='$ctrl.onPrev()' ng-if='$ctrl.showNav'>\n<div class='om-carousel-arrow is-prev-arrow'></div>\n</div>\n<div cc-tooltip-position='top' cc-tooltip='next' class='om-carousel-navigation is-next' data-hook='om-carousel-next' ng-click='$ctrl.onNext()' ng-if='$ctrl.showNav'>\n<div class='om-carousel-arrow is-next-arrow'></div>\n</div>\n</div>\n")}]);try{angular.module("organizeMediaPreload")}catch(e){angular.module("organizeMediaPreload",[])}angular.module("organizeMediaPreload").run(["$templateCache",function(a){a.put("views/image-item.html","<figure>\n<span class='image-container'>\n<img ng-src='{{$ctrl.getPreviewUrl()}}'>\n</span>\n<figcaption class='item-media-label' data-hook='om-item-index'>{{ $ctrl.index + 1 }}</figcaption>\n<div class='item-media-menu'>\n<image-preview-popup data-hook='om-image-preview-popup-target' item='$ctrl.item'>\n<div class='menu-item' data-hook='om-image-preview-popup-icon'>\n<svg class='bm-icon' height='16px' version='1.1' viewBox='0 0 16 16' width='16px' xmlns:sketch='http://www.bohemiancoding.com/sketch/ns' xmlns='http://www.w3.org/2000/svg'>\n<g fill-rule='evenodd' fill='none' sketch:type='MSPage' stroke-width='1' stroke='none'>\n<path d='M8,5 L7,5 L7,7 L5,7 L5,8 L7,8 L7,10 L8,10 L8,8 L10,8 L10,7 L8,7 L8,5 L8,5 Z M12.646,11.895 C13.711,10.675 14.262,9.167 14.262,7.469 C14.262,3.718 11.221,0.677 7.469,0.677 C3.718,0.677 0.677,3.718 0.677,7.469 C0.677,11.221 3.718,14.262 7.469,14.262 C9.159,14.262 10.733,13.746 11.958,12.697 L14.938,15.677 L15.677,14.938 L12.646,11.895 L12.646,11.895 Z M7.469,13.217 C4.3,13.217 1.722,10.639 1.722,7.469 C1.722,4.3 4.3,1.722 7.469,1.722 C10.639,1.722 13.217,4.3 13.217,7.469 C13.217,10.639 10.639,13.217 7.469,13.217 L7.469,13.217 Z' fill='#FFFFFF' id='L_Zoom-In' sketch:type='MSShapeGroup'></path>\n</g>\n</svg>\n</div>\n</image-preview-popup>\n<div cc-tooltip-position='top' cc-tooltip='remove_image' class='menu-item' data-hook='om-make-inactive' ng-click='$ctrl.onRemove({item: $ctrl.item})'>\n<svg height='15px' viewBox='0 0 13 15' width='13px'>\n<g fill-rule='evenodd' fill='none' stroke-width='1' stroke='none'>\n<path d='M4,11 L5,11 L5,5 L4,5 L4,11 Z M8,11 L9,11 L9,5 L8,5 L8,11 Z M6,11 L7,11 L7,5 L6,5 L6,11 Z M9,2 L9,1.5 C9,0.701 8.248,0 7.392,0 L5.525,0 C4.684,0 4,0.673 4,1.5 L4,2 L0,2 L0,3 L1,3 L1,12 C1,13.657 2.343,15 4,15 L9,15 C10.657,15 12,13.657 12,12 L12,3 L13,3 L13,2 L9,2 L9,2 Z M5,1.5 C5,1.229 5.24,1 5.525,1 L7.392,1 C7.693,1 8,1.252 8,1.5 L8,2 L5,2 L5,1.5 L5,1.5 Z M11,12 C11,13.105 10.105,14 9,14 L4,14 C2.895,14 2,13.105 2,12 L2,3 L11,3 L11,12 L11,12 Z' fill='#FFFFFF'></path>\n</g>\n</svg>\n</div>\n</div>\n</figure>\n")}]);try{angular.module("organizeMediaPreload")}catch(e){angular.module("organizeMediaPreload",[])}angular.module("organizeMediaPreload").run(["$templateCache",function(a){a.put("views/image-item-details.html","<cc-panel-frame data-hook='om-item-details-panel' label='Image Settings'>\n<div class='om-carousel-label'>\n<div class='p8-label'>Preview</div>\n</div>\n<image-carousel data-hook='om-image-carousel' item='$ctrl.item' on-next='$ctrl.onNext()' on-prev='$ctrl.onPrev()' show-nav='$ctrl.showCarouselNav'></image-carousel>\n<c2-text-input data-hook='om-item-details-title' disable-toggle='true' is-disabled='$ctrl.item === null' label='Title (alt text)' on-change-value='$ctrl.onTitleChange(value)' placeholder='&#39;Add your title here&#39;' value='$ctrl.item.Title'></c2-text-input>\n<c2-text-input data-hook='om-item-details-description' disable-toggle='true' is-disabled='$ctrl.item === null' label='Description' on-change-value='$ctrl.onDescriptionChange(value)' placeholder='&#39;Describe your image&#39;' value='$ctrl.item.Description'></c2-text-input>\n<c5-link-input data-hook='om-item-details-link' disable-toggle='true' label='Link' link='$ctrl.linkAsILink' on-edit-link='$ctrl.openLinkEditor()'></c5-link-input>\n</cc-panel-frame>\n")}]);try{angular.module("organizeMediaPreload")}catch(e){angular.module("organizeMediaPreload",[])}angular.module("organizeMediaPreload").run(["$templateCache",function(a){a.put("views/image-preview-popup.html","<div class='om-image-preview-popup-button' data-hook='om-image-preview-popup-button' ng-mouseenter='$ctrl.showPopup()' ng-mouseleave='$ctrl.removePopup()'>\n<div ng-transclude></div>\n</div>\n")}]);try{angular.module("organizeMediaPreload")}catch(e){angular.module("organizeMediaPreload",[])}angular.module("organizeMediaPreload").run(["$templateCache",function(a){a.put("views/organize-media.html","<div class='om-app-main' data-hook='om-container'>\n<div class='om-window-main'>\n<header class='om-header-dialog panel-header'>\n<span class='panel-header-title' data-hook='om-title'>{{ $ctrl.title }}</span>\n<span>\n<button class='panel-header-button' data-hook='om-close-button' ng-click='$ctrl.close()'>\n<svg height='25px' viewBox='0 0 25 25' width='25px'>\n<path d='M11.7928932,12.5 L8.14644661,8.85355339 L7.79289322,8.5 L8.5,7.79289322 L8.85355339,8.14644661 L12.5,11.7928932 L16.1464466,8.14644661 L16.5,7.79289322 L17.2071068,8.5 L16.8535534,8.85355339 L13.2071068,12.5 L16.8535534,16.1464466 L17.2071068,16.5 L16.5,17.2071068 L16.1464466,16.8535534 L12.5,13.2071068 L8.85355339,16.8535534 L8.5,17.2071068 L7.79289322,16.5 L8.14644661,16.1464466 L11.7928932,12.5 Z'></path>\n</svg>\n</button>\n<button class='panel-header-button' data-hook='om-help-button' ng-click='$ctrl.onHelp()'>?</button>\n</span>\n</header>\n<main class='om-main-container-gallery' ng-switch='$ctrl.mediaType === &#39;image&#39; &amp;&amp; $ctrl.items.length === 0'>\n<div class='om-main' data-hook='om-items-display'>\n<div class='om-main-header' ng-switch='$ctrl.mediaType'>\n<span data-hook='om-subtitle'>{{ $ctrl.subtitle }}</span>\n<button class='btn action-btn' data-hook='om-open-media-gallery' ng-click='$ctrl.openMediaGallery()' ng-switch-when='shape'>Change shape</button>\n<button class='btn action-btn' data-hook='om-open-media-gallery' ng-click='$ctrl.openMediaGallery()' ng-switch-when='clipart'>Change clipart</button>\n<button class='btn action-btn' data-hook='om-open-video-search' ng-click='$ctrl.openVideoSearch()' ng-switch-when='extVideo'>Search other videos</button>\n<button class='btn action-btn' data-hook='om-open-media-gallery' ng-click='$ctrl.openMediaGallery()' ng-switch-when='video'>Search other videos</button>\n</div>\n<div class='om-main om-messages' data-hook='om-no-images-message' ng-switch-when='true'>\n<svg class='om-no-images-clipart' data-hook='om-no-images-message-image' height='90px' version='1.1' viewbox='0 0 90 90' width='90px' xmlns:xlink='http://www.w3.org/1999/xlink' xmlns='http://www.w3.org/2000/svg'>\n<g fill-rule='evenodd' fill='none' id='Illustrations' stroke-width='1' stroke='none'>\n<g id='Placeholderlogogrey'>\n<path d='M90,45 C90,69.853 69.853,90 45,90 C20.147,90 0,69.853 0,45 C0,20.147 20.147,0 45,0 C69.853,0 90,20.147 90,45' fill='#858F96' id='Fill-1'></path>\n<path d='M31,34 L25,34 L25,31 C25,30.448 25.448,30 26,30 L30,30 C30.552,30 31,30.448 31,31 L31,34 Z' fill='#E0E3E5' id='Fill-3'></path>\n<path d='M67,61 C68.105,61 69,60.105 69,59 L69,35 C69,33.895 68.105,33 67,33 L57.841,33 C57.201,33 56.601,32.695 56.224,32.178 L53.778,28.822 C53.401,28.305 52.801,28 52.162,28 L37.838,28 C37.199,28 36.599,28.305 36.222,28.822 L33.776,32.178 C33.399,32.695 32.799,33 32.16,33 L23,33 C21.895,33 21,33.895 21,35 L21,59 C21,60.105 21.895,61 23,61 L67,61 Z' fill='#EFF1F2' id='Fill-5'></path>\n<path d='M45,34 C38.373,34 33,39.373 33,46 C33,52.627 38.373,58 45,58 C51.627,58 57,52.627 57,46 C57,39.373 51.627,34 45,34' fill='#A3ABB0' id='Fill-7'></path>\n<path d='M45,37 C49.963,37 54,41.037 54,46 C54,50.963 49.963,55 45,55 C40.037,55 36,50.963 36,46 C36,41.037 40.037,37 45,37' fill='#E0E3E5' id='Fill-9'></path>\n<path d='M66,37.5 C66,38.328 65.328,39 64.5,39 C63.672,39 63,38.328 63,37.5 C63,36.672 63.672,36 64.5,36 C65.328,36 66,36.672 66,37.5' fill='#A3ABB0' id='Fill-11'></path>\n<path d='M51,44 C51,45.105 50.105,46 49,46 C47.895,46 47,45.105 47,44 C47,42.895 47.895,42 49,42 C50.105,42 51,42.895 51,44' fill='#FFFFFF' id='Fill-13'></path>\n</g>\n</g>\n</svg>\n<div class='om-title' data-hook='om-no-images-message-title'>Add some images to your gallery!</div>\n<div class='om-paragraph' data-hook='om-no-images-message-paragraph'>You're gonna need at least two images in order to have a gallery.</div>\n<button class='p9-primary -small' data-hook='om-open-media-gallery' ng-click='$ctrl.openMediaGallery()'>Add Images</button>\n</div>\n<div class='om-items-list' data-hook='om-active-container' dnd-drop='$ctrl.move(index, item)' dnd-horizontal-list='true' dnd-list='$ctrl.items' ng-switch-when='false' ng-switch='$ctrl.viewMode'>\n<image-item class='media-item image-item' data-hook='om-media-item' dnd-draggable='item' dnd-effect-allowed='move' index='$index' item='item' ng-click='$ctrl.selected = item' ng-repeat='item in $ctrl.items track by item.relativeUri' ng-selected='item === $ctrl.selected' ng-switch-when='image' on-remove='$ctrl.makeInactive(item)'></image-item>\n<video-item class='media-item video-item' data-hook='om-media-item' item='item' ng-repeat='item in $ctrl.items track by item.getId()' ng-selected='item === $ctrl.selected' ng-switch-when='video' open-video-foreplay='$ctrl.openVideoForeplay(item)'></video-item>\n<add-more-button data-hook='om-open-media-gallery' dnd-nodrag item-type='{{$ctrl.mediaType + &#39;s&#39;}}' ng-click='$ctrl.openMediaGallery()' ng-if='$ctrl.mediaType === &#39;image&#39; &amp;&amp; $ctrl.selectionMode === &#39;gallery&#39;'></add-more-button>\n</div>\n</div>\n<aside class='om-main-details' ng-switch-when='false' ng-switch='$ctrl.viewMode'>\n<video-preview data-hook='om-video-preview' item='$ctrl.selected' ng-switch-when='video'></video-preview>\n<image-item-details class='om-item-details' item='$ctrl.selected' link-details-handler='$ctrl.linkDetailsHandler' ng-switch-when='image' on-next='$ctrl.next()' on-prev='$ctrl.prev()' show-carousel-nav='$ctrl.items.length &gt; 1 &amp;&amp; $ctrl.selected'></image-item-details>\n<video-item-details add-item-callback='$ctrl.addItem(item)' class='om-item-details' item='$ctrl.selected' ng-switch-when='video'></video-item-details>\n</aside>\n</main>\n<footer class='panel-footer'>\n<button class='btn secondary-btn' data-hook='om-cancel-button' ng-click='$ctrl.cancel()'>Cancel</button>\n<button class='btn primary-btn' data-hook='om-done-button' ng-click='$ctrl.done()' ng-disabled='!$ctrl.isDoneEnabled()'>Done</button>\n</footer>\n</div>\n</div>\n");
}]);try{angular.module("organizeMediaPreload")}catch(e){angular.module("organizeMediaPreload",[])}angular.module("organizeMediaPreload").run(["$templateCache",function(a){a.put("views/organize-media-app.html","<div class='container'>\n<div class='hero-unit'>\n<div>\n<button data-hook='open-organize-media-gallery' ng-click='$ctrl.openGalleryDialog()'>Open organize media dialog in gallery mode</button>\n</div>\n<div>\n<button data-hook='open-organize-media-extvideo' ng-click='$ctrl.openExtVideoDialog()'>Open organize media dialog with external video type</button>\n</div>\n<div>\n<button data-hook='open-organize-media-wixvideo' ng-click='$ctrl.openWixVideoDialog()'>Open organize media dialog with Wix video type</button>\n</div>\n<div>\n<button data-hook='open-organize-media-shape' ng-click='$ctrl.openShapeDialog()'>Open organize media dialog with shape type</button>\n</div>\n<div>\n<button data-hook='open-organize-media-clipart' ng-click='$ctrl.openClipartDialog()'>Open organize media dialog with clipart type</button>\n</div>\n</div>\n</div>\n")}]);try{angular.module("organizeMediaPreload")}catch(e){angular.module("organizeMediaPreload",[])}angular.module("organizeMediaPreload").run(["$templateCache",function(a){a.put("views/video-foreplay.html","<div data-hook='om-video-foreplay-container'>\n<header class='om-header-dialog panel-header'>\n<span class='panel-header-title' data-hook='om-video-foreplay-title'>{{$ctrl.item.Title}}</span>\n<button class='panel-header-button' data-hook='om-video-foreplay-close-button' ng-click='$ctrl.close()'>\n<svg height='21px' viewBox='0 0 25 25' width='21px'>\n<path d='M11.7928932,12.5 L8.14644661,8.85355339 L7.79289322,8.5 L8.5,7.79289322 L8.85355339,8.14644661 L12.5,11.7928932 L16.1464466,8.14644661 L16.5,7.79289322 L17.2071068,8.5 L16.8535534,8.85355339 L13.2071068,12.5 L16.8535534,16.1464466 L17.2071068,16.5 L16.5,17.2071068 L16.1464466, 16.8535534 L12.5,13.2071068 L8.85355339,16.8535534 L8.5,17.2071068 L7.79289322,16.5 L8.14644661,16.1464466 L11.7928932,12.5 Z'></path>\n</svg>\n</button>\n</header>\n<div ng-switch='$ctrl.item.mediaType'>\n<div class='om-video-foreplay-extvideo-div' ng-switch-when='extVideo'>\n<iframe allowfullscreen data-hook='om-video-foreplay-extvideo-video' frameborder='0' mozallowfullscreen ng-attr-height='{{$ctrl.item.getHeightForWidth(644)}}' src='{{$ctrl.item.embedSrc | trustedUrl}}' webkitallowfullscreen width='100%'></iframe>\n</div>\n<div class='om-video-foreplay-wixvideo-div' ng-switch-when='video'>\n<video autoplay='autoplay' class='om-video-foreplay-wixvideo-video' data-hook='om-video-foreplay-wixvideo-video' loop='loop' muted='muted' ng-attr-poster='{{$ctrl.item.posterImage | trustedUrl}}' preload='none'>\n<source data-hook='om-video-foreplay-wixvideo-source' ng-repeat='videoPreviewUrl in $ctrl.item.videoSources' ng-src='{{videoPreviewUrl | trustedUrl}}'>\n</video>\n</div>\n</div>\n</div>\n")}]);try{angular.module("organizeMediaPreload")}catch(e){angular.module("organizeMediaPreload",[])}angular.module("organizeMediaPreload").run(["$templateCache",function(a){a.put("views/video-item.html","<figure>\n<img ng-src='{{$ctrl.item.thumbnailUrl}}'>\n<div class='item-video-title'>{{$ctrl.item.Title}}</div>\n<div class='item-video-foreplay-button' data-hook='om-video-foreplay-button' ng-click='$ctrl.openVideoForeplay({item: $ctrl.item})'>&#9654;</div>\n</figure>\n")}]);try{angular.module("organizeMediaPreload")}catch(e){angular.module("organizeMediaPreload",[])}angular.module("organizeMediaPreload").run(["$templateCache",function(a){a.put("views/video-item-details.html","<div ng-if='$ctrl.item !== null'>\n<div ng-if='$ctrl.item.videoUrl'>\n<header class='om-details-header' data-hook='om-item-details-header'>Video Info</header>\n<div class='om-details-container'>\n<label class='om-details-label' data-hook='om-details-video-link-label'>What's the video's web address?</label>\n<input class='om-details-value' data-hook='om-details-video-link' ng-change='$ctrl.updateVideo($ctrl.videoUrlToEdit)' ng-model-options='{ updateOn: &#39;blur&#39; }' ng-model='$ctrl.videoUrlToEdit' placeholder='Set your link here' type='text'>\n<div class='om-details-validation' data-hook='om-video-details-url-validation' ng-if='$ctrl.error &amp;&amp; $ctrl.videoUrlToEdit'>{{$ctrl.error}}</div>\n</div>\n</div>\n<header class='om-details-header' data-hook='om-details-video-playmode-header'>How does your video play?</header>\n<div class='om-details-container'>\n<div class='om-playmode-container'>\n<span class='om-playmode-label'>Autoplays on loading</span>\n<label class='om-toggle'>\n<input data-hook='om-details-video-playmode-autoplay' ng-model='$ctrl.item.playmode.autoplay' type='checkbox'>\n<span>\n<i class='toggle-circle'></i>\n</span>\n</label>\n</div>\n</div>\n<hr class='om-details-divider'>\n<div class='om-details-container'>\n<div class='om-playmode-container'>\n<span class='om-playmode-label'>In a loop</span>\n<label class='om-toggle'>\n<input data-hook='om-details-video-playmode-loop' ng-model='$ctrl.item.playmode.loop' type='checkbox'>\n<span>\n<i class='toggle-circle'></i>\n</span>\n</label>\n</div>\n</div>\n<header class='om-details-header' data-hook='om-details-video-controls-header'>When are controls shown?</header>\n<div class='om-details-container'>\n<div class='om-controls-container'>\n<label class='om-radio'>\n<input ng-model='$ctrl.item.controls' ng-value='2' type='radio'>\n<span class='om-radio-inner'></span>\n</label>\n<span class='om-radio-label'>Always</span>\n</div>\n<div class='om-controls-container'>\n<label class='om-radio'>\n<input ng-model='$ctrl.item.controls' ng-value='0' type='radio'>\n<span class='om-radio-inner'></span>\n</label>\n<span class='om-radio-label'>Never</span>\n</div>\n<div class='om-controls-container'>\n<label class='om-radio'>\n<input ng-model='$ctrl.item.controls' ng-value='1' type='radio'>\n<span class='om-radio-inner'></span>\n</label>\n<span class='om-radio-label'>On hover</span>\n</div>\n</div>\n</div>\n")}]);try{angular.module("organizeMediaPreload")}catch(e){angular.module("organizeMediaPreload",[])}angular.module("organizeMediaPreload").run(["$templateCache",function(a){a.put("views/video-preview.html","<div class='om-video-preview-container'>\n<img class='om-video-preview' ng-if='$ctrl.item !== null' ng-src='{{$ctrl.item.thumbnailUrl}}'>\n</div>\n")}]);try{angular.module("organizeMediaPreload")}catch(e){angular.module("organizeMediaPreload",[])}angular.module("organizeMediaPreload").run(["$templateCache",function(a){a.put("views/video-search.html","<div class='om-app-main' data-hook='om-video-search-container'>\n<div class='om-window-main'>\n<header class='om-header-dialog panel-header'>\n<span class='panel-header-title' data-hook='om-video-search-title'>Search Video</span>\n<span>\n<button class='panel-header-button' data-hook='om-video-search-close-button' ng-click='$ctrl.close()'>\n<svg height='25px' viewBox='0 0 25 25' width='25px'>\n<path d='M11.7928932,12.5 L8.14644661,8.85355339 L7.79289322,8.5 L8.5,7.79289322 L8.85355339,8.14644661 L12.5,11.7928932 L16.1464466,8.14644661 L16.5,7.79289322 L17.2071068,8.5 L16.8535534,8.85355339 L13.2071068,12.5 L16.8535534,16.1464466 L17.2071068,16.5 L16.5,17.2071068 L16.1464466,      16.8535534 L12.5,13.2071068 L8.85355339,16.8535534 L8.5,17.2071068 L7.79289322,16.5 L8.14644661,16.1464466 L11.7928932,12.5 Z'></path>\n</svg>\n</button>\n<button class='panel-header-button' data-hook='om-video-search-help-button' ng-click='$ctrl.onHelp()'>?</button>\n</span>\n</header>\n<main class='om-main-container'>\n<div class='om-main'>\n<form class='om-vs-search-bar'>\n<input data-hook='om-video-search-query' ng-model='$ctrl.query' om-autofocus='true' placeholder='Enter a word or a phrase to find a video to add to your site' type='text'>\n<svg>\n<path d='M14.25 13.54l-2.84-2.85c1.02-1.17 1.65-2.67 1.65-4.3 0-3.59-3.04-6.64-6.63-6.64S-.25 2.8-.25 6.39s3.06 6.63 6.65 6.63c1.62 0 3.12-.62 4.3-1.62l2.85 2.85.7-.71zM6.4 12.05C3.37 12.05.78 9.43.78 6.39.78 3.36 3.32.75 6.35.75 9.39.75 12 3.36 12 6.39c0 3.04-2.57 5.66-5.6 5.66z' fill-rule='evenodd' fill='#3799EB'></path>\n</svg>\n<button class='btn secondary-btn' data-hook='om-video-search-button' ng-click='$ctrl.startSearch()'>Search</button>\n</form>\n<div class='om-main-header is-video-search-subtitle' data-hook='om-video-search-subtitle'>\n<span>From:</span>\n<input class='om-radio' data-hook='video-search-youtube-source' id='radio1' ng-change='$ctrl.startSearch()' ng-model='$ctrl.source' ng-value='&#39;youtube&#39;' type='radio'>\n<label data-hook='video-search-youtube-source-label' for='radio1'>Youtube</label>\n<input class='om-radio' data-hook='video-search-vimeo-source' id='radio2' ng-change='$ctrl.startSearch()' ng-model='$ctrl.source' ng-value='&#39;vimeo&#39;' type='radio'>\n<label data-hook='video-search-vimeo-source-label' for='radio2'>Vimeo</label>\n</div>\n<div class='om-vs-center-messages-area' ng-class='{&#39;center-items&#39;: $ctrl.videos.length === 0}'>\n<div alt='No search results displayed' class='om-vs-no-videos-drawing' data-hook='om-video-search-drawing' ng-if='$ctrl.videos.length === 0'>\n<svg height='133px' version='1.1' viewBox='0 0 85 85' width='121px' xmlns='http://www.w3.org/2000/svg'>\n<g fill-rule='evenodd' fill='none' stroke-width='1' stroke='none'>\n<path d='M18.5,48.11 L2.5,48.11 C1.395,48.11 0.5,47.214 0.5,46.11 L0.5,38.89 C0.5,37.786 1.395,36.89 2.5,36.89 L18.5,36.89 C19.605,36.89 20.5,37.786 20.5,38.89 L20.5,46.11 C20.5,47.214 19.605,48.11 18.5,48.11' fill='#D3ECF4'></path>\n<path d='M1.964,38.354 L3.427,38.354 L3.427,39.817 L1.964,39.817 L1.964,38.354 Z' fill='#FFFFFF'></path>\n<path d='M1.964,41.768 L3.427,41.768 L3.427,43.231 L1.964,43.231 L1.964,41.768 Z' fill='#FFFFFF'></path>\n<path d='M1.964,45.183 L3.427,45.183 L3.427,46.646 L1.964,46.646 L1.964,45.183 Z' fill='#FFFFFF'></path>\n<path d='M17.573,38.354 L19.036,38.354 L19.036,39.817 L17.573,39.817 L17.573,38.354 Z' fill='#FFFFFF'></path>\n<path d='M17.573,41.768 L19.036,41.768 L19.036,43.231 L17.573,43.231 L17.573,41.768 Z' fill='#FFFFFF'></path>\n<path d='M17.573,45.183 L19.036,45.183 L19.036,46.646 L17.573,46.646 L17.573,45.183 Z' fill='#FFFFFF'></path>\n<path d='M4.89,38.354 L16.11,38.354 L16.11,46.647 L4.89,46.647 L4.89,38.354 Z' fill='#FFFFFF'></path>\n<path d='M9,40.514 L12.902,42.709 L9,44.904 L9,40.514' fill='#A7E3FA'></path>\n<path d='M56.854,11.487 C47.11,1.743 31.312,1.743 21.568,11.487 C19.611,13.444 18.071,15.653 16.901,18 C13.29,25.241 13.412,33.857 17.283,41 C18.093,42.494 19.051,43.929 20.188,45.266 C20.625,45.782 21.081,46.287 21.568,46.774 C31.312,56.518 47.11,56.518 56.854,46.774 C61.211,42.417 63.614,36.85 64.074,31.155 C64.644,24.112 62.241,16.875 56.854,11.487' fill='#FFFFFF'></path>\n<path d='M54,39 L54,20 C54,18.895 53.105,18 52,18 L16.901,18 C13.29,25.241 13.412,33.857 17.283,41 L52,41 C53.105,41 54,40.105 54,39' fill='#D3ECF4'></path>\n<path d='M23.918,16.757 C28.517,12.159 34.557,9.862 40.598,9.862 C46.636,9.862 52.677,12.16 57.276,16.757 C61.188,20.67 63.555,25.716 64.074,31.155 C64.644,24.112 62.241,16.875 56.854,11.487 C47.11,1.743 31.312,1.743 21.568,11.487 C12.31,20.745 11.854,35.463 20.188,45.266 C18.118,41.711 17.01,37.659 17.01,33.436 C17.01,27.136 19.464,21.212 23.918,16.757' fill='#EBEBEB'></path>\n<path d='M16,21 L19,21 L19,24 L16,24 L16,21 Z' fill='#FFFFFF'></path>\n<path d='M16,28 L19,28 L19,31 L16,31 L16,28 Z' fill='#FFFFFF'></path>\n<path d='M16,35 L19,35 L19,38 L16,38 L16,35 Z' fill='#FFFFFF'></path>\n<path d='M48,21 L51,21 L51,24 L48,24 L48,21 Z' fill='#FFFFFF'></path>\n<path d='M48,28 L51,28 L51,31 L48,31 L48,28 Z' fill='#FFFFFF'></path>\n<path d='M48,35 L51,35 L51,38 L48,38 L48,35 Z' fill='#FFFFFF'></path>\n<path d='M22,21 L45,21 L45,38 L22,38 L22,21 Z' fill='#FFFFFF'></path>\n<path d='M30,25.428 L38,29.928 L30,34.428 L30,25.428' fill='#A7E3FA'></path>\n<path d='M76.268,65.912 C77.084,65.095 77.31,64.208 77.31,63.137 C77.31,62.067 76.72,61.18 75.903,60.363 L61.966,46.426 C65.8,41.249 67.568,35.404 67.568,29.434 C67.568,22.078 64.786,14.704 59.186,9.103 C47.985,-2.097 29.77,-2.106 18.569,9.094 C7.368,20.295 7.664,38.223 18.864,49.424 C29.108,59.666 44.86,60.86 56.752,51.725 L70.647,65.62 C72.279,67.253 74.636,67.544 76.268,65.912 L76.268,65.912 Z M53.73,48.179 C44.337,55.608 30.626,55.001 21.956,46.332 C12.618,36.994 12.618,21.801 21.956,12.464 C31.294,3.126 46.488,3.126 55.826,12.464 C64.409,21.048 65.078,34.571 57.879,43.954 C57.248,44.777 56.579,45.579 55.826,46.332 C55.158,47 54.453,47.607 53.73,48.179 L53.73,48.179 Z' fill='#A7E3FA'></path>\n<path d='M68.588,82.767 C68.588,83.872 56.052,84.767 40.588,84.767 C25.124,84.767 12.588,83.872 12.588,82.767 C12.588,81.663 25.124,80.767 40.588,80.767 C56.052,80.767 68.588,81.663 68.588,82.767' fill='#D3ECF4'></path>\n</g>\n</svg>\n</div>\n<div ng-switch='$ctrl.searchStatus'>\n<div class='om-vs-search-results-empty' data-hook='om-video-search-message' ng-switch-when='beforeSearch'>Search to find {{ $ctrl.source.charAt(0).toUpperCase() + $ctrl.source.substr(1).toLowerCase() }} Videos</div>\n<div class='om-vs-search-results-empty' data-hook='om-video-search-message' ng-switch-when='noResultsFound'>Your search has not returned any videos</div>\n</div>\n<div class='om-vs-search-results om-items-list' ng-if='$ctrl.videos.length' om-infinite-scroll='$ctrl.search()'>\n<video-item class='media-item video-item' data-hook='om-video-search-result-item' item='item' ng-click='$ctrl.selected = item' ng-dblclick='$ctrl.done()' ng-repeat='item in $ctrl.videos' ng-selected='item === $ctrl.selected' open-video-foreplay='$ctrl.openVideoForeplay(item)'></video-item>\n</div>\n</div>\n</div>\n</main>\n<footer class='panel-footer'>\n<button class='btn secondary-btn' data-hook='om-video-search-cancel-button' ng-click='$ctrl.cancel()'>Cancel</button>\n<button class='btn primary-btn' data-hook='om-video-search-done-button' ng-click='$ctrl.done()' ng-disabled='!$ctrl.selected'>Add</button>\n</footer>\n</div>\n</div>\n")}]);try{angular.module("organizeMediaTranslations")}catch(e){angular.module("organizeMediaTranslations",["pascalprecht.translate"])}angular.module("organizeMediaTranslations").config(["$translateProvider",function(a){var b={general:{YO:"Hello"}};a.translations("en",b),a.translations(b),a.preferredLanguage&&a.preferredLanguage("en")}]).value("preferredLanguage","en"),angular.module("organizeMediaApp").constant("customData",{title:"Recommended",sections:[{title:"Recommended especially for your section",data:[{id:"95dca3_67abe669f76b452db3d344d73b95ed88.jpg",folderId:"5ef09de742b21f8978aa5aa578edf9ae",name:"11084017_10206669551480456_1435141193163919894_o.jpg 2015-9-11-22:52:50",mediaType:"picture",fileUrl:"/media/95dca3_67abe669f76b452db3d344d73b95ed88.jpg",createdAt:1442001170,labels:[],tags:["edited image"],width:1049,height:1500,fileInfo:null,fileInput:null,fileOutput:null,thumbnailUrl:"//static.wixstatic.com/media/95dca3_67abe669f76b452db3d344d73b95ed88.jpg/v1/fill/w_210,h_210/95dca3_67abe669f76b452db3d344d73b95ed88.jpg",previewUrl:"//static.wixstatic.com/media/95dca3_67abe669f76b452db3d344d73b95ed88.jpg/v1/fit/w_375,h_375/95dca3_67abe669f76b452db3d344d73b95ed88.jpg",originalUrl:"//static.wixstatic.com/media/95dca3_67abe669f76b452db3d344d73b95ed88.jpg",videoPreviewUrl:null}]},{title:"Images from your business",action:{url:"private",title:"Show All"},data:[{id:"95dca3_28695c6cd1564c059451211f0df8a732.jpg",folderId:"0f2943238ddbc89388ec7bbc6f761f98",name:"twittwer-and-facebook-profile-2.jpg",mediaType:"picture",fileUrl:"media/95dca3_28695c6cd1564c059451211f0df8a732.jpg",createdAt:1462178276,labels:["font","logo","area","artwork","brand"],tags:[],width:400,height:400,fileInfo:null,fileInput:null,fileOutput:null,thumbnailUrl:"//static.wixstatic.com/media/95dca3_28695c6cd1564c059451211f0df8a732.jpg/v1/fill/w_210,h_210/95dca3_28695c6cd1564c059451211f0df8a732.jpg",previewUrl:"//static.wixstatic.com/media/95dca3_28695c6cd1564c059451211f0df8a732.jpg/v1/fit/w_375,h_375/95dca3_28695c6cd1564c059451211f0df8a732.jpg",originalUrl:"//static.wixstatic.com/media/95dca3_28695c6cd1564c059451211f0df8a732.jpg",videoPreviewUrl:null},{id:"95dca3_34aeb8de5c774a2eb964402f3d4c6108.png",folderId:"0f2943238ddbc89388ec7bbc6f761f98",name:"image_FT.png",mediaType:"picture",fileUrl:"media/95dca3_34aeb8de5c774a2eb964402f3d4c6108.png",createdAt:1461752139,labels:["art","font","diagram","document","area"],tags:[],width:538,height:306,fileInfo:null,fileInput:null,fileOutput:null,thumbnailUrl:"//static.wixstatic.com/media/95dca3_34aeb8de5c774a2eb964402f3d4c6108.png/v1/fill/w_210,h_210/95dca3_34aeb8de5c774a2eb964402f3d4c6108.png",previewUrl:"//static.wixstatic.com/media/95dca3_34aeb8de5c774a2eb964402f3d4c6108.png/v1/fit/w_375,h_375/95dca3_34aeb8de5c774a2eb964402f3d4c6108.png",originalUrl:"//static.wixstatic.com/media/95dca3_34aeb8de5c774a2eb964402f3d4c6108.png",videoPreviewUrl:null},{id:"95dca3_f133807c4c0a48bea1c7e4a491fa5cc9.png",folderId:"0f2943238ddbc89388ec7bbc6f761f98",name:"engage_m.png",mediaType:"picture",fileUrl:"media/95dca3_f133807c4c0a48bea1c7e4a491fa5cc9.png",createdAt:1461748979,labels:["aqua","label","circle","logo","clip art"],tags:[],width:120,height:120,fileInfo:null,fileInput:null,fileOutput:null,thumbnailUrl:"//static.wixstatic.com/media/95dca3_f133807c4c0a48bea1c7e4a491fa5cc9.png/v1/fill/w_210,h_210/95dca3_f133807c4c0a48bea1c7e4a491fa5cc9.png",previewUrl:"//static.wixstatic.com/media/95dca3_f133807c4c0a48bea1c7e4a491fa5cc9.png/v1/fit/w_375,h_375/95dca3_f133807c4c0a48bea1c7e4a491fa5cc9.png",originalUrl:"//static.wixstatic.com/media/95dca3_f133807c4c0a48bea1c7e4a491fa5cc9.png",videoPreviewUrl:null},{id:"95dca3_9765a7e3e8b84f1fa963d9ea4914ccb6.png",folderId:"0f2943238ddbc89388ec7bbc6f761f98",name:"react.png",mediaType:"picture",fileUrl:"media/95dca3_9765a7e3e8b84f1fa963d9ea4914ccb6.png",createdAt:1457092216,labels:["area","clip art","mp3 player accessory","baby toys","Packaging"],tags:[],width:600,height:537,fileInfo:null,fileInput:null,fileOutput:null,thumbnailUrl:"//static.wixstatic.com/media/95dca3_9765a7e3e8b84f1fa963d9ea4914ccb6.png/v1/fill/w_210,h_210/95dca3_9765a7e3e8b84f1fa963d9ea4914ccb6.png",previewUrl:"//static.wixstatic.com/media/95dca3_9765a7e3e8b84f1fa963d9ea4914ccb6.png/v1/fit/w_375,h_375/95dca3_9765a7e3e8b84f1fa963d9ea4914ccb6.png",originalUrl:"//static.wixstatic.com/media/95dca3_9765a7e3e8b84f1fa963d9ea4914ccb6.png",videoPreviewUrl:null},{id:"95dca3_354b3a6e4fd1455fbe2f5e5d37717474.png",folderId:"0f2943238ddbc89388ec7bbc6f761f98",name:"react_native.png",mediaType:"picture",fileUrl:"media/95dca3_354b3a6e4fd1455fbe2f5e5d37717474.png",createdAt:1457092064,labels:["black","t shirt","blue","text","logo"],tags:[],width:1900,height:1267,fileInfo:null,fileInput:null,fileOutput:null,thumbnailUrl:"//static.wixstatic.com/media/95dca3_354b3a6e4fd1455fbe2f5e5d37717474.png/v1/fill/w_210,h_210/95dca3_354b3a6e4fd1455fbe2f5e5d37717474.png",previewUrl:"//static.wixstatic.com/media/95dca3_354b3a6e4fd1455fbe2f5e5d37717474.png/v1/fit/w_375,h_375/95dca3_354b3a6e4fd1455fbe2f5e5d37717474.png",originalUrl:"//static.wixstatic.com/media/95dca3_354b3a6e4fd1455fbe2f5e5d37717474.png",videoPreviewUrl:null},{id:"95dca3_d9df2ec8a1f743899abdb2c956360f0d.png",folderId:"0f2943238ddbc89388ec7bbc6f761f98",name:"react-js-communication_0.png",mediaType:"picture",fileUrl:"media/95dca3_d9df2ec8a1f743899abdb2c956360f0d.png",createdAt:1457091452,labels:["blue","text","display device","logo","symbol"],tags:[],width:661,height:317,fileInfo:null,fileInput:null,fileOutput:null,thumbnailUrl:"//static.wixstatic.com/media/95dca3_d9df2ec8a1f743899abdb2c956360f0d.png/v1/fill/w_210,h_210/95dca3_d9df2ec8a1f743899abdb2c956360f0d.png",previewUrl:"//static.wixstatic.com/media/95dca3_d9df2ec8a1f743899abdb2c956360f0d.png/v1/fit/w_375,h_375/95dca3_d9df2ec8a1f743899abdb2c956360f0d.png",originalUrl:"//static.wixstatic.com/media/95dca3_d9df2ec8a1f743899abdb2c956360f0d.png",videoPreviewUrl:null}]},{title:"Free from Wix",action:{url:"public",title:"Show All"},data:[{id:"95dca3_28695c6cd1564c059451211f0df8a732.jpg",folderId:"0f2943238ddbc89388ec7bbc6f761f98",name:"twittwer-and-facebook-profile-2.jpg",mediaType:"picture",fileUrl:"media/95dca3_28695c6cd1564c059451211f0df8a732.jpg",createdAt:1462178276,labels:["font","logo","area","artwork","brand"],tags:[],width:400,height:400,fileInfo:null,fileInput:null,fileOutput:null,thumbnailUrl:"//static.wixstatic.com/media/95dca3_28695c6cd1564c059451211f0df8a732.jpg/v1/fill/w_210,h_210/95dca3_28695c6cd1564c059451211f0df8a732.jpg",previewUrl:"//static.wixstatic.com/media/95dca3_28695c6cd1564c059451211f0df8a732.jpg/v1/fit/w_375,h_375/95dca3_28695c6cd1564c059451211f0df8a732.jpg",originalUrl:"//static.wixstatic.com/media/95dca3_28695c6cd1564c059451211f0df8a732.jpg",videoPreviewUrl:null},{id:"95dca3_34aeb8de5c774a2eb964402f3d4c6108.png",folderId:"0f2943238ddbc89388ec7bbc6f761f98",name:"image_FT.png",mediaType:"picture",fileUrl:"media/95dca3_34aeb8de5c774a2eb964402f3d4c6108.png",createdAt:1461752139,labels:["art","font","diagram","document","area"],tags:[],width:538,height:306,fileInfo:null,fileInput:null,fileOutput:null,thumbnailUrl:"//static.wixstatic.com/media/95dca3_34aeb8de5c774a2eb964402f3d4c6108.png/v1/fill/w_210,h_210/95dca3_34aeb8de5c774a2eb964402f3d4c6108.png",previewUrl:"//static.wixstatic.com/media/95dca3_34aeb8de5c774a2eb964402f3d4c6108.png/v1/fit/w_375,h_375/95dca3_34aeb8de5c774a2eb964402f3d4c6108.png",originalUrl:"//static.wixstatic.com/media/95dca3_34aeb8de5c774a2eb964402f3d4c6108.png",videoPreviewUrl:null},{id:"95dca3_f133807c4c0a48bea1c7e4a491fa5cc9.png",folderId:"0f2943238ddbc89388ec7bbc6f761f98",name:"engage_m.png",mediaType:"picture",fileUrl:"media/95dca3_f133807c4c0a48bea1c7e4a491fa5cc9.png",createdAt:1461748979,labels:["aqua","label","circle","logo","clip art"],tags:[],width:120,height:120,fileInfo:null,fileInput:null,fileOutput:null,thumbnailUrl:"//static.wixstatic.com/media/95dca3_f133807c4c0a48bea1c7e4a491fa5cc9.png/v1/fill/w_210,h_210/95dca3_f133807c4c0a48bea1c7e4a491fa5cc9.png",previewUrl:"//static.wixstatic.com/media/95dca3_f133807c4c0a48bea1c7e4a491fa5cc9.png/v1/fit/w_375,h_375/95dca3_f133807c4c0a48bea1c7e4a491fa5cc9.png",originalUrl:"//static.wixstatic.com/media/95dca3_f133807c4c0a48bea1c7e4a491fa5cc9.png",videoPreviewUrl:null},{id:"95dca3_9765a7e3e8b84f1fa963d9ea4914ccb6.png",folderId:"0f2943238ddbc89388ec7bbc6f761f98",name:"react.png",mediaType:"picture",fileUrl:"media/95dca3_9765a7e3e8b84f1fa963d9ea4914ccb6.png",createdAt:1457092216,labels:["area","clip art","mp3 player accessory","baby toys","Packaging"],tags:[],width:600,height:537,fileInfo:null,fileInput:null,fileOutput:null,thumbnailUrl:"//static.wixstatic.com/media/95dca3_9765a7e3e8b84f1fa963d9ea4914ccb6.png/v1/fill/w_210,h_210/95dca3_9765a7e3e8b84f1fa963d9ea4914ccb6.png",previewUrl:"//static.wixstatic.com/media/95dca3_9765a7e3e8b84f1fa963d9ea4914ccb6.png/v1/fit/w_375,h_375/95dca3_9765a7e3e8b84f1fa963d9ea4914ccb6.png",originalUrl:"//static.wixstatic.com/media/95dca3_9765a7e3e8b84f1fa963d9ea4914ccb6.png",videoPreviewUrl:null},{id:"95dca3_354b3a6e4fd1455fbe2f5e5d37717474.png",folderId:"0f2943238ddbc89388ec7bbc6f761f98",name:"react_native.png",mediaType:"picture",fileUrl:"media/95dca3_354b3a6e4fd1455fbe2f5e5d37717474.png",createdAt:1457092064,labels:["black","t shirt","blue","text","logo"],tags:[],width:1900,height:1267,fileInfo:null,fileInput:null,fileOutput:null,thumbnailUrl:"//static.wixstatic.com/media/95dca3_354b3a6e4fd1455fbe2f5e5d37717474.png/v1/fill/w_210,h_210/95dca3_354b3a6e4fd1455fbe2f5e5d37717474.png",previewUrl:"//static.wixstatic.com/media/95dca3_354b3a6e4fd1455fbe2f5e5d37717474.png/v1/fit/w_375,h_375/95dca3_354b3a6e4fd1455fbe2f5e5d37717474.png",originalUrl:"//static.wixstatic.com/media/95dca3_354b3a6e4fd1455fbe2f5e5d37717474.png",videoPreviewUrl:null},{id:"95dca3_d9df2ec8a1f743899abdb2c956360f0d.png",folderId:"0f2943238ddbc89388ec7bbc6f761f98",name:"react-js-communication_0.png",mediaType:"picture",fileUrl:"media/95dca3_d9df2ec8a1f743899abdb2c956360f0d.png",createdAt:1457091452,labels:["blue","text","display device","logo","symbol"],tags:[],width:661,height:317,fileInfo:null,fileInput:null,fileOutput:null,thumbnailUrl:"//static.wixstatic.com/media/95dca3_d9df2ec8a1f743899abdb2c956360f0d.png/v1/fill/w_210,h_210/95dca3_d9df2ec8a1f743899abdb2c956360f0d.png",previewUrl:"//static.wixstatic.com/media/95dca3_d9df2ec8a1f743899abdb2c956360f0d.png/v1/fit/w_375,h_375/95dca3_d9df2ec8a1f743899abdb2c956360f0d.png",originalUrl:"//static.wixstatic.com/media/95dca3_d9df2ec8a1f743899abdb2c956360f0d.png",videoPreviewUrl:null},{id:"95dca3_51c4da6f32524be2ab352620c4ff278b.jpg",folderId:"0f2943238ddbc89388ec7bbc6f761f98",name:"Untitled",mediaType:"picture",fileUrl:"media/95dca3_51c4da6f32524be2ab352620c4ff278b.jpg",createdAt:1455622986,labels:[],tags:["_imported","_site_builder"],width:450,height:470,fileInfo:null,fileInput:null,fileOutput:null,thumbnailUrl:"//static.wixstatic.com/media/95dca3_51c4da6f32524be2ab352620c4ff278b.jpg/v1/fill/w_210,h_210/95dca3_51c4da6f32524be2ab352620c4ff278b.jpg",previewUrl:"//static.wixstatic.com/media/95dca3_51c4da6f32524be2ab352620c4ff278b.jpg/v1/fit/w_375,h_375/95dca3_51c4da6f32524be2ab352620c4ff278b.jpg",originalUrl:"//static.wixstatic.com/media/95dca3_51c4da6f32524be2ab352620c4ff278b.jpg",videoPreviewUrl:null},{id:"95dca3_9563f0947359471bb7ab3306ec3f6583.png",folderId:"0f2943238ddbc89388ec7bbc6f761f98",name:"Untitled",mediaType:"picture",fileUrl:"media/95dca3_9563f0947359471bb7ab3306ec3f6583.png",createdAt:1455622984,labels:[],tags:["_imported","_site_builder"],width:458,height:380,fileInfo:null,fileInput:null,fileOutput:null,thumbnailUrl:"//static.wixstatic.com/media/95dca3_9563f0947359471bb7ab3306ec3f6583.png/v1/fill/w_210,h_210/95dca3_9563f0947359471bb7ab3306ec3f6583.png",previewUrl:"//static.wixstatic.com/media/95dca3_9563f0947359471bb7ab3306ec3f6583.png/v1/fit/w_375,h_375/95dca3_9563f0947359471bb7ab3306ec3f6583.png",originalUrl:"//static.wixstatic.com/media/95dca3_9563f0947359471bb7ab3306ec3f6583.png",videoPreviewUrl:null},{id:"95dca3_c0526effd09749ddb69f0a580766085d.jpg",folderId:"0f2943238ddbc89388ec7bbc6f761f98",name:"Untitled",mediaType:"picture",fileUrl:"media/95dca3_c0526effd09749ddb69f0a580766085d.jpg",createdAt:1455622185,labels:[],tags:["_imported","_site_builder"],width:450,height:470,fileInfo:null,fileInput:null,fileOutput:null,thumbnailUrl:"//static.wixstatic.com/media/95dca3_c0526effd09749ddb69f0a580766085d.jpg/v1/fill/w_210,h_210/95dca3_c0526effd09749ddb69f0a580766085d.jpg",previewUrl:"//static.wixstatic.com/media/95dca3_c0526effd09749ddb69f0a580766085d.jpg/v1/fit/w_375,h_375/95dca3_c0526effd09749ddb69f0a580766085d.jpg",originalUrl:"//static.wixstatic.com/media/95dca3_c0526effd09749ddb69f0a580766085d.jpg",videoPreviewUrl:null},{id:"95dca3_2b5f9533f0a64e52819bf007832c14aa.png",folderId:"0f2943238ddbc89388ec7bbc6f761f98",name:"Untitled",mediaType:"picture",fileUrl:"media/95dca3_2b5f9533f0a64e52819bf007832c14aa.png",createdAt:1455622183,labels:["finger","tattoo","facial expression","cartoon","hand"],tags:["_imported","_site_builder"],width:458,height:380,fileInfo:null,fileInput:null,fileOutput:null,thumbnailUrl:"//static.wixstatic.com/media/95dca3_2b5f9533f0a64e52819bf007832c14aa.png/v1/fill/w_210,h_210/95dca3_2b5f9533f0a64e52819bf007832c14aa.png",previewUrl:"//static.wixstatic.com/media/95dca3_2b5f9533f0a64e52819bf007832c14aa.png/v1/fit/w_375,h_375/95dca3_2b5f9533f0a64e52819bf007832c14aa.png",originalUrl:"//static.wixstatic.com/media/95dca3_2b5f9533f0a64e52819bf007832c14aa.png",videoPreviewUrl:null},{id:"95dca3_631612911d9d454e98dc821c87b48e06.jpg",folderId:"0f2943238ddbc89388ec7bbc6f761f98",name:"272134_2248517135433_1439249_o.jpg",mediaType:"picture",fileUrl:"media/95dca3_631612911d9d454e98dc821c87b48e06.jpg",createdAt:1448308744,labels:[],tags:[],width:1024,height:1368,fileInfo:null,fileInput:null,fileOutput:null,thumbnailUrl:"//static.wixstatic.com/media/95dca3_631612911d9d454e98dc821c87b48e06.jpg/v1/fill/w_210,h_210/95dca3_631612911d9d454e98dc821c87b48e06.jpg",previewUrl:"//static.wixstatic.com/media/95dca3_631612911d9d454e98dc821c87b48e06.jpg/v1/fit/w_375,h_375/95dca3_631612911d9d454e98dc821c87b48e06.jpg",originalUrl:"//static.wixstatic.com/media/95dca3_631612911d9d454e98dc821c87b48e06.jpg",videoPreviewUrl:null},{id:"95dca3_9d15663865954b4e842c706281dfc5da.png",folderId:"0f2943238ddbc89388ec7bbc6f761f98",name:"wix-invoices-logo-01.png",mediaType:"picture",fileUrl:"media/95dca3_9d15663865954b4e842c706281dfc5da.png",createdAt:1448177954,labels:[],tags:[],width:600,height:85,fileInfo:null,fileInput:null,fileOutput:null,thumbnailUrl:"//static.wixstatic.com/media/95dca3_9d15663865954b4e842c706281dfc5da.png/v1/fill/w_210,h_210/95dca3_9d15663865954b4e842c706281dfc5da.png",previewUrl:"//static.wixstatic.com/media/95dca3_9d15663865954b4e842c706281dfc5da.png/v1/fit/w_375,h_375/95dca3_9d15663865954b4e842c706281dfc5da.png",originalUrl:"//static.wixstatic.com/media/95dca3_9d15663865954b4e842c706281dfc5da.png",videoPreviewUrl:null},{id:"95dca3_3adbbc2bb23a41ec8a8c886ccedc37a4.png",folderId:"0f2943238ddbc89388ec7bbc6f761f98",name:"Screen Shot 2015-10-15 at 13.10.38.png",mediaType:"picture",fileUrl:"media/95dca3_3adbbc2bb23a41ec8a8c886ccedc37a4.png",createdAt:1444904334,labels:[],tags:[],width:954,height:708,fileInfo:null,fileInput:null,fileOutput:null,thumbnailUrl:"//static.wixstatic.com/media/95dca3_3adbbc2bb23a41ec8a8c886ccedc37a4.png/v1/fill/w_210,h_210/95dca3_3adbbc2bb23a41ec8a8c886ccedc37a4.png",previewUrl:"//static.wixstatic.com/media/95dca3_3adbbc2bb23a41ec8a8c886ccedc37a4.png/v1/fit/w_375,h_375/95dca3_3adbbc2bb23a41ec8a8c886ccedc37a4.png",originalUrl:"//static.wixstatic.com/media/95dca3_3adbbc2bb23a41ec8a8c886ccedc37a4.png",videoPreviewUrl:null},{id:"95dca3_5445d6869d4a4ad494ebe34804861972.png",folderId:"0f2943238ddbc89388ec7bbc6f761f98",name:"logo.png",mediaType:"picture",fileUrl:"media/95dca3_5445d6869d4a4ad494ebe34804861972.png",createdAt:1442148779,labels:[],tags:[],width:1e3,height:700,fileInfo:null,fileInput:null,fileOutput:null,thumbnailUrl:"//static.wixstatic.com/media/95dca3_5445d6869d4a4ad494ebe34804861972.png/v1/fill/w_210,h_210/95dca3_5445d6869d4a4ad494ebe34804861972.png",previewUrl:"//static.wixstatic.com/media/95dca3_5445d6869d4a4ad494ebe34804861972.png/v1/fit/w_375,h_375/95dca3_5445d6869d4a4ad494ebe34804861972.png",originalUrl:"//static.wixstatic.com/media/95dca3_5445d6869d4a4ad494ebe34804861972.png",videoPreviewUrl:null},{id:"95dca3_fe4e97931617447592e514417560451b.jpg",folderId:"e299203d48894d55b19eb8c9b5d354ad",name:"blueprints  and planning.jpg",mediaType:"picture",fileUrl:"media/95dca3_fe4e97931617447592e514417560451b.jpg",createdAt:1442125968,labels:[],tags:["_paid","_bigstock","_bigstock_80666213","_bigstock_80666213_l"],width:2800,height:1860,fileInfo:null,fileInput:null,fileOutput:null,thumbnailUrl:"//static.wixstatic.com/media/95dca3_fe4e97931617447592e514417560451b.jpg/v1/fill/w_210,h_210/95dca3_fe4e97931617447592e514417560451b.jpg",previewUrl:"//static.wixstatic.com/media/95dca3_fe4e97931617447592e514417560451b.jpg/v1/fit/w_375,h_375/95dca3_fe4e97931617447592e514417560451b.jpg",originalUrl:"//static.wixstatic.com/media/95dca3_fe4e97931617447592e514417560451b.jpg",videoPreviewUrl:null},{id:"95dca3_4c1fad6abd7240c3a003f6838de76fa6.png",folderId:"0f2943238ddbc89388ec7bbc6f761f98",name:"github-01.png",mediaType:"picture",fileUrl:"media/95dca3_4c1fad6abd7240c3a003f6838de76fa6.png",createdAt:1442124648,labels:[],tags:[],width:200,height:200,fileInfo:null,fileInput:null,fileOutput:null,thumbnailUrl:"//static.wixstatic.com/media/95dca3_4c1fad6abd7240c3a003f6838de76fa6.png/v1/fill/w_210,h_210/95dca3_4c1fad6abd7240c3a003f6838de76fa6.png",previewUrl:"//static.wixstatic.com/media/95dca3_4c1fad6abd7240c3a003f6838de76fa6.png/v1/fit/w_375,h_375/95dca3_4c1fad6abd7240c3a003f6838de76fa6.png",originalUrl:"//static.wixstatic.com/media/95dca3_4c1fad6abd7240c3a003f6838de76fa6.png",videoPreviewUrl:null},{id:"95dca3_28fc6f9b09d14fafa7791f736c5ccbe0.png",folderId:"0f2943238ddbc89388ec7bbc6f761f98",
name:"Screen Shot 2015-09-12 at 00.39.48 .png",mediaType:"picture",fileUrl:"media/95dca3_28fc6f9b09d14fafa7791f736c5ccbe0.png",createdAt:1442007746,labels:[],tags:[],width:1768,height:996,fileInfo:null,fileInput:null,fileOutput:null,thumbnailUrl:"//static.wixstatic.com/media/95dca3_28fc6f9b09d14fafa7791f736c5ccbe0.png/v1/fill/w_210,h_210/95dca3_28fc6f9b09d14fafa7791f736c5ccbe0.png",previewUrl:"//static.wixstatic.com/media/95dca3_28fc6f9b09d14fafa7791f736c5ccbe0.png/v1/fit/w_375,h_375/95dca3_28fc6f9b09d14fafa7791f736c5ccbe0.png",originalUrl:"//static.wixstatic.com/media/95dca3_28fc6f9b09d14fafa7791f736c5ccbe0.png",videoPreviewUrl:null},{id:"95dca3_59bb4b61c59247b7ad713f983cbfd2fc.jpg",folderId:"0f2943238ddbc89388ec7bbc6f761f98",name:"10996085_1595967644024070_38828596761427860_o.jpg",mediaType:"picture",fileUrl:"media/95dca3_59bb4b61c59247b7ad713f983cbfd2fc.jpg",createdAt:1442006226,labels:[],tags:[],width:2048,height:1324,fileInfo:null,fileInput:null,fileOutput:null,thumbnailUrl:"//static.wixstatic.com/media/95dca3_59bb4b61c59247b7ad713f983cbfd2fc.jpg/v1/fill/w_210,h_210/95dca3_59bb4b61c59247b7ad713f983cbfd2fc.jpg",previewUrl:"//static.wixstatic.com/media/95dca3_59bb4b61c59247b7ad713f983cbfd2fc.jpg/v1/fit/w_375,h_375/95dca3_59bb4b61c59247b7ad713f983cbfd2fc.jpg",originalUrl:"//static.wixstatic.com/media/95dca3_59bb4b61c59247b7ad713f983cbfd2fc.jpg",videoPreviewUrl:null},{id:"95dca3_67abe669f76b452db3d344d73b95ed88.jpg",folderId:"5ef09de742b21f8978aa5aa578edf9ae",name:"11084017_10206669551480456_1435141193163919894_o.jpg 2015-9-11-22:52:50",mediaType:"picture",fileUrl:"/media/95dca3_67abe669f76b452db3d344d73b95ed88.jpg",createdAt:1442001170,labels:[],tags:["edited image"],width:1049,height:1500,fileInfo:null,fileInput:null,fileOutput:null,thumbnailUrl:"//static.wixstatic.com/media/95dca3_67abe669f76b452db3d344d73b95ed88.jpg/v1/fill/w_210,h_210/95dca3_67abe669f76b452db3d344d73b95ed88.jpg",previewUrl:"//static.wixstatic.com/media/95dca3_67abe669f76b452db3d344d73b95ed88.jpg/v1/fit/w_375,h_375/95dca3_67abe669f76b452db3d344d73b95ed88.jpg",originalUrl:"//static.wixstatic.com/media/95dca3_67abe669f76b452db3d344d73b95ed88.jpg",videoPreviewUrl:null},{id:"95dca3_38139dd208b741da85cd10cf4e87f567.jpg",folderId:"0f2943238ddbc89388ec7bbc6f761f98",name:"11084017_10206669551480456_1435141193163919894_o.jpg",mediaType:"picture",fileUrl:"media/95dca3_38139dd208b741da85cd10cf4e87f567.jpg",createdAt:1442000404,labels:[],tags:[],width:1432,height:2048,fileInfo:null,fileInput:null,fileOutput:null,thumbnailUrl:"//static.wixstatic.com/media/95dca3_38139dd208b741da85cd10cf4e87f567.jpg/v1/fill/w_210,h_210/95dca3_38139dd208b741da85cd10cf4e87f567.jpg",previewUrl:"//static.wixstatic.com/media/95dca3_38139dd208b741da85cd10cf4e87f567.jpg/v1/fit/w_375,h_375/95dca3_38139dd208b741da85cd10cf4e87f567.jpg",originalUrl:"//static.wixstatic.com/media/95dca3_38139dd208b741da85cd10cf4e87f567.jpg",videoPreviewUrl:null},{id:"95dca3_c1fa817b61254b75a37d20e8808291d8.jpg",folderId:"0f2943238ddbc89388ec7bbc6f761f98",name:"Untitled",mediaType:"picture",fileUrl:"media/95dca3_c1fa817b61254b75a37d20e8808291d8.jpg",createdAt:1441998704,labels:[],tags:["_social","_imported","_facebook","_facebook_10206453747165483"],width:720,height:224,fileInfo:null,fileInput:null,fileOutput:null,thumbnailUrl:"//static.wixstatic.com/media/95dca3_c1fa817b61254b75a37d20e8808291d8.jpg/v1/fill/w_210,h_210/95dca3_c1fa817b61254b75a37d20e8808291d8.jpg",previewUrl:"//static.wixstatic.com/media/95dca3_c1fa817b61254b75a37d20e8808291d8.jpg/v1/fit/w_375,h_375/95dca3_c1fa817b61254b75a37d20e8808291d8.jpg",originalUrl:"//static.wixstatic.com/media/95dca3_c1fa817b61254b75a37d20e8808291d8.jpg",videoPreviewUrl:null},{id:"95dca3_f711c8752d0b48b886438d73fc0eed24.jpg",folderId:"0f2943238ddbc89388ec7bbc6f761f98",name:"Untitled",mediaType:"picture",fileUrl:"media/95dca3_f711c8752d0b48b886438d73fc0eed24.jpg",createdAt:1441998655,labels:[],tags:["_social","_imported","_facebook","_facebook_4597681623077"],width:720,height:472,fileInfo:null,fileInput:null,fileOutput:null,thumbnailUrl:"//static.wixstatic.com/media/95dca3_f711c8752d0b48b886438d73fc0eed24.jpg/v1/fill/w_210,h_210/95dca3_f711c8752d0b48b886438d73fc0eed24.jpg",previewUrl:"//static.wixstatic.com/media/95dca3_f711c8752d0b48b886438d73fc0eed24.jpg/v1/fit/w_375,h_375/95dca3_f711c8752d0b48b886438d73fc0eed24.jpg",originalUrl:"//static.wixstatic.com/media/95dca3_f711c8752d0b48b886438d73fc0eed24.jpg",videoPreviewUrl:null},{id:"95dca3_d63ea2e1cfac42aebfd0258c05cb5703.png",folderId:"0f2943238ddbc89388ec7bbc6f761f98",name:"YGLFConf_date.png",mediaType:"picture",fileUrl:"media/95dca3_d63ea2e1cfac42aebfd0258c05cb5703.png",createdAt:1431499482,labels:[],tags:[],width:1200,height:1200,fileInfo:null,fileInput:null,fileOutput:null,thumbnailUrl:"//static.wixstatic.com/media/95dca3_d63ea2e1cfac42aebfd0258c05cb5703.png/v1/fill/w_210,h_210/95dca3_d63ea2e1cfac42aebfd0258c05cb5703.png",previewUrl:"//static.wixstatic.com/media/95dca3_d63ea2e1cfac42aebfd0258c05cb5703.png/v1/fit/w_375,h_375/95dca3_d63ea2e1cfac42aebfd0258c05cb5703.png",originalUrl:"//static.wixstatic.com/media/95dca3_d63ea2e1cfac42aebfd0258c05cb5703.png",videoPreviewUrl:null},{id:"95dca3_988a2e68ca0f41c38cc7cecdfde70281.png",folderId:"0f2943238ddbc89388ec7bbc6f761f98",name:"YGLFConf.png",mediaType:"picture",fileUrl:"media/95dca3_988a2e68ca0f41c38cc7cecdfde70281.png",createdAt:1431499105,labels:[],tags:[],width:1196,height:1198,fileInfo:null,fileInput:null,fileOutput:null,thumbnailUrl:"//static.wixstatic.com/media/95dca3_988a2e68ca0f41c38cc7cecdfde70281.png/v1/fill/w_210,h_210/95dca3_988a2e68ca0f41c38cc7cecdfde70281.png",previewUrl:"//static.wixstatic.com/media/95dca3_988a2e68ca0f41c38cc7cecdfde70281.png/v1/fit/w_375,h_375/95dca3_988a2e68ca0f41c38cc7cecdfde70281.png",originalUrl:"//static.wixstatic.com/media/95dca3_988a2e68ca0f41c38cc7cecdfde70281.png",videoPreviewUrl:null}]}]}),angular.module("organizeMediaApp").constant("extVideos",[{videoUrl:"https://youtu.be/83nu4yXFcYU",thumbnailUrl:"https://img.youtube.com/vi/83nu4yXFcYU/0.jpg",Title:"Wix Presents: User Stories",Description:"",mediaType:"extVideo",active:!0},{videoUrl:"https://youtu.be/WRU83c06luM",thumbnailUrl:"https://img.youtube.com/vi/WRU83c06luM/0.jpg",Title:"How to Build a Website with Wix.com",Description:"",mediaType:"extVideo",active:!1},{videoUrl:"https://youtu.be/akiVi1sR2rM",thumbnailUrl:"https://img.youtube.com/vi/akiVi1sR2rM/0.jpg",Title:"Louis C K Generation of Spoiled Idiots",Description:"",mediaType:"extVideo",active:!1}]),angular.module("organizeMediaApp").constant("images",[{fileName:"Two Flamingos",relativeUri:"0d5a8583187a44688b918f91298eba80.jpg",width:1920,height:1280,Title:"Two Flamingos",Description:"",Link:{},mediaType:"image",active:!0},{fileName:"Mountain Lake",relativeUri:"a9ff3b_61fe61f3eb4c4adeb5835a166de10689.jpg",width:1920,height:1280,Title:"Mountain Lake",Description:"",Link:{},mediaType:"image",active:!0},{fileName:"Beach Huts",relativeUri:"a9ff3b_5f378900670848919283755eb67a5949.jpg",width:1920,height:1280,Title:"Beach Huts",Description:"",Link:{},mediaType:"image",active:!0},{fileName:"Ferris Wheel",relativeUri:"a9ff3b_7125cf82b18841c2961ce0a241b78826.jpg",width:1920,height:1280,Title:"Ferris Wheel",Description:"",Link:{},mediaType:"image",active:!1},{fileName:"City Cycle",relativeUri:"a9ff3b_f69457ef952c4aa4ba805827a02331c4.jpg",width:1920,height:1280,Title:"City Cycle",Description:"",Link:{},mediaType:"image",active:!1},{fileName:"Palm Trees",relativeUri:"a9ff3b_1d0b83b8723c4dc39192405fd083142a.jpg",width:1920,height:1280,Title:"Palm Trees",Description:"",Link:{},mediaType:"image",active:!1},{fileName:"Misty Slopes",relativeUri:"a9ff3b_f2f5a5f6dac648e8a23cd07144c67530.jpg",width:1920,height:1280,Title:"Misty Slopes",Description:"",Link:{},mediaType:"image",active:!1}]);var MEDIA_ITEM_SIZES={imagePreview:{width:288,height:155},imagePreviewPopup:{width:400,height:400},imageThumbnail:{width:120,height:120},wixVideoThumbnail:{width:288,height:155}};angular.module("organizeMediaDialog").constant("MEDIA_ITEM_SIZES",MEDIA_ITEM_SIZES);var MEDIA_GALLERY_PARAMS={DEFAULTS:{mediaGalleryBaseHost:"https://www.wix.com/_partials/media-gallery-g5/1.423.0/",mediaType:"picture",publicMediaRoot:"photos",path:"public",tabsList:["private","external","public","photoStock"]}};angular.module("organizeMediaDialog").constant("MEDIA_GALLERY_PARAMS",MEDIA_GALLERY_PARAMS);var OrganizeMediaDialogTooltips=function(){function a(){this.list=[{name:"remove_image",type:"hint",content:"Delete",appearance:"info"},{name:"previous",type:"hint",content:"Previous",appearance:"info"},{name:"next",type:"hint",content:"Next",appearance:"info"}]}return a.prototype.registerTooltips=function(a){_.each(this.list,function(b){return a.setToolTip(b.name,_.omit(b,"name"))})},a}();angular.module("organizeMediaDialog").constant("organizeMediaDialogTooltips",new OrganizeMediaDialogTooltips).run(["ccTooltipManager","organizeMediaDialogTooltips",function(a,b){return b.registerTooltips(a)}]);var VIMEO_PARAMS={ACCESS_TOKEN:"180f85653e80e398a35769767b0fe5d6",URL_PATTERN:/^\w*(https?:\/\/)?(?:www)?vimeo\.com(?:\/channels\/\w+)?\/(\d+)$/,MAX_RESULTS:24};angular.module("organizeMediaDialog").constant("VIMEO_PARAMS",VIMEO_PARAMS);var YOUTUBE_PARAMS={API_KEY:"AIzaSyAE5uu6chqqvkw4QrEza09SLauBBNKdPoM",URL_PATTERN:/^.*(?:youtu\.be\/|v\/|u\/\w\/|embed\/|watch\?v=|\&v=)([a-z0-9-_]*).*/i,MAX_RESULTS:24};angular.module("organizeMediaDialog").constant("YOUTUBE_PARAMS",YOUTUBE_PARAMS),angular.module("organizeMediaApp").constant("wixVideos",[{relativeUri:"11062b_84f0c9aa252b4b2ab1114febc012eacb",fileUrl:"video/11062b_84f0c9aa252b4b2ab1114febc012eacb",thumbnailUrl:"http://static.wixstatic.com/media/11062b_84f0c9aa252b4b2ab1114febc012eacbf002.jpg/v1/fit/w_400,h_400/11062b_84f0c9aa252b4b2ab1114febc012eacbf002.jpg",Title:"Meadow",Description:"",mediaType:"video",active:!0,controls:void 0,fileOutput:{image:[{status:"READY",secure:!1,format:"jpg",url:"media/11062b_84f0c9aa252b4b2ab1114febc012eacbf000.jpg",height:1080,width:1920,key:"poster.0"},{status:"READY",secure:!1,format:"jpg",url:"media/11062b_84f0c9aa252b4b2ab1114febc012eacbf001.jpg",height:1080,width:1920,key:"poster.1"},{status:"READY",secure:!1,format:"jpg",url:"media/11062b_84f0c9aa252b4b2ab1114febc012eacbf002.jpg",height:1080,width:1920,key:"poster.2"},{status:"READY",secure:!1,format:"jpg",url:"media/11062b_84f0c9aa252b4b2ab1114febc012eacbf003.jpg",height:1080,width:1920,key:"poster.3"}],video:[{status:"READY",audioBitrate:-1,secure:!1,fps:25,format:"mp4",url:"video/11062b_84f0c9aa252b4b2ab1114febc012eacb/480p/mp4/file.mp4",height:480,videoBitrate:833,tag:"High",key:"480p.mp4",duration:3e4,displayAspectRatio:"16:9",quality:"480p",width:854},{status:"READY",audioBitrate:-1,secure:!1,fps:25,format:"webm",url:"video/11062b_84f0c9aa252b4b2ab1114febc012eacb/480p/webm/file.webm",height:480,videoBitrate:875,tag:"High",key:"480p.webm",duration:3e4,displayAspectRatio:"16:9",quality:"480p",width:854},{status:"READY",audioBitrate:-1,secure:!1,fps:25,format:"mp4",url:"video/11062b_84f0c9aa252b4b2ab1114febc012eacb/720p/mp4/file.mp4",height:720,videoBitrate:3311,tag:"HD",key:"720p.mp4",duration:3e4,displayAspectRatio:"16:9",quality:"720p",width:1280},{status:"READY",audioBitrate:-1,secure:!1,fps:25,format:"webm",url:"video/11062b_84f0c9aa252b4b2ab1114febc012eacb/720p/webm/file.webm",height:720,videoBitrate:3701,tag:"HD",key:"720p.webm",duration:3e4,displayAspectRatio:"16:9",quality:"720p",width:1280},{status:"READY",audioBitrate:-1,secure:!1,fps:25,format:"mp4",url:"video/11062b_84f0c9aa252b4b2ab1114febc012eacb/1080p/mp4/file.mp4",height:1080,videoBitrate:5843,tag:"HD",key:"1080p.mp4",duration:3e4,displayAspectRatio:"16:9",quality:"1080p",width:1920},{status:"READY",audioBitrate:-1,secure:!1,fps:25,format:"webm",url:"video/11062b_84f0c9aa252b4b2ab1114febc012eacb/1080p/webm/file.webm",height:1080,videoBitrate:6271,tag:"HD",key:"1080p.webm",duration:3e4,displayAspectRatio:"16:9",quality:"1080p",width:1920}]}},{relativeUri:"11062b_9480d9d800bd4bda938057d5ac1ebc42",fileUrl:"video/11062b_9480d9d800bd4bda938057d5ac1ebc42",thumbnailUrl:"http://static.wixstatic.com/media/11062b_9480d9d800bd4bda938057d5ac1ebc42f002.jpg/v1/fit/w_400,h_400/11062b_9480d9d800bd4bda938057d5ac1ebc42f002.jpg",Title:"Melting Ice",Description:"",mediaType:"video",active:!1,fileOutput:{image:[{status:"READY",secure:!1,format:"jpg",url:"media/11062b_9480d9d800bd4bda938057d5ac1ebc42f000.jpg",height:1080,width:1920,key:"poster.0"},{status:"READY",secure:!1,format:"jpg",url:"media/11062b_9480d9d800bd4bda938057d5ac1ebc42f001.jpg",height:1080,width:1920,key:"poster.1"},{status:"READY",secure:!1,format:"jpg",url:"media/11062b_9480d9d800bd4bda938057d5ac1ebc42f002.jpg",height:1080,width:1920,key:"poster.2"},{status:"READY",secure:!1,format:"jpg",url:"media/11062b_9480d9d800bd4bda938057d5ac1ebc42f003.jpg",height:1080,width:1920,key:"poster.3"}],video:[{status:"READY",audioBitrate:-1,secure:!1,fps:25,format:"mp4",url:"video/11062b_9480d9d800bd4bda938057d5ac1ebc42/480p/mp4/file.mp4",height:480,videoBitrate:827,tag:"High",key:"480p.mp4",duration:18160,displayAspectRatio:"16:9",quality:"480p",width:854},{status:"READY",audioBitrate:-1,secure:!1,fps:25,format:"webm",url:"video/11062b_9480d9d800bd4bda938057d5ac1ebc42/480p/webm/file.webm",height:480,videoBitrate:883,tag:"High",key:"480p.webm",duration:18160,displayAspectRatio:"16:9",quality:"480p",width:854},{status:"READY",audioBitrate:-1,secure:!1,fps:25,format:"mp4",url:"video/11062b_9480d9d800bd4bda938057d5ac1ebc42/720p/mp4/file.mp4",height:720,videoBitrate:3435,tag:"HD",key:"720p.mp4",duration:18160,displayAspectRatio:"16:9",quality:"720p",width:1280},{status:"READY",audioBitrate:-1,secure:!1,fps:25,format:"webm",url:"video/11062b_9480d9d800bd4bda938057d5ac1ebc42/720p/webm/file.webm",height:720,videoBitrate:3526,tag:"HD",key:"720p.webm",duration:18160,displayAspectRatio:"16:9",quality:"720p",width:1280},{status:"READY",audioBitrate:-1,secure:!1,fps:25,format:"mp4",url:"video/11062b_9480d9d800bd4bda938057d5ac1ebc42/1080p/mp4/file.mp4",height:1080,videoBitrate:5915,tag:"HD",key:"1080p.mp4",duration:18160,displayAspectRatio:"16:9",quality:"1080p",width:1920},{status:"READY",audioBitrate:-1,secure:!1,fps:25,format:"webm",url:"video/11062b_9480d9d800bd4bda938057d5ac1ebc42/1080p/webm/file.webm",height:1080,videoBitrate:6217,tag:"HD",key:"1080p.webm",duration:18160,displayAspectRatio:"16:9",quality:"1080p",width:1920}]}},{relativeUri:"11062b_41148c6b0dca4f42b8380089fd183012",fileUrl:"video/11062b_41148c6b0dca4f42b8380089fd183012",thumbnailUrl:"http://static.wixstatic.com/media/11062b_41148c6b0dca4f42b8380089fd183012f002.jpg/v1/fit/w_400,h_400/11062b_41148c6b0dca4f42b8380089fd183012f002.jpg",Title:"Underwater",Description:"",mediaType:"video",active:!1,fileOutput:{image:[{status:"READY",secure:!1,format:"jpg",url:"media/11062b_41148c6b0dca4f42b8380089fd183012f000.jpg",height:1080,width:1920,key:"poster.0"},{status:"READY",secure:!1,format:"jpg",url:"media/11062b_41148c6b0dca4f42b8380089fd183012f001.jpg",height:1080,width:1920,key:"poster.1"},{status:"READY",secure:!1,format:"jpg",url:"media/11062b_41148c6b0dca4f42b8380089fd183012f002.jpg",height:1080,width:1920,key:"poster.2"},{status:"READY",secure:!1,format:"jpg",url:"media/11062b_41148c6b0dca4f42b8380089fd183012f003.jpg",height:1080,width:1920,key:"poster.3"}],video:[{status:"READY",audioBitrate:-1,secure:!1,fps:29.97,format:"mp4",url:"video/11062b_41148c6b0dca4f42b8380089fd183012/480p/mp4/file.mp4",height:480,videoBitrate:814,tag:"High",key:"480p.mp4",duration:12612,displayAspectRatio:"16:9",quality:"480p",width:854},{status:"READY",audioBitrate:-1,secure:!1,fps:29.97,format:"webm",url:"video/11062b_41148c6b0dca4f42b8380089fd183012/480p/webm/file.webm",height:480,videoBitrate:826,tag:"High",key:"480p.webm",duration:12612,displayAspectRatio:"16:9",quality:"480p",width:854},{status:"READY",audioBitrate:-1,secure:!1,fps:29.97,format:"mp4",url:"video/11062b_41148c6b0dca4f42b8380089fd183012/720p/mp4/file.mp4",height:720,videoBitrate:3485,tag:"HD",key:"720p.mp4",duration:12612,displayAspectRatio:"16:9",quality:"720p",width:1280},{status:"READY",audioBitrate:-1,secure:!1,fps:29.97,format:"webm",url:"video/11062b_41148c6b0dca4f42b8380089fd183012/720p/webm/file.webm",height:720,videoBitrate:3501,tag:"HD",key:"720p.webm",duration:12612,displayAspectRatio:"16:9",quality:"720p",width:1280},{status:"READY",audioBitrate:-1,secure:!1,fps:29.97,format:"mp4",url:"video/11062b_41148c6b0dca4f42b8380089fd183012/1080p/mp4/file.mp4",height:1080,videoBitrate:6006,tag:"HD",key:"1080p.mp4",duration:12612,displayAspectRatio:"16:9",quality:"1080p",width:1920},{status:"READY",audioBitrate:-1,secure:!1,fps:29.97,format:"webm",url:"video/11062b_41148c6b0dca4f42b8380089fd183012/1080p/webm/file.webm",height:1080,videoBitrate:6066,tag:"HD",key:"1080p.webm",duration:12612,displayAspectRatio:"16:9",quality:"1080p",width:1920}]}}]);var MediaItems=function(){function a(){}return a.prototype.setActiveItems=function(a){this.active=a.filter(function(a){return a.active})},a.prototype.setSuggestedItems=function(a){this.suggested=a.filter(function(a){return!a.active})},a.prototype.move=function(a,b,c,d){void 0===d&&(d=-1);var e=b.indexOf(a);-1===d?c.push(a):c.splice(d,0,a),b.splice(e,1)},a.prototype.dtoToObj=function(a,b){switch(b){case"video":return new WixVideoMediaItem(a);case"extVideo":return new ExtVideoMediaItem(a);default:return angular.copy(a)}},a.prototype.setData=function(a,b,c){var d=this,e=(a||[]).map(function(a){return d.dtoToObj(a,c)});if("single"===b)for(var f=e.findIndex(function(a){return a.active}),g=0;g<e.length;g+=1)e[g].active=g===f;this.setActiveItems(e),this.setSuggestedItems(e)},a.prototype.makeActive=function(a){a.active=!0,this.move(a,this.suggested,this.active)},a.prototype.makeInactive=function(a,b){void 0===b&&(b=-1),a.active=!1,this.move(a,this.active,this.suggested,b)},a.prototype.replaceActive=function(a){var b=this,c=this.active.length>0&&"Link"in this.active[0]?this.active[0].Link:null,d=this.suggested.findIndex(this.isSameItemAs(a));this.active.forEach(function(a){"Link"in a&&(a.Link=MediaItemCreator.getEmptyLinkObj()),b.makeInactive(a,d)}),this.makeActive(a),c&&(a.Link=c)},a.prototype.getId=function(a){return"getId"in a?a.getId():a.relativeUri},a.prototype.isSameItemAs=function(a){var b=this;return function(c){return b.getId(c)===b.getId(a)}},a.prototype.addItem=function(a,b){if(!this.active.some(this.isSameItemAs(a))){var c=this.suggested.some(this.isSameItemAs(a));"gallery"===b?c?this.makeActive(this.suggested.find(this.isSameItemAs(a))):this.active.push(a):c?this.replaceActive(this.suggested.find(this.isSameItemAs(a))):(this.suggested.push(a),this.replaceActive(a))}},Object.defineProperty(a.prototype,"itemCount",{get:function(){return this.active.length},enumerable:!0,configurable:!0}),a.prototype.reorder=function(a,b){var c=this.active.findIndex(this.isSameItemAs(b)),d=this.active.splice(c,1);this.active.splice(a,0,d[0])},a.prototype.removeSuggestion=function(a){var b=this.suggested.indexOf(a);return this.suggested.splice(b,1)},Object.defineProperty(a.prototype,"activeItems",{get:function(){return this.active},enumerable:!0,configurable:!0}),Object.defineProperty(a.prototype,"suggestedItems",{get:function(){return this.suggested},enumerable:!0,configurable:!0}),a}();angular.module("organizeMediaDialog").service("mediaItems",MediaItems);var MediaUtils=function(){function a(a,b,c,d,e){this.YOUTUBE_PARAMS=a,this.VIMEO_PARAMS=b,this.mediaItemCreator=c,this.$http=d,this.$q=e}return a.$inject=["YOUTUBE_PARAMS","VIMEO_PARAMS","mediaItemCreator","$http","$q"],a.prototype.getVimeoVideoId=function(a){return(a.match(this.VIMEO_PARAMS.URL_PATTERN)||["fall","back",""])[2]},a.prototype.getYouTubeVideoId=function(a){return(a.match(this.YOUTUBE_PARAMS.URL_PATTERN)||["fallback",""])[1]},a.prototype.getVimeoVideoInfo=function(a){return this.$http.get("https://api.vimeo.com/videos/"+this.getVimeoVideoId(a),{headers:{Authorization:"bearer "+this.VIMEO_PARAMS.ACCESS_TOKEN}}).then(function(a){return a.data})},a.prototype.getYoutubeVideoInfo=function(a){var b=this;return this.$http.get("https://www.googleapis.com/youtube/v3/videos",{params:{key:this.YOUTUBE_PARAMS.API_KEY,part:"snippet",id:this.getYouTubeVideoId(a)}}).then(function(a){return a.data.items&&a.data.items.length>0?a.data.items[0]:b.$q.reject("No such video found")})},a.prototype.getNewExtVideoItem=function(a){var b=this;return a.match(this.VIMEO_PARAMS.URL_PATTERN)?this.getVimeoVideoInfo(a).then(function(a){return b.mediaItemCreator.fromVimeoVideo(a)}):this.getYoutubeVideoInfo(a).then(function(a){return b.mediaItemCreator.fromYoutubeVideo(a)})},a.prototype.getYoutubeVideos=function(a,b){var c=this;return void 0===b&&(b=""),this.$http.get("https://www.googleapis.com/youtube/v3/search",{params:{part:"snippet",q:a,type:"video",maxResults:this.YOUTUBE_PARAMS.MAX_RESULTS,pageToken:b,key:this.YOUTUBE_PARAMS.API_KEY}}).then(function(a){return{videos:a.data.items.map(function(a){return c.mediaItemCreator.fromYoutubeVideo(a)}),nextPageToken:a.data.nextPageToken}})},a.prototype.getVimeoVideos=function(a,b){var c=this;return void 0===b&&(b="1"),this.$http.get("https://api.vimeo.com/videos",{params:{per_page:this.VIMEO_PARAMS.MAX_RESULTS,query:a,page:b,sort:"relevant",filter:"CC"},headers:{Authorization:"bearer "+this.VIMEO_PARAMS.ACCESS_TOKEN}}).then(function(a){return{videos:a.data.data.map(function(a){return c.mediaItemCreator.fromVimeoVideo(a)}),nextPageToken:String(a.data.page+1)}})},a.prototype.getBIGalleryType=function(b){switch(b){case"gallery":return a.BI_GALLERY_TYPE_GALLERY;case"extVideo":return a.BI_GALLERY_TYPE_EXTERNAL_VIDEO;default:return a.BI_GALLERY_TYPE_SINGLE}},a}();MediaUtils.BI_GALLERY_TYPE_SINGLE="single item",MediaUtils.BI_GALLERY_TYPE_GALLERY="gallery",MediaUtils.BI_GALLERY_TYPE_EXTERNAL_VIDEO="external video",angular.module("organizeMediaDialog").service("mediaUtils",MediaUtils),angular.module("organizeMediaDialog").filter("trustedUrl",["$sce",function(a){return function(b){return a.trustAsResourceUrl(b)}}]);var OrganizeMediaService=function(){function a(a,b,c,d,e){this.$q=a,this.$rootScope=b,this.$mdDialog=c,this.organizeMediaBiLogger=d,this.mediaUtils=e}return a.$inject=["$q","$rootScope","$mdDialog","organizeMediaBiLogger","mediaUtils"],a.prototype.open=function(a){if(this.options=a,"extVideo"===a.type)return this.openVidSearch(a);var b=this.$rootScope.$new();return b.options=a,this.$mdDialog.show({escapeToClose:!1,template:'\n        <md-dialog class="om-app-main-container">\n          <md-dialog-content>\n            <organize-media options="options"></organize-media>\n          </md-dialog-content>\n        </md-dialog>\n      ',scope:b})},a.prototype.openVidSearch=function(a){var b=this,c=this.$rootScope.$new();return c.openVideoForeplay=this.openVideoForeplay.bind(this),c.helpPage=a.helpPage,this.$mdDialog.show({skipHide:!0,scope:c,preserveScope:!0,escapeToClose:!1,template:'\n        <md-dialog class="om-app-main-container is-video-search-container">\n          <md-dialog-content>\n            <video-search orig-video-foreplay="openVideoForeplay(item)" help-page="{{helpPage}}"></video-search>\n          </md-dialog-content>\n        </md-dialog>\n      '}).then(function(a){return a&&a.videoUrl?b.itemsToDTO([a]):b.$q.reject()})},a.prototype.openVideoForeplay=function(a){this.organizeMediaBiLogger.mediaManagement.previewMediaLoaded("extVideo",MediaUtils.BI_GALLERY_TYPE_EXTERNAL_VIDEO);var b=this.$rootScope.$new();b.videoItemToForeplay=a,this.$mdDialog.show({skipHide:!0,scope:b,escapeToClose:!1,hasBackdrop:!1,template:'\n        <md-dialog class="is-video-foreplay-container om-white-backdrop">\n          <md-dialog-content>\n            <video-foreplay item="videoItemToForeplay"></video-foreplay>\n          </md-dialog-content>\n        </md-dialog>\n      '})},a.prototype.close=function(a){var b=this.itemsToDTO(a);return this.$mdDialog.hide(b)},a.prototype.cancel=function(a){return this.$mdDialog.cancel(a)},a.prototype.itemsToDTO=function(a){var b=(a||[]).map(function(a){return"asDTO"in a?a.asDTO():a});return b},a}();angular.module("organizeMediaDialog").service("organizeMedia",OrganizeMediaService);var MediaManagementOrganizeMediaBiLogger=function(){function a(a,b,c){this.consumerBiLoggerHelpers=a,this.clientTopology=b,this.mainHelper=c}return a.prototype.replaceMediaWindowIsLoaded=function(a,b,c,d){try{var e=this.consumerBiLoggerHelpers.getInstanceId(),f=this.consumerBiLoggerHelpers.getMetaSiteId(),g=this.consumerBiLoggerHelpers.getStoryRevision(),h=this.consumerBiLoggerHelpers.getStructureId(),i=this.consumerBiLoggerHelpers.getIndustryId(),j=this.consumerBiLoggerHelpers.getEsi(),k=this.consumerBiLoggerHelpers.getEditMode(),l=this.consumerBiLoggerHelpers.organizeMediaNode.getId(),m=this.consumerBiLoggerHelpers.organizeMediaNode.contentElementType,n=this.consumerBiLoggerHelpers.organizeMediaNode.alias,o=this.consumerBiLoggerHelpers.getPageId();return this.mainHelper.validateString(e),this.mainHelper.validateGuid(f),this.mainHelper.validateNumber(g),this.mainHelper.validateString(h),this.mainHelper.validateString(i),this.mainHelper.validateGuid(j),this.mainHelper.validateString(k),this.mainHelper.validateString(l),this.mainHelper.validateString(m),this.mainHelper.validateString(n),this.mainHelper.validateString(o),this.mainHelper.validateString(a),this.mainHelper.validateString(b),this.mainHelper.validateString(c),this.mainHelper.validateNumber(d),this.mainHelper.log({instanceId:e,msid:f,revision:g,structureId:h,industryId:i,esi:j,editMode:k,nodeId:l,sectionType:m,sectionAlias:n,pageId:o,mediaType:a,galleryType:b,origin:c,numTotal:d,evid:400})}catch(p){this.mainHelper.onError("BISafe: failed to report mediaManagement.replaceMediaWindowIsLoaded",p)}},a.prototype.closeMediaWindow=function(a,b,c){try{var d=this.consumerBiLoggerHelpers.getInstanceId(),e=this.consumerBiLoggerHelpers.getMetaSiteId(),f=this.consumerBiLoggerHelpers.getStoryRevision(),g=this.consumerBiLoggerHelpers.getStructureId(),h=this.consumerBiLoggerHelpers.getIndustryId(),i=this.consumerBiLoggerHelpers.getEsi(),j=this.consumerBiLoggerHelpers.getEditMode(),k=this.consumerBiLoggerHelpers.organizeMediaNode.getId(),l=this.consumerBiLoggerHelpers.organizeMediaNode.contentElementType,m=this.consumerBiLoggerHelpers.organizeMediaNode.alias,n=this.consumerBiLoggerHelpers.getPageId();return this.mainHelper.validateString(d),this.mainHelper.validateGuid(e),this.mainHelper.validateNumber(f),this.mainHelper.validateString(g),this.mainHelper.validateString(h),this.mainHelper.validateGuid(i),this.mainHelper.validateString(j),this.mainHelper.validateString(k),this.mainHelper.validateString(l),this.mainHelper.validateString(m),this.mainHelper.validateString(n),this.mainHelper.validateString(a),this.mainHelper.validateString(b),this.mainHelper.validateString(c),this.mainHelper.log({instanceId:d,msid:e,revision:f,structureId:g,industryId:h,esi:i,editMode:j,nodeId:k,sectionType:l,sectionAlias:m,pageId:n,mediaType:a,galleryType:b,origin:c,evid:401})}catch(o){this.mainHelper.onError("BISafe: failed to report mediaManagement.closeMediaWindow",o)}},a.prototype.approveChangesInTheMediaWindow=function(a,b,c,d){try{var e=this.consumerBiLoggerHelpers.getInstanceId(),f=this.consumerBiLoggerHelpers.getMetaSiteId(),g=this.consumerBiLoggerHelpers.getStoryRevision(),h=this.consumerBiLoggerHelpers.getStructureId(),i=this.consumerBiLoggerHelpers.getIndustryId(),j=this.consumerBiLoggerHelpers.getEsi(),k=this.consumerBiLoggerHelpers.getEditMode(),l=this.consumerBiLoggerHelpers.organizeMediaNode.getId(),m=this.consumerBiLoggerHelpers.organizeMediaNode.contentElementType,n=this.consumerBiLoggerHelpers.organizeMediaNode.alias,o=this.consumerBiLoggerHelpers.getPageId();return this.mainHelper.validateString(a),this.mainHelper.validateString(e),this.mainHelper.validateGuid(f),this.mainHelper.validateNumber(g),this.mainHelper.validateString(h),this.mainHelper.validateString(i),this.mainHelper.validateGuid(j),this.mainHelper.validateString(k),this.mainHelper.validateString(l),this.mainHelper.validateString(m),this.mainHelper.validateString(n),this.mainHelper.validateString(o),this.mainHelper.validateString(b),this.mainHelper.validateString(c),this.mainHelper.validateNumber(d),this.mainHelper.log({origin:a,instanceId:e,msid:f,revision:g,structureId:h,industryId:i,esi:j,editMode:k,nodeId:l,sectionType:m,sectionAlias:n,pageId:o,mediaType:b,galleryType:c,numTotal:d,evid:402})}catch(p){this.mainHelper.onError("BISafe: failed to report mediaManagement.approveChangesInTheMediaWindow",p)}},a.prototype.galleryOrganizerClickAddMoreMedia=function(){try{var a=this.consumerBiLoggerHelpers.getInstanceId(),b=this.consumerBiLoggerHelpers.getMetaSiteId(),c=this.consumerBiLoggerHelpers.getStoryRevision(),d=this.consumerBiLoggerHelpers.getStructureId(),e=this.consumerBiLoggerHelpers.getIndustryId(),f=this.consumerBiLoggerHelpers.getEsi(),g=this.consumerBiLoggerHelpers.getEditMode(),h=this.consumerBiLoggerHelpers.organizeMediaNode.getId(),i=this.consumerBiLoggerHelpers.organizeMediaNode.contentElementType,j=this.consumerBiLoggerHelpers.organizeMediaNode.alias,k=this.consumerBiLoggerHelpers.getPageId();return this.mainHelper.validateString(a),this.mainHelper.validateGuid(b),this.mainHelper.validateNumber(c),this.mainHelper.validateString(d),this.mainHelper.validateString(e),this.mainHelper.validateGuid(f),this.mainHelper.validateString(g),this.mainHelper.validateString(h),this.mainHelper.validateString(i),this.mainHelper.validateString(j),this.mainHelper.validateString(k),this.mainHelper.log({instanceId:a,msid:b,revision:c,structureId:d,industryId:e,esi:f,editMode:g,nodeId:h,sectionType:i,sectionAlias:j,pageId:k,evid:403})}catch(l){this.mainHelper.onError("BISafe: failed to report mediaManagement.galleryOrganizerClickAddMoreMedia",l)}},a.prototype.galleryOrganizerMediaAddedToOrganizer=function(a,b){try{var c=this.consumerBiLoggerHelpers.getInstanceId(),d=this.consumerBiLoggerHelpers.getMetaSiteId(),e=this.consumerBiLoggerHelpers.getStoryRevision(),f=this.consumerBiLoggerHelpers.getStructureId(),g=this.consumerBiLoggerHelpers.getIndustryId(),h=this.consumerBiLoggerHelpers.getEsi(),i=this.consumerBiLoggerHelpers.getEditMode(),j=this.consumerBiLoggerHelpers.organizeMediaNode.getId(),k=this.consumerBiLoggerHelpers.organizeMediaNode.contentElementType,l=this.consumerBiLoggerHelpers.organizeMediaNode.alias,m=this.consumerBiLoggerHelpers.getPageId();return this.mainHelper.validateString(c),this.mainHelper.validateGuid(d),this.mainHelper.validateNumber(e),this.mainHelper.validateString(f),this.mainHelper.validateString(g),this.mainHelper.validateGuid(h),this.mainHelper.validateString(i),this.mainHelper.validateString(j),this.mainHelper.validateString(k),this.mainHelper.validateString(l),this.mainHelper.validateString(m),this.mainHelper.validateNumber(a),this.mainHelper.validateNumber(b),this.mainHelper.log({instanceId:c,msid:d,revision:e,structureId:f,industryId:g,esi:h,editMode:i,nodeId:j,sectionType:k,sectionAlias:l,pageId:m,numAdded:a,numTotal:b,evid:404})}catch(n){this.mainHelper.onError("BISafe: failed to report mediaManagement.galleryOrganizerMediaAddedToOrganizer",n)}},a.prototype.galleryOrganizerDeleteMedia=function(a){try{var b=this.consumerBiLoggerHelpers.getInstanceId(),c=this.consumerBiLoggerHelpers.getMetaSiteId(),d=this.consumerBiLoggerHelpers.getStoryRevision(),e=this.consumerBiLoggerHelpers.getStructureId(),f=this.consumerBiLoggerHelpers.getIndustryId(),g=this.consumerBiLoggerHelpers.getEsi(),h=this.consumerBiLoggerHelpers.getEditMode(),i=this.consumerBiLoggerHelpers.organizeMediaNode.getId(),j=this.consumerBiLoggerHelpers.organizeMediaNode.contentElementType,k=this.consumerBiLoggerHelpers.organizeMediaNode.alias,l=this.consumerBiLoggerHelpers.getPageId();return this.mainHelper.validateString(b),this.mainHelper.validateGuid(c),this.mainHelper.validateNumber(d),this.mainHelper.validateString(e),this.mainHelper.validateString(f),
this.mainHelper.validateGuid(g),this.mainHelper.validateString(h),this.mainHelper.validateString(i),this.mainHelper.validateString(j),this.mainHelper.validateString(k),this.mainHelper.validateString(l),this.mainHelper.validateNumber(a),this.mainHelper.log({instanceId:b,msid:c,revision:d,structureId:e,industryId:f,esi:g,editMode:h,nodeId:i,sectionType:j,sectionAlias:k,pageId:l,numTotal:a,evid:405})}catch(m){this.mainHelper.onError("BISafe: failed to report mediaManagement.galleryOrganizerDeleteMedia",m)}},a.prototype.externalVideoSearchVideoClick=function(a,b){try{var c=this.consumerBiLoggerHelpers.getInstanceId(),d=this.consumerBiLoggerHelpers.getMetaSiteId(),e=this.consumerBiLoggerHelpers.getStoryRevision(),f=this.consumerBiLoggerHelpers.getStructureId(),g=this.consumerBiLoggerHelpers.getIndustryId(),h=this.consumerBiLoggerHelpers.getEsi(),i=this.consumerBiLoggerHelpers.getEditMode(),j=this.consumerBiLoggerHelpers.organizeMediaNode.getId(),k=this.consumerBiLoggerHelpers.organizeMediaNode.contentElementType,l=this.consumerBiLoggerHelpers.organizeMediaNode.alias,m=this.consumerBiLoggerHelpers.getPageId();return this.mainHelper.validateString(c),this.mainHelper.validateGuid(d),this.mainHelper.validateNumber(e),this.mainHelper.validateString(f),this.mainHelper.validateString(g),this.mainHelper.validateGuid(h),this.mainHelper.validateString(i),this.mainHelper.validateString(j),this.mainHelper.validateString(k),this.mainHelper.validateString(l),this.mainHelper.validateString(m),this.mainHelper.validateString(a),this.mainHelper.validateString(b),this.mainHelper.log({instanceId:c,msid:d,revision:e,structureId:f,industryId:g,esi:h,editMode:i,nodeId:j,sectionType:k,sectionAlias:l,pageId:m,source:a,text:b,evid:406})}catch(n){this.mainHelper.onError("BISafe: failed to report mediaManagement.externalVideoSearchVideoClick",n)}},a.prototype.externalVideoSearchCompleted=function(a,b,c){try{var d=this.consumerBiLoggerHelpers.getInstanceId(),e=this.consumerBiLoggerHelpers.getMetaSiteId(),f=this.consumerBiLoggerHelpers.getStoryRevision(),g=this.consumerBiLoggerHelpers.getStructureId(),h=this.consumerBiLoggerHelpers.getIndustryId(),i=this.consumerBiLoggerHelpers.getEsi(),j=this.consumerBiLoggerHelpers.getEditMode(),k=this.consumerBiLoggerHelpers.organizeMediaNode.getId(),l=this.consumerBiLoggerHelpers.organizeMediaNode.contentElementType,m=this.consumerBiLoggerHelpers.organizeMediaNode.alias,n=this.consumerBiLoggerHelpers.getPageId();return this.mainHelper.validateString(d),this.mainHelper.validateGuid(e),this.mainHelper.validateNumber(f),this.mainHelper.validateString(g),this.mainHelper.validateString(h),this.mainHelper.validateGuid(i),this.mainHelper.validateString(j),this.mainHelper.validateString(k),this.mainHelper.validateString(l),this.mainHelper.validateString(m),this.mainHelper.validateString(n),this.mainHelper.validateString(a),this.mainHelper.validateString(b),this.mainHelper.validateNumber(c),this.mainHelper.log({instanceId:d,msid:e,revision:f,structureId:g,industryId:h,esi:i,editMode:j,nodeId:k,sectionType:l,sectionAlias:m,pageId:n,source:a,text:b,"returnedResults ":c,evid:407})}catch(o){this.mainHelper.onError("BISafe: failed to report mediaManagement.externalVideoSearchCompleted",o)}},a.prototype.externalVideoSwitchSearchSource=function(a){try{var b=this.consumerBiLoggerHelpers.getInstanceId(),c=this.consumerBiLoggerHelpers.getMetaSiteId(),d=this.consumerBiLoggerHelpers.getStoryRevision(),e=this.consumerBiLoggerHelpers.getStructureId(),f=this.consumerBiLoggerHelpers.getIndustryId(),g=this.consumerBiLoggerHelpers.getEsi(),h=this.consumerBiLoggerHelpers.getEditMode(),i=this.consumerBiLoggerHelpers.organizeMediaNode.getId(),j=this.consumerBiLoggerHelpers.organizeMediaNode.contentElementType,k=this.consumerBiLoggerHelpers.organizeMediaNode.alias,l=this.consumerBiLoggerHelpers.getPageId();return this.mainHelper.validateString(b),this.mainHelper.validateGuid(c),this.mainHelper.validateNumber(d),this.mainHelper.validateString(e),this.mainHelper.validateString(f),this.mainHelper.validateGuid(g),this.mainHelper.validateString(h),this.mainHelper.validateString(i),this.mainHelper.validateString(j),this.mainHelper.validateString(k),this.mainHelper.validateString(l),this.mainHelper.validateString(a),this.mainHelper.log({instanceId:b,msid:c,revision:d,structureId:e,industryId:f,esi:g,editMode:h,nodeId:i,sectionType:j,sectionAlias:k,pageId:l,source:a,evid:408})}catch(m){this.mainHelper.onError("BISafe: failed to report mediaManagement.externalVideoSwitchSearchSource",m)}},a.prototype.previewMediaClick=function(a,b){try{var c=this.consumerBiLoggerHelpers.getInstanceId(),d=this.consumerBiLoggerHelpers.getMetaSiteId(),e=this.consumerBiLoggerHelpers.getStoryRevision(),f=this.consumerBiLoggerHelpers.getStructureId(),g=this.consumerBiLoggerHelpers.getIndustryId(),h=this.consumerBiLoggerHelpers.getEsi(),i=this.consumerBiLoggerHelpers.getEditMode(),j=this.consumerBiLoggerHelpers.organizeMediaNode.getId(),k=this.consumerBiLoggerHelpers.organizeMediaNode.contentElementType,l=this.consumerBiLoggerHelpers.organizeMediaNode.alias,m=this.consumerBiLoggerHelpers.getPageId();return this.mainHelper.validateString(c),this.mainHelper.validateGuid(d),this.mainHelper.validateNumber(e),this.mainHelper.validateString(f),this.mainHelper.validateString(g),this.mainHelper.validateGuid(h),this.mainHelper.validateString(i),this.mainHelper.validateString(j),this.mainHelper.validateString(k),this.mainHelper.validateString(l),this.mainHelper.validateString(m),this.mainHelper.validateString(a),this.mainHelper.validateString(b),this.mainHelper.log({instanceId:c,msid:d,revision:e,structureId:f,industryId:g,esi:h,editMode:i,nodeId:j,sectionType:k,sectionAlias:l,pageId:m,mediaType:a,galleryType:b,evid:409})}catch(n){this.mainHelper.onError("BISafe: failed to report mediaManagement.previewMediaClick",n)}},a.prototype.previewMediaLoaded=function(a,b){try{var c=this.consumerBiLoggerHelpers.getInstanceId(),d=this.consumerBiLoggerHelpers.getMetaSiteId(),e=this.consumerBiLoggerHelpers.getStoryRevision(),f=this.consumerBiLoggerHelpers.getStructureId(),g=this.consumerBiLoggerHelpers.getIndustryId(),h=this.consumerBiLoggerHelpers.getEsi(),i=this.consumerBiLoggerHelpers.getEditMode(),j=this.consumerBiLoggerHelpers.organizeMediaNode.getId(),k=this.consumerBiLoggerHelpers.organizeMediaNode.contentElementType,l=this.consumerBiLoggerHelpers.organizeMediaNode.alias,m=this.consumerBiLoggerHelpers.getPageId();return this.mainHelper.validateString(c),this.mainHelper.validateGuid(d),this.mainHelper.validateNumber(e),this.mainHelper.validateString(f),this.mainHelper.validateString(g),this.mainHelper.validateGuid(h),this.mainHelper.validateString(i),this.mainHelper.validateString(j),this.mainHelper.validateString(k),this.mainHelper.validateString(l),this.mainHelper.validateString(m),this.mainHelper.validateString(a),this.mainHelper.validateString(b),this.mainHelper.log({instanceId:c,msid:d,revision:e,structureId:f,industryId:g,esi:h,editMode:i,nodeId:j,sectionType:k,sectionAlias:l,pageId:m,mediaType:a,galleryType:b,evid:410})}catch(n){this.mainHelper.onError("BISafe: failed to report mediaManagement.previewMediaLoaded",n)}},a.prototype.mediaSettingsFieldWasUpdated=function(a,b,c,d,e,f){try{var g=this.consumerBiLoggerHelpers.getInstanceId(),h=this.consumerBiLoggerHelpers.getMetaSiteId(),i=this.consumerBiLoggerHelpers.getStoryRevision(),j=this.consumerBiLoggerHelpers.getStructureId(),k=this.consumerBiLoggerHelpers.getIndustryId(),l=this.consumerBiLoggerHelpers.getEsi(),m=this.consumerBiLoggerHelpers.getEditMode(),n=this.consumerBiLoggerHelpers.organizeMediaNode.getId(),o=this.consumerBiLoggerHelpers.organizeMediaNode.contentElementType,p=this.consumerBiLoggerHelpers.organizeMediaNode.alias,q=this.consumerBiLoggerHelpers.getPageId();return this.mainHelper.validateString(g),this.mainHelper.validateGuid(h),this.mainHelper.validateNumber(i),this.mainHelper.validateString(j),this.mainHelper.validateString(k),this.mainHelper.validateGuid(l),this.mainHelper.validateString(m),this.mainHelper.validateString(n),this.mainHelper.validateString(o),this.mainHelper.validateString(p),this.mainHelper.validateString(q),this.mainHelper.validateString(a),this.mainHelper.validateString(b),this.mainHelper.validateString(c),this.mainHelper.validateString(d),this.mainHelper.validateString(e),this.mainHelper.validateNumber(f),this.mainHelper.log({instanceId:g,msid:h,revision:i,structureId:j,industryId:k,esi:l,editMode:m,nodeId:n,sectionType:o,sectionAlias:p,pageId:q,mediaType:a,galleryType:b,fieldName:c,fieldType:d,fieldValue:e,fieldLength:f,evid:412})}catch(r){this.mainHelper.onError("BISafe: failed to report mediaManagement.mediaSettingsFieldWasUpdated",r)}},a.prototype.galleryOrganizerCloseAddMoreMediaWindow=function(){try{var a=this.consumerBiLoggerHelpers.getEditMode(),b=this.consumerBiLoggerHelpers.getEsi(),c=this.consumerBiLoggerHelpers.getIndustryId(),d=this.consumerBiLoggerHelpers.getInstanceId(),e=this.consumerBiLoggerHelpers.getMetaSiteId(),f=this.consumerBiLoggerHelpers.organizeMediaNode.getId(),g=this.consumerBiLoggerHelpers.getPageId(),h=this.consumerBiLoggerHelpers.getStoryRevision(),i=this.consumerBiLoggerHelpers.organizeMediaNode.alias,j=this.consumerBiLoggerHelpers.organizeMediaNode.contentElementType,k=this.consumerBiLoggerHelpers.getStructureId();return this.mainHelper.validateString(a),this.mainHelper.validateGuid(b),this.mainHelper.validateString(c),this.mainHelper.validateString(d),this.mainHelper.validateGuid(e),this.mainHelper.validateString(f),this.mainHelper.validateString(g),this.mainHelper.validateNumber(h),this.mainHelper.validateString(i),this.mainHelper.validateString(j),this.mainHelper.validateString(k),this.mainHelper.log({editMode:a,esi:b,industryId:c,instanceId:d,msid:e,nodeId:f,pageId:g,revision:h,sectionAlias:i,sectionType:j,structureId:k,evid:414})}catch(l){this.mainHelper.onError("BISafe: failed to report mediaManagement.galleryOrganizerCloseAddMoreMediaWindow",l)}},a}(),OrganizeMediaBiLogger=function(){function a(a,b,c){var d=function(a,c){b.production||console.error(a,c)},e={validateNumber:function(a){null===a||isFinite(a)||d("invalid number",a)},validateString:function(a){null!==a&&"string"!=typeof a&&d("Invalid string",a)},validateGuid:function(a){null===a||"string"==typeof a&&/^[a-f0-9]{8}-[a-f0-9]{4}-[a-f0-9]{4}-[a-f0-9]{4}-[a-f0-9]{12}$/.test(a.toLowerCase())||d("Invalid guid",a)},onError:d,log:function(a){return a.src=66,c.log(_.pick(a,function(a){return null!==a}))}};this.mediaManagement=new MediaManagementOrganizeMediaBiLogger(a,b,e)}return a.$inject=["consumerBiLoggerHelpers","clientTopology","wixBiLogger"],a}();angular.module("organizeMediaDialog").service("organizeMediaBiLogger",OrganizeMediaBiLogger);var PreviewUrls=function(){function a(a){this.MEDIA_ITEM_SIZES=a}return a.$inject=["MEDIA_ITEM_SIZES"],a.prototype.getShapePreviewUrl=function(a){return"https://static.wixstatic.com/"+("svg"===a.substr(a.length-3)?a:a.substr(0,a.length-2)+"svg")},a.prototype.getImagePreviewUrl=function(a,b){switch(b){case"shape":return this.getShapePreviewUrl(a);default:return"https://static.wixstatic.com/media/"+a+"_srz_p_"+this.MEDIA_ITEM_SIZES.imagePreview.width+"_"+this.MEDIA_ITEM_SIZES.imagePreview.height+"_75_22_0.50_1.20_0.00_jpg_srz"}},a.prototype.getImagePreviewPopupUrl=function(a,b){switch(b){case"shape":return this.getShapePreviewUrl(a);default:return"https://static.wixstatic.com/media/"+a+"/v1/fit/w_"+this.MEDIA_ITEM_SIZES.imagePreviewPopup.width+",h_"+this.MEDIA_ITEM_SIZES.imagePreviewPopup.height+"/"+a}},a.prototype.getImageThumbnailUrl=function(a,b){switch(b){case"shape":return this.getShapePreviewUrl(a);default:return"https://static.wixstatic.com/media/"+a+"_srz_p_"+this.MEDIA_ITEM_SIZES.imageThumbnail.width+"_"+this.MEDIA_ITEM_SIZES.imageThumbnail.height+"_75_22_0.50_1.20_0.00_jpg_srz"}},a.prototype.getWixVideoThumbnailUrl=function(a){var b=a.split("/")[1];return"https://static.wixstatic.com/"+a+"/v1/fit/w_"+this.MEDIA_ITEM_SIZES.wixVideoThumbnail.width+",h_"+this.MEDIA_ITEM_SIZES.wixVideoThumbnail.height+"/"+b},a}();angular.module("organizeMediaDialog").service("previewUrls",PreviewUrls),angular.module("organizeMediaDialog").component("addMoreButton",{templateUrl:"views/add-more-button.html",bindings:{itemType:"@"}});var EditLink=function(){function a(a){this.$mdDialog=a,this.linkClone=angular.copy(this.item.Link),this.functions=this.editLinkCallback({selector:".om-link-editor-placeholder",linkObj:this.linkClone})}return a.$inject=["$mdDialog"],a.prototype.done=function(){var a=this;return this.functions&&"save"in this.functions?this.functions.save().then(function(b){return a.$mdDialog.hide(b)}):this.$mdDialog.hide(this.linkClone)},a.prototype.close=function(a){return this.$mdDialog.hide(this.item.Link)},a.prototype.cancel=function(a){return this.$mdDialog.hide(this.item.Link)},a}();angular.module("organizeMediaDialog").component("editLink",{templateUrl:"views/edit-link.html",controller:EditLink,bindings:{item:"=",editLinkCallback:"&"}});var ImageCarousel=function(){function a(a){this.previewUrls=a}return a.$inject=["previewUrls"],a.prototype.getItemForMediaPreview=function(a){var b=angular.copy(a);return"picture"===b.mediaType&&(b.mediaType="image"),b},a.prototype.getPreviewUrl=function(){return this.previewUrls.getImagePreviewUrl(this.item.relativeUri,this.item.mediaType)},a}();angular.module("organizeMediaDialog").component("imageCarousel",{templateUrl:"views/image-carousel.html",controller:ImageCarousel,bindings:{item:"=",showNav:"=",onPrev:"&",onNext:"&"}});var ImageItem=function(){function a(a){this.previewUrls=a}return a.$inject=["previewUrls"],a.prototype.getPreviewUrl=function(){return this.previewUrls.getImageThumbnailUrl(this.item.relativeUri,this.item.mediaType)},a}();angular.module("organizeMediaDialog").component("imageItem",{templateUrl:"views/image-item.html",controller:ImageItem,bindings:{index:"=",item:"=",onRemove:"&"}});var ImageItemDetails=function(){function a(a,b,c,d){var e=this;this.$mdDialog=a,this.$element=b,this.$scope=c,this.organizeMediaBiLogger=d,this.updateILink(),c.$watch("$ctrl.item.Link",function(){return e.updateILink()})}return a.$inject=["$mdDialog","$element","$scope","organizeMediaBiLogger"],a.prototype.updateILink=function(){this.linkAsILink=this.linkDetailsHandler.linkDetailsToILink(this.item.Link)},a.mockLinkDetailsToILink=function(a){return{state:!!a.targetUrl,value:a.targetUrl}},a.prototype.openLinkEditor=function(){var a=this;this.$mdDialog.show({parent:this.$element,skipHide:!0,scope:this.$scope,preserveScope:!0,escapeToClose:!1,hasBackdrop:!1,template:'\n        <md-dialog class="om-app-main-container is-link-editor-container om-white-backdrop">\n          <md-dialog-content>\n            <edit-link item="$ctrl.item" edit-link-callback="$ctrl.linkDetailsHandler.editLinkCallback(selector, linkObj)"></edit-link>\n          </md-dialog-content>\n        </md-dialog>\n      '}).then(function(b){if(b){a.item.Link=b,a.updateILink();var c=b;a.organizeMediaBiLogger.mediaManagement.mediaSettingsFieldWasUpdated("image",MediaUtils.BI_GALLERY_TYPE_GALLERY,"link","link",null,c.url?c.url.length:0)}})},a.prototype.onTitleChange=function(a){this.organizeMediaBiLogger.mediaManagement.mediaSettingsFieldWasUpdated("image",MediaUtils.BI_GALLERY_TYPE_GALLERY,"title","text",null,a?a.length:0)},a.prototype.onDescriptionChange=function(a){this.organizeMediaBiLogger.mediaManagement.mediaSettingsFieldWasUpdated("image",MediaUtils.BI_GALLERY_TYPE_GALLERY,"description","text",null,a?a.length:0)},a}();angular.module("organizeMediaDialog").component("imageItemDetails",{templateUrl:"views/image-item-details.html",controller:ImageItemDetails,bindings:{item:"=",linkDetailsHandler:"=",onPrev:"&",onNext:"&",showCarouselNav:"="}});var ImagePreviewPopup=function(){function a(a,b,c){this.previewUrls=a,this.$element=b,this.MEDIA_ITEM_SIZES=c}return a.$inject=["previewUrls","$element","MEDIA_ITEM_SIZES"],a.prototype.calcPreviewImgSize=function(){var a;return a=this.item.width/this.MEDIA_ITEM_SIZES.imagePreviewPopup.width<this.item.height/this.MEDIA_ITEM_SIZES.imagePreviewPopup.height?this.MEDIA_ITEM_SIZES.imagePreviewPopup.height/this.item.height:this.MEDIA_ITEM_SIZES.imagePreviewPopup.width/this.item.width,a=Math.min(1,a),{width:(this.item.width||this.MEDIA_ITEM_SIZES.imagePreviewPopup.width)*a,height:(this.item.height||this.MEDIA_ITEM_SIZES.imagePreviewPopup.height)*a}},a.prototype.getPreviewPopupUrl=function(){return this.item?this.previewUrls.getImagePreviewPopupUrl(this.item.relativeUri,this.item.mediaType):""},a.prototype.createPopup=function(){this.popupId="id_"+Math.random();var a=this.calcPreviewImgSize(),b="<div id='"+this.popupId+"' class='om-image-preview-popup-box' data-hook='om-image-preview-popup-box' style=\"position: absolute\">\n        <img data-hook='om-image-preview-popup-img' src='"+this.getPreviewPopupUrl()+"' width='"+a.width+"' height='"+a.height+"'\">\n        <div class='caption' data-hook='om-image-preview-popup-img-title'>"+this.item.Title+"</div>\n        <div class='caption' data-hook='om-image-preview-popup-img-dims' "+(0===this.item.width?"hidden":"")+">"+this.item.width+" x "+this.item.height+"</div>\n      </div>";$("body").append(b)},a.prototype.popupElement=function(){return $('[id="'+this.popupId+'"]')},a.prototype.organizeMediaContainer=function(){return $(".om-app-main")},a.prototype.calcPopupPosition=function(){var a=this.organizeMediaContainer()[0].getBoundingClientRect(),b=this.$element[0].getBoundingClientRect(),c=this.popupElement()[0].getBoundingClientRect(),d=7,e=b.left+b.width+d;e+c.width+d>a.right&&c.width+d<b.left&&(e=b.left-c.width-d);var f=b.top+b.height+d;f+c.height>a.bottom&&(f=a.top+Math.max(0,a.height-d-c.height)),this.popupElement().css({opacity:1,left:e+"px",top:f+"px"})},a.prototype.showPopup=function(){this.createPopup(),this.calcPopupPosition()},a.prototype.removePopup=function(){this.popupElement().remove()},a}();angular.module("organizeMediaDialog").component("imagePreviewPopup",{templateUrl:"views/image-preview-popup.html",controller:ImagePreviewPopup,transclude:!0,bindings:{item:"="}});var OrganizeMedia=function(){function a(a,b,c,d,e,f,g,h,i){this.organizeMedia=a,this.mediaItems=b,this.mediaUtils=c,this.mediaItemCreator=d,this.$window=e,this.$scope=f,this.CcDialogBuilder=g,this.organizeMediaBiLogger=h,this.MEDIA_GALLERY_PARAMS=i,this.title="",this.subtitle="",this.suggestionsTitle="",this.mediaType="",this.title=this.options.title,this.subtitle=this.options.subtitle,this.suggestionsTitle=this.options.suggestionsTitle,this.mediaType=this.options.type,this.selectionMode=this.options.mode||"single",this.linkDetailsHandler=this.options.linkDetailsHandler||{editLinkCallback:void 0,linkDetailsToILink:function(a){return{state:!0,value:"can't add link"}}},this.mediaGalleryHelpPage=this.options.mediaGalleryHelpPage,this.helpPage=this.options.helpPage,this.customData=this.options.customData,this.mediaGalleryCSSOverridesURL=this.options.mediaGalleryCSSOverridesURL,this.setViewMode(this.mediaType),b.setData(this.options.dataSource,this.selectionMode,this.mediaType),this.items=b.activeItems,this.suggestedItems=b.suggestedItems,this.selected=this.items.length>0?this.items[0]:null,this.prepareMediaGallery(),this.options=null,this.onMediaGalleryApproveBound=this.onMediaGalleryApprove.bind(this),this.onMediaGalleryCancelBound=this.onMediaGalleryCancel.bind(this)}return a.$inject=["organizeMedia","mediaItems","mediaUtils","mediaItemCreator","$window","$scope","CcDialogBuilder","organizeMediaBiLogger","MEDIA_GALLERY_PARAMS"],a.prototype.getMediaGalleryParams=function(){var a=angular.copy(this.MEDIA_GALLERY_PARAMS.DEFAULTS);return a.publicMediaRoot=this.getPublicMediaRoot(),a.mediaType=this.getGalleryMediaType(),a.i18nPrefix=this.getGalleryStringsSelector(),"video"===this.mediaType&&(a.tabsList=["private","public"]),this.customData&&(a.customData=this.customData,a.tabsList.unshift("custom"),a.path="custom"),this.mediaGalleryHelpPage&&(a.translations={help_url:this.mediaGalleryHelpPage}),this.mediaGalleryCSSOverridesURL&&(a.cssUrl=this.mediaGalleryCSSOverridesURL),a},a.prototype.prepareMediaGallery=function(){if(void 0===this.$window.MediaFrame)throw new Error("Media Frame object is not found. Check that media gallery project is included.");this.$window.MediaFrame.warmup()},a.prototype.setViewMode=function(a){switch(a){case"video":case"extVideo":this.viewMode="video";break;case"image":case"shape":case"clipart":default:this.viewMode="image"}},a.prototype.getPublicMediaRoot=function(){switch(this.mediaType){case"shape":return"shapes";case"clipart":return"clipart";case"video":return"videos";case"image":default:return"photos"}},a.prototype.getGalleryMediaType=function(){switch(this.mediaType){case"video":return"video";case"image":case"shape":case"clipart":default:return"picture"}},a.prototype.getMediaTypeName=function(){switch(this.mediaType){case"video":case"extVideo":return"video";case"image":return"image";case"shape":return"shape";case"clipart":return"clipart";default:return"item"}},a.prototype.getGalleryStringsSelector=function(){switch(this.selectionMode){case"single":switch(this.mediaType){case"video":case"extVideo":return"video";case"shape":return"shape";case"clipart":return"clipart";case"image":default:return"single_image"}case"gallery":default:switch(this.mediaType){case"video":case"extVideo":return"addmultiple_video";case"shape":return"addmultiple_shape";case"clipart":return"addmultiple_clipart";case"image":default:return"multiple_images"}}},a.prototype.close=function(){this.organizeMedia.cancel()},a.prototype.done=function(){this.organizeMedia.close(this.items.concat(this.suggestedItems))},a.prototype.cancel=function(){this.organizeMedia.cancel()},a.prototype.isDoneEnabled=function(){var a="gallery"===this.selectionMode?2:1;return this.items.length>=a},a.prototype.updateSelectedItem=function(a){void 0===a&&(a=-1),this.items.length>0?-1!==a?this.selected=this.items[Math.min(a,this.items.length-1)]:this.selected=this.items[this.items.length-1]:this.selected=null},a.prototype.makeActive=function(a){"single"===this.selectionMode?this.mediaItems.replaceActive(a):(this.mediaItems.makeActive(a),this.organizeMediaBiLogger.mediaManagement.galleryOrganizerMediaAddedToOrganizer(1,this.mediaItems.itemCount)),this.updateSelectedItem(this.curSelectedPos())},a.prototype.makeInactive=function(a){var b=this.curSelectedPos();this.mediaItems.makeInactive(a),a===this.selected&&this.updateSelectedItem(b),this.organizeMediaBiLogger.mediaManagement.galleryOrganizerDeleteMedia(this.mediaItems.itemCount)},a.prototype.replaceActive=function(a){this.mediaItems.replaceActive(a),this.selected=this.items[0]},a.prototype.removeSuggestion=function(a){this.mediaItems.removeSuggestion(a)},Object.defineProperty(a.prototype,"suggestedActionText",{get:function(){return"single"===this.selectionMode?"Replace "+this.getMediaTypeName():"Add to gallery"},enumerable:!0,configurable:!0}),a.prototype.openMediaGallery=function(){this.organizeMediaBiLogger.mediaManagement.galleryOrganizerClickAddMoreMedia(),this.$window.MediaFrame.one("items",this.onMediaGalleryApproveBound),this.$window.MediaFrame.one("close",this.onMediaGalleryCancelBound),this.$window.MediaFrame.open(this.getMediaGalleryParams()),this.organizeMediaBiLogger.mediaManagement.replaceMediaWindowIsLoaded(this.mediaType,"gallery","gallery organizer",this.mediaItems.itemCount)},a.prototype.onMediaGalleryCancel=function(){this.$window.MediaFrame.off("items",this.onMediaGalleryApproveBound),this.organizeMediaBiLogger.mediaManagement.galleryOrganizerCloseAddMoreMediaWindow(),this.organizeMediaBiLogger.mediaManagement.closeMediaWindow(this.mediaType,"gallery","gallery organizer")},a.prototype.onMediaGalleryApprove=function(a){this.$window.MediaFrame.off("close",this.onMediaGalleryCancelBound),this.mediaGalleryResultsHandler(a)},a.prototype.mediaGalleryResultsHandler=function(a){var b=this;a.items.forEach(function(a){var c="video"===b.mediaType?b.mediaItemCreator.fromMediaGalleryVideo(a):b.mediaItemCreator.fromMediaGalleryImage(a);b.addItem(c)}),this.organizeMediaBiLogger.mediaManagement.galleryOrganizerMediaAddedToOrganizer(a.items.length,this.mediaItems.itemCount),this.organizeMediaBiLogger.mediaManagement.approveChangesInTheMediaWindow("gallery organizer",this.mediaType,this.mediaUtils.getBIGalleryType(this.mediaType),this.mediaItems.itemCount),this.$scope.$apply()},a.prototype.openVideoForeplay=function(a){this.organizeMedia.openVideoForeplay(a)},a.prototype.prev=function(){var a=this.items.indexOf(this.selected);this.selected=this.items[(a-1+this.items.length)%this.items.length]},a.prototype.next=function(){var a=this.items.indexOf(this.selected);this.selected=this.items[(a+1)%this.items.length]},a.prototype.move=function(a,b){this.mediaItems.reorder(a,b)},a.prototype.addItem=function(a){this.mediaItems.addItem(a,this.selectionMode),this.updateSelectedItem(-1)},a.prototype.curSelectedPos=function(){return this.items.indexOf(this.selected)},a.prototype.onHelp=function(){this.helpPage&&this.CcDialogBuilder.showSupportIframe(this.helpPage,"organize-media-help-page")},a}();angular.module("organizeMediaDialog").component("organizeMedia",{templateUrl:"views/organize-media.html",controller:OrganizeMedia,bindings:{options:"="}});var OrganizeMediaApp=function(){function a(a,b,c,d,e){this.images=a,this.extVideos=b,this.wixVideos=c,this.organizeMedia=d,this.customData=e}return a.$inject=["images","extVideos","wixVideos","organizeMedia","customData"],a.mockLinkDetailsHandler=function(){return{editLinkCallback:a.mockEditLinkCallback,linkDetailsToILink:ImageItemDetails.mockLinkDetailsToILink}},a.prototype.openGalleryDialog=function(){this.organizeMedia.open({title:"Organize Your Gallery Images",subtitle:"Drag and drop your media into position to get your gallery nicely organized.",suggestionsTitle:"Other suggested images, select an image to add it to your gallery",dataSource:this.images,type:"image",mode:"gallery",linkDetailsHandler:a.mockLinkDetailsHandler(),helpPage:"//www.wix.com/support/html5/widget/63ff21be-9556-4f52-9ac9-4d441bd3dae4/article/5a7fb24b-d999-4017-b337-7efbf5d63c5c",mediaGalleryHelpPage:"//www.wix.com/support/html5/widget/63ff21be-9556-4f52-9ac9-4d441bd3dae4/article/b29e3020-a671-49c9-b8af-43767fae53ad",customData:angular.copy(this.customData),mediaGalleryCSSOverridesURL:"http://example.com/dummy.css"}).then(function(a){console.log(a)})},a.prototype.openShapeDialog=function(){this.organizeMedia.open({title:"Organize Your Gallery Shapes",subtitle:"The chosen shape",suggestionsTitle:"Other suggested shapes, select a shape to replace the one on top",dataSource:this.images,type:"shape",linkDetailsHandler:a.mockLinkDetailsHandler()}).then(function(a){console.log(a)})},a.prototype.openClipartDialog=function(){this.organizeMedia.open({title:"Organize Your Gallery Cliparts",subtitle:"The chosen clipart",suggestionsTitle:"Other suggested cliparts, select a clipart to replace the one on top",dataSource:this.images,type:"clipart",mode:"single",linkDetailsHandler:a.mockLinkDetailsHandler()}).then(function(a){console.log(a)})},a.prototype.openExtVideoDialog=function(){this.organizeMedia.open({title:"Video Box",subtitle:"The chosen video",suggestionsTitle:"Other suggested videos, select a video to replace the one on top",dataSource:this.extVideos,type:"extVideo",helpPage:"https://www.wix.com/support/html5/widget/63ff21be-9556-4f52-9ac9-4d441bd3dae4/article/04a0f5e0-bbe3-4d09-99c5-857b4043f160"}).then(function(a){console.log(a)})},a.prototype.openWixVideoDialog=function(){this.organizeMedia.open({title:"Video Box",subtitle:"The chosen video",suggestionsTitle:"Other suggested videos, select a video to replace the one on top",dataSource:this.wixVideos,type:"video"}).then(function(a){console.log(a)})},a}();OrganizeMediaApp.mockEditLinkCallback=function(a,b){return console.log("Called mockEditLinkCallback with:"),console.log("selector: "+a),console.log("linkObj: "+JSON.stringify(b)),{save:function(){console.log("Save() called for Link Editor!");var a={targetUrl:"New mock link target"};return new Promise(function(b){b(a)})}}},angular.module("organizeMediaApp").component("organizeMediaApp",{templateUrl:"views/organize-media-app.html",controller:OrganizeMediaApp});var VideoForeplay=function(){function a(a){this.$mdDialog=a}return a.$inject=["$mdDialog"],a.prototype.close=function(a){return this.$mdDialog.hide(a)},a}();angular.module("organizeMediaDialog").component("videoForeplay",{templateUrl:"views/video-foreplay.html",controller:VideoForeplay,bindings:{item:"="}});var VideoItem=function(){function a(){}return a}();angular.module("organizeMediaDialog").component("videoItem",{templateUrl:"views/video-item.html",controller:VideoItem,bindings:{item:"=",openVideoForeplay:"&"}});var CONTROLS_STATUS;!function(a){a[a.NEVER=0]="NEVER",a[a.ON_HOVER=1]="ON_HOVER",a[a.ALWAYS=2]="ALWAYS"}(CONTROLS_STATUS||(CONTROLS_STATUS={}));var VideoItemDetails=function(){function a(a,b){var c=this;this.$scope=a,this.mediaUtils=b,a.$watch("$ctrl.item",function(){c.error=void 0,c.item&&(void 0===c.item.controls&&(c.item.controls="extVideo"===c.item.mediaType?CONTROLS_STATUS.ALWAYS:CONTROLS_STATUS.NEVER),(void 0===c.item.playmode||void 0===c.item.playmode.autoplay||void 0===c.item.playmode.loop)&&(c.item.playmode={autoplay:"video"===c.item.mediaType,loop:"video"===c.item.mediaType}))}),a.$watch("$ctrl.item.videoUrl",function(){c.videoUrlToEdit=c.item?c.item.videoUrl:void 0})}return a.$inject=["$scope","mediaUtils"],a.prototype.updateVideo=function(a){var b=this;this.error=this.error?" ":void 0,this.mediaUtils.getNewExtVideoItem(a).then(function(a){a.controls=angular.copy(b.item.controls),a.playmode=angular.copy(b.item.playmode),b.addItemCallback({item:a}),b.videoUrlToEdit=a.videoUrl,b.error=void 0})["catch"](function(a){b.error="Invalid URL (YouTube & Vimeo only)"})},a}();angular.module("organizeMediaDialog").component("videoItemDetails",{templateUrl:"views/video-item-details.html",controller:VideoItemDetails,bindings:{item:"=",addItemCallback:"&"}});var VideoPreview=function(){function a(){}return a}();angular.module("organizeMediaDialog").component("videoPreview",{templateUrl:"views/video-preview.html",controller:VideoPreview,bindings:{item:"="}});var OMVidSearchStatus;!function(a){a[a.beforeSearch=0]="beforeSearch",a[a.searching=1]="searching",a[a.resultsFound=2]="resultsFound",a[a.noResultsFound=3]="noResultsFound"}(OMVidSearchStatus||(OMVidSearchStatus={}));var VideoSearch=function(){function a(a,b,c,d){this.$mdDialog=a,this.mediaUtils=b,this.CcDialogBuilder=c,this.organizeMediaBiLogger=d,this.query="",this.videos=[],this.selected=null,this.source="youtube",this.status=OMVidSearchStatus.beforeSearch}return a.$inject=["$mdDialog","mediaUtils","CcDialogBuilder","organizeMediaBiLogger"],Object.defineProperty(a.prototype,"searchStatus",{get:function(){return OMVidSearchStatus[this.status]},enumerable:!0,configurable:!0}),a.prototype.done=function(){var a=angular.copy(this.selected);return a&&a.$$hashkey&&delete a.$$hashKey,this.$mdDialog.hide(a)},a.prototype.close=function(a){return this.$mdDialog.hide(a)},a.prototype.cancel=function(a){return this.$mdDialog.hide(a)},a.prototype.onHelp=function(){this.helpPage&&this.CcDialogBuilder.showSupportIframe(this.helpPage,"organize-media-video-search-help")},a.prototype.startSearch=function(){return this.organizeMediaBiLogger.mediaManagement.externalVideoSwitchSearchSource(this.source),0!==this.query.length?(this.videos=[],this.status=OMVidSearchStatus.searching,this.nextCursor=void 0,this.search()):void 0},a.prototype.search=function(){var a=this;this.organizeMediaBiLogger.mediaManagement.externalVideoSearchVideoClick(this.source,this.query);var b;"youtube"===this.source?b=this.mediaUtils.getYoutubeVideos(this.query,this.nextCursor):"vimeo"===this.source&&(b=this.mediaUtils.getVimeoVideos(this.query,this.nextCursor)),b.then(function(b){a.selected=null,a.videos=a.videos.concat(b.videos),
a.status=a.videos.length?OMVidSearchStatus.resultsFound:OMVidSearchStatus.noResultsFound,a.organizeMediaBiLogger.mediaManagement.externalVideoSearchCompleted(a.source,a.query,a.videos.length),a.nextCursor=b.nextPageToken})},a.prototype.openVideoForeplay=function(a){this.organizeMediaBiLogger.mediaManagement.previewMediaClick("extVideo",MediaUtils.BI_GALLERY_TYPE_EXTERNAL_VIDEO),this.origVideoForeplay({item:a})},a}();angular.module("organizeMediaDialog").component("videoSearch",{templateUrl:"views/video-search.html",controller:VideoSearch,bindings:{origVideoForeplay:"&",helpPage:"@"}}),angular.module("organizeMediaDialog").directive("omInfiniteScroll",function(){return{restrict:"A",scope:!0,link:function(a,b,c){b.on("scroll",function(){$(this).scrollTop()+$(this).innerHeight()>=$(this)[0].scrollHeight&&a.$eval(c.omInfiniteScroll)})}}}),angular.module("organizeMediaDialog").directive("omAutofocus",["$timeout",function(a){return{scope:!0,link:function(b,c){a(function(){c[0].focus()})},restrict:"A"}}]);var __extends=this&&this.__extends||function(){var a=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(a,b){a.__proto__=b}||function(a,b){for(var c in b)b.hasOwnProperty(c)&&(a[c]=b[c])};return function(b,c){function d(){this.constructor=b}a(b,c),b.prototype=null===c?Object.create(c):(d.prototype=c.prototype,new d)}}(),VideoMediaItem=function(){function a(a){var b=this;this.asDTO=function(){return JSON.parse(JSON.stringify(b))},Object.assign(this,a)}return a}(),ExtVideoMediaItem=function(a){function b(){return null!==a&&a.apply(this,arguments)||this}return __extends(b,a),b.prototype.getId=function(){return this.videoUrl},Object.defineProperty(b.prototype,"isVimeo",{get:function(){return null!==this.videoUrl.toLowerCase().match("vimeo")},enumerable:!0,configurable:!0}),Object.defineProperty(b.prototype,"cleanId",{get:function(){return this.isVimeo?this.uri.split("/").pop():this.videoId||this.videoUrl.split("?")[0].split("/").pop()},enumerable:!0,configurable:!0}),Object.defineProperty(b.prototype,"embedSrc",{get:function(){return this.isVimeo?"https://player.vimeo.com/video/"+this.cleanId+"?autoplay=1":"https://www.youtube.com/embed/"+this.cleanId+"?autoplay=1"},enumerable:!0,configurable:!0}),b.prototype.getWidthForHeight=function(a){return this.width?this.width/this.height*a:16*a/9},b.prototype.getHeightForWidth=function(a){return this.width?this.height/this.width*a:9*a/16},b}(VideoMediaItem),WixVideoMediaItem=function(a){function b(){return null!==a&&a.apply(this,arguments)||this}return __extends(b,a),b.prototype.getId=function(){return this.fileUrl},Object.defineProperty(b.prototype,"videoSources",{get:function(){return this.fileOutput?this.fileOutput.video.map(function(a){return"//video.wixstatic.com/"+a.url}):[]},enumerable:!0,configurable:!0}),Object.defineProperty(b.prototype,"posterImage",{get:function(){var a=this.fileOutput?this.fileOutput.image[Math.min(2,this.fileOutput.image.length-1)].url:"";return a?"//static.wixstatic.com/"+a+"/v1/fit/w_644,h_644/"+a.split("/")[1]:""},enumerable:!0,configurable:!0}),b}(VideoMediaItem),ImageMediaItem=function(){function a(){}return a}(),MediaItemCreator=function(){function a(a){this.previewUrls=a}return a.$inject=["previewUrls"],a.getEmptyLinkObj=function(){return{}},a.prototype.fromMediaGalleryImage=function(b){var c=new ImageMediaItem;return c.fileName=b.title||"",c.relativeUri=("shape"===b.mediaType?b.fileUrl:b.uri)||"",c.width=Number(b.width)||0,c.height=Number(b.height)||0,c.Title=b.title||"",c.Description="",c.Link=a.getEmptyLinkObj(),c.mediaType=b.mediaType,c.active=!0,c},a.prototype.fromMediaGalleryVideo=function(a){return new WixVideoMediaItem(Object.assign(a,{relativeUri:a.uri,thumbnailUrl:this.previewUrls.getWixVideoThumbnailUrl(a.fileOutput.image[Math.min(2,a.fileOutput.image.length-1)].url),Title:a.title,Description:"",mediaType:"video",controls:CONTROLS_STATUS.NEVER,playmode:{autoplay:!0,loop:!0},active:!0}))},a.prototype.fromYoutubeVideo=function(a){var b=a.id.videoId||a.id;return new ExtVideoMediaItem({videoUrl:"https://youtu.be/"+b,videoId:b,thumbnailUrl:a.snippet.thumbnails.high.url,width:a.snippet.thumbnails.high.width,height:a.snippet.thumbnails.high.height,Title:a.snippet.title,Description:a.snippet.description,mediaType:"extVideo",active:!0,controls:CONTROLS_STATUS.ALWAYS,playmode:{autoplay:!1,loop:!1}})},a.prototype.fromVimeoVideo=function(a){return new ExtVideoMediaItem({videoUrl:a.link||"",uri:a.uri,thumbnailUrl:a.pictures&&a.pictures.uri?"https://i.vimeocdn.com/video/"+a.pictures.uri.split("/")[4]+"_185x130.jpg?r=pad":"none",width:a.width,height:a.height,Title:a.name||"",Description:a.description||"",mediaType:"extVideo",active:!0,controls:CONTROLS_STATUS.ALWAYS,playmode:{autoplay:!1,loop:!1}})},a}();angular.module("organizeMediaDialog").service("mediaItemCreator",MediaItemCreator);try{angular.module("jsSdkCommonsPreload")}catch(e){angular.module("jsSdkCommonsPreload",[])}angular.module("sdkCommonsConstants",[]),angular.module("sdkCommons",["jsSdkCommonsTranslations","jsSdkCommonsPreload","wixAngular","wix.common.bi","sdkCommonsConstants"]).config(["dashboardSdkProvider",function(a){a.registerHandler("openMediaDialog","sdkMediaGallery","openMediaDialog","Dashboard"),a.registerHandler("getProducts","sdkBilling","getProducts","Billing"),a.registerHandler("superAppsOpenMediaDialog","sdkMediaGallery","openAsSuperApp","Settings"),a.registerHandler("echo","dashboardSdkEchoHandler"),a.registerHandler("scrollTo","dashboardSdkScrollToHandler"),a.registerHandler("appEngaged","sdkAppEngaged","sendEngagedBI")}]).config(["wixBiLoggerProvider",function(a){a.setConfig({eventMap:{APP_ENGAGED:{src:75,evid:13,adapter:"app-sdk"}}})}]),function(){function a(){var a,b={},c={_getSdkNamespaces:function(){return b}};this.registerHandler=function(d,e,f,g){if(c[d]=function(){if(a.has(e)){var b=a.get(e);f&&(b=b[f].bind(b)),b.apply(this,arguments)}},g){var h=b[g];h||(b[g]={}),b[g][f]=c[d]}},this.registerDefaultHandlers=angular.noop,this.$get=["$injector",function(b){return a=b,c}],this.$get.$inject=["$injector"]}angular.module("sdkCommons").provider("dashboardSdk",a)}();var SdkConfigProvider=function(){function a(){}return a.prototype.registerAppDefIdGetter=function(a){this.appDefIdGetter=a},a.prototype.registerAppInstanceIdGetter=function(a){this.appInstanceIdGetter=a},a.prototype.registerMediaGalleryUrlGetter=function(a){this.mediaGalleryUrlGetter=a},a.prototype.isInvocable=function(){return Array.isArray(this.mediaGalleryUrlGetter)||"function"==typeof this.mediaGalleryUrlGetter},a.prototype.$get=function(a){var b=this,c="//static.parastorage.com/services/media-gallery-g5/libs-releases-local/";return{getAppDefId:function(){return a.invoke(b.appDefIdGetter)},getAppInstanceId:function(){return a.invoke(b.appInstanceIdGetter)},getMediaGalleryG5StaticsUrl:function(){return b.isInvocable()?a.invoke(b.mediaGalleryUrlGetter):c}}},a.prototype.$get.$inject=["$injector"],a}();angular.module("sdkCommons").provider("sdkConfig",SdkConfigProvider),function(){function a(a,b,c){function d(a){return l[a]}function e(a){return a&&a.intent===h.TPA_MESSAGE?d(a.type)&&m(a.compId):!1}function f(a,b){return function(c){try{a.source.postMessage(JSON.stringify({intent:h.TPA_RESPONSE,callId:b.callId,type:b.type,res:c,status:!0}),"*")}catch(d){}}}function g(a){var b;try{b=JSON.parse(a.data)}catch(c){}e(b)&&l[b.type](b.data,f(a,b))}var h={TPA_MESSAGE:"TPA2",TPA_RESPONSE:"TPA_RESPONSE"},i={},j=!1,k=!1,l=b,m=function(a){return i[a]||j},n=function(){k&&a.removeEventListener("message",g),k=!1},o=function(){k||(a.addEventListener("message",g),k=!0)};this.init=function(a){void 0===a&&(a=null),a?i[a]=!0:j=!0,o()},c.$on("$destroy",n),this.unload=function(a){void 0===a&&(a=null),a?delete i[a]:j=!1,j||0!==Object.keys(i).length||n()}}a.$inject=["$window","dashboardSdk","$rootScope"],angular.module("sdkCommons").service("sdkHandler",a)}();var MediaGalleryHelper=function(){function a(){this.visionsMap={faces:"face",labels:"label",dominantColors:"color",cropHints:"crop_hint"}}return a.prototype.convertToVision=function(a){return this.visionsMap[a]},a.prototype.getVisionValue=function(a){var b=this;return void 0===a&&(a={}),Object.keys(a).filter(function(c){return!!a[c]&&!!b.convertToVision(c)}).map(function(a){return b.convertToVision(a)}).join()},a}();angular.module("sdkCommons").service("mediaGalleryHelper",MediaGalleryHelper),angular.module("sdkCommonsConstants").constant("premiumIntents",["NEUTRAL","FREE","PAID"]),angular.module("sdkCommons").service("dashboardSdkEchoHandler",function(){return function(a,b){b(a)}}),function(){function a(a,b,c,d,e,f){this.openMediaDialog=function(g,h,i){function j(a){return a.map(function(a){return"secure_music"===a.mediaType?a:Object.assign({},a,{relativeUri:a.uri})})}function k(a){return a.map(function(a){var b={};if(b.fileName=a.title||"","secure_music"===a.mediaType){var c=a.fileOutput&&a.fileOutput.audio,d=c&&c.filter(function(a){return"preview-short"===a.tag})[0];b.shortPreviewFileName=d&&d.url||"",b.previewFileName=a.previewFileName||"",b.fileUrl=a.fileUrl||""}else b.relativeUri=a.fileName||"",b.width=Number(a.width)||0,b.height=Number(a.height)||0;return b})}var l={photos:"picture",clipart:"picture",backgrounds:"picture",audio:"music",music:"music",documents:"document",swf:"swf",video:"video",shape:"shape",secure_music:"secure_music"},m={photos:"photos",backgrounds:"backgrounds",video:"videos",shape:"shapes",clipart:"clipart"},n={photos:g.multiSelection?"multiple_images":"single_image",backgrounds:"background",clipart:"clipart"},o=function(){return i?{vision:e.getVisionValue(g.imageAnalysis)}:{}},p=function(){return m[g.mediaType]?{publicMediaRoot:m[g.mediaType]}:{}},q=function(){return"secure_music"===g.mediaType||"video"===g.mediaType||"documents"===g.mediaType?{tabsList:["private"]}:{}};l[g.mediaType]||(g.mediaType="photos");var r=a.getMediaGalleryG5StaticsUrl(),s=d.open(angular.extend({baseHost:"wix.com",i18nCode:c.id,mediaType:l[g.mediaType],i18nPrefix:n[g.mediaType]||l[g.mediaType],selectionType:g.multiSelection?"multiple":"single",mediaGalleryBaseHost:b.calcPartialsUrl(r,!0),siteMediaToken:f.getSiteToken()},p(),q(),o()));s.one("close",h.bind(void 0,{wasCancelled:!0})).one("items",function(a){var b=i?j(a.items):k(a.items);h(g.multiSelection?b:b[0])})},this.open=this.openMediaDialog,this.openAsSuperApp=function(a,b){this.openMediaDialog(a,b,!0)}}a.$inject=["sdkConfig","wixAngularTopology","$locale","MediaFrame","mediaGalleryHelper","permissionsManager"],angular.module("sdkCommons").service("sdkMediaGallery",a).factory("MediaFrame",function(){return MediaFrame})}(),angular.module("sdkCommons").service("dashboardSdkScrollToHandler",["$window",function(a){return function(b){a.scrollTo(b.x,b.y)}}]);var SdkBilling=function(){function a(a,b,c){this.$injector=a,this.$http=b,this.sdkConfig=c}return a.$inject=["$injector","$http","sdkConfig"],a.prototype.hasPrice=function(a){return!!a&&0!==parseFloat(a)},a.prototype.buildPackageUrl=function(a,b,c,d,e){return a+"?appInstanceId="+d+"&appDefinitionId="+c+"&paymentCycle="+e.toUpperCase()+"&vendorProductId="+b},a.prototype.getProducts=function(a,b){var c=this,d=a.appDefinitionId||this.sdkConfig.getAppDefId();if(d){var e=this.sdkConfig.getAppInstanceId()(d);this.$http.get("/_api/app-market-api/apps/"+d+"/priced-app",{params:{fields:["price","packages","purchaseStartUrl","billingPanelType"].toString()}}).then(function(a){var f=a.data.packages,g=a.data.purchaseStartUrl;return f.forEach(function(b){var f=_.curry(c.buildPackageUrl)(g,b.id,d,e);b.monthly.url=c.hasPrice(b.monthly.price)&&f("MONTHLY"),b.yearly.url=c.hasPrice(b.yearly.price)&&f("YEARLY"),b.oneTime.url=c.hasPrice(b.oneTime.price)&&f("ONE_TIME"),b.currencyCode=a.data.price.currencyCode,b.currencySymbol=a.data.price.currencySymbol}),b({packages:f})})}else b({error:!0,message:"Invalid application definition id"})},a}();angular.module("sdkCommons").service("sdkBilling",SdkBilling);var SdkAppEngaged=function(){function a(a,b,c){this.wixBiLogger=a,this.premiumIntents=b,this.sdkConfig=c}return a.$inject=["wixBiLogger","premiumIntents","sdkConfig"],a.prototype.sendEngagedBI=function(a){var b=this.sdkConfig.getAppDefId(),c=this.sdkConfig.getAppInstanceId()(b);a&&a.premiumIntent&&this.premiumIntents.indexOf(a.premiumIntent)>-1&&this.wixBiLogger.log(this.wixBiLogger.events.APP_ENGAGED,{app_id:b,instance_id:c,premium_intent:a.premiumIntent})},a}();angular.module("sdkCommons").service("sdkAppEngaged",SdkAppEngaged);try{angular.module("jsSdkCommonsTranslations")}catch(e){angular.module("jsSdkCommonsTranslations",["pascalprecht.translate"])}angular.module("jsSdkCommonsTranslations").config(["$translateProvider",function(a){var b={general:{YO:"Hello"}};a.translations("en",b),a.translations(b),a.preferredLanguage&&a.preferredLanguage("en")}]).value("preferredLanguage","en"),layoutPresetPreview.$inject=["$p","getLayoutPreview","getVideoBgPreview","mediaGallery","previewColors","modelTree","designKit","flags","$log","applicationParameters","columnService","backgroundMediaOpacity"];var ob;!function(a){a.deepClone=function(a){return angular.copy(a)},angular.module("siteGeneratorStaticsCoreAppInternal",["wixAngular","sdkCommons","siteGeneratorStaticsCorePreload"]).run(["flags","urlStateKeeper",function(a,b){}]),angular.module("siteGeneratorAppCore",["siteGeneratorStaticsCoreAppInternal"]).run(["sdkHandler",function(a){a.init()}])}(ob||(ob={})),angular.module("siteGeneratorStaticsCoreAppInternal").constant("animationDirection",{TOP:"top",BOTTOM:"bottom",LEFT:"left",RIGHT:"right",CENTER:"center",TOP_RIGHT:"top right",TOP_LEFT:"top left",BOTTOM_RIGHT:"bottom right",BOTTOM_LEFT:"bottom left"}).constant("animationTiming",{cascade04:{baseDuration:.8,verticalStep:.4}}).constant("animationTypes",{fadeIn:{name:"FadeIn",action:"screenIn",delay:0,params:{}},floatIn:{name:"FloatIn",action:"screenIn",delay:0,params:{}},expandIn:{name:"ExpandIn",action:"screenIn",delay:0,params:{}},bounceIn:{name:"BounceIn",action:"screenIn",delay:0,params:{bounce:"medium"}},slideIn:{name:"SlideIn",action:"screenIn",delay:0,params:{}},flyIn:{name:"FlyIn",action:"screenIn",delay:0,params:{}},glideIn:{name:"GlideIn",action:"screenIn",delay:0,hasAngle:!0,hasDistance:!0,params:{angle:270,distance:150}},reveal:{name:"Reveal",action:"screenIn",delay:0,params:{}},foldIn:{name:"FoldIn",action:"screenIn",delay:0,params:{}},turnIn:{name:"TurnIn",action:"screenIn",delay:0,params:{}}}).constant("animationDefaultPattern","no_animation").constant("animationNoPatternIdentifier","no_animation").constant("animationInheritPatternIdentifier","inherit").factory("animationPatterns",["animationTypes","animationTiming","animationDirection",function(a,b,c){return{no_animation:{label:"None",animation:null,"class":"no-animation",iconClass:"None"},low_1:{label:"Fade",animation:a.fadeIn,direction:c.CENTER,timing:b.cascade04,button:{direction:c.TOP},media:{animation:null},iconClass:"Fade"},low_2:{label:"Float",animation:a.floatIn,direction:c.BOTTOM,timing:b.cascade04,button:{direction:c.TOP},media:{animation:null},text:{animation:a.fadeIn,direction:c.CENTER,title:{animation:a.floatIn,direction:c.BOTTOM,rightColumn:{animation:a.fadeIn,direction:c.CENTER},leftColumn:{animation:a.fadeIn,direction:c.CENTER}},subTitle:{animation:a.floatIn,direction:c.BOTTOM,rightColumn:{animation:a.fadeIn,direction:c.CENTER},leftColumn:{animation:a.fadeIn,direction:c.CENTER}}},container:{direction:c.TOP,onMedia:{direction:c.BOTTOM}},social:{animation:a.fadeIn,direction:c.CENTER},iconClass:"Float"},medium_01:{label:"Slide",animation:a.slideIn,direction:c.BOTTOM,timing:b.cascade04,button:{animation:a.floatIn,direction:c.TOP},text:{animation:a.fadeIn,direction:c.CENTER,title:{animation:a.slideIn,direction:c.BOTTOM,left:{direction:c.LEFT},right:{direction:c.RIGHT},rightColumn:{animation:a.fadeIn,direction:c.CENTER},leftColumn:{animation:a.fadeIn,direction:c.CENTER}},subTitle:{animation:a.slideIn,direction:c.BOTTOM,left:{direction:c.LEFT},right:{direction:c.RIGHT},rightColumn:{animation:a.fadeIn,direction:c.CENTER},leftColumn:{animation:a.fadeIn,direction:c.CENTER}}},media:{animation:null,rightColumn:{animation:a.slideIn,direction:c.RIGHT},leftColumn:{animation:a.slideIn,direction:c.LEFT}},container:{direction:c.TOP,onMedia:{direction:c.BOTTOM}},social:{animation:a.fadeIn,direction:c.CENTER},iconClass:"Slide"},medium_02:{label:"Fly",animation:a.flyIn,direction:c.BOTTOM,timing:b.cascade04,button:{animation:a.floatIn,direction:c.TOP},text:{animation:a.fadeIn,direction:c.CENTER,title:{animation:a.flyIn,direction:c.BOTTOM,rightColumn:{animation:a.fadeIn,direction:c.CENTER},leftColumn:{animation:a.fadeIn,direction:c.CENTER}},subTitle:{animation:a.flyIn,direction:c.BOTTOM,rightColumn:{animation:a.fadeIn,direction:c.CENTER},leftColumn:{animation:a.fadeIn,direction:c.CENTER}}},media:{animation:null,rightColumn:{animation:a.flyIn,direction:c.RIGHT},leftColumn:{animation:a.flyIn,direction:c.LEFT}},container:{direction:c.TOP,onMedia:{direction:c.BOTTOM}},social:{animation:a.fadeIn,direction:c.CENTER},iconClass:"Fly"},high_01:{label:"Fold",animation:a.foldIn,timing:b.cascade04,direction:c.LEFT,button:{animation:a.floatIn,direction:c.TOP},text:{animation:a.fadeIn,direction:c.CENTER,title:{animation:a.slideIn,direction:c.BOTTOM,left:{direction:c.LEFT},right:{direction:c.RIGHT}},subTitle:{animation:a.slideIn,direction:c.BOTTOM,left:{direction:c.LEFT},right:{direction:c.RIGHT}}},container:{direction:c.TOP,onMedia:{direction:c.BOTTOM}},media:{animation:null},social:{animation:a.fadeIn,direction:c.CENTER},iconClass:"Fold"},high_04:{label:"Turn",animation:a.turnIn,timing:b.cascade04,direction:c.LEFT,button:{animation:a.floatIn,direction:c.BOTTOM},text:{animation:a.fadeIn,direction:c.CENTER,title:{animation:a.reveal,direction:c.LEFT,right:{direction:c.RIGHT}},subTitle:{animation:a.reveal,direction:c.LEFT,right:{direction:c.RIGHT}}},media:{animation:null},social:{animation:a.fadeIn,direction:c.CENTER},iconClass:"Turn"}}}]),angular.module("siteGeneratorStaticsCoreAppInternal").constant("fontCustomizationRules",{Title:{max:4,min:7},"Title/2":{max:6,min:8},"Title/3":{max:6,min:8},Subtitle:{max:2,min:9},"Subtitle/2":{max:7,min:9},"Event subtitle":{max:7,min:9},"Event subtitle/2":{max:7,min:9},"Widget subtitle":{},Paragraph:{1:0,2:1,3:2,"-1":0,"-2":0,"-3":-1,segmentWidthRules:[{from:301,to:461,max:8},{from:0,to:301,max:9}],blockedFonts:["lulo-clean","stencil","anton","impact","belinda"]},"Testimonial paragraph":{max:6,min:9,blockedFonts:["lulo-clean","stencil","anton","impact","belinda"]},"Testimonial paragraph list":{1:0,2:1,3:2,"-1":0,"-2":-1,"-3":-2,segmentWidthRules:[{from:301,to:461,max:7},{from:0,to:301,max:8}],blockedFonts:["lulo-clean","stencil","anton","impact","belinda"]},"Welcome title":{},"Welcome subtitle":{min:9,max:2},"Menu/Copyright":{1:0,2:0,3:0,"-1":0,"-2":0,"-3":-1},"Page header":{},"Header title":{1:0,2:1,3:2,"-1":0,"-2":-1,"-3":-2},BTN:{1:0,2:0,3:2,"-1":-1,"-2":-1,"-3":-1,max:8},"Header subtitle":{1:0,2:0,3:1,"-1":0,"-2":0,"-3":-1},"Footer title":{1:0,2:1,3:2,"-1":0,"-2":-1,"-3":-2},Label:{1:0,2:0,3:0,"-1":-1,"-2":-1,"-3":-1}}).constant("fontsNotAllowedCapsStyle",{names:["belinda","snellroundhand","reklamescript","peaches-and-cream","cookie","lobster","marck script","mr de haviland","niconne","sacramento","sail","sarina"]}).constant("fontsNotAllowedItalicStyle",{names:["lulo-clean"]}),angular.module("siteGeneratorStaticsCoreAppInternal").constant("applicationEvents",{sendingToTranslation:"sending_to_translation",nodeChanged:"node_changed",nodeChangedClearCache:"node_changed_clear_cache",nodeChangedComplete:"node_changed_complete",footerNodeChanged:"footer_node_changed",verticalChanged:"vertical_changed",valueChanged:"value_changed",blurChanged:"blur_changed",referenceFieldChanged:"reference_field_changed",overridesChanged:"overrides_changed",layoutSolutionChanged:"layout_solution_changed",storyChanged:"story_changed",changingPage:"changing_page",pageChanged:"page_changed",pageDeleted:"page_deleted",localeChanged:"locale_changed",fontOverridesChanged:"font_overrides_changed",layoutChanged:"layout_changed",dataChanged:"data_changed",clearIdFromLgsMap:"clear_id_from_lgs_map",clearAllCaches:"clear_all_caches",nodeOverridesChanged:"node_overrides_changed",renderedPart:"rendered_part"}),angular.module("siteGeneratorStaticsCoreAppInternal").constant("applicationParameters",{layoutElementMatchingAccuracy:{vertical:20,horizontal:0},defaultShapeProperties:{fillColor:"#000000",borderColor:"#999999",borderWidth:"0"},prettyMode:1.4,baseLine:20,quarterBaseLine:5,gridStep:20,heightMutationStep:100,repeaterStep:5,partitionsGridStep:80,minHeight:20,minHeightForPartition:60,maxHeight:5e3,maxHeightForPartition:1680,minHeightForLargeHeightMutations:1700,minComponentWidth:60,horizontalGridStep:20,fullWidth:940,maxSocialLinks:8,currentlyManagedTpaId:void 0,currentlyManagedTpaInstanceId:void 0,tpaTypes:{Hotels:{icon:"",topBarTitle:"Hotel",type:"Hotels",inConsumer:!1,hasSection:!0,appId:"135aad86-9125-6074-7346-29dc6a3c9bcf"},Stores:{icon:"cc-icon-store",topBarTitle:"Store",type:"Stores",pageName:"Online Store",inConsumer:!0,hasSection:!0,appId:"1380b703-ce81-ff05-f115-39571d94dfcd",structureIds:["073bd83d054dcff87fa0ef50","a86dc9747f3eede342189f83","e6bd3dc3eea5928b0ea7fd47","dddf5389b593c624fe904f35"]},Bookings:{icon:"cc-icon-booking",topBarTitle:"Bookings",type:"Bookings",pageName:"Book Now",inConsumer:!0,hasSection:!0,appId:"13d21c63-b5ec-5912-8397-c3a5ddb27a97",qaAppId:"13bd8d0d-0736-df12-0b7d-6c95f09cc302"},Music:{icon:"cc-icon-music",topBarTitle:"Music",type:"Music",inConsumer:!1,hasSection:!1,closeSettingsPanelWhenManaging:!0,appId:"13bb5d67-1add-e770-a71f-001277e17c57",qaAppId:"140cb45e-0e0e-8688-674a-0d282fb332e1",publishAfterAddition:!0},BandsInTown:{type:"BandsInTown",inConsumer:!1,hasSection:!1,appId:"1405ef82-0ee0-65fb-88a1-2f172aa3573c",qaAppId:"1419f0ec-9b7d-f623-cc75-383a540b5fc4"},ProGallery:{type:"ProGallery",inConsumer:!1,hasSection:!1,appId:"14271d6f-ba62-d045-549b-ab972ae1f70e"},PhotoAlbums:{type:"PhotoAlbums",inConsumer:!0,sectionUnderFlag:"PhotoAlbums",hasSection:!0,appId:"13ff8629-c1fc-e289-e81f-bc8c8968e9d6"},GetSubscribers:{type:"GetSubscribers",inConsumer:!0,hasSection:!1,appId:"1375baa8-8eca-5659-ce9d-455b2009250d"},Blog:{icon:"cc-icon-blog",topBarTitle:"Blog",type:"Blog",hasSection:!0,inConsumer:!0,structureIds:["b0a520919b99728bae200018","1a807ebfa9792fc45bfe845e"]},RestaurantsMenus:{topBarTitle:"Restaurants Menus",type:"RestaurantsMenus",hasSection:!0,inConsumer:!1,appId:"13c1402c-27f2-d4ab-7463-ee7c89e07578"}},appPartTypes:["Blog_Post_Gallery"],listSizeForRepeater:6,locales:["de","en","es","fr","it","ja","ko","pl","pt","ru","tr","nl","da","sv","no"],backendUrls:{pizza:"/backend-pizza",prod:"/backend-prod",e2e:"[TBD]",dev:"http://localhost:1337"},lineDistance:5,defaultForContent:["Widget","Product","Feature","Subscribe","Social","Testimonial","Project","About","Client","Service","TeamMember","Facility","SpecialOffer","Membership","Quote","Donation","Careers","Welcome","HomePageTeaser","ListHeader","ListFooter","FAQ","PageHeader","Event","News","CV","OpeningHours","Homepage_about","Inner_about","Portfolio"],clientTopology:{},segmentsGap:20,shapeMediaSize:60,desktopPageWidth:980,mobilePageWidth:320,getGridUnits:function(a){return 1+(a-60)/80},getPixelsFromGridUnits:function(a){return 60+80*Math.max(0,a-1)},getValidHeight:function(a){var b,c=a;return a<this.minHeightForLargeHeightMutations?(b=a/this.gridStep,parseInt(b)!==b&&(c=(Math.floor(b)+1)*this.gridStep)):(b=a/this.heightMutationStep,parseInt(b)!==b&&(c=(Math.floor(b)+1)*this.heightMutationStep)),c},updateCurrentlyManaged:function(a){this.tpaTypes[a]&&(this.currentlyManagedTpaId=this.tpaTypes[a].appId)},updateCurrentlyManagedInstance:function(a,b){this.tpaTypes[a]&&(this.currentlyManagedTpaInstanceId=b)},getCurrentlyManaged:function(){return this.currentlyManagedTpaId},getCurrentlyManagedInstance:function(){return this.currentlyManagedTpaInstanceId},registerWithIsInMobileEditMode:function(a){this.isInMobileEditModeFunction=a},isInMobileEditMode:function(){return this.isInMobileEditModeFunction&&this.isInMobileEditModeFunction()},extendValidLayout:function(a,b){a.x=b.left,a.y=b.top,a.width=b.width,a.height=b.height}});var core;!function(a){var b={layoutElement:{comp:"core.components.Container",skin:"wysiwyg.viewer.skins.area.RectangleArea"},layoutGroup:{comp:"core.components.Container",skin:"wysiwyg.viewer.skins.area.RectangleArea"},container:{comp:"core.components.Container",skin:"wysiwyg.viewer.skins.area.RectangleArea"},line:{comp:"wysiwyg.viewer.components.FiveGridLine",skin:"wysiwyg.viewer.skins.line.SolidLine"},vLine:{comp:"wysiwyg.viewer.components.VerticalLine",skin:"wysiwyg.viewer.skins.line.VerticalSolidLine"},text:{comp:"wysiwyg.viewer.components.WRichText",skin:"wysiwyg.viewer.skins.WRichTextNewSkin"},button:{comp:"wysiwyg.viewer.components.SiteButton",skin:"wysiwyg.viewer.skins.button.BasicButton"},textButton:{comp:"wysiwyg.viewer.components.SiteButton",skin:"wysiwyg.viewer.skins.button.TextOnlyButtonSkin"},media:{comp:"wysiwyg.viewer.components.WPhoto",skin:"wysiwyg.viewer.skins.photo.NoSkinPhoto"},audio:{comp:"wysiwyg.common.components.singleaudioplayer.viewer.SingleAudioPlayer",skin:"wysiwyg.common.components.singleaudioplayer.viewer.skins.SingleAudioPlayerSkin"},audioPlayButton:{comp:"wysiwyg.viewer.components.AudioPlayer",skin:"wysiwyg.viewer.skins.audioplayer.SimplePlayer"},extVideo:{comp:"wysiwyg.viewer.components.Video",skin:"wysiwyg.viewer.skins.VideoSkin"},strip:{comp:"wysiwyg.viewer.components.BgImageStrip",skin:"skins.viewer.bgimagestrip.BgImageStripSkin"},stripContainer:{comp:"wysiwyg.viewer.components.StripContainer"},stripColumnsContainer:{comp:"wysiwyg.viewer.components.StripColumnsContainer"},column:{comp:"wysiwyg.viewer.components.Column"},shape:{comp:"wysiwyg.viewer.components.svgshape.SvgShape",skin:"svgshape.v1.svg_8a02b846b862a7b6973bdeff1bf009d3.Arrow"},SlideShowGallery:{comp:"wysiwyg.viewer.components.SlideShowGallery",skin:"wysiwyg.viewer.skins.gallery.SlideShowTextOverlay"},MatrixGallery:{comp:"wysiwyg.viewer.components.MatrixGallery",skin:"wysiwyg.viewer.skins.gallerymatrix.MatrixGalleryPolaroidSkin"},SliderGallery:{comp:"wysiwyg.viewer.components.SliderGallery",skin:"wysiwyg.viewer.skins.galleryslider.SliderGalleryDefaultSkin"},PaginatedGridGallery:{comp:"wysiwyg.viewer.components.PaginatedGridGallery",skin:"wysiwyg.viewer.skins.paginatedgrid.PaginatedGridOverlay"},Masonry:{comp:"tpa.viewer.components.Masonry",skin:"wysiwyg.viewer.skins.TPAMasonrySkin"},Thumbnails:{comp:"tpa.viewer.components.Thumbnails",skin:"wysiwyg.viewer.skins.TPAThumbnailsSkin"},StripSlideshow:{comp:"tpa.viewer.components.StripSlideshow",skin:"wysiwyg.viewer.skins.TPAStripSlideshowSkin"},StripShowcase:{comp:"tpa.viewer.components.StripShowcase",skin:"wysiwyg.viewer.skins.TPAStripShowcaseSkin"},Accordion:{comp:"tpa.viewer.components.Accordion",skin:"wysiwyg.viewer.skins.TPAAccordionSkin",props:"AccordionProperties"},Freestyle:{comp:"tpa.viewer.components.Freestyle",skin:"wysiwyg.viewer.skins.TPAFreestyleSkin"},Collage:{comp:"tpa.viewer.components.Collage",skin:"wysiwyg.viewer.skins.TPACollageSkin"},Honeycomb:{comp:"tpa.viewer.components.Honeycomb",skin:"wysiwyg.viewer.skins.TPACollageSkin"},Impress:{comp:"tpa.viewer.components.Impress",skin:"wysiwyg.viewer.skins.TPAImpressSkin",props:"ImpressProperties"},TPA3DGallery:{comp:"tpa.viewer.components.TPA3DGallery",skin:"wysiwyg.viewer.skins.TPA3DGallerySkin"},TPA3DCarousel:{comp:"tpa.viewer.components.TPA3DCarousel",skin:"wysiwyg.viewer.skins.TPA3DCarouselSkin"},map:{comp:"wysiwyg.viewer.components.GoogleMap",skin:"wysiwyg.viewer.skins.GoogleMapSkin"},form:{comp:"wysiwyg.viewer.components.ContactForm",skin:"wysiwyg.viewer.skins.contactform.BasicContactFormSkin"},social:{comp:"wysiwyg.viewer.components.LinkBar",skin:"wysiwyg.viewer.skins.LinkBarNoBGSkin"},twitterFollow:{comp:"wysiwyg.viewer.components.WTwitterFollow",skin:"skins.core.TwitterFollowSkin"},googlePlusOne:{comp:"wysiwyg.viewer.components.WGooglePlusOne",skin:"skins.core.GooglePlusOneSkin"},facebookShare:{comp:"wysiwyg.viewer.components.FacebookShare",skin:"skins.viewer.facebookshare.FacebookShareSkin"},facebookComments:{comp:"wysiwyg.viewer.components.WFacebookComment",skin:"skins.core.FacebookCommentSkin"},facebookLike:{comp:"wysiwyg.viewer.components.WFacebookLike",skin:"skins.core.FacebookLikeSkin"},twitterTweet:{comp:"wysiwyg.viewer.components.WTwitterTweet",skin:"skins.core.TwitterTweetSkin"},pinterestFollow:{comp:"wysiwyg.viewer.components.PinterestFollow",skin:"skins.viewer.pinterestfollow.PinterestFollowSkin"},subscribe:{comp:"wysiwyg.common.components.subscribeform.viewer.SubscribeForm",skin:"wysiwyg.common.components.subscribeform.viewer.skins.SubscribeFormPlaceholderSkin"},menu:{comp:"wysiwyg.viewer.components.menus.DropDownMenu",skin:"wysiwyg.common.components.dropdownmenu.viewer.skins.TextOnlyMenuButtonSkin"},anchor:{comp:"wysiwyg.common.components.anchor.viewer.Anchor",skin:"wysiwyg.common.components.anchor.viewer.skins.AnchorSkin"},stripContainerSlideShow:{comp:"wysiwyg.viewer.components.StripContainerSlideShow",skin:"wysiwyg.common.components.stripSlideShow.viewer.skins.thinArrowsLargeSelectedCircleSkin"},stripContainerSlideShowSlide:{comp:"wysiwyg.viewer.components.StripContainerSlideShowSlide",skin:"wysiwyg.common.components.boxSlideShowSlide.viewer.skins.boxSlideShowSlideSkin"},shoppingCart:{}};angular.module("siteGeneratorStaticsCoreAppInternal").constant("componentClasses",b)}(core||(core={})),angular.module("siteGeneratorStaticsCoreAppInternal").constant("componentStyles",{styles:{line:["hl1","hl2","hl3","hl4"],vLine:["vl1","vl2","vl3","vl4"],button:["b1","b2","b3","b4"],textButton:["b1","b2","b3","b4"],media:["wp1","wp2","wp3","wp4"],extVideo:["v1"],audio:["ap1","ap2"],stripContainer:["strc1"],SlideShowGallery:["ssg1","ssg2","ssg3"],MatrixGallery:["mg1","mg2","mg3"],SliderGallery:["sg1","sg2","sg3"],PaginatedGridGallery:["pagg1","pagg2","pagg3"],Masonry:["tpms1"],Thumbnails:["thmb1"],StripSlideshow:["tpastr1"],StripShowcase:["tpasc1"],Accordion:["tpaacc1"],Freestyle:["tpaacc1"],Collage:["tpacol1"],Honeycomb:["tpahc1"],Impress:["tpaimprs"],map:["gm1"],form:["cf1","cf2"],social:["lb1"],subscribe:["SubscribeForm_1"],menu:["ddm1","ddm2","ddm3"],container:["c1","c2","c3","c4"],shape:["assh"]},getDecorationUniqueID:function(a){var b="";return void 0!==a.decorationKey&&(b=a.decorationKey),b+(a.decorationType||"")}}),angular.module("siteGeneratorStaticsCoreAppInternal").constant("componentExtraStyling",{extraStyles:{map:{r:{data:{mapStyle:[]},props:{mapType:"ROADMAP"}},sb:{data:{mapStyle:[{elementType:"labels.text.fill",featureType:"administrative",stylers:[{color:"#444444"}]},{elementType:"all",featureType:"landscape",stylers:[{color:"#f2f2f2"}]},{elementType:"geometry.fill",featureType:"landscape",stylers:[{color:"#e7fff4"}]},{elementType:"all",featureType:"poi",stylers:[{visibility:"off"}]},{elementType:"all",featureType:"road",stylers:[{saturation:-100},{lightness:45}]},{elementType:"labels.text",featureType:"road",stylers:[{color:"#c69665"}]},{elementType:"labels.text.stroke",featureType:"road",stylers:[{weight:.01}]},{elementType:"all",featureType:"road.highway",stylers:[{visibility:"simplified"}]},{elementType:"labels.icon",featureType:"road.arterial",stylers:[{visibility:"off"}]},{elementType:"all",featureType:"transit",stylers:[{visibility:"off"}]},{elementType:"all",featureType:"water",stylers:[{color:"#46bcec"},{visibility:"on"}]},{elementType:"geometry.fill",featureType:"water",stylers:[{color:"#5cddff"}]},{elementType:"labels.text.fill",featureType:"water",stylers:[{color:"#c69665"}]},{elementType:"labels.text.stroke",featureType:"water",stylers:[{weight:.01}]}]},props:{mapType:"ROADMAP"}},sg:{data:{mapStyle:[{elementType:"labels.text.fill",featureType:"administrative",stylers:[{color:"#444444"}]},{elementType:"all",featureType:"landscape",
stylers:[{color:"#f2f2f2"}]},{elementType:"all",featureType:"poi",stylers:[{visibility:"off"}]},{elementType:"all",featureType:"road",stylers:[{saturation:-100},{lightness:45}]},{elementType:"all",featureType:"road.highway",stylers:[{visibility:"simplified"}]},{elementType:"labels.icon",featureType:"road.arterial",stylers:[{visibility:"off"}]},{elementType:"all",featureType:"transit",stylers:[{visibility:"off"}]},{elementType:"all",featureType:"water",stylers:[{color:"#438865"},{visibility:"on"}]}]},props:{mapType:"ROADMAP"}},psp:{data:{mapStyle:[{elementType:"labels.text.fill",featureType:"administrative",stylers:[{color:"#444444"}]},{elementType:"geometry",featureType:"administrative.country",stylers:[{visibility:"on"}]},{elementType:"geometry",featureType:"administrative.province",stylers:[{visibility:"on"}]},{elementType:"geometry",featureType:"administrative.neighborhood",stylers:[{visibility:"on"}]},{elementType:"geometry",featureType:"administrative.land_parcel",stylers:[{visibility:"on"}]},{elementType:"all",featureType:"landscape",stylers:[{color:"#f2f2f2"}]},{elementType:"geometry",featureType:"landscape",stylers:[{visibility:"on"}]},{elementType:"geometry",featureType:"landscape.man_made",stylers:[{visibility:"off"}]},{elementType:"geometry",featureType:"landscape.natural.landcover",stylers:[{visibility:"on"}]},{elementType:"geometry",featureType:"landscape.natural.terrain",stylers:[{visibility:"on"}]},{elementType:"all",featureType:"poi",stylers:[{visibility:"off"}]},{elementType:"geometry.fill",featureType:"poi",stylers:[{color:"#e10404"},{visibility:"off"}]},{elementType:"geometry",featureType:"poi.attraction",stylers:[{visibility:"off"}]},{elementType:"geometry",featureType:"poi.business",stylers:[{visibility:"off"},{hue:"#ff0070"},{saturation:0},{lightness:-57}]},{elementType:"geometry",featureType:"poi.government",stylers:[{visibility:"off"}]},{elementType:"geometry.fill",featureType:"poi.medical",stylers:[{visibility:"on"},{color:"#eb65a0"}]},{elementType:"geometry",featureType:"poi.park",stylers:[{color:"#eb65a0"},{visibility:"on"}]},{elementType:"geometry.fill",featureType:"poi.school",stylers:[{hue:"#ff0000"},{visibility:"on"}]},{elementType:"geometry",featureType:"poi.sports_complex",stylers:[{visibility:"off"}]},{elementType:"all",featureType:"road",stylers:[{saturation:-100},{lightness:45}]},{elementType:"all",featureType:"road.highway",stylers:[{visibility:"simplified"}]},{elementType:"geometry",featureType:"road.highway",stylers:[{visibility:"on"},{color:"#bccf02"}]},{elementType:"labels.text",featureType:"road.highway",stylers:[{color:"#ffffff"}]},{elementType:"geometry",featureType:"road.highway.controlled_access",stylers:[{visibility:"off"}]},{elementType:"geometry",featureType:"road.arterial",stylers:[{visibility:"off"},{color:"#9b539c"}]},{elementType:"labels.icon",featureType:"road.arterial",stylers:[{visibility:"off"}]},{elementType:"all",featureType:"road.local",stylers:[{visibility:"off"},{hue:"#ff0000"}]},{elementType:"geometry",featureType:"road.local",stylers:[{visibility:"on"},{hue:"#ff0000"}]},{elementType:"all",featureType:"transit",stylers:[{visibility:"on"}]},{elementType:"geometry",featureType:"transit.line",stylers:[{visibility:"on"},{color:"#9b539c"}]},{elementType:"all",featureType:"transit.station.bus",stylers:[{visibility:"on"}]},{elementType:"all",featureType:"water",stylers:[{color:"#46bcec"},{visibility:"on"}]},{elementType:"geometry",featureType:"water",stylers:[{color:"#73c5e1"}]},{elementType:"labels.text",featureType:"water",stylers:[{visibility:"on"},{hue:"#ff0000"}]},{elementType:"labels.text.fill",featureType:"water",stylers:[{color:"#ffffff"}]},{elementType:"labels.text.stroke",featureType:"water",stylers:[{visibility:"off"}]}]},props:{mapType:"ROADMAP"}},slt:{data:{mapStyle:[]},props:{mapType:"SATELLITE"}}}}});var core;!function(a){var b=function(){function a(){}return a}();b.All="all",b.Content="content",b.Bg="bg",a.MediaUsageType=b}(core||(core={}));var core;!function(a){var b=function(){function a(){}return a}();a.GalleryTypes=b}(core||(core={})),angular.module("siteGeneratorStaticsCoreAppInternal").constant("fieldSignature",{address:"a",button:"b",copyrightMSG:"c",ContactMapTitle:"cm",ContactFormTitle:"cf",email:"e",fax:"f",form:"fo",label:"l",longText:"lt",logoText:"lg",audio:"m",video:"m",image:"m",gallery:"m",shape:"m",social:"m",media:"m",map:"mp",phoneNumber:"p",pageTitle:"pt",subTitle:"s",subscribe:"su",title:"t",url:"u",widget:"w",reverseObj:void 0,reverseLookup:function(a){var b=this;return this.reverseObj||(this.reverseObj={},_.each(this,function(a,c){"string"==typeof a&&(b.reverseObj[a]=c)})),this.reverseObj[a]}});var core;!function(a){function b(a){var b='<div class="layout box" type="box" design-policy="box" style="flex: 0 0 auto;">'+a+"</div>";return b}function c(a){var b='    <div class="v-box align-center" style="flex: 0 0 auto;">      <div class="h-box align-top flippable-content" style="max-width: '+(a||460)+'px;">        <div class="layout" header-layouts-value="Logo" design-policy="logo" style="flex: 0 0 auto;" '+t+'></div>        <div class="v-box align-left">          <div class="layout" header-layouts-value="logoText|BusinessName" design-policy="title" wordwrap="true" required="true" font="0"></div>          <div class="layout" header-layouts-value="BusinessTagline" design-policy="subTitle" wordwrap="true" required="true" font="9"></div>        </div>      </div>    </div>';return b}function d(a,b){var c='    <div class="v-box align-center" style="flex: 0 0 auto;">      <div class="h-box align-top flippable-content" style="max-width: '+(b||460)+'px;">        <div class="layout" '+(a?'required="true"':"")+' header-layouts-value="Logo" design-policy="logo" style="flex: 0 0 auto;" '+t+'></div>        <div class="v-box align-left">          <div class="layout" header-layouts-value="logoText|BusinessName|BusinessTagline" design-policy="title" wordwrap="true" required="true" font="0"></div>        </div>      </div>    </div>';return c}function e(a){var b='    <div class="v-box align-center" style="flex: 0 0 auto;">      <div class="layout" '+(a?'required="true"':"")+' header-layouts-value="Logo" design-policy="logo" '+t+"></div>    </div>";return b}function f(a,b,c){var d='<div class="h-box stretch flippable-content align-bottom" style="width: 100%">  <div class="h-box stretch align-bottom flippable-h">    <div class="h-box flippable-h remove-if-empty" style="flex: 0 0 auto;">      <div class="v-box align-right" style="max-width: 300px;flex: 0 0 auto;padding:5px 0;">        <div class="layout layout-align-center" header-layouts-value="MainEmail|Contact.phone number" font="1"></div>      </div>      <div style="width: 20px;"></div>    </div>    <div class="layout menu '+a+'" type="menu" header-layouts-value="Menu" required="true" align="center" '+(b?'required="true"':"")+' design-policy="menu">Menu</div>    <div class="h-box flippable-h remove-if-empty" style="flex: 0 0 auto;">      <div style="width: 20px;"></div>      <div class="v-box align-left" style="max-width: 260px;flex: 0 0 auto;padding:5px 0;">        <div class="layout" header-layouts-value="Social.SocialButtons" max-width="20" max-height="20" spacing="10"></div>      </div>    </div>  </div>  <div class="layout shopping-cart" type="shoppingCart" header-layouts-value="shoppingCart" style="flex: 0 0 auto;"></div>  <div class="layout button" type="button" header-layouts-value="button" style="flex: 0 0 auto;"></div></div>'+(c?'  <div class="layout line" type="line" full-screen="false" style="flex: 0 0 2px; margin-top: -2px; top: -40px; width: 100%;"></div>':"");return d}function g(a,b,c,d,e){c=c||"align-bottom",e=e||"left";var f='<div class="h-box layout stretch flippable-content '+b+" "+c+'" design-policy="menubar" style="width: 100%;">  <div class="h-box stretch '+c+' flippable-h" style="justify-content: flex-end;">    <div class="layout menu" type="menu" header-layouts-value="Menu" '+(d?'required="true"':"")+' design-policy="menu">Menu</div>'+(a?'    <div class="h-box flippable-h remove-if-empty" style="flex: 0 0 auto;">      <div style="width: 0px;"></div>      <div class="v-box align-right remove-if-empty" style="max-width: 300px;flex: 0 0 auto;padding: 5px 0;margin-left: 25px;">        <div class="layout layout-align-center" header-layouts-value="MainEmail" align="'+e+'" font="1"></div>      </div>      <div class="v-box align-right remove-if-empty" style="max-width: 260px;flex: 0 0 auto;padding: 5px 0;margin-left: 25px;">        <div class="layout layout-align-center" header-layouts-value="Contact.phone number" align="'+e+'" font="1"></div>      </div>    </div>':'    <div class="h-box flippable-h remove-if-empty" style="flex: 0 0 auto;">      <div style="width: 25px;"></div>      <div class="v-box align-right" style="max-width: 300px;flex: 0 0 auto;padding: 5px 0;">        <div class="layout layout-align-center" header-layouts-value="MainEmail|Contact.phone number" align="'+e+'" font="1"></div>      </div>    </div>')+'    <div class="h-box flippable-h remove-if-empty" style="flex: 0 0 auto;">      <div style="width: 25px;"></div>      <div class="v-box align-left" style="max-width: 260px;flex: 0 0 auto;padding: 5px 0;">        <div class="layout" header-layouts-value="Social.SocialButtons" max-width="20" max-height="20" spacing="10"></div>      </div>    </div>  </div>  <div class="layout shopping-cart" type="shoppingCart" header-layouts-value="shoppingCart" style="flex: 0 0 auto;"></div>  <div class="layout button" type="button" header-layouts-value="button" style="flex: 0 0 auto;"></div></div>';return f}function h(a,b,c){b=b||"align-bottom";var d='<div class="h-box layout stretch flippable-content '+a+" "+b+'" design-policy="menubar" style="width: 100%;">  <div class="h-box stretch '+b+' flippable-h" style="justify-content: flex-end;">    <div class="layout menu" type="menu" header-layouts-value="Menu" '+(c?'required="true"':"")+' design-policy="menu">Menu</div>    <div class="h-box flippable-h remove-if-empty" style="flex: 0 0 auto;">      <div style="width: 25px;"></div>      <div class="v-box align-left" style="max-width: 260px;flex: 0 0 auto;padding: 5px 0;">        <div class="layout" header-layouts-value="Social.SocialButtons" max-width="20" max-height="20" spacing="10"></div>      </div>    </div>  </div>  <div class="layout shopping-cart" type="shoppingCart" header-layouts-value="shoppingCart" style="flex: 0 0 auto;"></div>  <div class="layout button" type="button" header-layouts-value="button" style="flex: 0 0 auto;"></div></div>';return d}function i(a){var b='<div class="v-box flippable-v">  <div class="h-box flippable-h" style="flex: 1 1 auto">    <div style="flex: 0 0 auto; width: 20px;"></div>    <div class="v-box align-center" style="flex: 1 1 auto;">      <div class="layout" header-layouts-value="Logo" design-policy="logo" max-width="200" max-height="80" max-height-shape="40" max-height-shape-vertical="60"></div>      <div class="layout" header-layouts-value="logoText" design-policy="logoText" align="center" wordwrap="true" font="0"></div>      <div class="layout" header-layouts-value="BusinessName" design-policy="title" align="center" wordwrap="true" font="7"></div>      <div class="layout" header-layouts-value="BusinessTagline" design-policy="subTitle" align="center" wordwrap="true" font="9"></div>    </div>    <div style="flex: 0 0 auto; width: 20px;"></div>  </div>'+a+"</div>";return b}function j(a,b,c,d){c=c||200,d=d||80;var e='<div class="v-box flippable-v align-center">'+a+(b?'  <div class="layout line" type="line" full-screen="true" style="flex: 0 0 2px; margin-top: 8px; width: 100%;"></div>':"")+'  <div class="v-box align-center" style="width:940px;">'+('    <div class="layout" header-layouts-value="Logo" design-policy="logo" max-width="'+c+'" max-height="'+d+'" max-height-shape="40" max-height-shape-vertical="60"></div>')+'    <div class="layout" header-layouts-value="logoText" design-policy="logoText" align="center" wordwrap="true" font="0"></div>    <div class="layout" header-layouts-value="BusinessName" design-policy="title" align="center" wordwrap="true" font="7"></div>    <div class="layout" header-layouts-value="BusinessTagline" design-policy="subTitle" align="center" wordwrap="true" font="9"></div>  </div></div>';return e}function k(a,b){var c='<div class="h-box flippable-h stretch" header-design-policy="leftLogo">'+a+'  <div class="v-box align-right">    <div style="flex: 1 1 auto;"></div>'+g(!0,b,"align-top")+"  </div></div>";return c}function l(a,b,c,d){var e='<div class="v-box" header-design-policy="leftLogo">  <div class="h-box align-center flippable-h trim-end" style="flex: 0 0 auto;width: 100%; justify-content: flex-end;">    <div class="v-box align-left remove-if-empty" style="flex: 0 1 auto;margin-right: 25px;padding:5px 0;">      <div class="layout layout-align-center" header-layouts-value="MainEmail" wordwrap="true" align="left" font="1"></div>    </div>    <div class="v-box align-left remove-if-empty" style="flex: 0 1 auto;margin-right: 25px;padding:5px 0;">      <div class="layout layout-align-center" header-layouts-value="Contact.phone number" wordwrap="true" align="left" font="1"></div>    </div>    <div style="flex: 1 0 auto; justify-content: flex-end;" class="h-box remove-if-empty">      <div class="v-box align-left remove-if-empty" style="flex: 0 0 auto; padding: 5px 0;">        <div class="layout" header-layouts-value="Social.SocialButtons" max-width="20" max-height="20" spacing="10"></div>      </div>      <div class="layout shopping-cart" type="shoppingCart" header-layouts-value="shoppingCart" style="flex: 0 0 auto;"></div>    </div>  </div>'+(c?'  <div class="layout line" type="line" full-screen="true" style="flex: 0 0 2px; margin-top: 8px;margin-bottom: 10px; width: 100%;"></div>  <div class="h-box flippable-h stretch">'+a+'    <div class="v-box align-right">      <div style="flex: 1 1 auto;"></div>      <div class="h-box layout remove-if-empty align-top '+b+' flippable-content stretch" design-policy="menubar" style="width: 100%; justify-content: flex-end;">        <div class="layout menu" type="menu" '+(d?'required="true"':"")+' header-layouts-value="Menu" design-policy="menu">Menu</div>      </div>    </div>  </div>':"")+"</div>";return e}function m(a,b,c){var d='<div class="v-box align-left" header-design-policy="leftLogo">  <div class="h-box flippable-h" style="width: 100%;">'+a+"  </div>"+g(!0,b,void 0,!0)+(c?'  <div class="layout line" type="line" full-screen="false" style="flex: 0 0 2px; margin-top: -2px; top: -40px; width: 100%;"></div>':"")+"</div>";return d}function n(a,b,c){var d='<div class="v-box align-left" header-design-policy="leftLogo">  <div class="h-box flippable-h align-top" style="width: 100%;">'+a+'    <div style="flex: 1 0 0px;"></div>    <div class="v-box align-right remove-if-empty layout align-to-left-logo" design-policy="contacts">      <div class="v-box align-right remove-if-empty" style="max-width: 300px;flex: 0 0 auto;">        <div class="layout squash" header-layouts-value="MainEmail" font="1"></div>      </div>      <div class="v-box align-right remove-if-empty" style="max-width: 300px;flex: 0 0 auto;">        <div class="layout squash" header-layouts-value="Contact.phone number" font="1"></div>      </div>    </div>  </div>'+h(b,void 0,!0)+(c?'  <div class="layout line" type="line" full-screen="false" style="flex: 0 0 2px; margin-top: -2px; top: -40px; width: 100%;"></div>':"")+"</div>";return d}function o(){var a='<div class="v-box align-left remove-if-empty" style="flex: 0 1 auto;">\n          <div style="flex: 1 0 0px;"></div>\n          <div class="layout" header-layouts-value="BusinessName" design-policy="title" align="left" required="true" font="0"></div>\n          <div class="layout" header-layouts-value="BusinessTagline" design-policy="subTitle" align="left" required="true" font="9"></div>\n      </div>';return a}function p(){var a='<div class="v-box align-left remove-if-empty" style="flex: 0 1 auto;">\n          <div style="flex: 1 0 0px;"></div>\n          <div class="layout" header-layouts-value="BusinessName|BusinessTagline" design-policy="title" align="left" required="true" font="0"></div>\n      </div>';return a}function q(a,b,c){var d='<div class="h-box flippable-h" header-design-policy="leftLogo">\n        <div class="v-box remove-if-empty" style="flex: 0 0 auto;">\n            <div style="flex: 1 0 0px;"></div>\n            <div class="layout big-logo" header-layouts-value="Logo" design-policy="logo" required="true" max-width="'+a+'" max-height="'+b+'" max-height-shape="40" max-height-shape-vertical="60"></div>\n        </div>\n        '+c+'\n        <div class="v-box align-right remove-if-empty" style="flex: 1 1 auto; margin-left: 30px;">\n            <div class="layout squash" header-layouts-value="Contact.phone number" align="right" font="1"></div>\n            <div class="layout squash" header-layouts-value="MainEmail" align="right" font="1"></div>\n            <div class="h-box align-center remove-if-empty">\n              <div class="v-box align-left" style="max-width: 260px;flex: 0 0 auto;padding:5px 0;">\n                  <div class="layout" header-layouts-value="Social.SocialButtons" max-width="20" max-height="20" spacing="10"></div>\n              </div>\n              <div class="layout shopping-cart" type="shoppingCart" header-layouts-value="shoppingCart"></div>\n            </div>\n            <div style="flex: 1 0 40px;"></div>\n            <div class="layout menu" type="menu" header-layouts-value="Menu" design-policy="menu" style="width: 100%;">Menu</div>\n        </div>\n       </div>';return d}function r(a,b){var c='<div class="h-box align-center flippable-h" header-design-policy="leftLogo">\n        <div class="v-box remove-if-empty" style="flex: 0 0 auto;">\n            <div style="flex: 1 0 0px;"></div>\n            <div class="layout big-logo" header-layouts-value="Logo" design-policy="logo" required="true" max-width="'+a+'" max-height="'+b+'" max-height-shape="40" max-height-shape-vertical="60"></div>\n        </div>\n        <div class="v-box align-right remove-if-empty" style="flex: 1 1 auto; margin-left: 30px;">\n            <div class="h-box align-center flippable-h remove-if-empty trim-end" style="flex: 0 0 auto; width: 100%; justify-content: flex-end; margin-top: 5px; margin-bottom: 5px;">\n              <div class="v-box align-left remove-if-empty" style="flex: 0 1 auto;margin-right: 25px;">\n                <div class="layout layout-align-center" header-layouts-value="MainEmail" font="1"></div>\n              </div>\n              <div class="v-box align-left remove-if-empty" style="flex: 0 1 auto;margin-right: 25px;">\n                <div class="layout layout-align-center" header-layouts-value="Contact.phone number" font="1"></div>\n              </div>\n              <div class="v-box align-left remove-if-empty" style="flex: 0 1 auto;margin-right: 25px;">\n                <div class="layout" header-layouts-value="Social.SocialButtons" max-width="20" max-height="20" spacing="10"></div>\n              </div>\n              <div class="layout shopping-cart" type="shoppingCart" header-layouts-value="shoppingCart" style="margin-left: 0px;"></div>\n            </div>\n            <div class="layout menu" type="menu" header-layouts-value="Menu" design-policy="menu" style="width: 100%; margin-top: 5px; margin-bottom: 5px;">Menu</div>\n        </div>\n       </div>';return c}function s(a){var h=[{id:"headerLayout1",structure:"centeredMenuDown",html:i("")},{id:"headerLayout1",structure:"centeredMenuDown",html:i(f("",!0))},{id:"headerLayout1line",structure:"centeredMenuDown",html:i(f("",!0,!0))},{id:"headerLayout2A",structure:"centeredMenuUp",html:j("")},{id:"headerLayout2A",structure:"centeredMenuUp",html:j(g(!0,"menu-on-top",void 0,!0,"center"))},{id:"headerLayout2Aline",structure:"centeredMenuUp",required:"Logo|logoText|BusinessName|BusinessTagline",html:j(g(!0,"menu-on-top",void 0,!0,"center"),!0)},{id:"headerLayout5A",structure:"leftLogoMenuBaseline",html:k(c(),"menu-align-base-line")},{id:"headerLayout5A",structure:"leftLogoMenuBaseline",html:k(d(),"menu-align-base-line")},{id:"headerLayout5A",structure:"leftLogoMenuBaseline",html:k(e(),"menu-align-base-line")},{id:"headerLayout5Abox",structure:"leftLogoMenuBaseline",html:k(b(c()),"menu-align-base-line")},{id:"headerLayout5Abox",structure:"leftLogoMenuBaseline",html:k(b(d()),"menu-align-base-line")},{id:"headerLayout5Abox",structure:"leftLogoMenuBaseline",html:k(b(e(!0)),"menu-align-base-line")},{id:"headerLayout6",structure:"leftLogoMenuDown",html:m(c(940))},{id:"headerLayout6",structure:"leftLogoMenuDown",html:m(d(!1,940))},{id:"headerLayout6",structure:"leftLogoMenuDown",html:m(e(!0))},{id:"headerLayout6",structure:"leftLogoMenuDown",html:m("","menu-on-top")},{id:"headerLayout6line",structure:"leftLogoMenuDown",html:m(c(940),"",!0)},{id:"headerLayout6line",structure:"leftLogoMenuDown",html:m(d(!1,940),"",!0)},{id:"headerLayout6line",structure:"leftLogoMenuDown",html:m(e(!0),"",!0)},{id:"headerLayout8A",structure:"leftLogoMenuCenter",html:k(c(),"menu-align-center")},{id:"headerLayout8A",structure:"leftLogoMenuCenter",html:k(d(),"menu-align-center")},{id:"headerLayout8A",structure:"leftLogoMenuCenter",html:k(e(!0),"menu-align-center")},{id:"headerLayout8A",structure:"leftLogoMenuCenter",html:k("","menu-align-base-line")},{id:"headerLayout8Abox",structure:"leftLogoMenuCenter",html:k(b(c()),"menu-align-center")},{id:"headerLayout8Abox",structure:"leftLogoMenuCenter",html:k(b(d()),"menu-align-center")},{id:"headerLayout8Abox",structure:"leftLogoMenuCenter",html:k(b(e(!0)),"menu-align-center")},{id:"headerLayout10",structure:"leftLogoMenuDownContactsCenter",required:"Social.SocialButtons|shoppingCart",html:n(c(600))},{id:"headerLayout10",structure:"leftLogoMenuDownContactsCenter",required:"Social.SocialButtons|shoppingCart",html:n(d(!1,600))},{id:"headerLayout10",structure:"leftLogoMenuDownContactsCenter",required:"Social.SocialButtons|shoppingCart",html:n(e(!0))},{id:"headerLayout11",structure:"leftLogoMenuCenter",required:"Social.SocialButtons|MainEmail|Contact.phone number|shoppingCart",html:l(c(800),"menu-align-center",!0,!1)},{id:"headerLayout11",structure:"leftLogoMenuCenter",required:"Social.SocialButtons|MainEmail|Contact.phone number|shoppingCart",html:l(d(!1,800),"menu-align-center",!0,!1)},{id:"headerLayout11",structure:"leftLogoMenuCenter",required:"Social.SocialButtons|MainEmail|Contact.phone number|shoppingCart",html:l(e(!0),"menu-align-center",!0,!1)},{id:"headerLayout11",structure:"leftLogoMenuCenter",required:"Social.SocialButtons|MainEmail|Contact.phone number|shoppingCart",html:l("","menu-align-base-line",!0,!0)},{id:"headerLayout11",structure:"leftLogoMenuCenter",required:"Social.SocialButtons|MainEmail|Contact.phone number|shoppingCart",html:l("","menu-align-base-line",!1)}];if(a.bigLogo){var s=420,t=180,u=[{id:"headerLayout12BigLogo",structure:"centeredMenuUp",html:j("",!1,s,t)},{id:"headerLayout12BigLogo",structure:"centeredMenuUp",html:j(g(!0,"menu-on-top",void 0,!0,"center"),!1,s,t)},{id:"headerLayout12lineBigLogo",structure:"centeredMenuUp",required:"Logo|logoText|BusinessName|BusinessTagline",html:j(g(!0,"menu-on-top",void 0,!0,"center"),!0,s,t)},{id:"headerLayout13BigLogo",structure:"leftLogoBig",html:q(s,t,"")},{id:"headerLayout13BigLogo",structure:"leftLogoBig",html:q(s,t,p())},{id:"headerLayout13BigLogo",structure:"leftLogoBig",html:q(s,t,o())},{id:"headerLayout14BigLogo",structure:"leftLogoBig",html:r(s,t)}];h=_.union(h,u)}return h}s.$inject=["flags"];var t='max-width="160" max-height="80" max-height-shape="40" max-height-shape-vertical="60"';angular.module("siteGeneratorStaticsCoreAppInternal").factory("headerLayouts",s)}(core||(core={}));var core;!function(a){var b=30,c=30,d=80,e=40,f=20,g=20,h=10,i=function(){var a='    <div class="v-box align-left remove-if-empty" style="flex: 1 1 auto;padding: 0  5px;">      <div class="layout layout-align-center" header-layouts-value="MainEmail" required="true" wordwrap="true" font="1"></div>    </div>    <div class="h-box align-center" style="flex-wrap: wrap;flex: 1 1 auto;justify-content: space-between;">      <div class="v-box align-left remove-if-empty" style="flex: 0 1 auto;padding: 0  5px;">        <div class="layout" header-layouts-value="Contact.phone number" required="true" wordwrap="true" font="1"></div>      </div>      <div class="v-box align-left remove-if-empty" style="flex: 0 0 auto;padding: 0  5px;">'+('        <div class="layout" header-layouts-value="Social.SocialButtons" required="true" max-width="'+g+'" max-height="'+f+'" spacing="'+h+'"></div>')+"      </div>    </div>";return a},j=function(a,b){var c=b?'wordwrap="true"':"",d=a?'required="true"':"",e='\n<div class="v-box align-left remove-if-empty" style="flex: 0 1 auto;margin: 0  5px;">\n  <div class="layout" header-layouts-value="MainEmail|Contact.phone number" '+c+" "+d+' font="1"></div>\n</div>\n<div class="v-box align-left remove-if-empty" style="flex: 0 0 auto;margin: 0  5px;">\n  <div class="layout" header-layouts-value="Social.SocialButtons" required="true" max-width="'+g+'" max-height="'+f+'" spacing="'+h+'"></div>\n</div>\n';return e},k=function(){var a='      <div class="v-box align-left remove-if-empty" style="flex: 0 1 auto;padding: 0  5px;">        <div class="layout" header-layouts-value="MainEmail" wordwrap="true" font="1"></div>      </div>      <div class="v-box align-left remove-if-empty" style="flex: 0 1 auto;padding: 0  5px;">        <div class="layout" header-layouts-value="Contact.phone number" wordwrap="true" font="1"></div>      </div>';return a},l=function(){var a='    <div class="v-box align-left" style="flex: 1 1 auto;">      <div class="h-box align-center">        <div class="v-box align-left remove-if-empty" style="flex: 0 0 auto;padding: 0 5px;">'+('          <div class="layout" header-layouts-value="Logo" design-policy="logo" max-width="'+d+'" max-height="'+e+'"></div>')+'        </div>        <div class="v-box align-left remove-if-empty" style="padding: 0 5px;">          <div class="layout" header-layouts-value="BusinessName" design-policy="title" wordwrap="true" font="0"></div>          <div class="layout" header-layouts-value="BusinessTagline" design-policy="subTitle" wordwrap="true" font="9"></div>        </div>      </div>    </div>';return a},m=function(a){var d='<dvi class="v-box">  <div class="v-box">    <div class="h-box align-center" style="margin: 0 -5px;">'+l()+('      <div class="layout shopping-cart" type="shoppingCart" header-layouts-value="shoppingCart" style="flex: 0 0 auto;margin: 0 5px;width: '+b+"px; height: "+b+'px;"></div>')+('      <div class="layout menu" type="menu" header-layouts-value="Menu" style="flex: 0 0 auto;margin: 0 5px;width: '+c+"px; height: "+c+'px;"></div>')+'    </div>  </div>  <div class="v-box remove-if-empty">    <div class="layout line" type="line" style="flex: 0 0 2px; margin: 4px 0; width: 100%;"></div>    <div class="h-box align-center" style="flex-wrap: wrap; justify-content: space-between;margin: 0 -5px;">'+a+"    </div>  </div></div>";return d},n=function(){var a='<dvi class="v-box">  <div class="v-box remove-if-empty">    <div class="h-box align-center" style="margin: 0 -5px;">      <div class="v-box align-left" style="flex: 1 1 auto;padding: 0  5px;">'+('        <div class="layout" header-layouts-value="MainEmail|Contact.phone number|Social.SocialButtons" wordwrap="true" font="1" max-width="'+g+'" max-height="'+f+'" spacing="'+h+'"></div>')+"      </div>"+('      <div class="layout shopping-cart" type="shoppingCart" header-layouts-value="shoppingCart" style="flex: 0 0 auto;margin: 0 5px;width: '+b+"px; height: "+b+'px;"></div>')+('      <div class="layout menu" type="menu" header-layouts-value="Menu" style="flex: 0 0 auto;margin: 0 5px;width: '+c+"px; height: "+c+'px;"></div>')+'    </div>    <div class="layout line" type="line" style="flex: 0 0 2px; margin: 4px 0; width: 100%;"></div>  </div>  <div class="v-box">    <div class="h-box align-center" style="margin: 0 -5px;">'+l()+"    </div>  </div></div>";return a},o=function(){var a='<div class="v-box align-center" style="padding: 0 5px;width: 100%;">    <div class="layout" header-layouts-value="MainEmail" align="center" wordwrap="true" font="1"></div>    <div class="layout" header-layouts-value="Contact.phone number" align="center" wordwrap="true" font="1"></div>'+('    <div class="layout" header-layouts-value="Social.SocialButtons" align="center" max-width="'+g+'" max-height="'+f+'" spacing="'+h+'"></div>')+"</div>";return a},p=function(){var a='  <div class="v-box align-left remove-if-empty" style="flex: 1 0 0;margin: 0 5px;">     <div class="layout" header-layouts-value="MainEmail" required="true" align="center" font="1"></div>  </div>  <div class="v-box align-center remove-if-empty" style="flex: 0 0 auto;margin: 0 5px;">'+('    <div class="layout" header-layouts-value="Social.SocialButtons" align="center" max-width="'+g+'" max-height="'+f+'" spacing="'+h+'"></div>')+'  </div>  <div class="v-box align-right remove-if-empty" style="flex: 1 0 0;margin: 0 5px;">     <div class="layout" header-layouts-value="Contact.phone number" required="true" align="center" font="1"></div>  </div>';return a},q=function(a){var f='<dvi class="v-box">  <div class="h-box">'+('    <div class="v-box" style="width: '+b+'px">')+('      <div class="layout shopping-cart" type="shoppingCart" header-layouts-value="shoppingCart" style="flex: 0 0 auto;margin: 0;width: '+b+"px; height: "+b+'px;"></div>')+'    </div>    <div class="v-box align-center" style="margin: 0 10px;flex: 1 1 auto;">'+('          <div class="layout" header-layouts-value="Logo" design-policy="logo" max-width="'+d+'" max-height="'+e+'"></div>')+'          <div class="layout" header-layouts-value="BusinessName" design-policy="title" wordwrap="true" align="center" font="0"></div>          <div class="layout" header-layouts-value="BusinessTagline" design-policy="subTitle" wordwrap="true" align="center" font="9"></div>    </div>'+('    <div class="v-box" style="width: '+c+'px">')+('      <div class="layout menu" type="menu" header-layouts-value="Menu" style="flex: 0 0 auto;margin: 0;width: '+c+"px; height: "+c+'px;"></div>')+'    </div>  </div>  <div class="v-box remove-if-empty">    <div class="layout line" type="line" style="flex: 0 0 2px; margin: 4px 0; width: 100%;"></div>    <div class="h-box align-center" style="justify-content: space-between;margin: 0 -5px;">'+a+"    </div>  </div></div>";return f};angular.module("siteGeneratorStaticsCoreAppInternal").constant("mobileHeaderLayouts",[{id:"mobileHeader1",structure:"contactsOnBottom",html:m(i())},{id:"mobileHeader1",structure:"contactsOnBottom",html:m(j(!1,!0))},{id:"mobileHeader1",structure:"contactsOnBottom",html:m(k())},{id:"mobileHeader2",structure:"contactsOnTop",html:n()},{id:"mobileHeader3",structure:"centered",html:q(o())},{id:"mobileHeader4",structure:"centered",html:q(p())},{id:"mobileHeader4",structure:"centered",html:q(j(!0,!1))}])}(core||(core={}));var core;!function(a){var b=20,c=20,d=10,e=function(){var a='<div class="v-box  align-center">    <div class="layout" header-layouts-value="BusinessName" design-policy="title" wordwrap="true" align="center" font="7"></div>    <div class="v-box align-center remove-if-empty" style="flex: 1 1 auto;max-width: 100%;">      <div class="spacer" style="height: 20px;"></div>      <div class="layout squash" header-layouts-value="MainEmail" align="center" wordwrap="true" font="1"></div>      <div class="layout squash" header-layouts-value="Contact.phone number" align="center" wordwrap="true" font="1"></div>      <div class="layout squash" header-layouts-value="Contact.fax" align="center" font="1" wordwrap="true"></div>      <div class="layout squash" header-layouts-value="Contact.address for display" wordwrap="true" align="center" font="1"></div>    </div>'+('    <div class="layout" header-layouts-value="Social.SocialButtons" max-width="'+b+'" max-height="'+c+'" spacing="'+d+'" style="margin: 20px 0px 0px;"></div>')+'    <div class="v-box align-center remove-if-empty" style="flex: 1 1 auto;max-width: 100%;">      <div class="spacer" style="height: 40px;"></div>      <div class="layout" header-layouts-value="CopyrightMessage" wordwrap="true" align="center" font="1"></div>    </div></div>';
return a};angular.module("siteGeneratorStaticsCoreAppInternal").constant("mobileFooterLayouts",[{id:"mobileFooter1",structure:"centered",html:e()}])}(core||(core={})),function(){function a(){var a='<div class="v-box">  <div class="v-box align-center remove-if-empty" style="flex: 1 1 auto">      <div class="layout" header-layouts-value="BusinessName" design-policy="title" wordwrap="true" align="center" font="7"></div>      <div class="spacer" style="height: 30px;"></div>  </div>  <div class="h-box" style="flex: 1 1 auto">    <div class="v-box align-center remove-if-empty" style="flex: 1 1 auto;">      <div class="layout" type="label" header-layouts-value="Follow" align="center" font="7"></div>      <div class="spacer" style="height: 10px;"></div>      <div class="h-box align-center" style="flex: 1 1 auto;max-width: 100%;">       <div class="v-box align-center" style="flex: 1 1 auto;max-width: 100%;">        <div class="layout" header-layouts-value="Social.SocialButtons" required="true" max-width="20" max-height="20" spacing="10"></div>       </div>      </div>    </div>    <div class="v-box align-center remove-if-empty" style="flex: 1 1 auto;">      <div class="layout" type="label" header-layouts-value="Contact" align="center" font="7"></div>      <div class="spacer" style="height: 10px;"></div>      <div class="h-box align-center" style="flex: 1 1 auto;max-width: 100%;">       <div class="v-box align-center" style="flex: 1 1 auto;max-width: 100%;">        <div class="layout squash" header-layouts-value="MainEmail" align="center" font="1"></div>        <div class="layout squash" header-layouts-value="Contact.phone number" align="center" font="1"></div>        <div class="layout squash" header-layouts-value="Contact.fax" align="center" font="1"></div>       </div>      </div>    </div>    <div class="v-box align-center remove-if-empty" style="flex: 1 1 auto;">      <div class="layout" type="label" header-layouts-value="Address" align="center" font="7"></div>      <div class="spacer" style="height: 10px;"></div>      <div class="h-box align-center" style="flex: 1 1 auto;max-width: 100%;">       <div class="v-box align-center" style="flex: 1 1 auto;max-width: 100%;">        <div class="layout" header-layouts-value="Contact.address for display" wordwrap="true" required="true" align="center" font="1"></div>       </div>      </div>    </div>  </div>  <div class="v-box align-center remove-if-empty" style="flex: 1 1 auto">    <div class="spacer" style="height: 40px;"></div>    <div class="layout" header-layouts-value="CopyrightMessage" wordwrap="true" align="center" font="1"></div>  </div></div>';return a}function b(){var a='<div class="v-box">  <div class="h-box trim-end" style="flex: 1 1 auto">    <div class="v-box align-left remove-if-empty" style="flex: 0 1 auto; margin-right: 100px;">      <div class="layout first-line" header-layouts-value="BusinessName" design-policy="title" align="left" font="7"></div>    </div>    <div class="v-box align-left remove-if-empty" style="flex: 0 1 auto; margin-right: 100px;">      <div class="layout first-line" type="label" header-layouts-value="Address" font="7"></div>      <div class="spacer" style="height: 10px;"></div>      <div class="layout" header-layouts-value="Contact.address for display" wordwrap="true" font="1"></div>    </div>    <div class="v-box align-left remove-if-empty" style="flex: 0 1 auto; margin-right: 100px;">      <div class="layout first-line" type="label" header-layouts-value="Contact" font="7"></div>      <div class="spacer" style="height: 10px;"></div>      <div class="layout squash" header-layouts-value="MainEmail" font="1"></div>      <div class="layout squash" header-layouts-value="Contact.phone number" font="1"></div>      <div class="layout squash" header-layouts-value="Contact.fax" font="1"></div>    </div>    <div class="v-box align-left remove-if-empty" style="flex: 0 1 auto; margin-right: 100px;">      <div class="layout first-line" type="label" header-layouts-value="Follow" font="7"></div>      <div class="spacer" style="height: 10px;"></div>      <div class="layout" header-layouts-value="Social.SocialButtons" max-width="20" max-height="20" spacing="10"></div>    </div>  </div>  <div class="v-box align-left remove-if-empty" style="flex: 1 1 auto">    <div class="spacer" style="height: 40px;"></div>    <div class="layout" header-layouts-value="CopyrightMessage" wordwrap="true" font="1"></div>  </div></div>';return a}function c(){var a='<div class="v-box">  <div class="h-box" style="flex: 1 1 auto">    <div class="v-box align-left remove-if-empty" style="flex: 0 1 auto;">      <div class="layout first-line" header-layouts-value="BusinessName" design-policy="title" align="left" font="7"></div>    </div>    <div style="flex: 1 0 0px;"></div>    <div class="v-box align-left remove-if-empty" style="flex: 0 1 auto; padding-left: 100px;">      <div class="layout first-line" header-layouts-value="MainEmail" font="1"></div>    </div>    <div class="v-box align-left remove-if-empty" style="flex: 0 1 auto; padding-left: 100px;">      <div class="layout first-line" header-layouts-value="Contact.address for display" wordwrap="true" font="1"></div>    </div>    <div class="v-box align-left remove-if-empty" style="flex: 0 1 auto; padding-left: 100px;">      <div class="layout first-line squash" header-layouts-value="Contact.phone number" font="1"></div>      <div class="layout first-line squash" header-layouts-value="Contact.fax" font="1"></div>    </div>  </div>  <div class="v-box align-center remove-if-empty" style="flex: 1 1 auto">    <div class="spacer" style="height: 40px;"></div>    <div class="h-box stretch align-center" style="width: 100%">      <div class="v-box align-left">        <div class="layout" header-layouts-value="CopyrightMessage" wordwrap="true" font="1"></div>      </div>      <div class="v-box align-right">        <div class="layout" header-layouts-value="Social.SocialButtons" max-width="20" max-height="20" spacing="10"></div>      </div>    </div>  </div></div>';return a}function d(){var a='<div class="v-box">  <div class="v-box align-center" style="flex: 1 1 auto">      <div class="layout" header-layouts-value="BusinessName" design-policy="title" wordwrap="true" align="center" font="7"></div>  </div>  <div class="spacer" style="height: 30px;"></div>  <div class="h-box flippable-h align-center" style="flex: 1 1 auto">    <div class="v-box align-center" style="flex: 1 1 auto;">      <div class="layout" header-layouts-value="Contact.address for display" wordwrap="true" align="center" required="true" font="1"></div>    </div>    <div class="v-box align-center" style="flex: 1 1 auto;">      <div class="layout squash" header-layouts-value="MainEmail" align="center" font="1"></div>      <div class="h-box align-center remove-if-empty squash">        <div class="layout" header-layouts-value="Contact.phone number" align="center" font="1" style="margin-left: 5px; margin-right: 5px;"></div>        <div class="layout" header-layouts-value="Contact.fax" font="1" align="center" style="margin-left: 5px; margin-right: 5px;"></div>      </div>    </div>    <div class="v-box align-center" style="flex: 1 1 auto;">      <div class="layout" header-layouts-value="Social.SocialButtons" required="true" max-width="20" max-height="20" spacing="10"></div>    </div>  </div>  <div class="v-box align-center remove-if-empty" style="flex: 1 1 auto">    <div class="spacer" style="height: 40px;"></div>    <div class="layout" header-layouts-value="CopyrightMessage" wordwrap="true" align="center" font="1"></div>  </div></div>';return a}function e(){var a='<div class="v-box">  <div class="h-box" style="flex: 1 1 auto">    <div class="v-box align-center" style="flex: 1 1 auto;">      <div class="layout" header-layouts-value="BusinessName" design-policy="title" wordwrap="true" align="center" font="7"></div>      <div class="spacer" style="height: 20px;"></div>      <div class="layout squash" header-layouts-value="MainEmail" align="center" font="1"></div>      <div class="h-box align-center remove-if-empty squash">        <div class="layout" header-layouts-value="Contact.phone number" align="center" font="1" style="margin-left: 5px; margin-right: 5px;"></div>        <div class="layout" header-layouts-value="Contact.fax" align="center" font="1" style="margin-left: 5px; margin-right: 5px;"></div>      </div>      <div class="layout squash" header-layouts-value="Contact.address for display" wordwrap="true" align="center" font="1"></div>      <div class="layout" header-layouts-value="Social.SocialButtons" max-width="20" max-height="20" spacing="10" style="margin: 20px 0px 0px;"></div>      <div class="v-box align-center remove-if-empty" style="flex: 1 1 auto;max-width: 100%;">        <div class="spacer" style="height: 40px;"></div>        <div class="layout" header-layouts-value="CopyrightMessage" wordwrap="true" align="center" font="1"></div>      </div>    </div>  </div></div>';return a}angular.module("siteGeneratorStaticsCoreAppInternal").constant("footerLayouts",[{id:"footerLayout1",structure:"centered",html:a()},{id:"footerLayout2",structure:"columns",html:b()},{id:"footerLayout3",structure:"columns",html:c()},{id:"footerLayout4",structure:"centered",modes:[{css:"flip-h"}],html:d()},{id:"footerLayout5",structure:"centered",html:e()}])}(),angular.module("siteGeneratorStaticsCoreAppInternal").constant("nodeFilterTypes",{FULL:"f",PART:"p",AGGREGATOR:"a",REPEATER:"r"}),angular.module("siteGeneratorStaticsCoreAppInternal").constant("nodeInputTypes",{types:[{contentType:["text"],contentSubType:["title"],inputTemplateId:"title"},{contentType:["text"],contentSubType:["subTitle"],inputTemplateId:"sub-title"},{contentType:["text"],contentSubType:["longText"],inputTemplateId:"paragraph"},{contentType:["text"],contentSubType:["address"],inputTemplateId:"text"},{contentType:["text"],contentSubType:["shortText","phoneNumber","fax","logoText","copyrightMSG","email","url","pageTitle","form","ContactFormTitle","ContactMapTitle","widget"],inputTemplateId:"text"},{contentType:["stringArray"],contentSubType:["stringArray"],inputTemplateId:"text"},{contentType:["media"],contentSubType:["social","image","video","audio","any"],inputTemplateId:"media"},{contentType:["button"],contentSubType:["button"],inputTemplateId:"button"},{contentType:["void"],contentSubType:["void"],inputTemplateId:"void"},{contentType:["gate"],contentSubType:["gate"],inputTemplateId:"gate"},{contentType:["subscribe"],contentSubType:["subscribe"],inputTemplateId:"subscribe"},{contentType:["text"],contentSubType:["map"],inputTemplateId:"address"}],getInputType:function(a,b){var c=_.find(this.types,function(c){return-1===c.contentType.indexOf(a)||-1===c.contentSubType.indexOf(b)&&b&&b.length?void 0:c});return c?c.inputTemplateId:null}}),angular.module("siteGeneratorStaticsCoreAppInternal").constant("RichTextTags",{0:"h1",1:"h2",2:"h2",3:"h3",4:"h4",5:"h5",6:"h6",7:"p",8:"p",9:"p",10:"p"}),angular.module("siteGeneratorStaticsCoreAppInternal").constant("santaFontMetadata",{anton:{displayName:"Anton",fontFamily:"anton",cdnName:"Anton",genericFamily:"sans-serif",provider:"google",characterSets:["latin","latin-ext"],permissions:"all",fallbacks:"",spriteIndex:0},arial:{displayName:"Arial",fontFamily:"arial",cdnName:"",genericFamily:"sans-serif",provider:"system",characterSets:["latin","latin-ext","cyrillic","hebrew","arabic"],permissions:"all",fallbacks:"ｍｓ ｐゴシック,ms pgothic,돋움,dotum,helvetica",spriteIndex:2},"courier new":{displayName:"Courier New",fontFamily:"courier new",cdnName:"",genericFamily:"monospace",provider:"system",characterSets:["latin","latin-ext","cyrillic","hebrew","arabic"],permissions:"all",fallbacks:"courier-ps-w01,courier-ps-w02,courier-ps-w10",spriteIndex:7},"arial black":{displayName:"Arial Black",fontFamily:"arial black",cdnName:"",genericFamily:"sans-serif",provider:"system",characterSets:["latin","latin-ext","cyrillic"],permissions:"all",fallbacks:"arial-w01-black,arial-w02-black,arial-w10 black",spriteIndex:12},basic:{displayName:"Basic",fontFamily:"basic",cdnName:"Basic",genericFamily:"sans-serif",provider:"google",characterSets:["latin","latin-ext"],permissions:"all",fallbacks:"",spriteIndex:15},caudex:{displayName:"Caudex",fontFamily:"caudex",cdnName:"Caudex",genericFamily:"serif",provider:"google",characterSets:["latin","latin-ext"],permissions:"all",fallbacks:"",spriteIndex:17},"chelsea market":{displayName:"Chelsea Market",fontFamily:"chelsea market",cdnName:"Chelsea+Market",genericFamily:"fantasy",provider:"google",characterSets:["latin"],permissions:"all",fallbacks:"",spriteIndex:19},"comic sans ms":{displayName:"Comic Sans MS",fontFamily:"comic sans ms",cdnName:"",genericFamily:"cursive",provider:"system",characterSets:["latin","latin-ext","cyrillic"],permissions:"all",fallbacks:"comic-sans-w01-regular,comic-sans-w02-regular,comic-sans-w10-regular",spriteIndex:20},corben:{displayName:"Corben",fontFamily:"corben",cdnName:"Corben",genericFamily:"serif",provider:"google",characterSets:["latin"],permissions:"all",fallbacks:"",spriteIndex:23},"eb garamond":{displayName:"EB Garamond",fontFamily:"eb garamond",cdnName:"EB+Garamond",genericFamily:"serif",provider:"google",characterSets:["latin","latin-ext","cyrillic"],permissions:"all",fallbacks:"",spriteIndex:24},enriqueta:{displayName:"Enriqueta",fontFamily:"enriqueta",cdnName:"Enriqueta",genericFamily:"serif",provider:"google",characterSets:["latin","latin-ext"],permissions:"all",fallbacks:"",spriteIndex:27},forum:{displayName:"Forum",fontFamily:"forum",cdnName:"Forum",genericFamily:"serif",provider:"google",characterSets:["latin","latin-ext","cyrillic"],permissions:"all",fallbacks:"",spriteIndex:29},"fredericka the great":{displayName:"Fredericka the Great",fontFamily:"fredericka the great",cdnName:"Fredericka+the+Great",genericFamily:"fantasy",provider:"google",characterSets:["latin"],permissions:"all",fallbacks:"",spriteIndex:32},georgia:{displayName:"Georgia",fontFamily:"georgia",cdnName:"",genericFamily:"serif",provider:"system",characterSets:["latin","latin-ext","cyrillic"],permissions:"all",fallbacks:"palatino,book antiqua,palatino linotype",spriteIndex:33},impact:{displayName:"Impact",fontFamily:"impact",cdnName:"",genericFamily:"sans-serif",provider:"system",characterSets:["latin","latin-ext","cyrillic"],permissions:"all",fallbacks:"impact-w01-2010,impact-w02-2010,impact-w10-2010",spriteIndex:36},"jockey one":{displayName:"Jockey One",fontFamily:"jockey one",cdnName:"Jockey+One",genericFamily:"sans-serif",provider:"google",characterSets:["latin","latin-ext"],permissions:"all",fallbacks:"",spriteIndex:39},"josefin slab":{displayName:"Josefin Slab",fontFamily:"josefin slab",cdnName:"Josefin+Slab",genericFamily:"serif",provider:"google",characterSets:["latin"],permissions:"all",fallbacks:"",spriteIndex:41},jura:{displayName:"Jura",fontFamily:"jura",cdnName:"Jura",genericFamily:"sans-serif",provider:"google",characterSets:["latin","latin-ext","cyrillic"],permissions:"all",fallbacks:"",spriteIndex:42},"kelly slab":{displayName:"Kelly Slab",fontFamily:"kelly slab",cdnName:"Kelly+Slab",genericFamily:"fantasy",provider:"google",characterSets:["latin","latin-ext","cyrillic"],permissions:"all",fallbacks:"",spriteIndex:45},"lucida console":{displayName:"Lucida Console",fontFamily:"lucida console",cdnName:"",genericFamily:"monospace",provider:"system",characterSets:["latin","latin-ext"],permissions:"all",fallbacks:"lucida-console-w01",spriteIndex:48},"lucida sans unicode":{displayName:"Lucida Sans Unicode",fontFamily:"lucida sans unicode",cdnName:"",genericFamily:"sans-serif",provider:"system",characterSets:["latin"],permissions:"all",fallbacks:"lucida grande",spriteIndex:50},"marck script":{displayName:"Marck Script",fontFamily:"marck script",cdnName:"Marck+Script",genericFamily:"cursive",provider:"google",characterSets:["latin","latin-ext","cyrillic"],permissions:"all",fallbacks:"",spriteIndex:51},lobster:{displayName:"Lobster",fontFamily:"lobster",cdnName:"Lobster",genericFamily:"cursive",provider:"google",characterSets:["latin","latin-ext","cyrillic"],permissions:"all",fallbacks:"",spriteIndex:54},"mr de haviland":{displayName:"Mr De Haviland",fontFamily:"mr de haviland",cdnName:"Mr+De+Haviland",genericFamily:"cursive",provider:"google",characterSets:["latin"],permissions:"all",fallbacks:"",spriteIndex:57},niconne:{displayName:"Niconne",fontFamily:"niconne",cdnName:"Niconne",genericFamily:"fantasy",provider:"google",characterSets:["latin"],permissions:"all",fallbacks:"",spriteIndex:58},"noticia text":{displayName:"Noticia Text",fontFamily:"noticia text",cdnName:"Noticia+Text",genericFamily:"serif",provider:"google",characterSets:["latin","latin-ext"],permissions:"all",fallbacks:"",spriteIndex:59},"open sans":{displayName:"Open Sans",fontFamily:"open sans",cdnName:"",genericFamily:"sans-serif",provider:"open source",characterSets:["latin","latin-ext","cyrillic"],permissions:"all",fallbacks:"",spriteIndex:61},overlock:{displayName:"Overlock",fontFamily:"overlock",cdnName:"Overlock",genericFamily:"sans-serif",provider:"google",characterSets:["latin"],permissions:"all",fallbacks:"",spriteIndex:64},"palatino linotype":{displayName:"Palatino Linotype",fontFamily:"palatino linotype",cdnName:"",genericFamily:"serif",provider:"system",characterSets:["latin","latin-ext"],permissions:"all",fallbacks:"",spriteIndex:65},"patrick hand":{displayName:"Patrick Hand",fontFamily:"patrick hand",cdnName:"Patrick+Hand",genericFamily:"cursive",provider:"google",characterSets:["latin","latin-ext"],permissions:"all",fallbacks:"",spriteIndex:67},play:{displayName:"Play",fontFamily:"play",cdnName:"Play",genericFamily:"sans-serif",provider:"google",characterSets:["latin","latin-ext","cyrillic"],permissions:"all",fallbacks:"",spriteIndex:69},sarina:{displayName:"Sarina",fontFamily:"sarina",cdnName:"Sarina",genericFamily:"cursive",provider:"google",characterSets:["latin","latin-ext"],permissions:"all",fallbacks:"",spriteIndex:72},signika:{displayName:"Signika",fontFamily:"signika",cdnName:"Signika",genericFamily:"sans-serif",provider:"google",characterSets:["latin","latin-ext"],permissions:"all",fallbacks:"",spriteIndex:74},spinnaker:{displayName:"Spinnaker",fontFamily:"spinnaker",cdnName:"Spinnaker",genericFamily:"sans-serif",provider:"google",characterSets:["latin"],permissions:"all",fallbacks:"",spriteIndex:76},tahoma:{displayName:"Tahoma",fontFamily:"tahoma",cdnName:"",genericFamily:"sans-serif",provider:"system",characterSets:["latin","latin-ext","hebrew","arabic"],permissions:"all",fallbacks:"tahoma-w01-regular,tahoma-w02-regular,tahoma-w10-regular,tahoma-w15--regular,tahoma-w99-regular",spriteIndex:77},"times new roman":{displayName:"Times New Roman",fontFamily:"times new roman",cdnName:"",genericFamily:"serif",provider:"system",characterSets:["latin","latin-ext","cyrillic","hebrew","arabic"],permissions:"all",fallbacks:"times",spriteIndex:81},verdana:{displayName:"Verdana",fontFamily:"verdana",cdnName:"",genericFamily:"sans-serif",provider:"system",characterSets:["latin","latin-ext","cyrillic"],permissions:"all",fallbacks:"geneva",spriteIndex:86},"helveticaneuew01-45ligh":{displayName:"Helvetica 45",fontFamily:"helveticaneuew01-45ligh",cdnName:"",genericFamily:"sans-serif",provider:"monotype",characterSets:["latin"],permissions:"studio",fallbacks:"",spriteIndex:89},"helveticaneuew01-65medi":{displayName:"Helvetica 65",fontFamily:"helveticaneuew01-65medi",cdnName:"",genericFamily:"sans-serif",provider:"monotype",characterSets:["latin"],permissions:"studio",fallbacks:"",spriteIndex:90},"helveticaneuew01-75bold":{displayName:"Helvetica 75",fontFamily:"helveticaneuew01-75bold",cdnName:"",genericFamily:"sans-serif",provider:"monotype",characterSets:["latin"],permissions:"studio",fallbacks:"",spriteIndex:91},"helveticaneuew01-95blac":{displayName:"Helvetica 95",fontFamily:"helveticaneuew01-95blac",cdnName:"",genericFamily:"sans-serif",provider:"monotype",characterSets:["latin"],permissions:"studio",fallbacks:"",spriteIndex:92},"helveticaneuew01-thin":{displayName:"Helvetica 35",fontFamily:"helveticaneuew01-thin",cdnName:"",genericFamily:"sans-serif",provider:"monotype",characterSets:["latin"],permissions:"studio",fallbacks:"",spriteIndex:93},"helveticaneuew01-ultlt":{displayName:"Helvetica 25",fontFamily:"helveticaneuew01-ultlt",cdnName:"",genericFamily:"sans-serif",provider:"monotype",characterSets:["latin"],permissions:"studio",fallbacks:"",spriteIndex:94},"helveticaneuew02-45ligh":{displayName:"Helvetica 45 Latin Ext",fontFamily:"helveticaneuew02-45ligh",cdnName:"",genericFamily:"sans-serif",provider:"monotype",characterSets:["latin-ext"],permissions:"studio",fallbacks:"",spriteIndex:95},"helveticaneuew02-65medi":{displayName:"Helvetica 65 Latin Ext",fontFamily:"helveticaneuew02-65medi",cdnName:"",genericFamily:"sans-serif",provider:"monotype",characterSets:["latin-ext"],permissions:"studio",fallbacks:"",spriteIndex:96},"helveticaneuew02-75bold":{displayName:"Helvetica 75 Latin Ext",fontFamily:"helveticaneuew02-75bold",cdnName:"",genericFamily:"sans-serif",provider:"monotype",characterSets:["latin-ext"],permissions:"studio",fallbacks:"",spriteIndex:97},"helveticaneuew02-95blac":{displayName:"Helvetica 95 Latin Ext",fontFamily:"helveticaneuew02-95blac",cdnName:"",genericFamily:"sans-serif",provider:"monotype",characterSets:["latin-ext"],permissions:"studio",fallbacks:"",spriteIndex:98},"helveticaneuew02-thin":{displayName:"Helvetica 35 Latin Ext",fontFamily:"helveticaneuew02-thin",cdnName:"",genericFamily:"sans-serif",provider:"monotype",characterSets:["latin-ext"],permissions:"studio",fallbacks:"",spriteIndex:99},"helveticaneuew02-ultlt":{displayName:"Helvetica 25 Latin Ext",fontFamily:"helveticaneuew02-ultlt",cdnName:"",genericFamily:"sans-serif",provider:"monotype",characterSets:["latin-ext"],permissions:"studio",fallbacks:"",spriteIndex:100},"helveticaneuew10-45ligh":{displayName:"Helvetica 45 Cyrillic",fontFamily:"helveticaneuew10-45ligh",cdnName:"",genericFamily:"sans-serif",provider:"monotype",characterSets:["cyrillic"],permissions:"studio",fallbacks:"",spriteIndex:101},"helveticaneuew10-65medi":{displayName:"Helvetica 65 Cyrillic",fontFamily:"helveticaneuew10-65medi",cdnName:"",genericFamily:"sans-serif",provider:"monotype",characterSets:["cyrillic"],permissions:"studio",fallbacks:"",spriteIndex:102},"helveticaneuew10-75bold":{displayName:"Helvetica 75 Cyrillic",fontFamily:"helveticaneuew10-75bold",cdnName:"",genericFamily:"sans-serif",provider:"monotype",characterSets:["cyrillic"],permissions:"studio",fallbacks:"",spriteIndex:103},"helveticaneuew10-95blac":{displayName:"Helvetica 95 Cyrillic",fontFamily:"helveticaneuew10-95blac",cdnName:"",genericFamily:"sans-serif",provider:"monotype",characterSets:["cyrillic"],permissions:"studio",fallbacks:"",spriteIndex:104},"helveticaneuew10-35thin":{displayName:"Helvetica 35 Cyrillic",fontFamily:"helveticaneuew10-35thin",cdnName:"",genericFamily:"sans-serif",provider:"monotype",characterSets:["cyrillic"],permissions:"studio",fallbacks:"",spriteIndex:105},"helveticaneuew10-25ultl":{displayName:"Helvetica 25 Cyrillic",fontFamily:"helveticaneuew10-25ultl",cdnName:"",genericFamily:"sans-serif",provider:"monotype",characterSets:["cyrillic"],permissions:"studio",fallbacks:"",spriteIndex:106},meiryo:{displayName:"Meiryo",fontFamily:"meiryo",cdnName:"",genericFamily:"sans-serif",provider:"system",characterSets:["japanese"],permissions:"legacy",fallbacks:""},segoe_printregular:{displayName:"Segoe Print",fontFamily:"segoe_printregular",cdnName:"",genericFamily:"cursive",provider:"open source",characterSets:["latin"],permissions:"studio",fallbacks:"",spriteIndex:107},"bodoni-w01-poster":{displayName:"Bodoni Poster",fontFamily:"bodoni-w01-poster",cdnName:"",genericFamily:"fantasy",provider:"monotype",characterSets:["latin","cyrillic"],permissions:"all",fallbacks:"bodoni-poster-w10",spriteIndex:108},"stencil-w01-bold":{displayName:"Stencil",fontFamily:"stencil-w01-bold",cdnName:"",genericFamily:"fantasy",provider:"monotype",characterSets:["latin"],permissions:"all",fallbacks:"",spriteIndex:110},"itc-arecibo-w01-regular":{displayName:"ITC Arecibo",fontFamily:"itc-arecibo-w01-regular",cdnName:"",genericFamily:"fantasy",provider:"monotype",characterSets:["latin"],permissions:"all",fallbacks:"",spriteIndex:111},"avenida-w01":{displayName:"Avenida",fontFamily:"avenida-w01",cdnName:"",genericFamily:"fantasy",provider:"monotype",characterSets:["latin","latin-ext"],permissions:"all",fallbacks:"avenida-w02",spriteIndex:112},"pacifica-w00-condensed":{displayName:"Pacifica Condensed",fontFamily:"pacifica-w00-condensed",cdnName:"",genericFamily:"fantasy",provider:"monotype",characterSets:["latin"],permissions:"all",fallbacks:"",spriteIndex:114},"geotica-w01-four-open":{displayName:"Geotica Four Open",fontFamily:"geotica-w01-four-open",cdnName:"",genericFamily:"fantasy",provider:"monotype",characterSets:["latin"],permissions:"all",fallbacks:"",spriteIndex:115},"marzo-w00-regular":{displayName:"Marzo",fontFamily:"marzo-w00-regular",cdnName:"",genericFamily:"fantasy",provider:"monotype",characterSets:["latin"],permissions:"all",fallbacks:"",spriteIndex:116},"braggadocio-w01":{displayName:"Braggadocio",fontFamily:"braggadocio-w01",cdnName:"",genericFamily:"fantasy",provider:"monotype",characterSets:["latin"],permissions:"all",fallbacks:"",spriteIndex:117},"reklamescriptw00-medium":{displayName:"Reklame Script",fontFamily:"reklamescriptw00-medium",cdnName:"",genericFamily:"cursive",provider:"monotype",characterSets:["latin","latin-ext"],permissions:"all",fallbacks:"",spriteIndex:118},"snellroundhandw01-scrip":{displayName:"Snell Roundhand",fontFamily:"snellroundhandw01-scrip",cdnName:"",genericFamily:"cursive",provider:"monotype",characterSets:["latin"],permissions:"all",fallbacks:"",spriteIndex:120},"din-next-w01-light":{displayName:"DIN Next Light",fontFamily:"din-next-w01-light",cdnName:"",genericFamily:"sans-serif",provider:"monotype",characterSets:["latin","latin-ext","cyrillic"],permissions:"all",fallbacks:"din-next-w02-light,din-next-w10-light",spriteIndex:121},"helvetica-w01-roman":{displayName:"Helvetica",fontFamily:"helvetica-w01-roman",cdnName:"",genericFamily:"sans-serif",provider:"monotype",characterSets:["latin","latin-ext","cyrillic"],permissions:"all",fallbacks:"helvetica-w02-roman,helvetica-lt-w10-roman",spriteIndex:124},"helvetica-w01-light":{displayName:"Helvetica Light",fontFamily:"helvetica-w01-light",cdnName:"",genericFamily:"sans-serif",provider:"monotype",characterSets:["latin","latin-ext"],permissions:"all",fallbacks:"helvetica-w02-light",spriteIndex:127},"helvetica-w01-bold":{displayName:"Helvetica Bold",fontFamily:"helvetica-w01-bold",cdnName:"",genericFamily:"sans-serif",provider:"monotype",characterSets:["latin","latin-ext","cyrillic"],permissions:"all",fallbacks:"helvetica-w02-bold,helvetica-lt-w10-bold",spriteIndex:129},"nimbus-sans-tw01con":{displayName:"Nimbus Sans",fontFamily:"nimbus-sans-tw01con",cdnName:"",genericFamily:"sans-serif",provider:"monotype",characterSets:["latin"],permissions:"all",fallbacks:"",spriteIndex:132},"soho-w01-thin-condensed":{displayName:"Soho Condensed",fontFamily:"soho-w01-thin-condensed",cdnName:"",genericFamily:"serif",provider:"monotype",characterSets:["latin","latin-ext"],permissions:"all",fallbacks:"soho-w02-thin-condensed",spriteIndex:133},"droid-serif-w01-regular":{displayName:"Droid Serif",fontFamily:"droid-serif-w01-regular",cdnName:"",genericFamily:"serif",provider:"monotype",characterSets:["latin","latin-ext","cyrillic"],permissions:"all",fallbacks:"droid-serif-w02-regular,droid-serif-w10-regular",spriteIndex:135},"clarendon-w01-medium-692107":{displayName:"Clarendon LT",fontFamily:"clarendon-w01-medium-692107",cdnName:"",genericFamily:"serif",provider:"monotype",characterSets:["latin","latin-ext"],permissions:"all",fallbacks:"clarendon-w02-medium-693834",spriteIndex:138},"museo-w01-700":{displayName:"Museo",fontFamily:"museo-w01-700",cdnName:"",genericFamily:"serif",provider:"monotype",characterSets:["latin"],permissions:"all",fallbacks:"",spriteIndex:140},"museo-slab-w01-100":{displayName:"Museo Slab",fontFamily:"museo-slab-w01-100",cdnName:"",genericFamily:"serif",provider:"monotype",characterSets:["latin"],permissions:"all",fallbacks:"",spriteIndex:141},"americantypwrteritcw01--731025":{displayName:"American Typewriter",fontFamily:"americantypwrteritcw01--731025",cdnName:"",genericFamily:"serif",provider:"monotype",characterSets:["latin","latin-ext"],permissions:"all",fallbacks:"americantypwrteritcw02--737091",spriteIndex:142},monoton:{displayName:"Monoton",fontFamily:"monoton",cdnName:"Monoton",genericFamily:"fantasy",provider:"google",characterSets:["latin","latin-ext"],permissions:"all",fallbacks:"",spriteIndex:144},sacramento:{displayName:"Sacramento",fontFamily:"sacramento",cdnName:"Sacramento",genericFamily:"cursive",provider:"google",characterSets:["latin","latin-ext"],permissions:"all",fallbacks:"",spriteIndex:146},cookie:{displayName:"Cookie",fontFamily:"cookie",cdnName:"Cookie",genericFamily:"cursive",provider:"google",characterSets:["latin","latin-ext"],permissions:"all",fallbacks:"",spriteIndex:148},raleway:{displayName:"Raleway",fontFamily:"raleway",cdnName:"Raleway",genericFamily:"sans-serif",provider:"google",characterSets:["latin"],permissions:"all",fallbacks:"",spriteIndex:150},"open sans condensed":{displayName:"Open Sans Condensed",fontFamily:"open sans condensed",cdnName:"Open+Sans+Condensed:300",genericFamily:"sans-serif",provider:"google",characterSets:["latin","latin-ext","cyrillic"],permissions:"all",fallbacks:"",spriteIndex:151},"amatic sc":{displayName:"Amatic SC",fontFamily:"amatic sc",cdnName:"Amatic+SC",genericFamily:"cursive",provider:"google",characterSets:["latin"],permissions:"all",fallbacks:"",spriteIndex:154},"coquette-w00-light":{displayName:"Coquette",fontFamily:"coquette-w00-light",cdnName:"",genericFamily:"sans-serif",provider:"monotype",characterSets:["latin","latin-ext"],permissions:"all",fallbacks:"",spriteIndex:155},"rosewood-w01-regular":{displayName:"Rosewood",fontFamily:"rosewood-w01-regular",cdnName:"",genericFamily:"sans-serif",provider:"monotype",characterSets:["latin"],permissions:"all",fallbacks:"",spriteIndex:157},"helvetica neue":{displayName:"Helvetica Neue",fontFamily:"helvetica neue",cdnName:"",genericFamily:"sans-serif",provider:"monotype",characterSets:["latin"],permissions:"legacy",fallbacks:""},"helvetica neue italic":{displayName:"Helvetica Neue Italic",fontFamily:"helvetica neue italic",cdnName:"",genericFamily:"sans-serif",provider:"monotype",characterSets:["latin"],permissions:"legacy",fallbacks:""},"helvetica neue thin":{displayName:"Helvetica Neue Thin",fontFamily:"helvetica neue thin",cdnName:"",genericFamily:"sans-serif",provider:"monotype",characterSets:["latin"],permissions:"legacy",fallbacks:""},"helvetica neue medium":{displayName:"Helvetica Neue Medium",fontFamily:"helvetica neue medium",cdnName:"",genericFamily:"sans-serif",provider:"monotype",characterSets:["latin"],permissions:"legacy",fallbacks:""},"frank-ruhl-w26-regular":{displayName:"Frank Ruhl",fontFamily:"frank-ruhl-w26-regular",cdnName:"",genericFamily:"serif",provider:"monotype",characterSets:["hebrew"],permissions:"all",fallbacks:"",spriteIndex:158},"alef-regular":{displayName:"Alef",fontFamily:"alef-regular",cdnName:"",genericFamily:"sans-serif",provider:"open source",characterSets:["hebrew"],permissions:"all",fallbacks:"",spriteIndex:159},"miriam-w26-medium":{displayName:"Miriam",fontFamily:"miriam-w26-medium",cdnName:"",genericFamily:"serif",provider:"monotype",characterSets:["hebrew"],permissions:"all",fallbacks:"",spriteIndex:160},"adler-w26-regular":{displayName:"Adler",fontFamily:"adler-w26-regular",cdnName:"",genericFamily:"cursive",provider:"monotype",characterSets:["hebrew"],permissions:"all",fallbacks:"",spriteIndex:161},"haim-arukeem-w26-medium":{displayName:"Longlife",fontFamily:"haim-arukeem-w26-medium",cdnName:"",
genericFamily:"sans-serif",provider:"monotype",characterSets:["hebrew"],permissions:"all",fallbacks:"",spriteIndex:162},"shabazi-w26-bold":{displayName:"Shabazi Bold",fontFamily:"shabazi-w26-bold",cdnName:"",genericFamily:"serif",provider:"monotype",characterSets:["hebrew"],permissions:"all",fallbacks:"",spriteIndex:163},"gulash-w26-regular":{displayName:"Gulash",fontFamily:"gulash-w26-regular",cdnName:"",genericFamily:"cursive",provider:"monotype",characterSets:["hebrew"],permissions:"all",fallbacks:"",spriteIndex:164},"chips-w26-normal":{displayName:"Chips",fontFamily:"chips-w26-normal",cdnName:"",genericFamily:"fantasy",provider:"monotype",characterSets:["hebrew"],permissions:"all",fallbacks:"",spriteIndex:165},"nekudot-w26-bold":{displayName:"Nekudot Bold",fontFamily:"nekudot-w26-bold",cdnName:"",genericFamily:"fantasy",provider:"monotype",characterSets:["hebrew"],permissions:"all",fallbacks:"",spriteIndex:166},"opensanshebrewcondensed-regular":{displayName:"Open Sans Condensed",fontFamily:"opensanshebrewcondensed-regular",cdnName:"",genericFamily:"sans-serif",provider:"open source",characterSets:["hebrew"],permissions:"all",fallbacks:"",spriteIndex:167},"asimon-aaa-400":{displayName:"Asimon",fontFamily:"asimon-aaa-400",cdnName:"",genericFamily:"sans-serif",provider:"open source",characterSets:["hebrew"],permissions:"all",fallbacks:"",spriteIndex:168},"atlas-aaa-500":{displayName:"Atlas",fontFamily:"atlas-aaa-500",cdnName:"",genericFamily:"sans-serif",provider:"open source",characterSets:["hebrew"],permissions:"all",fallbacks:"",spriteIndex:169},"omes-aaa-400":{displayName:"Omes",fontFamily:"omes-aaa-400",cdnName:"",genericFamily:"cursive",provider:"open source",characterSets:["hebrew"],permissions:"all",fallbacks:"",spriteIndex:170},"almoni-dl-aaa-300":{displayName:"Almoni DL Light",fontFamily:"almoni-dl-aaa-300",cdnName:"",genericFamily:"sans-serif",provider:"open source",characterSets:["hebrew"],permissions:"all",fallbacks:"",spriteIndex:171},"almoni-dl-aaa-400":{displayName:"Almoni DL Regular",fontFamily:"almoni-dl-aaa-400",cdnName:"",genericFamily:"sans-serif",provider:"open source",characterSets:["hebrew"],permissions:"all",fallbacks:"",spriteIndex:172},"almoni-dl-aaa-700":{displayName:"Almoni DL Bold",fontFamily:"almoni-dl-aaa-700",cdnName:"",genericFamily:"sans-serif",provider:"open source",characterSets:["hebrew"],permissions:"all",fallbacks:"",spriteIndex:173},"mixtape-aaa-400":{displayName:"Mixtape",fontFamily:"mixtape-aaa-400",cdnName:"",genericFamily:"sans-serif",provider:"open source",characterSets:["hebrew"],permissions:"all",fallbacks:"",spriteIndex:174},"museum-aaa-400":{displayName:"Museum",fontFamily:"museum-aaa-400",cdnName:"",genericFamily:"sans-serif",provider:"open source",characterSets:["hebrew"],permissions:"all",fallbacks:"",spriteIndex:175},"meodedpashut-oeregular":{displayName:"Meoded",fontFamily:"meodedpashut-oeregular",cdnName:"",genericFamily:"sans-serif",provider:"open source",characterSets:["hebrew"],permissions:"studio",fallbacks:"",spriteIndex:176},"arabictypesettingw23-re":{displayName:"Arabic Typesetting Regular",fontFamily:"arabictypesettingw23-re",cdnName:"",genericFamily:"serif",provider:"monotype",characterSets:["arabic"],permissions:"all",fallbacks:"",spriteIndex:177},"midan-w20":{displayName:"Midan",fontFamily:"midan-w20",cdnName:"",genericFamily:"serif",provider:"monotype",characterSets:["arabic"],permissions:"all",fallbacks:"",spriteIndex:178},"arian-lt-w20-light":{displayName:"Arian Light",fontFamily:"arian-lt-w20-light",cdnName:"",genericFamily:"sans-serif",provider:"monotype",characterSets:["arabic"],permissions:"all",fallbacks:"",spriteIndex:179},"arian-lt-w20-regular":{displayName:"Arian",fontFamily:"arian-lt-w20-regular",cdnName:"",genericFamily:"sans-serif",provider:"monotype",characterSets:["arabic"],permissions:"all",fallbacks:"",spriteIndex:180},"coheadlinew23-arabicbol":{displayName:"Co Headline Arabic Bold",fontFamily:"coheadlinew23-arabicbol",cdnName:"",genericFamily:"fantasy",provider:"monotype",characterSets:["arabic"],permissions:"legacy",fallbacks:""},"janna-lt-w20-regular":{displayName:"Janna",fontFamily:"janna-lt-w20-regular",cdnName:"",genericFamily:"sans-serif",provider:"monotype",characterSets:["arabic"],permissions:"all",fallbacks:"",spriteIndex:181},"helveticaneueltw20-ligh":{displayName:"Neue Helvetica Arabic",fontFamily:"helveticaneueltw20-ligh",cdnName:"",genericFamily:"sans-serif",provider:"monotype",characterSets:["arabic"],permissions:"all",fallbacks:"",spriteIndex:182},"dinnextltw23-ultralight":{displayName:"DIN Next Arabic",fontFamily:"dinnextltw23-ultralight",cdnName:"",genericFamily:"sans-serif",provider:"monotype",characterSets:["arabic"],permissions:"all",fallbacks:"",spriteIndex:183},"tanseekmodernw20-light":{displayName:"Tanseek Modern Light",fontFamily:"tanseekmodernw20-light",cdnName:"",genericFamily:"sans-serif",provider:"monotype",characterSets:["arabic"],permissions:"all",fallbacks:"",spriteIndex:184},"ahmedltw20-outlineregul":{displayName:"Ahmed Outline",fontFamily:"ahmedltw20-outlineregul",cdnName:"",genericFamily:"fantasy",provider:"monotype",characterSets:["arabic"],permissions:"all",fallbacks:"",spriteIndex:185},"kufi-lt-w20-regular":{displayName:"Kufi Regular",fontFamily:"kufi-lt-w20-regular",cdnName:"",genericFamily:"fantasy",provider:"monotype",characterSets:["arabic"],permissions:"all",fallbacks:"",spriteIndex:186},amiri:{displayName:"Amiri",fontFamily:"amiri",cdnName:"",genericFamily:"serif",provider:"open source",characterSets:["arabic"],permissions:"all",fallbacks:"",spriteIndex:187},"droid-naskh":{displayName:"Droid Naskh",fontFamily:"droid-naskh",cdnName:"",genericFamily:"serif",provider:"open source",characterSets:["arabic"],permissions:"all",fallbacks:"",spriteIndex:188},"ｍｓ ゴシック":{displayName:"MS Gothic",fontFamily:"ｍｓ ゴシック",cdnName:"",genericFamily:"sans-serif",provider:"system",characterSets:["japanese"],permissions:"all",fallbacks:"ms gothic,ヒラギノ角ゴ pro w3,hiragino kaku gothic pro,osaka",spriteIndex:189},"ｍｓ 明朝":{displayName:"MS Mincho",fontFamily:"ｍｓ 明朝",cdnName:"",genericFamily:"serif",provider:"system",characterSets:["japanese"],permissions:"all",fallbacks:"ms mincho,ヒラギノ明朝 pro w3,hiragino mincho pro",spriteIndex:190},"ｍｓ ｐゴシック":{displayName:"MS PGothic",fontFamily:"ｍｓ ｐゴシック",cdnName:"",genericFamily:"sans-serif",provider:"system",characterSets:["japanese"],permissions:"all",fallbacks:"ms pgothic,ヒラギノ角ゴ pro w3,hiragino kaku gothic pro,osaka",spriteIndex:191},"ｍｓ ｐ明朝":{displayName:"MS PMincho",fontFamily:"ｍｓ ｐ明朝",cdnName:"",genericFamily:"serif",provider:"system",characterSets:["japanese"],permissions:"all",fallbacks:"ms pmincho,ヒラギノ明朝 pro w3,hiragino mincho pro",spriteIndex:192},"メイリオ":{displayName:"Meiryo",fontFamily:"メイリオ",cdnName:"",genericFamily:"sans-serif",provider:"system",characterSets:["japanese"],permissions:"all",fallbacks:"meiryo,ヒラギノ角ゴ pro w3,hiragino kaku gothic pro",spriteIndex:193},"맑은 고딕":{displayName:"Malgun Gothic",fontFamily:"맑은 고딕",cdnName:"",genericFamily:"sans-serif",provider:"system",characterSets:["korean"],permissions:"all",fallbacks:"malgun gothic,apple sd gothic neo,applegothic",spriteIndex:194},"돋움":{displayName:"Dotum",fontFamily:"돋움",cdnName:"",genericFamily:"sans-serif",provider:"system",characterSets:["korean"],permissions:"all",fallbacks:"dotum,apple sd gothic neo,applegothic",spriteIndex:195},"굴림":{displayName:"Gulim",fontFamily:"굴림",cdnName:"",genericFamily:"sans-serif",provider:"system",characterSets:["korean"],permissions:"all",fallbacks:"gulim,apple sd gothic neo,applegothic",spriteIndex:196},"nanumgothic-regular":{displayName:"Nanum Gothic",fontFamily:"nanumgothic-regular",cdnName:"",genericFamily:"sans-serif",provider:"open source",characterSets:["korean"],permissions:"all",fallbacks:"",spriteIndex:197},"bm-hanna":{displayName:"BM Hanna",fontFamily:"bm-hanna",cdnName:"",genericFamily:"sans-serif",provider:"open source",characterSets:["korean"],permissions:"all",fallbacks:"",spriteIndex:198},fbneogothic:{displayName:"FB Neo Gothic",fontFamily:"fbneogothic",cdnName:"",genericFamily:"sans-serif",provider:"monotype",characterSets:["korean"],permissions:"all",fallbacks:"",spriteIndex:199},fbchamblue:{displayName:"FB Cham Blue",fontFamily:"fbchamblue",cdnName:"",genericFamily:"fantasy",provider:"monotype",characterSets:["korean"],permissions:"all",fallbacks:"",spriteIndex:200},fbbluegothicl:{displayName:"FB Blue Gothic",fontFamily:"fbbluegothicl",cdnName:"",genericFamily:"serif",provider:"monotype",characterSets:["korean"],permissions:"all",fallbacks:"",spriteIndex:201},fbplum:{displayName:"FB Plum",fontFamily:"fbplum",cdnName:"",genericFamily:"fantasy",provider:"monotype",characterSets:["korean"],permissions:"all",fallbacks:"",spriteIndex:202},fbgreen:{displayName:"FB Green",fontFamily:"fbgreen",cdnName:"",genericFamily:"sans-serif",provider:"monotype",characterSets:["korean"],permissions:"all",fallbacks:"",spriteIndex:203},cinzel:{displayName:"Cinzel",fontFamily:"cinzel",cdnName:"Cinzel",genericFamily:"serif",provider:"google",characterSets:["latin"],permissions:"all",fallbacks:"",spriteIndex:204},sail:{displayName:"Sail",fontFamily:"sail",cdnName:"Sail",genericFamily:"serif",provider:"google",characterSets:["latin"],permissions:"all",fallbacks:"",spriteIndex:205},"playfair display":{displayName:"Playfair Display",fontFamily:"playfair display",cdnName:"Playfair+Display",genericFamily:"serif",provider:"google",characterSets:["latin"],permissions:"all",fallbacks:"",spriteIndex:206},"libre baskerville":{displayName:"Libre Baskerville",fontFamily:"libre baskerville",cdnName:"Libre+Baskerville",genericFamily:"serif",provider:"google",characterSets:["latin"],permissions:"all",fallbacks:"",spriteIndex:207},"trend-sans-w00-four":{displayName:"Trend",fontFamily:"trend-sans-w00-four",cdnName:"",genericFamily:"sans-serif",provider:"monotype",characterSets:["latin"],permissions:"all",fallbacks:"",spriteIndex:208},"proxima-n-w01-reg":{displayName:"Proxima Nova",fontFamily:"proxima-n-w01-reg",cdnName:"",genericFamily:"sans-serif",provider:"monotype",characterSets:["latin"],permissions:"all",fallbacks:"",spriteIndex:209},"bree-w01-thin-oblique":{displayName:"Bree",fontFamily:"bree-w01-thin-oblique",cdnName:"",genericFamily:"sans-serif",provider:"monotype",characterSets:["latin"],permissions:"all",fallbacks:"",spriteIndex:210},"lulo-clean-w01-one-bold":{displayName:"Lulo Clean",fontFamily:"lulo-clean-w01-one-bold",cdnName:"",genericFamily:"sans-serif",provider:"monotype",characterSets:["latin"],permissions:"all",fallbacks:"",spriteIndex:211},"futura-lt-w01-book":{displayName:"Futura",fontFamily:"futura-lt-w01-book",cdnName:"",genericFamily:"sans-serif",provider:"monotype",characterSets:["latin"],permissions:"all",fallbacks:"",spriteIndex:212},"futura-lt-w01-light":{displayName:"Futura Light",fontFamily:"futura-lt-w01-light",cdnName:"",genericFamily:"sans-serif",provider:"monotype",characterSets:["latin"],permissions:"all",fallbacks:"",spriteIndex:213},"brandon-grot-w01-light":{displayName:"Brandon Grotesque",fontFamily:"brandon-grot-w01-light",cdnName:"",genericFamily:"sans-serif",provider:"monotype",characterSets:["latin"],permissions:"all",fallbacks:"",spriteIndex:214},"avenir-lt-w01_85-heavy1475544":{displayName:"Avenir",fontFamily:"avenir-lt-w01_85-heavy1475544",cdnName:"",genericFamily:"sans-serif",provider:"monotype",characterSets:["latin"],permissions:"all",fallbacks:"",spriteIndex:215},"avenir-lt-w01_35-light1475496":{displayName:"Avenir Light",fontFamily:"avenir-lt-w01_35-light1475496",cdnName:"",genericFamily:"sans-serif",provider:"monotype",characterSets:["latin"],permissions:"all",fallbacks:"",spriteIndex:216},"didot-w01-italic":{displayName:"Linotype Didot",fontFamily:"didot-w01-italic",cdnName:"",genericFamily:"serif",provider:"monotype",characterSets:["latin"],permissions:"all",fallbacks:"",spriteIndex:217},"adobe-caslon-w01-smbd":{displayName:"Adobe Caslon",fontFamily:"adobe-caslon-w01-smbd",cdnName:"",genericFamily:"serif",provider:"monotype",characterSets:["latin"],permissions:"all",fallbacks:"",spriteIndex:218},"kepler-w03-light-scd-cp":{displayName:"Kepler",fontFamily:"kepler-w03-light-scd-cp",cdnName:"",genericFamily:"serif",provider:"monotype",characterSets:["latin"],permissions:"all",fallbacks:"",spriteIndex:219},"baskervillemtw01-smbdit":{displayName:"Monotype Baskerville",fontFamily:"baskervillemtw01-smbdit",cdnName:"",genericFamily:"serif",provider:"monotype",characterSets:["latin"],permissions:"all",fallbacks:"",spriteIndex:220},"belinda-w00-regular":{displayName:"Belinda",fontFamily:"belinda-w00-regular",cdnName:"",genericFamily:"script",provider:"monotype",characterSets:["latin"],permissions:"all",fallbacks:"",spriteIndex:221},"helveticaneuew01-55roma":{displayName:"Helvetica 55",fontFamily:"helveticaneuew01-55roma",cdnName:"",genericFamily:"sans-serif",provider:"monotype",characterSets:["latin"],permissions:"studio",fallbacks:"",spriteIndex:222},"peaches-and-cream-regular-w00":{displayName:"Peaches & Cream",fontFamily:"peaches-and-cream-regular-w00",cdnName:"",genericFamily:"script",provider:"monotype",characterSets:["latin"],permissions:"all",fallbacks:"",spriteIndex:223},"dinneuzeitgroteskltw01-_812426":{displayName:"DIN Neuzeit Grotesk",fontFamily:"dinneuzeitgroteskltw01-_812426",cdnName:"",genericFamily:"sans-serif",provider:"monotype",characterSets:["latin"],permissions:"all",fallbacks:"",spriteIndex:224}});var ESitePartTypes=function(){function a(){this.HEADER="header",this.BODY="body",this.FOOTER="footer"}return a}();angular.module("siteGeneratorStaticsCoreAppInternal").constant("sitePartTypes",new ESitePartTypes),angular.module("siteGeneratorStaticsCoreAppInternal").constant("solutionStatusCodes",{unknown:"unknown",pass:"pass",fail:"fail"}),angular.module("siteGeneratorStaticsCoreAppInternal").constant("titles",[{type:"business",titles:{"WelcomeMessage.title":"Make your website stand out","WelcomeMessage.subtitle":"Write a message and add images you'd like front & center on your homepage. You can select images from here or upload your own.","TeamMember.title":"Who's on your team?","TeamMember.subtitle":"Add their names, positions, and photos.","TeamMember.jobTitle":"Position","TeamMember.jobDescription":"About","TeamMember.TeamMemberImage":"Image","Project.title":"Projects you're really proud of","Project.subtitle":"Take this opportunity to showcase your best work.","Project.ProjectName":"Project Name","Project.ProjectDescription":"Description","Project.ProjectImage":"Image","About.title":"Tell the story of your business.","About.subtitle":"Write how you got started, what inspired you and your philosophy.","About.AboutMedia":"Pick images or upload your own.","Service.title":"What services do you offer?","Service.subtitle":"List all the different types of services you have.","Service.ServiceTitle":"Name Your Service","Service.ServiceMedia":"Pick images or upload your own.","Service.ServiceDescription":"Describe what makes it unique and original.","GeneralDescription.title":"Tell us about your business","GeneralDescription.subtitle":"There are some required* items that we really need to make your site great. Everything you enter can always be changed later.","GeneralDescription.BusinessName":"Business name","GeneralDescription.Logo":"Add your logo.","GeneralDescription.button":"Add button.","GeneralDescription.BusinessTagline":"Write a slogan.","Social.title":"Connect to Your Social Networks","Social.subtitle":"Choose the social networks you use.","Social.SocialTitle-FB":"Paste you Facebook URL","Social.SocialTitle-TW":"Paste you Twitter URL","Social.SocialTitle-LI":"Paste you LinkedIn URL","Social.SocialTitle-PI":"Paste you Pinterest URL","Social.SocialTitle-G+":"Paste you Google+ URL","Social.SocialTitle-IN":"Paste you Instagram URL","Social.SocialTitle-YT":"Paste you YouTube URL","Contact.title":"How can people contact you?","Contact.subtitle":"Make it easy for everyone to get in touch","Contact.address_for_display":"Address","Contact.phone_number":"Phone","Contact.email":"Email","Client.title":"Who are your favorite clients?","Client.subtitle":"Show off your clientele. Add their logos and names.","Client.ClientName":"Name","Client.ClientLogo":"Image","Testimonial.title":"Add a few testimonials.","Testimonial.subtitle":"Go on, brag a little! Add all the great things people have to say.","Testimonial.CustomerQuote":"Quote","Testimonial.CustomerName":"Who said it"}},{type:"personal",titles:{"WelcomeMessage.title":"Make your website stand out","WelcomeMessage.subtitle":"Write a message and add images you'rd like front & center on your homepage. You can select images from here or upload your own.","Project.title":"Projects you're really proud of","Project.subtitle":"Take this opportunity to showcase your best work.","Project.ProjectName":"Project Name","Project.ProjectDescription":"Description","Project.ProjectImage":"Image","About.title":"Tell your story.","About.subtitle":"Write how you got started, what inspired you and your philosophy.","About.AboutMedia":"Pick images or upload your own.","Service.title":"What services do you offer?","Service.subtitle":"List all the different types of services you have.","Service.ServiceTitle":"Name Your Service","Service.ServiceMedia":"Pick images or upload your own.","Service.ServiceDescription":"Describe what makes it unique and original.","GeneralDescription.title":"Tell us some details about yourself","GeneralDescription.subtitle":"There are some required* items that we really need to make your site great. Everything you enter can always be changed later.","GeneralDescription.BusinessName":"Your name","GeneralDescription.Logo":"Add your logo.","GeneralDescription.button":"Add button.","GeneralDescription.BusinessTagline":"Write a slogan.","Social.title":"Connect to Your Social Networks","Social.subtitle":"Choose the social networks you use.","Social.SocialTitle-FB":"Paste you Facebook URL","Social.SocialTitle-TW":"Paste you Twitter URL","Social.SocialTitle-LI":"Paste you LinkedIn URL","Social.SocialTitle-PI":"Paste you Pinterest URL","Social.SocialTitle-G+":"Paste you Google+ URL","Social.SocialTitle-IN":"Paste you Instagram URL","Social.SocialTitle-YT":"Paste you YouTube URL","Contact.title":"How can people contact you?","Contact.subtitle":"Make it easy for everyone to get in touch","Contact.address_for_display":"Address","Contact.phone_number":"Phone","Contact.email":"Email","Client.title":"Who are your favorite clients?","Client.subtitle":"Show off your clientele. Add their logos and names.","Client.ClientName":"Name","Client.ClientLogo":"Image","Testimonial.title":"Add a few testimonials.","Testimonial.subtitle":"Go on, brag a little! Add all the great things people have to say.","Testimonial.CustomerQuote":"Quote","Testimonial.CustomerName":"Who said it"}}]),angular.module("siteGeneratorStaticsCoreAppInternal").value("verticals",[{name:"Business & Services",id:"business_and_services",subVerticals:[{name:"Advertising & Marketing",id:"advertising_and_marketing",type:"business"},{name:"Consulting & Coaching",id:"consulting_and_coaching",type:"business"},{name:"Finance & Law",id:"finance_and_law",type:"business"},{name:"Health & Wellness",id:"health_and_wellness",type:"business"},{name:"Wedding & Events",id:"wedding_and_events",type:"business"}]},{name:"Entertainment",id:"entertainment",subVerticals:[{name:"Dance",id:"dance",type:"business"},{name:"Event Production",id:"event_production",type:"business"},{name:"Film",id:"film",type:"business"}]},{name:"Photography",id:"photography",subVerticals:[{name:"Event Photographer",id:"event_photographer",type:"business"},{name:"Pro Photographer",id:"pro_photographer",type:"business"},{name:"Sport Photographer",id:"sport_photographer",type:"business"},{name:"Travel Photographer",id:"travel_photographer",type:"business"},{name:"Wedding Photographer",id:"wedding_photographer",type:"business"}]},{name:"Creative Arts",id:"creative arts",subVerticals:[{name:"Artist",id:"artist",type:"business"},{name:"Author & Writer",id:"author_and_writer",type:"business"},{name:"Painter & Illustrator",id:"painter_and_illustrator",type:"business"},{name:"Portfolio",id:"portfolio",type:"business"}]},{name:"Design",id:"design",subVerticals:[{name:"Architect & Interiors",id:"architect_and_interiors",type:"business"},{name:"Design Agency",id:"design_agency",type:"business"},{name:"Designer",id:"designer",type:"business"},{name:"Fashion Designer",id:"fashion_designer",type:"business"},{name:"Portfolio",id:"portfolio",type:"business"},{name:"Web Designer",id:"web_designer",type:"business"}]},{name:"Fashion & Beauty",id:"fashion_and_beauty",subVerticals:[{name:"Hair & Beauty",id:"hair_and_beauty",type:"business"},{name:"Model",id:"model",type:"business"},{name:"Stylist",id:"stylist",type:"business"},{name:"Fashion Designer",id:"fashion_designer",type:"business"}]}]),angular.module("siteGeneratorStaticsCoreAppInternal").constant("designKitParameters",{L1:11,L2:27,L3:32,D1:15,D2:25,D3:18,orderedPalette:[11,27,32,15,25,18],kitFontsStyle:["Bold","Caps","Italic"],dpToGsu:{dp0:80,dp1:120,dp2:100,dp3:80},sameColorFactorEach:.5,differentColorFactorEach:1,colorWithLeStripFactor:1,leStripWithLeStripFactor:0,headerWithLeStrip:0,topOfFirstLgSameColorAsHeaderFactor:.5,topOfFirstLgdifferentColorAsHeaderFactor:1,bigHeaderFooterPaddingBottomFactor:.5,smallHeaderFooterPaddingBottomFactor:.25,sameListFactor:.5,differentListSameColorFactor:1.5,fieldSubTypeToIndexMap:{title:0,subTitle:1,longText:2,label:2,address:2,fax:2,phoneNumber:2,email:2,ContactFormTitle:2,copyrightMSG:2},defaultCartStyle:{type:"TopLevelStyle",styleType:"custom",compId:"",componentClassName:"wysiwyg.viewer.components.tpapps.TPAWidget",pageId:"",skin:"wysiwyg.viewer.skins.TPAWidgetSkin",style:{groups:{},properties:{param_color_miniCart_background:"color_11",param_color_miniCart_textColor:"color_15",param_color_miniCart_headerBackground:"color_15",param_color_miniCart_headerTextColor:"color_11",param_color_miniCart_dividersColor:"color_15","alpha-param_color_miniCart_dividersColor":.3037909836065574,param_color_cartWidgetButton_textColor:"color_11",param_color_cartWidgetButton_backgroundColor:"color_18","alpha -param_color_cartWidgetButton_backgroundColor":1,param_number_cartWidgetIcon:2,param_color_cartWidgetButton_borderColor:"color_5",param_font_cartWidgetButton_selectedSkin:'{"value":"button-skin-3","fontStyleParam":false}'},propertiesSource:{}}},coloringOptions:["1,1,1","1,1,2","1,2,2","3,1,1","3,3,1","3,3,3","1,3,3","3,1,3","1,1,3","1,3,1","2,2,1","2,2,2","2,1,2","1,2,1","2,1,1"],kitStatesOptions:["light","dark"],kitColorsNames:["black","white","mainColor","secondaryColor","thirdColor","fourthColor"],optionalColorsNames:["thirdColor","fourthColor"],kitFontsCategories:["Title","Title/2","Title/3","Subtitle","Subtitle/2","Event subtitle","Event subtitle/2","Widget subtitle","Paragraph","Testimonial paragraph","Testimonial paragraph list","Welcome title","Welcome subtitle","Menu/Copyright","Page header","Header title","BTN","Header subtitle","Footer title","Label"],typeAndFieldToCategory:{"Welcome#title":"Welcome title","Welcome#subTitle":"Welcome subtitle","Welcome#longText":"Paragraph","About#title#single":"Title","About#title#list":"Title/3","About#longText#single":"Paragraph","About#longText#list":"Paragraph","About#subTitle#single":"Subtitle","About#subTitle#list":"Subtitle/2","Inner_about#title#single":"Title","Inner_about#title#list":"Title/3","Inner_about#longText#single":"Paragraph","Inner_about#longText#list":"Paragraph","Inner_about#subTitle#single":"Subtitle","Inner_about#subTitle#list":"Subtitle/2","Portfolio#title":"Title","Portfolio#subTitle":"Subtitle","Portfolio#longText":"Paragraph","Homepage_about#title#single":"Title","Homepage_about#title#list":"Title/3","Homepage_about#longText#single":"Paragraph","Homepage_about#longText#list":"Paragraph","Homepage_about#subTitle#single":"Subtitle","Homepage_about#subTitle#list":"Subtitle/2","Service#title#single":"Title","Service#title#list":"Title/3","Service#longText#single":"Paragraph","Service#longText#list":"Paragraph","Service#subTitle#single":"Subtitle","Service#subTitle#list":"Subtitle/2","TeamMember#title#single":"Title","TeamMember#title#list":"Title/3","TeamMember#subTitle#single":"Subtitle","TeamMember#subTitle#list":"Subtitle/2","TeamMember#longText#single":"Paragraph","TeamMember#longText#list":"Paragraph","Product#title#single":"Title","Product#title#list":"Title/3","Product#longText#single":"Paragraph","Product#longText#list":"Paragraph","Product#subTitle#single":"Subtitle","Product#subTitle#list":"Subtitle/2","Testimonial#title#single":"Title/3","Testimonial#title#list":"Title/3","Testimonial#subTitle#single":"Subtitle/2","Testimonial#subTitle#list":"Subtitle/2","Testimonial#longText#single":"Testimonial paragraph","Testimonial#longText#list":"Testimonial paragraph list","Quote#subTitle#single":"Subtitle/2","Quote#title#single":"Subtitle/2","Quote#title#list":"Subtitle/2","Quote#subTitle#list":"Subtitle/2","Quote#longText#single":"Testimonial paragraph","Quote#longText#list":"Testimonial paragraph list","Project#title#single":"Title","Project#title#list":"Title/3","Project#longText#single":"Paragraph","Project#longText#list":"Paragraph","Project#subTitle#single":"Subtitle","Project#subTitle#list":"Subtitle/2","Client#title#single":"Title/2","Client#title#list":"Title/2","Client#longText#single":"Paragraph","Client#longText#list":"Paragraph","Client#subTitle#single":"Subtitle/2","Client#subTitle#list":"Subtitle/2","Feature#title#single":"Title","Feature#title#list":"Title/3","Feature#longText#single":"Paragraph","Feature#longText#list":"Paragraph","Feature#subTitle#single":"Subtitle","Feature#subTitle#list":"Subtitle/2","Facility#title#single":"Title","Facility#title#list":"Title/3","Facility#longText#single":"Paragraph","Facility#longText#list":"Paragraph","Facility#subTitle#single":"Subtitle","Facility#subTitle#list":"Subtitle/2","SpecialOffer#title#single":"Title","SpecialOffer#title#list":"Title/3","SpecialOffer#longText#single":"Paragraph","SpecialOffer#longText#list":"Paragraph","SpecialOffer#subTitle#single":"Subtitle","SpecialOffer#subTitle#list":"Subtitle/2","Membership#title#single":"Title","Membership#title#list":"Title/3","Membership#longText#single":"Paragraph","Membership#longText#list":"Paragraph","Membership#subTitle#single":"Subtitle","Membership#subTitle#list":"Subtitle/2","Donation#title#single":"Title","Donation#title#list":"Title/3","Donation#longText#single":"Paragraph","Donation#longText#list":"Paragraph","Donation#subTitle#single":"Subtitle","Donation#subTitle#list":"Subtitle/2","FAQ#title#single":"Title/2","FAQ#title#list":"Title/2","FAQ#longText#single":"Paragraph","FAQ#longText#list":"Paragraph","Event#title#single":"Title","Event#title#list":"Title/3","Event#longText#single":"Paragraph","Event#longText#list":"Paragraph","Event#subTitle#single":"Event subtitle","Event#subTitle#list":"Event subtitle/2","News#title#single":"Title","News#title#list":"Title/3","News#longText#single":"Paragraph","News#longText#list":"Paragraph","News#subTitle#single":"Subtitle","News#subTitle#list":"Subtitle/2","OpeningHours#title":"Title/2","OpeningHours#subTitle":"Subtitle/2","OpeningHours#longText":"Paragraph","CV#title#single":"Title/2","CV#title#list":"Title/2","CV#longText#single":"Paragraph","CV#longText#list":"Paragraph","CV#subTitle#single":"Subtitle/2","CV#subTitle#list":"Subtitle/2","Careers#title#single":"Title/2","Careers#title#list":"Title/2","Careers#longText#single":"Paragraph","Careers#longText#list":"Paragraph","Careers#subTitle#single":"Subtitle/2","Careers#subTitle#list":"Subtitle/2","Contact#title":"Title","Contact#address":"Paragraph","Contact#ContactFormTitle":"Subtitle/2","Contact#fax":"Paragraph","Contact#longText":"Paragraph","Contact#zipCode":"Paragraph","Contact#street":"Paragraph","Contact#city":"Paragraph","Contact#state":"Paragraph","Contact#country":"Paragraph","Contact#email":"Paragraph","Contact#phoneNumber":"Paragraph","Contact#form":"Paragraph","Widget#title#single":"Title","Widget#title#list":"Title","Widget#longText#single":"Paragraph","Widget#longText#list":"Paragraph","Widget#subTitle#single":"Widget subtitle","Widget#subTitle#list":"Widget subtitle","GeneralDescription#title":"Header title","GeneralDescription#subTitle":"Header subtitle","GeneralDescription#logoText":"Title","GeneralDescription#businessType":"Paragraph","GeneralDescription#yearFounded":"Paragraph","GeneralDescription#founder":"Paragraph","GeneralDescription#companySize":"Paragraph","GeneralDescription#email":"Paragraph","GeneralDescription#phoneNumber#single":"Paragraph","PageHeader#title":"Page header","PageHeader#subTitle":"Subtitle/2","PageHeader#longText":"Paragraph","ListHeader#title":"Title","ListHeader#subTitle":"Subtitle","ListHeader#longText":"Paragraph","ListFooter#longText":"Paragraph",titleFallback:"Subtitle",subTitleFallback:"Subtitle/2",longTextFallback:"Paragraph",otherFallback:"Subtitle/2","Contact#map#single":"Paragraph","Contact#label#single":"Label","FooterGeneralDescription#copyrightMSG#single":"Menu/Copyright","FooterGeneralDescription#email#single":"Paragraph","FooterGeneralDescription#label#single":"Label","FooterGeneralDescription#title#single":"Footer title","FooterGeneralDescription#phoneNumber#single":"Paragraph","FooterGeneralDescription#fax#single":"Paragraph","FooterGeneralDescription#address#single":"Paragraph","GetSubscribers_Widget#widget#single":"Title","Stores#title#single":"Title","Stores_Product_Widget#widget#single":"Title","Bookings#title#single":"Title","PhotoAlbums#title#single":"Title","Blog#title#single":"Title","Stores_Slider_Gallery_Widget#widget#single":"Title","Stores_Shopping_Cart_Widget#widget#single":"Title","Stores_Thank_You_Widget#widget#single":"Title","Stores_Grid_Gallery_Widget#widget#single":"Title","Blog_Single_Post_Widget#widget#single":"Title","Stores_Product_specific_Widget#widget#single":"Title","Blog_Post_Gallery#widget#single":"Title","Music_Widget#widget#single":"Title","BandsInTown_Widget#widget#single":"Title","ProGallery_Widget#widget#single":"Title"}}),angular.module("siteGeneratorStaticsCoreAppInternal").constant("themeChooserParameters",{PaletteColorsOrder:[11,16,21,26,31,12,17,22,27,32,13,18,23,28,33,14,19,24,29,34,15,20,25,30,35,1,2,3,4,5],mainColorsOrder:[13,18,23,28,33],fontsKeys:["font_0","font_1","font_2","font_3","font_4","font_5","font_6","font_7","font_8","font_9","font_10"],fontNames:["Title","Menu","Page title","Heading XL","Heading L","Heading M","Heading S","Body L","Body M","Body S","Body XS"],sortedFonts:["Body XS","Menu","Body S","Body M","Body L","Heading S","Heading M","Title","Page title","Heading L","Heading XL"],defaultFontColor:15,lineHeights:[["1.25em","1.43em","1.25em","1.14em","1.18em","1.25em","1.25em","1.46em","1.5em","1.55em","1.43em"],["1.41em","1.79em","1.375em","1.2em","1.25em","1.34em","1.35em","1.67em","1.75em","1.875em","1.79em"],["1.25em","1.43em","1.125em","1.08em","1.111em","1.161em","1.146em","1.25em","1.25em","1.55em","1.43em"],["1.25em","1.43em","1.125em","1.08em","1.111em","1.161em","1.146em","1.46em","1.5em","1.55em","1.43em"]],LatinExtendedLanguages:["de","fr","pt","pl","tr"],debounceInterval:300}),angular.module("siteGeneratorStaticsCoreAppInternal").constant("layoutGroups",[{isGenerator:!0,name:"single object full width",segments:[{forContent:["GeneralDescription","Widget","Service","TeamMember","Welcome","ListHeader","PageHeader","Project","Client","Testimonial","FAQ","Social","Contact","About","Subscribe","Product","Feature","Event","HomePageTeaser","AnyList","CV","Quote","Facility","SpecialOffer","Membership","Donation","Careers","OpeningHours","Homepage_about","Inner_about","News","Portfolio","AnyWidget","AnyTpaSection"],generator:"h",heights:[3],left:0,multiple:1,space:20,top:0}],sitePart:"body",targetHeight:640,targetWidth:940,id:"5680125272e7a231006e2621"},{isGenerator:!0,name:"quad list  no header",
segments:[{forContent:["GeneralDescription","Widget","Service","TeamMember","Project","Client","Testimonial","FAQ","Social","Contact","About","Subscribe","Product","Feature","Event","HomePageTeaser","AnyList","CV","Quote","Facility","SpecialOffer","Membership","Donation","Careers","OpeningHours","Homepage_about","Inner_about","News","Portfolio"],generator:"h",heights:[3],left:0,multiple:4,space:20,top:0}],sitePart:"body",targetHeight:640,targetWidth:940,id:"5680125272e7a231006e2622"},{isGenerator:!0,name:"two way split Welcome,Contact,Social, Testimonial, Anylist",segments:[{forContent:["GeneralDescription","Widget","Service","TeamMember","Welcome","Project","Client","Testimonial","FAQ","Social","Contact","About","Subscribe","Product","Feature","Event","HomePageTeaser","AnyList","CV","Quote","Facility","SpecialOffer","Membership","Donation","Careers","OpeningHours","Homepage_about","Inner_about","News","Portfolio","AnyWidget"],generator:"h",heights:[3],left:0,multiple:2,space:20,top:0}],sitePart:"body",targetHeight:640,targetWidth:940,id:"5680125272e7a231006e2623"},{isGenerator:!0,name:"triple way split",segments:[{forContent:["GeneralDescription","Widget","Service","TeamMember","Project","Client","Testimonial","FAQ","Social","Contact","About","Subscribe","Product","Feature","Event","HomePageTeaser","AnyList","CV","Quote","Facility","SpecialOffer","Membership","Donation","Careers","OpeningHours","Homepage_about","Inner_about","Portfolio","News","AnyWidget"],generator:"h",heights:[3],left:0,multiple:3,space:20,top:0}],sitePart:"body",targetHeight:640,targetWidth:940,id:"5680125272e7a231006e2624"},{isGenerator:!0,name:"quad way split Welcome,Contact,Social, Testimonial",segments:[{forContent:["GeneralDescription","Widget","Welcome","Contact","Social","Testimonial","About","AnyList","CV","Quote","Facility","SpecialOffer","Membership","Donation","Careers","OpeningHours","Homepage_about","Inner_about","News","Portfolio","AnyWidget"],generator:"h",heights:[3],left:0,multiple:4,space:20,top:0}],sitePart:"body",targetHeight:640,targetWidth:940,id:"5680125272e7a231006e2625"},{columnPartition:[1,2],isGenerator:!1,name:"triple with partition of 1 2",segments:[{forContent:["Widget","About","Contact","Service","TeamMember","Project","Client","Testimonial","Feature","Product","FAQ","CV","Quote","Facility","SpecialOffer","Membership","Donation","Careers","OpeningHours","Homepage_about","Inner_about","Portfolio","News","AnyWidget"],left:0,top:0,width:460},{forContent:["Widget","About","Contact","Service","TeamMember","Project","Client","Testimonial","Feature","Product","FAQ","CV","Quote","Facility","SpecialOffer","Membership","Donation","Careers","OpeningHours","Homepage_about","Inner_about","News","Portfolio"],left:480,top:0,width:460},{forContent:["Widget","About","Contact","Service","TeamMember","Project","Client","Testimonial","Feature","Product","FAQ","CV","Quote","Facility","SpecialOffer","Membership","Donation","Careers","OpeningHours","Homepage_about","Inner_about","News","Portfolio"],left:480,top:0,width:460}],sitePart:"body",targetHeight:940,targetWidth:940,id:"5680125272e7a231006e2626"},{columnPartition:[2,1],isGenerator:!1,name:"triple with partition of 2 1",segments:[{forContent:["Widget","About","Contact","Service","TeamMember","Project","Client","Testimonial","Feature","Product","FAQ","CV","Quote","Facility","SpecialOffer","Membership","Donation","Careers","OpeningHours","Homepage_about","Inner_about","News","AnyWidget","Portfolio"],left:0,top:0,width:460},{forContent:["Widget","About","Contact","Service","TeamMember","Project","Client","Testimonial","Feature","Product","FAQ","CV","Quote","Facility","SpecialOffer","Membership","Donation","Careers","OpeningHours","Homepage_about","Inner_about","News","Portfolio"],left:0,top:0,width:460},{forContent:["Widget","About","Contact","Service","TeamMember","Project","Client","Testimonial","Feature","Product","FAQ","CV","Quote","Facility","SpecialOffer","Membership","Donation","Careers","OpeningHours","Homepage_about","Inner_about","News","Portfolio"],left:480,top:0,width:460}],sitePart:"body",targetHeight:940,targetWidth:940,id:"5680125272e7a231006e2627"},{columnPartition:[1,3],isGenerator:!1,name:"triple with partition of 1 3",segments:[{forContent:["Widget","About","Contact","Service","TeamMember","Project","Client","Testimonial","Feature","Product","FAQ","CV","Quote","Facility","SpecialOffer","Membership","Donation","Careers","OpeningHours","Homepage_about","Inner_about","News","AnyWidget","Portfolio"],left:0,top:0,width:460},{forContent:["Widget","About","Contact","Service","TeamMember","Project","Client","Testimonial","Feature","Product","FAQ","CV","Quote","Facility","SpecialOffer","Membership","Donation","Careers","OpeningHours","Homepage_about","Inner_about","News","Portfolio"],left:480,top:0,width:460},{forContent:["Widget","About","Contact","Service","TeamMember","Project","Client","Testimonial","Feature","Product","FAQ","CV","Quote","Facility","SpecialOffer","Membership","Donation","Careers","OpeningHours","Homepage_about","Inner_about","News","Portfolio"],left:480,top:0,width:460},{forContent:["Widget","About","Contact","Service","TeamMember","Project","Client","Testimonial","Feature","Product","FAQ","CV","Quote","Facility","SpecialOffer","Membership","Donation","Careers","OpeningHours","Homepage_about","Inner_about","News","Portfolio"],left:480,top:0,width:460}],sitePart:"body",targetHeight:940,targetWidth:940,id:"5680125272e7a231006e2628"},{columnPartition:[3,1],isGenerator:!1,name:"triple with partition of 3 1",segments:[{forContent:["Widget","About","Contact","Service","TeamMember","Project","Client","Testimonial","Feature","Product","FAQ","CV","Quote","Facility","SpecialOffer","Membership","Donation","Careers","OpeningHours","Homepage_about","Inner_about","News","AnyWidget","Portfolio"],left:0,top:0,width:460},{forContent:["Widget","About","Contact","Service","TeamMember","Project","Client","Testimonial","Feature","Product","FAQ","CV","Quote","Facility","SpecialOffer","Membership","Donation","Careers","OpeningHours","Homepage_about","Inner_about","News","Portfolio"],left:0,top:0,width:460},{forContent:["Widget","About","Contact","Service","TeamMember","Project","Client","Testimonial","Feature","Product","FAQ","CV","Quote","Facility","SpecialOffer","Membership","Donation","Careers","OpeningHours","Homepage_about","Inner_about","News","Portfolio"],left:0,top:0,width:460},{forContent:["Widget","About","Contact","Service","TeamMember","Project","Client","Testimonial","Feature","Product","FAQ","CV","Quote","Facility","SpecialOffer","Membership","Donation","Careers","OpeningHours","Homepage_about","Inner_about","News","Portfolio"],left:480,top:0,width:460}],sitePart:"body",targetHeight:940,targetWidth:940,id:"5680125272e7a231006e2629"},{isGenerator:!1,name:"2:1 split",segments:[{forContent:["GeneralDescription","Widget","Welcome","Contact","Social","Testimonial","About","AnyList","OpeningHours","Homepage_about","Inner_about","Quote","Facility","SpecialOffer","Membership","Donation","Careers","AnyWidget","Portfolio"],left:0,top:0,width:620},{forContent:["GeneralDescription","Widget","Contact","Social","Testimonial","About","AnyList","OpeningHours","Homepage_about","Inner_about","Quote","Facility","SpecialOffer","Membership","Donation","Careers","AnyWidget","Portfolio"],left:640,top:0,width:300}],sitePart:"body",targetHeight:130,targetWidth:940,id:"5680125272e7a231006e262b"},{isGenerator:!1,name:"1:2 split",segments:[{forContent:["GeneralDescription","Widget","Contact","Social","Testimonial","About","AnyList","OpeningHours","Homepage_about","Inner_about","Quote","Facility","SpecialOffer","Membership","Donation","Careers","AnyWidget","Portfolio"],left:0,top:0,width:300},{forContent:["GeneralDescription","Widget","Welcome","Contact","Social","Testimonial","About","AnyList","OpeningHours","Homepage_about","Inner_about","Quote","Facility","SpecialOffer","Membership","Donation","Careers","AnyWidget","Portfolio"],left:320,top:0,width:620}],sitePart:"body",targetHeight:130,targetWidth:940,id:"5680125272e7a231006e262c"},{isGenerator:!1,name:"1:3 split",segments:[{forContent:["GeneralDescription","Widget","Contact","Social","Testimonial","About","AnyList","OpeningHours","Homepage_about","Inner_about","Quote","Facility","SpecialOffer","Membership","Donation","Careers","AnyWidget","Portfolio"],left:0,top:0,width:220},{forContent:["GeneralDescription","Widget","Contact","Social","Testimonial","About","AnyList","OpeningHours","Homepage_about","Inner_about","Quote","Facility","SpecialOffer","Membership","Donation","Careers","AnyWidget","Portfolio"],left:240,top:0,width:700}],sitePart:"body",targetHeight:130,targetWidth:940,id:"5680125272e7a231006e262d"},{isGenerator:!1,name:"3:1 split",segments:[{forContent:["GeneralDescription","Widget","Welcome","Contact","Social","Testimonial","About","AnyList","OpeningHours","Homepage_about","Inner_about","Quote","Facility","SpecialOffer","Membership","Donation","Careers","AnyWidget","Portfolio"],left:0,top:0,width:700},{forContent:["GeneralDescription","Widget","Welcome","Contact","Social","Testimonial","About","AnyList","OpeningHours","Homepage_about","Inner_about","Quote","Facility","SpecialOffer","Membership","Donation","Careers","AnyWidget","Portfolio"],left:720,top:0,width:220}],sitePart:"body",targetHeight:130,targetWidth:940,id:"5680125272e7a231006e262e"},{isGenerator:!1,name:"1:1:2 split",segments:[{forContent:["GeneralDescription","Widget","Contact","Social","Testimonial","About","AnyList","OpeningHours","Homepage_about","Inner_about","Quote","Facility","SpecialOffer","Membership","Donation","Careers","AnyWidget","Portfolio"],left:0,top:0,width:220},{forContent:["GeneralDescription","Widget","Contact","Social","Testimonial","About","AnyList","OpeningHours","Homepage_about","Inner_about","Quote","Facility","SpecialOffer","Membership","Donation","Careers","AnyWidget","Portfolio"],left:240,top:0,width:220},{forContent:["Widget","Contact","Social","Testimonial","About","AnyList","OpeningHours","Homepage_about","Inner_about","Quote","Facility","SpecialOffer","Membership","Donation","Careers","AnyWidget","Portfolio"],left:480,top:0,width:460}],sitePart:"body",targetHeight:130,targetWidth:940,id:"5680125272e7a231006e262f"},{isGenerator:!1,name:"2:1:1 split",segments:[{forContent:["GeneralDescription","Widget","Welcome","Contact","Social","Testimonial","About","AnyList","OpeningHours","Homepage_about","Inner_about","Quote","Facility","SpecialOffer","Membership","Donation","Careers","AnyWidget","Portfolio"],left:0,top:0,width:460},{forContent:["GeneralDescription","Widget","Welcome","Contact","Social","Testimonial","About","AnyList","OpeningHours","Homepage_about","Inner_about","Quote","Facility","SpecialOffer","Membership","Donation","Careers","AnyWidget","Portfolio"],left:480,top:0,width:220},{forContent:["Widget","Welcome","Contact","Social","Testimonial","About","AnyList","OpeningHours","Homepage_about","Inner_about","Quote","Facility","SpecialOffer","Membership","Donation","Careers","AnyWidget","Portfolio"],left:720,top:0,width:220}],sitePart:"body",targetHeight:130,targetWidth:940,id:"5680125272e7a231006e2630"},{isGenerator:!0,name:"listFooter 60 pixels",segments:[{forContent:["ListFooter"],generator:"h",heights:[1],left:0,multiple:1,space:20,top:0}],sitePart:"body",targetHeight:60,targetWidth:940,id:"5680125372e7a231006e2632"}]),angular.module("siteGeneratorStaticsCoreAppInternal").constant("referenceFields",{Contact:["phone number","fax","address for display","opening hours"],Social:["SocialButtons"],GeneralDescription:["BusinessName","Logo","MainEmail","CopyrightMessage"]}),function(a){var b=a._||require("lodash"),c=/\+/g,d=/(?:([^\[]+))|(?:\[(.*?)\])/g,e=function(a){return decodeURIComponent(a.replace(c,"%20"))},f=function(a,c,d){return b.isUndefined(d)&&(d=!0),b.isArray(c)?b.map(c,function(b,c){return f(d?c:a+"[]",b,!1)}).join("&"):b.isObject(c)?b.map(c,function(b,c){return f(d?c:a+"["+c+"]",b,!1)}).join("&"):encodeURIComponent(a)+"="+encodeURIComponent(c)},g={"\n":"<br />","&":"&amp;","<":"&lt;",">":"&gt;",'"':"&quot;","'":"&#39;","/":"&#x2F;"},h=/[&<>"'\/\n]/g;b.mixin({explode:function(a){return a.split("")},fromQuery:function(a){var c,f,g,h,i,j=a.split("&"),k={};return b.each(j,function(a){for(a=a.split("="),c=e(a[0]),g=c,i=k,d.lastIndex=0;null!==(f=d.exec(c));)b.isUndefined(f[1])?(h=f[2],i[g]=i[g]||(h?{}:[]),i=i[g]):h=f[1],g=h||b.size(i);i[g]=e(a[1])}),k},implode:function(a){return a.join("")},camelCase:function(a){return a.replace(/[-_\s](\w)/g,function(a){return a[1].toUpperCase()})},toDash:function(a){return a=a.replace(/([A-Z])/g,function(a){return"-"+a.toLowerCase()}),"-"==a.charAt(0)?a.substr(1):a},snakeCase:function(a){return a=a.replace(/([A-Z])/g,function(a){return"_"+a.toLowerCase()}),"_"==a.charAt(0)?a.substr(1):a},toQuery:function(a){return f("",a)},strContains:function(a,b){if("string"!=typeof a)throw new TypeError;return-1!=a.indexOf(b)},capitalize:function(a){return a.charAt(0).toUpperCase()+a.slice(1)},titleCase:function(a){return a.replace(/(\b.)/g,function(a){return a.toUpperCase()})},slugify:function(a){return a.replace(/ /g,"-").replace(/\./,"").toLowerCase()},regexEscape:function(a){return a.replace(/[\-\[\]\/\{\}\(\)\*\+\?\.\\\^\$\|]/g,"\\$&")},humanize:function(a){return b.capitalize(a.replace(/_/g," ").replace(/([a-z])([A-Z])/g,"$1 $2").replace(/\b([A-Z]+)([A-Z])([a-z])/,"$1 $2$3"))},stripTags:function(a){var b=a.replace(/<\/?[^<>]*>/gi,"");return b},htmlEncode:function(a){return a&&a.replace(h,function(a){return g[a]||a})},extractPlainText:function(a){return a&&angular.element("<div></div>").html(a).text().replace(/\n\s+/g,"\n").replace(/[\u200B-\u200D\uFEFF]/g,"").trim()}})}(this),function(a){function b(b,c){var d=[],e=Promise.resolve();return a.each(b,function(a,b){e=e.then(function(e){return d.push(e),c(a,b)})}),e.then(function(a){return d.push(a),d.slice(1)})}function c(b,c){return a.sequencePromises(b,c).then(function(c){return a.filter(b,function(a,b){return c[b]})})}function d(b,c){var d=Promise.resolve(!0);return a.each(b,function(a,b){d=d.then(function(d){return d?c(a,b):!1})}),d.then(function(a){return!!a})}function e(b,c){var d=Promise.resolve(!1);return a.each(b,function(a,b){d=d.then(function(d){return d?!0:c(a,b)})}),d}function f(a,b){return new Promise(function(c,d){var e=function(f){return a(f)?Promise.cast(b()).then(e,d):c(f)};return e()})}function g(b,c){var d=a.collect(b,c);return Promise.all(d)}function h(c,d){return b(c,d).then(a.all)}a.mixin({sequencePromises:b,filterPromises:c,allPromises:d,anyPromises:e,collectPromises:g,whilePromises:f,sequencePromisesThenAll:h})}(_),function(a){function b(b){return a.isArray(b)?b:b.split(".")}function c(c,d,e){d=b(d);for(var f=-1,g=d.length,h=g-1,i=c;void 0!==i&&++f<g;){var j=d[f];a.isObject(i)&&(f===h?i[j]=e:void 0===i[j]&&(i[j]={})),i=i[j]}return c}a.mixin({setObject:c})}(_),function(a,b){"object"==typeof exports&&"object"==typeof module?module.exports=b():"function"==typeof define&&define.amd?define([],b):"object"==typeof exports?exports.Cropper=b():a.Cropper=b()}(this,function(){return function(a){function b(d){if(c[d])return c[d].exports;var e=c[d]={exports:{},id:d,loaded:!1};return a[d].call(e.exports,e,e.exports,b),e.loaded=!0,e.exports}var c={};return b.m=a,b.c=c,b.p="",b(0)}([function(a,b,c){a.exports=c(1)},function(a,b,c){var d=c(2),e=c(4);a.exports={create:function(a,b,c){var f=new d(a,b,c),g=new e(f);return g},Cropper:d,CropperUI:e}},function(a,b,c){function d(a,b){var c=a.width/a.height;return a=angular.copy(a),a.height=b.height*e.maxAdjustedZoom,a.width=c*a.height,a}function e(a,b,c){return this instanceof e?(this.originalImgData=a,a=d(a,b),c=c||e.getAutoCropArea(a,b),this.imgData=a,this.viewport={top:b.top,left:b.left,width:b.width,height:b.height},this.cropData={x:c.x,y:c.y,w:c.w,h:c.h},this.state={x:0,y:0,width:0,height:0},void this.setCrop(c.x,c.y,c.w,c.h)):new e(a,b,c)}var f=c(3);e.maxAdjustedZoom=10,e.getSmartCropArea=function(a,b,c){f.crop(a,{width:b.width,height:b.height},function(a){c(a)})},e.getAutoCropArea=function(a,b){var c,d,e,f,g=b.width/b.height,h=(a.width/a.height,b.width/a.width),i=b.height/a.height;return h>i?(e=a.width,d=a.width/g,f=a.height-d,c={x:0,y:f/2,w:e,h:d}):(e=a.height*g,d=a.height,f=a.width-e,c={x:f/2,y:0,w:e,h:d}),c},e.prototype.setSmartCrop=function(a){var b=this,c=new Image;c.onload=function(){e.getSmartCropArea(c,b.viewport,function(c){var d=c.topCrop;b.setCrop(d.x,d.y,d.width,d.height),a&&a()})},c.src=this.imgData.uri,c.src&&-1===c.src.indexOf("?")&&(c.src=c.src+"?"+(new Date).getTime(),c.setAttribute("crossOrigin","anonymous"))},e.prototype.getMaxZoomRatio=function(a){var b=this.viewport.width/this.imgData.width,c=this.viewport.height/this.imgData.height,d=Math.max(b,c);return d},e.prototype.setUnadjustedCrop=function(a,b,c,d){var f=this.originalImgData.height/(this.viewport.height*e.maxAdjustedZoom);this.setCrop(a/f,b/f,c/f,d/f)},e.prototype.getUnadjustedCropData=function(a){var b=this.getCropData(),c=this.originalImgData.height/(this.viewport.height*e.maxAdjustedZoom);return{x:c*b.x,y:c*b.y,w:c*b.w,h:c*b.h}},e.prototype.getCropData=function(a){return{x:this.cropData.x,y:this.cropData.y,w:this.cropData.w,h:this.cropData.h}},e.prototype.getZoom=function(){var a=this.getMaxZoomRatio(),b=this.state.width/this.imgData.width,c=(b-a)/(1-a);return c},e.prototype.setZoom=function(a){var b=this.getMaxZoomRatio();a=b+a*(1-b);var c=this.state.width/this.imgData.width;c=1/c;var d=1*this.cropData.w/c,e=1*this.cropData.h/c,f=this.cropData.x-(d-this.cropData.w)/2,g=this.cropData.y-(e-this.cropData.h)/2,h=1*d/a,i=1*e/a,j=f-(h-d)/2,k=g-(i-e)/2;this.setCrop(j,k,h,i)},e.prototype.setViewport=function(a,b){var c=this.viewport;this.viewport={top:a.top,left:a.left,width:a.width,height:a.height};var d;b?d=e.getAutoCropArea(this.imgData,a):(d=this.cropData,d.w=d.w*(a.width/c.width),d.h=d.h*(a.height/c.height)),this.setCrop(d.x,d.y,d.w,d.h)},e.prototype.setImgData=function(a){this.originalImgData=a,this.imgData=d(a,this.viewport),this.setCrop(this.cropData.x,this.cropData.y,this.cropData.w,this.cropData.h)},e.prototype.setCrop=function(a,b,c,d){var e=(this.imgData.width/this.imgData.height,this.viewport.width/this.viewport.height);e!==c/d&&(this.viewport.width>this.viewport.height?d=c/e:c=d*e),c<this.viewport.width&&(c=this.viewport.width,d=c/e),c>this.imgData.width&&(c=this.imgData.width,d=c/e),d<this.viewport.height&&(d=this.viewport.height,c=d*e),d>this.imgData.height&&(d=this.imgData.height,c=d*e),a=Math.max(Math.min(a,this.imgData.width-c),0),b=Math.max(Math.min(b,this.imgData.height-d),0);var f=this.viewport.width/c,g=this.viewport.height/d,h=a+c/2,i=b+d/2,j=this.viewport.left+this.viewport.width/2,k=this.viewport.top+this.viewport.height/2,l=h*f+this.viewport.left,m=i*g+this.viewport.top;this.cropData.x=a,this.cropData.y=b,this.cropData.w=c,this.cropData.h=d,this.state.width=this.imgData.width*f,this.state.height=this.imgData.height*g,this.state.x=j-l,this.state.y=k-m},a.exports=e},function(a,b){var c=function(){function a(c){this.options=b({},a.DEFAULTS,c)}function b(a){for(var b=1,c=arguments.length;c>b;b++){var d=arguments[b];if(d)for(var e in d)a[e]=d[e]}return a}function c(a){return a=16*((a-1/3+1)%2*.5-.5),Math.max(1-a*a,0)}function d(a,b,c){return.5126*c+.7152*b+.0722*a}function e(a,b){return d(a[b],a[b+1],a[b+2])}function f(a,b,c){var d=h(a/255,b/255,c/255),e=g(a/255,b/255,c/255);if(d===e)return 0;var f=(d+e)/2,i=d-e;return f>.5?i/(2-d-e):i/(d+e)}a.DEFAULTS={width:0,height:0,aspect:0,cropWidth:0,cropHeight:0,detailWeight:.2,skinColor:[.78,.57,.44],skinBias:.01,skinBrightnessMin:.2,skinBrightnessMax:1,skinThreshold:.8,skinWeight:1.8,saturationBrightnessMin:.05,saturationBrightnessMax:.9,saturationThreshold:.4,saturationBias:.2,saturationWeight:.3,scoreDownSample:8,step:8,scaleStep:.1,minScale:.9,maxScale:1,edgeRadius:.4,edgeWeight:-20,outsideImportance:-.5,ruleOfThirds:!0,prescale:!0,canvasFactory:null,debug:!1},a.crop=function(b,c,d){if(c.aspect&&(c.width=c.aspect,c.height=1),b.naturalWidth&&(b.naturalWidth!=b.width||b.naturalHeight!=b.height)){var e=new a(c).canvas(b.naturalWidth,b.naturalHeight),f=e.getContext("2d");e.width=b.naturalWidth,e.height=b.naturalHeight,f.drawImage(b,0,0),b=e}var i=1,j=1;c.width&&c.height&&(i=g(b.width/c.width,b.height/c.height),c.cropWidth=~~(c.width*i),c.cropHeight=~~(c.height*i),c.minScale=g(c.maxScale||a.DEFAULTS.maxScale,h(1/i,c.minScale||a.DEFAULTS.minScale)));var k=new a(c);if(c.width&&c.height&&c.prescale!==!1)if(j=1/i/c.minScale,1>j){var l=k.canvas(b.width*j,b.height*j),m=l.getContext("2d");m.drawImage(b,0,0,b.width,b.height,0,0,l.width,l.height),b=l,k.options.cropWidth=~~(c.cropWidth*j),k.options.cropHeight=~~(c.cropHeight*j)}else j=1;for(var n=k.analyse(b),o=0,p=n.crops.length;p>o;o++){var q=n.crops[o];q.x=~~(q.x/j),q.y=~~(q.y/j),q.width=~~(q.width/j),q.height=~~(q.height/j)}return d(n),n},a.isAvailable=function(a){try{var b=new this(a),c=b.canvas(16,16);return"function"==typeof c.getContext}catch(d){return!1}},a.prototype={canvas:function(a,b){if(null!==this.options.canvasFactory)return this.options.canvasFactory(a,b);var c=document.createElement("canvas");return c.width=a,c.height=b,c},edgeDetect:function(a,b){for(var c=a.data,d=b.data,f=a.width,g=a.height,h=0;g>h;h++)for(var i=0;f>i;i++){var j,k=4*(h*f+i);j=0===i||i>=f-1||0===h||h>=g-1?e(c,k):4*e(c,k)-e(c,k-4*f)-e(c,k-4)-e(c,k+4)-e(c,k+4*f),d[k+1]=j}},skinDetect:function(a,b){for(var c=a.data,e=b.data,f=a.width,g=a.height,h=this.options,i=0;g>i;i++)for(var j=0;f>j;j++){var k=4*(i*f+j),l=d(c[k],c[k+1],c[k+2])/255,m=this.skinColor(c[k],c[k+1],c[k+2]);m>h.skinThreshold&&l>=h.skinBrightnessMin&&l<=h.skinBrightnessMax?e[k]=(m-h.skinThreshold)*(255/(1-h.skinThreshold)):e[k]=0}},saturationDetect:function(a,b){for(var c=a.data,e=b.data,g=a.width,h=a.height,i=this.options,j=0;h>j;j++)for(var k=0;g>k;k++){var l=4*(j*g+k),m=d(c[l],c[l+1],c[l+2])/255,n=f(c[l],c[l+1],c[l+2]);n>i.saturationThreshold&&m>=i.saturationBrightnessMin&&m<=i.saturationBrightnessMax?e[l+2]=(n-i.saturationThreshold)*(255/(1-i.saturationThreshold)):e[l+2]=0}},crops:function(a){for(var b=[],c=a.width,d=a.height,e=this.options,f=g(c,d),h=e.cropWidth||f,i=e.cropHeight||f,j=e.maxScale;j>=e.minScale;j-=e.scaleStep)for(var k=0;d>=k+i*j;k+=e.step)for(var l=0;c>=l+h*j;l+=e.step)b.push({x:l,y:k,width:h*j,height:i*j});return b},score:function(a,b){for(var c={detail:0,saturation:0,skin:0,total:0},d=this.options,e=a.data,f=d.scoreDownSample,g=1/f,h=a.height*f,i=a.width*f,j=a.width,k=0;h>k;k+=f)for(var l=0;i>l;l+=f){var m=4*(~~(k*g)*j+~~(l*g)),n=this.importance(b,l,k),o=e[m+1]/255;c.skin+=e[m]/255*(o+d.skinBias)*n,c.detail+=o*n,c.saturation+=e[m+2]/255*(o+d.saturationBias)*n}return c.total=(c.detail*d.detailWeight+c.skin*d.skinWeight+c.saturation*d.saturationWeight)/b.width/b.height,c},importance:function(a,b,d){var e=this.options;if(a.x>b||b>=a.x+a.width||a.y>d||d>=a.y+a.height)return e.outsideImportance;b=(b-a.x)/a.width,d=(d-a.y)/a.height;var f=2*i(.5-b),g=2*i(.5-d),h=Math.max(f-1+e.edgeRadius,0),j=Math.max(g-1+e.edgeRadius,0),l=(h*h+j*j)*e.edgeWeight,m=1.41-k(f*f+g*g);return e.ruleOfThirds&&(m+=1.2*Math.max(0,m+l+.5)*(c(f)+c(g))),m+l},skinColor:function(a,b,c){var d=k(a*a+b*b+c*c),e=this.options,f=a/d-e.skinColor[0],g=b/d-e.skinColor[1],h=c/d-e.skinColor[2],i=k(f*f+g*g+h*h);return 1-i},analyse:function(a){var b={},c=this.options,d=this.canvas(a.width,a.height),e=d.getContext("2d");e.drawImage(a,0,0);var f=e.getImageData(0,0,d.width,d.height),g=e.getImageData(0,0,d.width,d.height);this.edgeDetect(f,g),this.skinDetect(f,g),this.saturationDetect(f,g);var h=this.canvas(j(a.width/c.scoreDownSample),j(a.height/c.scoreDownSample)),i=h.getContext("2d");e.putImageData(g,0,0),i.drawImage(d,0,0,d.width,d.height,0,0,h.width,h.height);for(var k=i.getImageData(0,0,h.width,h.height),l=-(1/0),m=null,n=this.crops(a),o=0,p=n.length;p>o;o++){var q=n[o];q.score=this.score(k,q),q.score.total>l&&(m=q,l=q.score.total)}if(b.crops=n,b.topCrop=m,c.debug&&m){e.fillStyle="rgba(255, 0, 0, 0.1)",e.fillRect(m.x,m.y,m.width,m.height);for(var r=0;r<g.height;r++)for(var s=0;s<g.width;s++){var t=4*(r*g.width+s),u=this.importance(m,s,r);u>0&&(g.data[t+1]+=32*u),0>u&&(g.data[t]+=-64*u),g.data[t+3]=255}e.putImageData(g,0,0),e.strokeStyle="rgba(255, 0, 0, 0.8)",e.strokeRect(m.x,m.y,m.width,m.height),b.debugCanvas=d}return b}};var g=Math.min,h=Math.max,i=Math.abs,j=Math.ceil,k=Math.sqrt;return a}();a.exports=c},function(a,b,c){function d(a){this.modal=!0,this.cropper=a,this.unbindEvents=null,this.updating=!1,this.updateDOM=this.updateDOM.bind(this),this.update=this.update.bind(this),this.intialUpdate=!0,this.markup(),this.bindEvents(),this.update()}var e=(c(5),c(9));d.prototype.update=function(a){this.updating||(this.updating=!0,this.intialUpdate||a?this.updateDOM():setTimeout(this.updateDOM,1e3/24))},d.prototype.updateDOM=function(){var a=this.cropper;this.updating=!1,this.intialUpdate=!1,this.$outlineContainer.style.top=a.state.y+a.viewport.top+"px",this.$outlineContainer.style.left=a.state.x+a.viewport.left+"px",this.$outlineContainer.style.width=a.state.width+"px",this.$outlineContainer.style.height=a.state.height+"px",this.$contentImg.style.top=a.state.y+"px",this.$contentImg.style.left=a.state.x+"px",this.$contentImg.style.width=a.state.width+"px",this.$contentImg.style.height=a.state.height+"px",this.$contentContainer.style.top=this.cropper.viewport.top+"px",this.$contentContainer.style.left=this.cropper.viewport.left+"px",this.$contentContainer.style.width=this.cropper.viewport.width+"px",this.$contentContainer.style.height=this.cropper.viewport.height+"px",this.$contentImg.getAttribute("src")!==this.cropper.imgData.uri&&(this.$contentImg.setAttribute("src",this.cropper.imgData.uri),this.$outlineImg.setAttribute("src",this.cropper.imgData.uri)),this.onUpdate&&this.onUpdate()},d.prototype.markup=function(){this.$root=document.createElement("div"),this.$root.className="cropper-tool",this.$overlay=document.createElement("div"),this.$overlay.className="cropper-tool-overlay",this.modal&&this.$root.appendChild(this.$overlay),this.$contentImg=document.createElement("img"),this.$contentImg.className="cropper-tool-content-image",this.$contentImg.src=this.cropper.imgData.uri,this.$contentImg.style.position="absolute",this.$contentContainer=document.createElement("div"),this.$contentContainer.className="cropper-tool-content-container",this.$contentContainer.appendChild(this.$contentImg),this.$contentContainer.style.position="absolute",this.$contentContainer.style.overflow="hidden",this.$outlineContainer=document.createElement("div"),this.$outlineContainer.className="cropper-tool-outline-container",this.$outlineContainer.style.position="absolute",this.$outlineImg=document.createElement("img"),this.$outlineImg.className="cropper-tool-outline-image",this.$outlineImg.src=this.cropper.imgData.uri,this.$outlineImg.style.width="100%",this.$outlineImg.style.height="100%",this.$outlineContainer.appendChild(this.$outlineImg),this.$root.appendChild(this.$outlineContainer),this.$root.appendChild(this.$contentContainer)},d.prototype.bindEvents=function(){function a(a){a.stopPropagation();var d=c.getZoom(),e=.1;c.setZoom(Math.min(Math.max(a.deltaY<0?d+e:d-e,0),1)),b.update()}var b=this,c=this.cropper,d=e(this.$outlineContainer,a,!1),f=e(this.$contentContainer,a,!1),g=this.$root,h=!1,i=1,j=1,k={},l={},m=function(a){a.target!==b.$overlay&&(a.preventDefault(),h=!0,i=c.cropData.w/c.viewport.width,j=c.cropData.h/c.viewport.height,l.x=c.cropData.x,l.y=c.cropData.y,k.x=a.clientX,k.y=a.clientY)},n=function(a){if(h){a.preventDefault(),h=!1;var d=i*(k.x-a.clientX),e=j*(k.y-a.clientY);c.setCrop(l.x+d,l.y+e,c.cropData.w,c.cropData.h),b.update()}},o=function(a){if(h){a.preventDefault();var d=i*(k.x-a.clientX),e=j*(k.y-a.clientY);c.setCrop(l.x+d,l.y+e,c.cropData.w,c.cropData.h),b.update()}};g.addEventListener("mousedown",m,!1),window.addEventListener("mouseup",n,!1),window.addEventListener("mousemove",o,!1),this.unbindEvents=function(){d(),f(),g.removeEventListener("mousedown",m,!1),window.removeEventListener("mouseup",n,!1),window.removeEventListener("mousemove",o,!1)}},d.prototype.destroy=function(){this.$root.parentNode&&this.$root.parentNode.removeChild(this.$root),this.unbindEvents&&this.unbindEvents()},a.exports=d},function(a,b,c){var d=c(6);"string"==typeof d&&(d=[[a.id,d,""]]);c(8)(d,{});d.locals&&(a.exports=d.locals)},function(a,b,c){b=a.exports=c(7)(),b.push([a.id,".cropper-tool-outline-image{\n	opacity: 0.2;	\n}\n\n.cropper-tool-outline-container,\n.cropper-tool-content-container\n{\n  outline: 1px solid rgba(0,0,0,1);\n}\n.cropper-tool-overlay{\n	background: rgba(0,0,0,0.8);\n	position: fixed;\n	width: 110%;\n	height: 110%;\n	margin: -5% 0 0 -5%;\n}\n\n.cropper-tool-controls{\n	z-index: 1;\n	position: fixed;\n}",""])},function(a,b){a.exports=function(){var a=[];return a.toString=function(){for(var a=[],b=0;b<this.length;b++){var c=this[b];c[2]?a.push("@media "+c[2]+"{"+c[1]+"}"):a.push(c[1])}return a.join("")},a.i=function(b,c){"string"==typeof b&&(b=[[null,b,""]]);for(var d={},e=0;e<this.length;e++){var f=this[e][0];"number"==typeof f&&(d[f]=!0)}for(e=0;e<b.length;e++){var g=b[e];"number"==typeof g[0]&&d[g[0]]||(c&&!g[2]?g[2]=c:c&&(g[2]="("+g[2]+") and ("+c+")"),a.push(g))}},a}},function(a,b,c){function d(a,b){for(var c=0;c<a.length;c++){var d=a[c],e=n[d.id];if(e){e.refs++;for(var f=0;f<e.parts.length;f++)e.parts[f](d.parts[f]);for(;f<d.parts.length;f++)e.parts.push(j(d.parts[f],b))}else{for(var g=[],f=0;f<d.parts.length;f++)g.push(j(d.parts[f],b));n[d.id]={id:d.id,refs:1,parts:g}}}}function e(a){for(var b=[],c={},d=0;d<a.length;d++){var e=a[d],f=e[0],g=e[1],h=e[2],i=e[3],j={css:g,media:h,sourceMap:i};c[f]?c[f].parts.push(j):b.push(c[f]={id:f,parts:[j]})}return b}function f(a,b){var c=q(),d=t[t.length-1];if("top"===a.insertAt)d?d.nextSibling?c.insertBefore(b,d.nextSibling):c.appendChild(b):c.insertBefore(b,c.firstChild),t.push(b);else{if("bottom"!==a.insertAt)throw new Error("Invalid value for parameter 'insertAt'. Must be 'top' or 'bottom'.");c.appendChild(b)}}function g(a){a.parentNode.removeChild(a);var b=t.indexOf(a);b>=0&&t.splice(b,1)}function h(a){var b=document.createElement("style");return b.type="text/css",f(a,b),b}function i(a){var b=document.createElement("link");return b.rel="stylesheet",f(a,b),b}function j(a,b){var c,d,e;if(b.singleton){var f=s++;c=r||(r=h(b)),d=k.bind(null,c,f,!1),e=k.bind(null,c,f,!0)}else a.sourceMap&&"function"==typeof URL&&"function"==typeof URL.createObjectURL&&"function"==typeof URL.revokeObjectURL&&"function"==typeof Blob&&"function"==typeof btoa?(c=i(b),d=m.bind(null,c),e=function(){g(c),c.href&&URL.revokeObjectURL(c.href)}):(c=h(b),d=l.bind(null,c),e=function(){g(c)});return d(a),function(b){if(b){if(b.css===a.css&&b.media===a.media&&b.sourceMap===a.sourceMap)return;d(a=b)}else e()}}function k(a,b,c,d){var e=c?"":d.css;if(a.styleSheet)a.styleSheet.cssText=u(b,e);else{var f=document.createTextNode(e),g=a.childNodes;g[b]&&a.removeChild(g[b]),g.length?a.insertBefore(f,g[b]):a.appendChild(f)}}function l(a,b){var c=b.css,d=b.media;b.sourceMap;if(d&&a.setAttribute("media",d),a.styleSheet)a.styleSheet.cssText=c;else{for(;a.firstChild;)a.removeChild(a.firstChild);a.appendChild(document.createTextNode(c))}}function m(a,b){var c=b.css,d=(b.media,b.sourceMap);d&&(c+="\n");var e=new Blob([c],{type:"text/css"}),f=a.href;a.href=URL.createObjectURL(e),f&&URL.revokeObjectURL(f)}var n={},o=function(a){var b;return function(){return"undefined"==typeof b&&(b=a.apply(this,arguments)),b}},p=o(function(){return/msie [6-9]\b/.test(window.navigator.userAgent.toLowerCase())}),q=o(function(){return document.head||document.getElementsByTagName("head")[0]}),r=null,s=0,t=[];a.exports=function(a,b){b=b||{},"undefined"==typeof b.singleton&&(b.singleton=p()),"undefined"==typeof b.insertAt&&(b.insertAt="bottom");var c=e(a);return d(c,b),function(a){for(var f=[],g=0;g<c.length;g++){
var h=c[g],i=n[h.id];i.refs--,f.push(i)}if(a){var j=e(a);d(j,b)}for(var g=0;g<f.length;g++){var i=f[g];if(0===i.refs){for(var k=0;k<i.parts.length;k++)i.parts[k]();delete n[i.id]}}}};var u=function(){var a=[];return function(b,c){return a[b]=c,a.filter(Boolean).join("\n")}}()},function(a,b){var c=function(a,b){function c(b,c,h,i){var j=function(b){!b&&(b=a.event);var c={originalEvent:b,target:b.target||b.srcElement,type:"wheel",deltaMode:"MozMousePixelScroll"==b.type?0:1,deltaX:0,deltaZ:0,preventDefault:function(){b.preventDefault?b.preventDefault():b.returnValue=!1}};return"mousewheel"==f?(c.deltaY=-1/40*b.wheelDelta,b.wheelDeltaX&&(c.deltaX=-1/40*b.wheelDeltaX)):c.deltaY=b.detail,h(c)};return b[d](g+c,"wheel"==f?h:j,i||!1),function(){b[e](g+c,"wheel"==f?h:j,i||!1)}}var d,e,f,g="";return a.addEventListener?(d="addEventListener",e="removeEventListener"):(d="attachEvent",e="detachEvent",g="on"),f="onwheel"in b.createElement("div")?"wheel":void 0!==b.onmousewheel?"mousewheel":"DOMMouseScroll",function(a,b,d){return c(a,f,b,d)}}(window,document);a.exports=c}])});var helpers;!function(a){function b(a){return new c(a,[])}var c=function(){function a(a,b){b=b||[],this.queue=Array.apply(null,b),this.fixedSize=a,this.trimTail()}return a.prototype.trimHead=function(){this.queue.length<=this.fixedSize||Array.prototype.splice.call(this.queue,0,this.queue.length-this.fixedSize)},a.prototype.trimTail=function(){this.queue.length<=this.fixedSize||Array.prototype.splice.call(this.queue,this.fixedSize,this.queue.length-this.fixedSize)},a.prototype.push=function(a){this.queue.push(a),this.trimHead()},a.prototype.unshift=function(a){var b=this.queue.unshift(a);return this.trimTail(),b},a.prototype.shift=function(a){return this.queue.shift()},a.prototype.peek=function(){return this.queue[0]},a.prototype.length=function(){return this.queue.length},a}();a.FixedLengthQueue=c,a.aFixedLengthQueue=b}(helpers||(helpers={}));var LogoColorExtraction=function(){function a(){}return a.prototype.rgb2lab=function(a){var b,c,d,e=a[0]/255,f=a[1]/255,g=a[2]/255;return e=e>.04045?Math.pow((e+.055)/1.055,2.4):e/12.92,f=f>.04045?Math.pow((f+.055)/1.055,2.4):f/12.92,g=g>.04045?Math.pow((g+.055)/1.055,2.4):g/12.92,b=(.4124*e+.3576*f+.1805*g)/.95047,c=(.2126*e+.7152*f+.0722*g)/1,d=(.0193*e+.1192*f+.9505*g)/1.08883,b=b>.008856?Math.pow(b,1/3):7.787*b+16/116,c=c>.008856?Math.pow(c,1/3):7.787*c+16/116,d=d>.008856?Math.pow(d,1/3):7.787*d+16/116,[116*c-16,500*(b-c),200*(c-d)]},a.prototype.deltaE=function(a,b){var c=a[0]-b[0],d=a[1]-b[1],e=a[2]-b[2],f=Math.sqrt(a[1]*a[1]+a[2]*a[2]),g=Math.sqrt(b[1]*b[1]+b[2]*b[2]),h=f-g,i=d*d+e*e-h*h;i=0>i?0:Math.sqrt(i);var j=1+.045*f,k=1+.015*f,l=c/1,m=h/j,n=i/k,o=l*l+m*m+n*n;return 0>o?0:Math.sqrt(o)},a.prototype.getColorfulness=function(a){var b=this.rgb2lab(a),c=Math.sqrt(b[1]*b[1]+b[2]*b[2]);return c/Math.sqrt(c*c+b[0]*b[0])},a.prototype.getPalette=function(a,b,c,d,e,f,g,h,i,j,k,l,m){void 0===f&&(f=8),void 0===g&&(g=.05),void 0===h&&(h=.1),void 0===i&&(i=40),void 0===j&&(j=20),void 0===k&&(k=20),void 0===l&&(l=[0,0,0]),void 0===m&&(m=[255,255,255]);var n,o,p,q,r,s,t,u,v,w,x=this.getBGColor(a,f,d,e,50);for(p=a.getContext("2d").getImageData(b,c,d,e).data,q=[],s=t=c,v=c+e;v>t;s=t+=1)for(o=s*d*4,r=u=b,w=b+d;w>u;r=u+=1)n=o+4*r,p[n+3]>240&&q.push([p[n],p[n+1],p[n+2],p[n+3]]);var y=MMCQ.quantize(q,50);if(y){var z=y.vboxes.map(function(a){return{count:a.vbox.count(),rgb:a.color}});z.sort(function(a,b){return b.count-a.count});for(var A=0,B=0;B<z.length;B++)A+=z[B].count;for(var C=-1,D=-1,E=[],F=void 0,G=!1,H=0,I=.05,B=0;B<z.length;B++){4===z[B].rgb[0]&&4===z[B].rgb[1]&&4===z[B].rgb[2]&&(z[B].rgb=[0,0,0]),252===z[B].rgb[0]&&252===z[B].rgb[1]&&252===z[B].rgb[2]&&(z[B].rgb=[255,255,255]);var J=this.getColorfulness(z[B].rgb);if(0===B||-1===D){var K=Number.MAX_VALUE;if(void 0!==x&&void 0!==x.rgb&&0!==x.rgb[3]&&(K=this.colorDistLab(x.rgb,z[B].rgb)),!(K>i)){void 0===F&&(F=x,0!==F.rgb[3]&&(G=!0,C=z[B].count/A,D=Math.max(z[B].count*(1-C),.05*A)));continue}D=z[B].count,E.push(z[B])}else{var L=g;if(void 0!==F&&(L=h),.2>J&&(L*=2.5),J>.6&&(L*=.8),-1!==D&&z[B].count>D*L){for(var M=Number.MAX_VALUE,N=0;N<E.length;N++){var K=this.colorDistLab(z[B].rgb,E[N].rgb);M>K&&(M=K)}if(G){var K=this.colorDistLab(F.rgb,z[B].rgb);M>K&&(M=K)}if(M>j){var O=this.colorHomogeneity(a,d,e,z[B],k,1);if(O>=2){if(I>J){if(H>0)continue;H++}z[B].hm=O,E.push(z[B])}}}}}F&&G&&E.unshift(F),E.unshift(x);var P=!1,Q=!1,R=25,S=10;if(0===x.rgb[3])for(var B=0;B<E.length;B++)0!==E[B].rgb[3]&&(P=P||this.isBlackReplacement(E[B].rgb,R),Q=Q||this.isWhiteReplacement(E[B].rgb,S));var T=!1,U=!1;void 0!==x&&0!==x.rgb[3]&&(T=this.isBlackReplacement(x.rgb,R),T&&(l=x.rgb),U=this.isWhiteReplacement(x.rgb,S),U&&(m=x.rgb));var V=[];T&&V.unshift(l),U&&V.unshift(m);for(var W=[],X=0,Y=0,Z=!1,$=!1,B=1;B<E.length;B++)E[B].rgb.length!==x.rgb.length||E[B].rgb[0]!==x.rgb[0]||E[B].rgb[1]!==x.rgb[1]||E[B].rgb[2]!==x.rgb[2]||E[B].rgb[3]!==x.rgb[3]?Z||!this.isBlackReplacement(E[B].rgb,R)?$||!this.isWhiteReplacement(E[B].rgb,S)?W.push(E[B].rgb):(m=E[B].rgb,$=!0):(l=E[B].rgb,Z=!0):0===E[B].rgb[3]||T||U||V.push(E[B].rgb);if(T||V.unshift(l),U||V.unshift(m),W.length>0)for(var B=0;B<W.length;B++)this.isLight(W[B],l,m)?2>X&&(X++,V.push(W[B])):2>Y&&(Y++,V.push(W[B]));if(0===x.rgb[3])P&&Q&&2===V.length?x.rgb=[128,128,128,1]:P?(x.rgb=m,x.rgb[3]=1):Q?(x.rgb=l,x.rgb[3]=1):(x.rgb=m,x.rgb[3]=1);else{var _=this.shouldColorizeBG(a,f,d,e,x.rgb,k,.6);_?x.rgb[3]=1:x.rgb[3]=0}if(this.isBlackReplacement(V[1],R)){var aa=V[1];V[1]=V[0],V[0]=aa}return 2===V.length&&(V.push(V[0]),V.push(V[1])),V.unshift(x.rgb),V}return[m.concat([1]),l,m,l,m]},a.prototype.getROIBG=function(a,b,c,d,e){var f,g,h,i,j;h=a.getContext("2d").getImageData(0,0,b,c).data;var k=-1,l=-1,m=-1,n=-1;for(j=0;c>j;j++)for(g=j*b*4,i=0;b>i;i++){f=g+4*i;var o=[h[f],h[f+1],h[f+2]],p=this.colorDistLab(d,o);p>e&&((-1===k||k>i)&&(k=i),(-1===m||m>j)&&(m=j),-1!==k&&i>Math.max(l,k)&&(l=i),-1!==m&&j>Math.max(n,m)&&(n=j))}return[k,m,l-k+1,n-m+1]},a.prototype.getROITrans=function(a,b,c){var d,e,f,g,h;f=a.getContext("2d").getImageData(0,0,b,c).data;var i=-1,j=-1,k=-1,l=-1;for(h=0;c>h;h++)for(e=h*b*4,g=0;b>g;g++)d=e+4*g,0!==f[d+3]&&((-1===i||i>g)&&(i=g),(-1===k||k>h)&&(k=h),-1!==i&&g>Math.max(j,i)&&(j=g),-1!==k&&h>Math.max(l,k)&&(l=h));return[i,k,j-i+1,l-k+1]},a.prototype.histogram=function(a,b,c){for(var d=new Array(256).fill(0),e=a.getContext("2d").getImageData(0,0,b,c).data,f=0;c>f;f++)for(var g=f*b*4,h=0;b>h;h++){var i=g+4*h,j=Math.min(Math.max(Math.round(Math.sqrt(e[i]*e[i]+e[i+1]*e[i+1]+e[i+2]*e[i+2])),0),255);d[j]++}return d},a.prototype.median=function(a){a.sort(function(a,b){return a-b});var b=Math.floor(a.length/2);return a.length%2?a[b]:(a[b-1]+a[b])/2},a.prototype.isLogo=function(a,b,c){for(var d=this.histogram(a,b,c),e=this.median(d),f=0,g=0;256>g;g++)d[g]>Math.max(10*e,b*c*.001)&&f++;return f>1},a.prototype.getBGColor=function(a,b,c,d,e){void 0===e&&(e=6);var f,g,h,i,j,k,l=0;for(h=a.getContext("2d").getImageData(0,0,c,d).data,i=[],k=0;d>k;k++)for(g=k*c*4,j=0;b>j;j++)f=g+4*j,h[f+3]<240?l++:i.push([h[f],h[f+1],h[f+2],h[f+3]]);for(k=0;d>k;k++)for(g=k*c*4,j=c-b-1;c>j;j++)f=g+4*j,h[f+3]<240?l++:i.push([h[f],h[f+1],h[f+2],h[f+3]]);for(k=0;b>k;k++)for(g=k*c*4,j=b;c-b>j;j++)f=g+4*j,h[f+3]<240?l++:i.push([h[f],h[f+1],h[f+2],h[f+3]]);for(k=d-b-1;d>k;k++)for(g=k*c*4,j=b;c-b>j;j++)f=g+4*j,h[f+3]<240?l++:i.push([h[f],h[f+1],h[f+2],h[f+3]]);if(i.length<l)return{rgb:[4,4,4,0],count:l};var m=MMCQ.quantize(i,e),n=m.vboxes.map(function(a){return{count:a.vbox.count(),rgb:a.color}});n.sort(function(a,b){return b.count-a.count});var o=n[0];return l>.8*n[0].count?o.rgb.push(0):(4===o.rgb[0]&&4===o.rgb[1]&&4===o.rgb[2]&&(o.rgb=[0,0,0]),252===o.rgb[0]&&252===o.rgb[1]&&252===o.rgb[2]&&(o.rgb=[255,255,255]),o.rgb.push(1)),o},a.prototype.shouldColorizeBG=function(a,b,c,d,e,f,g){var h,i,j,k,l,m=0,n=0,o=0,p=0;for(j=a.getContext("2d").getImageData(0,0,c,d).data,l=0;d>l;l++)for(i=l*c*4,k=0;b>k;k++){h=i+4*k;var q=[j[h],j[h+1],j[h+2]],r=this.colorDistLab(q,e);f>r&&m++}for(l=0;d>l;l++)for(i=l*c*4,k=c-b;c>k;k++){h=i+4*k;var q=[j[h],j[h+1],j[h+2]],r=this.colorDistLab(q,e);f>r&&n++}for(l=0;b>l;l++)for(i=l*c*4,k=b;c-b>k;k++){h=i+4*k;var q=[j[h],j[h+1],j[h+2]],r=this.colorDistLab(q,e);f>r&&o++}for(l=d-b;d>l;l++)for(i=l*c*4,k=b;c-b>k;k++){h=i+4*k;var q=[j[h],j[h+1],j[h+2]],r=this.colorDistLab(q,e);f>r&&p++}return m/(b*d)>g&&n/(b*d)>g&&o/(b*(c-2*b))>g&&p/(b*(c-2*b))>g},a.prototype.colorDist=function(a,b){var c;return c=function(a){return a*a},c(a[0]-b[0])+c(a[1]-b[1])+c(a[2]-b[2])},a.prototype.colorHomogeneity=function(a,b,c,d,e,f){var g,h,i,j,k,l,m,n;i=a.getContext("2d").getImageData(0,0,b,c).data,j=[];var o=0,p=0;for(l=0;c>l;l++){var q=l*b*4;for(k=0;b>k;k++){g=q+4*k;var r=[i[g],i[g+1],i[g+2]],s=this.colorDistLab(r,d.rgb);if(e>s)for(o++,n=Math.max(l-f,0);n<Math.min(l+f,c);n++){var t=n*b*4;for(m=Math.max(k-f,0);m<Math.min(k+f,b);m++){h=t+4*m;var u=[i[h],i[h+1],i[h+2]],v=this.colorDistLab(u,d.rgb);e>v&&p++}}}}return 0!==o?p/o:-1},a.prototype.isBlackReplacement=function(a,b){void 0===b&&(b=20);var c=this.colorDistLabCIE94(a,[0,0,0]);return b>c},a.prototype.isWhiteReplacement=function(a,b){void 0===b&&(b=10);var c=this.colorDistLab(a,[255,255,255]);return b>c},a.prototype.contrast=function(a,b){var c=this.rgb2lab(a),d=this.rgb2lab(b),e=(c[0]+.05)/(d[0]+.05);return c[0]>d[0]?e:1/e},a.prototype.isLight=function(a,b,c){var d=chroma.rgb.apply(chroma,a),e=chroma.contrast(d,chroma.rgb.apply(chroma,c)),f=chroma.contrast(d,chroma.rgb.apply(chroma,b));return e>f?!1:!0},a.prototype.colorDistLab=function(a,b){var c=this.rgb2lab(a),d=this.rgb2lab(b);return Math.sqrt(Math.pow(c[0]-d[0],2)+Math.pow(c[1]-d[1],2)+Math.pow(c[2]-d[2],2))},a.prototype.colorDistLabCIE94=function(a,b){var c=this.rgb2lab(a),d=this.rgb2lab(b);return this.deltaE(c,d)},a.prototype.colorDistEuclidean=function(a,b){return Math.sqrt(Math.pow(a[0]-b[0],2)+Math.pow(a[1]-b[1],2)+Math.pow(a[2]-b[2],2))},a.prototype.rgbToCssString=function(a){return"rgb("+a[0]+", "+a[1]+", "+a[2]+")"},a.prototype.rgbaToCssString=function(a){return"rgba("+a[0]+", "+a[1]+", "+a[2]+", "+a[3]+")"},a.prototype.rgb2hex=function(a){return a&&a.length>=3?"#"+("0"+parseInt(a[0],10).toString(16)).slice(-2)+("0"+parseInt(a[1],10).toString(16)).slice(-2)+("0"+parseInt(a[2],10).toString(16)).slice(-2):""},a.prototype.computePalette=function(a,b,c){var d=Math.max(2,Math.round(a.width/50)),e=.03,f=.03,g=30,h=20,i=20;return this.getPalette(a,0,0,a.width,a.height,d,e,f,g,h,i,b,c)},a}(),core;!function(a){var b=function(){function a(a,b){this.themeChooser=a,this.designKitParameters=b}return a.$inject=["themeChooser","designKitParameters"],a.prototype.getRGBColor=function(a){return"#"===a[0]?a:("L"===a[0]||"D"===a[0]?a="color_"+this.designKitParameters[a]:(a=_.trim(a,["{","}"]),"c"!==a[0]&&(a="color_"+a)),this.themeChooser.getColorFromActiveColorTheme(a))},a}();a.PreviewColors=b,angular.module("siteGeneratorStaticsCoreAppInternal").service("previewColors",b)}(core||(core={}));var core;!function(a){function b(a,b,e,f,g,h,i,j,k,l,m,n,o,p){var q=n.getArgValue(m.argIndex),r=n.getLayoutValue(m,q);if(n.isMediaType(m))return a(m,r,n,o,p);if("form"===m.type)return b(p);if("menu"===m.type)return e(n,p);if("shoppingCart"===m.type||"social"===m.type)return f(p);var s=function(a,b,d,e){if(a.css({width:"auto",height:"auto"}),"decorative"===m.containerRole&&h.designKit){var f=k.getBoxColoredStyleDefinition(b.key.style,n,d);if(c(f.style.properties)){var g=_.get(f,["style","properties","brd"]);g&&(g=l.getRGBColor(g),e[0].style.setProperty("border-color",g,"important"))}else{var i=_.get(f,["style","properties","bg"]);i&&(i=l.getRGBColor(i),e[0].style.setProperty("background-color",i,"important"))}}},t=function(a,b,e){var f=m.margin||0;if(a.css({width:"auto",height:"auto",marginLeft:f+"px",marginRight:f+"px"}),b.css({width:"auto",height:"auto",display:"flex"}),h.designKit){var g=k.getButtonColoredStyleDefinition(e.key.style,n),i=_.get(g,["style","properties","bg"]),j=_.get(g,["style","properties","txt"]),o=_.get(g,["style","properties","brd"]);!d(g.style.properties)&&o&&(o=l.getRGBColor(o),b[0].style.setProperty("border-color",o,"important")),!c(g.style.properties)&&i&&(i=l.getRGBColor(i),b[0].style.setProperty("background-color",i,"important")),j&&(j=l.getRGBColor(j),a.css("color",j),a.css("-webkit-text-fill-color",j))}a.html(_.htmlEncode(r))},u=function(a,b){var c=n.getAlignment(m,"align"),d=n.getFormatting(m),e=d&&d.getBGColor();e&&(e=l.getRGBColor(e),b[0].style.setProperty("background-color",e,"important"));var f=l.getRGBColor(d&&d.getColor()||15);a.css("color",f),a.css("-webkit-text-fill-color",f),a.css({width:"auto",maxWidth:"none",textAlign:c}),a.addClass("text-align-"+c),b.html(g.isRichText(r)?g.unMarkRichText(r):g.transformForEditor(r,d))},v=function(a,b,c){if(a.css({top:0,left:0,width:"100%",display:"block"}),h.designKit){var d=k.getLineColoredStyleDefinition(b.key.style,n,c,m),e=_.get(d,["style","properties","brd"]);e&&(e=l.getRGBColor(e),a[0].style.setProperty("border-color",e,"important"))}};return i.getOrBuildValidator(m,n).then(function(a){if(a.div){var b=angular.element(a.div).clone(),c=i.innerChild(b[0]),d=angular.element(c).empty(),e=(m.subType||m.type)+j.getDecorationUniqueID(m);switch(m.type){case"container":s(b,a,e,d);break;case"button":t(d,b,a);break;case"text":u(b,d);break;case"line":v(b,a,e)}return b}})}b.$inject=["getMediaLayoutPreview","getContactFormPreview","getMenuPreview","getIconLayoutPreview","richTextService","flags","visualValidation","componentStyles","designKit","previewColors","layout","le","$rootEl","boundary"];var c=function(a,b){return void 0===b&&(b="alpha-bg"),!a[b]||"0"===a[b]},d=function(a){return!a.brd||"0"===a.brd};angular.module("siteGeneratorStaticsCoreAppInternal").factory("getLayoutPreview",["$injector",function(a){return function(c,d,e,f){return a.invoke(b,null,{layout:c,le:d,$rootEl:e,boundary:f})}}])}(core||(core={}));var core;!function(a){function b(a,b){var c=angular.element('<div style="display: flex; flex-direction: column;">  <div class="form-layout-preveiw-input">Name</div>  <div class="form-layout-preveiw-input">Email</div>  <div class="form-layout-preveiw-input">Subject</div>  <div class="form-layout-preveiw-input" style="flex: 1;">Message</div>  <div style="display: flex; flex-direction: row;"><div style="flex: 1;"></div><div class="form-layout-preveiw-button">Send</div></div></div>').css({height:b.height,width:b.width});return a.when(c)}b.$inject=["$p","boundary"],angular.module("siteGeneratorStaticsCoreAppInternal").factory("getContactFormPreview",["$injector",function(a){return function(c){return a.invoke(b,null,{boundary:c})}}])}(core||(core={}));var core;!function(a){function b(a,b){var c=angular.element("<div></div>").css({height:b.height,width:b.width});return a.when(c)}b.$inject=["$p","boundary"],angular.module("siteGeneratorStaticsCoreAppInternal").factory("getIconLayoutPreview",["$injector",function(a){return function(c){return a.invoke(b,null,{boundary:c})}}])}(core||(core={}));var core;!function(a){function b(b,c,d,e,f,g,h,i,j,k,l){var m=j.overrides&&j.overrides.media&&j.overrides.media[h.argIndex],n=k.width();if(m&&m.name&&"Accordion"===m.name){i=_.filter(i,{mediaType:"image"});var o=angular.element('<div class="accordion-media-layout-preview" style="display: flex; flex-direction: row;"></div>').css({height:l.height,width:l.width});return _.each(_.range(6),function(a){var b=i[a];b&&angular.element("<div></div>").css({flex:1===a?"2 0 0":"1 0 0",backgroundPosition:"center",backgroundSize:"cover",backgroundRepeat:"no-repeat",backgroundClip:"content-box",backgroundImage:"url("+f.itemToThumbnailUrl(b,l.width,l.height)+")"}).appendTo(o)}),b.when(o)}if(m&&m.name&&"Masonry"===m.name){i=_.filter(i,{mediaType:"image"});var p=angular.element('<div class="masonry-media-layout-preview" style="display: flex; flex-direction: row;">  <div style="flex: 1; display: flex; flex-direction: column">    <div class="img" style="flex: 1;"></div>    <div class="img" style="flex: 1;"></div>  </div>  <div style="flex: 1; display: flex; flex-direction: column">    <div class="img" style="flex: 1;"></div>    <div class="img" style="flex: 2;"></div>    <div class="img" style="flex: 1;"></div>  </div></div>').css({height:l.height,width:l.width});return _.each(p.find(".img"),function(a,b){var c=angular.element(a),d=i[b]||i[b-i.length]||i[b-2*i.length];c.css({backgroundPosition:"center",backgroundSize:"cover",backgroundRepeat:"no-repeat",backgroundClip:"content-box",padding:"5px",backgroundImage:"url("+f.itemToThumbnailUrl(d,l.width,l.height)+")"})}),b.when(p)}if(m&&m.name&&"Slideshow"===m.name){var q=i[0],r=angular.element('<div class="impress-media-layout-preview" style="display:flex; flex-direction: row; align-items: center;">  <svg version="1.1" id="Layer_1" xmlns="http://www.w3.org/2000/svg" xmlns:xlink="http://www.w3.org/1999/xlink" x="0px" y="0px" width="12.8px" height="25.5px" viewBox="29.5 13.9 12.8 25.5" style="enable-background:new 29.5 13.9 12.8 25.5;margin: 0 30px 0 20px;" xml:space="preserve"> <path d="M41,39.5l1.2-1.3L30.5,25.4l-1.2,1.3L41,39.5z"/> <path d="M42.2,15.2L41,13.9L29.4,26.7l1.2,1.3L42.2,15.2z"/> </svg>  <div class="img" style="flex: 1; height: 100%"></div>  <svg version="1.1" id="Layer_1" xmlns="http://www.w3.org/2000/svg" xmlns:xlink="http://www.w3.org/1999/xlink" x="0px" y="0px" width="12.8px" height="25.5px" viewBox="29.5 13.9 12.8 25.5" style="enable-background:new 29.5 13.9 12.8 25.5;margin: 0 20px 0 30px;"xml:space="preserve"> <path d="M30.5,39.5l-1.2-1.3L41,25.4l1.2,1.3L30.5,39.5z"/> <path d="M29.4,15.2l1.2-1.3l11.6,12.8L41,28L29.4,15.2z"/> </svg></div>').css({height:l.height,width:l.width});return r.find(".img").css({backgroundPosition:"center",backgroundSize:"cover",backgroundRepeat:"no-repeat",backgroundClip:"content-box",backgroundImage:"url("+f.itemToThumbnailUrl(q,l.width,l.height)+")"}),b.when(r)}if(m&&m.name&&"Impress"===m.name){var q=i[0],s=angular.element('<div class="impress-media-layout-preview" style="display:flex; flex-direction: row; align-items: center;">  <svg version="1.1" id="Layer_1" xmlns="http://www.w3.org/2000/svg" xmlns:xlink="http://www.w3.org/1999/xlink" x="0px" y="0px" width="12.8px" height="25.5px" viewBox="29.5 13.9 12.8 25.5" style="enable-background:new 29.5 13.9 12.8 25.5;margin: 0 30px 0 20px;" xml:space="preserve"> <path d="M41,39.5l1.2-1.3L30.5,25.4l-1.2,1.3L41,39.5z"/> <path d="M42.2,15.2L41,13.9L29.4,26.7l1.2,1.3L42.2,15.2z"/> </svg>  <div style="width: 40%; display: flex; flex-direction: column; justify-content: center;">    <div class="title" style="white-space: nowrap; overflow: hidden; text-overflow: ellipsis; text-align: left; line-height: 27px; font-size: 24px;font-family: proxima-nova, sans-serif; font-weight: 300; padding: 0 10px;"></div>    <div class="desc" style="white-space: nowrap; overflow: hidden; text-overflow: ellipsis; text-align: left; line-height: 27px; font-size: 14px;font-family: proxima-nova, sans-serif; font-weight: 300; padding: 0 10px;"></div>  </div>  <div class="img" style="flex: 1; height: 280px"></div>  <svg version="1.1" id="Layer_1" xmlns="http://www.w3.org/2000/svg" xmlns:xlink="http://www.w3.org/1999/xlink" x="0px" y="0px" width="12.8px" height="25.5px" viewBox="29.5 13.9 12.8 25.5" style="enable-background:new 29.5 13.9 12.8 25.5;margin: 0 20px 0 30px;"xml:space="preserve"> <path d="M30.5,39.5l-1.2-1.3L41,25.4l1.2,1.3L30.5,39.5z"/> <path d="M29.4,15.2l1.2-1.3l11.6,12.8L41,28L29.4,15.2z"/> </svg></div>').css({backgroundColor:d.getRGBColor(18),height:l.height,width:l.width});return s.find(".title").text(q.Title).css({color:d.getRGBColor(16)}),s.find(".desc").text(q.Description).css({color:d.getRGBColor(1)}),s.find(".img").css({backgroundPosition:"center",backgroundSize:"cover",backgroundRepeat:"no-repeat",backgroundClip:"content-box",padding:"10px",backgroundImage:"url("+f.itemToThumbnailUrl(q,l.width,l.height)+")"}),b.when(s)}if(m&&m.name&&"Thumbnails"===m.name){i=_.filter(i,{mediaType:"image"});var t=80,u=60,v=m.properties&&m.properties.thumbnailsGravity||"bottom",w=angular.element('<div class="thumbnails-media-layout-preview" style="display:flex;"></div>').css({flexDirection:"bottom"===v?"column":"right"===v?"row":"row-reverse",height:l.height,width:l.width});return angular.element('<div style="flex: 1;"></div>').css({backgroundImage:"url("+f.itemToThumbnailUrl(i[0],l.width,l.height)+")"}).appendTo(w),angular.element('<div style="display:flex; justify-content: center"><div class="img"></div><div class="img"></div><div class="img"></div></div>').css({flexDirection:"bottom"===v?"row":"column"}).appendTo(w),_.each(w.find(".img"),function(a,b){var c=angular.element(a),d=i[b]||i[i.length-1];c.css({backgroundPosition:"center",backgroundSize:"cover",backgroundRepeat:"no-repeat",backgroundClip:"content-box",padding:"5px",width:t,height:u,backgroundImage:"url("+f.itemToThumbnailUrl(d,t,u)+")"})}),b.when(w)}if(m&&m.name&&m.name.indexOf("Collage")>=0){i=_.filter(i,{mediaType:"image"});var x="Fullwidth Collage"===m.name,y=angular.element('<div class="collage-media-layout-preview" style="display:flex; flex-direction: column;"></div>').css({height:l.height});return x?y.addClass("strip-media-layout-preview"):y.width(l.width),y.append(angular.element('<div style="flex: 3; display:flex; flex-direction: row;"><div class="img" style="flex: 3;"></div><div style="flex: 1; display:flex; flex-direction: column;"><div class="img" style="flex: 1;"></div><div class="img" style="flex: 2;"></div></div></div>')),i.length>3&&y.append(angular.element('<div style="flex: 2; display:flex; flex-direction: row;"><div class="img" style="flex: 1;"></div><div class="img" style="flex: 1;"></div></div>')),_.each(y.find(".img"),function(a,b){var c=angular.element(a);i[b]&&c.css({backgroundPosition:"center",backgroundSize:"cover",backgroundRepeat:"no-repeat",backgroundClip:"content-box",padding:x?0:10,backgroundImage:"url("+f.itemToThumbnailUrl(i[b],l.width,l.height)+")"})}),b.when(y)}if(m&&m.name&&("Slider"===m.name||"Strip Showcase"===m.name)){i=_.filter(i,{mediaType:"image"});var z="Strip Showcase"===m.name,A=angular.element('<div class="slider-media-layout-preview" style="display:flex; flex-direction: row;"></div>').css({height:h.height});return z?A.addClass("strip-media-layout-preview"):A.width(l.width),A.append(angular.element('<div class="img" style="flex: 1;"></div><div class="img" style="flex: 2;"></div><div class="img" style="flex: 1;"></div>')),_.each(A.find(".img"),function(a,b){var c=angular.element(a),d=i[b-1]||i[i.length-1];c.css({backgroundPosition:"center",backgroundSize:"cover",backgroundRepeat:"no-repeat",backgroundClip:"content-box",padding:"0 5px",opacity:z&&1!==b?.6:1,backgroundImage:"url("+f.itemToThumbnailUrl(d,l.width,l.height)+")"})}),b.when(A)}if(m&&m.name&&"Strip Video"===m.name){var B=_.find(i,{mediaType:"video"}),C=angular.element('<div class="strip-media-layout-preview"></div>').css({height:h.height}).append(g(B,n,h.height));return b.when(C)}if(e.isStripType(j)){var D=i[0],E=void 0;m.properties.alignType&&(E={alignment:m.properties.alignType});var F=f.itemToThumbnailUrl(D,n,h.height,E),G=angular.element('<div class="strip-media-layout-preview"></div>').css({height:h.height,backgroundImage:"url("+F+")"});if("Strip Slideshow"===m.name){var H=angular.element('<div class="strip-slideshow-navbar"></div>');_.each(_.range(5),function(){H.append(angular.element('<div class="strip-slideshow-navbar-item"></div>'))}),G.append(H)}return j.textDirectlyOnMedia(h)&&G.addClass("dark-overlay"),b.when(G)}if(m&&m.name&&m.name.indexOf("Grid")>=0){var I="Animated Grid"===m.name?"PaginatedGridGallery":"MatrixGallery",J=j.isMobile()&&a.MobileComponentOrganizer.createProperties("gallery",I)||m.properties||{},K=J.numCols||3,L=J.maxRows||2,M=J.margin||0,N=Math.floor(l.width/K-(K>1?M:0)),O=Math.floor(l.height/L-(L>1?M:0)),P="Grid (with margins and text below)"===m.name,Q="grid-media-layout-preview",R={height:l.height};"coast2coast"===J.stretch?Q+=" strip-media-layout-preview":R.width=l.width;var S=angular.element('<div class="'+Q+'" style="display:flex; flex-wrap:wrap;flex-direction: row; justify-content: space-between;"></div>').css(R);return _.each(_.range(K*L),function(a){var b=angular.element('<div style="flex:0 0 auto; width:'+N+"px; height:"+O+'px;"></div>').appendTo(S);i[a]&&"image"===i[a].mediaType&&(b.css({position:"relative",backgroundPosition:"center",backgroundRepeat:"no-repeat",backgroundImage:"url("+f.itemToThumbnailUrl(i[a],N,O)+")"}),P&&angular.element('<div class="title" style="position: absolute; bottom: 0; left: 0; right: 0; color: #000000; background: #ffffff; white-space: nowrap; overflow: hidden; text-overflow: ellipsis; text-align: left; line-height: 27px; font-size: 24px;font-family: proxima-nova, sans-serif; font-weight: 300; padding: 10px; height: 47px;"></div>').text(i[a].Title||" ").appendTo(b))}),b.when(S)}if(m&&m.name&&m.name.indexOf("Freestyle")>=0){var T=angular.element('<div class="freestyle-media-layout-preview" style="position: relative;overflow: hidden;"></div>').css({height:l.height,width:l.width}),U=250,V=350,W=[{top:"30%",left:"5%",transform:"rotate(370deg)",transformOrigin:"bottom right"},{top:"22%",left:"46%",transform:"rotate(347deg)",transformOrigin:"bottom right"},{top:"44%",left:"24%",transform:"rotate(364deg)",transformOrigin:"top right"},{top:"20%",left:"13%",transform:"rotate(345deg)"},{top:"5%",left:"30%",transform:"rotate(354deg)",transformOrigin:"bottom right"}];return _.each(W,function(a,b){i[b]&&"image"===i[b].mediaType&&angular.element('<div style="border:2px solid #ffffff;box-shadow: -2px 3px 10px 0 rgba(0,0,0,0.2) ;position: absolute; width:'+U+"px; height:"+V+'px;"></div>').css(a).css({backgroundSize:"cover",backgroundPosition:"center",backgroundImage:"url("+f.itemToThumbnailUrl(i[b],U,V)+")"}).appendTo(T)}),b.when(T)}var X=angular.element('<div class="media-layout-preview" style="position: relative;"></div>').css({backgroundPosition:"center",backgroundSize:"cover",backgroundRepeat:"no-repeat",height:l.height,width:l.width});if("map"!==h.type){var Y=void 0;if(m&&"video"===m.name)Y=_.find(i,function(a){return"extVideo"===a.mediaType}),X.append(angular.element('<div class="circle" style="width:100px;height:100px;border: 5px solid #ffffff;border-radius:50%;top: 50%;left: 50%;transform: translate(-50%, -50%);position: absolute;background-color: rgba(0,0,0,.5);"></div><div class="triangle" style="width:0%;height:0%;border-top: 20px solid transparent;border-left: 30px solid #ffffff;border-bottom: 20px solid transparent;top: 50%;left:50%;transform: translate(-35%, -50%);position: absolute;"></div>'));else{Y=i[0];var Z=_.get(j.overrides,["style","media"])||h.style;Z&&X.addClass("media-layout-preview-"+Z)}var $={fit:"full"===_.get(m,["properties","displayMode"])},aa=j&&j.getLayoutBySubType("image");$.crop=j.containingSegment&&j.containingSegment.node&&j.containingSegment.node.getCropOfImage(aa.argIndex,Y.relativeUri,aa);var ba=f.itemToThumbnailUrl(Y,l.width,l.height,$);ba.then?ba.then(function(a){X.css({backgroundImage:"url("+a+")"})}):X.css({backgroundImage:"url("+ba+")"}),X.css({backgroundSize:$.fit?"contain":"cover"})}return b.when(X)}b.$inject=["$p","flags","previewColors","mediaOverride","mediaGallery","getVideoBgPreview","layout","value","le","$rootEl","boundary"],angular.module("siteGeneratorStaticsCoreAppInternal").factory("getMediaLayoutPreview",["$injector",function(a){return function(c,d,e,f,g){return a.invoke(b,null,{layout:c,value:d,le:e,$rootEl:f,boundary:g})}}])}(core||(core={}));var core;!function(a){function b(a,b,c,d,e,f,g){var h,i=f.getLayoutSelectionStore(),j=i?i.menuOverridesManager.stretchButtons():!0,k=i?i.menuOverridesManager.alignment():"center";if(c.designKit){var l=i.getOverride("style",f.containingSegment,"menu")||d.styles.menu[0],m=b.getMenuColoredStyleDefinition(l,f);h=_.get(m,["style","properties","txt"]),h&&(h=e.getRGBColor(h))}var n;return g.height===g.width?(n=angular.element('<div class="tiny-menu-layout-preview">  <div class="tiny-menu-stroke"></div>  <div class="tiny-menu-stroke"></div>  <div class="tiny-menu-stroke"></div></div>').css({height:g.height,width:g.width}),h&&n.find(".tiny-menu-stroke").css({"background-color":h})):(n=angular.element('<div style="display: flex; flex-direction: row;">  <div class="menu-layout-preview">Home</div>  <div class="menu-layout-preview">About</div>  <div class="menu-layout-preview">Services</div>  <div class="menu-layout-preview">Contact</div></div>').css({height:g.height,width:g.width,justifyContent:"left"===k?"flex-start":"right"===k?"flex-end":"center"}),n.find(".menu-layout-preview").css({padding:"4px 15px",fontSize:"14px",textAlign:k,flex:j?"1 0 0":"0 0 auto"}),h&&n.css("color",h)),a.when(n)}b.$inject=["$p","designKit","flags","componentStyles","previewColors","le","boundary"],angular.module("siteGeneratorStaticsCoreAppInternal").factory("getMenuPreview",["$injector",function(a){return function(c,d){return a.invoke(b,null,{le:c,boundary:d})}}])}(core||(core={}));var core;!function(a){function b(a,b,c,d){return angular.element('<video loop class="media-bg video-bg"></video>').css({width:c,height:d,"-ms-transform":"scale("+a.getScaleToFill(b,c,d)+")","-ms-transform-origin":"center center"}).append(angular.element('<source type="video/mp4"></<source/>').attr("src",a.getVideoUrl(b)))}b.$inject=["mediaGallery","mediaItem","width","height"],angular.module("siteGeneratorStaticsCoreAppInternal").factory("getVideoBgPreview",["$injector",function(a){return function(c,d,e){return a.invoke(b,null,{mediaItem:c,width:d,height:e})}}])}(core||(core={})),angular.module("siteGeneratorStaticsCoreAppInternal").factory("animationGenerator",["animationTypes","flags",function(a,b){function c(a){return"structure"===a.containerRole}function d(a){return _(l).contains(a)}function e(a){var b=f(a);return"header"===b||"footer"===b}function f(a){return"footer"===a.page?"footer":a.sitePart}function g(a,b){return a.baseDuration+a.verticalStep*b}function h(a,b,c){var d=b.indexOf(c.absoluteTop);return g(a,d)}function i(a,b,c){var d=_(b).pluck("absoluteTop");return _(a.getLENoError().layoutArray).filter(function(b){return _(d).contains(b.absoluteTop)?!0:!!k(c,a,b)}).pluck("absoluteTop").uniq().sortBy()}function j(a,b,c,e,f,g){function h(a){void 0!==a.animation&&(k=a.animation),a.direction&&(l=a.direction),a.angle&&(m=a.angle),a.distance&&(n=a.distance)}function i(a){("text"===b||"button"===b)&&e&&_(p).contains(e)&&a[e]&&h(a[e])}function j(a){g&&a[g]&&h(a[g])}void 0===f&&(f=!1);var k,l,m,n;if(d(b)&&(a[b]&&(h(a[b]),i(a[b]),j(a[b]),c&&a[b][c]&&(h(a[b][c]),i(a[b][c]),j(a[b][c])),"container"===b&&f&&a[b].onMedia&&h(a[b].onMedia)),void 0===k&&(k=a.animation),null!==k))return void 0===k?void console.error("Bad pattern, could not find animation for "+b+" in pattern: "+a.label):(k=ob.deepClone(k),k.params.direction=k.hasAngle?void 0:l||a.direction||k.params.direction,k.params.angle=k.hasAngle?m||a.angle||k.params.angle:void 0,k.params.distance=k.hasDistance?n||a.distance||k.params.distance:void 0,k)}function k(a,b,d){var e=b.getLENoError();if(!c(d)){var f,g=d.type,h=d.subType;("text"===g||"button"===g)&&(f=e.getAlignment(d,"text"===g?"align":"hPosition"));var i,k=e.isOnMediaContainer(d);return e.columns&&e.columns[0].isVirtual&&e.columns.length>1&&void 0!==d.columnIndex&&(i=0===d.columnIndex?q:r),j(a,g,h,f,k,i)}}var l=["button","media","container","text","social"],m="left",n="center",o="right",p=[m,n,o],q="leftColumn",r="rightColumn";return{layoutsAnimations:function(a,b,c){if(!(b.node&&(b.node.isListHeader()||b.node.isListFooter())||e(b))){var d=_.map(c,function(c){return k(a,b,c)}),f=_(c).filter(function(a,b){return d[b]}),g=i(b,f,a);return _.each(d,function(b,d){b&&(b.duration=h(a.timing,g,c[d]))}),d}}}}]);var AnimationKit=function(){function a(a,b,c,d,e,f,g,h,i,j,k){this.animationPatterns=a,this.animationGenerator=b,this.animationDefaultPattern=c,this.animationNoPatternIdentifier=d,this.animationInheritPatternIdentifier=e,
this.layoutSelectionStoreProvider=f,this.flags=g,this.modelTree=h,this.sitePartTypes=i,this.selections=j,this.sectionDesignOverrideService=k}return a.$inject=["animationPatterns","animationGenerator","animationDefaultPattern","animationNoPatternIdentifier","animationInheritPatternIdentifier","layoutSelectionStoreProvider","flags","modelTree","sitePartTypes","selections","sectionDesignOverrideService"],a.prototype.getAnimationsForLayouts=function(a,b,c){var d=b.containingSegment,e=c?this.animationPatterns[c]:this.getActivePatternForSegment(d);return e?this.animationGenerator.layoutsAnimations(e,d,a):[]},a.prototype.setPatternForSite=function(a){var b=this.layoutSelectionStoreProvider.getLayoutSelectionStore();b.setAnimationsForSite(a)},a.prototype.getPatternForSite=function(a){a=a||this.layoutSelectionStoreProvider.getLayoutSelectionStore();var b=a.getAnimationsForSite();return b},a.prototype.setPatternForSection=function(a,b,c){var d=this.getPatternForSite();d===c&&b!==this.sitePartTypes.HEADER&&(c=this.animationInheritPatternIdentifier),this.selections.getForSectionNode(a).animationPattern=c},a.prototype.getPatternForSection=function(a,b){var c=this.selections.getForSectionNode(a).animationPattern;return c||b!==this.sitePartTypes.HEADER||(c=this.animationNoPatternIdentifier),c},a.prototype.getActivePatternForSite=function(){return this.getPatternForSite()||this.animationNoPatternIdentifier},a.prototype.getActivePatternForSection=function(a,b){var c=this.getPatternForSection(a,b);return c&&c!==this.animationInheritPatternIdentifier||(c=this.getActivePatternForSite()),c},a.prototype.getPatternsOptions=function(){var a=_.map(this.animationPatterns,function(a,b){return{id:b,label:a.label,"class":a["class"]||"",iconClass:a.iconClass}});return a},a.formatAnimationForDS=function(a){return{name:a.name,targetId:"",playOnce:!1,action:a.action,delay:a.delay,duration:a.duration,params:a.params||{}}},a.prototype.getDefaultSiteAnimation=function(){return this.animationDefaultPattern},a.prototype.getAnimationsForRenderedComponents=function(a,b,c){var d=[],e=_.pluck(a,"layout"),f=b.getLENoError(),g=this.getAnimationsForLayouts(e,f,c);return _.each(g,function(b,c){b&&d.push({compRef:a[c].compRef,animation:b})}),d},a.prototype.getActivePatternForSegment=function(a){var b,c="footer"===a.page?this.sitePartTypes.FOOTER:a.sitePart,d=a.node;return d||c!==this.sitePartTypes.HEADER||(d=this.modelTree.getGeneralInformation()),b=this.getActivePatternForSection(d,c),this.animationPatterns[b]},a.prototype.getOverridableSections=function(){var a=this;return _.filter(this.sectionDesignOverrideService.getOverridableSections(),function(b){return b.sitePart!==a.sitePartTypes.HEADER})},a.prototype.getUniqueSectionPatterns=function(){var a=this,b=this.getOverridableSections(),c=_.map(b,function(b){return a.getPatternForSection(b.node,b.sitePart)});return _(c).unique().without(void 0,this.animationInheritPatternIdentifier).value()},a.prototype.doSiteAndSectionPatternsMatch=function(){var a=this.getActivePatternForSite(),b=this.getUniqueSectionPatterns();return 0===b.length||1===b.length&&b[0]===a},a.prototype.clearOverridableSections=function(){var a=this,b=this.getOverridableSections();_.each(b,function(b){a.setPatternForSection(b.node,b.sitePart,a.animationInheritPatternIdentifier)})},a}();angular.module("siteGeneratorStaticsCoreAppInternal").service("animationKit",AnimationKit);var AnimationKitPreview=function(){function a(a,b,c,d,e){this.flags=a,this.animationKit=b,this.documentServicesMediator=c,this.renderedModelApi=d,this.modelLookup=e,this.runningAnimations=[],this.shouldCollect=function(a,b){return function(c){var d=c.from.lgs&&c.from.lgs.indexOf(a)>=0,e=c.from.lg===a,f=c.from.segment===b,g=c.from.layout;return d||e||f||g}}}return a.$inject=["flags","animationKit","documentServicesMediator","renderedModelApi","modelLookup"],a.prototype.refreshAnimationsForLg=function(a){var b=this;_.each(a.segments,function(c){var d=b.getRenderedComponents(a,c);d.forEach(function(a){b.documentServicesMediator.removeAnimations(a.compRef,"screenIn")});var e=b.animationKit.getAnimationsForRenderedComponents(d,c);_.each(e,function(a){b.documentServicesMediator.setAnimation(a.compRef,AnimationKit.formatAnimationForDS(a.animation))})})},a.prototype.previewPatternForLg=function(a,b){var c=this;_.each(a.segments,function(d){var e=c.getRenderedComponents(a,d),f=c.animationKit.getAnimationsForRenderedComponents(e,d,b);_.each(f,function(a){c.previewAnimation(a.compRef,a.animation)})})},a.prototype.stopRunningAnimations=function(){var a=this;_.each(this.runningAnimations,function(b){a.documentServicesMediator.stopPreviewAnimation(b)}),this.runningAnimations=[]},a.prototype.getRenderedComponents=function(a,b){if(this.flags.renderedModel){var c=this.renderedModelApi.get(a.sitePart,a.page);if(!c)return[];var d=this.modelLookup.flatten(c,this.shouldCollect(a,b)).filter(function(a){return a.from.layout});return d.map(function(a){return{layout:a.from.layout,compRef:a.compRef}})}return b.getRenderedComponents()},a.prototype.previewAnimation=function(a,b){var c=this.documentServicesMediator.previewAnimation(a,AnimationKit.formatAnimationForDS(b));this.runningAnimations.push(c)},a}();angular.module("siteGeneratorStaticsCoreAppInternal").service("animationKitPreview",AnimationKitPreview);var BackgroundScrollService=function(){function a(a,b,c,d,e){this.layoutSelectionStoreProvider=a,this.documentServicesMediator=b,this.sectionDesignOverrideService=c,this.selections=d,this.flags=e,this.SCROLL_TYPE={NONE:"scroll",PARALLAX:"parallax",REVEAL:"fixed",PARALLAX_ZOOM:"parallax-zoom",FADE_IN:"fade-in"},this.scrollTypeOptions=[{label:"None",value:this.SCROLL_TYPE.NONE},{label:"Parallax",value:this.SCROLL_TYPE.PARALLAX},{label:"Reveal",value:this.SCROLL_TYPE.REVEAL},{label:"Zoom In",value:this.SCROLL_TYPE.PARALLAX_ZOOM},{label:"Fade In",value:this.SCROLL_TYPE.FADE_IN}],this.BEHAVIOR={PARALLAX:{action:"bgScrub",name:"BackgroundParallax",duration:1,delay:0},REVEAL:{action:"bgScrub",name:"BackgroundReveal",duration:1,delay:0},ZOOM:{action:"bgScrub",name:"BackgroundZoom",duration:1,delay:0},FADE_IN:{action:"bgScrub",name:"BackgroundFadeIn",duration:1,delay:0}},this.BEHAVIORS=(f={},f[this.SCROLL_TYPE.PARALLAX]=[this.BEHAVIOR.PARALLAX],f[this.SCROLL_TYPE.REVEAL]=[this.BEHAVIOR.REVEAL],f[this.SCROLL_TYPE.PARALLAX_ZOOM]=[this.BEHAVIOR.PARALLAX,this.BEHAVIOR.ZOOM],f[this.SCROLL_TYPE.FADE_IN]=[this.BEHAVIOR.FADE_IN],f);var f}return a.$inject=["layoutSelectionStoreProvider","documentServicesMediator","sectionDesignOverrideService","selections","flags"],a.prototype.getOptions=function(){return this.scrollTypeOptions},a.prototype.getBehaviors=function(a){return this.BEHAVIORS[a]},a.prototype.getLabel=function(a){return _.find(this.scrollTypeOptions,{value:a}).label},a.prototype.getSectionOverride=function(a){var b=this.selections.getForSectionNode(a);return b&&b.scrollType||void 0},a.prototype.setSectionOverride=function(a,b){this.selections.getForSectionNode(a).scrollType=b},a.prototype.getSiteOverride=function(){var a=this.layoutSelectionStoreProvider.getLayoutSelectionStore();return a.getScrollTypeForSite()},a.prototype.setSiteOverride=function(a){var b=this.layoutSelectionStoreProvider.getLayoutSelectionStore();return b.setScrollTypeForSite(a)},a.prototype.setDefaultScrollType=function(){this.setSiteOverride(this.getDefaultScrollType())},a.prototype.getDefaultScrollType=function(){return this.SCROLL_TYPE.PARALLAX},a.prototype.getActiveScrollTypeData=function(){return _.find(this.scrollTypeOptions,{value:this.getSiteOverride()||this.SCROLL_TYPE.NONE})},a.prototype.setSectionOverrideWithInheritance=function(a,b){var c=this.getSiteOverride();this.setSectionOverride(a,c===b?void 0:b)},a.prototype.getActiveScrollType=function(a){return this.getSectionOverride(a)||this.getSiteOverride()},a.prototype.getStripScrollType=function(a){var b,c=a.containingSegment.node,d=a.getStripImageArgIndex();if(void 0!==d||this.flags.sectionBackground){var e={};if(void 0!==d){var f=a.getLayoutWithArgIndex(+d);e=a.overrides.media[f.argIndex]}var g=this.getActiveScrollType(c);b=g||_.get(e,"properties.scrollType")}return b},a.prototype.reApplyScrollTypeForStripComponent=function(a){var b=this;_.each(["stripComponentRef","renderedDecorativeStripRef"],function(c){var d=a[c];if(d){b.documentServicesMediator.removeAnimations(d,"bgScrub");var e=a.segments[0].getLENoError(),f=b.getStripScrollType(e);if(f){var g=b.getBehaviors(f);_.each(g,function(a){b.documentServicesMediator.setAnimation(d,a)})}}})},a.prototype.getColumnsScrollType=function(a,b){var c=1===b.length?this.SCROLL_TYPE.PARALLAX:this.SCROLL_TYPE.NONE;return c},a.prototype.removeScrollTypeFromColumns=function(a){var b=this;_.each(a,function(a){a.ref&&b.documentServicesMediator.removeAnimations(a.ref,"bgScrub")})},a.prototype.reApplyScrollTypeForColumns=function(a){var b=this,c=a.renderedColumns;if(c&&c[0].allSettings){this.removeScrollTypeFromColumns(c);var d=this.getColumnsScrollType(a,c);if(d){var e=this.getBehaviors(d);_.each(c,function(a){a.ref&&_.each(e,function(c){b.documentServicesMediator.setAnimation(a.ref,c)})})}}},a.prototype.reApplyScrollTypeForLg=function(a){this.reApplyScrollTypeForStripComponent(a),this.reApplyScrollTypeForColumns(a)},a.prototype.getUniqueSectionTypes=function(){var a=this,b=this.sectionDesignOverrideService.getOverridableSections(),c=_.map(b,function(b){return a.flags.sectionBackground&&b.node.backgroundHasFaces?void 0:a.getSectionOverride(b.node)});return _(c).unique().without(void 0).value()},a.prototype.doSiteAndSectionMatch=function(){var a=this.getSiteOverride(),b=this.getUniqueSectionTypes();return 0===b.length||1===b.length&&b[0]===a},a.prototype.clearOverridableSections=function(){var a=this,b=this.sectionDesignOverrideService.getOverridableSections();_.each(b,function(b){a.flags.sectionBackground?b.node.backgroundHasFaces||a.setSectionOverride(b.node,void 0):a.setSectionOverride(b.node,void 0)})},a}();angular.module("siteGeneratorStaticsCoreAppInternal").service("backgroundScrollService",BackgroundScrollService);var FontCustomizationService=function(){function a(a,b,c){this.layoutSelectionStoreProvider=a,this.sectionDesignOverrideService=b,this.selections=c}return a.$inject=["layoutSelectionStoreProvider","sectionDesignOverrideService","selections"],a.prototype.normalizeExtraHeight=function(b){return void 0===b?void 0:Math.max(-1*a.maxDeltaHeight,Math.min(b,a.maxDeltaHeight))},a.prototype.getSectionOverride=function(a){var b=this.selections.getForSectionNode(a).fontAdditionalSize;return void 0===b||null===b?this.layoutSelectionStoreProvider.getLayoutSelectionStore().getSiteFontAdditionalSize():b},a.prototype.getFontSizeAllSite=function(){var a=this.layoutSelectionStoreProvider.getLayoutSelectionStore();return a.getSiteFontAdditionalSize()},a.prototype.getSectionIsOverriden=function(a){return this.selections.getForSectionNode(a).fontAdditionalSize},a.prototype.setFontSizeAllSite=function(a){var b=this.layoutSelectionStoreProvider.getLayoutSelectionStore(),c=this.getFontSizeAllSite(),d=this.normalizeExtraHeight(a);d!==c&&b.setSiteFontAdditionalSize(d)},a.prototype.changeFontSizeAllSite=function(a){void 0===a&&(a=!0);var b=this.getFontSizeAllSite(),c=(b||0)+(a?1:-1);this.setFontSizeAllSite(c)},a.prototype.resetFontSize=function(a){if(a)this.setSectionOverride(a);else{var b=this.layoutSelectionStoreProvider.getLayoutSelectionStore();b.resetAllFontAdditionalSize()}},a.prototype.setFontSize=function(a,b){var c=this.getSectionOverride(a),d=this.normalizeExtraHeight(b);return d!==c&&(this.selections.getForSectionNode(a).fontAdditionalSize=d),d},a.prototype.changeFontSize=function(a,b){void 0===b&&(b=!0);var c=this.getSectionOverride(a),d=(c||0)+(b?1:-1);return this.setFontSize(a,d)},a.prototype.setSectionOverride=function(a,b){return this.selections.getForSectionNode(a).fontAdditionalSize=b},a.prototype.getUniqueFontSizes=function(){var a=this,b=this.sectionDesignOverrideService.getOverridableSections(),c=_.map(b,function(b){return a.getSectionOverride(b.node)});return _(c).unique().without(void 0).value()},a.prototype.doSiteAndSectionMatch=function(){var a=this.getFontSizeAllSite(),b=this.getUniqueFontSizes();return 0===b.length||1===b.length&&b[0]===a},a.prototype.clearOverridableSections=function(){var a=this,b=this.sectionDesignOverrideService.getOverridableSections();_.each(b,function(b){a.setFontSize(b.node,void 0)})},a}();FontCustomizationService.maxDeltaHeight=3,angular.module("siteGeneratorStaticsCoreAppInternal").service("fontCustomizationService",FontCustomizationService);var FontSizeCalculationUtils=function(){function a(a,b,c,d){this.fontCustomizationRules=a,this.designKitParameters=b,this.$log=c,this.themeChooser=d,this.fontOrder=[10,1,9,8,7,0,2,6,5,4,3].map(function(a){return"font_"+a}),this.typeAndFieldToCategory=b.typeAndFieldToCategory}return a.$inject=["fontCustomizationRules","designKitParameters","$log","themeChooser"],a.prototype.detectedUseOfBlockedFonts=function(a,b){if(this.fontCustomizationRules[a]&&this.fontCustomizationRules[a].blockedFonts){var c=this.styleOfFontByClass(this.fontOrder[b]);if(!c)return!1;if(_.any(this.fontCustomizationRules[a].blockedFonts,function(a){return c.includes(a)}))return!0}return!1},a.prototype.addAndNormalizeFont=function(a,b,c,d){var e,f=this.fontOrder.indexOf(a),g=Math.min(10,Math.max(0,f+b)),h=d&&d.width;this.fontCustomizationRules[c]&&this.fontCustomizationRules[c].segmentWidthRules&&h&&(e=_.find(this.fontCustomizationRules[c].segmentWidthRules,function(a){return _.inRange(h,a.from||0,a.to||1e3)}));var i=this.fontCustomizationRules[c]&&this.fontCustomizationRules[c].max||e&&e.max,j=this.fontCustomizationRules[c]&&this.fontCustomizationRules[c].min||e&&e.min;if(i&&(i="font_"+i,g=Math.min(g,this.fontOrder.indexOf(i))),j&&(j="font_"+j,g=Math.max(g,this.fontOrder.indexOf(j))),g!==f)for(;0!==g&&10>=g&&this.detectedUseOfBlockedFonts(c,g);)g-=b>0?1:-1;return{newFont:this.fontOrder[g],actualAdditionalHeight:g-f}},a.prototype.adjustFontExtraSize=function(a,b){if(!a)return 0;var c=this.fontCustomizationRules[b]&&this.fontCustomizationRules[b][a];return"undefined"!=typeof c?c:a},a.prototype.getCategoryOfCE=function(a,b){if("button"===b)return"BTN";var c=a&&a.contentElementType||"GeneralDescription";a&&"GeneralDescription"===a.contentElementType&&(c="Footer"+c);var d=a&&a.isListItem?"list":"single",e=c+"#"+b,f=this.typeAndFieldToCategory[e+"#"+d]||this.typeAndFieldToCategory[e];return f||(this.$log.error("Category is not defined for type: "+e+"#"+d),f=this.typeAndFieldToCategory[b+"Fallback"]||this.typeAndFieldToCategory.otherFallback),f},a.prototype.styleOfFontByClass=function(a){var b=this.themeChooser.getActiveFontTheme(),c=Number(a.replace("font_",""));return b.fontPalette[c]&&b.fontPalette[c].style},a.prototype.fontOfFieldType=function(a,b){var c=this.getCategoryOfCE(a,b);if(c){var d=this.themeChooser.getActiveFontTheme();return{category:c,aFont:d.kitFonts&&d.kitFonts[c]&&d.kitFonts[c].font}}},a}();angular.module("siteGeneratorStaticsCoreAppInternal").service("fontSizeCalculationUtils",FontSizeCalculationUtils),angular.module("siteGeneratorStaticsCoreAppInternal").factory("cropFaceService",["flags","obMonitoring",function(a,b){function c(a,b,c,d,e){return{x:a.x-b,y:a.y-d,height:a.height+d+e,width:a.width+b+c}}function d(a){return 29*a/80+30.25}function e(a,b){return Math.min(b,a.x)}function f(a,b,c){var d=b.x+b.width,e=a.width-d;return Math.min(c,e)}function g(a,b){return Math.min(b,a.y)}function h(a,b,c){var d=b.y+b.height,e=a.height-d;return Math.min(c,e)}function i(a,b,c,d,i,j){return{left:e(b,c),right:f(a,b,d),up:g(b,i),down:h(a,b,j)}}function j(a,b,d,e,f,g){var h=i(a,b,d,e,f,g);return h.left<d?e+=d-h.left:h.right<e&&(d+=e-h.right),h.up<f?g+=f-h.up:h.down<g&&(f+=g-h.down),h=i(a,b,d,e,f,g),c(b,h.left,h.right,h.up,h.down)}var k=.2,l=.2,m={cropFaceMinAlpha:function(a,b,c){return this.cropFace(a,b,c,0)},cropFaceMaxAlpha:function(a,b,c,d){return this.cropFace(a,b,c,2,d)},cropFaceCustomAlpha:function(a,b,c,d){return this.cropFace(a,b,c,1,d)},cropFace:function(c,e,f,g,h){var i,k,m,n,o,p,q,r,s=[],t=_.clone(c),u=this._addPaddingToFace(e,f),v=u.width/t.width,w=u.height/t.height;if(g){var x=2*Math.min(e.width-(u.x+u.width),u.x)+u.width,y=e.height/t.height,z=h?e.width:x,A=z/t.width,B=this.getLimitingAlpha(5080,5080,t.width,t.height);if(q=Math.min(y,A,B),1===g){var C=d(t.height);r=f.height/C,r=Math.max(r,v,w),r=q>=r&&r}}g&&q&&q>1&&q>=w&&q>=v?(i=(r||q)*t.height-u.height,k=(r||q)*t.width-u.width):v>1&&v>w?(i=t.height*(v-w),k=0):w>1&&w>v?(i=0,k=t.width*(w-v)):(.75*t.height>e.height&&(t.width*=e.height/t.height,t.height=e.height,s.push("lowImageQuality - viewport is higher than image")),.75*t.width>e.width&&(t.height*=e.width/t.width,t.width=e.width,s.push("lowImageQuality - viewPort is wider than image")),k=Math.max(t.width-u.width,0),i=Math.max(t.height-u.height,0)),m=n=k/2;var D=a.cropTopMargin||l;o=i*D,p=i*(1-D),m>=0&&n>=0&&i>=0&&o>=0&&(u=j(e,u,m,n,o,p));var E=u.height/t.height,F=u.width/t.width;if(E>F){var G=F*t.height,H=u.height-G;u.height=G,u.y+=H/2,s.push("changeToVerticalLayout")}return u.errors=s,s.length&&b.error("crop error",{viewPort:c,imageHeight:e.height,imageWidth:e.width,errors:s,imageUrl:"http://static.wixstatic.com/media/"+e.relativeUri}),u},getLimitingAlpha:function(a,b,c,d){var e=a*b;return Math.sqrt(e/(c*d))},cropBasedOnAnotherCrop:function(a,b,c,d){var e=c.width/b.width,f=a.width*e-c.width,g=a.height*e-c.height,h=j(d,c,f/2,f/2,g/2,g/2),i=h.height/a.height,k=h.width/a.width;if(i!==k){var l,m,n;i>k?(l=k,m="height",n="y"):(l=i,m="width",n="x");var o=l*a[m],p=h[m]-o;h[m]=o,h[n]+=p/2}return h},getDefaultPadding:function(){return k},_addPaddingToFace:function(b,d){var e=a.cropFacePadding||k,f=d.width*(e/2),g=d.height*(e/2),h=i(b,d,f,f,g,g),j=c(d,h.left,h.right,h.up,h.down);return j},combineFaces:function(a){var b=_.max(a,"height").height,c=.5*b;a=_.filter(a,function(a){return a.height>c});var d=Math.min.apply(Math,_.map(a,"x")),e=Math.min.apply(Math,_.map(a,"y")),f=Math.max.apply(Math,_.map(a,function(a){return a.x+a.width}))-d,g=Math.max.apply(Math,_.map(a,function(a){return a.y+a.height}))-e;return{x:d,y:e,width:f,height:g}},getAlignmentByFacePosition:function(a){var b=_.get(a,"fileInput.face");if(b){var c=this.combineFaces(b),d=c.y+c.height/2,e=a.height/3,f=a.height/3*2;return e>d?"top":d>f?"bottom":"center"}},getFaceCoordinatesInCrop:function(a,b){var c=Math.max(b.x-a.x,0),d=Math.max(b.y-a.y,0),e=Math.min(b.x+b.width,a.x+a.width)-Math.max(a.x,b.x),f=Math.min(b.y+b.height,a.y+a.height)-Math.max(a.y,b.y);return{x:c,y:d,width:e,height:f}}};return m}]),angular.module("siteGeneratorStaticsCoreAppInternal").factory("addBlogService",function(){var a={feed:[{type:"Component",skin:"wysiwyg.viewer.skins.AppPartSkin",layout:{width:220,height:52,x:729,y:848,scale:1,rotationInDegrees:0,anchors:[{distance:29,originalValue:794,type:"BOTTOM_TOP",locked:!0,targetComponent:"comp-inpouuhc"}],fixedPosition:!1},componentType:"wixapps.integration.components.AppPart",data:{type:"AppPart",metaData:{isPreset:!1,schemaVersion:"1.0",isHidden:!1},appInnerID:"19",appPartName:"e000b4bf-9ff1-4e66-a0d3-d4b365ba3af5",viewName:"TagCloud",appLogicCustomizations:[{type:"AppPartCustomization",forType:"Array",view:"TagCloud",mode:"*",key:"comp.size",value:"8",fieldId:"mainTitleSpace"},{type:"AppPartCustomization",forType:"Array",view:"TagCloud",mode:"*",key:"value",value:"Search by tags",fieldId:"title",format:"*"},{type:"AppPartCustomization",forType:"wix:Object",view:"TagCloud",mode:"view",key:"layout.spacerAfter",value:"6",fieldId:"key"},{type:"AppPartCustomization",forType:"Array",view:"TagCloud",mode:"view",key:"comp.size",value:"8",fieldId:"mainTitleSpace"},{type:"AppPartCustomization",forType:"wix:Object",view:"TagCloud",key:"fixedSize",value:"true",fieldId:"vars",format:"*"}],appLogicParams:{}},props:{type:"AppPartProperties",metaData:{schemaVersion:"1.0"},direction:"ltr"},style:"blog_e000b4bf-9ff1-4e66-a0d3-d4b365ba3af5_1"},{type:"Component",skin:"wysiwyg.viewer.skins.WRichTextNewSkin",layout:{width:220,height:20,x:729,y:929,scale:1,rotationInDegrees:0,anchors:[{distance:12,originalValue:826,type:"BOTTOM_TOP",locked:!0,targetComponent:"comp-inpouuih"}],fixedPosition:!1},componentType:"wysiwyg.viewer.components.WRichText",data:{type:"StyledText",metaData:{isPreset:!1,schemaVersion:"1.0",isHidden:!1},text:'<h6 style="line-height: 1.4em;" class="font_6"><span style="line-height: 1.4em;">Follow Us</span></h6>\n',stylesMapId:"CK_EDITOR_PARAGRAPH_STYLES",linkList:[]},style:"txtNew"},{type:"Component",skin:"wysiwyg.viewer.skins.AppPartSkin",layout:{width:670,height:1088,x:30,y:30,scale:1,rotationInDegrees:0,anchors:[{distance:0,originalValue:968,type:"BOTTOM_PARENT",locked:!0,targetComponent:"cimtv"}],fixedPosition:!1},componentType:"wixapps.integration.components.AppPart",data:{type:"AppPart",metaData:{isPreset:!1,schemaVersion:"1.0",isHidden:!1},appInnerID:"19",appPartName:"4de5abc5-6da2-4f97-acc3-94bb74285072",viewName:"MediaLeftPage",appLogicCustomizations:[{type:"AppPartCustomization",forType:"Post",view:"MediaLeftPage",mode:"view",key:"comp.style",value:"Body S",fieldId:"date",format:"*"},{type:"AppPartCustomization",forType:"Post",view:"MediaZigzagPage",mode:"view",key:"comp.style",value:"Heading M",fieldId:"title",format:"*"},{type:"AppPartCustomization",forType:"Post",view:"MediaRightPage",mode:"view",key:"comp.style",value:"Heading M",fieldId:"title",format:"*"},{type:"AppPartCustomization",forType:"Post",view:"MediaBottomPage",mode:"view",key:"comp.style",value:"Heading M",fieldId:"title",format:"*"},{type:"AppPartCustomization",forType:"Post",view:"MediaTopPage",mode:"view",key:"comp.style",value:"Heading M",fieldId:"title",format:"*"},{type:"AppPartCustomization",forType:"Post",view:"MediaLeftPage",mode:"view",key:"comp.style",value:"Heading M",fieldId:"title",format:"*"},{type:"AppPartCustomization",forType:"Post",view:"MediaZigzagPage",mode:"view",key:"comp.style",value:"Body S",fieldId:"date",format:"*"},{type:"AppPartCustomization",forType:"Post",view:"MediaRightPage",mode:"view",key:"comp.style",value:"Body S",fieldId:"date",format:"*"},{type:"AppPartCustomization",forType:"Post",view:"MediaBottomPage",mode:"view",key:"comp.style",value:"Body S",fieldId:"date",format:"*"},{type:"AppPartCustomization",forType:"Post",view:"MediaTopPage",mode:"view",key:"comp.style",value:"Body S",fieldId:"date",format:"*"},{type:"AppPartCustomization",forType:"Post",view:"MediaTop",mode:"view",key:"comp.style",value:"Body S",fieldId:"date",format:"*"},{type:"AppPartCustomization",forType:"Post",view:"MediaRight",mode:"view",key:"comp.style",value:"Body S",fieldId:"date",format:"*"},{type:"AppPartCustomization",forType:"Post",view:"MediaZigzag",mode:"view",key:"comp.style",value:"Body M",fieldId:"ReadMoreBtn",format:"*"},{type:"AppPartCustomization",forType:"Post",view:"MediaZigzag",mode:"view",key:"comp.style",value:"Body M",fieldId:"text",format:"*"},{type:"AppPartCustomization",forType:"Post",view:"MediaZigzag",mode:"view",key:"comp.style",value:"Body S",fieldId:"date",format:"*"},{type:"AppPartCustomization",forType:"Post",view:"MediaZigzag",mode:"view",key:"comp.style",value:"Heading M",fieldId:"title",format:"*"},{type:"AppPartCustomization",forType:"Post",view:"MediaRight",mode:"view",key:"comp.style",value:"Body M",fieldId:"text",format:"*"},{type:"AppPartCustomization",forType:"Post",view:"MediaRight",mode:"view",key:"comp.style",value:"Heading M",fieldId:"title",format:"*"},{type:"AppPartCustomization",forType:"Post",view:"MediaBottom",mode:"view",key:"comp.style",value:"Body S",fieldId:"date",format:"*"},{type:"AppPartCustomization",forType:"Post",view:"MediaLeft",mode:"view",key:"comp.style",value:"Body S",fieldId:"date",format:"*"},{type:"AppPartCustomization",forType:"VideoPost",view:"MediaInner",mode:"view",key:"comp.style",value:"v1",fieldId:"videoPlayable",format:"*"},{type:"AppPartCustomization",forType:"VideoPost",view:"MediaInner",mode:"view",key:"comp.style",value:"wp2",fieldId:"video",format:"*"},{type:"AppPartCustomization",forType:"PhotoPost",view:"MediaInner",mode:"view",key:"comp.style",value:"wp2",fieldId:"photo",format:"*"},{type:"AppPartCustomization",forType:"Post",view:"MediaLeft",mode:"view",key:"comp.style",value:"Body M",fieldId:"text",format:"*"},{type:"AppPartCustomization",forType:"Post",view:"MediaTop",mode:"view",key:"comp.style",value:"Heading M",fieldId:"title",format:"*"},{type:"AppPartCustomization",forType:"Post",view:"MediaLeft",mode:"view",key:"comp.style",value:"Heading M",fieldId:"title",format:"*"},{type:"AppPartCustomization",forType:"Post",view:"MediaBottom",mode:"view",key:"comp.style",value:"Body M",fieldId:"text",format:"*"},{type:"AppPartCustomization",forType:"Post",view:"MediaTop",mode:"view",key:"comp.style",value:"Body M",fieldId:"ReadMoreBtn",format:"*"},{type:"AppPartCustomization",forType:"Post",view:"MediaTop",mode:"view",key:"comp.style",value:"Body M",fieldId:"text",format:"*"},{type:"AppPartCustomization",forType:"Post",view:"MediaTop",mode:"view",key:"layout.spacerBefore",value:"14",fieldId:"def_13"},{type:"AppPartCustomization",forType:"Post",view:"MediaBottom",mode:"*",key:"padding",value:"22",fieldId:"vars"},{type:"AppPartCustomization",forType:"Post",view:"MediaTop",mode:"view",key:"layout.spacerAfter",value:"22",fieldId:"WholePost"},{type:"AppPartCustomization",forType:"Post",view:"MediaBottom",mode:"view",key:"comp.size",value:"16",fieldId:"PostSpace"},{type:"AppPartCustomization",forType:"Post",view:"MediaBottom",mode:"view",key:"dateAndAuthorPosition",value:"left",fieldId:"vars"},{type:"AppPartCustomization",forType:"Post",view:"MediaBottom",mode:"view",key:"layout.spacerBefore",value:"12",fieldId:"def_11"},{type:"AppPartCustomization",forType:"Post",view:"MediaBottom",mode:"view",key:"layout.spacerAfter",value:"0",fieldId:"def_11"},{type:"AppPartCustomization",forType:"Post",view:"MediaLeft",mode:"*",key:"padding",value:"22",fieldId:"vars"},{type:"AppPartCustomization",forType:"Post",view:"MediaLeft",mode:"*",key:"comp.size",value:"16",fieldId:"PostSpace"},{type:"AppPartCustomization",forType:"Post",view:"MediaTop",mode:"*",key:"padding",value:"22",fieldId:"vars"},{type:"AppPartCustomization",forType:"Post",view:"MediaLeft",mode:"*",key:"layout.width",value:"254",fieldId:"MediaSize"},{type:"AppPartCustomization",forType:"Post",view:"MediaRight",mode:"*",key:"padding",value:"22",fieldId:"vars"},{type:"AppPartCustomization",forType:"Post",view:"MediaRight",mode:"*",key:"layout.width",value:"254",fieldId:"MediaSize"},{type:"AppPartCustomization",forType:"Post",view:"MediaZigzag",mode:"*",key:"comp.size",value:"16",fieldId:"PostSpace"},{type:"AppPartCustomization",forType:"Post",view:"MediaZigzag",mode:"*",key:"padding",value:"22",fieldId:"vars"},{type:"AppPartCustomization",forType:"Post",view:"MediaZigzag",mode:"*",key:"layout.width",value:"254",fieldId:"MediaSize"},{type:"AppPartCustomization",forType:"Post",view:"MediaBottom",mode:"*",key:"comp.size",value:"16",fieldId:"PostSpace"},{type:"AppPartCustomization",forType:"Post",view:"MediaTop",mode:"*",key:"comp.size",value:"16",fieldId:"PostSpace"},{type:"AppPartCustomization",forType:"Post",view:"MediaRight",mode:"*",key:"comp.size",value:"16",fieldId:"PostSpace"},{type:"AppPartCustomization",forType:"Post",view:"MediaTop",mode:"view",key:"comp.size",value:"16",fieldId:"PostSpace"},{type:"AppPartCustomization",forType:"Post",view:"MediaLeft",mode:"view",key:"comp.size",value:"16",fieldId:"PostSpace"},{type:"AppPartCustomization",forType:"Post",view:"MediaRight",mode:"view",key:"layout.spacerBefore",value:"13",fieldId:"title"},{type:"AppPartCustomization",forType:"Post",view:"MediaTop",mode:"view",key:"layout.spacerBefore",value:"10",fieldId:"title"},{type:"AppPartCustomization",forType:"Post",view:"MediaBottom",mode:"view",key:"layout.spacerBefore",value:"11",fieldId:"title"},{type:"AppPartCustomization",forType:"Post",view:"MediaLeft",mode:"view",key:"layout.spacerBefore",value:"13",fieldId:"title"},{type:"AppPartCustomization",forType:"Post",view:"MediaRight",mode:"view",key:"layout.spacerBefore",value:"22",fieldId:"WholePost"},{type:"AppPartCustomization",forType:"Post",view:"MediaRight",mode:"view",key:"layout.spacerAfter",value:"22",fieldId:"WholePost"},{type:"AppPartCustomization",forType:"Post",view:"MediaRight",mode:"view",key:"layout.spacerAfter",value:"22",fieldId:"def_10"},{type:"AppPartCustomization",forType:"Post",view:"MediaZigzag",mode:"view",key:"layout.spacerAfter",value:"22",fieldId:"def_27"},{type:"AppPartCustomization",forType:"Post",view:"MediaLeft",mode:"view",key:"layout.spacerAfter",value:"22",fieldId:"def_10"},{type:"AppPartCustomization",forType:"Post",view:"MediaZigzag",mode:"*",key:"dateAndAuthorPosition",value:"left",fieldId:"vars"},{type:"AppPartCustomization",forType:"Post",view:"MediaZigzag",mode:"view",key:"comp.size",value:"16",fieldId:"PostSpace"},{type:"AppPartCustomization",forType:"Post",view:"MediaZigzag",mode:"view",key:"layout.spacerBefore",value:"13",fieldId:"title"},{type:"AppPartCustomization",forType:"Post",view:"MediaRight",mode:"view",key:"layout.spacerAfter",value:"15",fieldId:"text"},{type:"AppPartCustomization",forType:"Post",view:"MediaLeft",mode:"view",key:"layout.spacerAfter",value:"15",fieldId:"text"},{type:"AppPartCustomization",forType:"Post",view:"MediaZigzag",mode:"*",key:"layout.spacerBefore",value:"0",fieldId:"ReadMoreBtn"},{type:"AppPartCustomization",forType:"Post",view:"MediaRight",mode:"*",key:"layout.spacerBefore",value:"0",fieldId:"ReadMoreBtn"},{type:"AppPartCustomization",forType:"Post",view:"MediaLeft",mode:"*",key:"layout.spacerBefore",value:"0",fieldId:"ReadMoreBtn"},{type:"AppPartCustomization",forType:"Post",view:"MediaZigzag",mode:"view",key:"layout.spacerAfter",value:"22",fieldId:"WholePost"},{type:"AppPartCustomization",forType:"Post",view:"MediaZigzag",mode:"view",key:"layout.spacerAfter",value:"22",fieldId:"def_11"},{type:"AppPartCustomization",forType:"Post",view:"MediaBottom",mode:"view",key:"layout.spacerBefore",value:"22",fieldId:"WholePost"},{type:"AppPartCustomization",forType:"Post",view:"MediaTop",mode:"view",key:"layout.spacerBefore",value:"0",fieldId:"ReadMoreBtn"},{type:"AppPartCustomization",forType:"Post",view:"MediaTop",mode:"view",key:"layout.spacerBefore",value:"22",fieldId:"WholePost"},{type:"AppPartCustomization",forType:"Post",view:"MediaTop",mode:"view",key:"layout.spacerAfter",value:"20",fieldId:"def_13"},{type:"AppPartCustomization",forType:"Post",view:"MediaBottom",mode:"view",key:"comp.size",value:"22",fieldId:"def_17"},{type:"AppPartCustomization",forType:"Post",view:"MediaZigzag",mode:"view",key:"layout.spacerBefore",value:"22",fieldId:"WholePost"},{type:"AppPartCustomization",forType:"Post",view:"MediaBottom",mode:"*",key:"layout.spacerBefore",value:"0",fieldId:"ReadMoreBtn"},{type:"AppPartCustomization",forType:"Post",view:"MediaTop",mode:"*",key:"layout.spacerBefore",value:"0",fieldId:"ReadMoreBtn"},{type:"AppPartCustomization",forType:"Post",view:"MediaLeftPage",mode:"*",key:"padding",value:"20",fieldId:"vars"},{type:"AppPartCustomization",forType:"Post",view:"MediaTopPage",mode:"*",key:"comp.size",value:"30",fieldId:"PostSpace"},{type:"AppPartCustomization",forType:"Post",view:"MediaTopPage",mode:"*",key:"padding",value:"20",fieldId:"vars"},{type:"AppPartCustomization",forType:"Post",view:"MediaBottomPage",mode:"*",key:"padding",value:"20",fieldId:"vars"},{type:"AppPartCustomization",forType:"Post",view:"MediaBottomPage",mode:"*",key:"comp.size",value:"30",fieldId:"PostSpace"},{type:"AppPartCustomization",forType:"Post",view:"MediaRightPage",mode:"*",key:"padding",value:"20",fieldId:"vars"},{type:"AppPartCustomization",forType:"Post",view:"MediaRightPage",mode:"*",key:"comp.size",value:"30",fieldId:"PostSpace"},{type:"AppPartCustomization",forType:"Post",view:"MediaZigzagPage",mode:"*",key:"comp.size",value:"30",fieldId:"PostSpace"},{type:"AppPartCustomization",
forType:"Post",view:"MediaZigzagPage",mode:"*",key:"padding",value:"20",fieldId:"vars"},{type:"AppPartCustomization",forType:"Post",view:"MediaZigzagPage",mode:"view",key:"comp.style",value:"c1",fieldId:"def_2"},{type:"AppPartCustomization",forType:"Post",view:"MediaTopPage",mode:"*",key:"comp.format",value:"longDate",fieldId:"date"},{type:"AppPartCustomization",forType:"Post",view:"MediaBottomPage",mode:"*",key:"comp.format",value:"longDate",fieldId:"date"},{type:"AppPartCustomization",forType:"Post",view:"MediaRightPage",mode:"*",key:"comp.format",value:"longDate",fieldId:"date"},{type:"AppPartCustomization",forType:"Post",view:"MediaLeftPage",mode:"*",key:"comp.format",value:"longDate",fieldId:"date"},{type:"AppPartCustomization",forType:"Post",view:"MediaZigzagPage",mode:"*",key:"comp.format",value:"longDate",fieldId:"date"},{type:"AppPartCustomization",forType:"Post",view:"MediaLeftPage",mode:"*",key:"comp.size",value:"30",fieldId:"PostSpace"},{type:"AppPartCustomization",forType:"Post",view:"MediaLeftPage",mode:"view",key:"comp.style",value:"c1",fieldId:"def_2"},{type:"AppPartCustomization",forType:"Array",view:"MasonryPage",key:"pageNavigationType",value:"pagination",fieldId:"vars",format:"*"},{type:"AppPartCustomization",forType:"Array",view:"MediaBottomPage",key:"pageNavigationType",value:"pagination",fieldId:"vars",format:"*"},{type:"AppPartCustomization",forType:"Array",view:"MediaLeftPage",key:"pageNavigationType",value:"pagination",fieldId:"vars",format:"*"},{type:"AppPartCustomization",forType:"Array",view:"MediaRightPage",key:"pageNavigationType",value:"pagination",fieldId:"vars",format:"*"},{type:"AppPartCustomization",forType:"Array",view:"MediaTopPage",key:"pageNavigationType",value:"pagination",fieldId:"vars",format:"*"},{type:"AppPartCustomization",forType:"Array",view:"MediaZigzagPage",key:"pageNavigationType",value:"pagination",fieldId:"vars",format:"*"}],appLogicParams:{filter:{type:"AppPartParam",value:""},limit:{type:"AppPartParam",value:"20"},sort:{type:"AppPartParam",value:'{"date.iso":-1}'}}},props:{type:"AppPartProperties",metaData:{schemaVersion:"1.0"},direction:"ltr"},style:"blog_4de5abc5-6da2-4f97-acc3-94bb74285072_1"},{type:"Component",skin:"wysiwyg.viewer.skins.LinkBarNoBGSkin",layout:{width:83,height:23,x:729,y:980,scale:1,rotationInDegrees:0,anchors:[{distance:0,originalValue:968,type:"BOTTOM_PARENT",locked:!0,targetComponent:"cimtv"}],fixedPosition:!1},componentType:"wysiwyg.viewer.components.LinkBar",data:{type:"ImageList",metaData:{isPreset:!1,schemaVersion:"1.0",isHidden:!1},items:[{type:"Image",metaData:{isPreset:!1,schemaVersion:"2.0",isHidden:!1},title:"Facebook Basic Square",uri:"8f2083b7f516bc701941adb38381e2d6.jpg",description:"",width:205,height:205,alt:"",link:{type:"ExternalLink",metaData:{isPreset:!1,schemaVersion:"1.0",isHidden:!1},url:"http://www.facebook.com/wix",target:"_blank"}},{type:"Image",metaData:{isPreset:!1,schemaVersion:"2.0",isHidden:!1},title:"Twitter Basic Square",uri:"8f6184c574cd183c5723c8eef9126a8d.jpg",description:"",width:205,height:205,alt:"",link:{type:"ExternalLink",metaData:{isPreset:!1,schemaVersion:"1.0",isHidden:!1},url:"http://www.twitter.com/wix",target:"_blank"}},{type:"Image",metaData:{isPreset:!1,schemaVersion:"2.0",isHidden:!1},title:"Google+ Basic Square",uri:"c29173e8ee518913a44ba4d87120a664.jpg",description:"",width:205,height:205,alt:"",link:{type:"ExternalLink",metaData:{isPreset:!1,schemaVersion:"1.0",isHidden:!1},url:"https://plus.google.com/117167403531518744294/posts",target:"_blank"}}]},props:{type:"LinkBarProperties",metaData:{schemaVersion:"1.0"},gallery:"social_icons",iconSize:23,spacing:7,bgScale:1,orientation:"HORIZ"},style:"lb1"},{type:"Component",skin:"wysiwyg.viewer.skins.AppPartSkin",layout:{width:220,height:250,x:729,y:388,scale:1,rotationInDegrees:0,anchors:[{distance:10,originalValue:609,type:"BOTTOM_TOP",locked:!0,targetComponent:"comp-inpouuit"}],fixedPosition:!1},componentType:"wixapps.integration.components.AppPart",data:{type:"AppPart",metaData:{isPreset:!1,schemaVersion:"1.0",isHidden:!1},appInnerID:"19",appPartName:"f72fe377-8abc-40f2-8656-89cfe00f3a22",viewName:"PostsListMediaLeft",appLogicCustomizations:[{type:"AppPartCustomization",forType:"Post",view:"PostsListMediaLeft",mode:"*",key:"comp.hidden",value:"true",fieldId:"postSeparator",format:"*"},{type:"AppPartCustomization",forType:"Post",view:"PostsListMediaLeft",mode:"view",key:"comp.style",value:"hl1",fieldId:"lineSeparator",format:"*"},{type:"AppPartCustomization",forType:"Post",view:"PostsListMediaLeft",mode:"*",key:"comp.hidden",value:"false",fieldId:"dateShow",format:"*"},{type:"AppPartCustomization",forType:"Post",view:"PostsList",mode:"view",key:"comp.style",value:"Body XS",fieldId:"date",format:"*"},{type:"AppPartCustomization",forType:"Post",view:"PostsListMediaLeft",mode:"view",key:"comp.style",value:"Body XS",fieldId:"date",format:"*"},{type:"AppPartCustomization",forType:"Array",view:"PostsListMediaLeft",mode:"view",key:"comp.style",value:"Heading S",fieldId:"title",format:"*"},{type:"AppPartCustomization",forType:"VideoPost",view:"PostsListMediaInner",mode:"view",key:"comp.style",value:"wp2",fieldId:"video",format:"*"},{type:"AppPartCustomization",forType:"PhotoPost",view:"PostsListMediaInner",mode:"view",key:"comp.style",value:"wp2",fieldId:"photo",format:"*"},{type:"AppPartCustomization",forType:"Array",view:"PostsList",mode:"view",key:"comp.style",value:"Heading S",fieldId:"title",format:"*"},{type:"AppPartCustomization",forType:"Post",view:"PostsList",mode:"*",key:"comp.hidden",value:"true",fieldId:"postSeparator",format:"*"},{type:"AppPartCustomization",forType:"Post",view:"PostsList",mode:"*",key:"postSpacing",value:"7",fieldId:"vars"},{type:"AppPartCustomization",forType:"Array",view:"PostsList",mode:"*",key:"comp.size",value:"11",fieldId:"mainTitleSpace"},{type:"AppPartCustomization",forType:"Array",view:"PostsListMediaLeft",mode:"*",key:"comp.size",value:"17",fieldId:"mainTitleSpace"},{type:"AppPartCustomization",forType:"Post",view:"PostsListMediaLeft",mode:"*",key:"layout.width",value:"70",fieldId:"MediaSize"},{type:"AppPartCustomization",forType:"Post",view:"PostsListMediaLeft",mode:"*",key:"postSpacing",value:"22",fieldId:"vars"},{type:"AppPartCustomization",forType:"Post",view:"PostsListMediaLeft",mode:"*",key:"comp.format",value:"longDate",fieldId:"date"},{type:"AppPartCustomization",forType:"Post",view:"PostsList",mode:"*",key:"comp.format",value:"longDate",fieldId:"date"}],appLogicParams:{filter:{type:"AppPartParam",value:"{}"},limit:{type:"AppPartParam",value:"10"},sort:{type:"AppPartParam",value:'{"date.iso":-1}'}}},props:{type:"AppPartProperties",metaData:{schemaVersion:"1.0"},direction:"ltr"},style:"blog_f72fe377-8abc-40f2-8656-89cfe00f3a22_1"},{type:"Component",skin:"wysiwyg.viewer.skins.WRichTextNewSkin",layout:{width:220,height:20,x:729,y:337,scale:1,rotationInDegrees:0,anchors:[{distance:12,originalValue:364,type:"BOTTOM_TOP",locked:!0,targetComponent:"comp-inpouui4"}],fixedPosition:!1},componentType:"wysiwyg.viewer.components.WRichText",data:{type:"StyledText",metaData:{isPreset:!1,schemaVersion:"1.0",isHidden:!1},text:'<h6 style="line-height: 1.4em;" class="font_6"><span style="line-height: 1.4em;">Recent Posts</span></h6>\n',stylesMapId:"CK_EDITOR_PARAGRAPH_STYLES",linkList:[]},style:"txtNew"},{type:"Component",skin:"wysiwyg.viewer.skins.line.SolidLine",layout:{width:220,height:5,x:729,y:374,scale:1,rotationInDegrees:0,anchors:[{distance:9,originalValue:378,type:"BOTTOM_TOP",locked:!0,targetComponent:"comp-inpouuhz"}],fixedPosition:!1},componentType:"wysiwyg.viewer.components.FiveGridLine",props:{type:"FiveGridLineProperties",metaData:{schemaVersion:"1.0"},fullScreenModeOn:!1},style:"hl1"},{type:"Component",skin:"wysiwyg.viewer.skins.WRichTextNewSkin",layout:{width:220,height:32,x:729,y:807,scale:1,rotationInDegrees:0,anchors:[{distance:2,originalValue:734,type:"BOTTOM_TOP",locked:!0,targetComponent:"comp-inpouuie"}],fixedPosition:!1},componentType:"wysiwyg.viewer.components.WRichText",data:{type:"StyledText",metaData:{isPreset:!1,schemaVersion:"1.0",isHidden:!1},text:'<h6 style="line-height: 1.4em;" class="font_6"><span style="line-height: 1.4em;">Search By Tags</span></h6>\n',stylesMapId:"CK_EDITOR_PARAGRAPH_STYLES",linkList:[]},style:"txtNew"},{type:"Component",skin:"wysiwyg.viewer.skins.line.SolidLine",layout:{width:220,height:5,x:729,y:841,scale:1,rotationInDegrees:0,anchors:[{distance:2,originalValue:741,type:"BOTTOM_TOP",locked:!0,targetComponent:"comp-inpouuh5"}],fixedPosition:!1},componentType:"wysiwyg.viewer.components.FiveGridLine",props:{type:"FiveGridLineProperties",metaData:{schemaVersion:"1.0"},fullScreenModeOn:!1},style:"hl1"},{type:"Component",skin:"wysiwyg.viewer.skins.line.SolidLine",layout:{width:220,height:5,x:729,y:966,scale:1,rotationInDegrees:0,anchors:[{distance:9,originalValue:840,type:"BOTTOM_TOP",locked:!0,targetComponent:"comp-inpouuhm"}],fixedPosition:!1},componentType:"wysiwyg.viewer.components.FiveGridLine",props:{type:"FiveGridLineProperties",metaData:{schemaVersion:"1.0"},fullScreenModeOn:!1},style:"hl1"},{type:"Component",skin:"wysiwyg.viewer.skins.WRichTextNewSkin",layout:{width:220,height:20,x:729,y:34,scale:1,rotationInDegrees:0,anchors:[{distance:12,originalValue:66,type:"BOTTOM_TOP",locked:!0,targetComponent:"comp-inpouuin"}],fixedPosition:!1},componentType:"wysiwyg.viewer.components.WRichText",data:{type:"StyledText",metaData:{isPreset:!1,schemaVersion:"1.0",isHidden:!1},text:'<h6 style="line-height: 1.4em;" class="font_6"><span style="line-height: 1.4em;">Featured Posts</span></h6>\n',stylesMapId:"CK_EDITOR_PARAGRAPH_STYLES",linkList:[]},style:"txtNew"},{type:"Component",skin:"wysiwyg.viewer.skins.line.SolidLine",layout:{width:220,height:5,x:729,y:71,scale:1,rotationInDegrees:0,anchors:[{distance:9,originalValue:80,type:"BOTTOM_TOP",locked:!0,targetComponent:"comp-inpouuip"}],fixedPosition:!1},componentType:"wysiwyg.viewer.components.FiveGridLine",props:{type:"FiveGridLineProperties",metaData:{schemaVersion:"1.0"},fullScreenModeOn:!1},style:"hl1"},{type:"Component",skin:"wysiwyg.viewer.skins.AppPartSkin",layout:{width:220,height:220,x:729,y:85,scale:1,rotationInDegrees:0,anchors:[{distance:32,originalValue:332,type:"BOTTOM_TOP",locked:!0,targetComponent:"comp-inpouui2"}],fixedPosition:!1},componentType:"wixapps.integration.components.AppPart",data:{type:"AppPart",metaData:{isPreset:!1,schemaVersion:"1.0",isHidden:!1},appInnerID:"19",appPartName:"33a9f5e0-b083-4ccc-b55d-3ca5d241a6eb",viewName:"TickerMediaTop",appLogicCustomizations:[{type:"AppPartCustomization",forType:"Post",view:"TickerMediaTop",mode:"*",key:"comp.format",value:"longDate",fieldId:"date"},{type:"AppPartCustomization",forType:"Post",view:"TickerMediaBottom",mode:"*",key:"comp.format",value:"longDate",fieldId:"date"}],appLogicParams:{filter:{type:"AppPartParam",value:'{"featured":true}'},limit:{type:"AppPartParam",value:"10"},sort:{type:"AppPartParam",value:'{"date.iso":-1}'}}},props:{type:"AppPartProperties",metaData:{schemaVersion:"1.0"},direction:"ltr"},style:"blog_33a9f5e0-b083-4ccc-b55d-3ca5d241a6eb_1"},{type:"Component",skin:"wysiwyg.viewer.skins.WRichTextNewSkin",layout:{width:220,height:33,x:729,y:648,scale:1,rotationInDegrees:0,anchors:[{distance:1,originalValue:643,type:"BOTTOM_TOP",locked:!0,targetComponent:"comp-inpouuiv"}],fixedPosition:!1},componentType:"wysiwyg.viewer.components.WRichText",data:{type:"StyledText",metaData:{isPreset:!1,schemaVersion:"1.0",isHidden:!1},text:'<h6 style="line-height: 1.4em;" class="font_6"><span style="line-height: 1.4em;">Archive</span></h6>\n',stylesMapId:"CK_EDITOR_PARAGRAPH_STYLES",linkList:[]},style:"txtNew"},{type:"Component",skin:"wysiwyg.viewer.skins.line.SolidLine",layout:{width:220,height:5,x:729,y:682,scale:1,rotationInDegrees:0,anchors:[{distance:2,originalValue:650,type:"BOTTOM_TOP",locked:!0,targetComponent:"comp-inpouuix"}],fixedPosition:!1},componentType:"wysiwyg.viewer.components.FiveGridLine",props:{type:"FiveGridLineProperties",metaData:{schemaVersion:"1.0"},fullScreenModeOn:!1},style:"hl1"},{type:"Component",skin:"wysiwyg.viewer.skins.AppPartSkin",layout:{width:210,height:99,x:729,y:689,scale:1,rotationInDegrees:0,anchors:[{distance:19,originalValue:700,type:"BOTTOM_TOP",locked:!0,targetComponent:"comp-inpouuic"}],fixedPosition:!1},componentType:"wixapps.integration.components.AppPart",data:{type:"AppPart",metaData:{isPreset:!1,schemaVersion:"1.0",isHidden:!1},appInnerID:"19",appPartName:"56ab6fa4-95ac-4391-9337-6702b8a77011",viewName:"ArchiveList",appLogicCustomizations:[],appLogicParams:{}},props:{type:"AppPartProperties",metaData:{schemaVersion:"1.0"},direction:"ltr"},style:"blog_56ab6fa4-95ac-4391-9337-6702b8a77011_1"}],singlePost:[{type:"Component",id:"comp-inpouujl",skin:"wysiwyg.viewer.skins.AppPartSkin",layout:{width:220,height:250,x:729,y:398,scale:1,rotationInDegrees:0,anchors:[{distance:10,originalValue:609,type:"BOTTOM_TOP",locked:!0,targetComponent:"comp-inpouukf"}],fixedPosition:!1},componentType:"wixapps.integration.components.AppPart",data:{type:"AppPart",metaData:{isPreset:!1,schemaVersion:"1.0",isHidden:!1},appInnerID:"19",appPartName:"f72fe377-8abc-40f2-8656-89cfe00f3a22",viewName:"PostsListMediaLeft",appLogicCustomizations:[{type:"AppPartCustomization",forType:"Post",view:"PostsListMediaLeft",mode:"*",key:"comp.hidden",value:"true",fieldId:"postSeparator",format:"*"},{type:"AppPartCustomization",forType:"Post",view:"PostsListMediaLeft",mode:"view",key:"comp.style",value:"hl1",fieldId:"lineSeparator",format:"*"},{type:"AppPartCustomization",forType:"Post",view:"PostsListMediaLeft",mode:"*",key:"comp.hidden",value:"false",fieldId:"dateShow",format:"*"},{type:"AppPartCustomization",forType:"Post",view:"PostsList",mode:"view",key:"comp.style",value:"Body XS",fieldId:"date",format:"*"},{type:"AppPartCustomization",forType:"Post",view:"PostsListMediaLeft",mode:"view",key:"comp.style",value:"Body XS",fieldId:"date",format:"*"},{type:"AppPartCustomization",forType:"Array",view:"PostsListMediaLeft",mode:"view",key:"comp.style",value:"Heading S",fieldId:"title",format:"*"},{type:"AppPartCustomization",forType:"VideoPost",view:"PostsListMediaInner",mode:"view",key:"comp.style",value:"wp2",fieldId:"video",format:"*"},{type:"AppPartCustomization",forType:"PhotoPost",view:"PostsListMediaInner",mode:"view",key:"comp.style",value:"wp2",fieldId:"photo",format:"*"},{type:"AppPartCustomization",forType:"Array",view:"PostsList",mode:"view",key:"comp.style",value:"Heading S",fieldId:"title",format:"*"},{type:"AppPartCustomization",forType:"Post",view:"PostsList",mode:"*",key:"comp.hidden",value:"true",fieldId:"postSeparator",format:"*"},{type:"AppPartCustomization",forType:"Post",view:"PostsList",mode:"*",key:"postSpacing",value:"7",fieldId:"vars"},{type:"AppPartCustomization",forType:"Array",view:"PostsList",mode:"*",key:"comp.size",value:"11",fieldId:"mainTitleSpace"},{type:"AppPartCustomization",forType:"Array",view:"PostsListMediaLeft",mode:"*",key:"comp.size",value:"17",fieldId:"mainTitleSpace"},{type:"AppPartCustomization",forType:"Post",view:"PostsListMediaLeft",mode:"*",key:"layout.width",value:"70",fieldId:"MediaSize"},{type:"AppPartCustomization",forType:"Post",view:"PostsListMediaLeft",mode:"*",key:"postSpacing",value:"22",fieldId:"vars"},{type:"AppPartCustomization",forType:"Post",view:"PostsListMediaLeft",key:"comp.format",value:"longDate",fieldId:"date",format:"*"},{type:"AppPartCustomization",forType:"Post",view:"PostsList",key:"comp.format",value:"longDate",fieldId:"date",format:"*"}],appLogicParams:{filter:{type:"AppPartParam",value:"{}"},limit:{type:"AppPartParam",value:"10"},sort:{type:"AppPartParam",value:'{"date.iso":-1}'}},id:"#dataItem-inpouujm"},props:{type:"AppPartProperties",metaData:{schemaVersion:"1.0"},direction:"ltr",id:"propItem-inpouujm1"},style:"blog_f72fe377-8abc-40f2-8656-89cfe00f3a22_1"},{type:"Component",id:"comp-inpouujn",skin:"wysiwyg.viewer.skins.line.SolidLine",layout:{width:220,height:5,x:729,y:384,scale:1,rotationInDegrees:0,anchors:[{distance:9,originalValue:378,type:"BOTTOM_TOP",locked:!0,targetComponent:"comp-inpouujl"}],fixedPosition:!1},componentType:"wysiwyg.viewer.components.FiveGridLine",props:{type:"FiveGridLineProperties",metaData:{schemaVersion:"1.0"},fullScreenModeOn:!1,id:"propItem-inpouujo"},style:"hl1"},{type:"Component",id:"comp-inpouujq",skin:"wysiwyg.viewer.skins.WRichTextNewSkin",layout:{width:220,height:5,x:729,y:332,scale:1,rotationInDegrees:0,anchors:[{distance:27,originalValue:364,type:"BOTTOM_TOP",locked:!0,targetComponent:"comp-inpouujn"}],fixedPosition:!1},componentType:"wysiwyg.viewer.components.WRichText",data:{type:"StyledText",metaData:{isPreset:!1,schemaVersion:"1.0",isHidden:!1},text:'<h6 style="line-height: 1.4em;" class="font_6"><span style="line-height: 1.4em;">Recent Posts</span></h6>\n',stylesMapId:"CK_EDITOR_PARAGRAPH_STYLES",linkList:[],id:"#dataItem-inpouujr"},style:"txtNew"},{type:"Component",id:"comp-inpouujs",skin:"wysiwyg.viewer.skins.AppPartSkin",layout:{width:220,height:220,x:729,y:80,scale:1,rotationInDegrees:0,anchors:[{distance:32,originalValue:332,type:"BOTTOM_TOP",locked:!0,targetComponent:"comp-inpouujq"}],fixedPosition:!1},componentType:"wixapps.integration.components.AppPart",data:{type:"AppPart",metaData:{isPreset:!1,schemaVersion:"1.0",isHidden:!1},appInnerID:"19",appPartName:"33a9f5e0-b083-4ccc-b55d-3ca5d241a6eb",viewName:"TickerMediaTop",appLogicCustomizations:[{type:"AppPartCustomization",forType:"Post",view:"TickerMediaTop",key:"comp.format",value:"longDate",fieldId:"date",format:"*"},{type:"AppPartCustomization",forType:"Post",view:"TickerMediaBottom",key:"comp.format",value:"longDate",fieldId:"date",format:"*"}],appLogicParams:{filter:{type:"AppPartParam",value:'{"featured":true}'},limit:{type:"AppPartParam",value:"10"},sort:{type:"AppPartParam",value:'{"date.iso":-1}'}},id:"#dataItem-inpouujt"},props:{type:"AppPartProperties",metaData:{schemaVersion:"1.0"},direction:"ltr",id:"propItem-inpouujt1"},style:"blog_33a9f5e0-b083-4ccc-b55d-3ca5d241a6eb_1"},{type:"Component",id:"comp-inpouuju",skin:"wysiwyg.viewer.skins.WRichTextNewSkin",layout:{width:220,height:30,x:729,y:34,scale:1,rotationInDegrees:0,anchors:[{distance:2,originalValue:66,type:"BOTTOM_TOP",locked:!0,targetComponent:"comp-inpouujw"}],fixedPosition:!1},componentType:"wysiwyg.viewer.components.WRichText",data:{type:"StyledText",metaData:{isPreset:!1,schemaVersion:"1.0",isHidden:!1},text:'<h6 style="line-height: 1.4em;" class="font_6"><span style="line-height: 1.4em;">Featured Posts</span></h6>\n',stylesMapId:"CK_EDITOR_PARAGRAPH_STYLES",linkList:[],id:"#dataItem-inpouujv"},style:"txtNew"},{type:"Component",id:"comp-inpouujw",skin:"wysiwyg.viewer.skins.line.SolidLine",layout:{width:220,height:5,x:730,y:66,scale:1,rotationInDegrees:0,anchors:[{distance:9,originalValue:80,type:"BOTTOM_TOP",locked:!0,targetComponent:"comp-inpouujs"}],fixedPosition:!1},componentType:"wysiwyg.viewer.components.FiveGridLine",props:{type:"FiveGridLineProperties",metaData:{schemaVersion:"1.0"},fullScreenModeOn:!1,id:"propItem-inpouujx"},style:"hl1"},{type:"Component",id:"comp-inpouujz",skin:"wysiwyg.viewer.skins.AppPartSkin",layout:{width:670,height:1763,x:30,y:30,scale:1,rotationInDegrees:0,anchors:[{distance:19,originalValue:759,type:"BOTTOM_TOP",locked:!0,targetComponent:"comp-inpouuk1"}],fixedPosition:!1},componentType:"wixapps.integration.components.AppPart",data:{type:"AppPart",metaData:{isPreset:!1,schemaVersion:"1.0",isHidden:!1},appInnerID:"19",appPartName:"ea63bc0f-c09f-470c-ac9e-2a408b499f22",viewName:"SinglePostMediaTop",appLogicCustomizations:[{type:"AppPartCustomization",forType:"Post",view:"SinglePostMediaTop",mode:"*",key:"comp.hidden",value:"true",fieldId:"TwitterShare",format:"*"},{type:"AppPartCustomization",forType:"Post",view:"SinglePostMediaTop",mode:"*",key:"comp.hidden",value:"true",fieldId:"FancyShare",format:"*"},{type:"AppPartCustomization",forType:"Post",view:"SinglePostMediaTop",mode:"view",key:"comp.style",value:"Body M",fieldId:"text",format:"*"},{type:"AppPartCustomization",forType:"PhotoPost",view:"SinglePostMediaInner",mode:"view",key:"comp.style",value:"wp2",fieldId:"photo",format:"*"},{type:"AppPartCustomization",forType:"Post",view:"SinglePostMediaBottom",mode:"view",key:"comp.style",value:"Body M",fieldId:"text",format:"*"},{type:"AppPartCustomization",forType:"Post",view:"SinglePostMediaBottom",mode:"view",key:"comp.style",value:"Body S",fieldId:"date",format:"*"},{type:"AppPartCustomization",forType:"Post",view:"SinglePostMediaBottom",mode:"view",key:"comp.style",value:"Heading M",fieldId:"title",format:"*"},{type:"AppPartCustomization",forType:"Post",view:"SinglePostMediaBottom",mode:"view",key:"comp.style",value:"Body M",fieldId:"def_10"},{type:"AppPartCustomization",forType:"Post",view:"SinglePostMediaBottom",mode:"view",key:"dateAndAuthorPosition",value:"left",fieldId:"vars"},{type:"AppPartCustomization",forType:"Post",view:"SinglePostMediaBottom",mode:"view",key:"layout.spacerAfter",value:"10",fieldId:"def_10"},{type:"AppPartCustomization",forType:"Post",view:"SinglePostMediaBottom",mode:"view",key:"layout.spacerBefore",value:"16",fieldId:"def_9"},{type:"AppPartCustomization",forType:"Post",view:"SinglePostMediaBottom",mode:"view",key:"comp.size",value:"12",fieldId:"socialIconsSpacer"},{type:"AppPartCustomization",forType:"Post",view:"SinglePostMediaBottom",mode:"view",key:"layout.spacerBefore",value:"0",fieldId:"GoogleShare"},{type:"AppPartCustomization",forType:"Post",view:"SinglePostMediaBottom",mode:"view",key:"layout.spacerAfter",value:"12",fieldId:"this"},{type:"AppPartCustomization",forType:"Post",view:"SinglePostMediaTop",mode:"*",key:"comp.size",value:"12",fieldId:"socialIconsSpacer"},{type:"AppPartCustomization",forType:"Post",view:"SinglePostMediaTop",mode:"view",key:"layout.spacerAfter",value:"12",fieldId:"this"},{type:"AppPartCustomization",forType:"Post",view:"SinglePostMediaTop",mode:"view",key:"layout.spacerAfter",value:"10",fieldId:"def_10"},{type:"AppPartCustomization",forType:"Post",view:"SinglePostMediaTop",mode:"view",key:"layout.spacerBefore",value:"16",fieldId:"def_9"},{type:"AppPartCustomization",forType:"Post",view:"SinglePostMediaTop",mode:"view",key:"layout.spacerBefore",value:"14",fieldId:"def_15"},{type:"AppPartCustomization",forType:"Post",view:"SinglePostMediaBottom",mode:"view",key:"layout.spacerBefore",value:"14",fieldId:"def_15"},{type:"AppPartCustomization",forType:"Post",view:"SinglePostMediaBottom",mode:"*",key:"padding",value:"15",fieldId:"vars"},{type:"AppPartCustomization",forType:"Post",view:"SinglePostMediaTop",mode:"*",key:"padding",value:"20",fieldId:"vars"},{type:"AppPartCustomization",forType:"Post",view:"SinglePostMediaTop",mode:"view",key:"comp.style",value:"c1",fieldId:"def_1"},{forType:"Post",fieldId:"vars",key:"selectionSharerExperimentOpen",view:"SinglePostMediaTop",type:"AppPartCustomization",format:"",value:"false"}],appLogicParams:{},id:"#dataItem-inpouujz1"},props:{type:"AppPartProperties",metaData:{schemaVersion:"1.0"},direction:"ltr",id:"propItem-inpouuk0"},style:"blog_4656a63c-b316-4315-ab16-e2003f5935ca_1"},{type:"Component",id:"comp-inpouuk1",skin:"skins.core.FacebookCommentSkin",layout:{width:667,height:180,x:30,y:1812,scale:1,rotationInDegrees:0,anchors:[{distance:0,originalValue:895,type:"BOTTOM_PARENT",locked:!0,targetComponent:"yk43n"}],fixedPosition:!1},componentType:"wysiwyg.viewer.components.WFacebookComment",data:{type:"WFacebookComment",metaData:{isPreset:!1,schemaVersion:"1.0",isHidden:!1},urlFormat:"hashBang",id:"#dataItem-inpouuos"},props:{type:"WFacebookCommentProperties",metaData:{schemaVersion:"1.0"},numPosts:2,width:667,colorScheme:"light",canBeShownOnAllPagesBug:!1,id:"propItem-inpouuk11"},style:"fbc1"},{type:"Component",id:"comp-inpouuk4",skin:"wysiwyg.viewer.skins.WRichTextNewSkin",layout:{width:220,height:20,x:729,y:939,scale:1,rotationInDegrees:0,anchors:[{distance:12,originalValue:826,type:"BOTTOM_TOP",locked:!0,targetComponent:"comp-inpouuko"}],fixedPosition:!1},componentType:"wysiwyg.viewer.components.WRichText",data:{type:"StyledText",metaData:{isPreset:!1,schemaVersion:"1.0",isHidden:!1},text:'<h6 style="line-height: 1.4em;" class="font_6"><span style="line-height: 1.4em;">Follow Us</span></h6>\n',stylesMapId:"CK_EDITOR_PARAGRAPH_STYLES",linkList:[],id:"#dataItem-inpouuk41"},style:"txtNew"},{type:"Component",id:"comp-inpouuk6",skin:"wysiwyg.viewer.skins.AppPartSkin",layout:{width:220,height:52,x:729,y:858,scale:1,rotationInDegrees:0,anchors:[{distance:29,originalValue:794,type:"BOTTOM_TOP",locked:!0,targetComponent:"comp-inpouuk4"}],fixedPosition:!1},componentType:"wixapps.integration.components.AppPart",data:{type:"AppPart",metaData:{isPreset:!1,schemaVersion:"1.0",isHidden:!1},appInnerID:"19",appPartName:"e000b4bf-9ff1-4e66-a0d3-d4b365ba3af5",viewName:"TagCloud",appLogicCustomizations:[{type:"AppPartCustomization",forType:"Array",view:"TagCloud",mode:"*",key:"comp.size",value:"8",fieldId:"mainTitleSpace"},{type:"AppPartCustomization",forType:"Array",view:"TagCloud",mode:"*",key:"value",value:"Search by tags",fieldId:"title",format:"*"},{type:"AppPartCustomization",forType:"wix:Object",view:"TagCloud",mode:"view",key:"layout.spacerAfter",value:"6",fieldId:"key"},{type:"AppPartCustomization",forType:"Array",view:"TagCloud",mode:"view",key:"comp.size",value:"8",fieldId:"mainTitleSpace"},{type:"AppPartCustomization",forType:"wix:Object",view:"TagCloud",mode:"*",key:"fixedSize",value:"true",fieldId:"vars"}],appLogicParams:{},id:"#dataItem-inpouuk61"},props:{type:"AppPartProperties",metaData:{schemaVersion:"1.0"},direction:"ltr",id:"propItem-inpouuk62"},style:"blog_e000b4bf-9ff1-4e66-a0d3-d4b365ba3af5_1"},{type:"Component",id:"comp-inpouuk8",skin:"wysiwyg.viewer.skins.WRichTextNewSkin",layout:{width:220,height:32,x:729,y:817,scale:1,rotationInDegrees:0,anchors:[{distance:2,originalValue:734,type:"BOTTOM_TOP",locked:!0,targetComponent:"comp-inpouukq"}],fixedPosition:!1},componentType:"wysiwyg.viewer.components.WRichText",data:{type:"StyledText",metaData:{isPreset:!1,schemaVersion:"1.0",isHidden:!1},text:'<h6 style="line-height: 1.4em;" class="font_6"><span style="line-height: 1.4em;">Search By Tags</span></h6>\n',stylesMapId:"CK_EDITOR_PARAGRAPH_STYLES",linkList:[],id:"#dataItem-inpouuk9"},style:"txtNew"},{type:"Component",id:"comp-inpouuka",skin:"wysiwyg.viewer.skins.AppPartSkin",layout:{width:210,height:99,x:729,y:699,scale:1,rotationInDegrees:0,anchors:[{distance:19,originalValue:700,type:"BOTTOM_TOP",locked:!0,targetComponent:"comp-inpouuk8"}],fixedPosition:!1},componentType:"wixapps.integration.components.AppPart",data:{type:"AppPart",metaData:{isPreset:!1,schemaVersion:"1.0",isHidden:!1},appInnerID:"19",appPartName:"56ab6fa4-95ac-4391-9337-6702b8a77011",viewName:"ArchiveList",appLogicCustomizations:[],appLogicParams:{},id:"#dataItem-inpouuke"},props:{type:"AppPartProperties",metaData:{schemaVersion:"1.0"},direction:"ltr",id:"propItem-inpouuke1"},style:"blog_56ab6fa4-95ac-4391-9337-6702b8a77011_1"},{type:"Component",id:"comp-inpouukf",skin:"wysiwyg.viewer.skins.WRichTextNewSkin",layout:{width:220,height:33,x:729,y:658,scale:1,rotationInDegrees:0,anchors:[{distance:1,originalValue:643,type:"BOTTOM_TOP",locked:!0,targetComponent:"comp-inpouukr"}],fixedPosition:!1},componentType:"wysiwyg.viewer.components.WRichText",data:{type:"StyledText",metaData:{isPreset:!1,schemaVersion:"1.0",isHidden:!1},text:'<h6 style="line-height: 1.4em;" class="font_6"><span style="line-height: 1.4em;">Archive</span></h6>\n',stylesMapId:"CK_EDITOR_PARAGRAPH_STYLES",linkList:[],id:"#dataItem-inpouukg"},style:"txtNew"},{type:"Component",id:"comp-inpouukh",skin:"wysiwyg.viewer.skins.LinkBarNoBGSkin",layout:{width:83,height:23,x:729,y:990,scale:1,rotationInDegrees:0,anchors:[{distance:0,originalValue:895,type:"BOTTOM_PARENT",locked:!0,targetComponent:"yk43n"}],fixedPosition:!1},componentType:"wysiwyg.viewer.components.LinkBar",data:{type:"ImageList",metaData:{isPreset:!1,schemaVersion:"1.0",isHidden:!1},items:[{type:"Image",metaData:{isPreset:!1,schemaVersion:"2.0",isHidden:!1},title:"Facebook Basic Square",uri:"8f2083b7f516bc701941adb38381e2d6.jpg",description:"",width:205,height:205,alt:"",link:{type:"ExternalLink",metaData:{isPreset:!1,schemaVersion:"1.0",isHidden:!1},url:"http://www.facebook.com/wix",target:"_blank"}},{type:"Image",metaData:{isPreset:!1,schemaVersion:"2.0",isHidden:!1},title:"Twitter Basic Square",uri:"8f6184c574cd183c5723c8eef9126a8d.jpg",description:"",width:205,height:205,alt:"",link:{type:"ExternalLink",metaData:{isPreset:!1,schemaVersion:"1.0",isHidden:!1},url:"http://www.twitter.com/wix",target:"_blank"}},{type:"Image",metaData:{isPreset:!1,schemaVersion:"2.0",isHidden:!1},title:"Google+ Basic Square",uri:"c29173e8ee518913a44ba4d87120a664.jpg",description:"",width:205,height:205,alt:"",link:{type:"ExternalLink",metaData:{isPreset:!1,schemaVersion:"1.0",isHidden:!1},url:"https://plus.google.com/117167403531518744294/posts",target:"_blank"}}],id:"#dataItem-inpouukh1"},props:{type:"LinkBarProperties",metaData:{schemaVersion:"1.0"},gallery:"social_icons",iconSize:23,spacing:7,bgScale:1,orientation:"HORIZ",id:"propItem-inpouukj2"},style:"lb1"},{type:"Component",id:"comp-inpouuko",skin:"wysiwyg.viewer.skins.line.SolidLine",layout:{width:220,height:5,x:729,y:976,scale:1,rotationInDegrees:0,anchors:[{distance:9,originalValue:840,type:"BOTTOM_TOP",locked:!0,targetComponent:"comp-inpouukh"}],fixedPosition:!1},componentType:"wysiwyg.viewer.components.FiveGridLine",props:{type:"FiveGridLineProperties",metaData:{schemaVersion:"1.0"},fullScreenModeOn:!1,id:"propItem-inpouuko1"},style:"hl1"},{type:"Component",id:"comp-inpouukq",skin:"wysiwyg.viewer.skins.line.SolidLine",layout:{width:220,height:5,x:729,y:851,scale:1,rotationInDegrees:0,anchors:[{distance:2,originalValue:741,type:"BOTTOM_TOP",locked:!0,targetComponent:"comp-inpouuk6"}],fixedPosition:!1},componentType:"wysiwyg.viewer.components.FiveGridLine",props:{type:"FiveGridLineProperties",metaData:{schemaVersion:"1.0"},fullScreenModeOn:!1,id:"propItem-inpouukq1"},style:"hl1"},{type:"Component",id:"comp-inpouukr",skin:"wysiwyg.viewer.skins.line.SolidLine",layout:{width:220,height:5,x:729,y:692,scale:1,rotationInDegrees:0,anchors:[{distance:2,originalValue:650,type:"BOTTOM_TOP",locked:!0,targetComponent:"comp-inpouuka"}],fixedPosition:!1},componentType:"wysiwyg.viewer.components.FiveGridLine",props:{type:"FiveGridLineProperties",metaData:{schemaVersion:"1.0"},fullScreenModeOn:!1,id:"propItem-inpouuks"},style:"hl1"}]},b={name:"Blog",isTpa:!0,forContent:["Blog"],contentType:"Blog",presetPreview:"",isList:!1,isBlog:!0,blogStructure:{singlePost:[{type:"Component",skin:"wysiwyg.viewer.skins.AppPartSkin",layout:{width:560,height:674,x:20,y:60,scale:1,rotationInDegrees:0,anchors:[{distance:64,originalValue:798,type:"BOTTOM_TOP",locked:!0,targetComponent:"comp-inhakxq4"}],fixedPosition:!1},componentType:"wixapps.integration.components.AppPart",data:{type:"AppPart",metaData:{isPreset:!1,schemaVersion:"1.0",isHidden:!1},appInnerID:"18",appPartName:"ea63bc0f-c09f-470c-ac9e-2a408b499f22",viewName:"SinglePostMediaTop",appLogicCustomizations:[{type:"AppPartCustomization",forType:"Post",view:"SinglePostMediaTop",key:"comp.bold",value:"true",fieldId:"tagsValue",format:"*"},{type:"AppPartCustomization",forType:"Post",view:"SinglePostMediaTop",key:"comp.bold",value:"true",fieldId:"this",format:"*"},{type:"AppPartCustomization",forType:"Post",view:"SinglePostMediaTop",key:"comp.hidden",value:"false",fieldId:"GoogleShare",format:"*"},{type:"AppPartCustomization",forType:"Post",view:"SinglePostMediaTop",key:"comp.style",value:"style-iniy4ulz",fieldId:"FacebookShareImg",format:"*"},{type:"AppPartCustomization",forType:"Post",view:"SinglePostMediaTop",key:"comp.style",value:"style-iniy4ulz",fieldId:"TwitterShareImg",format:"*"},{type:"AppPartCustomization",forType:"Post",view:"SinglePostMediaTop",key:"comp.style",value:"style-iniy4ulz",
fieldId:"PinterestShareImg",format:"*"},{type:"AppPartCustomization",forType:"Post",view:"SinglePostMediaTop",key:"comp.style",value:"style-iniy4ulz",fieldId:"FancyShareImg",format:"*"},{type:"AppPartCustomization",forType:"Post",view:"SinglePostMediaTop",key:"comp.style",value:"style-iniy4ulz",fieldId:"GoogleShareImg",format:"*"},{type:"AppPartCustomization",forType:"Post",view:"SinglePostMediaTop",key:"comp.hidden",value:"true",fieldId:"tagsBox",format:"*"},{type:"AppPartCustomization",forType:"Post",view:"SinglePostMediaTop",key:"comp.hidden",value:"true",fieldId:"categories",format:"*"},{type:"AppPartCustomization",forType:"Post",view:"SinglePostMediaTop",key:"comp.italic",value:"true",fieldId:"tagsValue",format:"*"},{type:"AppPartCustomization",forType:"Post",view:"SinglePostMediaTop",key:"comp.italic",value:"true",fieldId:"this",format:"*"},{type:"AppPartCustomization",forType:"Post",view:"SinglePostMediaTop",key:"value",value:"TAGS:",fieldId:"tagsValue",format:"*"},{type:"AppPartCustomization",forType:"Post",view:"SinglePostMediaTop",key:"comp.style",value:"Body S",fieldId:"mediaText",format:"*"},{type:"AppPartCustomization",forType:"Post",view:"SinglePostMediaTop",key:"comp.hidden",value:"false",fieldId:"dateAndAuthor",format:"*"},{type:"AppPartCustomization",forType:"Post",view:"SinglePostMediaTop",key:"comp.style",value:"Body S",fieldId:"tagsValue",format:"*"},{type:"AppPartCustomization",forType:"Post",view:"SinglePostMediaTop",key:"comp.style",value:"Body S",fieldId:"this",format:"*"},{type:"AppPartCustomization",forType:"Post",view:"CategoriesList",key:"comp.style",value:"b1",fieldId:"category",format:"*"},{type:"AppPartCustomization",forType:"Post",view:"SinglePostMediaTop",key:"comp.bold",value:"false",fieldId:"title",format:"*"},{type:"AppPartCustomization",forType:"Post",view:"SinglePostMediaTop",key:"comp.style",value:"Page title",fieldId:"title",format:"*"},{type:"AppPartCustomization",forType:"Post",view:"SinglePostMediaTop",key:"comp.italic",value:"true",fieldId:"byValue",format:"*"},{type:"AppPartCustomization",forType:"Post",view:"SinglePostMediaTop",key:"comp.italic",value:"true",fieldId:"author",format:"*"},{type:"AppPartCustomization",forType:"Post",view:"SinglePostMediaTop",key:"comp.italic",value:"true",fieldId:"date",format:"*"},{type:"AppPartCustomization",forType:"Post",view:"SinglePostMediaTop",mode:"*",key:"comp.hidden",value:"true",fieldId:"TwitterShare",format:"*"},{type:"AppPartCustomization",forType:"Post",view:"SinglePostMediaTop",mode:"*",key:"comp.hidden",value:"true",fieldId:"FancyShare",format:"*"},{type:"AppPartCustomization",forType:"Post",view:"SinglePostMediaTop",mode:"view",key:"comp.style",value:"Body M",fieldId:"text",format:"*"},{type:"AppPartCustomization",forType:"PhotoPost",view:"SinglePostMediaInner",mode:"view",key:"comp.style",value:"wp2",fieldId:"photo",format:"*"},{type:"AppPartCustomization",forType:"Post",view:"SinglePostMediaBottom",mode:"view",key:"comp.style",value:"Body M",fieldId:"text",format:"*"},{type:"AppPartCustomization",forType:"Post",view:"SinglePostMediaBottom",mode:"view",key:"comp.style",value:"Body S",fieldId:"date",format:"*"},{type:"AppPartCustomization",forType:"Post",view:"SinglePostMediaBottom",mode:"view",key:"comp.style",value:"Heading M",fieldId:"title",format:"*"},{type:"AppPartCustomization",forType:"Post",view:"SinglePostMediaBottom",mode:"view",key:"comp.style",value:"Body M",fieldId:"def_10"},{type:"AppPartCustomization",forType:"Post",view:"SinglePostMediaBottom",mode:"view",key:"dateAndAuthorPosition",value:"left",fieldId:"vars"},{type:"AppPartCustomization",forType:"Post",view:"SinglePostMediaBottom",mode:"view",key:"layout.spacerAfter",value:"10",fieldId:"def_10"},{type:"AppPartCustomization",forType:"Post",view:"SinglePostMediaBottom",mode:"view",key:"layout.spacerBefore",value:"16",fieldId:"def_9"},{type:"AppPartCustomization",forType:"Post",view:"SinglePostMediaBottom",mode:"view",key:"comp.size",value:"12",fieldId:"socialIconsSpacer"},{type:"AppPartCustomization",forType:"Post",view:"SinglePostMediaBottom",mode:"view",key:"layout.spacerBefore",value:"0",fieldId:"GoogleShare"},{type:"AppPartCustomization",forType:"Post",view:"SinglePostMediaBottom",mode:"view",key:"layout.spacerAfter",value:"12",fieldId:"this"},{type:"AppPartCustomization",forType:"Post",view:"SinglePostMediaTop",mode:"*",key:"comp.size",value:"12",fieldId:"socialIconsSpacer"},{type:"AppPartCustomization",forType:"Post",view:"SinglePostMediaTop",mode:"view",key:"layout.spacerAfter",value:"12",fieldId:"this"},{type:"AppPartCustomization",forType:"Post",view:"SinglePostMediaTop",mode:"view",key:"layout.spacerAfter",value:"10",fieldId:"def_10"},{type:"AppPartCustomization",forType:"Post",view:"SinglePostMediaTop",mode:"view",key:"layout.spacerBefore",value:"16",fieldId:"def_9"},{type:"AppPartCustomization",forType:"Post",view:"SinglePostMediaTop",mode:"view",key:"layout.spacerBefore",value:"14",fieldId:"def_15"},{type:"AppPartCustomization",forType:"Post",view:"SinglePostMediaBottom",mode:"view",key:"layout.spacerBefore",value:"14",fieldId:"def_15"},{type:"AppPartCustomization",forType:"Post",view:"SinglePostMediaBottom",mode:"*",key:"padding",value:"15",fieldId:"vars"},{type:"AppPartCustomization",forType:"Post",view:"SinglePostMediaTop",mode:"*",key:"padding",value:"20",fieldId:"vars"},{type:"AppPartCustomization",forType:"Post",view:"SinglePostMediaTop",key:"iconSize",value:"25",fieldId:"vars",format:""},{type:"AppPartCustomization",forType:"Post",view:"SinglePostMediaTop",key:"padding",value:"5",fieldId:"vars",format:""},{type:"AppPartCustomization",forType:"Post",view:"SinglePostMediaTop",key:"comp.size",value:"10",fieldId:"socialIconsSpacer",format:""},{type:"AppPartCustomization",forType:"Post",view:"SinglePostMediaTop",key:"layout.spacerBefore",value:"0",fieldId:"GoogleShare",format:""},{type:"AppPartCustomization",forType:"Post",view:"SinglePostMediaTop",mode:"view",key:"comp.style",value:"c1",fieldId:"def_1"},{type:"AppPartCustomization",forType:"Post",view:"SinglePostMediaTop",key:"selectionSharerExperimentOpen",value:"false",fieldId:"vars",format:""}],appLogicParams:{}},props:{type:"AppPartProperties",metaData:{schemaVersion:"1.0"},direction:"ltr"},style:"blog_4656a63c-b316-4315-ab16-e2003f5935ca_1"},{type:"Component",skin:"skins.core.FacebookCommentSkin",layout:{width:565,height:173,x:17,y:798,scale:1,rotationInDegrees:0,anchors:[{distance:0,originalValue:1031,type:"BOTTOM_PARENT",locked:!0,targetComponent:"gof39"}],fixedPosition:!1},componentType:"wysiwyg.viewer.components.WFacebookComment",data:{type:"WFacebookComment",metaData:{isPreset:!1,schemaVersion:"1.0",isHidden:!1},urlFormat:"hashBang"},props:{type:"WFacebookCommentProperties",metaData:{schemaVersion:"1.0"},numPosts:2,width:565,colorScheme:"light",canBeShownOnAllPagesBug:!1},style:"fbc1"},{type:"Component",skin:"wysiwyg.viewer.skins.AppPartSkin",layout:{width:300,height:233,x:660,y:171,scale:1,rotationInDegrees:0,anchors:[{distance:-1,originalValue:403,type:"BOTTOM_TOP",locked:!0,targetComponent:"comp-inuhtmv7"}],fixedPosition:!1},componentType:"wixapps.integration.components.AppPart",data:{type:"AppPart",metaData:{isPreset:!1,schemaVersion:"1.0",isHidden:!1},appInnerID:"18",appPartName:"f72fe377-8abc-40f2-8656-89cfe00f3a22",viewName:"PostsListMediaLeft",appLogicCustomizations:[{type:"AppPartCustomization",forType:"Post",view:"PostsListMediaLeft",key:"comp.italic",value:"true",fieldId:"date",format:"*"},{type:"AppPartCustomization",forType:"Post",view:"PostsListMediaLeft",key:"comp.style",value:"Body M",fieldId:"title",format:"*"},{type:"AppPartCustomization",forType:"Post",view:"PostsListMediaLeft",key:"comp.style",value:"Body S",fieldId:"date",format:"*"},{type:"AppPartCustomization",forType:"Post",view:"PostsListMediaLeft",key:"comp.max-chars",value:"50",fieldId:"title",format:""},{type:"AppPartCustomization",forType:"Post",view:"PostsListMediaLeft",key:"postSpacing",value:"25",fieldId:"vars",format:""},{type:"AppPartCustomization",forType:"Post",view:"PostsListMediaLeft",key:"layout.width",value:"70",fieldId:"MediaSize",format:""}],appLogicParams:{categoryNames:{type:"AppPartParam",value:'["Recent"]'},filter:{type:"AppPartParam",value:"{}"}}},props:{type:"AppPartProperties",metaData:{schemaVersion:"1.0"},direction:"ltr"},style:"blog_f72fe377-8abc-40f2-8656-89cfe00f3a22_1"},{type:"Component",skin:"wysiwyg.viewer.skins.line.SolidLine",layout:{width:300,height:5,x:660,y:403,scale:1,rotationInDegrees:0,anchors:[{distance:15,originalValue:423,type:"BOTTOM_TOP",locked:!0,targetComponent:"comp-inuhtmv71"}],fixedPosition:!1},componentType:"wysiwyg.viewer.components.FiveGridLine",props:{type:"FiveGridLineProperties",metaData:{schemaVersion:"1.0"},fullScreenModeOn:!1},style:{type:"TopLevelStyle",metaData:{isPreset:!1,schemaVersion:"1.0",isHidden:!1},style:{properties:{"alpha-brd":"1",brd:"color_15",lnw:"1px"},propertiesSource:{"alpha-brd":"value",brd:"theme",lnw:"value"},groups:{}},componentClassName:"wysiwyg.viewer.components.FiveGridLine",pageId:"",compId:"",styleType:"custom",skin:"wysiwyg.viewer.skins.line.SolidLine"}},{type:"Component",skin:"wysiwyg.viewer.skins.AppPartSkin",layout:{width:300,height:108,x:660,y:423,scale:1,rotationInDegrees:0,anchors:[{distance:10,originalValue:541,type:"BOTTOM_TOP",locked:!0,targetComponent:"comp-inuhtmv72"}],fixedPosition:!1},componentType:"wixapps.integration.components.AppPart",data:{type:"AppPart",metaData:{isPreset:!1,schemaVersion:"1.0",isHidden:!1},appInnerID:"18",appPartName:"56ab6fa4-95ac-4391-9337-6702b8a77011",viewName:"ArchiveList",appLogicCustomizations:[{type:"AppPartCustomization",forType:"Option",view:"ArchiveList",key:"comp.italic",value:"true",fieldId:"date",format:"*"},{type:"AppPartCustomization",forType:"Option",view:"ArchiveList",key:"comp.style",value:"Body S",fieldId:"date",format:"*"},{type:"AppPartCustomization",forType:"Option",view:"ArchiveList",key:"comp.hidden",value:"true",fieldId:"itemSeparator",format:"*"},{type:"AppPartCustomization",forType:"Option",view:"ArchiveList",key:"showItemsCount",value:"false",fieldId:"vars",format:""}],appLogicParams:{}},props:{type:"AppPartProperties",metaData:{schemaVersion:"1.0"},direction:"ltr"},style:"blog_56ab6fa4-95ac-4391-9337-6702b8a77011_1"},{type:"Component",skin:"wysiwyg.viewer.skins.line.SolidLine",layout:{width:300,height:5,x:660,y:541,scale:1,rotationInDegrees:0,anchors:[{distance:13,originalValue:559,type:"BOTTOM_TOP",locked:!0,targetComponent:"comp-inuhtmv73"}],fixedPosition:!1},componentType:"wysiwyg.viewer.components.FiveGridLine",props:{type:"FiveGridLineProperties",metaData:{schemaVersion:"1.0"},fullScreenModeOn:!1},style:{type:"TopLevelStyle",metaData:{isPreset:!1,schemaVersion:"1.0",isHidden:!1},style:{properties:{"alpha-brd":"1",brd:"color_15",lnw:"1px"},propertiesSource:{"alpha-brd":"value",brd:"theme",lnw:"value"},groups:{}},componentClassName:"wysiwyg.viewer.components.FiveGridLine",pageId:"",compId:"",styleType:"custom",skin:"wysiwyg.viewer.skins.line.SolidLine"}},{type:"Component",skin:"wysiwyg.viewer.skins.AppPartSkin",layout:{width:300,height:78,x:660,y:559,scale:1,rotationInDegrees:0,anchors:[{distance:0,originalValue:1031,type:"BOTTOM_PARENT",locked:!0,targetComponent:"gof39"}],fixedPosition:!1},componentType:"wixapps.integration.components.AppPart",data:{type:"AppPart",metaData:{isPreset:!1,schemaVersion:"1.0",isHidden:!1},appInnerID:"18",appPartName:"e000b4bf-9ff1-4e66-a0d3-d4b365ba3af5",viewName:"TagCloud",appLogicCustomizations:[{type:"AppPartCustomization",forType:"wix:Object",view:"TagCloud",key:"comp.italic",value:"true",fieldId:"key",format:"*"}],appLogicParams:{}},props:{type:"AppPartProperties",metaData:{schemaVersion:"1.0"},direction:"ltr"},style:"blog_e000b4bf-9ff1-4e66-a0d3-d4b365ba3af5_1"}],feed:[{type:"Component",id:"comp-inhakxo6",skin:"wysiwyg.viewer.skins.AppPartSkin",layout:{width:560,height:3959,x:20,y:60,scale:1,rotationInDegrees:0,anchors:[{distance:911,originalValue:971,type:"TOP_TOP",locked:!0,targetComponent:"comp-iompfo6y"},{distance:0,originalValue:4079,type:"BOTTOM_PARENT",locked:!0,targetComponent:"wf2kw"}],fixedPosition:!1},componentType:"wixapps.integration.components.AppPart",data:{type:"AppPart",metaData:{isPreset:!1,schemaVersion:"1.0",isHidden:!1},appInnerID:"18",appPartName:"4de5abc5-6da2-4f97-acc3-94bb74285072",viewName:"MediaTopPage",appLogicCustomizations:[{type:"AppPartCustomization",forType:"Post",view:"MediaTopPage",key:"comp.style",value:"b1",fieldId:"ReadMoreBtn",format:"*"},{type:"AppPartCustomization",forType:"Post",view:"MediaTopPage",key:"layout.width",value:"120",fieldId:"ReadMoreBtn",format:"*"},{type:"AppPartCustomization",forType:"Post",view:"MediaTopPage",key:"comp.style",value:"c1",fieldId:"def_2",format:"*"},{type:"AppPartCustomization",forType:"Post",view:"MediaTopPage",key:"comp.hidden",value:"true",fieldId:"categories",format:"*"},{type:"AppPartCustomization",forType:"Post",view:"MediaTopPage",key:"readMorePosition",value:"left",fieldId:"vars",format:"*"},{type:"AppPartCustomization",forType:"Post",view:"MediaTopPage",key:"comp.italic",value:"true",fieldId:"byValue",format:"*"},{type:"AppPartCustomization",forType:"Post",view:"MediaTopPage",key:"comp.italic",value:"true",fieldId:"author",format:"*"},{type:"AppPartCustomization",forType:"Post",view:"MediaTopPage",key:"comp.italic",value:"true",fieldId:"date",format:"*"},{type:"AppPartCustomization",forType:"Post",view:"MediaTopPage",key:"comp.style",value:"Body S",fieldId:"text",format:"*"},{type:"AppPartCustomization",forType:"Post",view:"MediaBottomPage",key:"comp.style",value:"b1",fieldId:"ReadMoreBtn",format:"*"},{type:"AppPartCustomization",forType:"Post",view:"MediaBottomPage",key:"comp.hidden",value:"false",fieldId:"media",format:"*"},{type:"AppPartCustomization",forType:"Post",view:"CategoriesList",key:"comp.style",value:"style-inhb0qrw",fieldId:"category",format:"*"},{type:"AppPartCustomization",forType:"Post",view:"MediaBottomPage",key:"comp.italic",value:"true",fieldId:"byValue",format:"*"},{type:"AppPartCustomization",forType:"Post",view:"MediaBottomPage",key:"comp.italic",value:"true",fieldId:"author",format:"*"},{type:"AppPartCustomization",forType:"Post",view:"MediaBottomPage",key:"comp.italic",value:"true",fieldId:"date",format:"*"},{type:"AppPartCustomization",forType:"Post",view:"MediaBottomPage",key:"comp.style",value:"Body S",fieldId:"text",format:"*"},{type:"AppPartCustomization",forType:"Post",view:"MediaBottomPage",key:"readMorePosition",value:"left",fieldId:"vars",format:"*"},{type:"AppPartCustomization",forType:"Post",view:"MediaLeftPage",mode:"view",key:"comp.style",value:"Body S",fieldId:"date",format:"*"},{type:"AppPartCustomization",forType:"Post",view:"MediaZigzagPage",mode:"view",key:"comp.style",value:"Heading M",fieldId:"title",format:"*"},{type:"AppPartCustomization",forType:"Post",view:"MediaRightPage",mode:"view",key:"comp.style",value:"Heading M",fieldId:"title",format:"*"},{type:"AppPartCustomization",forType:"Post",view:"MediaBottomPage",mode:"view",key:"comp.style",value:"Page title",fieldId:"title",format:"*"},{type:"AppPartCustomization",forType:"Post",view:"MediaTopPage",mode:"view",key:"comp.style",value:"Page title",fieldId:"title",format:"*"},{type:"AppPartCustomization",forType:"Post",view:"MediaLeftPage",mode:"view",key:"comp.style",value:"Heading M",fieldId:"title",format:"*"},{type:"AppPartCustomization",forType:"Post",view:"MediaZigzagPage",mode:"view",key:"comp.style",value:"Body S",fieldId:"date",format:"*"},{type:"AppPartCustomization",forType:"Post",view:"MediaRightPage",mode:"view",key:"comp.style",value:"Body S",fieldId:"date",format:"*"},{type:"AppPartCustomization",forType:"Post",view:"MediaBottomPage",mode:"view",key:"comp.style",value:"Body S",fieldId:"date",format:"*"},{type:"AppPartCustomization",forType:"Post",view:"MediaTopPage",mode:"view",key:"comp.style",value:"Body S",fieldId:"date",format:"*"},{type:"AppPartCustomization",forType:"Post",view:"MediaTop",mode:"view",key:"comp.style",value:"Body S",fieldId:"date",format:"*"},{type:"AppPartCustomization",forType:"Post",view:"MediaRight",mode:"view",key:"comp.style",value:"Body S",fieldId:"date",format:"*"},{type:"AppPartCustomization",forType:"Post",view:"MediaZigzag",mode:"view",key:"comp.style",value:"Body M",fieldId:"ReadMoreBtn",format:"*"},{type:"AppPartCustomization",forType:"Post",view:"MediaZigzag",mode:"view",key:"comp.style",value:"Body M",fieldId:"text",format:"*"},{type:"AppPartCustomization",forType:"Post",view:"MediaZigzag",mode:"view",key:"comp.style",value:"Body S",fieldId:"date",format:"*"},{type:"AppPartCustomization",forType:"Post",view:"MediaZigzag",mode:"view",key:"comp.style",value:"Heading M",fieldId:"title",format:"*"},{type:"AppPartCustomization",forType:"Post",view:"MediaRight",mode:"view",key:"comp.style",value:"Body M",fieldId:"text",format:"*"},{type:"AppPartCustomization",forType:"Post",view:"MediaRight",mode:"view",key:"comp.style",value:"Heading M",fieldId:"title",format:"*"},{type:"AppPartCustomization",forType:"Post",view:"MediaBottom",mode:"view",key:"comp.style",value:"Body S",fieldId:"date",format:"*"},{type:"AppPartCustomization",forType:"Post",view:"MediaLeft",mode:"view",key:"comp.style",value:"Body S",fieldId:"date",format:"*"},{type:"AppPartCustomization",forType:"VideoPost",view:"MediaInner",mode:"view",key:"comp.style",value:"v1",fieldId:"videoPlayable",format:"*"},{type:"AppPartCustomization",forType:"VideoPost",view:"MediaInner",mode:"view",key:"comp.style",value:"wp2",fieldId:"video",format:"*"},{type:"AppPartCustomization",forType:"PhotoPost",view:"MediaInner",mode:"view",key:"comp.style",value:"wp2",fieldId:"photo",format:"*"},{type:"AppPartCustomization",forType:"Post",view:"MediaLeft",mode:"view",key:"comp.style",value:"Body M",fieldId:"text",format:"*"},{type:"AppPartCustomization",forType:"Post",view:"MediaTop",mode:"view",key:"comp.style",value:"Heading M",fieldId:"title",format:"*"},{type:"AppPartCustomization",forType:"Post",view:"MediaLeft",mode:"view",key:"comp.style",value:"Heading M",fieldId:"title",format:"*"},{type:"AppPartCustomization",forType:"Post",view:"MediaBottom",mode:"view",key:"comp.style",value:"Body M",fieldId:"text",format:"*"},{type:"AppPartCustomization",forType:"Post",view:"MediaTop",mode:"view",key:"comp.style",value:"Body M",fieldId:"ReadMoreBtn",format:"*"},{type:"AppPartCustomization",forType:"Post",view:"MediaTop",mode:"view",key:"comp.style",value:"Body M",fieldId:"text",format:"*"},{type:"AppPartCustomization",forType:"Post",view:"MediaTop",mode:"view",key:"layout.spacerBefore",value:"14",fieldId:"def_13"},{type:"AppPartCustomization",forType:"Post",view:"MediaBottom",mode:"*",key:"padding",value:"22",fieldId:"vars"},{type:"AppPartCustomization",forType:"Post",view:"MediaTop",mode:"view",key:"layout.spacerAfter",value:"22",fieldId:"WholePost"},{type:"AppPartCustomization",forType:"Post",view:"MediaBottom",mode:"view",key:"comp.size",value:"16",fieldId:"PostSpace"},{type:"AppPartCustomization",forType:"Post",view:"MediaBottom",mode:"view",key:"dateAndAuthorPosition",value:"left",fieldId:"vars"},{type:"AppPartCustomization",forType:"Post",view:"MediaBottom",mode:"view",key:"layout.spacerBefore",value:"12",fieldId:"def_11"},{type:"AppPartCustomization",forType:"Post",view:"MediaBottom",mode:"view",key:"layout.spacerAfter",value:"0",fieldId:"def_11"},{type:"AppPartCustomization",forType:"Post",view:"MediaLeft",mode:"*",key:"padding",value:"22",fieldId:"vars"},{type:"AppPartCustomization",forType:"Post",view:"MediaLeft",mode:"*",key:"comp.size",value:"16",fieldId:"PostSpace"},{type:"AppPartCustomization",forType:"Post",view:"MediaTop",mode:"*",key:"padding",value:"22",fieldId:"vars"},{type:"AppPartCustomization",forType:"Post",view:"MediaLeft",mode:"*",key:"layout.width",value:"254",fieldId:"MediaSize"},{type:"AppPartCustomization",forType:"Post",view:"MediaRight",mode:"*",key:"padding",value:"22",fieldId:"vars"},{type:"AppPartCustomization",forType:"Post",view:"MediaRight",mode:"*",key:"layout.width",value:"254",fieldId:"MediaSize"},{type:"AppPartCustomization",forType:"Post",view:"MediaZigzag",mode:"*",key:"comp.size",value:"16",fieldId:"PostSpace"},{type:"AppPartCustomization",forType:"Post",view:"MediaZigzag",mode:"*",key:"padding",value:"22",fieldId:"vars"},{type:"AppPartCustomization",forType:"Post",view:"MediaZigzag",mode:"*",key:"layout.width",value:"254",fieldId:"MediaSize"},{type:"AppPartCustomization",forType:"Post",view:"MediaBottom",mode:"*",key:"comp.size",value:"16",fieldId:"PostSpace"},{type:"AppPartCustomization",forType:"Post",view:"MediaTop",mode:"*",key:"comp.size",value:"16",fieldId:"PostSpace"},{type:"AppPartCustomization",forType:"Post",view:"MediaRight",mode:"*",key:"comp.size",value:"16",fieldId:"PostSpace"},{type:"AppPartCustomization",forType:"Post",view:"MediaTop",mode:"view",key:"comp.size",value:"16",fieldId:"PostSpace"},{type:"AppPartCustomization",forType:"Post",view:"MediaLeft",mode:"view",key:"comp.size",value:"16",fieldId:"PostSpace"},{type:"AppPartCustomization",forType:"Post",view:"MediaRight",mode:"view",key:"layout.spacerBefore",value:"13",fieldId:"title"},{type:"AppPartCustomization",forType:"Post",view:"MediaTop",mode:"view",key:"layout.spacerBefore",value:"10",fieldId:"title"},{type:"AppPartCustomization",forType:"Post",view:"MediaBottom",mode:"view",key:"layout.spacerBefore",value:"11",fieldId:"title"},{type:"AppPartCustomization",forType:"Post",view:"MediaLeft",mode:"view",key:"layout.spacerBefore",value:"13",fieldId:"title"},{type:"AppPartCustomization",forType:"Post",view:"MediaRight",mode:"view",key:"layout.spacerBefore",value:"22",fieldId:"WholePost"},{type:"AppPartCustomization",forType:"Post",view:"MediaRight",mode:"view",key:"layout.spacerAfter",value:"22",fieldId:"WholePost"},{type:"AppPartCustomization",forType:"Post",view:"MediaRight",mode:"view",key:"layout.spacerAfter",value:"22",fieldId:"def_10"},{type:"AppPartCustomization",forType:"Post",view:"MediaZigzag",mode:"view",key:"layout.spacerAfter",value:"22",fieldId:"def_27"},{type:"AppPartCustomization",forType:"Post",view:"MediaLeft",mode:"view",key:"layout.spacerAfter",value:"22",fieldId:"def_10"},{type:"AppPartCustomization",forType:"Post",view:"MediaZigzag",mode:"*",key:"dateAndAuthorPosition",value:"left",fieldId:"vars"},{type:"AppPartCustomization",forType:"Post",view:"MediaZigzag",mode:"view",key:"comp.size",value:"16",fieldId:"PostSpace"},{type:"AppPartCustomization",forType:"Post",view:"MediaZigzag",mode:"view",key:"layout.spacerBefore",value:"13",fieldId:"title"},{type:"AppPartCustomization",forType:"Post",view:"MediaRight",mode:"view",key:"layout.spacerAfter",value:"15",fieldId:"text"},{type:"AppPartCustomization",forType:"Post",view:"MediaLeft",mode:"view",key:"layout.spacerAfter",value:"15",fieldId:"text"},{type:"AppPartCustomization",forType:"Post",view:"MediaZigzag",mode:"*",key:"layout.spacerBefore",value:"0",fieldId:"ReadMoreBtn"},{type:"AppPartCustomization",forType:"Post",view:"MediaRight",mode:"*",key:"layout.spacerBefore",value:"0",fieldId:"ReadMoreBtn"},{type:"AppPartCustomization",forType:"Post",view:"MediaLeft",mode:"*",key:"layout.spacerBefore",value:"0",fieldId:"ReadMoreBtn"},{type:"AppPartCustomization",forType:"Post",view:"MediaZigzag",mode:"view",key:"layout.spacerAfter",value:"22",fieldId:"WholePost"},{type:"AppPartCustomization",forType:"Post",view:"MediaZigzag",mode:"view",key:"layout.spacerAfter",value:"22",fieldId:"def_11"},{type:"AppPartCustomization",forType:"Post",view:"MediaBottom",mode:"view",key:"layout.spacerBefore",value:"22",fieldId:"WholePost"},{type:"AppPartCustomization",forType:"Post",view:"MediaTop",mode:"view",key:"layout.spacerBefore",value:"0",fieldId:"ReadMoreBtn"},{type:"AppPartCustomization",forType:"Post",view:"MediaTop",mode:"view",key:"layout.spacerBefore",value:"22",fieldId:"WholePost"},{type:"AppPartCustomization",forType:"Post",view:"MediaTop",mode:"view",key:"layout.spacerAfter",value:"20",fieldId:"def_13"},{type:"AppPartCustomization",forType:"Post",view:"MediaBottom",mode:"view",key:"comp.size",value:"22",fieldId:"def_17"},{type:"AppPartCustomization",forType:"Post",view:"MediaZigzag",mode:"view",key:"layout.spacerBefore",value:"22",fieldId:"WholePost"},{type:"AppPartCustomization",forType:"Post",view:"MediaBottom",mode:"*",key:"layout.spacerBefore",value:"0",fieldId:"ReadMoreBtn"},{type:"AppPartCustomization",forType:"Post",view:"MediaTop",mode:"*",key:"layout.spacerBefore",value:"0",fieldId:"ReadMoreBtn"},{type:"AppPartCustomization",forType:"Post",view:"MediaLeftPage",mode:"*",key:"padding",value:"20",fieldId:"vars"},{type:"AppPartCustomization",forType:"Post",view:"MediaTopPage",mode:"*",key:"comp.size",value:"30",fieldId:"PostSpace"},{type:"AppPartCustomization",forType:"Post",view:"MediaTopPage",mode:"*",key:"padding",value:"20",fieldId:"vars"},{type:"AppPartCustomization",forType:"Post",view:"MediaBottomPage",mode:"*",key:"padding",value:"20",fieldId:"vars"},{type:"AppPartCustomization",forType:"Post",view:"MediaBottomPage",mode:"*",key:"comp.size",value:"30",fieldId:"PostSpace"},{type:"AppPartCustomization",forType:"Post",view:"MediaRightPage",mode:"*",key:"padding",value:"20",fieldId:"vars"},{type:"AppPartCustomization",forType:"Post",view:"MediaRightPage",mode:"*",key:"comp.size",value:"30",fieldId:"PostSpace"},{type:"AppPartCustomization",forType:"Post",view:"MediaZigzagPage",mode:"*",key:"comp.size",value:"30",fieldId:"PostSpace"},{type:"AppPartCustomization",forType:"Post",view:"MediaZigzagPage",mode:"*",key:"padding",value:"20",fieldId:"vars"},{type:"AppPartCustomization",forType:"Post",view:"MediaZigzagPage",mode:"view",key:"comp.style",value:"c1",fieldId:"def_2"},{type:"AppPartCustomization",forType:"Post",view:"MediaTopPage",mode:"*",key:"comp.format",value:"longDate",fieldId:"date"},{type:"AppPartCustomization",forType:"Post",view:"MediaBottomPage",mode:"*",key:"comp.format",value:"longDate",fieldId:"date"},{type:"AppPartCustomization",forType:"Post",view:"MediaRightPage",mode:"*",key:"comp.format",value:"longDate",fieldId:"date"},{type:"AppPartCustomization",forType:"Post",view:"MediaLeftPage",mode:"*",key:"comp.format",value:"longDate",fieldId:"date"},{type:"AppPartCustomization",forType:"Post",view:"MediaZigzagPage",mode:"*",key:"comp.format",value:"longDate",fieldId:"date"},{type:"AppPartCustomization",forType:"Post",view:"MediaLeftPage",mode:"*",key:"comp.size",value:"30",fieldId:"PostSpace"},{type:"AppPartCustomization",forType:"Post",view:"MediaLeftPage",mode:"view",key:"comp.style",value:"c1",fieldId:"def_2"},{type:"AppPartCustomization",forType:"Array",view:"MasonryPage",key:"pageNavigationType",value:"pagination",fieldId:"vars",format:"*"},{type:"AppPartCustomization",forType:"Array",view:"MediaBottomPage",key:"pageNavigationType",value:"pagination",fieldId:"vars",format:"*"},{type:"AppPartCustomization",forType:"Array",view:"MediaLeftPage",key:"pageNavigationType",value:"pagination",fieldId:"vars",format:"*"},{type:"AppPartCustomization",forType:"Array",view:"MediaRightPage",key:"pageNavigationType",value:"pagination",fieldId:"vars",format:"*"},{type:"AppPartCustomization",forType:"Array",view:"MediaTopPage",key:"pageNavigationType",value:"pagination",fieldId:"vars",format:"*"},{type:"AppPartCustomization",forType:"Post",view:"MediaBottomPage",key:"layout.height",value:"40",fieldId:"ReadMoreBtn",format:""},{type:"AppPartCustomization",forType:"Post",view:"MediaBottomPage",key:"comp.size",value:"40",fieldId:"PostSpace",format:""},{type:"AppPartCustomization",forType:"Post",view:"MediaTopPage",key:"comp.size",value:"40",fieldId:"PostSpace",format:""},{type:"AppPartCustomization",forType:"Post",view:"MediaTopPage",key:"layout.height",value:"40",fieldId:"ReadMoreBtn",format:""},{type:"AppPartCustomization",forType:"Post",view:"MediaTopPage",key:"padding",value:"5",fieldId:"vars",format:""},{type:"AppPartCustomization",forType:"Array",view:"MediaZigzagPage",key:"pageNavigationType",value:"pagination",fieldId:"vars",format:"*"}],appLogicParams:{filter:{type:"AppPartParam",value:""},limit:{type:"AppPartParam",value:"20"},sort:{type:"AppPartParam",value:'{"date.iso":-1}'}},id:"#dataItem-inhakxo7"},props:{type:"AppPartProperties",metaData:{schemaVersion:"1.0"},direction:"ltr",id:"propItem-inhakxoa"},style:"blog_4de5abc5-6da2-4f97-acc3-94bb74285072_1"},{type:"Component",id:"comp-inofzn53",skin:"wysiwyg.viewer.skins.AppPartSkin",layout:{width:300,height:233,x:660,y:155,scale:1,rotationInDegrees:0,anchors:[{distance:-1,originalValue:387,type:"BOTTOM_TOP",locked:!0,targetComponent:"comp-inugq78f"}],fixedPosition:!1},componentType:"wixapps.integration.components.AppPart",data:{type:"AppPart",metaData:{isPreset:!1,schemaVersion:"1.0",isHidden:!1},appInnerID:"18",appPartName:"c7f57b50-8940-4ff1-83c6-6756d6f0a1f4",viewName:"PostsListMediaLeft",appLogicCustomizations:[{type:"AppPartCustomization",forType:"Post",view:"PostsListMediaLeft",key:"comp.italic",value:"true",fieldId:"date",format:"*"},{type:"AppPartCustomization",forType:"Post",view:"PostsListMediaLeft",key:"comp.style",value:"Body S",fieldId:"date",format:"*"},{type:"AppPartCustomization",forType:"VideoPost",view:"FeaturedInnerMobile",key:"comp.style",value:"wp2",fieldId:"video",format:"*"},{type:"AppPartCustomization",forType:"VideoPost",view:"PostsListMediaInner",key:"comp.style",value:"wp2",fieldId:"video",format:"*"},{type:"AppPartCustomization",forType:"PhotoPost",view:"FeaturedInnerMobile",key:"comp.style",value:"wp2",fieldId:"photo",format:"*"},{type:"AppPartCustomization",forType:"PhotoPost",view:"PostsListMediaInner",key:"comp.style",value:"wp2",fieldId:"photo",format:"*"},{type:"AppPartCustomization",forType:"Post",view:"PostsListMediaBottom",key:"comp.italic",value:"true",fieldId:"date",format:"*"},{type:"AppPartCustomization",forType:"Post",view:"PostsListMediaBottom",key:"comp.style",value:"Body S",fieldId:"date",format:"*"},{type:"AppPartCustomization",forType:"Post",view:"PostsListMediaBottom",key:"comp.hidden",value:"false",fieldId:"dateShow",format:"*"},{type:"AppPartCustomization",forType:"Post",view:"PostsListMediaBottom",key:"comp.style",value:"Body M",fieldId:"title",format:"*"},{type:"AppPartCustomization",forType:"Array",view:"TickerMediaBottom",key:"comp.autoplay",value:"false",fieldId:"TickerGallery",format:"*"},{type:"AppPartCustomization",forType:"Post",view:"TickerMediaBottom",key:"comp.italic",value:"true",fieldId:"date",format:"*"},{type:"AppPartCustomization",forType:"Post",view:"TickerMediaBottom",key:"comp.style",value:"Body S",fieldId:"date",format:"*"},{type:"AppPartCustomization",forType:"Post",view:"PostsListMediaBottom",key:"postSpacing",value:"20",fieldId:"vars",format:""},{type:"AppPartCustomization",forType:"Post",view:"PostsListMediaLeft",key:"postSpacing",value:"25",fieldId:"vars",format:""},{type:"AppPartCustomization",forType:"Post",view:"PostsListMediaLeft",key:"layout.spacerBefore",value:"0",fieldId:"date",format:""},{type:"AppPartCustomization",forType:"Post",view:"TickerMediaBottom",key:"comp.style",value:"Body M",fieldId:"title",format:"*"}],appLogicParams:{},id:"#dataItem-inofzn5f"},props:{type:"AppPartProperties",metaData:{schemaVersion:"1.0"},direction:"ltr",id:"propItem-inofzn5g"},style:"blog_c7f57b50-8940-4ff1-83c6-6756d6f0a1f4_1"},{type:"Component",id:"comp-inoi2h8e",skin:"wysiwyg.viewer.skins.AppPartSkin",layout:{width:300,height:108,x:660,y:407,scale:1,rotationInDegrees:0,anchors:[{distance:10,originalValue:525,type:"BOTTOM_TOP",locked:!0,targetComponent:"comp-inuhit6b"}],fixedPosition:!1},componentType:"wixapps.integration.components.AppPart",data:{type:"AppPart",metaData:{isPreset:!1,schemaVersion:"1.0",isHidden:!1},appInnerID:"18",appPartName:"56ab6fa4-95ac-4391-9337-6702b8a77011",viewName:"ArchiveList",appLogicCustomizations:[{type:"AppPartCustomization",forType:"Option",view:"ArchiveList",key:"comp.italic",value:"true",fieldId:"date",format:"*"},{type:"AppPartCustomization",forType:"Option",view:"ArchiveList",key:"comp.style",
value:"Body S",fieldId:"date",format:"*"},{type:"AppPartCustomization",forType:"Option",view:"ArchiveList",key:"comp.hidden",value:"true",fieldId:"itemSeparator",format:"*"},{type:"AppPartCustomization",forType:"Option",view:"ArchiveList",key:"showItemsCount",value:"false",fieldId:"vars",format:""}],appLogicParams:{},id:"#dataItem-inoi2h8h"},props:{type:"AppPartProperties",metaData:{schemaVersion:"1.0"},direction:"ltr",id:"propItem-inoi2h8i"},style:"blog_56ab6fa4-95ac-4391-9337-6702b8a77011_1"},{type:"Component",id:"comp-inoi2h8e2",skin:"wysiwyg.viewer.skins.AppPartSkin",layout:{width:300,height:78,x:660,y:543,scale:1,rotationInDegrees:0,anchors:[{distance:0,originalValue:4079,type:"BOTTOM_PARENT",locked:!0,targetComponent:"wf2kw"}],fixedPosition:!1},componentType:"wixapps.integration.components.AppPart",data:{type:"AppPart",metaData:{isPreset:!1,schemaVersion:"1.0",isHidden:!1},appInnerID:"18",appPartName:"e000b4bf-9ff1-4e66-a0d3-d4b365ba3af5",viewName:"TagCloud",appLogicCustomizations:[{type:"AppPartCustomization",forType:"wix:Object",view:"TagCloud",key:"comp.italic",value:"true",fieldId:"key",format:"*"}],appLogicParams:{},id:"#dataItem-inoi2h8o"},props:{type:"AppPartProperties",metaData:{schemaVersion:"1.0"},direction:"ltr",id:"propItem-inoi2h8o1"},style:"blog_e000b4bf-9ff1-4e66-a0d3-d4b365ba3af5_1"},{type:"Component",id:"comp-inugq78f",skin:"wysiwyg.viewer.skins.line.SolidLine",layout:{width:300,height:5,x:660,y:387,scale:1,rotationInDegrees:0,anchors:[{distance:15,originalValue:407,type:"BOTTOM_TOP",locked:!0,targetComponent:"comp-inoi2h8e"}],fixedPosition:!1},componentType:"wysiwyg.viewer.components.FiveGridLine",props:{type:"FiveGridLineProperties",metaData:{schemaVersion:"1.0"},fullScreenModeOn:!1,id:"propItem-inugq78h"},style:"hl2"},{type:"Component",id:"comp-inuhit6b",skin:"wysiwyg.viewer.skins.line.SolidLine",layout:{width:300,height:5,x:660,y:525,scale:1,rotationInDegrees:0,anchors:[{distance:13,originalValue:543,type:"BOTTOM_TOP",locked:!0,targetComponent:"comp-inoi2h8e2"}],fixedPosition:!1},componentType:"wysiwyg.viewer.components.FiveGridLine",props:{type:"FiveGridLineProperties",metaData:{schemaVersion:"1.0"},fullScreenModeOn:!1,id:"propItem-inuhitdn"},style:"hl2"},{type:"Container",id:"comp-iompfo6y",layout:{width:100,height:60,x:50,y:971,scale:1,rotationInDegrees:0,anchors:[{distance:0,originalValue:4079,type:"BOTTOM_PARENT",locked:!0,targetComponent:"wf2kw"}],fixedPosition:!1},componentType:"mobile.core.components.Container",components:[],style:"c4"}]},presetImageUrl:"http://static.wixstatic.com/media/7ccb81_c32e03ff484a4a6890915810a7a56c55~mv2.jpg/v1/fit/w_240,h_568,q_100/file.jpg"};return{getBlogDefaults:function(){return a},getPostGalleryDefault:function(){return b}}});var SlideShowService=function(){function a(a,b,c,d,e,f,g,h,i,j,k,l){this.flags=a,this.modelTree=b,this.selections=c,this.simpleSolutionManager=d,this.componentClasses=e,this.documentServicesMediator=f,this.modelStore=g,this.sitePartTypes=h,this.storyServices=i,this.sectionBackgroundService=j,this.designKitParameters=k,this.$injector=l,this.colors={dark:"D",light:"L"}}return a.$inject=["flags","modelTree","selections","simpleSolutionManager","componentClasses","documentServicesMediator","modelStore","sitePartTypes","storyServices","sectionBackgroundService","designKitParameters","$injector"],a.prototype.isSlideShowNode=function(a){var b=this.modelTree.getNodeById(a),c=this.selections.getForNode(b).isSlideShow;return c},a.prototype.getNavigationButtonsBackground=function(a){if(!a.from.slideShow)return"";var b=a.from.slideShow[0].findIdentifyingNodeId(),c=this.modelTree.getNodeById(b),d=this.sectionBackgroundService.getBackground(c,"body",a.from.slideShow);return this.getInvertedColor(d.color)},a.prototype.getInvertedColor=function(a){return a.startsWith(this.colors.light)?a.replace(this.colors.light,this.colors.dark):a.replace(this.colors.dark,this.colors.light)},a.prototype.getCompRef=function(){var a=this.modelStore.model.get(this.sitePartTypes.BODY,this.storyServices.story.selectedPage),b=_.find(a.children,function(a){return a.from.slideShow});return b&&b.compRef},a.prototype.isSlideShowContainer=function(a){return this.flags.listItemSlideShow&&a&&a.compDef.componentType===this.componentClasses.stripContainerSlideShow.comp},a.prototype.navigateToSlide=function(a,b){var c=this.isSlideShowNode(a);if(c){var d=this.getCompRef();d&&this.documentServicesMediator.executeBehavior(d,"moveToSlide",{slide:b})}},a.prototype.createStyle=function(a,b){var c=this.getNavigationButtonsBackground(a),d="color_"+this.designKitParameters[c],e=b||{skin:this.componentClasses.stripContainerSlideShow.skin,styleType:"custom",style:{groups:{},properties:{"alpha-arrowColor":"1",arrowColor:d,"alpha-dotsColor":"1",dotsColor:d},propertiesSource:{"alpha-arrowColor":"value","alpha-dotsColor":"value",arrowColor:"theme",dotsColor:"value"}}},f=documentServices.theme.styles.createItem(e);documentServices.components.style.setId(a.compRef,f)},a}();angular.module("siteGeneratorStaticsCoreAppInternal").service("slideShowService",SlideShowService),angular.module("siteGeneratorStaticsCoreAppInternal").factory("bft",["TreeNode","contentElements",function(a,b){function c(b,c,d){return new a(b,c?c.getId()+"."+d:d)}function d(a,b,d,e,f){for(var g=c(a,b,d),h=0,i=0;f>i;i++)g.children.push(c({type:"contentElement",contentElementType:e},g,h++));return g}var e,f={getBft:function(){return e?e:e=b.load().then(function(){var a=1,e=c({matchingPolicy:"Custom"},null,"1");return angular.forEach(b.elements,function(b,f){var g,h=_.isString(b.extraData)?JSON.parse(b.extraData):b.extraData,i={};h[f]&&(i=h[f].properties,g=h[f].list),h.All&&(angular.forEach(h.All.properties,function(a,b){void 0===i[b]&&(i[b]=a)}),g=g||h.All.list);var j;i.contentElementType=f,g?(i.type="contentElementList",j=d(i,e,a++,f,g)):(i.type="contentElement",j=c(i,e,a++)),e.children.push(j)}),e})}};return f}]),angular.module("siteGeneratorStaticsCoreAppInternal").factory("bookingService",["$http","applicationParameters",function(a,b){function c(a){return{"Content-Type":"application/json","x-wix-scheduler-instance":a}}var d=b.clientTopology.schedulerBaseUrl+"/api/owner/services",e=b.clientTopology.schedulerBaseUrl+"/api/onboarding/bulkCreate",f=b.clientTopology.schedulerBaseUrl+"/api/owner/categories",g=b.clientTopology.schedulerBaseUrl+"/index?instance=",h=b.clientTopology.schedulerBaseUrl+"/api/owner/appStatus",i=b.clientTopology.schedulerBaseUrl+"/api/onboarding/status",j={name:"Dog haircut with images",description:"a dog haircut",duration:45,price:"19.99",currency:"USD",location:"BUSINESS",locationText:null,images:[{fileName:"329970_eda7846a968742e9adbe07627fe467b3.jpg",relativeUri:"329970_4ddbbf1b438a46a5a6f219d40a08227b.jpg",width:5312,height:2988}],categoryId:"a21a78c2-f686-410e-b8ad-66abd7cc0934",isFree:null,paymentType:"ONLINE",priceText:null},k={capacity:15,startDate:"2016-04-26",endDate:"2016-12-01",noEndDate:!1,classHours:{mon:{workingHours:[{workingHour:{startTime:"07:00:00.000",endTime:"08:30:00.000"},teacher:"Monica Brown",staffId:null}],enabled:!0},tue:{workingHours:[{workingHour:{startTime:"10:00:00.000",endTime:"11:30:00.000"},teacher:"Monica Brown",staffId:null},{workingHour:{startTime:"20:00:00.000",endTime:"21:30:00.000"},teacher:"Monica Brown",staffId:null}],enabled:!0},wed:{workingHours:[{workingHour:{startTime:"10:00:00.000",endTime:"11:30:00.000"},teacher:"Monica Brown",staffId:null}],enabled:!0},thu:{workingHours:[{workingHour:{startTime:"10:00:00.000",endTime:"11:30:00.000"},teacher:"Monica Brown",staffId:null}],enabled:!0},fri:{workingHours:[{workingHour:{startTime:"10:00:00.000",endTime:"11:30:00.000"},teacher:"Monica Brown",staffId:null}],enabled:!0}},allowVoucher:!1,allowGift:!1,order:0,visible:!0,derivedFrom:null,instructors:["Monica Brown"]},l={getFirstCategoryId:function(a){return this.getBusiness(a).then(function(a){return a.data.categories[0]&&a.data.categories[0].id})},getBusiness:function(b){var e={method:"GET",url:d,headers:c(b)};return a(e)},addServices:function(b,d,f,g){j.categoryId=d||j.categoryId,f=_.map(f,function(a){return a.images=a.images||[],a.description=a.description||"",g&&(a=_.defaults(a,k)),_.defaults(a,j)});var h={};g?h.classes=f:h.services=f;var i={method:"POST",url:e,data:h,headers:c(b)};return a(i)},createCategory:function(b,d,e){var g={method:"POST",url:f,data:{name:d,type:e?"GROUP":"SERVICE"},headers:c(b)};return a(g)},deleteCategory:function(b,d){var e={method:"DELETE",url:f+"/"+d,headers:c(b)};return a(e)},updateAppStatus:function(b){var d={method:"PUT",url:h,data:{services:!0,calendar:!0,businessInfo:!0,payments:!1},headers:c(b)};return a(d)},wakeAppHack:function(b){var c={method:"GET",url:g+b};return a(c)},isAppReady:function(b){var d={method:"GET",url:i,headers:c(b)};return a(d)}};return l}]);var core;!function(a){var b=function(){function a(a,b,c,d){this.designKit=a,this.mediaOverride=b,this.simpleSolutionRules=c,this.flags=d,this.totalStructureColumns=12,this.totalPageWidth=960,this.pageMargin=20,this.alignment={left:0,center:50,right:100},this.getColumnsCount={virtual:function(a){var b=a.segments[0].getLENoError().getColumns();return b&&b.length||1},regular:function(a){return a.getSegmentSignature().length}}}return a.$inject=["designKit","mediaOverride","simpleSolutionRules","flags"],a.prototype.getFirstMediaByType=function(a,b){var c=a.contentElement.valuesByMediaType[b];return c&&c[0]},a.prototype.createHybridColumns=function(a,b){var c=this,d=a.getSegmentSignature().split("");if(d.length){var e=this.simpleSolutionRules.getColumnsSplit(a),f=e&&e.split(":")||[];f.length!==d.length&&(f=[]);var g=0,h=0;this.hasColumnBackground(b)||b.colSplit||(b=ob.deepClone(b),b.props.columnsMargin=2===d.length?60:0);var i=_.flatten(d.map(function(d,e,i){var j="0"===d,k=j?void 0:a.segments[h++],l=k&&k.getLENoError().getColumns();if(l)return c.createVirtualColumns(k,l,b);var m=c.getAlignmentRegular(b,i.length,e),n={alignment:m,backgroundMode:b.backgroundMode},o={offset:g,allSettings:b,currentSettings:n,isVirtual:!1,width:+f[e]||c.totalStructureColumns/i.length,height:a.targetHeight,empty:j,segment:k,hasText:!0,extraProps:{alignment:m}};return g+=o.width,o}));return i}},a.prototype.createRegularColumns=function(a,b){var c=this,d=a.getSegmentSignature().split("");if(d.length){var e=this.simpleSolutionRules.getColumnsSplit(a);a.odd&&(e=_.map(e).reverse().join(""));var f=e&&e.split(":")||[];f.length!==d.length&&(f=[]);var g=0,h=0;return d=d.map(function(d,e,i){var j={offset:g,allSettings:b,currentSettings:b.singleColumnProps[0],isVirtual:!1,width:+f[e]||c.totalStructureColumns/i.length,height:a.targetHeight,empty:"0"===d,hasText:!0,extraProps:{alignment:c.getAlignmentRegular(b,i.length,e)}};return g+=j.width,"0"===d?j.segment=void 0:(j.segment=a.segments[h],h++),j})}},a.prototype.createSingleColumnProps=function(a,b,c){var d=a[b],e=this.getAlignmentRegular(c,a.length,b),f=null;return d.hasMedia&&_.contains(["image","imageOrColor"],c.backgroundMode)?f="image":_.contains(["color","imageOrColor"],c.backgroundMode)&&(f="color"),{backgroundMode:f,alignment:e}},a.prototype.createVirtualColumns=function(a,b,c){var d=this;if(b&&b.length&&(this.flags.newColumns||b.length===c.singleColumnProps.length))return b=b.map(function(e,f){e=Object.assign({},e);var g=d.flags.newColumns?d.createSingleColumnProps(b,f,c):c.singleColumnProps[f];return e.allSettings=c,e.currentSettings=g,e.empty=!1,e.segment=a,e.virtualColumnIndex=f,e.extraProps={alignment:d.getAlignmentVirtual(g)},e})},a.prototype.createVirtualMobileColumn=function(a,b,c){var d=a[b],e=_.cloneDeep(c.segments[0].getLENoError().layout),f=[],g=b,h=this.hasAnyColumnMediaBackground(a),i=!!this.createColumnBackground(d);if(h&&a.length>1){var j=_.findIndex(e,{type:"media"}),k=e[j];i?(f=k?[k]:[],g=0===j?0:1):(f=_.without(e,k),g=0===j?1:0)}else 0===b&&(f=e);return _.isEmpty(f)?void 0:{isVirtual:!0,isMobile:!0,ref:d.ref,layout:f,segment:c.segments[0],height:0,columnPositionIndex:g,hasMedia:!!_.find(f,{type:"media"}),hasBackgroundMedia:i,currentSettings:d.currentSettings,allSettings:d.allSettings}},a.prototype.setVirtualMobileColumnsHeight=function(a,b){if(2===a.length){var c=_.find(a,{columnPositionIndex:0}),d=_.find(a,{columnPositionIndex:1});c.height=c.hasBackgroundMedia?c.layout[0].height:d.layout[0].top,d.height=b.targetHeight-c.height,_.each(d.layout,function(a){a.top-=c.height,a.absoluteTop-=c.height})}else a[0].height=b.targetHeight},a.prototype.createVirtualMobileColumns=function(a){var b=this,c=a.getDesktopLG(),d=c.columns,e=_(d).map(function(c,e){return b.createVirtualMobileColumn(d,e,a)}).without(void 0).value();return this.setVirtualMobileColumnsHeight(e,a),e},a.prototype.addStripPaddingToRegularMobileColumns=function(a){_.forEach(a.columns,function(b){if(b.isMobile&&!b.isVirtual){var c=a.getDesktopLG(),d=a.getMobileSegmentIndexInDesktop(),e=c.segments[d+1],f=e&&e.mobileLg,g=a.getLgData(),h=f&&f.getLgData();h&&(b.height+=(g.strip.paddingBottom||0)+(h.strip.paddingTop||0))}})},a.prototype.createRegularMobileColumns=function(a){var b=a.segments[0],c=a.getDesktopLG(),d=a.getMobileSegmentIndexInDesktop(),e=c.columns[d],f=_.cloneDeep(b.getLENoError().layout),g={isVirtual:!1,isMobile:!0,ref:c.columns[d].ref,layout:f,segment:b,height:b.height,columnPositionIndex:d,currentSettings:e.currentSettings,allSettings:e.allSettings};return[g]},a.prototype.createColumns=function(a,b){if(b.isMobile()){var c=b.getDesktopLG();if(!c||!c.columns)return;return this.isVirtualColumns(c)?this.createVirtualMobileColumns(b):this.createRegularMobileColumns(b)}var d=b.getColumnsData();if(d&&d.enable){if(this.flags.newColumns)return this.createHybridColumns(b,d);if(this.isVirtualColumns(b)){var e=b.segments[0],f=e.getLENoError().getColumns();return this.createVirtualColumns(e,f,d)}return this.createRegularColumns(b,d)}},a.prototype.getColumnsContainerProps=function(a){var b=a[0];if(b.allSettings){if(this.flags.newColumns||b.isVirtual||this.hasColumnBackground(b.allSettings))return b.allSettings.props;var c=ob.deepClone(b.allSettings.props);return c.columnsMargin=2===a.length?60:0,c}},a.prototype.getAlignment=function(a,b){var c=a[b];if(c.allSettings)return c.extraProps.alignment},a.prototype.getAlignmentVirtual=function(a){return a&&a.alignment},a.prototype.hasColumnBackground=function(a){return this.flags.newColumns?!!a.backgroundMode:_.some(a.singleColumnProps,function(a){return!!a.backgroundMode})},a.prototype.getAlignmentRegular=function(a,b,c){if(a.split)return this.alignment.center;if(this.hasColumnBackground(a)||1===b&&this.flags.newColumns)return this.alignment.center;if(2===b)return 0===c?this.alignment.right:this.alignment.left;if(3===b)return 0===c?this.alignment.right:2===c?this.alignment.left:this.alignment.center;if(4===b)return this.alignment.center;throw new Error("data is invalid (totalColumns==="+b+") - singleColumn should have taken the createVirtualColumns branch and more than 4 columns never a case")},a.prototype.calculateMinWidth=function(a,b,c){var d=this.totalPageWidth+this.pageMargin,e=c.columnsMargin,f=c.frameMargin;return(d-(a-1)*e-2*f)*(b/this.totalStructureColumns)},a.prototype.isValidAlignment=function(a){return a===this.alignment.left||a===this.alignment.center||a===this.alignment.right},a.prototype.getBackground=function(a,b){if(b&&_.contains(["image","imageOrColor"],b)){var c=a.getLE(),d=c.getMediaLayout();if(d&&!c.isShapeLayout(d)){var e=this.mediaOverride.getGallery(c,d,a),f="Wix Video"===e.name?"video":"image",g=a&&this.getFirstMediaByType(a,f);if(g)return{media:g,mediaOverrides:_.cloneDeep(e),alignment:a.getAlignment()}}}return b&&_.contains(["color","imageOrColor"],b)?{color:this.designKit.getComponentCustomColor(a,"columnBg"),colorOpacity:.7}:void 0},a.prototype.isVirtualColumns=function(a){return 1===this.getColumnsCount.regular(a)},a.prototype.createColumnBackground=function(a){if(a.currentSettings&&a.segment){var b=this.getBackground(a.segment,a.currentSettings.backgroundMode);if(!a.isVirtual||b&&b.color||a.hasMedia)return b}},a.prototype.hasAnyColumnMediaBackground=function(a){var b=this;return _.some(a,function(a){return!!b.createColumnBackground(a)})},a.prototype.hasMediaBackground=function(a,b,c){var d=this.createColumnBackground(a[b]);return d&&d.media},a.prototype.adjustLayoutForColumns=function(a,b,c,d){return b=this.adjustLeftDistance(b,c,d),b=this.assignColumnIndex(b,d),this.applyAlignmentInsideMinWidthArea(a,b,c,d)},a.prototype.adjustLeftDistance=function(a,b,c){var d=b[c];if(d.allSettings&&d.isVirtual&&!d.isMobile){var e=d.offset*(this.totalPageWidth/this.totalStructureColumns);return a.map(function(a){return Object.assign({},a,{left:a.left-e})})}return a},a.prototype.addMobilePadding=function(a,b){return a.map(function(a){return Object.assign({},a,{left:a.left+b})})},a.prototype.assignColumnIndex=function(a,b){var c=this;return _.each(a,function(a){a.columnIndex=b,a.layout&&c.assignColumnIndex(a.layout,b)},this),a},a.prototype.calculateColumnWidth=function(a,b){var c=a[b];return c&&this.calculateMinWidth(a.length,c.width,this.getColumnsContainerProps(a))},a.prototype.applyAlignmentInsideMinWidthArea=function(a,b,c,d){var e=c[d];if(e.allSettings&&!e.isMobile&&(e.renderedMinWidth=this.calculateMinWidth(c.length,e.width,this.getColumnsContainerProps(c)),b.length>0)){var f=this.getAlignment(c,d);if(this.isValidAlignment(f)){var g,h,i,j=b;if(1===a.cluster){var k=_.findIndex(a.argList,{type:"media"});-1===k&&(j=j.concat([a.layout[0]]))}j.forEach(function(a){(void 0===g||g>a.left)&&(g=a.left),(void 0===h||h<a.left+a.width)&&(h=a.left+a.width)}),f===this.alignment.left&&(i=0),f===this.alignment.center&&(i=(e.renderedMinWidth-(h-g))/2),f===this.alignment.right&&(i=e.renderedMinWidth-(h-g)),e.renderedLayoutLeftOffset=i-g,b=b.map(function(a){return _.assign({},a,{left:a.left+e.renderedLayoutLeftOffset})})}}return b},a}();a.ColumnsService=b,angular.module("siteGeneratorStaticsCoreAppInternal").service("columnService",b)}(core||(core={})),angular.module("siteGeneratorStaticsCoreAppInternal").factory("ContentElement",["contentElements","fieldSignature","mediaGallery",function(a,b,c){function d(b,c){this.empty=!0,this.type=b,this.values={},this.toString=function(){return"type: "+this.type+" values"+JSON.stringify(this.values)},this.validate=function(){return!0},this.getFieldValue=function(a){return this.values[a]},this.getFieldValueByType=function(a,b,c){var d=this,e=Object.keys(this.values).filter(function(c){var e=d.values[c];return!(e.type!==a||e.subType!==b&&b&&e.subType)});return e&&e[0]?c?this.values[e[0]].value:this.values[e[0]].value.substr(0,14):""},this.getNumOfNonBlankFields=function(){var a=0,b=this;return angular.forEach(this.values,function(c){b.isEmptyField(c)||a++}),this.empty=0===a.length,a},this.getNonBlankFields=function(){var a=[],b=this;return angular.forEach(this.values,function(c,d){b.isEmptyField(c)||a.push(d)}),this.empty=0===a.length,a},this.getUsageLimitation=function(){return-1===["header","footer","body"].indexOf(this.usageLimitation)?"":this.usageLimitation};var d=this;a.elements[b]&&(d.usageLimitation=a.elements[b].usageLimitation||"",d.description=a.elements[b].description||"",angular.forEach(a.elements[b].fields,function(a){if(!d.values[a.name]){var b=c;if(b)b=c[a.name];else switch(a.type){case"button":b={callToAction:"",targetUrl:"",media:[]};break;case"subscribe":b={titleLabel:"",sendButtonLabel:"",emailPlaceHolder:"",namePlaceHolder:""};break;default:b=""}d.values[a.name]={type:a.type,subType:a.subType||"",value:b},a.dependencies&&(d.values[a.name].dependencies=a.dependencies),a.dependent&&(d.values[a.name].dependent=a.dependent)}})),this.getKeys=function(){return Object.keys(this.values)},this.getFilteredSortedKeys=function(){return _(this.getKeys()).filter(function(a){return-1===a.indexOf("[")}).sortBy(this.sortFields).value()},this.sortFields=function(a){if(d.isGateField(a)){var b=d.values[a].dependencies[0];return d.fieldsOrder[d.values[b].subType]-1}return d.fieldsOrder[d.values[a].subType]},this.setArgsMatchingPolicy=function(a){this.argsMatchingPolicy=a},this.setMobileArgsPolicy=function(a){this.mobileArgPolicy=a},this.getMobileArgsPolicy=function(){return this.mobileArgPolicy},this.setHiddenMedia=function(a){this.hiddenMedia=a},this.emptyHiddenMedia=function(){var a=this;_.each(_.keys(this.hiddenMedia),function(b){delete a.hiddenMedia[b]})},this.getArgsMatchingPolicy=function(){return this.argsMatchingPolicy},this.getHiddenMedia=function(){return this.hiddenMedia},this.setReferenceFields=function(a){this.referenceFields=a},this.getReferenceFields=function(){return this.referenceFields},this.setMobileReferenceFields=function(a){this.mobileReferenceFields=a},this.getMobileReferenceFields=function(){return this.mobileReferenceFields},this.supportsWantedReferenceFields=function(a){var b=_.collect(this.referenceFields,function(a,b){return a?b:!1});b=_.filter(b);var c=b.join("|");if(a.wantedRefFieldSig!==c){a.wantedRefFieldSig=c;var d=_.filter(a.argList,{isReference:!0});return b.length!==d.length?!1:_.all(b,function(a){return _.any(d,function(b){return b.element+"."+b.field===a})})}return!0},this.referenceArgIsWanted=function(a){var b=this;return _.any(_.keys(b.referenceFields),function(c){return a.element+"."+a.field===c&&!!b.referenceFields[c]})},this.isGateField=function(a){return this.values[a]&&"gate"===this.values[a].type},this.isDependentField=function(a){return this.values[a]&&this.values[a].dependent}}d.prototype.fieldsOrder={pageTitle:0,menu:5,title:10,subTitle:20,longText:30,shortText:40,image:50,video:50,audio:50,logoText:55,phoneNumber:60,fax:65,email:70,url:80,address:90,form:141,button:120,subscribe:130,ContactFormTitle:140,ContactMapTitle:150,map:160,copyrightMSG:170,widget:180},d.prototype.dependenciesMap=new WeakMap,d.prototype.register=function(a){var b=this.dependenciesMap.get(this.values);b?b.push(a):this.dependenciesMap.set(this.values,[a])},d.prototype.unRegister=function(a){var b=this.dependenciesMap.get(this.values);if(b)for(var c=0;c<b.length;c++)if(b[c]===a){b.splice(c,1);break}},d.prototype.getDependencies=function(){return this.dependenciesMap.get(this.values)||[]},d.prototype.isEmptyField=function(a){var b=a.type,c=a.value;if(c)switch(b){case"button":return c.callToAction?0===c.callToAction.length:!0;case"subscribe":return c.titleLabel?0===c.titleLabel.length:!0;case"media":return!_.any(c,function(b){return this.isMediaVisible(b,a.hiddenMedia)},this)}return!c&&"gate"!==b&&"menu"!==b},d.prototype.isMediaVisible=function(a,b){return b=b||this.hiddenMedia,!b||!b[a.mediaType]||!b[a.mediaType][c.getItemId(a)]},d.prototype.setValues=function(a,b,c){"button"===this.values[a].type?this.values[a].value.media.push(b):(this.values[a].value=this.values[a].value||[],this.values[a].value.push(b)),c&&(this.values[a].srcLocale=c)},d.prototype.removeValues=function(a,b){this.values[b].value=_.filter(this.values[b].value||[],function(b){return b!==a}),0===this.values[b].value.length&&(this.values[b].value="")},d.prototype.fillValuesByMediaTypeList=function(){var a=this;_.each(this.ceArray,function(a){a.fillValuesByMediaType()}),this.valuesByMediaType={},this.valuesByMediaType.image=[];var b=_.filter(this.ceArray,function(a){return"ListHeader"!==a.type&&"ListFooter"!==a.type&&"HomePageTeaser"!==a.type});return _.each(b,function(b){if(b.valuesByMediaType.image){var c=_.clone(b.valuesByMediaType.image[0]);_.each(b.values,function(a,d){if(!b.argsMatchingPolicy||b.argsMatchingPolicy[d])switch(a.subType){case"title":c.Title=a.value;break;case"longText":c.Description=a.value;break;case"button":c.Link=a.value}}),a.valuesByMediaType.image.push(c)}}),this.valuesByMediaType},d.prototype.fillValuesByMediaType=function(){if(this.aggregator)return this.fillValuesByMediaTypeList();var a=this,b=this.getMediaField();return this.allValuesByMediaType={},b?this.valuesByMediaType=_(b.value).filter(function(a){return _.isObject(a)}).map(function(a){if(void 0===a.mediaType?a.mediaType="image":"clipArt"===a.mediaType&&(a.mediaType="clipart"),"image"===a.mediaType&&a.usage!==core.MediaUsageType.Content){var b=ob.deepClone(a);return b.mediaType="bgImage",a.usage===core.MediaUsageType.Bg?b:[a,b]}return a}).flatten().reduce(function(b,d){var e=d.mediaType;return void 0===a.allValuesByMediaType[e]?a.allValuesByMediaType[e]=[d]:a.allValuesByMediaType[e].push(d),a.hiddenMedia&&a.hiddenMedia[e]&&a.hiddenMedia[e][c.getItemId(d)]||(void 0===b[e]?b[e]=[d]:b[e].push(d)),b},{}):this.valuesByMediaType={},this.valuesByMediaType},d.prototype.getValuesByMediaType=function(){return this.valuesByMediaType||this.fillValuesByMediaType(),this.valuesByMediaType},d.specialListItems=["ListHeader","ListFooter","HomePageTeaser"],d.prototype.isSpecialListItem=function(){return void 0===this.specialListItemType&&(this.specialListItemType=-1!==d.specialListItems.indexOf(this.type)),this.specialListItemType},d.prototype.calculateWantedArgs=function(a,c){var d=this,e=[];return angular.forEach(this.values,function(f,g){d.isGateField(g)||(f.signature||(f.signature=b[f.subType]||f.subType),!d.argsMatchingPolicy[g]||c&&_.get(d.mobileArgPolicy,[g])||e.push(a?g:f.signature))}),angular.forEach(this.referenceFields,function(a,b){!a||c&&_.get(d.mobileReferenceFields,[b])||e.push(b)}),e},d.prototype.getMediaField=function(){return _.find(this.values,{type:"media"})},d.prototype.calculateUnwantedArgs=function(){var a=this,c=[];return angular.forEach(this.values,function(d,e){d.signature||(d.signature=b[d.subType]||d.subType),a.argsMatchingPolicy[e]||c.push(d.signature)}),c},d.prototype.getWantedArgsList=function(a){var c=[b.media];return _.each(this.ceArray,function(b){b.isSpecialListItem()&&(c=c.concat(b.calculateWantedArgs(!1,a)))}),c},d.prototype.getWantedArgs=function(a){var b=this.aggregator?this.getWantedArgsList(a):this.calculateWantedArgs(!1,a);return b.sort().join("#")},d.prototype.isRelatedCEArgsMatchingPolicy=function(a){if(this.aggregator){for(var b=0;b<this.ceArray.length;b++)if(this.ceArray[b].argsMatchingPolicy===a)return!0}else if(this.argsMatchingPolicy===a)return!0;return!1},d.prototype.getMatchingFields=function(){var a=this,b=[];return this.aggregator?b=this.getMatchingFieldsList():angular.forEach(this.argsMatchingPolicy,function(c,d){c&&!a.isGateField(d)&&b.push(d)}),b},d.prototype.getMatchingFieldsList=function(){var a=[],b=!0;return _.each(this.ceArray,function(c){c.isSpecialListItem()?a=a.concat(c.getMatchingFields()):b&&(angular.forEach(c.argsMatchingPolicy,function(b,d){b&&"media"===c.values[d].type&&a.push(d)}),b=!1)}),a},d.prototype.getAggregationKey=function(){return this.aggregationKey||(this.aggregationKey=_.map(this.ceArray,function(a){return a.type}).join("#")),this.aggregationKey},d.prototype.hasMedia=function(){var a=this,b=this.getMatchingFields();return b?_.findIndex(b,function(b){return"media"===a.values[b].type})>-1:void 0},d.prototype.selectCeFields=function(){var a=this,b={};if(this.aggregator)this.fillValuesByMediaTypeList(),this.selectAggregatorSpecialItem("ListHeader","header",b),this.selectAggregatorSpecialItem("ListFooter","footer",b),b.media={name:"media",type:"media",subType:"image",value:this.getValuesByMediaType().image,source:"item"};else{this.fillValuesByMediaType();var c=this.getMatchingFields();c?c.forEach(function(c){var d=a.values[c];d&&"media"===d.type&&(d=_.clone(d),d.value=_.filter(d.value,function(b){return a.isMediaVisible(b)})),d&&(b[c]=d)}):b=this.values}return _.assign(b,this.referenceFields),b},d.prototype.selectAggregatorSpecialItem=function(a,b,c){var d=_.find(this.ceArray,{type:a});if(d){var e=d.getMatchingFields();e.forEach(function(a){var e=d.values[a];c[a]={name:a,type:e.type,subType:e.subType,value:_.clone(e.value,!0),source:b}})}},d.prototype.extractCeFields=function(a){this.allElements=a,this.ceFields=this.selectCeFields()},d.prototype.getReferenceValuesByMediaType=function(a){return this.allElements.filter(function(b){return b.type===a}).map(function(a){return a.getValuesByMediaType()})},d.prototype.extractReferences=function(a,b){return this.allElements.filter(function(a){return a.type===b}).map(function(b){return b.getFieldValue(a)})},d.prototype.getReferenceContentElements=function(a){return _.filter(this.allElements,function(b){return b.type===a})},d.prototype.extractReferenceValue=function(a,b,c){if(a&&b){var d=_.map(this.extractReferences(a,b),function(a){return a.value});if(c=c||"first",d.length>0)return"first"===c||1===d.length?d[0]:"last"===c?d[d.length-1]:d.join(", ")}},d.argSupportedMediaTypesToOptionalArgsMediaTypes=function(a){for(var b=[a],c=[],d=function(a,c,d){if(1===a.length)return!0;var e=d.slice(0,c),f=d.slice(c+1);return a.forEach(function(a){b.push(e.concat([[a]]).concat(f))}),!1};b.length>0;)a=b.shift(),a.length>0&&a.every(d)&&c.push(a.map(function(a){return a[0]}));return c};var e={gallery:"image",shape:"image",image:"image",video:"video",social:"social"},f={gallery:"image",shape:"image",image:"image",video:"video",social:"icon"};return d.prototype.extractMediaValue=function(a,b){var c,e,g,h=a.argList[b],i=this.getValuesByMediaType();if(a.isShapeLayout(a.getLayoutWithArgIndex(b))&&(i.shape||i.clipart)){var j=a.argList.map(function(b,c){return d.argToSupportedTypes(a,b,c)});d.argSupportedMediaTypesToOptionalArgsMediaTypes(j).some(function(a){var d=a[b];return(c=i[d])?(g=0,e=void 0,a.forEach(function(a,c){a===d&&(c===b&&(e=g),g++)}),c.length>=g?!0:void 0):!1})}else c=i[f[h.subType]],g=0,a.argList.forEach(function(a,c){a.subType===h.subType&&(c===b&&(e=g),g++)});return void 0!==e&&void 0!==c&&(c=c.filter(function(a,b){return b%g===e})),"image"===h.subType&&(c||(c=[]),i.extVideo&&c.push(i.extVideo[0]),i.video&&c.push(i.video[0])),void 0!==c&&0!==c.length?c:void 0},d.argToSupportedTypes=function(a,b,c){if("image"===b.subType){var d=a.getLayoutWithArgIndex(c);return a.isShapeLayout(d)?["shape","clipart","image"]:["image"]}return[b.subType]},d.prototype.extractField=function(a){var b=e[a.subType]||a.subType;return _.find(this.ceFields,function(c,d){return c.subType!==b||c.source&&a.source!==c.source?void 0:(c.name=d,!0)})},d.prototype.getArgumentValue=function(a,b){if(!isNaN(b)){var c=a.argList[b];if(c){var d,e;return c.isReference?d=this.extractReferenceValue(c.field,c.element,c.aggregation):"stringArray"===c.type?d=[]:"label"===c.subType?d=c.value:(e=this.extractField(c),e&&(d="media"===c.type||"gallery"===c.type?this.extractMediaValue(a,b):e.value)),d}}},d.prototype.ceFieldsChanged=function(){return!_.isEqual(this.prevCeFields,this.ceFields)},d.prototype.updatePrevCeFields=function(){this.prevCeFields=ob.deepClone(this.ceFields)},d.prototype.clearPrevCeFields=function(){this.prevCeFields=null},d}]),angular.module("siteGeneratorStaticsCoreAppInternal").service("defaultsService",["toasterService","modelTree","VerticalDefaultValues","contentElements","BackendLayoutPreset","storyServices","flags","dataFlags","PresetMediaType",function(a,b,c,d,e,f,g,h,i){function j(a,b){r=c.getDefaultSelectionValuesByVertical(a,b,!1,!1),s=c.getDefaultSelectionValuesByVertical(a,b,!1,!0)}function k(a){return a&&a.contentElement&&a.contentElement.isSpecialListItem()?a.parentContentElementType:""}function l(a){return b.getGeneralInformation()===a?"SiteHeader":m(a)}function m(a){return k(a)+a.contentElementType+(a.isListItem?"List":"")}function n(a,b){var c=a.getContentElement().getWantedArgs(b);return""===c?[]:c.split("#")}function o(a,b,c,d){if(c)return!0;var e=a.partitions?a.partitions[0].argList:a.layouts[0].argList,f=n(b,d);return!_.difference(f,e).length}function p(a,b){var c=a.data.priority;if(c){if(_.isNumber(c))return c;var d=c[l(b)];return _.isNumber(d)?d:99}return 99}var q="_partition",r={},s={};this.getLeSelection=function(a,b){var c=b.getTypeForLSSWithoutNodeId();return a[c]&&a[c].LE[0]},this.getLgHeightSelection=function(a,b){var c=b.id,d=b.getTypeForLSSWithoutNodeId();return a[d]&&a[d].LG[c]},this.getLgPartitionHeightSelection=function(a,b){var c=b.id,d=b.getTypeForLSSWithoutNodeId();return a[d]&&a[d].LG[c+q]},this.setDefaults=function(a,b){
j(a,b)},this.getDefaultsDB=function(a){return"footer"===a?s:r},this.init=function(a,b){return c.init(a,b).then(function(){j(a,b)})};var t={};this.getAllLayoutPresets=function(a,b){var c=b||"undefined";return(!t[c]||a)&&(t[c]=e.search({limit:1e3,forContent:b}).then(function(a){return _.map(a,function(a){if(a.data.zigZagState){var b=_.filter(a.data.groups,function(a){return!(a.isFooter||a.isHeader)});if(1===b.length&&b[0].layouts&&3===b[0].layouts.length){var c=b[0],d=_.clone(c);d.zigZag=!c.zigZag,d.layouts=[_.clone(c.layouts[1]),_.clone(c.layouts[0]),_.clone(c.layouts[1])];var e=_.findIndex(a.data.groups,c);a.data.groups.splice(e+1,0,d)}}return a})})),t[c]},this.getPresetsForNode=function(a,c,e,f){var j,k,l,m,n=this;c=c||a.getContentElementType();var p=a.isList();return p&&(j=b.getListHeader(a),k=b.getListFooter(a),l=_.filter(b.getListItems(a),function(a){return!a.isUserHidden()})),this.getAllLayoutPresets(!1,g.consumerMode?c:void 0).then(function(n){return _.filter(n,function(n){if(Boolean(f)!==Boolean(n.data.isMobile))return!1;if(g.consumerMode&&!h.areFulfilled(n))return!1;if(p!==n.data.isList)return!1;if((!_.contains(n.data.forContent,"Any")||d.uniqueElements[c])&&!_.contains(n.data.forContent,c))return!1;if(p){if(l.length){if(m=_.find(n.data.groups,function(a){return!a.isHeader&&!a.isFooter}),!m)return!1;if(!m.isAggregator&&!o(m,l[0],e,f))return!1;if(m.isAggregator&&!b.isAggregatorAllowed(a))return!1}if(j&&!j.isUserHidden()&&(m=_.first(n.data.groups),!("f"!==n.data.listHeaderLayoutFilter||m.isHeader&&o(m,j,e,f))))return!1;if(k&&!k.isUserHidden()&&(m=_.last(n.data.groups),!("f"!==n.data.listFooterLayoutFilter||m.isFooter&&o(m,k,e,f))))return!1;if(l.length%n.data.itemsInRow)return!1}else if(!n.data.isTpa&&(m=n.data.groups[0],!o(m,a,e,f)))return!1;return n.fixedSize||(_.each(n.data.groups,function(a){var b=a.layouts.length,c=(940-20*(b-1))/b;_.each(a.layouts,function(a){_.each(a.selections.overrides.variations,function(a){_.each(a,function(a){_.each(a,function(a){a.size&&a.size>1&&(a.size=a.size/c)})})})})}),n.fixedSize=!0),_.each(n.data.groups,function(a){_.each(a.layouts,function(b){var c=_.get(b,["selections","overrides","strips"]);c=_.values(c)[0],c=_.values(c)[0];var d=_.get(c,"columns");c&&d&&(a.columns=d,delete c.columns),a.columns&&a.columns.enable&&_.any(a.columns.singleColumnProps,function(a){return"image"===a.backgroundMode})&&b.mediaType!==i.COLUMNBG&&(b.mediaType=i.COLUMNBG)})}),!0})}).then(function(b){return a.isTpaNode()?b:n.sortByPriority(a,b)})},this.sortByPriority=function(a,c){var d=f.story.selectedPage===b.homePageId,e=_.sortByAll(c,function(b){return p(b,a)},function(a){var b=a.data.groups.length;return d?b:-b});return e},_.assign(this,{getCeType:m,getPriority:p})}]);var SocialLinkManager=function(){function a(){var b=this;this.platforms=[{name:a.PLATFORM_FACEBOOK,iconClass:"cc-icon-facebook",regex:/^(?:https?:\/\/)?(www\.)?facebook\.com\/(?:(?:\w)*#!\/)?(?:pages\/)?(?:[?\w\-]*\/)?(?:profile\.php\?id=(?=\d.*))?([\w\-]*)?/,darkRelativeUri:"0fdef751204647a3bbd7eaa2827ed4f9.png",lightRelativeUri:"23fd2a2be53141ed810f4d3dcdcd01fa.png"},{name:a.PLATFORM_TWITTER,iconClass:"cc-icon-twitter",regex:/^(?:https?:\/\/)?(www\.)?twitter\.com\/(?:(?:\w)*#!\/)?(?:pages\/)?(?:[\w\-]*\/)*([\w\-]*)/,darkRelativeUri:"c7d035ba85f6486680c2facedecdcf4d.png",lightRelativeUri:"01ab6619093f45388d66736ec22e5885.png"},{name:a.PLATFORM_INSTAGRAM,iconClass:"cc-icon-instagram",regex:/(?:(?:http|https):\/\/)?(?:www\.)?(?:instagram\.com|instagr\.am)\/([A-Za-z0-9-_]+)/,darkRelativeUri:"01c3aff52f2a4dffa526d7a9843d46ea.png",lightRelativeUri:"81af6121f84c41a5b4391d7d37fce12a.png"},{name:a.PLATFORM_PINTEREST,iconClass:"cc-icon-pinterest",regex:new RegExp(a.urlInternationalPrefix+"pinterest.com"+a.urlSuffix),darkRelativeUri:"8f6f59264a094af0b46e9f6c77dff83e.png",lightRelativeUri:"9c486556465843c5850fabfd68dfae49.png"},{name:a.PLATFORM_GOOGLE_PLUS,iconClass:"cc-icon-google-plus",regex:/^(?:https?:\/\/)?(www\.)?plus\.google\.com\/.?\/?.?\/?([0-9]*)/,darkRelativeUri:"05546d0902004bfabba0396e21f33f7d.png",lightRelativeUri:"eb9767422f0e4c41a507d3e67c4ebac8.png"},{name:a.PLATFORM_YOUTUBE,iconClass:"cc-icon-youtube",regex:new RegExp(a.urlPrefix+"(youtube.com|youtu.be)"+a.urlSuffix),darkRelativeUri:"78aa2057f0cb42fbbaffcbc36280a64a.png",lightRelativeUri:"203dcdc2ac8b48de89313f90d2a4cda1.png"},{name:a.PLATFORM_BLOGGER,iconClass:"cc-icon-blogger",regex:new RegExp(a.urlPrefix+"(\\w+.)?(blogger|blogspot)(\\.\\w+)+"),darkRelativeUri:"a136361a15884f6c9402139c6cd05766.png",lightRelativeUri:"a7bf05f977dc4a55ac45b1e7eaf67183.png"},{name:a.PLATFORM_FLICKR,iconClass:"cc-icon-flickr",regex:new RegExp(a.urlPrefix+"(flickr.com|flic.kr)"+a.urlSuffix),darkRelativeUri:"0b1f601e53184dc4b7a87cf240bd0374.png",lightRelativeUri:"10f375d9ba7f49d99fb90368342dc54e.png"},{name:a.PLATFORM_HOUZZ,iconClass:"cc-icon-houzz",regex:new RegExp(a.urlPrefix+"houzz.com"+a.urlSuffix),darkRelativeUri:"393712e1bfea435eb4ccb505a4fb494c.png",lightRelativeUri:"44f874686afb44fdb2ce1367da329d93.png"},{name:a.PLATFORM_LINKEDIN,iconClass:"cc-icon-linkedin",regex:new RegExp(a.urlInternationalPrefix+"linkedin.com"+a.urlSuffix),darkRelativeUri:"6ea5b4a88f0b4f91945b40499aa0af00.png",lightRelativeUri:"7528824071724d12a3e6c31eee0b40d4.png"},{name:a.PLATFORM_MYSPACE,iconClass:"cc-icon-myspace",regex:new RegExp(a.urlPrefix+"myspace.com"+a.urlSuffix),darkRelativeUri:"f0209b76a15e4b76acd779692ad512ff.png",lightRelativeUri:"c6cf4e69e1024a11b566fea104760ba6.png"},{name:a.PLATFORM_SOUNDCLOUD,iconClass:"cc-icon-soundcloud",regex:new RegExp(a.urlPrefix+"(soundcloud.com|snd.sc)"+a.urlSuffix),darkRelativeUri:"03ea2af965014a3eb32df628a4c18c0e.png",lightRelativeUri:"e3496b0865884e4ca74ea5377ed41068.png"},{name:a.PLATFORM_TUMBLR,iconClass:"cc-icon-tumblr",regex:new RegExp(a.urlPrefix+"([a-zA-Z0-9-]+.)?tumblr.com"),darkRelativeUri:"c32234fc66894bc4ae7a4003deef86fb.png",lightRelativeUri:"e5a7dd170fb04ed3b8eb8144b649651f.png"},{name:a.PLATFORM_VIMEO,iconClass:"cc-icon-vimeo",regex:new RegExp(a.urlPrefix+"vimeo.com"+a.urlSuffix),darkRelativeUri:"dbcb9dab6c244854b4146cde5958b170.png",lightRelativeUri:"4647e2b99f1549d7a0dc624a1b64af72.png"},{name:a.PLATFORM_VKONTAKTE,iconClass:"cc-icon-vkontakte",regex:new RegExp(a.urlPrefix+"(\\w+.)?vk.com"+a.urlSuffix),darkRelativeUri:"c75715fd5e2f4f788c067a22b53f2277.png",lightRelativeUri:"7f7f31e5b76844cc9f8af5c826c0b407.png"},{name:a.PLATFORM_ODNOKLASSNIKI,iconClass:"cc-icon-odnok",regex:new RegExp(a.urlPrefix+"ok.ru"+a.urlSuffix),darkRelativeUri:"982336b31261453582d50aa2496a582b.png",lightRelativeUri:"e2f48a1ca5e041339c65205acc3f862c.png"},{name:a.PLATFORM_GOOGLE_PLACES,iconClass:"cc-icon-google-places",regex:new RegExp(a.urlPrefix+"(google(.[a-z]+){1,2}/maps|maps.google.[^s]+)"+a.urlSuffix),darkRelativeUri:"390db90c2cec42d58bd3203fc21fe12e.png",lightRelativeUri:"22db839dd0a94a1c9dd91dafe2617dc1.png"},{name:a.PLATFORM_YELP,iconClass:"cc-icon-yelp",regex:new RegExp(a.urlPrefix+"yelp.com"+a.urlSuffix),darkRelativeUri:"75193bb5368a4c358f58c3eb98c198e5.png",lightRelativeUri:"3ae0375b94ba46fca1f4e6c0f7992fc9.png"},{name:a.PLATFORM_TRIP_ADVISOR,iconClass:"cc-icon-trip-advisor",regex:new RegExp(a.urlPrefix+"tripadvisor.com"+a.urlSuffix),darkRelativeUri:"17cf82e0d3fc4c11a370a8eedfefa0fb.png",lightRelativeUri:"a8d7a47b82bc4083afc6fbc2275498c7.png"},{name:a.VALID_CUSTOM_LINK,iconClass:"cc-icon-generic-social-link",regex:a.urlValidation,darkRelativeUri:"d3ee8f_a21cd4b9e8c0499fb0a2f235b6b6d9b0~mv2.png",lightRelativeUri:"d3ee8f_53dfd24b6fc741c1bb871a75935b73e6~mv2.png"},{name:this.invalidPlatformName,iconClass:"cc-icon-social-not-found",regex:new RegExp("this should not match anything, we just reference the invalid entry directly"),darkRelativeUri:"6501cbfcdbad4169aaf2cfadf0be2f31.png",lightRelativeUri:"6501cbfcdbad4169aaf2cfadf0be2f31.png"}],this.getPlatformByName=function(a){return"undefined"==typeof b.platformsByName&&(b.platformsByName={},b.platforms.forEach(function(a){b.platformsByName[a.name]=a})),b.platformsByName[a]}}return Object.defineProperty(a.prototype,"invalidPlatformName",{get:function(){return"social-not-found"},enumerable:!0,configurable:!0}),a.prototype.getPlatformNameByUrl=function(a){if(!a)return void 0;var b=_.find(this.platforms,function(b){return a.toLowerCase().match(b.regex)});return b?b.name:void 0},a.prototype.getPlatformIconClass=function(a,b){void 0===b&&(b=!1);var c=this.getPlatformByName(a),d=c?c.iconClass:this.getPlatformByName(this.invalidPlatformName).iconClass;return b?d.replace(/^cc-icon-/,""):d},a.prototype.getPlatformRelativePath=function(a){0!==a.indexOf("http")&&(a="http://"+a);var b=document.createElement("a");return b.href=a,b.pathname},a}();SocialLinkManager.PLATFORM_FACEBOOK="facebook",SocialLinkManager.PLATFORM_TWITTER="twitter",SocialLinkManager.PLATFORM_INSTAGRAM="instagram",SocialLinkManager.PLATFORM_PINTEREST="pinterest",SocialLinkManager.PLATFORM_GOOGLE_PLUS="googlePlus",SocialLinkManager.PLATFORM_YOUTUBE="youtube",SocialLinkManager.PLATFORM_BLOGGER="blogger",SocialLinkManager.PLATFORM_FLICKR="flickr",SocialLinkManager.PLATFORM_HOUZZ="houzz",SocialLinkManager.PLATFORM_LINKEDIN="linkedin",SocialLinkManager.PLATFORM_MYSPACE="myspace",SocialLinkManager.PLATFORM_SOUNDCLOUD="soundcloud",SocialLinkManager.PLATFORM_TUMBLR="tumblr",SocialLinkManager.PLATFORM_VIMEO="vimeo",SocialLinkManager.PLATFORM_VKONTAKTE="vkontakte",SocialLinkManager.PLATFORM_ODNOKLASSNIKI="odnoklassniki",SocialLinkManager.PLATFORM_GOOGLE_PLACES="googlePlaces",SocialLinkManager.PLATFORM_YELP="yelp",SocialLinkManager.PLATFORM_TRIP_ADVISOR="tripAdvisor",SocialLinkManager.VALID_CUSTOM_LINK="generic-social-link",SocialLinkManager.urlValidation=/^(https?:\/\/)?[^\s\.\/$?#]+\.[^\s\.\/$?#]{2,}[^\s]*$/i,SocialLinkManager.urlPrefix="^(?:https?://)?(www.)?",SocialLinkManager.urlInternationalPrefix="^(?:https?://)?([a-z]{1,3}.)?",SocialLinkManager.urlSuffix="/.+$",angular.module("siteGeneratorStaticsCoreAppInternal").service("socialLinkManager",SocialLinkManager);var DesignKit=function(){function a(a,b,c,d,e,f,g,h,i,j,k,l,m,n,o,p,q,r,s,t){this.designKitParameters=a,this.fontSizeCalculationUtils=b,this.fontsNotAllowedCapsStyle=c,this.fontsNotAllowedItalicStyle=d,this.themeChooser=e,this.LayoutElementFormatting=f,this.$log=g,this.componentStyles=h,this.previewService=i,this.storyServices=j,this.colorThiefService=k,this.toasterService=l,this.socialLinkManager=m,this.obMonitoring=n,this.documentServicesMediator=o,this.PresetMediaType=p,this.flags=q,this.tpaService=r,this.modelTree=s,this.previewColors=t,this.textIsOnStrip="textIsOnStrip",this.lightColors=[this.designKitParameters.L1,this.designKitParameters.L2,this.designKitParameters.L3],this.lightColorsSantaFormat=this.lightColors.map(this._santaFormatNumber),this.darkColors=[this.designKitParameters.D1,this.designKitParameters.D2,this.designKitParameters.D3],this.darkColorsSantaFormat=this.darkColors.map(this._santaFormatNumber),this.allColorsSantaFormat=this.lightColorsSantaFormat.concat(this.darkColorsSantaFormat),this.fieldSubTypeToIndexMap=this.designKitParameters.fieldSubTypeToIndexMap,this.coloringOptions=this.designKitParameters.coloringOptions,this.kitStatesOptions=this.designKitParameters.kitStatesOptions,this.textColoringOptionsOnL=this._createColoringOptions(this.darkColors),this.textColoringOptionsOnD=this._createColoringOptions(this.lightColors),this.selections={},this.presetSelections={},this.defaultCustomColor=this.darkColors[2],this.containerDefaultStyle=this.componentStyles.styles.container[0],this.typesThatShouldGetFullListConf=["Client"],this.tpaService.invertColor=this.invertColor.bind(this),this.documentServicesMediator.assignCalculateMobileHeaderStyle(this._setStyleOfHeaderMobile.bind(this)),this.coloringOptions=_.map(this.coloringOptions,function(a,b){return{id:b,value:a}}),this.kitStatesOptions=_.map(this.kitStatesOptions,function(a,b){return{id:b,value:a}}),this.themeChooser.registerDesignKitSetConfigurationsCallback&&this.themeChooser.registerDesignKitSetConfigurationsCallback(this._setConfigurationsOfKit.bind(this))}return a.$inject=["designKitParameters","fontSizeCalculationUtils","fontsNotAllowedCapsStyle","fontsNotAllowedItalicStyle","themeChooser","LayoutElementFormatting","$log","componentStyles","previewService","storyServices","colorThiefService","toasterService","socialLinkManager","obMonitoring","documentServicesMediator","PresetMediaType","flags","tpaService","modelTree","previewColors"],a.prototype._santaFormatNumber=function(a){return"{color_"+a+"}"},a.prototype._createColoringOptions=function(a){return _.map(this.coloringOptions,function(b){return b=b.split(","),[a[b[0]-1],a[b[1]-1],a[b[2]-1]]})},a.prototype._setStyleOfHeaderMobile=function(a){var b=this.documentServicesMediator.getTinyMenuComp(),c=this.documentServicesMediator.getStyleDefinitionByComp(b);c.skin="wysiwyg.viewer.skins.mobile.TinyMenuFullScreenSkin";var d=a?this.getColorOfStripMenu():this._getHeaderBgWithCurlyBraces();c.style.properties.iconcolor=this._isDarkColor(d)?this.lightColorsSantaFormat[0]:this.darkColorsSantaFormat[0],c.style.properties["alpha-borderColorSelected"]="0",c.style.properties["alpha-bordercolor"]="0",c.style.properties.textAlignment="center",c.style.properties.bg=d,c.style.properties.separatorHeight=0,c.style.properties.iconcolorSelected=this.lightColorsSantaFormat[0],c.style.properties.txt=this.lightColorsSantaFormat[0],c.style.properties.txts=this.lightColorsSantaFormat[2];var e=this._setNewCustomStyle(c);this.documentServicesMediator.setComponentStyleId(b,e),this.documentServicesMediator.updateLayout(b,{y:15})},a.prototype._isDarkColor=function(a){return-1!==this.darkColorsSantaFormat.indexOf(a)},a.prototype._getActiveKit=function(){return this.themeChooser.getActiveTheme("color")},a.prototype._getCompBgStyle=function(a){var b=this.documentServicesMediator.getStyleDefinitionByComp(a);return b.style.properties.bg},a.prototype._getHeaderComp=function(){return this.documentServicesMediator.getHeader()},a.prototype._getFooterComp=function(){return this.documentServicesMediator.getFooter()},a.prototype._getHeaderBg=function(){return this._getCompBgStyle(this._getHeaderComp())},a.prototype._getHeaderBgWithCurlyBraces=function(){return"{"+this._getHeaderBg()+"}"},a.prototype._getContrastedColor=function(a,b,c){var d=this._getSelectionsOfSegment(a),e=this._getColorOfFirstBackground(a,b);if(e===this.textIsOnStrip)return this.lightColors[0];var f,g,h,i,j,k=(c+1)%3,l=(c+2)%3;if(this._isDarkColor(e)?(f=this.textColoringOptionsOnD,h=this.lightColors,i=this.darkColorsSantaFormat):(f=this.textColoringOptionsOnL,h=this.darkColors,i=this.lightColorsSantaFormat),j=f[d.colorIndex],g=j[c],e===i[2]&&g===h[2]){var m=_.findIndex(f,function(a){return(a[c]===h[0]||a[c]===h[1])&&a[k]===j[k]&&a[l]===j[l]});d.colorIndex=m,g=f[d.colorIndex][c]}return g},a.prototype._hasLeStripImageOrVideo=function(a){return a&&a.overrides&&a.overrides.media?_.some(a.overrides.media,function(b,c){return a.argList[c]&&"media"===a.argList[c].type&&("Strip Image"===b.name||"Strip Video"===b.name||a.containingSegment.hasColumnWithMediaBackground())}):void 0},a.prototype._getColorOfFirstBackground=function(a,b){var c=a.containingLG.getLgData();if(b){var d=a.getLayoutSelectionStore();if(b.boxParentOverrideKey){var e=d.getOverride("style",a,b.boxParentOverrideKey)||this.containerDefaultStyle;if(e){var f=this._getStyleDefinition(e);if("0"!==f.style.properties["alpha-bg"])return this.getComponentCustomColor(a,b.boxParentOverrideKey)}}var g=a.getLENoError();if(void 0!==b.onMediaIndex&&g){if(this._hasLeStripImageOrVideo(g))return this.textIsOnStrip;var h=g.getArgValue(b.onMediaIndex),i=h&&h[0]&&this.colorThiefService.getColorOfImageBehindText(h[0],g,b);if(i){var j=this.colorThiefService.isColorDark(i);return j?this.darkColorsSantaFormat[0]:this.lightColorsSantaFormat[0]}}if(a.containingLG.isHeader()){var k=g&&g.getLayoutBySubType(b.subType);if(g&&g.isLayoutInMenuStripArea(k))return c.menuStrip.color;var l=this._getCompBgStyle(a.containingLG.isSiteHeader()?this._getHeaderComp():this._getFooterComp());if(l)return"{"+l+"}"}}if(a.hasColumnWithColorBackground())return this.getComponentCustomColor(a,"columnBg");if(c.strip&&c.strip.enable&&c.strip.color)return c.strip.color;var m=this.documentServicesMediator.getPageBackground(this.documentServicesMediator.getCurrentPageId());return m.ref.color},a.prototype._getColorOfField=function(a,b,c,d){c=c||d&&d.getLayoutBySubType(a);var e=this.fieldSubTypeToIndexMap[a];if(void 0!==e){var f=this._getContrastedColor(b,c,e);return f}},a.prototype._getHeaderTextColoringIndex=function(){var a=this._getActiveKit();return a.kitFonts.headerAndFooter&&a.kitFonts.headerAndFooter.headerTextColoring||0},a.prototype._getFooterTextColoringIndex=function(){var a=this._getActiveKit();return a.kitFonts.headerAndFooter&&a.kitFonts.headerAndFooter.footerTextColoring||0},a.prototype._getSelectionsOfPreviewSeg=function(a){var b=a.getTypeForLSSWithoutPartition();return this.presetSelections[a.page+b]},a.prototype._getSelectionsOfSegment=function(a){var b=a.getTypeForLSSWithoutPartition(),c=this._getSelectionsOfPreviewSeg(a);if(!c){var d="body"===a.sitePart&&a.isMobile&&a.getLENoError();if(d){var e=d.getAllDecorativeContainersLayout(),f=e.length,g=this._getColorIndexOfLGStrip(a.getDesktopSegment().containingLG);c=this._getActiveKit().configurations[g][f]}else this.selections[b]=this.selections[b]||{},c=this.selections[b]}return a.node?"GeneralDescription"===a.node.contentElementType?c.colorIndex=this._getFooterTextColoringIndex():c.colorIndex=c.colorIndex||0:c.colorIndex=this._getHeaderTextColoringIndex(),c},a.prototype._reseSelectionsOfSegment=function(a,b){var c=a.getTypeForLSSWithoutPartition();b&&(c=a.page+c);var d=b?this.presetSelections:this.selections;return d[c]={},d[c]},a.prototype.getComponentCustomColor=function(a,b,c){var d=c||this._getSelectionsOfSegment(a),e=d.cutsomColor&&d.cutsomColor[b];if(!e&&-1!==b.indexOf("container")){var f=this._getContainersKeysFromConf(d);f.length&&(e=d.cutsomColor[f[0]])}return e||this._santaFormatNumber(this.defaultCustomColor)},a.prototype._getTitleColor=function(a,b){return this._santaFormatNumber(this._getColorOfField("title",a,void 0,b))},a.prototype._getLongtextColor=function(a,b){return this._santaFormatNumber(this._getColorOfField("longText",a,void 0,b))},a.prototype._changeColoringIndex=function(a,b){var c=this._getSelectionsOfSegment(a);c.colorIndex=b,this._render()},a.prototype._checkIfAllTextInTheSameColor=function(a){var b=this._getSelectionsOfSegment(a),c=this.textColoringOptionsOnD[b.colorIndex];return c[0]===c[1]&&c[1]===c[2]},a.prototype._getStyleDefinition=function(a){return this.documentServicesMediator.getStyleDefinition(a)},a.prototype._setNewCustomStyle=function(a){return a.styleType="custom",this.documentServicesMediator.createCustomStyle(a)},a.prototype._render=function(){this.storyServices.emitLayoutSolutionChanged()},a.prototype._noBg=function(a,b){return b=b||"alpha-bg",!a[b]||"0"===a[b]},a.prototype._noBgForm=function(a){return this._noBg(a,"alpha-bg1")},a.prototype._noBorder=function(a){return!a.brd||"0"===a.brd},a.prototype._checkIfSegmentHasMedia=function(a){return a.wantedArgs&&-1!==a.wantedArgs.indexOf("m#")},a.prototype._setStripPaddingTop=function(a,b,c,d){return d&&(b/=2),(0===a.strip.paddingTop||a.strip.presetTopIs0)&&c?(a.strip.presetTopIs0=!0,void(a.strip.paddingTop=0)):void(a.strip.paddingTop=b)},a.prototype._setStripPaddingBottom=function(a,b,c,d){return d&&(b/=2),(0===a.strip.paddingBottom||a.strip.presetBottomIs0)&&c?(a.strip.presetBottomIs0=!0,void(a.strip.paddingBottom=0)):(a.strip.paddingBottom=b,a.bottomLine.topMargin=this.bottomLineTopMargin,void(a.bottomLine.bottomMargin=0))},a.prototype._getPaddingWithHeaderOrFooter=function(a,b,c,d){var e=1;if(c)e*=this.designKitParameters.headerWithLeStrip;else{var f=this._getCompBgStyle(a);e*=-1!==(b.strip.color||this.darkColorsSantaFormat[0]).indexOf(f)?this.designKitParameters.topOfFirstLgSameColorAsHeaderFactor:this.designKitParameters.topOfFirstLgdifferentColorAsHeaderFactor}return e*d},a.prototype.getPaddingOfColumnsIfPart=function(a){var b=a.hasColumnWithAnyBackground();return b&&a.containingLG.getColumnsData().props},a.prototype.shouldUseColumnsMargin=function(a){return!a.isMobile&&(a.width<900||"ListHeader"===a.contentElement.type)},a.prototype.isNumber=function(a){return"number"==typeof a},a.prototype.segIsProGalleryFullWidth=function(a){return"ProGallery_Widget"===a.contentElement.type&&_.get(a,"node.dockToWidget.fullWidth")},a.prototype._manageBodyStripsPadding=function(a,b,c){var d=this;this.bottomLineTopMargin=this.designKitParameters.sameListFactor*this.designKitParameters.sameColorFactorEach*c,_.forEach(b,function(e,f){var g=a[f],h=d._checkIfSegmentHasMedia(g),i=g.getTypeForLSS(),j=g.node&&"Blog"===g.node.contentElementType;if(j)return e.strip.paddingTop=0,void(e.strip.paddingBottom=0);var k,l,m=d.getPaddingOfColumnsIfPart(g),n=d.shouldUseColumnsMargin(g)&&m&&(m.siteMargin||m.columnsMargin),o=!(e&&e.strip&&e.strip.enable),p=f+1;if(o){var q=g.getLE(),r=q.getLayoutBySubType("image");k=q.height===r.absoluteTop+r.height,l=0===r.absoluteTop}if(d.segIsProGalleryFullWidth(g)&&(k=!0,l=!0),0===f){var s=g.node.isListHeader()&&m&&m.siteMargin;if(d.isNumber(s)||d.isNumber(n))d._setStripPaddingTop(e,d.isNumber(s)?s:n,void 0,g.isMobile);else{var t=d._getPaddingWithHeaderOrFooter(d._getHeaderComp(),e,l,c);d._setStripPaddingTop(e,t,h,g.isMobile)}}var u=f===b.length-1;if(u)if(d.isNumber(n))d._setStripPaddingBottom(e,n,void 0,g.isMobile);else{var v=d._getPaddingWithHeaderOrFooter(d._getFooterComp(),e,k,c);d._setStripPaddingBottom(e,v,h,g.isMobile)}else{var w=b[p],x=a[p],y=e.strip.color,z=w.strip.color,A=x.getTypeForLSS(),B=d._checkIfSegmentHasMedia(x),C=y===z;A=A.replace("zigzag",""),i=i.replace("zigzag","");var D=-1!==i.indexOf(A)||-1!==A.indexOf(i),E=D&&-1===i.indexOf("ListHeader")&&-1===A.indexOf("ListFooter"),F=E?d.designKitParameters.sameListFactor:1;F*=!D&&C?d.designKitParameters.differentListSameColorFactor:1;var G=!(w&&w.strip&&w.strip.enable),H=d.getPaddingOfColumnsIfPart(x),I=d.shouldUseColumnsMargin(x)&&H&&H.columnsMargin,J=d.shouldUseColumnsMargin(x)&&H&&(x.node.isListHeader()?H.siteMargin:H.siteMargin||H.columnsMargin),K=void 0;if(G){var L=x.getLE(),M=L.getLayoutBySubType("image");K=0===M.absoluteTop}if(d.segIsProGalleryFullWidth(x)&&(K=!0),E&&d.isNumber(I)?(d._setStripPaddingBottom(e,d.designKitParameters.leStripWithLeStripFactor,void 0,g.isMobile),d._setStripPaddingTop(w,I,void 0,x.isMobile)):k&&K?(d._setStripPaddingBottom(e,d.designKitParameters.leStripWithLeStripFactor,h,g.isMobile),d._setStripPaddingTop(w,d.designKitParameters.leStripWithLeStripFactor,B,x.isMobile)):k?(d._setStripPaddingBottom(e,0,h,g.isMobile),d._setStripPaddingTop(w,F*d.designKitParameters.colorWithLeStripFactor*c,B,x.isMobile)):K?(d._setStripPaddingBottom(e,F*d.designKitParameters.colorWithLeStripFactor*c,h,g.isMobile),d._setStripPaddingTop(w,0,B,x.isMobile)):C?(d._setStripPaddingBottom(e,F*d.designKitParameters.sameColorFactorEach*c,h,g.isMobile),d._setStripPaddingTop(w,F*d.designKitParameters.sameColorFactorEach*c,B,x.isMobile)):(d._setStripPaddingBottom(e,F*d.designKitParameters.differentColorFactorEach*c,h,g.isMobile),d._setStripPaddingTop(w,F*d.designKitParameters.differentColorFactorEach*c,B,x.isMobile)),!E&&d.isNumber(J)){var N=D;(!N||h)&&d._setStripPaddingTop(w,N?I:J,void 0,x.isMobile)}if(!E&&d.isNumber(n)){var O=D;d._setStripPaddingBottom(e,O?d.designKitParameters.leStripWithLeStripFactor:n,void 0,g.isMobile)}}d.tpaService.isDynamicHeightComp(g.contentElement.type)&&d._setStripPaddingBottom(e,40,void 0,g.isMobile)})},a.prototype._getContainersKeysFromConf=function(a){return _.keys(_.pick(a.cutsomColor,function(a,b){return-1!==b.indexOf("container")}))},a.prototype._getContainersKeyOfLayouts=function(a,b){return _.map(b,function(b){return a.getOverrideKey(b)})},a.prototype._adjustConfKeysToSegment=function(a,b){if(b.length>0){var c=this._getContainersKeysFromConf(a);_.forEach(c,function(c,d){b[d]!==c&&(a.cutsomColor[b[d]]=a.cutsomColor[c],delete a.cutsomColor[c])})}},a.prototype._clearUnusedCustomContainers=function(a,b){var c=this._getContainersKeysFromConf(a),d=this._getContainersKeyOfLayouts(b,b.getLE().getAllDecorativeContainersLayout());_.forEach(c,function(b){-1===d.indexOf(b)&&delete a.cutsomColor[b]})},a.prototype._setConfiguration=function(a,b,c,d){c=c||this._getActiveKit();var e=a.getLENoError();if(e){var f=this._getContainersKeyOfLayouts(a,e.getAllDecorativeContainersLayout());a.hasColumnWithColorBackground()&&f.unshift("columnBg");var g=f.length;if(0>g||g>2)return void this.toasterService.error("number of containers is not valid: "+g,!0);var h,i;if(!c.configurations[b])return a.node.isTpaNode()||this.$log.error("no configuration for regular segment - "+a.node.contentElementType),h=a.containingLG,i=h.getLgData(),i.strip=i.strip||{},void(i.strip.color=this.allColorsSantaFormat[b]);var j=c.configurations[b][g];if(!j)return void this.toasterService.error(c.displayName+" kit: No configurations for : "+g+" containers. color: "+this.indexToKitColor(b),!0);j=ob.deepClone(j),this._adjustConfKeysToSegment(j,f);var k=this._reseSelectionsOfSegment(a,d);_.each(j,function(a,b){"stripColor"!==b&&(k[b]=a)}),h=a.containingLG,i=h.getLgData(),i.strip=i.strip||{},i.strip.color=j.stripColor,i.strip.enable||("space"===i.bottomLine.line&&(i.bottomLine.line="line",i.bottomLine.enable=!1),"space"===i.topLine.line&&(i.topLine.line="line",i.topLine.enable=!1),i.strip.enable=!0,i.strip.paddingBottom=80,i.strip.paddingTop=80,i.strip.scrollType="scroll",i.strip.bgPosition="center",i.strip.fittingType="fill",i.strip.enable=!0,i.strip.style="strc1",i.strip.url="none")}},a.prototype._setConfigurationForAllSegmentsOfLG=function(a,b,c,d){var e=this;c=c||this._getActiveKit(),_(a.segments).uniq(_.method("getTypeForLSSWithoutPartition")).each(function(a){e._setConfiguration(a,b,c,d)}).value()},a.prototype._getFirstNodeOfLg=function(a){return a.segments[0].node},a.prototype._kitHasPattern=function(a){return a.kitFonts&&a.kitFonts.confPattern&&a.kitFonts.confPattern.length},a.prototype._getIdentifyingNodeOfLg=function(a){return this._getFirstNodeOfLg(a).identifyingNodeId},a.prototype.setTpaBg=function(a){a.getLgData().strip.color=this.flags.invertTpaPalette?this.darkColorsSantaFormat[0]:this.lightColorsSantaFormat[0]},a.prototype._segConfigurationsForPage=function(a,b){var c=a.kitFonts.confPattern.length,d=0,e=a.kitFonts.listConfiguration.id;void 0===e&&this.toasterService.error("list configuration is not defined",!0);var f=b.getSelectedSolution();if(f)for(var g,h,i,j=0;j<f.length;j++)if(g=f[j],h=a.kitFonts.confPattern[d%c].id,i=this._getFirstNodeOfLg(g),i.isTpaNode())this.setTpaBg(g);else{var k=i&&-1!==this.typesThatShouldGetFullListConf.indexOf(i.contentElementType),l=i&&i.isListItem&&"ListHeader"!==i.contentElementType;if(a.kitFonts.listConfiguration&&(l||k)){e=a.kitFonts.listConfiguration.id,1===g.segments.length||k?e===h&&d++:(e=h,d++);for(var m=i.identifyingNodeId;g&&this._getIdentifyingNodeOfLg(g)===m;)this._setConfigurationForAllSegmentsOfLG(g,e,a),j++,g=f[j];j--}else{this._setConfigurationForAllSegmentsOfLG(g,h,a);var n=f[j+1];"ListHeader"===g.contentType&&n&&this._getIdentifyingNodeOfLg(g)===this._getIdentifyingNodeOfLg(n)&&n.segments.length>1||d++}}},a.prototype._setConfigurationsOfKit=function(a){var b=this;if(this._kitHasPattern(a)){var c=this.layoutSolver.siteSolutions.body;_.each(c,function(c){b._segConfigurationsForPage(a,c)})}},a.prototype._getConfigurationToDisplayOfKit=function(a){var b=this;if(a.configurations){var c=[];return _.forEach(a.configurations,function(a,d){a&&c.push({id:d,display:b.indexToKitColor(d)})}),c}},a.prototype._indexToKitColor=function(a){return(Math.floor(a/3)?"D":"L")+(a%3+1)},a.prototype._setSpace=function(a,b){a.enable=!0,a.line="space",a.space=b},a.prototype._getColorIndexOfLGStrip=function(a){if(a){var b=a.getLgData();if(b.strip&&b.strip.enable)return this.allColorsSantaFormat.indexOf(b.strip.color)}},a.prototype._getButtonColors=function(a){var b,c=a.containingSegment,d=a.getLayoutBySubType("button");if(a.getAllDecorativeContainersLayout().length>0&&void 0===d.boxParentOverrideKey){var e=this.allColorsSantaFormat.indexOf(a.containingLG.getLgData().strip.color),f=this._getActiveKit();f.configurations[e]||(this.obMonitoring.error("no configuration",{currentKitName:f.displayName,confIndex:e}),e=_.findIndex(f.configurations)),b=f.configurations[e][0]}var g=this.getComponentCustomColor(c,"buttontext",b),h=this.getComponentCustomColor(c,"buttonbg",b),i=this._getColorOfFirstBackground(c,d);return i===this.textIsOnStrip&&(i=this.darkColorsSantaFormat[0],h=this.lightColorsSantaFormat[0],g=this.darkColorsSantaFormat[0]),{firstBgColor:i,bgColor:h,textColor:g}},a.prototype.getFontOverride=function(a,b,c,d){var e=this.fontSizeCalculationUtils.fontOfFieldType(a,b),f=e&&e.aFont;if(f){if(c){c=this.fontSizeCalculationUtils.adjustFontExtraSize(c,e.category);var g=this.fontSizeCalculationUtils.addAndNormalizeFont(f,c,e.category,d);f=g.newFont}return f}},a.prototype.getFontFormatting=function(a,b,c,d){var e=a.node,f=this._getSelectionsOfSegment(a),g=this.fontSizeCalculationUtils.getCategoryOfCE(e,b);if(g){var h=this.themeChooser.getActiveFontTheme();if(h.kitFonts&&h.kitFonts[g]){var i=h.kitFonts[g];f[b]instanceof this.LayoutElementFormatting||(f[b]=new this.LayoutElementFormatting);var j=f[b];if(!d){var k=this._getColorOfField(b,a,c);k&&j.setColor(k)}j.setBold(!!i.Bold);var l=!1;i.Italic&&c&&c.fontFamily&&(l=_.any(this.fontsNotAllowedItalicStyle.names,function(a){return c.fontFamily.includes(a)})),j.setItalic(!!i.Italic&&!l);var m=!1;return i.Caps&&c&&c.fontFamily&&(m=_.any(this.fontsNotAllowedCapsStyle.names,function(a){return c.fontFamily.includes(a)})),j.setCapsLock(!!i.Caps&&!m),j.setUnderline(!1),j.setBGColor(""),j}}},a.prototype.getFormattingForRichTextEditor=function(a,b){var c=new this.LayoutElementFormatting,d=this.fontSizeCalculationUtils.getCategoryOfCE(a,b);if(d){var e=this.themeChooser.getActiveFontTheme();if(e.kitFonts&&e.kitFonts[d]){var f=e.kitFonts[d];c.setBold(!!f.Bold),c.setItalic(!!f.Italic),c.setUnderline(!1)}}return c},a.prototype.getDefaultBackgroundColor=function(){return this._santaFormatNumber(this.lightColors[0])},a.prototype.getD1Color=function(){return this._santaFormatNumber(this.darkColors[0])},a.prototype.getTextColoringOptions=function(){return this.coloringOptions},a.prototype.getKitStatesOptions=function(){return this.kitStatesOptions},a.prototype.changeColoringIndex=function(a,b){this._changeColoringIndex(a,b)},a.prototype.getColoringIndex=function(a){var b=this._getSelectionsOfSegment(a);return b.colorIndex},a.prototype.checkIfAllTextInTheSameColor=function(a){return this._checkIfAllTextInTheSameColor(a)},a.prototype.setComponentCustomColor=function(a,b,c){var d=this._getSelectionsOfSegment(a);d.cutsomColor=d.cutsomColor||{},d.cutsomColor[b]=c.pointer,this._render()},a.prototype.getBoxColoredStyleDefinition=function(a,b,c){var d=b.containingSegment,e=this._getStyleDefinition(a),f=e.style.properties;if("header"===d.sitePart){var g=this._getActiveKit(),h=g.kitFonts.headerAndFooter&&g.kitFonts.headerAndFooter.box;f.brd=h||f.brd,f.bg=h||f.bg}else this._noBg(f)?f.brd=this._checkIfAllTextInTheSameColor(d)?this.getComponentCustomColor(d,c):this._getTitleColor(d,b):f.bg=this.getComponentCustomColor(d,c);return e},a.prototype.getBoxColoredStyle=function(a,b,c){return this._setNewCustomStyle(this.getBoxColoredStyleDefinition(a,b,c))},a.prototype.getButtonColoredStyleDefinition=function(a,b){var c=this._getButtonColors(b),d=c.firstBgColor,e=c.bgColor,f=c.textColor,g=this._getStyleDefinition(a),h=g.style.properties;if(this._noBg(h))if(this._noBorder(h)){h.txt=e;var i=d;this.lightColorsSantaFormat[1]===i?h.txth=this.lightColorsSantaFormat[0]:h.txth=this.lightColorsSantaFormat[1]}else h.txt=e,h.brd=e,h.bgh=e,h["alpha-bgh"]="1",h.txth=d,h["alpha-brdh"]="0";else h.txt=f,h.txth=f,
h.bg=e,h.bgh=e,h["alpha-bgh"]="0.6";return g},a.prototype.getButtonColoredStyle=function(a,b){return this._setNewCustomStyle(this.getButtonColoredStyleDefinition(a,b))},a.prototype.getLineColoredStyleDefinition=function(a,b,c,d){var e=b.containingSegment,f=this._getStyleDefinition(a),g=f.style.properties;if(b.isHeader)if(d.componentProperties&&d.componentProperties.fullScreenModeOn){var h=this._getHeaderBgWithCurlyBraces();this._isDarkColor(h)?g.brd=this.lightColorsSantaFormat[0]:g.brd=this.darkColorsSantaFormat[0],g.lnw="1px",g["alpha-brd"]=.15}else g.brd=this._getTitleColor(e,b);else if(this._checkIfAllTextInTheSameColor(e))g.brd=this.getComponentCustomColor(e,c);else{var i=this._getColorOfField(d.decorationKey,e,void 0,b);g.brd=this._santaFormatNumber(i)}return f},a.prototype.getLineColoredStyle=function(a,b,c,d){return this._setNewCustomStyle(this.getLineColoredStyleDefinition(a,b,c,d))},a.prototype.getMenuColoredStyle=function(a,b){var c=this.getMenuColoredStyleDefinition(a,b);return c?this._setNewCustomStyle(c):a},a.prototype.getMenuColoredStyleDefinition=function(a,b){var c,d=this._getActiveKit(),e=!b.isMobile()&&b.containingSegment.containingLG.getLgData().menuStrip&&b.containingSegment.containingLG.getLgData().menuStrip.enable,f=this._getHeaderBgWithCurlyBraces(),g=!e&&this._isDarkColor(f),h=e&&this._isDarkColor(d.kitFonts.headerAndFooter.stripHeader);if(c=g||h?{txt:this.lightColorsSantaFormat[0],txth:this.lightColorsSantaFormat[1],txts:this.lightColorsSantaFormat[1]}:{txt:this.darkColorsSantaFormat[0],txth:this.darkColorsSantaFormat[1],txts:this.darkColorsSantaFormat[1]}){var i=this._getStyleDefinition(a),j=i.style.properties;return _.forEach(c,function(a,b){j[b]=a}),e?j.bgDrop=this.getColorOfStripMenu(d):j.bgDrop=this._getHeaderBg(),i}},a.prototype.getCartColoredStyle=function(a){var b=this._getActiveKit(),c=a.containingSegment.containingLG.getLgData().menuStrip&&a.containingSegment.containingLG.getLgData().menuStrip.enable,d=c?this.getColorOfStripMenu(b):this._getHeaderBgWithCurlyBraces(),e=this._isDarkColor(d);return this.designKitParameters.defaultCartStyle.style.properties.param_color_cartWidget_cartIcon="color_"+(e?this.lightColors[0]:this.darkColors[0]),this.designKitParameters.defaultCartStyle.style.properties.param_color_cartWidget_cartIconNumber=this.designKitParameters.defaultCartStyle.style.properties.param_color_cartWidget_cartIcon,this._setNewCustomStyle(this.designKitParameters.defaultCartStyle)},a.prototype.getShapeColor=function(a){var b=a.containingSegment;return this._getTitleColor(b,a)},a.prototype.getImageColoredStyle=function(a,b,c,d){var e=this.getImageColoredStyleDefinition(a,b,c,d);return e?this._setNewCustomStyle(e):a},a.prototype.getImageColoredStyleDefinition=function(a,b,c,d){if(-1===a.indexOf("tpa")&&-1===a.indexOf("tpm")&&-1===a.indexOf("thm")){var e,f=this._getStyleDefinition(a),g=f.style.properties;if(g.brd){var h=b.containingSegment,i=b.getAllDecorativeContainersLayout();if(i.length){var j=i[0],k=h.getOverrideKey(j);if(c.boxParentOverrideKey!==k){var l=this._getStyleDefinition(d.style[k]||j.style),m=l.style.properties;e=this._noBg(m)?this._checkIfAllTextInTheSameColor(h)?this.getComponentCustomColor(h,k):this._getTitleColor(h,b):this.getComponentCustomColor(h,k)}}return e=e||this._getTitleColor(h,b),g.brd=e,f}}},a.prototype.getFormColoredStyle=function(a,b){return this._setNewCustomStyle(this.getFormColoredStyleDefinition(a,b))},a.prototype.getFormColoredStyleDefinition=function(a,b){var c=this._getStyleDefinition(a),d=c.style.properties,e=b.containingSegment,f=this._getLongtextColor(e,b),g=this._isDarkColor(f)?this.lightColorsSantaFormat[0]:this.darkColorsSantaFormat[0];return this._noBgForm(d)?(d.brd=f,d.labelTxt=f,d.txt1=f,d.txt3=f,d.txt4=f,d.bg2=f,d.txt2=g):(d.bg1=f,d.labelTxt=g,d.bg2=f,d.txt2=g,d.txt1=g,d.txt3=g),c},a.prototype.saveDesignKitConfiguration=function(a){var b=this,c=this._getActiveKit();if(c.Custom)return void this.toasterService.error("Can't save configuration for custom theme",!0);if(!this.themeChooser.isKit(c))return void this.toasterService.error("Theme is not kit",!0);var d=a.segments[0],e=this._getSelectionsOfSegment(d);e=ob.deepClone(e),this._clearUnusedCustomContainers(e,d);var f=_.pick(e,function(a){return!(a instanceof b.LayoutElementFormatting)}),g=a.getLgData(),h=g.strip.color;f.stripColor=h;var i=this.allColorsSantaFormat.indexOf(h);if(-1===i)return void this.toasterService.error("Strip color isn't defined",!0);var j=d.getLE();c.configurations=c.configurations||[],c.configurations[i]=c.configurations[i]||[];var k=j.getAllDecorativeContainersLayout().length;return 0>k||k>2?void this.toasterService.error("number of containers is not valid: "+k,!0):(c.configurations[i][k]=ob.deepClone(f),this.themeChooser.saveTheme(c),void this.toasterService.info("configuration saved for color "+i+" and "+k+" containers",!0))},a.prototype.getArrayColors=function(){return this.allColorsSantaFormat},a.prototype.getArrayColorsHex=function(a){var b=this.lightColors.concat(this.darkColors);a=a||this._getActiveKit();var c=a.definition.properties;return _.map(b,function(a){var b=_.clone(c["color_"+a]);return b.pointer="{color_"+a+"}",b})},a.prototype.serialize=function(){return this.selections},a.prototype.deserialize=function(a){this.selections=a||this.selections},a.prototype.getGsu=function(a){var b=a&&a.designPolicy&&a.designPolicy.formula||"dp0";return this.designKitParameters.dpToGsu[b]},a.prototype.manageStripsPadding=function(a,b,c){var d=_.map(a,"segments[0]");if(d&&0!==d.length){var e=this.getGsu(d[0].getLayoutSelectionStore());if("body"===c)this._manageBodyStripsPadding(d,b,e);else{var f=e*this.designKitParameters.smallHeaderFooterPaddingBottomFactor,g=d[0].getLE(),h=g&&b[0].menuStrip,i=h&&h.enable;if("header"===c){var j=g&&g.getLayoutBySubType("menu"),k=j&&j.top;i?0===k?(this._setSpace(b[0].topLine,h.paddingTop),this._setSpace(b[0].bottomLine,f)):(this._setSpace(b[0].topLine,f),this._setSpace(b[0].bottomLine,h.paddingBottom)):(this._setSpace(b[0].bottomLine,f),this._setSpace(b[0].topLine,f))}"footer"===c&&b[0]&&(this._setSpace(b[0].topLine,f),this._setSpace(b[0].bottomLine,i?h.paddingBottom:f))}}},a.prototype.getConfigurationsOfActiveKit=function(){return this._getConfigurationToDisplayOfKit(this._getActiveKit())},a.prototype.getConfigurationsOfKit=function(a){return this._getConfigurationToDisplayOfKit(a)},a.prototype.getConfigurationOfLg=function(a){var b=this._getColorIndexOfLGStrip(a);return{id:b,display:this.indexToKitColor(b)}},a.prototype.indexToKitColor=function(a){return this._indexToKitColor(a)},a.prototype.setConfiguration=function(a,b){this._setConfiguration(a,b),this._render()},a.prototype.setConfigurationForSectionByConfId=function(a,b,c,d){var e,f,g=this._getActiveKit();e=this._getFirstNodeOfLg(a[0]);var h=this.getBgDefaultColorConfIdForSection(a,d),i=h.confIdForFirstLG,j=h.confIdForSecondLG,k=e&&e.isListItem&&!e.isListHeader();f=e&&(k||-1!==this.typesThatShouldGetFullListConf.indexOf(e.contentElementType)),i=i||(f?g.kitFonts.listConfiguration.id:b),this._setConfigurationForAllSegmentsOfLG(a[0],i,g,!c);var l=a[1];if(l){e=this._getFirstNodeOfLg(l),f=1===l.segments.length||e&&-1!==this.typesThatShouldGetFullListConf.indexOf(e.contentElementType),b=f?g.kitFonts.listConfiguration.id:b,j=j||b;for(var m=1;m<a.length;m++)this._setConfigurationForAllSegmentsOfLG(a[m],j,g,!c)}},a.prototype.setConfigurationForHeaderFooter=function(a,b){var c=this;_.forEach(a,function(a){var d=a.getLgData();d.menuStrip&&d.menuStrip.enable&&(d.menuStrip.color="footer"===b?c.getColorOfCopyStrip():c.getColorOfStripMenu())})},a.prototype.setSpecificConfigurationForSection=function(a,b,c,d){var e,f,g=this.getBgDefaultColorConfIdForSection(a,d),h=g.confIdForFirstLG,i=g.confIdForSecondLG;b.length>1?(e=i||this._getColorIndexOfLGStrip(b[1]),f=h||this._getColorIndexOfLGStrip(b[0])):e=h||i||this._getColorIndexOfLGStrip(b[0]),this.setSpecificConfigurationForSectionByConfId(a,e,f,c)},a.prototype.setSpecificConfigurationForSectionByConfId=function(a,b,c,d){var e=this,f=this._getActiveKit();_.forEach(a,function(a,g){e._setConfigurationForAllSegmentsOfLG(a,0===g&&void 0!==c?c:b,f,!d)})},a.prototype.setConfigurationForSection=function(a,b,c,d,e){var f,g=this._getActiveKit(),h=this._getColorIndexOfLGStrip(b),i=this._getColorIndexOfLGStrip(c),j=void 0!==h,k=void 0!==i,l=g.kitFonts.confPattern;if(a){var m=a[0],n=m.segments[0].node;if(n&&n.isTpaNode())return this.setTpaBg(m),!0}if(j||k)if(j&&!k){var o=_.findIndex(l,{id:h});f=(o+1)%l.length}else if(!j&&k){var p=_.findIndex(l,{id:i});f=(p-1+l.length)%l.length}else{var q=_.filter(l,function(a){return a.id!==h&&a.id!==i});if(q.length)f=l.indexOf(q[0]);else{var r=_.findIndex(l,{id:i});f=r}}else f=0;if(void 0!==f){var s=l[f].id;this.setConfigurationForSectionByConfId(a,s,d,e)}return!0},a.prototype.resetPresetSelections=function(){this.presetSelections={}},a.prototype.getSectionSelections=function(a){var b=this,c={};return _.each(a,function(a){_.each(a.segments,function(a){var d=a.getTypeForLSSWithoutPartition();c[d]=ob.deepClone(b._getSelectionsOfSegment(a))})}),c},a.prototype.setSectionSelections=function(a,b){var c=this;_.each(a,function(a){_.each(a.segments,function(a){var d=a.getTypeForLSSWithoutPartition();c.selections[d]=ob.deepClone(b[d])})})},a.prototype.mergePresetSelections=function(a,b,c){var d=this;_.each(b,function(b,e){_.each(b.segments,function(b,f){var g=c&&c[e].segments[f],h=g&&g.typeForLSSWithoutPartition||b.typeForLSSWithoutPartition,i=d.presetSelections[a+h];i||h===b.typeForLSSWithoutPartition||(i=ob.deepClone(d.selections[h])),d.selections[b.typeForLSSWithoutPartition]=i})})},a.prototype.getPropsOfTpaGallery=function(a,b){var c=this._getActiveKit(),d=c.definition.tpaGalleriesProps&&c.definition.tpaGalleriesProps[a.replace(/\./g,"_")];return d?(d=_.clone(d),b||delete d.fitToScreenWidth,d):void 0},a.prototype.getColorOfStripMenu=function(a){return a=a||this._getActiveKit(),a.kitFonts.headerAndFooter&&a.kitFonts.headerAndFooter.stripHeader},a.prototype.getColorOfCopyStrip=function(){var a=this._getActiveKit();return a.kitFonts.headerAndFooter&&a.kitFonts.headerAndFooter.stripFooter},a.prototype.modifySocialImages=function(a,b,c){var d=this,e=this._getColorOfFirstBackground(b.containingSegment,c),f=this._isDarkColor(e);_.forEach(a,function(a){if(a.platform){var b=d.socialLinkManager.getPlatformByName(a.platform);b&&(a.relativeUri=f?b.lightRelativeUri:b.darkRelativeUri)}})},a.prototype.getHeaderBg=function(){return this._getHeaderBg()},a.prototype.getFooterBg=function(){return this._getCompBgStyle(this._getFooterComp())},a.prototype.adjustStyleOfGallery=function(a){var b=ob.deepClone(a);return _.forEach(b,function(a,c){-1!==c.indexOf("fnt")&&delete b[c]}),b},a.prototype.registerWithLayoutSolver=function(a){this.layoutSolver=a},a.prototype.isDarkColor=function(a){return"{"!==a[0]?(this.$log.error('Color should be in Santa format, for example "{color_11}"'),!1):this._isDarkColor(a)},a.prototype.invertColor=function(a,b,c){var d=this.lightColorsSantaFormat.indexOf(a);if(d>=0)return this.darkColorsSantaFormat[d];var e=this.darkColorsSantaFormat.indexOf(a);if(e>=0)return this.lightColorsSantaFormat[e];if(b&&c)throw new Error(a+" is not from the palette - it is neither dark nor light.\n    link to preset story: "+c.story+"\n    presetId: "+c.id+"\n    nodeId: "+c.nodeId+"\n    key: "+b);return a},a.prototype.getColorSignature=function(a,b){var c=this;return _.map(a,function(a){var b=a.segments[0].getLE();if(1===a.segments.length&&1===b.cluster&&b.getMediaLayout()&&b.getMediaType()===c.PresetMediaType.COAST2COAST||a.hasNonTransparentBackground){var d=[];return b.recurseLayouts(function(a){switch(a.type){case"text":var e=b.getFormatting(a);d.push(e&&e.getColorRGB()||"");break;case"container":if("decorative"===a.containerRole){var f=(a.subType||a.type)+c.componentStyles.getDecorationUniqueID(a);d.push(c.previewColors.getRGBColor(c.getComponentCustomColor(b.containingSegment,f))),d.push(c.previewColors.getRGBColor(c._getTitleColor(b.containingSegment,b)))}break;case"button":var g=c._getButtonColors(b);d.push(c.previewColors.getRGBColor(g.firstBgColor)),d.push(c.previewColors.getRGBColor(g.bgColor)),d.push(c.previewColors.getRGBColor(g.textColor))}}),d.join(",")}return c.getConfigurationOfLg(a).display}).join("$")},a.prototype.getBoxColorOfSegment=function(a){var b=a.segments[0],c=b.getLENoError();if(!_.any(c.layout,function(a){return"text"===a.type})){var d=_.find(c.layout,function(a){return"container"===a.type&&"decorative"===a.containerRole&&!(a.onMediaIndex>=0)});if(d){var e=(d.subType||d.type)+this.componentStyles.getDecorationUniqueID(d);return this.previewColors.getRGBColor(this.getComponentCustomColor(c.containingSegment,e))}}},a.prototype.getBgDefaultColorConfIdForSection=function(a,b){var c={confIdForFirstLG:void 0,confIdForSecondLG:void 0};return this.flags.sectionBackground&&b&&(b.headerBg?(c.confIdForFirstLG=this.getBgDefaultColorConfIdForSectionPart(a,b.headerBg,"header"),c.confIdForSecondLG=this.getBgDefaultColorConfIdForSectionPart(a,b.bg,"body")):c.confIdForFirstLG=c.confIdForSecondLG=this.getBgDefaultColorConfIdForSectionPart(a,b.bg)),c},a.prototype.getBgDefaultColorConfIdForSectionPart=function(a,b,c){return this.flags.sectionBackground&&b&&"bgImage"===b.mediaType?("header"===c?a=_.filter(a,function(a){return a.segments[0].node.isListHeader()}):"body"===c&&(a=_.filter(a,function(a){return!a.segments[0].node.isListHeader()})),this.getBgDefaultColorConfId(b,a)):void 0},a.prototype.getBgDefaultColorConfId=function(a,b){var c=this.hasTextDirectlyOnBg(b);return c?this.getDarkestConf().id:void 0},a.prototype.getDarkestConf=function(){var a=this,b=this.getConfigurationsOfActiveKit(),c=_.map(b,function(b){var c=a.previewColors.getRGBColor(a.designKitParameters[b.display]);return chroma(c).luminance()}),d=_.indexOf(c,_.min(c));return b[d]},a.prototype.hasTextDirectlyOnBg=function(a){var b=this;return _.any(a,function(a){var c=a.segments[0];if(c.hasColumnWithColorBackground())return!1;var d=c.getLE();if(_.any(d.layout,function(a){return"text"===a.type}))return!0;for(var e=_.flatten(_.map(d.layout,function(a){return"decorative"===a.containerRole||-1!==a.onMediaIndex&&a.onMediaIndex||!a.layout?[]:a.layout})),f=0;f<e.length;f++){var g=e[f];if("text"===g.type)return!0;if("button"===g.type)return!b.hasButtonBg(d)}return!1})},a.prototype.hasButtonBg=function(a){var b=!1,c=_.get(a.overrides,["style","button"]);if(c){var d=this._getStyleDefinition(c),e=d.style.properties;b=!this._noBg(e)}return b},a.prototype.getTextColors=function(a,b,c,d){var e=this;_.each(a,function(a){if("container"===a.type)"decorative"!==a.containerRole&&e.getTextColors(a.layout,b,c,d);else if("text"===a.type){var f=e._getColorOfField(a.subType,c,void 0,d);b.push(f)}else if("button"===a.type&&!e.hasButtonBg(d)){var g=e._getButtonColors(d),h=g.bgColor.replace(/\D/g,"");b.push(h)}})},a.prototype.getTextColorsWithoutDecorativeBoxInSegment=function(a){var b=a.segments[0];if(b.hasColumnWithColorBackground())return[];var c=b.getLENoError(),d=[];return this.getTextColors(c.layout,d,b,c),_.uniq(d)},a.prototype.getTextColorsOfSegment=function(a){var b=this,c=a.segments[0],d=c.getLENoError(),e=[];return _.each(d.argList,function(a){if("text"===a.type){var f=b._getColorOfField(a.subType,c,void 0,d);e.push(f)}}),_.filter(_.uniq(e,_.isUndefined))},a}();angular.module("siteGeneratorStaticsCoreAppInternal").service("designKit",DesignKit),angular.module("siteGeneratorStaticsCoreAppInternal").factory("designPolicyButton",function(){var a=[{minFont:0,top:15,side:20},{minFont:20,top:20,side:25},{minFont:48,top:25,side:30},{minFont:72,top:30,side:35}];return function(b){if(b.isTextButton)return{top:0,side:0};var c=a[0];return _.find(a,function(a){return a.minFont>b.fontSize?!0:void(c=a)}),c}}),angular.module("siteGeneratorStaticsCoreAppInternal").factory("DesignPolicyDefaultPlanes",function(){function a(a,b){var c=a.numLines>1?1:0,d=a.fontSize*g.current.twoTexts.titleFontSizeCoeff+b.fontSize*g.current.twoTexts.bodyFontSizeCoeff+c*g.current.twoTexts.titleBreaksCoeff+g.current.twoTexts.constant;return f(d)}function b(a,b,c){var d=a.numLines>1?2:1,e=b.numLines>1?2:1,h=a.fontSize*g.current.threeTexts.titleSubtitleSpace.titleFontSizeCoeff+b.fontSize*g.current.threeTexts.titleSubtitleSpace.subtitleFontSizeCoeff+c.fontSize*g.current.threeTexts.titleSubtitleSpace.bodyFontSizeCoeff+d*g.current.threeTexts.titleSubtitleSpace.titleBreaksCoeff+e*g.current.threeTexts.titleSubtitleSpace.subtitleBreaksCoeff+g.current.threeTexts.titleSubtitleSpace.constant,i=a.fontSize*g.current.threeTexts.subtitleBodySpace.titleFontSizeCoeff+b.fontSize*g.current.threeTexts.subtitleBodySpace.subtitleFontSizeCoeff+c.fontSize*g.current.threeTexts.subtitleBodySpace.bodyFontSizeCoeff+d*g.current.threeTexts.subtitleBodySpace.titleBreaksCoeff+e*g.current.threeTexts.subtitleBodySpace.subtitleBreaksCoeff+g.current.threeTexts.subtitleBodySpace.constant;return{titleSubtitleSpace:f(h),subtitleBodySpace:f(i)}}function c(a){return g.current.image.topMargin[a.fontSize]}function d(a){return g.current.image.bottomMargin[a.fontSize]}function e(a){return a?g.current.button.bigButton:g.current.button.smallButton}function f(a){return 5*Math.round(a/5)}var g={dp0:{twoTexts:{titleFontSizeCoeff:.22,bodyFontSizeCoeff:1.01,titleBreaksCoeff:7.54,constant:18.87},threeTexts:{titleSubtitleSpace:{titleFontSizeCoeff:.13,subtitleFontSizeCoeff:.79,bodyFontSizeCoeff:1.08,titleBreaksCoeff:4.13,subtitleBreaksCoeff:1.58,constant:-2.08},subtitleBodySpace:{titleFontSizeCoeff:.06,subtitleFontSizeCoeff:.27,bodyFontSizeCoeff:1.58,titleBreaksCoeff:3.76,subtitleBreaksCoeff:1.48,constant:-.85}},image:{topMargin:{14:35,16:40,20:45,24:55,32:55,40:60,48:60,56:65,72:70,88:80},bottomMargin:{14:45,16:50,20:55,24:65,32:70,40:80,48:85,56:85,72:110,88:130}},button:{bigButton:60,smallButton:50}},dp1:{twoTexts:{titleFontSizeCoeff:.11,bodyFontSizeCoeff:.76,titleBreaksCoeff:0,constant:45.21},threeTexts:{titleSubtitleSpace:{titleFontSizeCoeff:.05,subtitleFontSizeCoeff:.6,bodyFontSizeCoeff:-.17,titleBreaksCoeff:0,subtitleBreaksCoeff:0,constant:63.91},subtitleBodySpace:{titleFontSizeCoeff:.01,subtitleFontSizeCoeff:.11,bodyFontSizeCoeff:.76,titleBreaksCoeff:0,subtitleBreaksCoeff:0,constant:45.21}},image:{topMargin:{14:60,16:60,20:65,24:65,32:70,40:75,48:80,56:85,72:90,88:95},bottomMargin:{14:75,16:75,20:80,24:80,32:90,40:100,48:105,56:115,72:135,88:150}},button:{bigButton:75,smallButton:60}},dp2:{twoTexts:{titleFontSizeCoeff:.21,bodyFontSizeCoeff:.75,titleBreaksCoeff:.43,constant:16.64},threeTexts:{titleSubtitleSpace:{titleFontSizeCoeff:.14,subtitleFontSizeCoeff:.72,bodyFontSizeCoeff:.01,titleBreaksCoeff:0,subtitleBreaksCoeff:0,constant:15.83},subtitleBodySpace:{titleFontSizeCoeff:.19,subtitleFontSizeCoeff:.22,bodyFontSizeCoeff:.97,titleBreaksCoeff:0,subtitleBreaksCoeff:0,constant:19.83}},image:{topMargin:{14:40,16:45,20:50,24:55,32:55,40:60,48:65,56:65,72:70,88:80},bottomMargin:{14:50,16:55,20:65,24:70,32:70,40:85,48:90,56:95,72:120,88:130}},button:{bigButton:60,smallButton:50}},dp3:{twoTexts:{titleFontSizeCoeff:.08579395545,bodyFontSizeCoeff:.7900799692,titleBreaksCoeff:0,constant:18.39448936},threeTexts:{titleSubtitleSpace:{titleFontSizeCoeff:.08548736403,subtitleFontSizeCoeff:.8039599601,bodyFontSizeCoeff:.01805116546,titleBreaksCoeff:0,subtitleBreaksCoeff:0,constant:17.64035586},subtitleBodySpace:{titleFontSizeCoeff:.0002422993631,subtitleFontSizeCoeff:.08579395545,bodyFontSizeCoeff:.7900799692,titleBreaksCoeff:0,subtitleBreaksCoeff:0,constant:18.39448936}},image:{topMargin:{14:20,16:25,20:25,24:30,32:30,40:30,48:35,56:35,72:35,88:35},bottomMargin:{14:30,16:35,20:40,24:45,32:50,40:60,48:65,56:70,72:85,88:95}},button:{bigButton:60,smallButton:50}}};return g.current=ob.deepClone(g.dp0),{formulas:g,getTwoTextsSpace:a,getThreeTextsSpace:b,getImageTopMargin:c,getImageBottomMargin:d,getButtonMargin:e,setCurrentFormula:function(a){this.formulas.current=ob.deepClone(this.formulas[a])}}}),angular.module("siteGeneratorStaticsCoreAppInternal").factory("DesignPolicyDefaultRules",function(){var a=[{rules:{},policy:{body:{multiplyBase:2.5}}},{rules:{title:{atLeast:48}},policy:{body:{multiplyBase:2.75}}},{rules:{title:{atLeast:72}},policy:{body:{multiplyBase:3.25}}},{rules:{body:{atLeast:16}},policy:{body:{multiplyBase:2.5}}},{rules:{body:{atLeast:16},title:{atLeast:48}},policy:{body:{multiplyBase:2.75}}},{rules:{body:{atLeast:16},title:{atLeast:72}},policy:{body:{multiplyBase:3.25}}},{rules:{body:{atLeast:20}},policy:{body:{multiplyBase:2.5}}},{rules:{body:{atLeast:20},title:{atLeast:72}},policy:{body:{multiplyBase:2.75}}},{rules:{body:{atLeast:24}},policy:{body:{multiplyBase:2}}},{rules:{body:{atLeast:24},title:{atLeast:32}},policy:{body:{multiplyBase:2.25}}},{rules:{body:{atLeast:24},title:{atLeast:72}},policy:{body:{multiplyBase:2.5}}},{rules:{body:{atLeast:24},title:{atLeast:88}},policy:{body:{multiplyBase:2.75}}},{rules:{body:{atLeast:32}},policy:{body:{multiplyBase:2}}},{rules:{body:{atLeast:32},title:{atLeast:88}},policy:{body:{multiplyBase:2.25}}},{rules:{body:{atLeast:40}},policy:{body:{multiplyBase:1.75}}},{rules:{body:{atLeast:40},title:{atLeast:48}},policy:{body:{multiplyBase:1.9}}},{rules:{body:{atLeast:40},title:{atLeast:72}},policy:{body:{multiplyBase:2}}},{rules:{body:{atLeast:48}},policy:{body:{multiplyBase:1.5}}},{rules:{body:{atLeast:48},title:{atLeast:48}},policy:{body:{multiplyBase:1.75}}},{rules:{body:{atLeast:48},title:{atLeast:88}},policy:{body:{multiplyBase:1.9}}},{rules:{body:{atLeast:56}},policy:{body:{multiplyBase:1.5}}},{rules:{body:{atLeast:56},title:{atLeast:48}},policy:{body:{multiplyBase:1.6}}},{rules:{body:{atLeast:72}},policy:{body:{multiplyBase:1.3}}},{rules:{body:{atLeast:72},title:{atLeast:48}},policy:{body:{multiplyBase:1.5}}},{rules:{body:{atLeast:88}},policy:{body:{multiplyBase:1.2}}},{rules:{body:{atLeast:88},title:{atLeast:40}},policy:{body:{multiplyBase:1.25}}},{rules:{body:{atLeast:88},title:{atLeast:56}},policy:{body:{multiplyBase:1.35}}}],b=[{rules:{},policy:{body:{add:5}}},{rules:{title:{atLeast:40}},policy:{body:{add:10}}},{rules:{title:{atLeast:56}},policy:{body:{add:15}}},{rules:{title:{atLeast:88}},policy:{body:{add:20}}},{rules:{body:{atLeast:16}},policy:{}},{rules:{body:{atLeast:16},title:{atLeast:32}},policy:{body:{add:5}}},{rules:{body:{atLeast:16},title:{atLeast:40}},policy:{body:{add:10}}},{rules:{body:{atLeast:16},title:{atLeast:48}},policy:{body:{add:5}}},{rules:{body:{atLeast:16},title:{atLeast:56}},policy:{body:{add:10}}},{rules:{body:{atLeast:16},title:{atLeast:88}},policy:{body:{add:15}}},{rules:{body:{atLeast:20}},policy:{}},{rules:{body:{atLeast:20},title:{atLeast:48}},policy:{body:{add:5}}},{rules:{body:{atLeast:20},title:{atLeast:56}},policy:{body:{add:10}}},{rules:{body:{atLeast:20},title:{atLeast:88}},policy:{body:{add:15}}},{rules:{body:{atLeast:24}},policy:{body:{add:5}}},{rules:{body:{atLeast:24},title:{atLeast:32}},policy:{}},{rules:{body:{atLeast:24},title:{atLeast:48}},policy:{body:{add:5}}},{rules:{body:{atLeast:24},title:{atLeast:56}},policy:{body:{add:10}}},{rules:{body:{atLeast:24},title:{atLeast:88}},policy:{body:{add:15}}},{rules:{body:{atLeast:32}},policy:{body:{add:5}}},{rules:{body:{atLeast:32},title:{atLeast:32}},policy:{}},{rules:{body:{atLeast:32},title:{atLeast:56}},policy:{body:{add:5}}},{rules:{body:{atLeast:32},title:{atLeast:72}},policy:{body:{add:10}}},{rules:{body:{atLeast:32},title:{atLeast:88}},policy:{body:{add:20}}}],c=[{rules:{},policy:{subtitle:{multiplyBase:1}}},{rules:{title:{atLeast:40}},policy:{subtitle:{multiplyBase:1.125}}},{rules:{subtitle:{atLeast:20}},policy:{subtitle:{multiplyBase:1}}},{rules:{subtitle:{atLeast:20},title:{atLeast:32}},policy:{subtitle:{multiplyBase:1.125}}},{rules:{subtitle:{atLeast:24}},policy:{subtitle:{multiplyBase:1.25}}},{rules:{subtitle:{atLeast:32}},policy:{subtitle:{multiplyBase:1.25}}},{rules:{subtitle:{atLeast:32},title:{atLeast:72}},policy:{subtitle:{multiplyBase:1.4}}},{rules:{subtitle:{atLeast:40}},policy:{subtitle:{multiplyBase:1.4}}},{rules:{subtitle:{atLeast:40},title:{atLeast:72}},policy:{subtitle:{multiplyBase:1.5}}},{rules:{subtitle:{atLeast:48}},policy:{subtitle:{multiplyBase:1.4}}},{rules:{subtitle:{atLeast:48},title:{atLeast:72}},policy:{subtitle:{multiplyBase:1.5}}}],d=[{rules:{},policy:{subtitle:{add:5},body:{add:5}}},{rules:{title:{atLeast:32}},policy:{subtitle:{add:10},body:{add:10}}},{rules:{title:{atLeast:40}},policy:{subtitle:{add:5},body:{add:5}}},{rules:{title:{atLeast:48}},policy:{body:{add:5}}},{rules:{title:{atLeast:56}},policy:{subtitle:{add:5},body:{add:5}}},{rules:{title:{atLeast:88}},policy:{subtitle:{add:10},body:{add:5}}},{rules:{subtitle:{atLeast:20}},policy:{subtitle:{add:5},body:{add:5}}},{rules:{subtitle:{atLeast:20},title:{atLeast:48}},policy:{body:{add:5}}},{rules:{subtitle:{atLeast:20},title:{atLeast:56}},policy:{subtitle:{add:5},body:{add:5}}},{rules:{subtitle:{atLeast:20},title:{atLeast:88}},policy:{subtitle:{add:10},body:{add:10}}},{rules:{subtitle:{atLeast:24}},policy:{subtitle:{add:5},body:{add:5}}},{rules:{subtitle:{atLeast:24},title:{atLeast:48}},policy:{body:{add:5}}},{rules:{subtitle:{atLeast:24},title:{atLeast:56}},policy:{subtitle:{add:5},body:{add:5}}},{rules:{subtitle:{atLeast:24},title:{atLeast:88}},policy:{subtitle:{add:15},body:{add:10}}},{rules:{subtitle:{atLeast:32}},policy:{}},{rules:{subtitle:{atLeast:32},title:{atLeast:40}},policy:{subtitle:{add:5},body:{add:10}}},{rules:{subtitle:{atLeast:32},title:{atLeast:48}},policy:{subtitle:{add:5},body:{add:5}}},{rules:{subtitle:{atLeast:40}},policy:{}},{rules:{subtitle:{atLeast:40},title:{atLeast:20}},policy:{body:{add:5}}},{rules:{subtitle:{atLeast:40},title:{atLeast:24}},policy:{}},{rules:{subtitle:{atLeast:40},title:{atLeast:48}},policy:{subtitle:{add:5},body:{add:5}}},{rules:{subtitle:{atLeast:40},title:{atLeast:88}},policy:{subtitle:{add:10},body:{add:5}}},{rules:{subtitle:{atLeast:48}},policy:{}},{rules:{subtitle:{atLeast:48},title:{atLeast:40}},policy:{subtitle:{add:5},body:{add:5}}}],e=[{rules:{},policy:{subtitle:{add:5},body:{add:5}}},{rules:{title:{atLeast:32}},policy:{body:{add:5}}},{rules:{title:{atLeast:56}},policy:{}},{rules:{subtitle:{atLeast:20}},policy:{subtitle:{add:5},body:{add:5}}},{rules:{subtitle:{atLeast:20},title:{atLeast:32}},policy:{body:{add:5}}},{rules:{subtitle:{atLeast:20},title:{atLeast:48}},policy:{}},{rules:{subtitle:{atLeast:24}},policy:{subtitle:{add:5},body:{add:5}}},{rules:{subtitle:{atLeast:24},title:{atLeast:48}},policy:{body:{add:5}}},{rules:{subtitle:{atLeast:24},title:{atLeast:56}},policy:{}},{rules:{subtitle:{atLeast:32}},policy:{}},{rules:{subtitle:{atLeast:32},title:{atLeast:40}},policy:{subtitle:{add:5}}},{rules:{subtitle:{atLeast:32},title:{atLeast:48}},policy:{}},{rules:{subtitle:{atLeast:40}},policy:{}},{rules:{subtitle:{atLeast:40},title:{atLeast:20}},policy:{body:{add:5}}},{rules:{subtitle:{atLeast:40},title:{atLeast:24}},policy:{}},{rules:{subtitle:{atLeast:48}},policy:{}}],f=[{rules:{},policy:{text:{multiplyBase:3.25}}},{rules:{text:{atLeast:20}},policy:{text:{multiplyBase:2.75}}},{rules:{text:{atLeast:32}},policy:{text:{multiplyBase:2.25}}},{rules:{text:{atLeast:40}},policy:{text:{multiplyBase:2}}},{rules:{text:{atLeast:48}},policy:{text:{multiplyBase:1.75}}},{rules:{text:{atLeast:56}},policy:{text:{multiplyBase:1.5}}},{rules:{text:{atLeast:88}},policy:{text:{multiplyBase:1.25}}}],g=[{rules:{},policy:{image:{multiplyBase:2.25}}},{rules:{text:{atLeast:20}},policy:{image:{multiplyBase:2.5}}},{rules:{text:{atLeast:24}},policy:{image:{multiplyBase:2.25}}},{rules:{text:{atLeast:32}},policy:{image:{multiplyBase:1.75}}},{rules:{text:{atLeast:40}},policy:{image:{multiplyBase:1.5}}},{rules:{text:{atLeast:48}},policy:{image:{multiplyBase:1.25}}},{rules:{text:{atLeast:56}},policy:{image:{multiplyBase:1.125}}},{rules:{text:{atLeast:72}},policy:{image:{multiplyBase:1}}},{rules:{text:{atLeast:88}},policy:{image:{multiplyBase:.9}}}],h=[{rules:{},policy:{button:{multiplyBase:2.25}}},{rules:{text:{atLeast:20}},policy:{button:{multiplyBase:2.5}}},{rules:{text:{atLeast:24}},policy:{button:{multiplyBase:2.25}}},{rules:{text:{atLeast:32}},policy:{button:{multiplyBase:1.75}}},{rules:{text:{atLeast:40}},policy:{button:{multiplyBase:1.5}}},{rules:{text:{atLeast:48}},policy:{button:{multiplyBase:1.25}}},{rules:{text:{atLeast:56}},policy:{button:{multiplyBase:1.125}}},{rules:{text:{atLeast:72}},policy:{button:{multiplyBase:1}}},{rules:{text:{atLeast:88}},policy:{button:{multiplyBase:.9}}},{rules:{button:{atLeast:40}},policy:{text:{multiplyBase:2.5}}},{rules:{button:{atLeast:40},text:{atLeast:20}},policy:{button:{multiplyBase:2.75}}},{rules:{button:{atLeast:40},text:{atLeast:24}},policy:{button:{multiplyBase:2.5}}},{rules:{button:{atLeast:40},text:{atLeast:32}},policy:{button:{multiplyBase:2}}},{rules:{button:{atLeast:40},text:{atLeast:40}},policy:{button:{multiplyBase:1.75}}},{rules:{button:{atLeast:40},text:{atLeast:48}},policy:{button:{multiplyBase:1.5}}},{rules:{button:{atLeast:40},text:{atLeast:56}},policy:{button:{multiplyBase:1.25}}},{rules:{button:{atLeast:40},text:{atLeast:72}},policy:{button:{multiplyBase:1.125}}},{rules:{button:{atLeast:40},text:{atLeast:88}},policy:{button:{multiplyBase:1}}}],i=[{rules:{},policy:{button:{constant:50}}},{rules:{button:{atLeast:48}},policy:{button:{constant:60}}}],j=[{rules:{},policy:{line:{constant:10}}}],k=[{rules:{},policy:{line:{multiplyBase:2.25}}}];return{twoTexts:a,twoTextsBreakingTitle:b,threeTexts:c,threeTextBreakingTitle:d,threeTextBreakingSubtitle:e,imageText:f,textImage:g,textButton:h,imageButton:i,line:j,firstLastLine:k}}),angular.module("siteGeneratorStaticsCoreAppInternal").factory("DesignPolicyPlanes",["DesignPolicyDefaultPlanes",function(a){function b(b,c,d,e){var f=a.getThreeTextsSpace(b,c,d),g={};return g[d.subType]=f.subtitleBodySpace,g[c.subType]=f.titleSubtitleSpace,e&&(i(e)?g[e.subType]=Math.max(g[d.subType],g[c.subType]):g[e.subType]=Math.min(g[d.subType],g[c.subType])),g}function c(b,c,d){var e=a.getTwoTextsSpace(b,c),f={};return f[c.subType]=e,d&&(f[d.subType]=e),f}function d(b,c){var d=i(c)?a.getImageBottomMargin(b):a.getImageTopMargin(b),e={};return e[c.subType]=d,e}function e(b,c){var d=a.getImageTopMargin(b),e={};return e[c.subType]=d,e}function f(b,c){var d=a.getImageBottomMargin(c),e={};return e[c.subType]=d,e}function g(b,c){var d=i(c),e=a.getButtonMargin(d),f={};return f[c.subType]=e,f}function h(b,c){var d=i(b),e=a.getButtonMargin(d),f={};return f[c.subType]=e,f}function i(a){var b=40;return a.fontSize>b}return{titleSubtitleParagraphPolicy:b,subtitleParagraphPolicy:c,textButtonPolicy:d,textImagePolicy:e,imageTextPolicy:f,imageButtonPolicy:g,buttonImagePolicy:h}}]),angular.module("siteGeneratorStaticsCoreAppInternal").factory("designPolicyRules",["$log","designPolicyService","DesignPolicyPlanes",function(a,b,c){function d(a,b){return a.bind(null,b)}function e(b,c,d,e){return e=e||{},_(c).transform(function(c,f,g){var h=b[g];return h?h.constant?c[f.subType]=h.constant:_.isNumber(h)?c[f.subType]=h:h.multiplyBase?c[f.subType]=h.multiplyBase*d:h.add&&(e[f.subType]||(a.error("Design policy trying to add to empty value"),e[f.subType]=0),c[f.subType]=e[f.subType]+h.add):c[f.subType]=e&&e[f.subType]||0,c}).transform(function(a,b,c,d){return _.isString(b)?a[c]=d[b]:a[c]=b,a}).value()}function f(a,b,c,d){var f=_.findLast(a,function(a){return h(a,b)});return f?e(f.policy,b,c,d):{}}function g(a,b){return _.all(a,function(a,c){return _.isNumber(c)&&(a=c),b.fontSize>=a})}function h(a,b){return _.all(a.rules,function(a,c){return b[c]&&g(a,b[c])})}function i(a,d,e,f){return b.useOldDP?j(a,d,e,f):c.subtitleParagraphPolicy(d,e,f)}function j(a,b,c,d){var e={title:b,body:c},g=f(a.twoTexts,e,c.fontSize);return d&&(g[d.subType]=g[c.subType]),b.numLines>1?f(a.twoTextsBreakingTitle,e,0,g):g}function k(a,d,e,f,g){return b.useOldDP?l(a,d,e,f,g):c.titleSubtitleParagraphPolicy(d,e,f,g)}function l(a,b,c,d,e){var g,h,i=f(a.twoTexts,{title:c,body:d
},d.fontSize),j={title:b,subtitle:c,body:d},k=f(a.threeTexts,j,i[d.subType]),l=_.assign(k,i,function(a,b){return Math.max(a||0,b||0)});b.numLines>1&&(g=f(a.threeTextBreakingTitle,j,0,l)),c.numLines>1&&(h=f(a.threeTextBreakingSubtitle,j,0,l));var m=_.assign(l,g,h,function(a,b){return Math.max(a||0,b||0)});return e&&(e.fontSize>x?m[e.subType]=Math.max(m[d.subType],m[c.subType]):m[e.subType]=Math.min(m[d.subType],m[c.subType])),m}function m(a,d,e){if(!b.useOldDP)return c.textImagePolicy(d,e);var g={text:d,image:e};return f(a.textImage,g,d.fontSize)}function n(a,d,e){if(!b.useOldDP)return c.imageTextPolicy(d,e);var g={title:{fontSize:88},text:{fontSize:e.fontSize,subType:e.subType}};return f(a.imageText,g,e.fontSize)}function o(a,b){var c={image:{subType:"box"},text:{fontSize:b}};return f(a.textImage,c,b).box}function p(a,d,e){if(!b.useOldDP)return c.textButtonPolicy(d,e);var g={text:d,button:e};return f(a.textButton,g,d.fontSize)}function q(a,b){var c={line:{fontSize:b,subType:"line"}};return f(a.firstLastLine,c,b).line}function r(a){return f(a.line,{line:{subType:"line"}}).line}function s(a,d,e){return b.useOldDP?f(a.imageButton,{button:e}):c.imageButtonPolicy(d,e)}function t(a,d,e){return b.useOldDP?f(a.imageButton,{button:{fontSize:d.fontSize,subType:e.subType}}):c.buttonImagePolicy(d,e)}function u(a,b,c){var d={rules:{},policy:{}};return 14!==a&&(d.rules.body={atLeast:a}),24!==b&&(d.rules.title={atLeast:b}),d.policy.body={constant:c},d}function v(a,b,c,d){var e,f=[],g=b*a+d,h=z.map(function(a){return 5*Math.round((a*c+g)/5)}),i=-1;for(e=0;e<h.length;e++)h[e]!==i&&(i=h[e],f[f.length]=u(a,z[e],i));return f}function w(a,b,c){var d=y.map(function(d){return v(d,a,b,c)});return[].concat.apply([],d)}var x=40,y=[14,16,20,24,32],z=[24,32,40,48,56,72,88],A=[{match:/(?:^|[^t^s])(t|s|l)(t|s|l)(b)?(?:$|[^t^s^l])/,policy:i},{match:/(?:^|[^t^s^l])(t|s|l)(b)/,policy:p},{match:/(t|s|l)(t|s|l)(t|s|l)(b)?/,policy:k},{match:/(t|s|l)(i)/,policy:m},{match:/(i)(t|s|l)/,policy:n},{match:/(i)(b)/,policy:s},{match:/(b)(i)/,policy:t}];return function(a){var b=ob.deepClone(a),c=_.map(A,function(a){return{match:a.match,policy:d(a.policy,b)}});return{rules:c,boxPolicy:d(o,b),firstLastLinePolicy:d(q,b),linePolicy:d(r,b),linearModelParams:{},setRulesFromLinearModel:function(a,c,d){b.twoTexts=w(a,c,d)}}}}]),angular.module("siteGeneratorStaticsCoreAppInternal").service("designPolicyHelper",["applicationParameters",function(a){var b=a.quarterBaseLine;_.assign(this,{roundToBaseline:function(a){return Math.round(a/b)*b},factorAndRound:function(a,b){return this.roundToBaseline(a*b)}})}]).factory("designPolicyService",["applicationParameters","designPolicyHelper","LayoutDecorationUtils",function(a,b,c){function d(a){return l[a]||a}function e(a){return m[a]||a}function f(a,b,c,d,e){if(e=e||0,d.isMobile())return k+e;var f=d.maxFontInBox(b);return n(a.boxPolicy(f)+e,c)}function g(a,b,c){return n(a.firstLastLinePolicy(b.fontSize),c)}function h(a,b){return n(a.linePolicy(),b)}function i(b,g,i,k){i=i||1;var l={},m=_.collect(g,function(a){return _.collect(a,function(b){l[b.subType]=b;var c=0;if(b.lineHeight){var d=_.max(a,function(a){return a.absoluteTop===b.absoluteTop?a.baseLineMargin:void 0}),e=d.baseLineMargin;if(!isNaN(e)){var f=e-b.baseLineMargin;f>0&&f<1*b.lineHeight&&(c=e)}}return c=Math.ceil(c/j)*j})}),o=_.unzip(g);_.each(o,function(a,c){var f=_.uniq(a),g=_.map(f,function(a){return d(a.subType)}).join("");_.each(b.rules,function(b){var d=g.match(b.match);if(d){var f;f=b.extract?d[0].match(b.extract):d.slice(1);var h=_.map(f,function(a){return a?l[e(a)]:void 0}),j=b.policy.apply(null,h);_.each(a,function(a,b){j[a.subType]&&(m[b][c]=Math.max(n(j[a.subType],i),m[b][c]||0))})}})});var p=h(b,i),q=c.getLineDataInFirstRow(k,g,m),r=c.getLineDataInLastRow(k,g,m),s=r.position*(r.lineArea+p),t=q.position*(q.lineArea+p),u=g.length-1;m[g.length]=[];for(var v=0;v<g[0].length;v++)"empty"!==g[0][v].type&&c.hasAboveLine(k,g,g[0][v],0)&&(m[0][v]=t+a.lineDistance+g[0][v].baseLineMargin),"empty"!==g[u][v].type&&c.hasBeneathLine(k,g,g[u][v],u)?m[g.length][v]=s+a.lineDistance:m[g.length][v]=m[g.length][v]||0;return _.each(o,function(a,d){_.each(a,function(a,e){if("empty"!==a.type){var h=k.getLayoutParent(a);"container"===h.type&&"structure"===h.containerRole&&(h=k.getLayoutParent(h));var j=g[e][d];0===e&&c.isFirstLayoutInBox(k,h,a)&&(m[e][d]=f(b,h,i,k,j.baseLineMargin-j.topMargin)),e===g.length-1&&c.isLastLayoutInBox(k,h,a)&&(m[e+1][d]=f(b,h,i,k)),c.hasAboveLine(k,g,a,e)&&e>0&&(m[e][d]+=p)}})}),m}var j=a.quarterBaseLine,k=20,l={title:"t",subTitle:"s",longText:"l",image:"i",button:"b",address:"c",copyrightMSG:"c",ContactMapTitle:"c",ContactFormTitle:"c",email:"c",fax:"c",form:"c",label:"c",logoText:"c",media:"c",social:"c",map:"c",phoneNumber:"c",pageTitle:"c",subscribe:"c"},m=_.invert(l),n=b.factorAndRound.bind(b);return{exec:i,execBox:f,execFirstLastLine:g,execLine:h}}]),angular.module("siteGeneratorStaticsCoreAppInternal").factory("DesignPolicy",["designPolicyService","designPolicyRules",function(a,b){function c(a){this.id=a.id,this.name=a.name,this.isLinear=!!a.isLinear,this.setRules(a.rules)}var d={BODY_MULT:1.429966518,TITLE_MULT:.145958084,CONSTANT:13.60686551};return c.prototype={setRules:function(a){this.rules=b(a)},getRules:function(){return this.rules},execFirstLastLine:function(b,c){return a.execFirstLastLine(this.rules,b,c)},execBox:function(b,c,d){return a.execBox(this.rules,b,c,d)},exec:function(b,c,d){return a.exec(this.rules,b,c,d)},setRulesFromLinearModel:function(a,b,c){this.bodyMult=a||d.BODY_MULT,this.titleMult=b||d.TITLE_MULT,this.constOffset=c||d.CONSTANT,this.updateRulesFromLinearModel()},updateRulesFromLinearModel:function(){this.rules.setRulesFromLinearModel(this.bodyMult,this.titleMult,this.constOffset)}},c}]),angular.module("siteGeneratorStaticsCoreAppInternal").provider("flags",function(){this.$get=function(){return this}}),angular.module("siteGeneratorStaticsCoreAppInternal").service("fontLoader",["$p","$log","santaFontMetadata",function(a,b,c){function d(c){var d=a.defer(),e=_.assign({active:function(){d.resolve(!0)},inactive:function(){b.error("Error loading font: ",c),d.resolve(!1)}},c);return WebFont.load(e),d.promise}var e=[];this.loadFont=function(f){if(f=f.toLowerCase(),e[f])return e[f];var g=c[f];if(g){var h;if("google"===g.provider?h={google:{families:[(g.cdnName||g.displayName)+":n,b,i,bi"]}}:("system"===g.provider||"monotype"===g.provider||"open source"===g.provider)&&(h={custom:{families:[g.fontFamily]}}),h)return e[f]=d(h),e[f]}return b.error("Tried to load unknown font: ",f),e[f]=a.when(!1),e[f]}}]),angular.module("siteGeneratorStaticsCoreAppInternal").service("FontOverridesManager",["themeChooser","modelTree","designKit","flags",function(a,b,c,d){function e(){}var f="SiteHeader";return e.prototype={overridesFromModelTree:function(){var a=this,c={};return c[f]=null,b.traverseWithoutPages(function(b){b.hasContentElement()&&!b.isUserHidden()&&(c[a.getOverrideKey(b)]=b)}),c},getOverrideKey:function(a){if(a){var c=a.contentElementType,d=a.parentContentElementType||"";return d+c+(b.findIdentifyingNode(a).isList()?"List":"Single")}return f},getOverride:function(a,b,e,f){if(d.designKit)return c.getFontOverride(a,b,e,f);var g=this.getOverrideKey(a),h=this.fontOverrides[g]&&this.fontOverrides[g][b]&&this.fontOverrides[g][b].length>0?this.fontOverrides[g][b]:void 0,i=this.fontOverrides.General&&this.fontOverrides.General[b]&&this.fontOverrides.General[b].length>0?this.fontOverrides.General[b]:void 0;return h||i},fontOverrides:{},isOverridden:function(a){return!!this.fontOverrides[a]},initOverrideObject:function(a){var b=this.getOverrideKey(a);b===f?this.fontOverrides[b]={title:"",subTitle:"",logoText:"",email:"",phoneNumber:""}:"Contact"===b?this.fontOverrides[b]={title:"",subTitle:"",longText:"",map:"",ContactFormTitle:"",ContactMapTitle:"",label:"",other:""}:this.fontOverrides[b]={title:"",subTitle:"",longText:"",label:"",other:"",button:""}},getOrInitOverrideObject:function(a){return this.fontOverrides[this.getOverrideKey(a)]||this.initOverrideObject(a),this.fontOverrides[this.getOverrideKey(a)]},clearUnusedOverrides:function(){this.fontOverrides=_.omit(this.fontOverrides,function(a){return _.all(a,_.isEmpty)})},deleteOverrideObject:function(a){this.fontOverrides[a]=void 0},existNodeWithSameOverride:function(a){if(a&&a.contentElement){var c=this,d=this.getOverrideKey(a),e=b.findIdentifyingNode(a),f=!1;return b.traverse(function(a){return b.findIdentifyingNode(a).getId()!==e.getId()&&d===c.getOverrideKey(a)?(f=!0,!0):void 0}),f}}},e}]),angular.module("siteGeneratorStaticsCoreAppInternal").service("headerDesignPolicy",["applicationParameters","mediaGallery",function(a,b){function c(a,b){return{0:{title:a,Square:{50:{title:b}},Horizontal:{50:{title:b}},Vertical:{50:{title:b}}}}}function d(a,b,c,d){return{0:{title:a,Square:{10:{title:b},60:{title:c},70:{title:d}},Horizontal:{10:{title:b},80:{title:c},90:{title:d}},Vertical:{10:{title:b},80:{title:c},90:{title:d}}}}}function e(a,b,c,d,e,g){var h=_.filter([b,c,d]),i=_.last(h),j=[];return j.push({key:"menu",rule:"menu",firstLineFontSize:0,seconLineFontSize:i&&i.font.fontSize||0}),j.push({key:"logo",rule:"logo",firstLineFontSize:0,seconLineFontSize:0}),_.each(h,function(a,b){b?j.push({key:a.subType,rule:"subTitle",firstLineFontSize:h[b-1].font.fontSize,seconLineFontSize:a.font.fontSize}):j.push({key:a.subType,rule:"title",firstLineFontSize:a.font.fontSize,seconLineFontSize:0})}),_.reduce(j,function(b,c){var d=f[a+"-"+c.rule],h=_.findLast(d&&_.findLast(d,function(a,b){return c.firstLineFontSize>=b})||{},function(a,b){return c.seconLineFontSize>=b})||{};b[c.key]=h[c.rule];var i=_.filter(h[e],function(a,b){return g>=b});return _.reduce(i,function(a,d){return b[c.key]=d[c.rule],b},b)},{})}var f={"leftLogo-subTitle":{0:{0:{subTitle:25}},24:{0:{subTitle:25},20:{subTitle:30}},32:{0:{subTitle:30,Square:{70:{subTitle:35}},Horizontal:{70:{subTitle:35}},Vertical:{80:{subTitle:35}}},20:{subTitle:35},24:{subTitle:40}},40:{0:{subTitle:30,Square:{70:{subTitle:35}},Horizontal:{50:{subTitle:35}},Vertical:{40:{subTitle:35}}},20:{subTitle:35},24:{subTitle:40}},48:{0:{subTitle:30,Square:{70:{subTitle:35}},Horizontal:{70:{subTitle:35}},Vertical:{70:{subTitle:35}}},20:{subTitle:35},24:{subTitle:35,Square:{50:{subTitle:40}},Horizontal:{50:{subTitle:40}},Vertical:{40:{subTitle:40}}},32:{subTitle:45}},56:{0:{subTitle:30,Square:{60:{subTitle:35}},Horizontal:{50:{subTitle:35}},Vertical:{40:{subTitle:35}}},20:{subTitle:35},24:{subTitle:40},32:{subTitle:45}},72:{0:{subTitle:35,Square:{60:{subTitle:40}},Horizontal:{60:{subTitle:40}},Vertical:{40:{subTitle:40}}},20:{subTitle:40},24:{subTitle:45},32:{subTitle:45}},88:{0:{subTitle:40,Square:{70:{subTitle:45}},Horizontal:{70:{subTitle:45}},Vertical:{40:{subTitle:45}}},20:{subTitle:45},24:{subTitle:50},32:{subTitle:55}}},"leftLogo-title":{0:c(60,80),24:c(60,80),32:c(70,80),40:c(80,85),48:c(85,90),56:c(85,90),72:c(95,100),88:c(105,110)},"leftLogo-menu":{0:{0:{menu:40}}},"default-menu":{0:{0:{menu:0,Square:{10:{menu:30}},Horizontal:{10:{menu:30}},Vertical:{10:{menu:30}}},14:{menu:30},20:{menu:40},40:{menu:50},72:{menu:60}}},"default-logo":{0:{0:{logo:40,Square:{70:{logo:50}},Horizontal:{90:{logo:50}},Vertical:{90:{logo:50}}}}},"default-title":{0:d(65,25,30,35),20:d(65,30,35,40),24:d(65,35,40,45),32:d(85,40,45,50),40:d(85,50,55,60),56:d(115,70,70,70),72:d(115,80,80,80),88:d(115,90,90,90)},"default-subTitle":{0:{0:{subTitle:25},20:{subTitle:30}},32:{0:{subTitle:30},20:{subTitle:35},24:{subTitle:40},32:{subTitle:45}},72:{0:{subTitle:35},20:{subTitle:40},24:{subTitle:45}},88:{0:{subTitle:40},20:{subTitle:45},24:{subTitle:50}}}};this.snapToGrid=function(a,b,c){var d=a/b;return d=c?Math.floor(d):Math.ceil(d),b*d},this.getRatioName=function(a,b){var c=b&&a&&a/b||1;return.8>c?"Vertical":c>1.2?"Horizontal":"Square"},this.applyPolicy=function(b,c,d){var f,g,h,i,j=_.find(c,function(a){return"menu"===a.subType}),k=_.find(c,function(a){return"menubar"===a.subType}),l=_.find(c,function(a){return"box"===a.subType}),m=_.find(c,function(a){return"logo"===a.subType}),n=_.find(c,function(a){return"logoText"===a.subType}),o=_.find(c,function(a){return"title"===a.subType}),p=_.find(c,function(a){return"subTitle"===a.subType}),q=_.find(c,function(a){return"contacts"===a.subType}),r=m&&m.$layout.width()||0,s=m&&m.$layout.height()||0,t=o&&o.font.fontSize||0,u=this.getRatioName(r,s),v=e(b,n,o,p,u,s),w=k&&k.$layout.is(".menu-on-top"),x=m&&m.$layout.is(".big-logo");(w||x)&&(v.menu=0),w||(v["default"===b?c[0].subType:"title"]=0),o&&!v.title&&(v.title=this.snapToGrid(o.font.lineMargin,a.quarterBaseLine)),o&&p&&!v.subTitle&&(v.subTitle=this.snapToGrid(p.font.lineMargin,a.quarterBaseLine)+2*a.quarterBaseLine);var y,z=o&&o.$layout.height();y=o?p?o.font.lineMargin+v.subTitle-p.font.lineMargin+p.$layout.height():z:0;var A=72>t&&s>=40||"Vertical"===u&&s>=50?y:z,B=Math.ceil(m&&(s-A)/2||0),C=m&&s-B-y||0;if(m&&"leftLogo"===b)if((p||o)&&m.$layout.css(m.$layout.parents(".flip-content").length?"margin-left":"margin-right","15px"),o&&!x){if(v.logo=v.title-o.font.lineMargin-B,v.logo<0){var D=this.snapToGrid(-v.logo,a.quarterBaseLine)+(w&&a.quarterBaseLine||0);v.title+=D,v.logo+=D}w||(v.menu&&(v.menu=v.menu-Math.max(C-(p||o).font.marginBottom,0)),v.menu<40&&(v.menu+=this.snapToGrid(40-v.menu,a.quarterBaseLine)))}else v.logo=w&&30||0;if(k){if(k.$layout.is(".menu-align-base-line")||k.$layout.is(".menu-align-center")){var E,F=p||o,G=F&&Math.max(C,F.font.marginBottom)||0;if(k.$layout.is(".menu-align-base-line")){var H=0;j?H="ddm1"===j.styleId?10:0:(f=k.$layout.find('.layout[header-layouts-value="MainEmail"]:visible, .layout[header-layouts-value="Contact.phone number"]:visible')[0],f&&(g=angular.element(f),h="font_"+(g.attr("font")||"0"),i=d[h],H=5+g.height()-i.lineMargin+(parseInt(g.css("margin-bottom"))||0))),E=F&&G+F.$layout.height()-F.font.lineMargin-H||0}else E=((F?y:s)-k.$layout.height())/2+G;if(l&&(E+=20),k.$layout.css("margin-bottom",E),(m||o)&&k.$layout.css((m||o).$layout.parents(".flip-h").length?"padding-right":"padding-left",100),v.menu=0,q)if(m||o){var I=30+q.$layout.height(),J=-E-k.$layout.height();if(J+=F?v.title-o.font.lineMargin+y+G:v.logo+s,l&&(J+=40),I>J){var K=this.snapToGrid(I-J,a.quarterBaseLine);l?l.$layout.css("margin-top",K):(v.title+=K,v.logo+=K)}}else q.$layout.css("margin-bottom",30)}v.menubar=v.menu,v.menu=0}q&&q.$layout.is(".align-to-left-logo")&&(g=q.$layout.find('.layout[header-layouts-value="MainEmail"]:visible, .layout[header-layouts-value="Contact.phone number"]:visible'),o&&1===g.length?(h="font_"+(g.attr("font")||"0"),i=d[h],q.$layout.css("margin-top",v.title-i.lineMargin-i.marginTop)):q.$layout.css("margin-top",v.logo+(s-q.$layout.height())/2));var L=_.map(c,function(a){return v[a.subType]||0});this.applySpaces(c,L)},this.applySpaces=function(a,b){_.each(a,function(c,d){var e=b[d];if(e){var f=d&&a[d-1].font,g=c.font,h=e;f&&(h=h-f.marginBottom-f.lineHeight+f.lineMargin),g&&(h-=g.lineMargin),c.$layout.css("margin-top",h+"px")}})},this.addImage=function(c,d){function e(b){var d=k.getRatioName(g,h).toLowerCase(),e=+(c.attr("max-width-"+b+"-"+d)||c.attr("max-width-"+b)||c.attr("max-width-"+d)||c.attr("max-width")),f=+(c.attr("max-height-"+b+"-"+d)||c.attr("max-height-"+b)||c.attr("max-height-"+d)||c.attr("max-height"));g/h>=e/f?(i=Math.min(e,g),j=Math.ceil(h*i/g)):j=Math.min(f,h),j=k.snapToGrid(j,a.quarterBaseLine,!0),i=Math.floor(g*j/h)}var f,g,h,i,j,k=this;return"shape"===d.mediaType&&d.svg?(f=c.html(d.svg.html),g=d.svg.width,h=d.svg.height,e("shape"),f.find("svg").width(i).height(j)[0].setAttribute("viewBox","0 0 "+g+" "+h)):(g=d.width,h=d.height,g&&h||(g=h=80),e("image"),f=angular.element("<img />").attr("src",b.itemToThumbnailUrl(d,i,j)).css("width",i+"px").css("height",j+"px").appendTo(c.attr("media-type","image").data("media",d))),c.css("width",i+"px"),c.css("height",j+"px"),f}}]),angular.module("siteGeneratorStaticsCoreAppInternal").factory("HeaderLayoutElement",["$p","solutionStatusCodes","LayoutElement","headerLayoutSolver",function(a,b,c,d){function e(a,c,d,e,f,g){this.templateId=a,this.structureSuffix=c,this.id=a+"_"+c+"_"+d,this.html=e,this.mode=f,this.isHeader=!0,this.cluster=0,this.argsComponents=[],this.solutionStatus=b.unknown,this.overrides={},this.width=g||940,this.height=60,this.maxHeight=600}return e.prototype=Object.create(c.prototype),e.prototype.isMobile=function(){return 300===this.width},e.prototype.clone=function(){throw"clone is not supported"},e.prototype.smartClone=function(){throw"smartClone is not supported"},e.prototype.applyDesignPolicy=function(){},e.prototype.calculateLayoutElementStatus=function(a,b,c,e){return d.calculateLayoutElementStatus(this,a,b,c,e)},e.prototype.matchWantedArgs=function(a){return d.matchWantedArgs(this,a)},e.prototype.getArgValue=function(a){return this.extractedArgs[a]},e.prototype.getLayoutData=function(){return{templateId:this.templateId,structureSuffix:this.structureSuffix}},e.prototype.getSerializedData=function(){return{templateId:this.templateId,structureSuffix:this.structureSuffix,id:this.id,html:this.html,mode:this.mode,version:3}},e}]),angular.module("siteGeneratorStaticsCoreAppInternal").service("headerLayoutSolver",["$p","$compile","$rootScope","mediaGallery","solutionStatusCodes","visualValidation","visualValidationContainer","applicationParameters","heightMutations","componentStyles","headerDesignPolicy","tpaService","richTextService",function(a,b,c,d,e,f,g,h,i,j,k,l,m){function n(a){var b=a.find(".equal-width"),c=_.reduce(b,function(a,b){return Math.max(a,angular.element(b).width())},0);b.css("min-width",c)}function o(a){var b=a.find('.layout.full-width-img[header-layouts-value="Logo"][media-type="image"]');b.size()&&(b.attr("max-width",b.parent().width()),b.empty(),k.addImage(b,b.data("media")))}function p(a){var b=a.find(".squash:visible");_.each(b,function(a,c){var d=angular.element(a);c>0&&(d.is(".layout")?d:d.find(".layout")).css("margin-top",0),c<b.length-1&&(d.is(".layout")?d:d.find(".layout")).css("margin-bottom",0)})}function q(a,b,c){if("label"===c)return{type:"text",subType:"label",value:b};var d=a.containingSegment.contentElement,e=b.indexOf(".")>-1,f=b.split("."),g=e?d.getReferenceFields()[b]:d.getArgsMatchingPolicy()[b];if(g){var h;h=e?d.extractReferences(f[1],f[0])[0]:d.getFieldValue(b);var i=_.clone(h);if("media"===i.type){var j=e?d.getReferenceValuesByMediaType(f[0])[0]:d.getValuesByMediaType();i.value=j.shape||j.clipart||j.icon||j.image}return i}}function r(a,b,c){var d=a.containingLG.getLayoutSelectionStore(),e=q(a,b,c);return e&&"text"===e.type&&d.fontOverridesManager.getOverride(a.containingSegment.node,e.subType)}this.initMasterFonts=function(a,b){return f.getThemeFonts(a,b).then(function(a){return _.each(a,function(a){a.marginTop=k.snapToGrid(a.lineMargin,h.quarterBaseLine)-a.lineMargin,a.marginBottom=k.snapToGrid(a.lineHeight-a.lineMargin,h.quarterBaseLine)-(a.lineHeight-a.lineMargin),a.css+=";margin-top:"+a.marginTop+"px;margin-bottom:"+a.marginBottom+"px;white-space:nowrap;align-self: auto;"}),a})},this.updateShapeProperties=function(b){if(b&&"shape"===b.mediaType&&!b.svg){var c={componentClass:"wysiwyg.viewer.components.WPhoto",componentProperties:{displayMode:"fill",metaData:{schemaVersion:"1.0"},onClickBehavior:"goToLink",type:"WPhotoProperties"},mediaMinHeight:60,ruleNodeIndex:4,skinClass:"wysiwyg.viewer.skins.photo.NoSkinPhoto",style:"wp2",type:"media",top:0,left:0,height:130,width:240};return f.getShapeSVG(c,b).then(function(a){b.svg=a})}return a.when()},this.applyFooterDesignPolicy=function(a,b){var c=_.map(a.find(".layout.first-line:visible"),function(a){var c=angular.element(a),d="font_"+(c.attr("font")||"0"),e=b[d],f={$layout:c,font:e};return f});if(c.length){var d=_.max(c,function(a){return a.font.lineMargin}).font.lineMargin;d=k.snapToGrid(d,h.quarterBaseLine),_.each(c,function(a){k.applySpaces([a],[d])})}p(a)},this.applyDesignPolicy=function(a,b,c,d){n(a),o(a),p(a);var e,f=d?d.menuOverridesManager.stretchButtons():!0,g=d?d.menuOverridesManager.alignment():"center",h=_.map(a.find(".layout[design-policy]:visible"),function(a){var f=angular.element(a),g=f.attr("design-policy"),h={subType:g,$layout:f};if("logo"!==g&&"menu"!==g&&"menubar"!==g&&"contacts"!==g&&"box"!==g){var i="font_"+(f.attr("font")||"0"),k=b[i];h.font=k}if("menu"===g){var l=c&&d&&d.getOverride("style",c);h.styleId=l&&l.menu||j.styles.menu[0],e=h}return h});if(0!==h.length){var i=a.find("[header-design-policy]").attr("header-design-policy")||"default";if("menu"===h[0].subType&&a.is(".flip-v")&&h.push(h.shift()),_.each(a.find(".layout.layout-align-center"),function(a){var b=angular.element(a),c=(20-b.height())/2;b.css("margin-top",c),b.css("margin-bottom",c)}),k.applyPolicy(i,h,b),e)if(f||"center"!==g){if("left"===g){if("ddm1"===e.styleId){var l=+e.$layout.css("margin-left").replace("px","")||0;e.$layout.css("margin-left",l-15)}}else if("right"===g&&"ddm1"===e.styleId){var m=+e.$layout.css("margin-right").replace("px","")||0;e.$layout.css("margin-right",m-15)}}else if("center"===e.$layout.attr("align")){var q=a.offset(),r=e.$layout.offset(),s=e.$layout[0].getBoundingClientRect(),t=Math.ceil(s.width),u=r.left-q.left,v=a.width()-t-2*u;v>0?e.$layout.css("margin-left",v):0>v&&e.$layout.css("margin-right",-v)}}},this.calculateLayoutElementStatus=function(d){var i=this,n=q.bind(null,d),o=n("Logo"),p=d.containingLG.getLayoutSelectionStore();return this.updateShapeProperties(o&&o.value&&o.value[0]).then(function(){return m.initForRender()}).then(function(){var a=angular.element(d.html),b=_.map(a.find(".layout[font]"),function(a){var b=r(d,a.getAttribute("header-layouts-value"),a.getAttribute("type"));return b?b.replace("font_",""):a.getAttribute("font")});return i.initMasterFonts(b,d.isMobile())}).then(function(a){var e=_.assign(c.$new(!0),{fonts:a,getFieldValue:function(a,b){if("shoppingCart"===a)return l.hasShoppingCart()?"x":void 0;var c=n(a,b);return c&&c.value},getTextFormatting:function(a,b){var c=n(a,b);return c&&d.getFormattingBySubType(c.subType)},getFontOverride:function(a,b){return r(d,a,b)}}),f=angular.element('<div class="preview"></div>').width(d.width).addClass(d.mode).appendTo(g.$headerLayoutSolver);return f.append(b(d.html)(e)),f.scope=e,d.isMobile()||(d.containingLG.isSiteHeader()?i.applyDesignPolicy(f,a,d.containingSegment,p):i.applyFooterDesignPolicy(f,a)),f}).then(function(b){var c=i.validate(b);if(c){var g=0,l=b.offset(),m=!1;d.height=k.snapToGrid(b.height(),h.gridStep);var o=b.find(".layout.menu-on-top:visible").length?0:d.height-b.height();if(d.layout=[],d.argList=[],d.extractedArgs=[],_.each(b.find(".layout:visible"),function(a){var b=angular.element(a),c=b.offset(),e=o+c.top-l.top,h=c.left-l.left,i=b[0].getBoundingClientRect(),k=0,p=Math.ceil(i.width),q=Math.ceil(i.height),r=b.attr("header-layouts-value"),s=b.attr("type"),t=r&&n(r,s);s=s||t&&t.type;var u;switch(s){case"shoppingCart":u={type:"shoppingCart"};break;case"box":u={type:"container",containerRole:"decorative",style:"c1",layout:[]},m=u;break;case"line":u={style:"hl1",type:"line",componentProperties:{fullScreenModeOn:"true"===b.attr("full-screen")}};break;case"button":u={type:"button"};break;case"menu":u={componentClass:"wysiwyg.viewer.components.menus.DropDownMenu",componentProperties:{alignButtons:"center",alignText:"center",moreButtonLabel:"More",moreItemHeight:15,sameWidthButtons:!1,stretchButtonsToMenuWidth:!0},ruleNodeIndex:0,skinClass:"wysiwyg.common.components.dropdownmenu.viewer.skins.SolidColorMenuButtonSkin",style:j.styles.menu[0],type:"menu"};break;case"media":u="Social.SocialButtons"===r?{componentClass:"wysiwyg.viewer.components.LinkBar",componentProperties:{bgScale:1,gallery:"social_icons",iconSize:+b.attr("max-width"),orientation:"HORIZ",spacing:+(b.attr("spacing")||8)},ruleNodeIndex:2,skinClass:"wysiwyg.viewer.skins.LinkBarNoBGSkin",style:"lb1",type:"social"}:{componentClass:"wysiwyg.viewer.components.WPhoto",componentProperties:{displayMode:"fill",metaData:{schemaVersion:"1.0"},onClickBehavior:"goToLink",type:"WPhotoProperties"},mediaMinHeight:60,ruleNodeIndex:4,skinClass:"wysiwyg.viewer.skins.photo.NoSkinPhoto",style:j.styles.media[0],type:"media"};break;case"label":case"text":k=Math.max(1,Math.ceil(.02*i.width)),u=_.defaults({font:b.attr("font")||"0",fontSize:+b.attr("fontSize"),align:b.attr("align")},f.masterTextLayouts)}u&&(_.extend(u,{top:e,left:h,height:q,width:p+k,subType:t&&t.subType}),d.layout.push(u),t&&(u.argIndex=g++,d.argList.push({type:t.type,subType:t.subType}),d.extractedArgs.push(t.value)))}),_.all(d.layout,function(a){return a.top>=h.gridStep})&&(_.each(d.layout,function(a){return a.top-=h.gridStep}),d.height-=h.gridStep),m){var p=_.filter(d.layout,function(a){return"media"===a.type||"title"===a.subType||"subTitle"===a.subType});m.layout=_.map(p,function(a){return a.top-=m.top,a.left-=m.left,a.boxParentOverrideKey=d.containingSegment.getOverrideKey(m),a}),d.layout=_.difference(d.layout,p)}d.solutionStatus=e.pass,d.createLayoutArray()}else d.failWithReason("content does not fit layout");return b.scope.$destroy(),b.remove(),a.when()})},this.matchWantedArgs=function(a,b){function c(a){return _.find(e,function(b){return!b.assigned&&b.fieldNames.indexOf(a)>-1})}b=_.clone(b);for(var d=angular.element(a.html),e=_.map(d.find('.layout[header-layouts-value]:not([type="label"])'),function(a){var b=angular.element(a);return{$layout:b,fieldNames:b.attr("header-layouts-value").split("|"),required:!!b.attr("required")}});b.length;){var f=b.pop(),g=c(f);if(!g)return!1;g.assigned=!0,g.$layout.attr("header-layouts-value",f)}if(_.any(e,function(a){return!a.assigned&&a.required}))return!1;var h,i=!1;if(_.each(e,function(a){a.assigned||(a.fieldNames.indexOf("logoText")>-1&&(i=!0,h=a.$layout.attr("font")||"0"),a.$layout.remove())}),i){var j=_.find(e,function(a){return a.fieldNames.indexOf("BusinessName")>-1});j&&j.assigned&&j.$layout.attr("font",h)}var k=d.find('.remove-if-empty:not(:has(.layout:not([type="label"]):not([type="line"])))').hide();return d.find(".trim-end > div").not(k).last().css({marginRight:"0"}),a.html=d[0].outerHTML,!0},this.validate=function(a){return _.every(a.find(".layout:visible"),function(b){var c=b.getBoundingClientRect();if("menu"===b.getAttribute("type"))return 300===a.width()||c.width>=140;var d=b.offsetParent.getBoundingClientRect();return c.left>=d.left&&c.right<=d.right})}}]).directive("headerLayoutsValue",["headerDesignPolicy","LayoutElementFormatting","richTextService",function(a,b,c){return{restrict:"A",scope:!0,link:function(d,e,f){var g=f.headerLayoutsValue,h=+f.spacing,i=f.align,j=f.wordwrap,k=f.type,l="Menu"===g||d.getFieldValue(g,k);if(l&&(l===!0||l[0]||l.callToAction)){e.show();var m="",n=d.getFontOverride(g,k),o=f.font;if(n?(o=n.replace("font_",""),e.attr("font",o)):f.font&&(n="font_"+f.font),n&&(m+=";"+_.get(d.fonts,[n,"css"],""),e.attr("fontSize",_.get(d.fonts,[n,"fontSize"],""))),f.style&&(m+=";"+f.style),e.attr("style",m),"Menu"===g)e.html("M");else if("Logo"===g)e.empty(),a.addImage(e,l[0]);else if("Social.SocialButtons"===g)e.empty(),_.each(l,function(b,c){a.addImage(e,b).css("margin-left",c?(h||8)+"px":"0")}),e.css("width","auto");else{var p=d.getTextFormatting(g,k),q=c.isRichText(l)?c.transformForViewer(l,+o,i,!1,p,{}):b.format(_.htmlEncode(l),p);e.html(q),i&&e.css("text-align",i),j&&(e.css("max-width","100%"),e.css("white-space","normal"))}}else e.hide()}}}]),angular.module("siteGeneratorStaticsCoreAppInternal").service("heightMutations",["applicationParameters",function(a){function b(a,b,c,e){return a[b][c[e]].map(function(a){return a.map(function(a){return d.heightMutations.indexOf(a)})})}var c,d=this;this.heightMutations=[];for(var e=a.minHeight;e<=a.maxHeight;)this.heightMutations.push(e),e+=e<a.minHeightForLargeHeightMutations?a.gridStep:a.heightMutationStep;for(this.heightMutationsForPartitions=[],c=a.minHeightForPartition;c<=a.maxHeightForPartition;c+=a.partitionsGridStep)this.heightMutationsForPartitions.push(c);this.spaceBetweenLG=20,this.defaultHeight=0,this.partitions={},this.repeaterPartitions={},this.findPartitionForGivenHeight=function(a,b){if(1===b)return-1!==d.heightMutationsForPartitions.indexOf(a)?[[a]]:void 0;var c=[];return d.heightMutationsForPartitions.forEach(function(e){if(a>e){var f=d.findPartitionForGivenHeight(a-e-d.spaceBetweenLG,b-1);f&&f.forEach(function(a){a.unshift(e),c.push(a)})}}),c.length>0?c:void 0};var f=[[1,2],[2,1],[1,3],[3,1]];f.forEach(function(a){d.heightMutationsForPartitions.forEach(function(b){function c(a,b){var c=[];return a.forEach(function(a){b.forEach(function(b){var d=a.concat(b);c.push(d)})}),c}var e=[],f=!0;if(a.forEach(function(a){if(f){var c=d.findPartitionForGivenHeight(b,a);c?e.push(c):f=!1}}),f){for(;e.length>1;){var g=e.shift(),h=e.shift(),i=c(g,h);e.unshift(i)}d.partitions[a.join("_")]=d.partitions[a.join("_")]||{},d.partitions[a.join("_")][b]=e[0]}})}),this.calculateRepeaterPartitions=function(b,c,d){var e=[],f=this.heightMutations[d],g=!0;return angular.forEach(b.columnPartition,function(b){if(1===b)e.push(f);else{var c=(f-20*(b-1))/b/a.gridStep,d=Math.floor(c)*a.gridStep;if(d>=20)for(var h=0;b>h;h++)e.push(d);else g=!1}}),g&&(this.repeaterPartitions[c]||(this.repeaterPartitions[c]={}),this.repeaterPartitions[c][this.heightMutations[d]]||(this.repeaterPartitions[c][this.heightMutations[d]]=[]),this.repeaterPartitions[c][this.heightMutations[d]].push(e)),g},this.getPartitions=function(a,c,d){if(a.isLGrepeater()){if(this.repeaterPartitions[c]&&this.repeaterPartitions[c][this.heightMutations[d]]||this.calculateRepeaterPartitions(a,c,d))return b(this.repeaterPartitions,c,this.heightMutations,d)}else if(this.partitions[c]&&this.partitions[c][this.heightMutations[d]])return b(this.partitions,c,this.heightMutations,d)},this.getSpecificPartition=function(a,b,c,d){var e=this.getPartitions(a,b,c);return e&&e[d]},this.getPartitionsValues=function(a,b,c){var d=a.isLGrepeater()?this.repeaterPartitions:this.partitions;return d[b]&&d[b][this.heightMutations[c]]?d[b][this.heightMutations[c]]:void 0},this.getPartitionLength=function(a,b){var c=a.isLGrepeater()?this.repeaterPartitions:this.partitions;return c[b]?Object.keys(c[b]).length:void 0}}]),angular.module("siteGeneratorStaticsCoreAppInternal").factory("httpForbiddenInterceptor",["$q","$injector","userDialogService",function(a,b,c){return{responseError:function(d){return 403===d.status?c.login().then(function(){var a=b.get("$http");return a(d.config)}):a.reject(d)}}}]),angular.module("siteGeneratorStaticsCoreAppInternal").factory("invertedStyleService",["previewService",function(a){function b(a){var b=a.style.properties.bg,c=a.style.properties.bgh;a.style.properties.bg=a.style.properties.txt,a.style.properties.bgh=a.style.properties.txth,a.style.properties.txt=b,a.style.properties.txth=c,a.styleType="custom"}var c;a.registerInit(function(a){c=a.documentServices});var d={"b1-inv":{regularStyle:"b1",connectedStyle:""},"b2-inv":{regularStyle:"b2",connectedStyle:""},"b3-inv":{regularStyle:"b3",connectedStyle:""},"b4-inv":{regularStyle:"b4",connectedStyle:""}},e={getStyle:function(a){var e=d[a];if(!e)return a.replace("-inv","");if(e.connectedStyle){var f=c.theme.styles.get(e.connectedStyle);if(f)return e.connectedStyle}var g=c.theme.styles.get(e.regularStyle);b(g);var h=c.theme.styles.createItem(g);return e.connectedStyle=h,h},setDocumentServices:function(a){c=a}};return e}]),angular.module("siteGeneratorStaticsCoreAppInternal").constant("BoxMargins",{MOBILE:20,SMALL:40,MEDIUM:60,LARGE:80}).factory("LayoutDecorationUtils",["LineDecorationData","BoxDecorationData","BoxMargins","flags",function(a,b,c,d){function e(a,b){return a.originalBoxTypes[b.decorationKey]}function f(a,b){var c=parseInt(b);return a.boxesStructure[c]}function g(a,b){return a.smartLayoutRulesNodesMap[b]}function h(a){return a.getLayoutSelectionStore().getDecorations(a.containingSegment)}function i(a,b){return _.filter(b.bottom.children,function(b){return a.isMediaType(b.component)})}function j(a,b){
return"container"===a.type?!_.isEmpty(a.layout)&&_.all(a.layout,function(a){return j(a,b)}):void 0===a.argIndex||b.indexOf(a.argIndex)>-1}function k(a,b){var c,d=h(a);return void 0!==b.decorationKey&&(f(a,b.decorationKey)?c=d[e(a,b)]+"":g(a,b.decorationKey)&&b.decorationType&&(c=d[b.decorationKey][b.decorationType])),c?c.split("#"):void 0}function l(a,b,c){var d=a.getLayoutSubType(b);return _.find(a.layoutArray,function(a){return a.decorationKey===d&&a.decorationType===c})}function m(b,c,d){var e=c.length-1,f=0,g=0;return angular.forEach(c[e],function(h,i){if("empty"!==h.type&&p(b,c,h,e)){var j=k(b,l(b,h,"beneath"))[a.position];g=Math.max(g,j);for(var m=e-1;m>=0&&c[m][i]===h;)m--;if(m>=0){var n=c[m][i];f="empty"!==n.type&&q(b,n,h)?Math.max(f,d[e][i]-b.letterHeight(n)-10):Math.max(f,b.lineDefaultPositionArea(h))}else f=Math.max(f,b.lineDefaultPositionArea(h))}}),{lineArea:f,position:g}}function n(b,c,d){var e=0,f=0,g=0;return angular.forEach(c[e],function(h,i){if("empty"!==h.type&&o(b,c,h,e)){var j=k(b,l(b,h,"above"))[a.position];g=Math.max(g,j);for(var m=e+1;m<c.length&&c[m][i]===h;)m++;if(m<c.length){var n=c[m][i];f="empty"!==n.type&&q(b,n,h)?Math.max(f,d[m][i]-b.letterHeight(n)-10):Math.max(f,b.lineDefaultPositionArea(h))}else f=Math.max(f,b.lineDefaultPositionArea(h))}}),{lineArea:f,position:g}}function o(a,b,c,d){if(l(a,c,"above"))return!0;for(var e=0;e<b[d].length;e++)if(b[d][e]===c&&d>0){for(var f=d-1;f>=0&&b[f][e]===c;)f--;if(f>=0&&"empty"!==b[f][e].type&&l(a,b[f][e],"beneath"))return!0}}function p(a,b,c,d){if(l(a,c,"beneath"))return!0;for(var e=0;e<b[d].length;e++)if(b[d][e]===c&&d<b.length-1){for(var f=d+1;f<b.length&&b[f][e]===c;)f++;if(f<b.length&&"empty"!==b[f][e].type&&l(a,b[f][e],"above"))return!0}}function q(a,b,c){var d=a.getLayoutParent(b),e=a.getLayoutParent(c);return"container"===d.type&&d.vPosition&&"container"===e.type&&e.vPosition?!0:!("container"===d.type&&d.vPosition||"container"===e.type&&e.vPosition)}return{isDecorativeContainer:function(a){return"container"===a.type&&"decorative"===a.containerRole},getElementsInBox:function(a,b){var c=_.uniq(_.flatten(a.boxesStructure[b])),d=[],e=a.layout;return 1===a.layout.length&&this.isDecorativeContainer(a.layout[0])&&(e=a.layout[0].layout),angular.forEach(e,function(a){j(a,c)&&d.push(a)}),d},getStretchableMedia:function(a){var b=i(a,a.smartLayoutRulesNodesMap.LayoutElement[0]);if(0===b.length&&this.isDecorativeContainer(a.layout[0])){var c=a.layout[0],d=_.find(a.smartLayoutRulesNodesMap[a.getLayoutSubType(c)],function(a){return a.top.component===c});d&&(b=i(a,d))}return b.length>0?b[0].component:void 0},getLineDataInLastRow:m,getLineDataInFirstRow:n,hasAboveLine:o,hasBeneathLine:p,getDecorationDataArray:k,getDecorationsFromLSS:h,isBoxDecorationKey:f,isLineDecorationKey:g,getBoxDecorationKey:e,isFirstLayoutInBox:function(a,b,c){if(b&&b.decorationKey>-1){var d=a.boxesStructure[b.decorationKey][0];if(_.indexOf(d,c.argIndex)>-1)return!0}},isLastLayoutInBox:function(a,b,c){if(b&&b.decorationKey>-1){var d=_.last(a.boxesStructure[b.decorationKey]);if(_.indexOf(d,c.argIndex)>-1)return!0}},inRelation:q,getContainerMargin:function(a,c){var d=this.getDecorationDataArray(a,c)[b.MARGIN];return void 0===d&&(d="1"),+d},getBoxMargin:function(a,b,e){if(a.isMobile())return c.MOBILE;if(d.presetImprovementContainerWidth){var f=a.containingSegment.hasColumnWithMediaBackground(!0),g=a.containingSegment.containingLG.getColumnsData().props.columnsMargin;if(f)return 10>g?c.MEDIUM:c.SMALL}var h=c.SMALL;return b>460&&(h="decorative"===e?c.MEDIUM:c.LARGE),h},getMediaContainerWidth:function(a,b){if(220>a)return[];if(b&&d.presetImprovementContainerWidth){var c=b.containingSegment.hasColumnWithMediaBackground(!0);if(c)switch(a){case 220:return[160];case 300:return[240];case 460:return[400]}}return a>=220&&300>a?[140]:a>=300&&460>a?[180,220]:a>=460&&620>a?[180,260,380]:a>=620&&700>a?[320,400,500]:a>=700&&940>a?[320,400,580]:940===a?[400,520,820]:void 0}}}]),angular.module("siteGeneratorStaticsCoreAppInternal").constant("OnMediaSize",{SMALL:0,MEDIUM:1,LARGE:2}).constant("OnMediaPositions",{TOP_LEFT:0,TOP_MIDDLE:1,TOP_RIGHT:2,CENTER_LEFT:3,CENTER_MIDDLE:4,CENTER_RIGHT:5,BOTTOM_LEFT:6,BOTTOM_MIDDLE:7,BOTTOM_RIGHT:8}).constant("BoxDecorationData",{BOX_TYPE:0,MARGIN:1,TIGHT:2}).constant("LineDecorationData",{position:0,length:1,alignment:2,size:3}).constant("BoxDecorationTypes",{TOP:0,RIGHT:1,BOTTOM:2,LEFT:3,ON_MEDIA:4,FULL:5}).constant("BoxDecorationRules",[[4,3,1,2,5],[4,3,0,2,5],[4,0,3,1,5],[4,1,0,2,5],[3,0,1,2,5],[4]]).factory("layoutDecoration",["$p","$log","SmartLayoutRuleUtils","OnMediaPositions","LineDecorationData","BoxDecorationData","applicationParameters","BoxDecorationTypes","BoxDecorationRules","LayoutDecorationUtils","designPolicyService",function(a,b,c,d,e,f,g,h,i,j,k){function l(a,b,c,d){var e=j.getDecorationsFromLSS(a)||{};c?(e[b]||(e[b]={}),e[b][c]=d):e[b]=d,a.getLayoutSelectionStore().setDecorations(a.containingSegment,e)}function m(a,b){var c=j.getDecorationsFromLSS(a);c&&(j.isBoxDecorationKey(a,b.decorationKey)?delete c[j.getBoxDecorationKey(a,b)]:c[b.decorationKey]&&b.decorationType&&c[b.decorationKey][b.decorationType]&&(delete c[b.decorationKey][b.decorationType],0===_.keys(c[b.decorationKey]).length&&delete c[b.decorationKey]))}function n(a,b,c,d){var e=j.getDecorationsFromLSS(a),f=j.isBoxDecorationKey(a,b.decorationKey),g=f?e[j.getBoxDecorationKey(a,b)]+"":e[b.decorationKey][b.decorationType],h=g.split("#");Array.isArray(d)&&(d=d.join("|")),h[c]=d,f?e[j.getBoxDecorationKey(a,b)]=h.join("#"):e[b.decorationKey][b.decorationType]=h.join("#")}function o(a,b){return"LayoutElement"===b.decorationKey?a:_.find(a.layoutArray,function(c){return a.getLayoutSubType(c)===b.decorationKey})}function p(a,b,c,d,e){return a=a.replace('"id":'+c+",",'"id":#'+e+","),a=a.replace('"arrayIndex":'+b+",",'"arrayIndex":#'+d+","),a=a.replace('"id":'+(c+1)+",",'"id":#'+(e+1)+","),a=a.replace('"arrayIndex":'+b+",",'"arrayIndex":#'+d+",")}function q(a,b,c){for(var d=a.smartLayoutRulesNodesMap[b],e=0;e<d.length;e++)if(d[e].top.component===c)return{ruleId:d[e].top.id,arrayIndex:a.smartLayoutRulesNodes.indexOf(d[e])}}function r(a,b,d){var e=a.serializeTree();if(a.initSmartLayoutRules(!0),"container"===b.type){var f=a.smartLayoutRulesNodes[a.smartLayoutRulesNodes.length-1].top.id,g=a.smartLayoutRulesNodes.length-1;e=p(e,g-1,f-10,g,f);for(var h=a.smartLayoutRulesNodes.length-2;h>=0;h--){var i=a.smartLayoutRulesNodes[h].bottom.component;b!==i&&(e=p(e,i.oldArrayIndex,i.oldTopRuleId,h,a.smartLayoutRulesNodes[h].top.id))}e=e.replace(/#/g," ")}else{var j=q(a,d,b);e=c.updateRuleTree(e,j.ruleId,"id",10,/"id":(\d*)/g),e=c.updateRuleTree(e,j.arrayIndex,"arrayIndex",1,/"arrayIndex":(\d*)/g)}a.deserializeTree(e)}function s(a,b,c,d){var e=Math.max(0,Math.min(d.y,b.absoluteTop+b.height)-Math.max(c.y,b.top)),f=Math.max(0,Math.min(d.x,b.absoluteLeft+b.width)-Math.max(c.x,b.left));return f>=.9*b.width&&e>=.25*b.height||e>=.9*b.height&&f>=.25*b.width?a.indexOf(b):void 0}function t(a,b,c){a[b]=a[b]-c}function u(a){a.originalWidth=a.width,a.originalLeft=a.left}function v(a,b,c,d){switch(a){case"left":return b.left-d.left;case"right":return d.left+d.width-(c.width-b.right);case"top":return b.top-d.top;case"bottom":return d.top+d.height-(c.height-b.bottom)}}function w(a,b){var c=a.calcStructure(b);return a.structureToDesignStructure(c)}function x(a,b,c,d){_.each(b,function(b){var e=a.getAlignment(b,"size",!0);e&&a.createElementLayoutHPosition(b,e),a.changeAlignFromLayout(b,a.getAlignment(b,"hPosition"),"hPosition",!0),a.isShapeLayout(b)&&(b.left<c&&(b.left=c),b.left+b.width+c>d&&(b.left=d-c-b.width))})}function y(a,b,c){if(b.argIndex>-1){var d=a.getLayoutOriginalSizes(b);b.left=d.left,b.width=d.width,-1===c.indexOf(b)&&c.push(b)}}function z(a,b,c,d,e){var f=_(b).unzip().value();["left","right"].forEach(function(g){var h,i="left"===g?f[0]:f[f.length-1],j=_.uniq(i),k=_.filter(j,function(e,f){if(h=v(g,d,c,e),h>0){var i=_.find(a.smartLayoutRulesNodesMap[a.argList[e.argIndex].subType],function(a){return a.top.component===e}),j="media"===e.type&&i.bottom.parent!==a.smartLayoutRulesNodes[a.smartLayoutRulesNodes.length-1].bottom;if(j)return 1===_.uniq(b[f]).length?("left"===g?e.left+=h:e.left-=h,!1):!0;if("button"===e.type||a.isElementWithDynamicWidth(e)){var k=a.getLayoutOriginalSizes(e);if(k.width-h<=0)return!0}else if(e.width-h<=0)return!0}return!1});if(k.length>0&&f.length>1){var l=0;_.each(j,function(a){h=v(g,d,c,a),"left"===g?a.left+=h:a.left-=h,u(a),l=Math.max(l,h)});var m="left"===g?f[1]:f[f.length-2],n=_.uniq(m);_.each(n,function(b){y(a,b,e);var c=m.indexOf(b);"left"===g?(b.width-=l,b!==i[c]&&(b.left+=l)):(b.width-=l,b===i[c]&&(b.left+=h)),u(b),h>0&&b.layout&&z(a,w(a,b),b,{left:b.decorativePadding||0,right:b.decorativePadding||0},e)})}else _.each(c.layout,function(b){y(a,b,e);var f=v(g,d,c,b);f>0&&(a.isShapeLayout(b)||(b.width-=f),"left"===g&&(b.left+=f),u(b),b.layout&&z(a,w(a,b),b,{left:b.decorativePadding||0,right:b.decorativePadding||0},e))})})}function A(a,b){var c=k.designPolicy.execBox(b,a.getLayoutSelectionStore().designPolicy.factor,a),d={top:c,bottom:c};["top","bottom"].forEach(function(a){_.each(b.layout,function(c){if(j.isDecorativeContainer(c)){var e=v(a,d,b,c);e>0&&(c.height-=e,"top"===a?(c.missingTop=e,c.top+=e):(c.missingBottom=e,c.padding=e))}})})}function B(a,b,c){angular.forEach(b.layout,function(a){angular.forEach(["top","left"],function(c){t(a,c,b[c])})});var d,e=k.designPolicy.execBox(b,a.getLayoutSelectionStore().designPolicy.factor,a),f=a.getDesignStructure();if(c===h.FULL)d=f[0];else for(var g=1;g<f.length;g++)if(_.flatten(f[g]).indexOf(b.layout[0])>-1){d=f[g];break}b.decorativePadding=e;var i=[];z(a,d,b,{left:e,right:e},i),C(a),x(a,i,e,b.width)}function C(a){_.each(a.smartLayoutRulesNodesMap.image,function(a){var b=a.bottom.component;b.squareImage&&b.width<b.height&&(b.height=b.width)})}function D(a,b,c,d,e){a.left=c,a.top=b,a.width=d,a.height=e}function E(a,b,c,d){D(b,c.top,c.left,c.width,c.height),a.setDecorationChanged(!0),B(a,b,d);for(var e=a.smartLayoutRulesNodes.length-2;e>=0;e--){var f=a.smartLayoutRulesNodes[e].bottom.component;f.oldTopRuleId=a.smartLayoutRulesNodes[e].top.id,f.oldArrayIndex=e}r(a,b,"container")}function F(a,b,c){_.extend(a,{style:"structure"===c?core.invisibleContainerStyleId:"c1",type:"container",decoration:!0,containerRole:c,decorationKey:b})}function G(a,b,c){angular.forEach(a.layout,function(a){a.left=b,a.width=c,"button"===a.type&&u(a)})}function H(a,b){var c=j.getDecorationDataArray(a,b)[f.TIGHT];return void 0===c&&(c="0"),+c}function I(a,b){var c=a.getAlignment(b,"vPosition");return"top"===c&&(c=d.CENTER_MIDDLE),c}function J(a,b,c){var e=I(a,b),f=a.getAlignment(b,"hPosition"),g=a.getBgLayout(b.onMediaIndex),i=j.getMediaContainerWidth(g.width,a),l=i[f]||i[i.length-1],m=a.containingLG.getColumnsData(),n=m&&m.enable;F(b,h.ON_MEDIA,c);var o,p,q,r,s;q="decorative"!==c||j.getContainerMargin(a,b)?j.getBoxMargin(a,g.width,c):0,r=s=q,"decorative"!==c&&n&&(s=0),b.verticalAlign=!1,b.horizontalAlign=!1,b.fixedBottom=!1;var t=!1;switch(e){case d.TOP_LEFT:o=s,p=r,t=!0;break;case d.TOP_MIDDLE:p=r,o=(g.width-l)/2,b.horizontalAlign=!0,t=!0;break;case d.TOP_RIGHT:p=r,o=g.width-l-s,t=!0;break;case d.CENTER_LEFT:o=s,p=(g.height-b.height)/2,b.verticalAlign=!0;break;case d.CENTER_MIDDLE:o=(g.width-l)/2,p=(g.height-b.height)/2,b.verticalAlign=!0,b.horizontalAlign=!0;break;case d.CENTER_RIGHT:p=(g.height-b.height)/2,o=g.width-l-s,b.verticalAlign=!0;break;case d.BOTTOM_LEFT:b.fixedBottom=!0,o=s,p=g.height-b.height-r;break;case d.BOTTOM_MIDDLE:b.fixedBottom=!0,o=(g.width-l)/2,p=g.height-b.height-r,b.horizontalAlign=!0;break;case d.BOTTOM_RIGHT:b.fixedBottom=!0,p=g.height-b.height-r,o=g.width-l-s}b.padding=q,D(b,p+g.top,o+g.left,l,b.height),a.setDecorationChanged(!0);var u=0;"decorative"===c&&(u=k.designPolicy.execBox(b,a.getLayoutSelectionStore().designPolicy.factor,a)),G(b,u,l-2*u),t&&a.addRule({childType:"container",childComponent:b,childFacet:"top",parentType:"container"===g.type?"container":"image",parentComponent:a.smartLayoutRulesNodes[a.layoutArray.indexOf(g)].top.component,parentFacet:"top"}),a.fakeOriginalToSpecificLayout(b),"decorative"===c&&ba(a,b,b.layout)}function K(a,b,c,d){b.layout=_.clone(a.layout),a.layout.length=0,a.layout.push(b);var e=$(a,h.FULL,c,d,b);E(a,b,e,h.FULL),A(a,b);var f=_.map(a.smartLayoutRulesNodesMap.LayoutElement[0].bottom.children,function(a){return a.component});angular.forEach(f,function(c){a.addRule({childType:a.getLayoutSubType(c),childComponent:c,childFacet:"bottom",parentType:"container",parentComponent:b,parentFacet:"bottom"})}),a.addRule({childType:"container",childComponent:b,childFacet:"bottom",parentType:"LayoutElement",parentFacet:"bottom"})}function L(a,b,c,d,e){b.layout=c,angular.forEach(c,function(b){a.layout.splice(a.layout.indexOf(b),1)}),a.layout.push(b);var f=$(a,d,c,e,b);if(E(a,b,f,d),angular.forEach(c,function(d){var e=a.smartLayoutRulesNodes[a.layoutArray.indexOf(d)];angular.forEach(e,function(d){angular.forEach(d.children,function(e){-1===c.indexOf(e.component)&&a.addRule({childType:a.getLayoutSubType(e.component),childComponent:e.component,childFacet:e.facet,parentType:"container",parentComponent:b,parentFacet:d.facet})}),d.parent&&"root"!==d.parent.facet&&!d.parent.component.isLayoutElement&&-1===c.indexOf(d.parent.component)&&(a.addRule({childType:"container",childComponent:b,childFacet:d.facet,parentType:a.getLayoutSubType(d.parent.component),parentComponent:d.parent.component,parentFacet:d.parent.facet}),a.removeRule(d))})}),f.moveVPositionSettings&&(b.fixedBottom=c[0].fixedBottom,b.verticalAlign=c[0].verticalAlign,c[0].fixedTop=!1,c[0].fixedBottom=!1,c[0].verticalAlign=!1,b.mediaDomParent=c[0].mediaDomParent,a.postInit()),f.changeMediaDomParent){delete c[0].mediaDomParent,c[0].fixedTop=!1,c[0].vPosition.top.fixedTop=!1;var g=a.serializeTree();a.initSmartLayoutRules(!0),a.deserializeTree(g)}f.bottomMedia?a.addRule({childType:"container",childComponent:b,childFacet:"bottom",parentType:"image",parentComponent:a.smartLayoutRulesNodesMap.image[0].top.component,parentFacet:"bottom"}):f.bottomLe&&a.addRule({childType:"container",childComponent:b,childFacet:"bottom",parentType:"LayoutElement",parentFacet:"bottom"}),d===h.BOTTOM&&1===b.layout.length&&b.layout[0].fixedBottom&&(b.fixedBottom=!0)}function M(a,b){var c,d=0;return angular.forEach(a,function(a){var e;e=b?a.absoluteTop+a.height:a.absoluteLeft+a.width,e>d&&(d=e,c=a)}),c}function N(a,b,c,d,e,f){if(c)d.top=e.top,d.height=e.height,d.changeMediaDomParent=!0,d.bottomMedia=!0;else{0===f[0].rowIndex?d.top=0:e.rowIndex>f[0].rowIndex?d.top=W(f):d.top=e.top;var g=R(a,f);g>b?g===a.structure.length-1?(d.height=a.height-d.top,d.bottomLe=!0):d.height=T(f)-d.top:(d.height=e.top+e.height,d.bottomMedia=!0)}}function O(a,b,c){b.left=0===c[0].colIndex?0:X(a,c);var d=S(a,c);d===a.structure[0].length-1?b.width=a.width-b.left:b.width=V(a,c)-b.left}function P(a,b,c,d){b.top=d.top+d.height+20;var e=R(a,c);e===a.structure.length-1?b.height=a.height-b.top:b.height=T(c)-b.top}function Q(a,b,c){a.top=0===b[0].rowIndex?0:W(b),a.height=c.top-20-a.top}function R(a,b){for(var c=M(b,!0),d=c.rowIndex;d<a.structure.length-1&&a.structure[d+1][c.colIndex]===c.argIndex;)d++;return d}function S(a,b){for(var c=M(b),d=c.colIndex;d<a.structure[0].length-1&&a.structure[c.rowIndex][d+1]===c.argIndex;)d++;return d}function T(a){return _.max(_.map(a,function(a){return a.absoluteTop+a.height}))}function U(a,b){var c=a.getLayoutParent(b);return c.absoluteLeft||c.top||0}function V(a,b){return _.max(_.map(b,function(b){if("button"===b.type){var c=a.getButtonLeftAndWidth(b);return U(a,b)+c.left+c.width}return b.absoluteLeft+b.width}))}function W(a){return _.min(_.pluck(a,"absoluteTop"))}function X(a,b){return _.min(_.map(b,function(b){if("button"===b.type){var c=a.getButtonLeftAndWidth(b);return U(a,b)+c.left}return b.absoluteLeft}))}function Y(a,b){return _.max(_.map(b,function(b){var c=a.getLayoutOriginalSizes(b);return b.absoluteLeft-(b.left-c.left)+c.width}))}function Z(a,b){return _.min(_.map(b,function(b){var c=a.getLayoutOriginalSizes(b);return b.absoluteLeft-(b.left-c.left)}))}function $(a,b,c,d,e){var f,g={},i=j.getStretchableMedia(a);if(i)for(f=i.rowIndex;f<a.structure.length-1&&a.structure[f+1][i.colIndex]===i.argIndex;)f++;var l=1===c.length&&c[0].vPosition;if(d){var m={left:X(a,c),right:V(a,c),top:W(c),bottom:T(c)},n={right:Y(a,c),left:Z(a,c)},o=k.designPolicy.execBox(e,a.getLayoutSelectionStore().designPolicy.factor,a);switch(g.width=Math.min(m.right-m.left+2*o,n.right-n.left),m.left===n.left?g.left=n.left:m.right===n.right?g.left=n.right-g.width:g.left=(n.right-g.width)/2,b){case h.FULL:case h.LEFT:case h.RIGHT:g.top=Math.max(m.top,0),g.height=m.bottom-g.top,l&&(g.changeMediaDomParent=!0,g.moveVPositionSettings=!0);break;case h.TOP:Q(g,c,i);break;case h.BOTTOM:P(a,g,c,i)}}else switch(b){case h.LEFT:g.left=0===c[0].colIndex?0:X(a,c),g.width=i.left-20-g.left,N(a,f,l,g,i,c);break;case h.RIGHT:g.left=i.left+i.width+20;var p=S(a,c);p===a.structure[0].length-1?g.width=a.width-g.left:g.width=V(a,c)-g.left,N(a,f,l,g,i,c);break;case h.TOP:Q(g,c,i),O(a,g,c);break;case h.BOTTOM:P(a,g,c,i),O(a,g,c);break;case h.ON_MEDIA:g.left=c[0].left,g.top=c[0].top,g.height=c[0].height,g.width=c[0].width;break;case h.FULL:g.left=0,g.top=0,g.height=a.height,g.width=a.width}return g}function aa(a,b){a.argIndex>-1&&(a.boxParentOverrideKey=b),a.layout&&("decorative"===a.containerRole?a.boxParentOverrideKey=b:angular.forEach(a.layout,function(a){aa(a,b)}))}function ba(a,b,c){var d=a.containingSegment.getOverrideKey(b);angular.forEach(c,function(a){aa(a,d)})}function ca(a,b){var c=j.getElementsInBox(a,b);if(0!==c.length){if(b===h.ON_MEDIA)J(a,c[0],"decorative");else{var d={};F(d,b,"decorative"),ba(a,d,c);var e=H(a,d);b===h.FULL?K(a,d,c,e):L(a,d,c,b,e),a.fixComponentsAlign(a,!1,[])}a.initAlignRules()}}function da(a,b){for(var c,d,e=0;e<a.length&&(d=a[e],!(c=ea(d,b)));e++);return{rowIndex:c.rowIndex,colIndex:c.colIndex,designStructure:d}}function ea(a,b){for(var c=0;c<a.length;c++)for(var d=0;d<a[c].length;d++)if(a[c][d]===b)return{rowIndex:c,colIndex:d}}function fa(a,b,c,d,e){var f=1e3;return angular.forEach(b[d],function(g,h){if(g===c){var i=g,k=g,l=!0;if("above"===e){for(var m=d-1;m>=0&&b[m][h]===g;)m--;m>=0&&(i=b[m][h],"empty"!==i.type&&j.inRelation(a,i,g)&&(l=!1))}else{for(var n=d+1;n<b.length&&b[n][h]===g;)n++;n<b.length&&(k=b[n][h],"empty"!==k.type&&j.inRelation(a,k,g)&&(l=!1))}f=l?Math.min(f,a.lineDefaultPositionArea(g)):Math.min(f,a.linePositionArea(k,i))}}),f}function ga(a,b,c){var d=a.smartLayoutRulesNodesMap[b][0].bottom.component,e=a.getLayoutParent(d),f={height:2,left:void 0,style:"hl1",type:"line",decoration:!0,decorationKey:b,decorationType:c};f.width=void 0;var g=e;e&&"container"===e.type&&"structure"===e.containerRole&&!e.vPosition&&"undefined"===d.onMediaIndex&&(g=a.getLayoutParent(e)),g?g.layout.push(f):a.layout.push(f),e===g?f.top=d.top:f.top=e.top+d.top,"beneath"===c&&(f.top+=d.height),r(a,f,"line"),d.boxParentOverrideKey&&(f.boxParentOverrideKey=d.boxParentOverrideKey)}function ha(a,b){return b.designStructure[b.designStructure.length-1][b.colIndex]===a}function ia(a){var b=j.getDecorationsFromLSS(a),c=[];return angular.forEach(b,function(b,d){j.isBoxDecorationKey(a,d)?c.push(b):j.isLineDecorationKey(a,d)&&angular.forEach(b,function(a,b){c.push(d+b+a)})}),c.sort().join("&")}function ja(a,b){return Math.round(b/g.quarterBaseLine)*g.quarterBaseLine-(a.absoluteTop||0)}function ka(a,b){var c=1===a.structure.length&&1===a.structure[0].length&&a.isMediaType(a.getLayoutWithArgIndex(a.structure[0][0]));return b!==h.FULL||!c}function la(a,b,c){var d;return a.recurseLayouts(function(a){return a.decorationKey!==b||c&&a.decorationType!==c?void 0:d=a}),d}return{getBoxesLocations:function(a){var b=[],c=_.filter(_.map(a.boxesStructure,function(b,c){return b.length>0&&ka(a,c)?c:-1}),function(a){return a>=0}),d=_.difference(c,a.boxTypes);return angular.forEach(d,function(c){if(c===h.FULL)b.push({type:"full",boxType:c,left:0,top:0,width:a.width,height:a.height});else{var d=j.getElementsInBox(a,c),e=$(a,c,d);e.type="part",e.boxType=c,b.push(e)}}),_.sortBy(b,function(a){return"full"===a?0:1})},getHorizontalLineLocations:function(a){var b=a.getDesignStructure(),c=[];return 0===b.length?c:(a.calculateAbsoluteLocations(),a.recurseLayouts(function(d){if(void 0!==d.argIndex||"container"===d.type){var e=void 0!==d.argIndex&&da(b,d),f=a.getLayoutSubType(d);c.push({type:"above",elementType:f,left:d.absoluteLeft,top:d.absoluteTop,width:d.width,height:d.height,enabled:void 0!==d.argIndex&&!j.hasAboveLine(a,e.designStructure,d,e.rowIndex)}),c.push({type:"beneath",elementType:f,left:d.absoluteLeft,top:d.absoluteTop+d.height,width:d.width,height:d.height,enabled:void 0!==d.argIndex&&!j.hasBeneathLine(a,e.designStructure,d,e.rowIndex)})}}),c)},getElementsInRectangle:function(a,b){a.calculateAbsoluteLocations();var c=[];return angular.forEach(a.layout,function(d,e){s(a.layoutArray,d,b.topLeft,b.bottomRight)>-1&&c.push(e)}),c},getOverlappingElementsInRectangle:function(a,b){var c=this;a.calculateAbsoluteLocations();var d=[];return angular.forEach(a.layout,function(a,e){var f={x:a.absoluteLeft,y:a.absoluteTop,width:a.width,height:a.height};c.isOverlapping(f,b)&&d.push(e)}),d},isOverlapping:function(a,b){return!(a.x+a.width<b.x||b.x+b.width<a.x||a.y+a.height<b.y||b.y+b.height<a.y)},addBox:function(a,b){return l(a,b,void 0,b+"#1#0"),this.applyDecoration(a).then(la.bind(this,a,b))},updateBoxData:function(a,b,c,d){return n(a,b,c,d),this.applyDecoration(a).then(la.bind(this,a,b.decorationKey))},addHorizontalLine:function(a,b){var c=a.smartLayoutRulesNodesMap[b.elementType][0].bottom.component,d=da(a.getDesignStructure(),c),e=.5;(0===d.rowIndex&&"above"===b.type||d.rowIndex===d.designStructure.length-1&&"beneath"===b.type)&&(e=1);var f="left",g=c.width,h="px";return l(a,b.elementType,b.type,e+"#"+g+"#"+f+"#"+h),this.applyDecoration(a).then(la.bind(this,a,b.elementType,b.type))},changeHorizontalLinePosition:function(a,b,c){return c=+c/100,n(a,b,e.position,c),this.applyDecoration(a).then(la.bind(this,a,b.decorationKey,b.decorationType))},changeHorizontalLineLengthSize:function(a,b,c){n(a,b,e.size,c);var d=o(a,b),f=+this.getDecorationData(a,b).length;return"px"===c?f*=d.width:f/=d.width,this.changeHorizontalLineLength(a,b,f)},changeHorizontalLineLength:function(b,c,d){var f=this.getDecorationData(b,c).size;return d=+d,"%"===f&&(d/=100),n(b,c,e.length,d),a.when()},changeHorizontalLineAlignment:function(b,c,d){return n(b,c,e.alignment,d),a.when()},removeDecoartion:function(a,b){return m(a,b),this.applyDecoration(a)},applyDecoration:function(b){if(b=b.getMaster(),b.reset(),b.updateFromVariationsMap(),b.variationsMap&&b.setDecorationChanged(!0),b.containingLG.setAsDirty(),0===b.getDesignStructure().length)return a.when();var c=[],d={},e=j.getDecorationsFromLSS(b);return angular.forEach(e,function(a,e){j.isBoxDecorationKey(b,e)?c.push(+e):j.isLineDecorationKey(b,e)&&(d[e]=a)}),b.decorationTypes=ia(b),b.boxTypes=[],b.originalBoxTypes={},angular.forEach(c,function(a){if(0===b.boxesStructure[a].length)for(var d=0;d<i[a].length;d++){var e=i[a][d];if(b.boxesStructure[e].length>0&&-1===c.indexOf(e)&&-1===b.boxTypes.indexOf(e)){b.boxTypes.push(e),b.originalBoxTypes[e]=a;break}}else b.boxTypes.push(a),b.originalBoxTypes[a]=a}),b.boxTypes=_.sortBy(b.boxTypes),_.sequencePromises(b.boxTypes,function(a){return b.checkArgsAndVisualValidate().then(function(c){c&&ka(b,a)&&(ca(b,a),b.calculateDesignStructure())})}).then(function(){if(-1===b.boxTypes.indexOf(h.ON_MEDIA)&&b.onMediaStructure){var a=j.getElementsInBox(b,h.ON_MEDIA)[0];J(b,a,"structure")}angular.forEach(d,function(a,c){angular.forEach(a,function(a,d){switch(d){case"above":case"beneath":ga(b,c,d)}})})})},getDecorationData:function(a,b){var c={};if(void 0!==b.decorationKey){var d=j.getDecorationDataArray(a,b);d&&(j.isLineDecorationKey(a,b.decorationKey)?c={position:d[e.position],length:d[e.length],alignment:d[e.alignment],size:d[e.size]}:j.isBoxDecorationKey(a,b.decorationKey)&&(c={isDecorativeContainer:j.isDecorativeContainer(b),margin:j.getContainerMargin(a,b),tight:H(a,b)}))}return a.isOnMediaContainer(b)&&(c.position=I(a,b),c.isOnMediaContainer=!0),c},getLineDataInFirstRow:function(a,b,c){return j.getLineDataInFirstRow(a,b,c)},getLineDataInLastRow:function(a,b,c){return j.getLineDataInLastRow(a,b,c)},hasAboveLine:function(a,b,c,d){return j.hasAboveLine(a,b,c,d)},hasBeneathLine:function(a,b,c,d){return j.hasBeneathLine(a,b,c,d)},hasCurrentDecorations:function(a){return ia(a)===a.decorationTypes},getLineWidthAndLeftPosition:function(a,b){if(!b.decoration)return _.pick(b,["width","left"]);var c=this.getDecorationData(a,b),d=o(a,b),e=a.getLayoutParent(d),f=a.getLayoutParent(b);a.calculateAbsoluteLocations();var g=0;g=e===f?d.left:e.left+d.left;var h="px"===c.size?+c.length:+c.length*d.width;switch(h=Math.min(h,d.width),c.alignment){case"center":g+=(d.width-h)/2;break;case"right":g=g+d.width-h}return{width:h,left:g}},updateLinesPosition:function(a){var b=a.getDesignStructure();if(0!==b.length){a.calculateAbsoluteLocations();var c=j.getDecorationsFromLSS(a);angular.forEach(c,function(c,d){if(j.isLineDecorationKey(a,d)){var f=a.smartLayoutRulesNodesMap[d],h=f[0].bottom.component,i=a.getLayoutParent(h);angular.forEach(c,function(c,f){if(["above","beneath"].indexOf(f)>-1){var j=+c.split("#")[e.position],k=_.find(a.layoutArray,function(a){return a.decorationKey===d&&a.decorationType===f});if(k){var l,m,n=a.getLayoutParent(k),o=da(b,h),p=i===n;"above"===f?o.rowIndex>0?(l=fa(a,o.designStructure,h,o.rowIndex,f),m=h.absoluteTop+(h.topMargin||0)-g.lineDistance-l*j,k.top=ja(n,m)):k.top=p?0:i.top:"beneath"===f&&(ha(h,o)?k.top=p?i.height:i.top+i.height:(l=fa(a,o.designStructure,h,o.rowIndex,f),m=a.lastBaseLine(h)+g.lineDistance+l*j,k.top=ja(n,m)))}}})}})}}}}]),angular.module("siteGeneratorStaticsCoreAppInternal").factory("LayoutElementFormatting",["themeChooser",function(a){function b(a){this.data=a}function c(a){for(var b=!!this.data&&this.data.split("")||[];b.length<a;)b.push("0");return b}function d(a){return!!(this.data&&1*this.data[a])}function e(a,b){var d=c.call(this,a);d[a]=b,this.data=d.join("")}function f(a,b){e.call(this,a,b?"1":"0")}function g(a){var b="0000000"+(a||"");return b.substring(b.length-7)}function h(b){return b&&"#"!==b[0]&&(b=a.getActiveColorByIndexInPalette(b)),b}var i=0,j=1,k=2,l=3,m=4,n=11;return b.prototype.toggle=function(a,b){switch(a){case"bold":this.setBold(!this.isBold());break;case"italic":this.setItalic(!this.isItalic());break;case"underline":this.setUnderline(!this.isUnderline());break;case"color":this.setColor(b);break;case"bgColor":this.setBGColor(b)}},b.prototype.isCapsLock=function(){return d.call(this,l)},b.prototype.setCapsLock=function(a){f.call(this,l,a)},b.prototype.isBold=function(){return d.call(this,i)},b.prototype.setBold=function(a){f.call(this,i,a)},b.prototype.isItalic=function(){return d.call(this,j)},b.prototype.setItalic=function(a){f.call(this,j,a)},b.prototype.isUnderline=function(){return d.call(this,k)},b.prototype.setUnderline=function(a){f.call(this,k,a)},b.prototype.getColor=function(){var a=this.data&&this.data.substr(m,7);return a&&"#"===a[0]?a:a&&1*a},b.prototype.getColorRGB=function(){return h(this.getColor())},b.prototype.setColor=function(a){var b=this.data&&this.data.substring(m+7);this.data=this.data&&this.data.substr(0,m),e.call(this,m,g(a)),b&&(this.data+=b)},b.prototype.getBGColor=function(){var a=this.data&&this.data.substr(n,7);return a&&"#"===a[0]?a:a&&1*a},b.prototype.getBGColorRGB=function(){return h(this.getBGColor())},b.prototype.setBGColor=function(a){var b=this.data&&this.data.substring(n+7);this.data=this.data&&this.data.substr(0,n),e.call(this,n,g(a)),b&&(this.data+=b)},b.format=function(a,b){b&&b.isCapsLock()&&(a=a.toUpperCase());var c=a||"",d=[],e=[];if(b){b.isCapsLock()&&d.push("text-transform: uppercase;"),b.isBold()&&d.push("font-weight: bold;"),b.isItalic()&&d.push("font-style: italic;"),b.isUnderline()&&d.push("text-decoration: underline;");var f=b.getColor();f&&("#"===f[0]?d.push("color: "+f+";"):e.push("color_"+f));var g=b.getBGColor();g&&("#"===g[0]?d.push("background-color: "+g+";"):e.push("backcolor_"+g))}return _.each(d,function(a){c='<span style="'+a+'">'+c+"</span>"}),_.each(e,function(a){c='<span class="'+a+'">'+c+"</span>"}),c},b.prototype.format=function(a){return b.format(a,this)},b.prototype.getStyleKey=function(){var a=this.isBold(),b=this.isItalic(),c=this.isUnderline(),d=this.isCapsLock();return a||b||c||d?a+"|"+b+"|"+c+"|"+d:""},b.prototype.serialize=function(){return this.data},b}]),angular.module("siteGeneratorStaticsCoreAppInternal").constant("callInLayout",function(a){return function(){return a.apply(this.getMaster(),arguments)}}).factory("LayoutElement",["SmartLayoutElement","solutionStatusCodes","applicationParameters","$p","fieldSignature","LayoutElementFormatting","layoutDecoration","LayoutDecorationUtils","SmartLayoutRuleUtils","$log","callInLayout","BoxDecorationTypes","themeChooser","prettyLayoutService","designPolicyService","visualValidation","validationCache","designPolicyButton","flags","mediaOverride","fontCustomizationService",function(a,b,c,d,e,f,g,h,i,j,k,l,m,n,o,p,q,r,s,t,u){function v(a,d,e,f){this.id=a.id,this.name=a.name,this.argList=a.argList,this.layout=a.layout,this.forContent=a.forContent,this.forContent||(this.forContent=c.defaultForContent),this.listForContent=a.listForContent,this.width=a.width,this.height=a.height,this.family=a.family,this.argsSignature=a.argsSignature,this.aggregationStrategy=a.aggregationStrategy,this.aggregationParams=a.aggregationParams,this.isAllowedFooter=a.isAllowedFooter,this.isAllowedHeader=a.isAllowedHeader,this.padding=a.padding,this.maxHeight=c.maxHeight,this.snapShot=a.snapShot,this.scenarioId=a.scenarioId,this.hasAlign=a.hasAlign,this.tempSnapShot=a.tempSnapShot,this.getSnapShot=a.getSnapShot,this.solutionStatus=a.solutionStatus,this.solutionFailReason=a.solutionFailReason,this.rootNode=a.rootNode,this.smartLayoutRulesNodes=a.smartLayoutRulesNodes||[],this.smartLayoutRulesNodesMap=a.smartLayoutRulesNodesMap,this.alignRules=a.alignRules||[],this.layoutArray=a.layoutArray||[],this.isOriginalSmartHeight=a.isOriginalSmartHeight,this.originalHeight=a.originalHeight,this.stretched=a.stretched,this.source=a.source,this.containingLG=a.containingLG,this.cluster=a.cluster,this.templateId=a.templateId,this.mediaFullWidth=a.mediaFullWidth,this.storageId=a.storageId,this.oldFamily=a.oldFamily,this.oldId=a.oldId,this.storageId||(this.storageId=this.id,this.scenarioId&&(this.id=this.scenarioId+"_"+this.family,this.oldFamily&&(this.oldId=this.scenarioId+"_"+this.oldFamily))),a.spanHints&&(this.spanHints=a.spanHints),a.solution&&(this.LEGindex=a.LEGindex,this.solution=a.solution,this.originalSolution=a.originalSolution,this.originalSpanHints=a.originalSpanHints,this.containerIndex=a.containerIndex),this.structure=a.structure,this.onMediaStructure=a.onMediaStructure,this.boxesStructure=a.boxesStructure||[[],[],[],[]],this.boxesStructure[l.ON_MEDIA]=this.onMediaStructure||[],this.boxesStructure[l.FULL]=this.structure||[],this.boxTypes=[],this.priority=a.priority,this.editMode=f,this.errorList=[],this.extractedFontOverrides=[],this.argsComponents=[],this.alignVariations=[],this.generator=a.generator,this.contactRules=a.contactRules||[],e||(this.solutionStatus=d||b.unknown,this.solutionFailReason=""),this.overrides=_.clone(a.overrides)||{},this.variationsMap={},this.decorationTypes=""}function w(a,b,c){var d=!1;_.each(a,function(a){d||(d=b(a,c),!d&&a.layout&&w(a.layout,b,a))})}function x(a,b){return _.sequencePromises(a,function(a){return b(a).then(function(){return a.layout?x(a.layout,b):void 0})})}function y(a,b,c){return angular.forEach(a,function(a){return a.field&&a.field===c&&a.element&&a.element===b.type?!0:void 0}),!1}function z(a){a.passingHeight=a.height,
a.recurseLayouts(function(a){a.passingHeight=a.height})}function A(a){return{images:a.getValuesByMediaType().image?a.getValuesByMediaType().image.length:0,shapes:a.getValuesByMediaType().shape?a.getValuesByMediaType().shape.length:0,extVideos:a.getValuesByMediaType().extVideo?a.getValuesByMediaType().extVideo.length:0,videos:a.getValuesByMediaType().video?a.getValuesByMediaType().video.length:0}}function B(a,b,c,d,e){var f=b.slice(),g={index:c};d&&(g.vAlign=d),e&&(g.hAlign=e),f.push(g),a.push(f)}function C(a,b,c,d){var e,f,g=a.indexOf(b);b.vPosition?_.each(b.vPosition,function(h,i){if(b.hPosition)_.each(b.hPosition,function(a,b){B(d,c,g,i,b)});else if(h.layout){B(d,c,g,i),e=[angular.copy(d[d.length-1])];var j=!1;_.each(h.layout,function(c,d){c.hPosition&&(j=!0,f=[],_.each(e,function(e){var g=a.indexOf(b.layout[d]);_.each(c.hPosition,function(a,b){B(f,e,g,void 0,b)})}),e=f)}),j&&(d.splice(-1,1),Array.prototype.push.apply(d,e))}else B(d,c,g,i)}):b.hPosition?_.each(b.hPosition,function(a,b){B(d,c,g,void 0,b)}):b.layout&&(e=[[]],_.each(b.layout,function(b){f=[],_.each(e,function(c){C(a,b,c,f)}),e=f}),Array.prototype.push.apply(d,e))}function D(a,b){var c;return c=void 0!==b.argIndex?a.argList[b.argIndex]&&a.argList[b.argIndex].subType:b.subType||b.type}v.prototype.getStorageId=function(){return this.storageId},v.globalOverrides={},v.getLayoutData=function(a){var b=new v({id:a.id||a.objectId,name:a.name,argList:a.arguments,layout:a.layout,forContent:a.forContent,listForContent:a.listForContent,width:a.width,height:a.height,family:a.family,oldFamily:a.oldFamily,argsSignature:a.argsSignature,aggregationStrategy:a.aggregationStrategy,aggregationParams:a.aggregationParams,isAllowedFooter:a.isAllowedFooter||!1,isAllowedHeader:a.isAllowedHeader||!1,padding:a.padding,snapShot:a.snapShot,scenarioId:a.scenarioId,hasAlign:a.hasAlign,cluster:a.cluster,mediaFullWidth:a.mediaFullWidth,structure:a.structure,onMediaStructure:a.onMediaStructure,boxesStructure:a.boxesStructure,priority:a.priority,generator:a.generator,contactRules:a.contactRules,tempSnapShot:{data:""},getSnapShot:function(){return this.tempSnapShot.data&&this.tempSnapShot.data.length>0?this.tempSnapShot.data:this.snapShot?this.snapShot.url:void 0}});return b.initSmartLayoutRules(),b.deserializeTree(a.ruleTree),b},v.prototype.setLayoutData=function(a){a.name=this.name,a.arguments=this.argList,a.layout=this.layout,a.forContent=this.forContent,a.listForContent=this.listForContent,a.width=this.width,a.height=this.height,a.family=this.family,a.oldFamily=this.oldFamily,a.ruleTree=this.serializeTree(),a.aggregationStrategy=this.aggregationStrategy,a.aggregationParams=this.aggregationParams,a.argsSignature=this.argsSignature,a.padding=this.padding,a.isAllowedFooter=this.isAllowedFooter,a.isAllowedHeader=this.isAllowedHeader,a.scenarioId=this.scenarioId,a.hasAlign=this.hasAlign,a.cluster=this.cluster,a.mediaFullWidth=this.mediaFullWidth,a.structure=this.structure,a.onMediaStructure=this.onMediaStructure,a.boxesStructure=this.boxesStructure,a.priority=this.priority,a.generator=this.generator,a.contactRules=this.contactRules},v.prototype.getSerializedData=function(){var a={id:this.id,name:this.name,arguments:this.argList,layout:this.layout,forContent:this.forContent,listForContent:this.listForContent,width:this.width,height:this.height,family:this.family,oldFamily:this.oldFamily,ruleTree:this.serializeTree(),aggregationStrategy:this.aggregationStrategy,aggregationParams:this.aggregationParams,argsSignature:this.argsSignature,padding:this.padding,isAllowedFooter:this.isAllowedFooter,isAllowedHeader:this.isAllowedHeader,scenarioId:this.scenarioId,hasAlign:this.hasAlign,cluster:this.cluster,mediaFullWidth:this.mediaFullWidth,structure:this.structure,onMediaStructure:this.onMediaStructure,boxesStructure:this.boxesStructure,priority:this.priority,version:3};return _.omit(a,function(a){return void 0===a})},v.prototype.clone=function(){return new v(this,this.solutionStatus,!0)},v.prototype.smartClone=function(){var a=new v(this,this.solutionStatus,!0,this.editMode);return a.layout=_.clone(this.layout,!0),this.originalArgList&&(a.argList=_.clone(this.originalArgList,!0),a.handleOverrides()),a.smartLayoutRulesNodes.length=0,a.initSmartLayoutRules(),a.copyTree(this.rootNode),a},v.prototype.shallowClone=function(){var a=Object.create(this);return a.argsComponents=[],a.setLGContainer(this.containingLG),a.setSegContainer(this.containingSegment),a.active=null,a.elementReference=null,a.reference=this,a},v.prototype.getLayoutBySubType=function(a){return this.smartLayoutRulesNodesMap?this.smartLayoutRulesNodesMap[a]&&this.smartLayoutRulesNodesMap[a][0].bottom.component:_.find(this.layoutArray,function(b){return b.subType===a})},v.prototype.getAllDecorativeContainersLayout=function(){return _.filter(this.getAllContainersLayout(),{containerRole:"decorative"})},v.prototype.getAllStructureContainersLayout=function(){return _.filter(this.getAllContainersLayout(),{containerRole:"structure"})},v.prototype.isStructureContainerLayout=function(a){return"structure"===a.containerRole},v.prototype.isDecorativeContainerLayout=function(a){return"decorative"===a.containerRole},v.prototype.getAllContainersLayout=function(){return this.smartLayoutRulesNodesMap&&this.smartLayoutRulesNodesMap.container&&_(this.smartLayoutRulesNodesMap.container).map("bottom.component").value()||[]},function(){function a(a,b,c){for(var d=0;d<b.length;d++)c[d].push(b[d][a])}function b(a){for(var b=[],c=0;a>c;c++)b.push([]);return b}function d(a,b,c,d){for(var e=0;e<b.length;e++)if(b[e][a]===d[e][c])return!0;return!1}function e(c){if(_.isEmpty(c))return[[-1]];for(var e=c[0].length,f=[],g=0;e>g;g++){var h=f[f.length-1];h&&d(g,c,h[0].length-1,h)||(h=b(c.length),f.push(h)),a(g,c,h)}return f}function f(a){return a.map(function(a){return a[0].length})}function g(a,b){var c=a.split("#").filter(function(a){return"ag"!==a}).map(function(a){var b=a.split(",");return"o"===a[0]?[b[0]]:b}).map(function(a){return a.map(function(a){for(var b=-1,c=0;c<a.length;c++){var d=a.charCodeAt(c);if(d>=48&&57>=d){b=c;break}}if(0>b)throw new Error("cannot infer structure widths - family is malformed");var e=parseInt(a.substr(b),10);return 940===e?12:e})}).filter(function(a){return _.sum(a)===b});if(!c[0])throw new Error("cannot find structure widths - all rows with width !== "+b);return c[0]}function h(a,b){for(var c=-1,d=0,e=[],f=0;f<b.length;f++)0===d&&(c++,e[c]=0,d=a[c]),d--,e[c]+=b[f];return e}function i(a){return _.findIndex(a,{type:"media"})}function j(a,b){if(0>b)return-1;for(var c=0;c<a.length;c++)if(a[c].indexOf(b)>=0)return c;return-1}function k(a){return a.map(function(a){return _.uniq(_.flattenDeep(a))})}function l(a,b){return 1===a[b].length}function m(a,b){return b.map(function(b){return b.map(function(b){return a[b]&&"media"!==a[b].type?a[b].subType:void 0}).filter(_.identity)})}function n(a,b){var c;if(a.some(function(a){w([a],function(d){return d===b?(c=a,!0):void 0})}),void 0===c)throw new Error("could not find root container");return c}function o(a){return Math.max.apply(Math,[0].concat(_.map(a,"height")))}function p(a,b,c){var d=b.map(function(b,d){var e=b.map(function(b){var c;if(w(a,function(a){return a.subType===b?(c=a,!0):void 0}),void 0===c)throw new Error("could not find layout for subType="+b+" in column #"+d);return n(a,c)});if(d===c){var f;w(a,function(a){return"media"===a.type?(f=a,!0):void 0}),f&&e.push(n(a,f)),e.push.apply(e,a.filter(function(a){return void 0!==a.onMediaIndex}))}else if(0===e.length){var g=new Error("could not find any layouts for column #"+d);throw g}return e=_.uniq(e),a=_.difference(a,e),e});if(a.length>0){var e=new Error("there are layouts that could not be assigned to a column");throw e.data=a,e}return d}v.prototype.calcColumns=function(){if(this.structure&&49!==this.cluster&&50!==this.cluster&&51!==this.cluster){var a=e(this.structure),b=k(a),d=f(a),n=g(this.family,c.getGridUnits(this.containingSegment.width)),q=h(d,n),r=-1,s=this.layout,t=i(this.argList);t>=0?r=j(b,t):1===this.cluster&&(r=0,s=s.slice(1));var u=m(this.argList,b),v=p(s,u,r),w=o(s),x=0,y=this.getMediaLayout();this.columns=_.zip(q,v).map(function(a,c){var d=a[0];return x+=d,{isVirtual:!0,offset:x-d,hasMedia:r===c,hasText:u[c].length>0||y&&this.textDirectlyOnMedia(this.getMediaLayout())||!1,doesMediaFill:r===c&&l(b,r),width:d,height:w,layout:a[1]}},this)}}}(),v.prototype.getColumns=function(){return s.newColumns||this.calcColumns(),this.columns},v.prototype.setArgComponent=function(a,b){isNaN(a)||(this.argsComponents[a]=b)},v.prototype.failWithReason=function(a){this.solutionStatus=b.fail,this.solutionFailReason=a},v.prototype.setLGContainer=function(a){this.containingLG=a},v.prototype.getSolutionStatus=function(){return this.solutionStatus},v.prototype.getScreenShot=function(){return this.screenShot||"field_screenShot_of_LE_is_undefined"},v.prototype.recurseLayouts=function(a){w(this.layout,a.bind(this))},v.prototype.getMediaIndex=function(a){if(void 0===a.mediaIndex){var b=0;this.recurseLayouts(function(a){this.isMediaLayout(a)?a.mediaIndex=b++:a.mediaIndex=-1})}return a.mediaIndex},v.prototype.getMediaLayout=function(){var a=null;return this.recurseLayouts(function(b){return this.isMediaLayout(b)?(a=b,!0):void 0}),a},v.prototype.isMediaLayout=function(a){return"media"===a.type||"gallery"===a.type},v.prototype.isOnMediaContainer=function(a){return this.onMediaStructure&&"container"===a.type&&(a.onMediaIndex>-1||-1===a.onMediaIndex&&1===this.cluster)},v.prototype.getBgLayout=function(a){return a>-1?this.getLayoutWithArgIndex(a):-1===a&&1===this.cluster?this.layout[0]:void 0},v.prototype.getLayoutWithArgIndex=function(a){var b=null,c=this.getRuleNodeByArgIndex(a);return c?c.top.component:(w(this.layout,function(c){return c.argIndex===a?(b=c,!0):void 0}),b)},v.prototype.getRuleNodeByArgIndex=function(a){if(this.smartLayoutRulesNodesMap){var b=this.argList[a],c=this.smartLayoutRulesNodesMap[b.subType];return _.find(c,function(b){return b.top.component.argIndex===a})}},v.prototype.isTextLayout=_.memoize(function(a){return["text","button","textButton"].indexOf(a.type)>-1},_.property("type")),v.prototype.isTheOnlyLayoutInRow=function(a){var b=!0;return this.recurseLayouts(function(c){a===c||c.top>a.top+a.height||a.top>c.top+c.height||(b=!1)}),b},v.prototype.centerSocialImageList=function(a,b){if(this.isTheOnlyLayoutInRow(a)){var c=a.width,d=this.getArgValue(b).length;a.width=a.componentProperties.iconSize*d+a.componentProperties.spacing*(d-1);var e=this.variationsMap&&this.variationsMap.social&&this.variationsMap.social.hPosition;if(0!==a.left||e){var f=0;switch(e){case"right":f=this.width-a.width;break;case"center":f=this.width/2-a.width/2}a.left=f}c!==a.width&&this.containingLG.handleSmartLayoutMutation(this)}return a.left>=0&&a.width<=this.width},v.prototype.visualMeasure=function(a,b){this.updateHeightFromNode();var c=this,e=this.getLayoutWithArgIndex(a);return e?e.width<0||e.height<0?(this.errorList.push("negative height / width"),d.when()):c.measureComponent(e,b,c).then(function(a){return e.numLines=a.lines,a}):d.when()};var E=200;return v.prototype.visualValidate=function(a,b){this.clientRectList=this.clientRectList||[],this.clientRectList[a]=b;var d=this.getLayoutWithArgIndex(a);if("social"===d.type)return this.centerSocialImageList(d,a);d.breakingText&&(d.breakingText=!1);var e,f=!1,g=!1,h=!1,i=d.height,j=this.isTextLayout(d);if("button"===d.type){var k=this.getLayoutOriginalSizes(d),l=k.width-2*d.margin;l<b.width?(d.validationWidth=l,d.clientRectWidth=b.width,d.hasToBeFull=!0):d.validationWidth=b.width,g=!0,b.height=Math.max(b.height,2*d.heightMargin+d.fontSize-d.topMargin),b.height=Math.ceil(b.height/c.quarterBaseLine)*c.quarterBaseLine}else b.width>d.width&&(j?d.breakingText=!0:f=!0);if(f||"text"!==d.type||(d.textWidth=b.width,d.textHeight=b.height-(b.lineHeight-b.lineMargin),d.clientRect=b),null===this.needsReset&&d.fixedBottom&&d.height!==b.height)return this.needsReset=!0,!1;if(!f){var m=this.getNeededLineOffset(d);d.height-=m,d.top+=m,d.missingHeight=(d.missingHeight||0)+m;var n=b.height;if(n>d.height&&!(this.isMediaType(d)&&d.height>=d.mediaMinHeight)&&(e=this.mutate(d.argIndex,n)),"media"===d.type){var o=this.getArgValue(d.argIndex),p=_.uniq(_.pluck(o,"mediaType"));1===p.length&&"video"===p[0]&&(d.width<E&&(f=!0),d.height<E&&(e=this.mutateByStretching(this.height+E-d.height)),d.squareImage&&d.height<d.width&&(e=this.mutateByStretching(this.height+d.width-d.height)))}e&&(d=this.getLayoutWithArgIndex(d.argIndex),"success"===e.result?(g=g||!0,e.containerMutation&&(h=this.getSegmentHeight()<this.height)):"failure"===e.result&&(f=!0)),!g&&"media"!==d.type&&b.height>i&&(f=!0)}return null===this.needsReset&&j&&d.height>b.height&&this.getCleanLELayoutByArgIndex(a).height<d.height?(this.needsReset=!0,!1):(this.layout.hadHeightMutation=!1,g?(h&&(this.layout.hadHeightMutation=!0),this.containingLG.handleSmartLayoutMutation(this,h)):f&&this.failWithReason("Visual validation failed - argument #"+a+" argType: "+this.argList[a].subType),this.isNotFailing())},v.prototype.hasComponentsOnMedia=function(a){var b=this;return a&&void 0!==a.hasOnMedia?a.hasOnMedia:(this.recurseLayouts(function(c,d){if(c===a){var e=d||b.layout;return a.hasOnMedia=_(e).filter({type:"container"}).any(function(b){return b.top>=a.top&&b.top<=a.top+a.height&&b.left>a.left&&a.left<=a.left+a.width}),!0}}),a.hasOnMedia)},v.prototype.setFontOverriderForAllArgs=function(){var a=u.getSectionOverride(this.containingSegment.node);_.each(this.argList,function(b,c){"text"===b.type&&this.setFontOverriderForArg(b,c,a)},this)},v.prototype.setFontOverriderForArg=function(a,b,c){this.extractedFontOverrides[b]=this.getLayoutSelectionStore().fontOverridesManager.getOverride(this.containingSegment.node,a.subType,c,this)},v.prototype.findArgInLayout=function(a,b){var c=this;if(a.layout&&a.layout.length){var d,e=b?_.findLast:_.find;return e(a.layout,function(a){return d=c.findArgInLayout(a,b),-1!==d}),d}return void 0===a.argIndex?-1:a.argIndex},v.prototype.checkExtractedArgs=function(){return this.errorList.length?(this.failWithReason(this.errorList.join(", ")),!1):!0},v.prototype.getCleanLE=function(){return this.cleanLayouts[this.id]},v.prototype.getCleanLELayoutByArgIndex=function(a){return this.cleanLayouts[this.id].getLayoutWithArgIndex(a)},v.prototype.setSegContainer=function(a){this.containingSegment=a},v.prototype.setDecorationChanged=k(function(a){this.decorationChanged=a}),v.prototype.updateVariationsDecorationsIfNeeded=k(function(){var a=this;return d.resolve().then(function(){var b=a.getLayoutSelectionStore().getVariations(a.containingSegment,a.cluster);return _.isEqual(b,a.variationsMap)&&g.hasCurrentDecorations(a)?void 0:(a.variationsMap=ob.deepClone(b),g.applyDecoration(a))})}),v.prototype.needsCalcFromValueChange=function(a,b,c){return!(a&&b&&b.values!==c.values&&!y(this.argList,b,a)&&!((c.aggregator||c.portfolio)&&c.ceArray.indexOf(b)>=0))},v.prototype.calculateLayoutElementStatus=k(function(a,b,c,e){var f=this;return this.needsFirstTimeInit&&(this.needsFirstTimeInit=!1,this.reset()),this.needsCalcFromValueChange(c,b,a)?this.updateVariationsDecorationsIfNeeded().then(function(){return a&&a.portfolio?_.sequencePromises(a.ceArray,function(a){return f.checkSolutionStatus(a,e)}):f.checkSolutionStatus(a,e)}).then(function(){return f.checkUglyRules()}).then(function(){var a=f.prevFontOverrides&&!_.isEqual(f.extractedFontOverrides,f.prevFontOverrides);return f.passingHeight||z(f),f.finishCalculateSolutionStatus(f.needsReset||a)}).then(function(){if(s.newColumns&&f.isPassing()){var a=f.containingLG.getColumnsData();a&&a.enable&&(a.colSplit||a.rowSplit)&&f.calcColumns(a.colSplit,a.rowSplit)}}):d.resolve()}),v.prototype.getLayoutOriginalSizes=function(a){if(a.argIndex>-1){var b=this.getCleanLE().getLayoutWithArgIndex(a.argIndex);return{width:a.originalWidth||b.width,left:a.originalLeft||b.left}}return{width:a.width,left:a.left}},v.prototype.createElementLayoutHPosition=function(a,b){var d=this.getLayoutOriginalSizes(a);return b>=d.width?void delete a.hPosition:(1>=b&&(b=d.width*b,b%c.horizontalGridStep&&(b=(Math.floor(b/c.horizontalGridStep)+1)*c.horizontalGridStep)),void(a.hPosition={left:{left:d.left,width:b},center:{left:d.left+(d.width-b)/2,width:b},right:{left:d.left+d.width-b,width:b}}))},v.prototype.lockImage=function(a,b){a.mediaMinHeight=b,a.squareImage=!0},v.prototype.getButtonLeftAndWidth=function(a){var b,c=this.getLayoutOriginalSizes(a),d=c.width,e=c.left;if(this.getAlignment(a,"fullWidth")===!0)b=d;else{b=a.validationWidth+2*a.margin;var f=this.getAlignment(a,"hPosition");switch(f){case"center":e+=(d-b)/2;break;case"right":e=e+d-b}}return{width:b,left:e}},v.prototype.squizLayouts=function(){var a=this;angular.forEach(this.layoutArray,function(b){if("button"===b.type){var c=a.getButtonLeftAndWidth(b);b.width=c.width,a.fakeOriginalToSpecificLayoutForSpecificAttribute(b,"width"),b.left=c.left}}),g.updateLinesPosition(this)},v.prototype.finishCalculateSolutionStatus=function(a){var c=this;return d.when().then(function(){if(c.prevFontOverrides=ob.deepClone(c.extractedFontOverrides),c.errorList.length>0&&c.failWithReason(c.errorList.join(",")),c.isNotFailing()){if(c.solutionStatus=b.pass,c.solutionFailReason=null,a)return c.needsReset=!1,c===c.containingSegment.getLENoError()&&(c.containingSegment.mutation=null),c.shrink().then(function(){return c.finishCalculateSolutionStatus(c.needsReset)});if(c.wantedHeight=c.getWantedHeight(),c.containingLG.forcePretty&&c.wantedHeight<c.height)return c.finishCalculateSolutionStatus(!0);if(c.wantedHeight>c.height){var d=c.mutateByStretching(c.wantedHeight);if("success"!==d.result)return void c.failWithReason("Cannot strecth")}c.squizLayouts()}})},v.prototype.getWantedHeight=function(){if(this.containingLG.forcePretty){var a;switch(this.cluster){case 49:case 50:case 51:a=this.passingHeight;break;default:var b=n.getLayoutPrettyHeight(this);a=Math.max(this.passingHeight,b+n.getLayoutAdditionalHeight(this,b))}return a=c.getValidHeight(a),Math.min(a,c.maxHeight)}return this.getSegmentHeight()},v.prototype.shrink=function(){var a=this;return g.applyDecoration(a).then(function(){return a.checkArgsAndVisualValidate([])}).then(function(){z(a)})},v.prototype.isShapeLayout=function(a){return a.height<=c.shapeMediaSize&&a.width<=c.shapeMediaSize},v.prototype.numOfImagesForLe=function(){var a=this;return _.reduce(this.argList,function(b,c,d){if("image"===c.subType){var e=a.getLayoutWithArgIndex(d);a.isShapeLayout(e)?b.smallMedias+=1:b.bigMedias+=1,940===e.width&&(b.coast2coastMedias+=1)}return b},{smallMedias:0,bigMedias:0,coast2coastMedias:0})},v.prototype.userProvidedEnoughImages=function(a){var b=A(a),c=this.numOfImagesForLe();return b.images>=c.bigMedias&&b.shapes+b.images-c.bigMedias>=c.smallMedias||c.bigMedias>0&&b.extVideos>=c.bigMedias||c.coast2coastMedias>0&&b.videos>=c.coast2coastMedias},v.prototype.uglyFail=function(a,b){var c=this;if(a&&void 0!==a.onMediaIndex){var e=_.find(this.layoutArray,function(a){return c.isOnMediaContainer(a)}),f=this.getBgLayout(a.onMediaIndex),g=this.getAlignment(e,"hPosition"),i=h.getMediaContainerWidth(f.width,this);if(g<i.length-1)return this.needsReset=!0,this.updateSelectedVariationsMap(e,g+1,"hPosition"),this.containingLG.getLayoutSelectionStore().setVariations(this.containingSegment,this.cluster,this.variationsMap),d.when()}return this.errorList.push(b),d.when()},v.prototype.isFullWidth=function(){return this.isMobile()?300===this.width:940===this.width},v.prototype.ignoreUglyRules=function(){return(2===this.cluster||49===this.cluster)&&this.isFullWidth()},v.prototype.checkUglyRules=function(){if(this.ignoreUglyRules())return d.when(!0);if(s.presetImprovementTextOnMediaRatio&&940===this.width&&this.onMediaStructure){var a=this,b=_.find(this.layoutArray,function(b){return a.isOnMediaContainer(b)}),c=this.getBgLayout(b.onMediaIndex),e=this.getAlignment(b,"hPosition"),f=h.getMediaContainerWidth(c.width,this);if(e<f.length-1){var g=0,i=0;_.each(b.layout,function(a){"text"===a.type&&(g=Math.max(g,a.width),i+=a.height)}),i/g>.75&&this.uglyFail(b.layout[0],"texts on media have an aspect ratio above 0.75")}}for(var j=0;j<this.argList.length;j++){var k,l=this.argList[j];if("text"===l.type&&"form"!==l.subType){if(k=this.getLayoutWithArgIndex(j),k.breakingText)return this.uglyFail(k,l.subType+" needs ellipsis");var m=k.height/k.width,n=1.4;if("longText"===l.subType&&(n=1.6),m>n)return this.uglyFail(k,l.subType+" has an aspect ratio above "+n)}else if((s.moreStripGalleries||s.changeFullWidthCollageToSlideShow)&&"media"===l.type&&this.onMediaStructure){k=this.getLayoutWithArgIndex(j);var o=t.validate(this,k,this.containingSegment,!1);if("has_layouts_above"===_.get(o,["response","type"]))return this.uglyFail(k,l.subType+"with content on "+o.currentGallery.name)}}return this.checkUglyFitMode()},v.prototype.checkUglyFitMode=function(){var a=this.getMediaLayout();if(!a)return d.when(!0);var b=t.getGallery(this,a,this.containingSegment);if(!b)return d.when(!0);var c=b&&"full"===b.properties.displayMode;if(!c)return d.when(!0);var e=19===this.cluster||21===this.cluster,f=this.layout.find(function(a){return"container"===a.type&&"decorative"===a.containerRole});return e&&f&&this.layout.length>1?this.uglyFail(f,"decorative box has sibilings in fit mode"):1===this.getMediaType()?this.uglyFail(null,"prevent coast2coast in fit mode"):this.containingSegment.hasColumnWithMediaBackground(!0)?this.uglyFail(null,"has column bg in fit mode"):this.containingSegment.node.isListItem&&this.containingSegment.node.identifyingNode.zigZagState?this.uglyFail(null,"no zigzag layouts in fit mode"):d.when(!0)},v.prototype.checkSolutionStatus=function(a,c){if(this.extractedFontOverrides.length=0,this.setFontOverriderForAllArgs(),!c&&this.getSolutionStatus()!==b.unknown&&_.isEqual(this.extractedFontOverrides,this.prevFontOverrides)&&!this.decorationChanged)return d.when();if(this.resetSolutionStatus(),!this.userProvidedEnoughImages(a))return this.errorList.push("Not enough images"),d.when(!0);this.decorationChanged=null;var e=this.checkExtractedArgs();return e?this.visualValidateAll():d.when()},v.prototype.sitePartFit=function(a){return!a||"footer"===a&&this.isAllowedFooter||"body"===a||"header"===a&&this.isAllowedHeader},v.prototype.possibleAligns=function(){if(!this.possibleAlignsCache){this.possibleAlignsCache=[[]];var a=this;angular.forEach(this.layout,function(b){var c=[];_.each(a.possibleAlignsCache,function(d){C(a.layoutArray,b,d,c)}),c.length>0&&(a.possibleAlignsCache=c)})}return this.possibleAlignsCache},v.prototype.updateOriginalComponent=function(a){angular.forEach(a,function(a){angular.forEach(a.component,function(b,c){a.originalComponent[c]=b})})},v.prototype.changeAlignFromLayout=function(a,b,c,d){var e=this.layoutArray.indexOf(a);e>-1&&(this.changeAlign(e,b,c),d||this.updateSelectedVariationsMap(a,b,c))},v.prototype.updateFromVariationsMap=function(){var a=this;a.variationsMap&&(a.recurseLayouts(function(b){var c=a.getVariatiableKey(b);a.variationsMap[c]&&(a.variationsMap[c].size&&a.createElementLayoutHPosition(b,a.variationsMap[c].size),a.variationsMap[c].squareImage&&a.lockImage(b,a.variationsMap[c].squareImage),a.variationsMap[c].vPosition&&a.changeAlignFromLayout(b,a.variationsMap[c].vPosition,"vPosition",!0),a.variationsMap[c].hPosition&&a.changeAlignFromLayout(b,a.variationsMap[c].hPosition,"hPosition",!0))}),this.initAlignRules())},v.prototype.getVariatiableKey=function(a){return"media"===a.type?"media":"container"===a.type?"container"+(void 0!==a.onMediaIndex?"OnMedia":""):this.getLayoutSubType(a)},v.prototype.getLayoutSubType=function(a){if(void 0===a.argIndex)return a.type;var b=this.argList[a.argIndex];return"media"!==b.type||b.subType?b.subType||b.type:"image"},v.prototype.updateSelectedVariationsMap=function(a,b,c){var d=this.getVariatiableKey(a);this.variationsMap[d]=this.variationsMap[d]||{},void 0!==b?this.variationsMap[d][c]=b:delete this.variationsMap[d][c]},v.prototype.getAlignment=function(a,b,c){var d={vPosition:"top",hPosition:"left",fullWidth:!1,align:"left"},e={vPosition:"activeV",hPosition:"activeH",fullWidth:"fullWidth",align:"align"},f=this.getVariatiableKey(a);return this.variationsMap&&this.variationsMap[f]&&void 0!==this.variationsMap[f][b]?this.variationsMap[f][b]:c?void 0:void 0!==a[e[b]]?a[e[b]]:a.componentProperties&&a.componentProperties[e[b]]||d[b]},v.prototype.getLineWidthAndLeftPosition=function(a){return a.widthAndLeftPosition||g.getLineWidthAndLeftPosition(this,a)},v.prototype.changeAlign=function(a,b,c){if(c&&b){var d=this,e=d.layoutArray[a];e[c]&&(angular.forEach(e[c][b],function(f,g){"layout"===g?_.each(f,function(b,c){_.each(b,function(a,b){e.layout[c][b]=a}),d.updateOriginalComponent(d.smartLayoutRulesNodes[a+c+1])}):e[g]=e[c][b][g]}),d.updateOriginalComponent(this.smartLayoutRulesNodes[a])),"vPosition"===c&&e.vPositionRules&&_.each(e.vPositionRules[b],function(a){var b=d.nodesForComponent(a.childIndex,a.childFacet);void 0!==a.parentIndex?b.parentCandidate=d.nodesForComponent(a.parentIndex,a.parentFacet):b.parentCandidate=null,d.trySetRule(b)})}},v.prototype.setVAlignByIndex=function(a){var b=this;_.each(this.possibleAligns()[a],function(a){b.changeAlign(a.index,a.vAlign,"vPosition"),b.changeAlign(a.index,a.hAlign,"hPosition")}),this.initAlignRules()},v.prototype.getAlignVariations=k(function(){if(!this.alignVariations.length){var a=this.possibleAligns(),b=this;this.alignVariations=_.collect(a,function(a){var c=b.smartClone();return _.each(a,function(a){c.changeAlign(a.index,a.vAlign,"vPosition"),c.changeAlign(a.index,a.hAlign,"hPosition")}),c})}return this.alignVariations}),v.prototype.getArgsSignature=function(){return this.argsSignature||this.calcArgsSignature(),this.argsSignature},v.prototype.calcArgsSignature=function(){var a=this,b=_.collect(this.argList,function(b){return a.getArgSignature(b)});this.argsSignature=this.sortAndCleanArgsSignature(b)},v.prototype.sortAndCleanArgsSignature=function(a){return _.uniq(_.remove(a,void 0)).sort().join("#")},v.prototype.getArgSignature=function(a){return"label"===a.subType||a.hidden?void 0:a.isReference?a.element+"."+a.field:e[a.subType]||a.subType||e[a.type]||a.type},v.prototype.getStripImageArgIndex=function(){return _.findKey(this.overrides.media,function(a){return"stripContainer"===a.type})},v.prototype.handleOverrides=function(){this.originalArgList=this.argList,Object.defineProperty(this,"argList",{get:function(){var a=[],b=this;return angular.forEach(this.originalArgList,function(c,d){if(b.overrides&&b.overrides.media&&b.overrides.media[d]&&"media"===c.type){var e=_.clone(c,!0);e.subType="gallery"===b.overrides.media[d].type?"gallery":"image",a.push(e)}else a.push(c)}),a},set:function(a){this.originalArgList=a}})},v.prototype.toggleFormatting=function(a,b,c){var d=D(this,a);if(d){var e=this.getFormattingBySubType(d,a);e.toggle(b,c),this.containingLG.setAsDirty(),this.containingLG.handleSmartLayoutMutation(this),this.decorationChanged=!0,j.debug("Change text formatting: "+e.serialize())}},v.prototype.getFormatting=function(a,b){if("text"===a.type){var c=D(this,a);return this.getFormattingBySubType(c,a,b)}},v.prototype.getFormattingBySubType=function(a,b,c){return this.getLayoutSelectionStore().getTextFormattingBySubType(this.containingSegment,a,b,c)},v.prototype.resetFormatting=function(a){var b=D(this,a);this.getLayoutSelectionStore().resetTextFormatting(this.containingSegment,b),this.containingLG.setAsDirty()},v.prototype.createLayoutArray=function(){var a=this;a.layoutArray=[],a.recurseLayouts(function(b){return a.layoutArray.push(b),!1})},v.prototype.badLEs={},v.prototype.setAllLayoutsFontAndLineMargin=function(){var a=this;return x(this.layout,function(b){return a.setLayoutFontAndLineMargin(b,a)})},v.prototype.setLayoutFontAndLineMargin=function(a){var b=this;if(a.designMargin={},void 0!==a.argIndex&&(a.subType=b.argList[a.argIndex].subType),b.needsVisualValidation(a)){var c,e=b.getLayoutSelectionStore(),f=e.getFontOverridesManager(),g=b.argList[a.argIndex];if(g&&("text"===g.type||"button"===g.type)){void 0===a.initialFont&&(a.initialFont=a.font);var h=b.containingSegment.node,i=u.getSectionOverride(h);if(c=b.extractedFontOverrides&&b.extractedFontOverrides[a.argIndex],c=c||f.getOverride(h,g.subType,i,b),c?a.font=c.replace("font_",""):a.font=a.initialFont,"button"===g.type){var j=e.getOverrideMap(),k=b.containingSegment&&b.containingSegment.getTypeForLSSWithoutPartition(),l=k&&j.style&&j.style[k]&&j.style[k].button;l&&(a.style=l)}}return p.getOrBuildValidator(a,b).then(function(b){if(a.baseLineMargin=b.lineMargin,a.lineHeight=b.lineHeight,a.fontSize=b.fontSize,a.fontFamily=b.fontFamily,a.topMargin=b.topMargin,"button"===a.type){a.isTextButton=m.isButtonStyleTransparent(a.style),a.isTextButton||(a.baseLineMargin=0);var c=r(a);a.margin=c.side,a.heightMargin=c.top}})}return d.when({status:1})},v.prototype.measureComponent=function(a,b){var c=this,e=c.getLayoutValue(a,b);if(!p.shouldUseValidator(a,c))return d.when({width:a.width,height:a.height,lineHeight:0,lineMargin:0});var f=q.get(e,a);return f||(f=p.validate(a,b,c),q.set(e,a,f)),f},v.prototype.isContact=function(){return this.generator},v.prototype.applyDesignPolicy=function(a){var b=o.designPolicy;if(b&&this.structure&&!this.isContact()){var c=this;this.calculateAbsoluteLocations();var d=this.getDesignStructure();_.each(d,function(d){if(d.length){var e=b.exec(d,a,c);_.each(e,function(a,b){_.each(a,function(a,c){if(a){var e;if(b<d.length){e=d[b][c];var f=b>0?d[b-1][c].argIndex:-1;f!==e.argIndex&&(e.designMargin[f]=Math.max(a,e.designMargin[f]||0))}else e=d[b-1][c],e&&(e.padding=Math.max(a,e.padding||0),e.missingBottom=e.padding)}})})}})}},v.prototype.isOptionForMirror=function(){return this.scenarioId},v.prototype.isMirror=function(a){var b=this;if(this.id!==a.id&&this.isOptionForMirror()&&a.isOptionForMirror()){var c=_.all(this.argList,function(c,d){var e=b.getLayoutWithArgIndex(d),f=a.getLayoutWithArgIndex(d);return e.width===f.width});if(c)return _.all(this.structure,function(b,c){var d=a.structure[c];if(!d||b.length!==d.length)return!1;var e=b.length;return!(b[0]!==d[e-1]||d[0]!==b[e-1])})}return!1},v.prototype.textDirectlyOnMedia=function(a){return this.onMediaStructure&&_.some(this.layoutArray,function(b){return!b.boxParentOverrideKey&&"text"===b.type&&b.onMediaIndex===a.argIndex})},v.prototype.getExtractedArgs=function(){var a=this;return _.map(this.argList,function(b,c){return a.getArgValue(c)})},v.prototype.getSortedArgOrder=function(a){if(this.structure){if(!a&&!this.structure.length)return this.getSortedArgOrder(this.onMediaStructure);var b=[],c=this,d=a||this.structure;return _.each(d,function(d){_.each(d,function(d){b.push(d),!a&&["media","image"].indexOf(c.argList[d].type)>-1&&c.onMediaStructure&&b.push.apply(b,c.getSortedArgOrder(c.onMediaStructure))})}),_.uniq(b)}return _.map(this.argList,function(a,b){return b})},v.prototype.visualValidateAll=function(){var a=this,b=this.getSortedArgOrder();return this.setAllLayoutsFontAndLineMargin().then(function(){var c=[a],d=a.containingSegment.getSegBrothers();return d&&d.length>1&&(c=_(d).map(function(b){return _.find(b.optionalLayoutElements,function(b){return b.layout===a.layout})}).filter().value()),_.sequencePromises(b,function(b){return _.sequencePromises(c,function(c){var d=c.getExtractedArgs();return a.visualMeasure(b,d[b])}).then(function(a){var b=_.keys(a[0]),c={};return _.each(b,function(b){c[b]=_.max(_.pluck(a,b))}),c})})}).then(function(c){return a.applyDesignPolicy(a.getLayoutSelectionStore().designPolicy.factor),_.allPromises(b,function(b,d){return a.visualValidate(b,c[d])})})},v.prototype.needsVisualValidation=function(a){return a.argIndex>=0},v.prototype.checkArgsAndVisualValidate=function(){var a=this,b=this.checkExtractedArgs();return b?this.visualValidateAll().then(function(){return a.checkUglyRules()}):d.when(!1)},v.prototype.isSelectedLE=function(){return this.containingSegment&&this.containingSegment.isSelectedLE(this);
},v.prototype.getLayoutParent=function(a){var b,c=this;return this.recurseLayouts(function(d,e){return a===d?(b=e?e:c,!0):void 0}),b},v.prototype.getLayoutValue=function(a,b){return"button"===a.type?b&&b.callToAction:b},v.prototype.getArgValue=function(a){return this.containingSegment.contentElement.getArgumentValue(this,a)},v.prototype.isValidForHeight=function(){return this.isPassing()&&(!this.containingSegment||this.getSegmentHeight()===this.height||this.containingLG&&(this.containingLG.isHeader()||this.containingLG.forcePretty))},v.prototype.isPassing=function(){return this.getSolutionStatus()===b.pass},v.prototype.isNotFailing=function(){return this.getSolutionStatus()!==b.fail},v.prototype.isCloned=function(){return!!this.reference},v.prototype.getMaster=function(){return this.reference||this},v.prototype.getSegmentHeight=function(){return this.containingSegment.height},v.prototype.resetSolutionStatus=k(function(){this.errorList.length=0,this.needsReset=null,this.solutionFailReason=null,this.solutionStatus=b.unknown}),v.prototype.getLayoutFontSize=function(a){if("text"===a.type||"button"===a.type){var b;if(this.extractedFontOverrides&&this.extractedFontOverrides[a.argIndex])b=this.extractedFontOverrides[a.argIndex];else if("button"===a.type){var c=this.getLayoutSelectionStore().getOverrideMap(),d=this.containingSegment&&this.containingSegment.getTypeForLSSWithoutPartition(),e=d&&c.style&&c.style[d]&&c.style[d].button,f=e?e:a.style;b=m.getActiveTheme("color").definition.styles[f].properties.fnt}else b="font_"+a.font;return m.getFontSize(b)}},v.prototype.maxFontInBox=function(a){var b=0,c=this;return w(a.layout,function(a){var d=c.getLayoutFontSize(a);d>-1&&(b=Math.max(b,d))}),b},v.prototype.lineDefaultPositionArea=function(a){return o.designPolicy.execFirstLastLine(a,this.getLayoutSelectionStore().designPolicy.factor)},v.prototype.getLayoutSelectionStore=function(){return this.containingLG.getLayoutSelectionStore()},v.prototype.getMasterLe=function(){var a=this.containingSegment;if(this.containingLG.segments.length>1&&a.node.isListItem&&!Object.isExtensible(this)){var b=this.getLayoutSelectionStore().getSegLayoutElements(a);if(b&&b.length>1)return b[0].seg.getLE()}return this},v.prototype.isElementWithDynamicWidth=function(a){return this.structure&&this.structure.length&&("text"===a.type||this.isMediaType(a)||"form"===a.type)&&1===this.structure[0].length&&_.flatten(this.structure).indexOf(a.argIndex)>-1},v.prototype.getMediaType=function(){return this.getLayoutSelectionStore().getOverride("media",this.containingSegment,"allowedMediaOverrides")},v.prototype.isMobile=function(){return this.containingSegment.isMobile},v.prototype.getDesktopSegment=function(){return this.containingSegment.getDesktopSegment()},v.prototype.isLayoutInMenuStripArea=function(a){var b=this.containingLG.getLgData(),c=this.getLayoutBySubType("menu")||this.getLayoutBySubType("copyrightMSG"),d=b.menuStrip;if(c&&d&&d.enable&&a){var e,f;if(this.containingLG.isMobile()&&this.containingLG.isSiteHeader()?(e=this.menuStripTop,f=this.menuStripBottom):(e=c.top-d.paddingTop,f=c.top+c.height+d.paddingBottom),isNaN(e)||isNaN(f))return!1;var g=a.top+a.height/2;return g>=e&&f>=g}return!1},v.prototype.getLayoutsInMenuStripArea=function(){var a=this,b=this.containingLG.getLgData(),c=this.getLayoutBySubType("menu")||this.getLayoutBySubType("copyrightMSG"),d=b.menuStrip;return c&&d&&d.enable?_.filter(this.layout,function(b){return b!==c&&a.isLayoutInMenuStripArea(b)}):[]},v.prototype.getLayoutByArg=function(a){var b=this;return _.find(this.layoutArray,function(c){if(void 0!==c.argIndex){var d=b.argList[c.argIndex];return d.type===a.type&&d.subType===a.subType&&d.value===a.value}return!1})},_.assign(v.prototype,a.prototype),v}]),angular.module("siteGeneratorStaticsCoreAppInternal").factory("LayoutGroup",["$log","$browser","solutionStatusCodes","applicationParameters","heightMutations","$p","SmartLayoutRuleNode","layoutSelectionStoreProvider","modelTree","tpaService","layoutSelectionStoreSelectionsAdapter","prettyLayoutService","sitePartTypes","flags","segmentFactory","errorReportService","documentServicesMediator","columnService",function(a,b,c,d,e,f,g,h,i,j,k,l,m,n,o,p,q,r){function s(a,b){return a>=0&&b>a}function t(a,b,c){return a.every(function(a,d){return c?a.isHeightValid(c[d]):a.isHeightValid(b)})}function u(a,b,c){return _.map(a,function(a,d){return c?a.changeSegmentHeight(c[d]):a.changeSegmentHeight(b)})}function v(a,b){var c,d=0;b.forEach(function(b){if(b>1){c=0;for(var e=0;b>e;e++)a[d].top=c,c+=a[d].height+20,d++}else d++})}function w(a,b,c){return b?a+=c:a-=c,a}function x(a,b,d,e){var g,h={segmentsHeightChanged:!1,succeed:!1};void 0!==d&&void 0!==e&&(g=d[e]||d[0]);var i=t(a.segments,b,g);return a.changeHeightMutationIndex(b),f.when().then(function(){if(i){if(h.segmentsHeightChanged=_.any(u(a.segments,b,g)),a.indexOfChosenColumnPartition=e,h.segmentsHeightChanged||!a.status||a.status===c.unknown)return a.status=c.unknown,a.calculateLayoutGroupStatus(void 0,void 0,!0).then(function(a){a&&(h.succeed=!0)});h.succeed=a.status!==c.fail}}).then(function(){return h.succeed&&a.getLayoutSelectionStore().setLGHeightSelection(a),h})}function y(a,b,c){return c=c||f.defer(),b()?a().then(function(){return y(a,b,c)}):c.resolve(),c.promise}function z(a){var b=_.map(a,"node.id");return b.sort(function(a,b){if(!a)return-1;if(!b)return 1;for(var c=a.split("."),d=b.split("."),e=0;e<Math.min(c.length,d.length);e++)if(c[e]!==d[e])return c[e].localeCompare(d[e]);return 0}),b}function A(a,b){var c;return a.isHeader()?(c=b.calculateWantedArgs(!0,a.isMobile()),a.isSiteHeader()&&j.hasShoppingCart()&&c.push("shoppingCart")):c=b.getWantedArgs(a.isMobile()),c}function B(a){_.each(a,function(a){a.setPredefinedLayout(a.optionalLayoutElements[a.selectedOption])})}function C(a){var b=!1;return _.each(a,function(a){a.hasPredefinedLayout()&&(delete a.wantedArgs,b=!0,a.setPredefinedLayout(null))}),b}var D=function(a){_.extend(this,a),this.columnPartition&&this.segments.forEach(function(a,b){a.partitionIndex=b})};_.extend(D,{structure:{},setSiteLayoutLoader:function(a){D.siteLayoutLoader=a},getLayoutData:function(a){return{id:a.id||a.objectId,isGenerator:!!a.isGenerator,name:a.name,targetWidth:a.targetWidth,targetHeight:a.targetHeight,sitePart:a.sitePart,segments:a.segments,columnPartition:a.columnPartition}},createMobileLg:function(){var a=d.defaultForContent.slice();a.unshift("GeneralDescription"),a.unshift("Contact");var b={isGenerator:!1,id:"5680125272e7a231006e2620",name:"single object mobile width",targetWidth:940,targetHeight:80,sitePart:"body",segments:[{forContent:a,isMobile:!0,left:n.consumerMode?0:320,top:0,width:300,height:60}]};return b},createAsymmetricSplitLG:function(a){var b=ob.deepClone(a);b.id=b.name=b.segmentSignature+" Asymmetric Split",b.asymmetric=!0;var c=2===b.segmentSignature.length?300:220;return _.each(b.segments,function(a){a.width=c}),new D(b)},createPartialSegmentsLG:function(){var a=[{split:"1/2",segments:[460],segmentSignature:"10",leftOffset:0},{split:"1/3",segments:[300],segmentSignature:"100",leftOffset:0},{split:"1/3",segments:[300,300],segmentSignature:"110",leftOffset:0},{split:"1/4",segments:[220],segmentSignature:"1000",leftOffset:0},{split:"1/4",segments:[220,220],segmentSignature:"1100",leftOffset:0},{split:"1/4",segments:[220,220,220],segmentSignature:"1110",leftOffset:0},{split:"1/2 R",segments:[460],segmentSignature:"01",leftOffset:480},{split:"1/3 M",segments:[300],segmentSignature:"010",leftOffset:320},{split:"1/3 R",segments:[300],segmentSignature:"001",leftOffset:640},{split:"1/4 ML",segments:[220],segmentSignature:"0100",leftOffset:240},{split:"1/4 MR",segments:[220],segmentSignature:"0010",leftOffset:480},{split:"1/4 R",segments:[220],segmentSignature:"0001",leftOffset:720}],b=[],c="Partial lg ";return angular.forEach(a,function(a,e){var f={id:c+e,name:a.split+" split with "+a.segments.length,targetWidth:940,targetHeight:20,sitePart:"body",segments:[],segmentSignature:a.segmentSignature},g=0;angular.forEach(a.segments,function(b,c){g=a.leftOffset+c*d.segmentsGap+c*b,f.segments.push({forContent:d.defaultForContent,left:g,top:0,width:b})}),b.push(new D(f))}),b}});var E=e.heightMutations,F=e.heightMutations.slice(0);return D.prototype={autoCrop:function(a,b){_.each(this.segments,function(c){c.autoCrop(a,b)})},getSegmentSignature:function(){return this.segmentSignature||(this.segmentSignature=_.fill(new Array(this.segments.length),"1").join("")),this.segmentSignature},setPage:function(a){this.page=a,_.each(this.segments,function(b){b.page=a})},isLGrepeater:function(){return this.id.indexOf("Auto")>-1},isHeader:function(){return"headerLayoutGroup"===this.id},isSiteHeader:function(){return this.isHeader()&&!this.segments[0].node},hasAggregator:function(){return this.segments[0].contentElement.aggregator},getAggregationKey:function(){var a="";return angular.forEach(this.segments,function(b){b.contentElement.aggregator&&(a+=b.contentElement.getAggregationKey())}),a},setLgData:function(a){var b=this,c="";this.segments.forEach(function(a,d){a instanceof Segment||(b.segments[d]=o(a),a=b.segments[d]),a.containingLG=b,c+=a.contentElement.type,a.sitePart=b.sitePart,a.optionalLayoutElements=[]}),this.contentType=c,this.allContentElements=a,this.forcePretty=this.segments&&!this.columnPartition&&(1===this.segments.length||this.isOnlyListItem())},getCleanLayoutElementById:function(a){return D.siteLayoutLoader.getCleanLayoutElementById(a)},setOptionalLayoutElements:function(a){var b=this;return _.sequencePromises(this.segments,function(c,d){c instanceof Segment||(b.segments[d]=o(c),c=b.segments[d]);var e=A(b,c.contentElement),g=_.eq(c.wantedArgs,e);if(n.consumerMode&&!b.isHeader()&&a){if(c.hasPredefinedLayout(e))return c.wantedArgs=e,c.setPredefinedOptionalLayoutElement(),f.when();c.setPredefinedLayout(null)}var h;if(!n.consumerMode||b.isHeader()||c.node.isTpaNode()||(h=c.getLayoutSelectionStore().calculateRequestedClusters(c)),g&&_.eq(c.requiredClusters,h))return f.when();c.wantedArgs=e,c.requiredClusters=h,-1!==c.forContent.indexOf("ListFooter")||-1!==c.forContent.indexOf("GeneralDescription")?c.heightMutationsArr=F:c.heightMutationsArr=E;var i={};return c.containingLG=b,b.isHeader()?(c.optionalLayoutElements=D.siteLayoutLoader.layoutsForHeader(e,c.width,b.isSiteHeader()?m.HEADER:m.FOOTER),_.each(c.optionalLayoutElements,function(a){a.setLGContainer(b),a.setSegContainer(c)}),f.when()):D.siteLayoutLoader.layoutsForContentElementTypeAndSize(c.contentElement.type,e,c.width,h,"footer"===b.page?b.page:b.sitePart).then(function(a){c.cloneOptionalLayoutElements(a),angular.forEach(c.optionalLayoutElements,function(a){a.cluster?i[a.cluster]?a.active=!1:(i[a.cluster]=!0,a.active=!0):a.active=!0})})})},changeHeightMutationIndex:function(a){this.selectedHeightMutation=a,this.targetHeight=parseInt(E[this.selectedHeightMutation])},getPartitionKey:function(){return this.columnPartition.join("_")},resetLayoutPaddings:function(){var a=this.getLgData().strip;delete a.presetBottomIs0,delete a.presetTopIs0,a.paddingBottom=40,a.paddingTop=40},changeHeightToSpecificIndex:function(a,b){var c=this.selectedHeightMutation,d=this;if(this.columnPartition){if(void 0!==b){var g=e.getPartitions(this,this.getPartitionKey(),a);return x(this,a,g,b).then(function(a){return a.succeed?(d.indexOfChosenColumnPartition=b,v(d.segments,d.columnPartition),!0):(a.segmentsHeightChanged&&u(d.segments,c),!1)})}return f.when(!1)}return x(this,a).then(function(a){return a.succeed?!0:(a.segmentsHeightChanged&&u(d.segments,c),!1)})},changeHeightToSpecificIndexIgnoringPartitions:function(a){if(this.forcePretty){var b=_(this.segments).map(function(a){var b=a.getLENoError();return b&&l.getLayoutPrettyHeight(b)||0}).max(),c=e.heightMutations.indexOf(b),d=a-c;return this.getLayoutSelectionStore().setLGAdditionalHeight(this,d),this.isDirty=!0,this.calculateLayoutGroupStatus(void 0,void 0,!0)}if(this.columnPartition){var f=this,g=!1,h=0,i=e.getPartitions(f,f.getPartitionKey(),a);return y(function(){return f.changeHeightToSpecificIndex(a,h).then(function(a){g=a,h++})},function(){return!g&&i&&h<i.length}).then(function(){return g})}return this.changeHeightToSpecificIndex(a)},tryToChangeSegHeight:function(a,b){var c=this;return f.when().then(function(){if(c.columnPartition){var d,f=e.getPartitionsValues(c,c.getPartitionKey(),c.selectedHeightMutation)[c.indexOfChosenColumnPartition],g=_.findIndex(E.slice(c.selectedHeightMutation),function(g,h){var i=e.getPartitionsValues(c,c.getPartitionKey(),h);if(i){var j=_.findIndex(i,function(c){return _.every(c,function(c,d){return d===a?c>=b:c>=f[d]})});if(-1!==j)return d=j,!0}});return d&&g?c.changeHeightToSpecificIndex(g,d):!1}return c.changeHeightToSpecificIndexIgnoringPartitions(E.indexOf(b))})},aggregatorUniqueId:function(a){var b="";return a.forEach(function(a){a.isSpecialListItem()&&(b+=a.type)}),b},clearCache:function(){delete this.uniqueId,_.each(this.segments,function(a){delete a._typeForLSS,delete a._typeForLSSWithoutNodeId,delete a._typeForLSSWithoutPartition,a._zigZagVersion={}})},resetForRecalc:function(){var a=this.getLayoutSelectionStore(),b=this.getUniqueIdForSolution();this.isDirty=!0,this.clearCache(),_.each(this.segments,function(a){delete a.wantedArgs}),a.deleteSegmentsByLg(this);var c=this.getUniqueIdForSolution();a.copyLgRelatedData(this.page,b,c,!0)},getUniqueIdForSolution:function(a,b){if(!this.uniqueId||b){var c=z(this.segments),d=this.id+_.reduce(c,function(a,b){return b?a+b+"#":a},"");if(d.indexOf("#")>-1){if(this.hasAggregator()&&(d+=this.aggregatorUniqueId(this.segments[0].contentElement.ceArray)),a||b)return d;this.uniqueId=d}else this.uniqueId="header"}return this.uniqueId},findIdentifyingNodeId:function(){return this.segments[0].findIdentifyingNodeId()},getBoundingTop:function(){var a=this.getLgData(),b=this.top||0;return a.strip.enable&&this.contentType!==d.tpaTypes.Blog.type?b-=a.strip.paddingTop:a.topLine.enable&&"space"===a.topLine.line&&(b-=a.topLine.space),b},getBoundingHeight:function(){var a=this.getLgData(),b=this.targetHeight;return a.strip.enable&&this.contentType!==d.tpaTypes.Blog.type?b+=a.strip.paddingTop+a.strip.paddingBottom:(a.topLine.enable&&"space"===a.topLine.line&&(b+=a.topLine.space),a.bottomLine.enable&&"space"===a.bottomLine.line&&(b+=a.bottomLine.space)),b},getLgData:function(){var a=this.getLayoutSelectionStore();return a.getLgData(this.getUniqueIdForSolution(),this.page)},getColumnsData:function(){var a=this.getLayoutSelectionStore();return a.getColumnsData(this.segments[0])},setColumnsData:function(a){var b=this.getLayoutSelectionStore();b.setColumnsData(this.segments[0],a),this.segments.length>1&&b.setColumnsData(this.segments[1],a)},getTypeForLSSWithoutNodeId:function(){return this._typeForLSSWithoutNodeId?this._typeForLSSWithoutNodeId:(this._typeForLSSWithoutNodeId=this.contentType+"|"+this.segments[0].getTypeForLSSWithoutNodeId(),this._typeForLSSWithoutNodeId)},getTypeForLSS:function(){return this._typeForLSS?this._typeForLSS:(this._typeForLSS=this.contentType+"|"+this.segments[0].getTypeForLSS(),this._typeForLSS)},hasLEsEverySeg:function(){return _.every(this.segments,function(a){return a.optionalLayoutElements.length})},hasValidSegsForPartition:function(a,b){var d=_.map(a[b],function(a){return E[a]});return _.all(this.segments,function(a,b){return _.all(a.optionalLayoutElements,{solutionStatus:c.unknown})||a.minPassingHeight()<=d[b]})},getAdditionalHeight:function(){return this.getLayoutSelectionStore().getLGAdditionalHeight(this)*d.gridStep},changeLgHeight:function(a,c){function d(){if(k=e.getPartitions(q,q.getPartitionKey(),o)){n&&void 0!==q.indexOfChosenColumnPartition||(l=a?0:k.length-1),n=!1;var b=!1,d=function(){return!b&&(a?l<k.length:l>=0)};return _.whilePromises(d,function(){return q.hasValidSegsForPartition(k,l)?x(q,o,k,l).then(function(d){d.succeed?(q.indexOfChosenColumnPartition=l,v(q.segments,q.columnPartition),b=!0):l=w(l,a,c)}):void(l=w(l,a,c))}).then(function(){return b})}return n=!1,f.when()}function g(){return x(q,o).then(function(a){return a.succeed})}function h(){return q.indexOfChosenColumnPartition=m,q.columnPartition&&(k=e.getPartitions(q,q.getPartitionKey(),p)),x(q,p,k,m)}function i(){var d=_.map(q.segments,function(a){return a.minPassingHeight()});if(q.columnPartition&&n&&void 0!==q.selectedHeightMutation&&void 0!==q.indexOfChosenColumnPartition&&-1!==q.selectedHeightMutation)o=q.selectedHeightMutation,l=w(q.indexOfChosenColumnPartition,a,c);else{var e=_.max(d),f=E.indexOf(e);o=_.isFinite(e)?a&&f>o?f:!a&&f>=o?-1:w(o,a,c):-1}s(o,E.length)&&q.hasLEsEverySeg()?t().then(function(a){a?(b.$$completeOutstandingRequest(_.noop),r.resolve(!0)):i()}):h().then(function(){b.$$completeOutstandingRequest(_.noop),r.resolve(!1)})}if(c=c||1,this.forcePretty){var j=this.getLayoutSelectionStore().getLGAdditionalHeight(this);return j=w(j,a,c),this.getLayoutSelectionStore().setLGAdditionalHeight(this,j),this.isDirty=!0,this.calculateLayoutGroupStatus(void 0,void 0,!0)}var k,l,m=this.indexOfChosenColumnPartition,n=!0,o=this.selectedHeightMutation||0,p=this.selectedHeightMutation;-1===p&&(p=e.defaultHeight);var q=this,r=f.defer(),t=q.columnPartition?d:g;return i(),b.$$incOutstandingRequestCount(),r.promise},handleSmartLayoutMutationWithHeight:function(a,b){var c=10*parseInt(b.height/10);if(this.columnPartition){var d=1,f=this.getPartitionKey(),g=this.segments.indexOf(a),h=e.getPartitionLength(this,f),i=this;do{var j=e.getPartitionsValues(i,f,this.selectedHeightMutation+1);if(j){for(var k=[],l=0;l<j.length;l++){for(var m=j[l],n=!0,o=0;o<i.segments.length;o++)if(parseInt(m[o])<i.segments[o].height||o===g&&parseInt(m[g])<c){n=!1;break}n&&k.push(m)}if(k.length>0){var p=e.heightMutations[this.selectedHeightMutation+d];a.mutation={id:b.id,height:p,partition:j.indexOf(k[0])};break}d++}else d++}while(this.selectedHeightMutation+d<h)}else a.mutation={id:b.id,height:c}},handleSmartLayoutMutation:function(a,b){var c=a.containingSegment;c&&c.isSelectedLE(a)&&(b?this.handleSmartLayoutMutationWithHeight(c,a):this.getLayoutSelectionStore().markForRenderByPageAndLayoutElement(this.getPageDescriptor(),c,a.id))},chooseLayoutElementOption:function(a,b){var c,d=this,e=this.getPageDescriptor(),g=a.selectedOption;return c=b?this.getLayoutSelectionStore().tryToSetLESelectionForSegmentWithFallBack(e,a,b):f.when(this.getLayoutSelectionStore().tryToSetLESelectionForSegment(e,a,!1)),c.then(function(b){if(b){d.getLayoutSelectionStore().setLESelection(e,a,a.getLE().id),a.selectedOption!==g&&d.getLayoutSelectionStore().markSegmentForRender(e,a);var c=a.shouldAlignImage(),f=_.get(a,"node.contentElement.allValuesByMediaType.image[0]"),h=a.getMediaOverrides();if(f)if(c)a.alignStripImage();else if(h&&h.name.includes("Image")){var i=a.faceDetectionAutoCrop();n.suggestLayoutChange&&i&&i.length>0&&p.reportError(a.node.containerPageId,a.node.id,"changeLayout",i)}return!0}return n.consumerMode&&!d.isSpecialContentElement()?!1:(a.chooseNextlayoutElementOption(1),!0)})},isSpecialContentElement:function(){var a=this.segments[0],b=a.node&&a.node.isTpaNode();return b||a.isContact()},setHeightFromLSS:function(){if(!this.forcePretty){var a=this.getLayoutSelectionStore().getLGHeightSelection(this)||0;if(void 0===this.userSelectedHeight&&(this.userSelectedHeight=a),this.changeHeightMutationIndex(a),this.columnPartition){var b=this.getLayoutSelectionStore().getLGPartitionSelection(this),c=e.getSpecificPartition(this,this.getPartitionKey(),a,b);this.changeHeightOfSegments(a,c),this.indexOfChosenColumnPartition=b,this.setSegmentsLocation()}else this.changeHeightOfSegments(a);this.getLayoutSelectionStore().setLGHeightSelection(this)}},revalidateMediaOverrides:function(){this.isHeader()||this.containingSolution&&this.containingSolution.isSelectedSolution()&&this.segments.forEach(function(a){a.revalidateMediaOverrides(),a.setOverrides()})},chooseNextlayoutElementOption:function(a,b,c){var d=this;return a.chooseNextlayoutElementOption(b,c),d.ensureHeightMatchesContent()},chooseLayoutElementOptionAndChangeHeight:function(a,b){var c=this;return this.isHeader()||this.forcePretty?f.when(a.chooseLayoutElementOptionById(b,!0)).then(function(){return c.ensureHeightMatchesContent()}):a.chooseLayoutElementOptionAndChangeHeight(b)},changeLayoutGroupHeight:function(a){var b=e.heightMutations.indexOf(a);return this.selectedHeightMutation!==b&&this.changeHeightMutationIndex(b),_.sequencePromises(this.segments,function(c){var d=c.getLENoError();if(c.height=a,c.selectedHeightMutation=b,d){var e=d.getMasterLe(),g=a<d.height?e.shrink():f.when();return g.then(function(){a>d.height&&e.mutateByStretching(a)})}})},ensureHeightMatchesContent:function(){if(this.isHeader()||this.forcePretty){var a=_(this.segments).map(function(a){var b=a.getLENoError();return b&&(b.wantedHeight||b.height)||0}).max();return this.changeLayoutGroupHeight(a)}return f.when()},calculateLayoutGroupStatusForPresetPreview:function(){var a=this;return a.isDirty=!1,a.status=c.pass,a.setHeightFromLSS(),a.ensureHeightMatchesContent().then(function(){return a.revalidateMediaOverrides()})},calculateLayoutGroupStatus:function(a,b,d,e){if(this.status&&this.status!==c.unknown&&!this.isDirty)return f.when(this.status===c.pass);var g=this;return this.setOptionalLayoutElements(!0).then(function(){var c=d?_.sequencePromisesThenAll:_.allPromises;return c(g.segments,function(c){return c.calculateSegmentStatus(a,b)})}).then(function(){var b=_.all(g.segments,function(a){return _.any(a.optionalLayoutElements,function(a){return a.isValidForHeight()})}),h=_(g.segments).filter("mutation").pluck("mutation").value();if(!g.forcePretty&&e&&h.length>0){g.selectedHeightMutation=-1;var i=_.max(h,function(a){return a.height}),j=E.indexOf(i.height);return g.changeHeightToSpecificIndex(j,i.partition).then(function(){angular.forEach(g.segments,function(a){if(a.mutation&&a.mutation.id){var b=a.mutation.id;a.chooseLayoutElementOptionById(b),a.mutation=null}}),g.status=c.pass})}return f.when().then(function(){if(!b&&!d){var a=g.selectedHeightMutation;return g.selectedHeightMutation=-1,g.status=c.fail,g.isHeader()||g.forcePretty?(g.segments[0].selectedOption=-1,!1):g.changeLgHeight(!0).then(function(b){return b||g.changeHeightMutationIndex(a),b})}}).then(function(d){return b||d?_.sequencePromises(g.segments,function(b){return g.chooseLayoutElementOption(b,(a||g.isDirty)&&g.getLayoutSelectionStore().getPreferredLayoutData(b))}).then(function(a){return _.all(a)?g.ensureHeightMatchesContent().then(function(){g.status=c.pass}):void(g.status=c.fail)}):void(g.status=c.fail)})}).then(function(){var f=g.status===c.pass;if(n.consumerMode&&!g.isHeader())if(f)B(g.segments);else if(C(g.segments))return g.calculateLayoutGroupStatus(a,b,d,e);return g.revalidateMediaOverrides(),g.isDirty=!1,f&&n.newColumns&&!g.isHeader()&&!g.segments[0].node.isTpaWidget&&(g.columns=r.createColumns(g.getLayoutSelectionStore(),g)),f})},getSolutionStatus:function(){return _.all(this.segments,function(a){return _.any(a.optionalLayoutElements,function(a){return a.isPassing()})})},getPageDescriptor:function(){return this.segments.length&&this.segments[0].node&&this.segments[0].node.crossPageConnected?"general":this.getPortfolioPageDescriptor()||this.page||this.sitePart},getPortfolioPageDescriptor:function(){if(this.page&&"footer"!==this.page){var a=i.getPageNodeById(this.page);return a?a.parentPortfolioId:""}},resetSegMutation:function(){angular.forEach(this.segments,function(a){a.mutation=void 0})},applyLayoutPreset:function(a){var b=this,c=e.heightMutations.indexOf(a.height),d=this.getUniqueIdForSolution();this.forcePretty?this.getLayoutSelectionStore().setLGAdditionalHeight(this,a.additionalHeight||0):(this.changeHeightMutationIndex(c),this.getLayoutSelectionStore().setLGHeightSelection(this)),this.setColumnsData(a.columns);var g=this.getPageDescriptor();return this.isDirty=!0,_.sequencePromises(this.segments,function(h,j){var l=a.partitions&&a.partitions[h.partitionIndex],m=l&&e.heightMutations.indexOf(l.height)||c;b.forcePretty||h.changeSegmentHeight(m);var o=l||a.layouts&&a.layouts[j];if(o&&o.leId){var p,q=o.selections,r=h.getLayoutDataFromPreset(o);if(!b.isHeader()){var s=o.cluster;if(p=b.getLayoutSelectionStore().calculateFallBackClusterAndStructure(h,r),p&&s!==p.cluster&&(q=ob.deepClone(o.selections))){var t=k.getVariations(q,h.node);t&&t[s]&&(t[p.cluster]=t[s])}}if(q&&(b.getLayoutSelectionStore().setOverridesForNodeFromDB(h.node||i.getGeneralInformation(),q,g,d,h.isMobile),h.setOverrides()),n.consumerMode&&!h.isMobile&&b.getLayoutSelectionStore().setOverride("media",h,"allowedMediaOverrides",o.mediaType),o.fontOverrides){var u=b.getLayoutSelectionStore().fontOverridesManager.getOrInitOverrideObject(h.node);_.eq(u,o.fontOverrides)||_.extend(u,o.fontOverrides)}o.menuOverrides&&b.isSiteHeader()&&_.assign(b.getLayoutSelectionStore().menuOverridesManager.menuOverrides,o.menuOverrides);var v;return v=b.isHeader()?h.inflateCluster(0,!0).then(function(){var a=_.find(h.optionalLayoutElements,{id:o.leId})||h.optionalLayoutElements[b.getLayoutSelectionStore().calculateFallBackLEIndexForHeader(h,r)];return _.indexOf(h.optionalLayoutElements,a)}):p?b.getLayoutSelectionStore().calculateFallBackLEIndexFromCluster(h,r,p,!1):f.when(),v.then(function(a){var c=h.optionalLayoutElements[a];if(c&&c.isPassing()){b.getLayoutSelectionStore().setPreferredLayoutData(h,r),b.getLayoutSelectionStore().setManualLESelection(g,h,c.id,!0),n.consumerMode&&!b.isHeader()&&h.setPredefinedLayout(c);var d=h.getLENoError();d&&c.cluster&&c.cluster===d.cluster&&(d.active=!1),c.active=!0,h.selectedOption=a,c.isValidForHeight()||b.handleSmartLayoutMutationWithHeight(h,c);var e=h.shouldAlignImage(),f=_.get(h,"node.contentElement.allValuesByMediaType.image[0]"),i=h.getMediaOverrides();return f&&(e?h.alignStripImage():i&&i.name.includes("Image")&&(h.node.imageErrors=h.faceDetectionAutoCrop())),!0}})}})},clearLineRefs:function(){this.lineRefs=[]},addLineRef:function(a){this.lineRefs.push(a)},setAnchorRefs:function(a){this.anchorRefs=a},setDecorativeStripRef:function(a){this.decorativeStripRef=a},setComponentRef:function(a){this.componentRef=a},setStripComponentRef:function(a){this.stripComponentRef=a},setColumnsComponentRef:function(a){this.columnsComponentRef=a},setRenderedDecorativeStripRef:function(a){this.renderedDecorativeStripRef=a},isListHeader:function(){return _.all(this.segments,function(a){return a.contentElement&&"ListHeader"===a.contentElement.type})},isListFooter:function(){return _.all(this.segments,function(a){return a.contentElement&&"ListFooter"===a.contentElement.type})},isSpecialListItem:function(){return _.all(this.segments,function(a){return a.contentElement&&a.contentElement.isSpecialListItem()})},isOnlyListItem:function(){return _.all(this.segments,function(a){return a.contentElement&&a.node&&!a.contentElement.isSpecialListItem()&&a.node.isListItem})},getRenderedHeight:function(){return this.rendererHeight||this.targetHeight},changeHeightOfSegments:function(a,b){return u(this.segments,a,b)},setSegmentsLocation:function(){v(this.segments,this.columnPartition)},getLayoutSelectionStore:function(){return h.getLayoutSelectionStore(this.page||this.sitePart)},getComponentRefs:function(){var a=[],b=_.get(this.getLgData(),["strip","enable"]);b&&a.push(this.decorativeStripRef);var c=this.segments[0]&&this.segments[0].node;return(!b||c&&c.isTpaNode())&&a.push(this.componentRef),a=a.concat(this.lineRefs),a=a.concat(this.anchorRefs),c&&c.isTpa&&a.push(j.getCompRef(c.contentElementType)),c&&c.isTpaWidget&&a.push(c.widgetRef),_.compact(a)},playAnimations:function(){this.segments[0].node&&this.segments[0].node.isTpaNode()||q.previewAllSetAnimations(this.columnsComponentRef||this.componentRef,"screenIn")},canChangeScrollType:function(){return _.some(this.segments,function(a){return a.canChangeScrollType()})},setDesktopSegment:function(a){this.setPage(a.page);var b=this.segments[0];b.isMobile&&(this.desktopSegment=a,b.node=a.node,b.contentElement=a.contentElement)},isMobile:function(){var a=this.segments[0];return a.isMobile},getDesktopLG:function(){return this.isMobile()?_.get(this,["desktopSegment","containingLG"]):this},getMobileSegmentIndexInDesktop:function(){var a=this.getDesktopLG();return _.findIndex(a.segments,this.desktopSegment)},isMobileFirstLG:function(){return 0===this.getMobileSegmentIndexInDesktop()},getMobileFirstLG:function(){var a=this.getDesktopLG();return a.segments[0].mobileLg},getMobileSiblingLGs:function(){var a=this.getDesktopLG();return _.map(a.segments,"mobileLg")},setAsDirty:function(a){this.isDirty=!0,n.mobileEditor&&a&&_.each(this.segments,function(a){a.mobileLg&&a.mobileLg.setAsDirty()})}},D}]),angular.module("siteGeneratorStaticsCoreAppInternal").factory("LayoutSelectionStore",["solutionStatusCodes","LayoutUtils","layoutSelectionStoreSelectionsAdapter","PresetMediaType","$p","FontOverridesManager","MenuOverridesManager","LayoutElementFormatting","modelTree","defaultsService","nodeFilterTypes","clusters","storyServices","designKit","flags","tpaService",function(a,b,c,d,e,f,g,h,i,j,k,l,m,n,o,p){function q(a,b){var c=a.indexOf(b);-1!==c&&a.splice(c,1)}function r(b,c){return b.getSolutionStatus()===a.pass&&(!c||b.isValidForHeight())}function s(a,b,c,e,f,g){var h,i=_.filter(a,function(a){return a.isContact()&&a.storageId===c.templateId&&r(a,e)});if(i.length>0)h=i[0];else{var j=c.mediaGridWidth,k=c.isButtonInContainer;h=_(a).filter(function(a){return a.cluster===b.cluster&&(g||r(a,e))}).map(function(a){var e=0,g=a.getLayoutData();if(void 0!==f){var h=a.getMediaLayout();if(h&&f===d.SHAPE&&!a.isShapeLayout(h))return;if(h&&f===d.COAST2COAST&&g.mediaGridWidth<12)return;if(h&&(f===d.IMAGE||f===d.COLUMNBG)&&a.isShapeLayout(h))return}return _.eq(g.structure,b.structure)||(e+=1e3),_.eq(g.onMediaStructure,b.onMediaStructure)||(e+=100),g.isButtonInContainer!==k&&(e+=50),c.templateId&&a.templateId&&c.templateId!==a.templateId&&(e+=50),g.mediaGridWidth&&j&&(e+=Math.abs(g.mediaGridWidth-j)),{le:a,relevance:e}}).filter().min("relevance").le}return{index:a.indexOf(h),le:h}}function t(a,b){q(a,b),a.unshift(b)}function u(a){var b={};return a=a||{},_.each(a,function(a,c){b[c]=_.reduce(a,function(a,b,c){return a[c]=new h(b.data),a},{})}),b}function v(a,b){var c=a.contentElement.getWantedArgs().split("#"),d=b.argsSignature.split("#"),e=_.difference(d,c),f=_.difference(c,d);return e.length||f.length?l.calculateFallBackClusterAndStructure(b.structure,b.onMediaStructure,e,f):_.pick(b,"cluster","structure","onMediaStructure")}function w(b,c){var d=_(b.optionalLayoutElements).filter(function(b){return b.structureSuffix===c.structureSuffix&&b.getSolutionStatus()===a.pass}).min(function(a){var b=0;return a.templateId!==c.templateId&&(b+=1e3),_.endsWith(a.templateId,"box")!==_.endsWith(c.templateId,"box")&&(b+=10),b});return b.optionalLayoutElements.indexOf(d)}function x(a,b,c,e){return a.inflateCluster(c.cluster,!0).then(function(){var f;o.consumerMode&&(f=a.getLayoutSelectionStore().getOverride("media",a,"allowedMediaOverrides"),void 0===f&&(f=d.IMAGE));var g=s(a.optionalLayoutElements,c,b,e,f);return g?g.index:-1})}function y(a,b,c){if(b.containingLG&&b.containingLG.isHeader())return w(b,c);var d=v(b,c);if(d){if(d.cluster!==c.cluster){var e=a.getVariations(b,c.cluster);a.setVariations(b,d.cluster,e)}return x(b,c,d,!0)}return-1}function z(){_.assign(this,{fontOverridesManager:new f,menuOverridesManager:new g,segments:{}})}function A(a,b,c){var d=[a,b.getTypeForLSS(c)];return b.isMobile&&d.push("mobile"),d}function B(a){var b=a.getPageDescriptor(),c=A(b,a);return c.push("preferredLayoutData"),c}function C(a,b,c){var d=[a.getTypeForLSSWithoutPartition(c)];return a.isMobile&&d.push("mobile"),d.push(b),d}function D(a,b){var c=[a.getTypeForLSSWithoutPartition(b)];return a.isMobile&&c.push("mobile"),c}var E="_partition";return _.assign(z.prototype,{solutionKey:"solution",solutionUniqueKey:"solutionUNQ",solutionLGsKey:"solutionLGs",compRefsKey:"compRefs",pages:{general:{}},fixedHeader:!1,
renderCallbacks:{},assignedLG:{},favoriteLayoutElementIDs:[],overrides:{style:{},media:{}},textFormatting:{},isDatabaseCreated:function(a,b){var c=_.get(this.pages,a);return c&&c[b]},makeSureDatabaseCreated:function(a,b){if(this.isDatabaseCreated(a,b))return _.get(this.pages,a)[b];var c=_.get(this.pages,a);return(!c||c instanceof Array)&&(c={},_.set(this.pages,a,c)),"LG"===b?c[b]={}:c[b]=[],c[b]},checkIfAllListLEWithStatusPass:function(b,c){var d=b.getTypeForLSS();return this.renderCallbacks[b.page]&&this.renderCallbacks[b.page][d]?_.allPromises(this.renderCallbacks[b.page][d],function(b){var d=b.segment,e=d.getLEByID(c);if(!e)return!1;switch(e.getSolutionStatus()){case a.pass:return!0;case a.fail:return!1;case a.unknown:return e.calculateLayoutElementStatus(d.contentElement).then(function(){return e.getSolutionStatus()===a.pass})}}):e.when(!1)},markForRenderByPageAndLayoutElement:function(a,b,c){var d=b.getTypeForLSS(),e=A(a,b),f=this.makeSureDatabaseCreated(e,"LE");q(f,c),f.unshift(c),this.renderCallbacks[a]&&this.renderCallbacks[a][d]&&this.renderCallbacks[a][d].forEach(function(a){var b=a.segment,d=b.getLENoError();d&&d.id===c&&(a.dirty=!0)})},markForRenderByContentElement:function(a){_.each(this.renderCallbacks,function(b){_.each(b,function(b){_.each(b,function(b){b.segment&&b.segment.contentElement===a&&(b.dirty=!0)})})})},setLESelection:function(a,b,c,d){var e=this,f=b.getTypeForLSS(d),g=A(a,b,d),h=this.makeSureDatabaseCreated(g,"LE");t(h,c),this.renderCallbacks[a]&&this.renderCallbacks[a][f]&&this.renderCallbacks[a][f].forEach(function(b){var c=!0;e.tryToSetLESelectionForSegment(a,b.segment,c)&&(b.dirty=!0)}),this.tryToSetLESelectionForSegment(a,b)},setManualLESelection:function(a,b,c,d){var e=A(a,b),f=this.makeSureDatabaseCreated(e,"LE");_.get(this.pages,e).manualLE=c,d&&t(f,c)},setPredefinedLayout:function(a,b){var c=a.getPageDescriptor(),d=A(c,a);this.makeSureDatabaseCreated(d,"LE"),b?(a.containingLG.isHeader()||(b=b.getCleanLE()),_.get(this.pages,d).predefinedLayout=ob.deepClone(b.getSerializedData())):delete _.get(this.pages,d).predefinedLayout},getPredefinedLayout:function(a){var b=a.getPageDescriptor(),c=A(b,a);this.makeSureDatabaseCreated(c,"LE");var d=_.get(this.pages,c).predefinedLayout;if(d&&d.version>=3){var e=_.uniq(d.arguments,function(a){return a.type+"#"+a.subType}),f=_.map(d.structure,function(a){return a.length}),g=_.uniq(f).length<=1;if(d.arguments.length===e.length&&g)return ob.deepClone(d)}},setPreferredLayoutData:function(a,b){_.set(this.pages,B(a),b)},getPreferredLayoutData:function(a){return _.get(this.pages,B(a))},setColumnsData:function(a,b){var c=a.getPageDescriptor(),d=a.getTypeForLSS();_.set(this.pages,[c,d,"columns"],b)},getColumnsData:function(a){var b=a.getPageDescriptor(),c=a.getTypeForLSS();return _.get(this.pages,[b,c,"columns"])},setLESelectionForSegment:function(a,b,c){return a.selectedOption===b?!c:(a.selectedOption=b,!0)},findFirstLEofClusterWithMediaWidth:s,calculateFallBackLEIndexFromCluster:function(a,b,c,d){return x(a,b,c,d)},calculateFallBackClusterAndStructure:function(a,b){return v(a,b)},calculateRequestedClusters:function(a){var b=[2,49],c=this.getPreferredLayoutData(a);if(c){var d=v(a,c);d&&b.push(d.cluster)}return _.uniq(b)},calculateFallBackLEIndexForHeader:function(a,b){return w(a,b)},tryToSetLESelectionForSegmentWithFallBack:function(a,b,c){var d=this;if(!b.contentElement)return e.when(!1);var f=A(a,b);return this.isDatabaseCreated(f,"LE")?e.when().then(function(){return y(d,b,c)}).then(function(c){return c>-1&&b.optionalLayoutElements[c].isValidForHeight()?d.setLESelectionForSegment(b,c,!1):o.consumerMode?!1:d.tryToSetLESelectionForSegment(a,b,!1)}):e.when(!1)},tryToSetLESelectionForSegment:function(a,b,c){if(!b.contentElement)return!1;var d=A(a,b);if(!this.isDatabaseCreated(d,"LE"))return!1;for(var e,f=this.getLESelectionArr(a,b,!0),g=0;g<f.length;g++)if(e=f[g]){var h=_.findIndex(b.optionalLayoutElements,{id:e});-1===h&&b.optionalLayoutElements.length>0&&b.wantedArgs===b.optionalLayoutElements[0].argsSignature&&null!==e.match(/c(t|s|b|p)\d/)&&(h=_.findIndex(b.optionalLayoutElements,{oldId:e}));var i=b.optionalLayoutElements[h];if(h>-1&&i.isValidForHeight())return this.setLESelectionForSegment(b,h,c)}return b.selectedOption=-1,!1},getLESelectionArr:function(a,b,c){var d=A(a,b);if(!this.isDatabaseCreated(d,"LE")){var e=j.getDefaultsDB(b.getPageDescriptor()),f=j.getLeSelection(e,b);if(!f)return null;this.setLESelection(a,b,f)}var g=_.get(this.pages,d).LE;if(c&&!o.consumerMode){var h=_.get(this.pages,d).manualLE;h&&(_.pull(g,h),g.unshift(h))}return g},markSegmentForRender:function(a,b){var c=b.getTypeForLSS();this.renderCallbacks[a]&&this.renderCallbacks[a][c]&&this.renderCallbacks[a][c].forEach(function(a){a.segment===b&&(a.dirty=!0)})},deleteRenderCallbackForSegment:function(a,b){this.renderCallbacks[a]=this.renderCallbacks[a]||{};var c=b.getTypeForLSS();delete this.renderCallbacks[a][c]},assignWithRenderCallback:function(a,b,c){this.renderCallbacks[a]=this.renderCallbacks[a]||{};var d=b.getTypeForLSS();this.renderCallbacks[a][d]=this.renderCallbacks[a][d]||[];var e=_.find(this.renderCallbacks[a][d],function(a){return a.segment===b});e?e.callback=c:this.renderCallbacks[a][d].push({segment:b,callback:c})},deleteCallbacksForPage:function(a){this.renderCallbacks[a]={}},getCallbacksForPage:function(a){return this.renderCallbacks[a]},getCallbacksForSegment:function(a,b){var c=b.getTypeForLSS();return _.find(this.renderCallbacks[a][c],function(a){return a.segment===b})},getUniqueLayoutElementsOfList:function(a){var b=a.getPageDescriptor(),c=this.renderCallbacks[b]&&this.renderCallbacks[b][a.getTypeForLSS()],d=_.pluck(c,"segment"),e=d.map(function(a){return a.getLE()});return _.uniq(e,function(a){return a.layout})},getLGAdditionalHeight:function(a){var b=a.getPageDescriptor(),c=a.getUniqueIdForSolution();return this.isDatabaseCreated([b,c],"LG")?this.pages[b][c].LG.additionalHeight||0:0},setLGAdditionalHeight:function(a,b){var c=a.getPageDescriptor(),d=a.getUniqueIdForSolution(),e=this.makeSureDatabaseCreated([c,d],"LG");e.additionalHeight=b},setLGHeightSelection:function(a,b){var c=a.getPageDescriptor(),d=a.getUniqueIdForSolution(void 0,b),e=a.id,f=a.selectedHeightMutation,g=a.indexOfChosenColumnPartition,h=this.makeSureDatabaseCreated([c,d],"LG");(h[e]!==f||void 0!==g&&h[e+E]!==g)&&(h[e]=f,void 0!==g&&(h[e+E]=g))},getLGHeightSelection:function(a){var b=a.getPageDescriptor(),c=a.getUniqueIdForSolution(),d=a.id;if(this.isDatabaseCreated([b,c],"LG"))return this.pages[b][c].LG[d];var e=j.getDefaultsDB(b);return j.getLgHeightSelection(e,a)},getLGPartitionSelection:function(a){var b=a.getPageDescriptor(),c=a.getUniqueIdForSolution(),d=a.id;if(this.isDatabaseCreated([b,c],"LG"))return this.pages[b][c].LG[d+E];var e=j.getDefaultsDB(b);return j.getLgPartitionHeightSelection(e,a)},inflateCluster:function(a,b,c){return _.sequencePromises(this.renderCallbacks[a]&&this.renderCallbacks[a][b],function(a){return a.segment.inflateCluster(c)})},deflateCluster:function(a,b){return _.sequencePromises(this.renderCallbacks[a]&&this.renderCallbacks[a][b],function(a){return a.segment.deflateCluster()})},setSolutionSelection:function(a,b){this.pages[a]=this.pages[a]||{},this.pages[a][this.solutionKey]=b},getSolutionSelection:function(a){return this.pages[a]?this.pages[a][this.solutionKey]:0},setSolutionLGs:function(a,b){this.pages[a]=this.pages[a]||{},this.pages[a][this.solutionLGsKey]=b},getSolutionLGs:function(a){return this.pages[a]&&this.pages[a][this.solutionLGsKey]||{}},setSolutionUniqueID:function(a,b){this.pages[a]=this.pages[a]||{},this.pages[a][this.solutionUniqueKey]=b},getSolutionUniqueID:function(a){return this.pages[a]?this.pages[a][this.solutionUniqueKey]:void 0},changeSolutionSignature:function(a,b){this.pages[a]=this.pages[a]||{},this.pages[a][this.solutionUniqueKey]=this.pages[a][this.solutionUniqueKey]||[];var c=this.pages[a][this.solutionUniqueKey],d=b.children.filter(function(a){return!a.contentElement.isSpecialListItem()}),e=b.children.filter(function(a){return a.contentElement.isSpecialListItem()}),f=j.getDefaultsDB(),g=f.preferredLg&&f.preferredLg[d[0].contentElementType];if(g){if(d.length%g.q===0)for(var h=d.length/g.q,i=0,k=0;h>k;k++){for(var l=g.id,m=0;m<g.q;m++)l+=d[i].getId()+"#",++i;c.push(l)}}else if(f.preferredLg&&f.preferredLg["List"+d[0].contentElementType]){var n=["ListHeader","ListFooter"];g=f.preferredLg["List"+d[0].contentElementType],e.forEach(function(a){var b=f.preferredLg&&f.preferredLg[(a.contentElement.isSpecialListItem()?a.parentContentElementType:"")+a.contentElementType];if(b){var d=b.id+a.getId()+"#",e=n.indexOf(a.contentElementType);n.splice(e,1),c.push(d)}}),n.forEach(function(a,c){var d=_.find(b.children,function(b){return b.contentElementType===a});_.any(d.argsMatchingPolicy)||n.splice(c,1)});var o=n.join("");c.push(g.id+b.id+"#"+o)}},addFilterOverrideForNewNode:function(a,b){if(c.isAggregator(b,a))a.layoutFilter=k.AGGREGATOR;else{var d=c.getLayoutFilter(b,a);d&&(a.contentElement&&!a.contentElement.isSpecialListItem()?i.findIdentifyingNode(a).layoutFilter=d:a.layoutFilter=d)}},setOverridesForNodeFromDB:function(a,b,d,e,f){var g=c.isAggregator(b,a),j=c.getStyleOverrides(b,a),k=c.getMediaOverrides(b,a),l=c.getStrips(b,a),m=c.getTextFormatting(b,a),n=c.getDecorations(b,a),p=c.getVariations(b,a),q="header"===e?"GeneralDescription|":i.getTypeForLSSWithoutPartition(a),r=i.getTypeForLSSWithoutPartition(i.findIdentifyingNode(a));if(g||a.contentElement&&!a.contentElement.isSpecialListItem()&&a!==i.findIdentifyingNode(a)&&(this.overrides.style[r]=JSON.parse('{"PaginatedGridGallery":"pagg1","MatrixGallery":"mg2"}'),this.overrides.media[r]=JSON.parse('{"pmWZQmcl5X_m12#ag":{"0":{"type":"MatrixGallery","properties":{"maxRows":1,"numCols":4,"margin":20},"style":{"fntt":"font_0","fntds":"font_9"},"superType":"gallery","sourceProperties":{"columns":4,"rows":1},"name":"Grid (with margins and text below)"},"sourceProperties":{}}}')),j?this.overrides.style[q]=ob.deepClone(j):delete this.overrides.style[q],!f)if(k?this.overrides.media[q]=ob.deepClone(k):delete this.overrides.media[q],l){var s=Object.keys(l)[0],t=l[s];e||"header"!==s&&(e=g?s+i.findIdentifyingNodeId(a)+"#":s+a.id+"#");var u=this.getLgData(e,d),v=u&&u.strip&&u.strip.color;delete u.menuStrip,delete u.strip,delete u.topLine,delete u.bottomLine,_.extend(u,ob.deepClone(t)),o.designKit&&v&&(u.strip.color=v)}else e&&this.lgData[d]&&delete this.lgData[d][e];m?this.textFormatting[q]=_.mapValues(m,function(a){return new h(a.data)}):delete this.textFormatting[q];var w=[q];f&&w.push("mobile"),_.set(this.variations,w,p&&ob.deepClone(p)||{}),_.set(this.decorations,w,n&&ob.deepClone(n)||{})},isFavorite:function(a){return-1!==this.favoriteLayoutElementIDs.indexOf(a)},toggleFavoriteLE:function(a){this.isFavorite(a)?this.favoriteLayoutElementIDs.splice(this.favoriteLayoutElementIDs.indexOf(a),1):this.favoriteLayoutElementIDs.push(a)},deleteOverride:function(a,b,c){this.overrides[a][b.getTypeForLSSWithoutPartition()]&&delete this.overrides[a][b.getTypeForLSSWithoutPartition()][c]&&this._setOverridesInRenderedSegments(b)},setOverride:function(a,b,c,d,e){this.overrides[a]||(this.overrides[a]={});var f=this.overrides[a],g=b.getTypeForLSSWithoutPartition(e);f[g]||(f[g]={}),f[g][c]=d,this._setOverridesInRenderedSegments(b)},_setOverridesInRenderedSegments:function(a){var b=this.renderCallbacks[a.getPageDescriptor()];b&&_.each(b[a.getTypeForLSS()],function(a){a.segment.setOverrides()})},getTextFormatting:function(a){if(a){var b=a.getTypeForLSSWithoutPartition();return this.textFormatting[b]=this.textFormatting[b]||{},this.textFormatting[b]}},getTextFormattingBySubType:function(a,b,c,d){if(a){if(o.designKit)return n.getFontFormatting(a,b,c,d);var e=a.getTypeForLSSWithoutPartition();return this.textFormatting[e]=this.textFormatting[e]||{},this.textFormatting[e][b]=this.textFormatting[e][b]||new h,this.textFormatting[e][b]}},resetTextFormatting:function(a,b){if(a){var c=a.getTypeForLSSWithoutPartition();this.textFormatting[c]=this.textFormatting[c]||{},delete this.textFormatting[c][b]}},getOverrideByNode:function(a,b,c){var d=i.getTypeForLSSWithoutPartition(b);return this._getOverride(a,d,c)},getOverride:function(a,b,c){var d=b.getTypeForLSSWithoutPartition();return this._getOverride(a,d,c)},_getOverride:function(a,b,c){var d=this.overrides[a]&&this.overrides[a][b];return void 0===c?d:d&&d[c]},getOverrideMap:function(){return this.overrides},getFontOverridesManager:function(){return this.fontOverridesManager},getLgData:function(a,b){if(a=a||"header",b&&"header"!==a||(b="header"),"header"===a&&"header"===b&&this.lgData.header&&this.lgData.header.bottomLine){var c={header:this.lgData.header};this.lgData.header=c}var d;return this.lgData&&this.lgData[a]&&"header"!==a&&(d=this.lgData[a],delete this.lgData[a]),this.lgData=this.lgData||{},this.lgData[b]=this.lgData[b]||{},this.lgData[b][a]=this.lgData[b][a]||d||{strip:{},bottomLine:{},topLine:{}},this.lgData[b][a]},deleteSegments:function(a){this.segments[a]={}},deleteSegmentsByLg:function(a){var b=this,c=a.getUniqueIdForSolution(),d=a.page;_.each(a.segments,function(a){var e=a.getTypeForLSS(),f=a.width;_.has(b.segments,[d,f,c,e])&&delete b.segments[d][f][c][e]})},setSegLayoutElements:function(a,b,c){var d=a.getPageDescriptor(),e=a.getTypeForLSS(),f=a.width,g=a.containingLG.getUniqueIdForSolution();c&&_.has(this.segments,[d,f,g,e])&&delete this.segments[d][f][g][e];var h=[d,f,g,e],i=_.get(this.segments,h);i||(i=[],_.setObject(this.segments,h,i)),i.push({seg:a,height:a.height,wantedArgs:a.contentElement.getWantedArgs(),layoutElements:b})},getSegLayoutElements:function(a){var b=a.getPageDescriptor(),c=a.getTypeForLSS(),d=a.width,e=a.containingLG.getUniqueIdForSolution();return _.get(this.segments,[b,d,e,c])},getImageStretch:function(a,b){if(a){var c=this.getVariations(a,b.cluster),d=c.media&&c.media.imageStretch;if(!d){var e=a.getTypeForLSSWithoutPartition();d=this.imageStretches&&this.imageStretches[e]&&this.imageStretches[e][b.id]}return d}},setVariations:function(a,b,c,d){this.variations=this.variations||{};var e=C(a,b,d);_.set(this.variations,e,c)},setDecorations:function(a,b,c){this.decorations=this.decorations||{};var d=D(a,c);_.set(this.decorations,d,b)},getVariations:function(a,b){if(a){var c=C(a,b);return _.get(this.variations,c,{})}},getDecorations:function(a){if(a){var b=D(a);return _.get(this.decorations,b,{})}},setAnimationsForSite:function(a){this.siteOverrides.siteAnimation=a},getAnimationsForSite:function(){return this.siteOverrides&&this.siteOverrides.siteAnimation},setScrollTypeForSite:function(a){this.siteOverrides.siteScrollType=a},getScrollTypeForSite:function(){return this.siteOverrides&&this.siteOverrides.siteScrollType},setPagesTransitionForSite:function(a){this.siteOverrides.sitePagesTransition=a},getPagesTransitionForSite:function(){return this.siteOverrides&&this.siteOverrides.sitePagesTransition},setSiteFontAdditionalSize:function(a){this.siteOverrides.siteFontAdditionalSize=a},getSiteFontAdditionalSize:function(){return this.siteOverrides&&this.siteOverrides.siteFontAdditionalSize},resetAllFontAdditionalSize:function(){delete this.siteOverrides.siteFontAdditionalSize,_.each(this.pages,function(a,b){"general"!==b&&_.each(a,function(a){a&&delete a.fontAdditionalSize})})},pageIdFromNode:function(a){return a&&(a.containerPageId||("GeneralDescription"===a.contentElementType?"header":void 0))},nodeFilterFromNode:function(a){if(a.containerPageId){var b=this.pages[a.containerPageId];if(b){var c=b[this.solutionUniqueKey],d=a.isList()?new RegExp(a.id+"\\.\\d"):new RegExp(a.id+"#"),e=_.find(c,function(a){return a.match(d)});if(e)return"#"!==_.last(e)?k.AGGREGATOR:(e.match(/#/g)||[]).length>1?k.PART:k.FULL}}},setTextDirection:function(a,b){this.pages[a]&&(this.pages[a].textDirection=b)},getTextDirection:function(){return m.story&&m.story.selectedPage?this.pages[m.story.selectedPage]&&this.pages[m.story.selectedPage].textDirection:void 0},getFixedHeader:function(){return this.fixedHeader},setFixedHeader:function(a){this.fixedHeader=a},cleanSegmentData:function(a){var b=a.getTypeForLSSWithoutPartition(),c=a.getTypeForLSS(),d=a.getPageDescriptor();delete this.overrides.media[b],delete this.overrides.style[b],delete this.variations[b],delete this.imageStretches[b],delete this.decorations[b],delete this.textFormatting[b],this.pages[d]&&(delete this.pages[d][c],delete this.pages[d][b])},cleanLGData:function(a){var b=this;a.segments.forEach(function(a){b.cleanSegmentData(a)}),this.lgData[a.page]&&delete this.lgData[a.page][a.getUniqueIdForSolution()]},cleanPageData:function(a){-1===["header","footer","general"].indexOf(a)&&(delete this.pages[a],delete this.lgData[a])},serialize:function(a,b){var c=this,d=["lgData","textFormatting"];d.forEach(function(a){angular.forEach(c[a],function(b,d){_.isEmpty(b)&&delete c[a][d]})}),_.forEach(this.lgData,function(a,b){a.strip&&a.bottomLine&&a.topLine?delete c.lgData[b]:_.forEach(a,function(a,d){_.isEmpty(a)?delete c.lgData[b][d]:a.bottomLine.enable||a.topLine.enable||a.strip.enable||a.menuStrip&&a.menuStrip.enable||delete c.lgData[b][d]})});var e=_.transform(this.variations,function(a,b,c){return a[c]=_.transform(b,function(a,b,c){return _.keys(b).length&&(a[c]=b),a}),a});o.fixVariationData&&_.each(e,function(a,b){Array.isArray(a)&&0===a.length&&(e[b]={})});var f={pages:this.pages,overrides:this.overrides,favorites:this.favoriteLayoutElementIDs,fontOverrides:this.fontOverridesManager.fontOverrides,menuOverrides:this.menuOverridesManager.menuOverrides,textFormatting:this.textFormatting,decorations:this.decorations,variations:e,imageStretches:this.imageStretches,lgData:this.lgData,fixedHeader:this.fixedHeader,siteOverrides:this.siteOverrides,designPolicy:this.designPolicy,designKit:a?void 0:n.serialize(),tpaService:p.serialize()};return _.each(f.tpaService,function(a){_.each(a,function(b,c){"$"===c.charAt(0)&&delete a[c]})}),b?f:JSON.stringify(f)},deserialize:function(a){var b=_.isString(a)?JSON.parse(a):ob.deepClone(a);b.pages?(this.pages=_.defaults(b.pages,{general:{}}),this.overrides=b.overrides||{style:{},media:{}},this.favoriteLayoutElementIDs=b.favorites||[],this.lgData=b.lgData||{},b.fontOverrides?this.fontOverridesManager.fontOverrides=b.fontOverrides:this.fontOverridesManager.fontOverrides={},b.menuOverrides&&_.assign(this.menuOverridesManager.menuOverrides,b.menuOverrides),this.variations=b.variations||{},this.imageStretches=b.imageStretches||{},this.decorations=b.decorations||{},this.textFormatting=u(b.textFormatting)||{},this.designPolicy=b.designPolicy||{id:"default",factor:1},b.designKit&&n.deserialize(b.designKit),p.deserialize(b.tpaService)):(this.pages={},this.overrides={style:{},media:{}},this.favoriteLayoutElementIDs=[],this.fontOverridesManager.fontOverrides={},this.lgData={},this.variations={},this.imageStretches={},this.decorations={},this.textFormatting={},this.designPolicy={id:"default",factor:1,lineHeight:0}),this.fixedHeader=!!b.fixedHeader,this.siteOverrides=b.siteOverrides||{}},clone:function(){var a=new z,b=this.serialize(!0);return a.deserialize(b),a},copyLgRelatedData:function(a,b,c,d){if(b!==c){var e=_.get(this.pages,[a,b]);e&&(this.pages[a][c]=e,d&&delete this.pages[a][b]);var f=_.get(this.lgData,[a,b]);f&&(this.lgData[a][c]=f,d&&delete this.lgData[a][b])}},updateFromPresetLgData:function(a,c,d){var e=c[0],f=940,g=e.containerPageId,h=i.getTypeForLSSWithoutPartition(e),j=h+"|-1",k=a.layouts[0],l=k&&k.selections;if(l){var m=a.id+e.id+"#";this.setOverridesForNodeFromDB(e,l,g,m,d)}if(_.set(this.pages,[g,j,"preferredLayoutData"],b.getLayoutDataFromPreset(k,f)),_.set(this.overrides,["media",h,"allowedMediaOverrides"],k.mediaType),k.fontOverrides){var n=this.fontOverridesManager.getOrInitOverrideObject(e);_.eq(n,k.fontOverrides)||_.extend(n,k.fontOverrides)}_.set(this.pages,[g,j,"columns"],a.columns)}}),z}]).constant("createLgDataColumnsDefaults",function(){return{enable:!0,props:{fullWidth:!1,columnsMargin:20,frameMargin:0,rowMargin:0,siteMargin:0},singleColumnProps:[]}}).constant("createSegmentColumnDefaults",function(){return{alignment:0,backgroundMode:null}});var core;!function(a){var b=function(){function a(a){this.modelTree=a}return a.$inject=["modelTree"],a.prototype.additionToSpecialNodes=function(a){return a&&a.contentElement&&a.contentElement.isSpecialListItem()?a.parentContentElementType:""},a.prototype.getCeType=function(a){return this.additionToSpecialNodes(a)+a.contentElementType+(a.isListItem?"List":"")},a.prototype.getAggregatorType=function(a){return"List"+a.contentElementType+"Single"},a.prototype.getLayoutFilter=function(a,b){return a.layoutFilters&&(a.layoutFilters[this.getCeType(b)]||a.layoutFilters[this.getAggregatorType(b)])},a.prototype.isAggregator=function(a,b){if(this.modelTree.findIdentifyingNodeId(b)!==b.id||b.isList()){var c=this.getAggregatorType(b);return _.any(a.overrides,function(a){return a&&a[c]})}return!1},a.prototype.getFromOverrides=function(a,b,c){var d=this.getCeType(b);if(a.overrides&&a.overrides[c]){if(a.overrides[c][d])return a.overrides[c][d];if(this.modelTree.findIdentifyingNodeId(b)!==b.id||b.isList()){var e=this.getAggregatorType(b);if(a.overrides[c][e])return a.overrides[c][e]}}},a.prototype.getStyleOverrides=function(a,b){return this.getFromOverrides(a,b,"style")},a.prototype.getMediaOverrides=function(a,b){return this.getFromOverrides(a,b,"media")},a.prototype.getStrips=function(a,b){return this.getFromOverrides(a,b,"strips")},a.prototype.getTextFormatting=function(a,b){return this.getFromOverrides(a,b,"textFormatting")},a.prototype.getDecorations=function(a,b){return this.getFromOverrides(a,b,"decorations")},a.prototype.getVariations=function(a,b){return this.getFromOverrides(a,b,"variations")},a}();a.LayoutSelectionStoreSelectionsAdapter=b}(core||(core={})),angular.module("siteGeneratorStaticsCoreAppInternal").service("layoutSelectionStoreSelectionsAdapter",core.LayoutSelectionStoreSelectionsAdapter);var LayoutSelectionStoreProvider=function(){function a(a,b,c){this.LayoutSelectionStore=a,this.modelTree=b,this.designKit=c,this.mainLss=new this.LayoutSelectionStore,this.lssMap={}}return a.$inject=["LayoutSelectionStore","modelTree","designKit"],a.prototype.resetPresetSelections=function(){var a=this;this.designKit.resetPresetSelections(),_.each(_.keys(this.lssMap),function(b){a.lssMap[b].readyToDie&&delete a.lssMap[b]})},a.prototype.getLayoutSelectionStore=function(a){return void 0===a&&(a=void 0),this.lssMap[a]||this.mainLss},a.prototype.cloneLayoutSelectionStoreForPresetPreview=function(a,b){var c=this.mainLss.clone();return a&&(b&&(c.pages[a]=ob.deepClone(this.mainLss.pages[b]),this.mainLss.lgData&&(c.lgData[a]=ob.deepClone(this.mainLss.lgData[b]))),this.lssMap[a]=c),c},a.prototype.cloneNodeOverrides=function(a,b,c,d,e){var f=this.mainLss.pages[d],g="node_"+b,h="node_"+c,i=_.get(a,["pages",e,h]);i&&(f[g]=ob.deepClone(i))},a.prototype.cloneNodesOverrides=function(a,b,c,d,e){var f=this,g=b[0].identifyingNodeId,h=c[0].identifyingNodeId;this.cloneNodeOverrides(a,g,h,d,e),_.each(b,function(b,h){_.each(b.segments,function(b,i){b.nodeId!==g&&f.cloneNodeOverrides(a,b.nodeId,c[h].segments[i].nodeId,d,e)})})},a.prototype.mergeLayoutSelectionStoreFromPresetPreview=function(a,b,c,d,e,f,g){var h=this;void 0===e&&(e=void 0),void 0===f&&(f=!1),void 0===g&&(g=!1),g||this.designKit.mergePresetSelections(b,d,e),this.mainLss.pages[c]=this.mainLss.pages[c]||{},this.mainLss.lgData[c]=this.mainLss.lgData[c]||{},this.mainLss.segments[c]=this.mainLss.segments[c]||{},e&&c&&!g&&this.cloneNodesOverrides(a,d,e,c,b),_.each(d,function(d,i){var j=d.lgUniqueId,k=e&&e[i].lgUniqueId||j;g||(h.mainLss.pages[c][j]=a&&a.pages&&a.pages[b]&&a.pages[b][k]),h.mainLss.lgData[c][j]=ob.deepClone(a&&a.getLgData(k,b)),_.each(d.segments,function(d,l){var m=d.typeForLSS,n=e&&e[i].segments[l].typeForLSS||m,o=d.typeForLSSWithoutPartition,p=e&&e[i].segments[l].typeForLSSWithoutPartition||o;g?(_.set(h.mainLss.pages,[c,m,"mobile"],_.get(a.pages,[b,n,"mobile"])),_.set(h.mainLss.variations,[o,"mobile"],_.get(a.variations,[p,"mobile"])),_.set(h.mainLss.decorations,[o,"mobile"],_.get(a.decorations,[p,"mobile"]))):(h.mainLss.pages[c][m]=a&&a.pages&&a.pages[b]&&a.pages[b][n],f||(h.mainLss.segments[c][d.width]=h.mainLss.segments[c][d.width]||{},h.mainLss.segments[c][d.width][j]=h.mainLss.segments[c][d.width][j]||{},h.mainLss.segments[c][d.width][j][m]=a&&a.segments&&a.segments[b]&&a.segments[b][d.width]&&a.segments[b][d.width][k]&&a.segments[b][d.width][k][n]),h.mainLss.pages[c][o]=a&&a.pages&&a.pages[b]&&a.pages[b][p],h.mainLss.overrides.style[o]=a&&a.overrides&&a.overrides.style&&a.overrides.style[p],h.mainLss.overrides.media[o]=a&&a.overrides&&a.overrides.media&&a.overrides.media[p],h.mainLss.textFormatting[o]=a&&a.textFormatting&&a.textFormatting[p],h.mainLss.decorations[o]=a&&a.decorations&&a.decorations[p],h.mainLss.variations[o]=a&&a.variations&&a.variations[p])})}),g||"header"!==c||(this.mainLss.menuOverridesManager.menuOverrides=ob.deepClone(a.menuOverridesManager.menuOverrides))},a.prototype.getKeyMap=function(a,b){var c=_.map(a,function(a){return{lgUniqueId:a.getUniqueIdForSolution(!1,!1),segments:_.map(a.segments,function(a){return{typeForLSS:a.getTypeForLSS(),typeForLSSWithoutPartition:a.getTypeForLSSWithoutPartition(),width:a.width,nodeId:a.node&&a.node.getId()}}),identifyingNodeId:a.findIdentifyingNodeId()}});if(b&&b.isList()){if(!_.first(a).isListHeader()){var d=this.modelTree.getListHeader(b),e=this.modelTree.getTypeForLSSWithoutPartition(d);c.unshift({lgUniqueId:"5680125272e7a231006e2621"+d.id+"#",segments:[{typeForLSS:e+"|-1",typeForLSSWithoutPartition:e,width:940,nodeId:d.id}],identifyingNodeId:b.id})}if(!_.last(a).isListFooter()){var f=this.modelTree.getListFooter(b),e=this.modelTree.getTypeForLSSWithoutPartition(f);c.unshift({lgUniqueId:"5680125272e7a231006e2621"+f.id+"#",segments:[{typeForLSS:e+"|-1",typeForLSSWithoutPartition:e,width:940,nodeId:f.id}],identifyingNodeId:b.id})}}return c},a.prototype.getMergedLgUniqueId=function(a,b){var c=a.lgUniqueId;return _.each(a.segments,function(a){c=c.replace(a.nodeId,b[a.nodeId])}),c},a.prototype.getMergedSegUniqueId=function(a,b,c){return a.replace(b.split(".")[1],c[b].split(".")[1])},a.prototype.getMergedKeyMap=function(a,b){var c=this;return _.map(a,function(a){return{segments:_.map(a.segments,function(a){return{typeForLSS:c.getMergedSegUniqueId(a.typeForLSS,a.nodeId,b),typeForLSSWithoutPartition:c.getMergedSegUniqueId(a.typeForLSSWithoutPartition,a.nodeId,b),width:a.width}}),lgUniqueId:c.getMergedLgUniqueId(a,b),identifyingNodeId:a.identifyingNodeId&&b[a.identifyingNodeId]}})},a.prototype.getNodesMap=function(a,b){var c={};return _.each(a.children,function(a,d){var e=b.children[d];c[a.getId()]=e.getId(),_.each(a.children,function(a,b){c[a.getId()]=e.children[b].getId()})}),c},a}();angular.module("siteGeneratorStaticsCoreAppInternal").service("layoutSelectionStoreProvider",LayoutSelectionStoreProvider);var core;!function(a){var b=function(){function a(a,b){this.layoutSelectionStoreProvider=a,this.modelTree=b}return a.$inject=["layoutSelectionStoreProvider","modelTree"],a.prototype.getForSegment=function(a){var b=a.getPageDescriptor(),c=a.getTypeForLSS();return this.getDataByKey(b,c)},a.prototype.getLss=function(a){return this.layoutSelectionStoreProvider.getLayoutSelectionStore(a)},a.prototype.getForNode=function(a){if(!a)return{};var b,c="node_"+a.id;return b=a.isPage&&a.isPage()?a.id:this.getLss().pageIdFromNode(a),this.getDataByKey(b,c)},a.prototype.getForSectionNode=function(a){return a=this.modelTree.findIdentifyingNode(a),this.getForNode(a)},a.prototype.getForNodeByType=function(a){var b=a.containerPageId,c=this.modelTree.getTypeForLSSWithoutPartition(a);return this.getDataByKey(b,c)},a.prototype.getDataByKey=function(a,b){var c=this.getLss(a),d=_.get(c.pages,[a,b]);return d||(d={},_.set(c.pages,[a,b],d)),d},a}();a.Selections=b,angular.module("siteGeneratorStaticsCoreAppInternal").service("selections",a.Selections)}(core||(core={})),angular.module("siteGeneratorStaticsCoreAppInternal").constant("PresetMediaType",{SHAPE:0,COAST2COAST:1,IMAGE:2,AGGREGATOR:3,COLUMNBG:4}).constant("SlideShowValues",{None:0,Allow:1,Only:2}).constant("MediaPreferences",{I:{label:"Image",type:"image",min:1},V:{label:"Video",type:"video",min:1},BV:{label:"Bg Video",type:"video",min:1},S:{label:"Shape/clipart",type:"shape",min:1},G:{label:"Gallery",type:"image",min:2}}).factory("layoutPresetHelperService",function(){return{convertNumericPriorityToMap:function(a){(!a.data.priority||_.isNumber(a.data.priority))&&(a.data.priority={}),_.each(a.data.forContent,function(b){a.data.priority[b]=a.data.priority[b]||0})},convertPresetProperties:function(a){a.data.properties||(a.data.properties={});var b=a.data.isList,c=b&&_.filter(a.data.groups,"isHeader").length>0,d=b&&_.filter(a.data.groups,"isFooter").length>0;a.data.properties.fieldMasks||(a.data.properties.fieldMasks={all:{}},b?(c&&(a.data.properties.fieldMasks.all.header=[[]]),a.data.properties.fieldMasks.all.items=[[]],d&&(a.data.properties.fieldMasks.all.footer=[[]])):a.data.properties.fieldMasks.all.single=[[]]),_.each(a.data.properties.fieldMasks,function(a){_.each(a,function(b,c){0===a[c].length&&(a[c]=[[]])})}),a.data.properties.mediaPreferences||(a.data.properties.mediaPreferences={all:{}},b?(c&&(a.data.properties.mediaPreferences.all.header=[]),a.data.properties.mediaPreferences.all.items=[],d&&(a.data.properties.mediaPreferences.all.footer=[])):a.data.properties.mediaPreferences.all.single=[])},getPresetArgsSignature:function(a){var b={};if(a.data.isList){var c=_.filter(a.data.groups,"isHeader");c.length>0&&(b.header=c[0].layouts[0].argList);var d=_.filter(a.data.groups,"isFooter");d.length>0&&(b.footer=d[0].layouts[0].argList);var e=_.filter(a.data.groups,function(a){return!a.isHeader&&!a.isFooter});b.items=e[0].layouts[0].argList}else b.single=a.data.groups[0].layouts[0].argList;return b},getPresetPropertyValue:function(a,b,c,d){var e=[];return a.data.properties&&(e=a.data.properties[b][c]||a.data.properties[b].all,e=e[d]),0===e.length&&"fieldMasks"===b&&(e=[this.getPresetArgsSignature(a)[d]]),e}}}),angular.module("siteGeneratorStaticsCoreAppInternal").factory("layoutSolver",["$log","obMonitoring","siteLayoutLoader","$p","modelTree","ContentElement","solutionStatusCodes","LayoutGroup","SitePartSolutions","Solution","layoutSelectionStoreProvider","storyServices","portfolioService","spinnerService","themeChooser","sitePartTypes","nodeFilterTypes","applicationParameters","defaultsService","layoutDecoration","flags","designKit","pagesManager","mediaOverride","BoxDecorationTypes",function(a,b,c,d,e,f,g,h,i,j,k,l,m,n,o,p,q,r,s,t,u,v,w,x,y){function z(a){return a?c.mobileHeaderLayoutGroup:c.headerLayoutGroup}function A(a,b){var c=a.forContent,d=-1!==e.getListNodes().indexOf(b)&&-1!==c.indexOf("AnyList"),f=-1!==e.getAvailableWidgetsTypes().indexOf(b)&&-1!==c.indexOf("AnyWidget"),g=-1!==e.getAvailableTpaTypes().indexOf(b)&&-1!==c.indexOf("AnyTpaSection");return Array.isArray(c)?-1!==c.indexOf(b)||d||f||g:c===b||d||f||g}function B(a,b){return _(a).take(b).map(function(a){return Array.isArray(a)?_.map(a,"node.id").join("|"):a.node.id}).join("_")}function C(a,b){var c=a.parent.id+"_"+b;return a.parent.asymmetric&&(c+="_asymmetric"),c}function D(){ya={},xa={}}function E(a,b,c){return!c.aggregator&&1===a&&b.layoutFilter===q.FULL||!c.aggregator&&a>1&&b.layoutFilter===q.PART||c&&c.aggregator&&b.layoutFilter===q.AGGREGATOR}function F(a,b){var d=B(a,b);if(!ya[d]){var f=!1,g=_.all(_.take(a,b),function(a){return Array.isArray(a)?(f=!0,_.every(a,function(a){var b;return b=a.ce.isSpecialListItem()?a.node.layoutFilter:e.findIdentifyingNode(a.node).layoutFilter,b===q.REPEATER})):a.node.layoutFilter===q.PART});if(f&&g){var h=a.slice(0,b),i=I(h);c.autoGeneratedGroups[i]||K(h,i),ya[d]=c.autoGeneratedGroups[i]}else"GeneralDescription"===a[0].type?ya[d]=1===b?[z(!u.consumerMode&&u.mobileEditor)]:[]:ya[d]=c.layoutGroups.filter(function(c){
return c.segments.length===b?c.segments.every(function(c,d){return A(c,a[d].type)&&E(b,a[d].node,a[d].ce)}):!1})}return ya[d]}function G(a){var b=(a-60)/80;return a>=220&&parseInt(b)===b}function H(a,b,d,e){for(var f="Auto",g=[],i=[],j=0;j<a.length;j++){var k=b[j],l=j*r.segmentsGap+_.sum(b.slice(0,j));if(Array.isArray(a[j])){var m=(k-(d-1)*r.segmentsGap)/d;if(!(a[j].length>=d&&G(m)))return;f=f+"|p"+d+a[j].length+k;for(var n=d,o=a[j].slice();n>0;){for(var p=Math.ceil(o.length/n),q=0;p>q;q++)g.push({forContent:r.defaultForContent,left:l,top:0,width:m});o.splice(0,p),l+=m+r.segmentsGap,i.push(p),n--}}else{if("ListFooter"===a[j].type)return;f=f+"|"+j+k,g.push({forContent:r.defaultForContent,left:l,top:0,width:k}),i.push(1)}}var s={id:f,name:f,targetWidth:940,targetHeight:940,sitePart:"body",segments:g,columnPartition:i};c.autoGeneratedGroups[e].push(new h(s))}function I(a){var b="";return angular.forEach(a,function(a){b+=Array.isArray(a)?"r"+a.length:"s"}),b}function J(a,b,c){var d=_.filter(a,function(a){return!Array.isArray(a)}),e=20*d.length,f=0;if(!(d.length>0&&(f=(r.fullWidth-b-e)/d.length,220>f))){var g=_.map(a,function(a){return Array.isArray(a)?b:f});if(f*d.length+b+e===r.fullWidth)for(var h=1;za>=h;h++)H(a,g,h,c)}}function K(a,b){c.autoGeneratedGroups[b]=[];var d=[];_.each(a,function(a){if(Array.isArray(a)){var b=-1;_.each(a,function(a){a.ce.isSpecialListItem()?d.push(a):-1===b?(d.push([a]),b=d.length-1):d[b].push(a)})}else d.push(a)}),angular.forEach(Aa,function(a){J(d,a,b)})}function L(a,b){var d=C(a,b);if(!xa[d]){var e=c.layoutGroups.filter(function(c){var d=c.segments.length;return b%d===0&&a.parent.asymmetric===c.asymmetric?c.segments.every(function(b){return A(b,a.type)&&E(d,a.parent,a.ce)}):!1});xa[d]=e.map(function(a){for(var c=[],d=0;d<b/a.segments.length;d++)c.push(a);return c})}return xa[d]}function M(a){return!!a.columnPartition}function N(a,b,c){var d,e,f;if(0===a.length)c(b);else{if(Array.isArray(a[0])&&1===_.uniq(_.pluck(a[0],"type")).length)for(e=L(a[0][0],a[0].length),e=_.groupBy(e,function(a){return a.length+(a[0]&&a[0].columnPartition?"p":"")}),e=_.map(e,_.unzip),f=0;f<e.length;f++)d=b.slice().concat(e[f]),N(a.slice(1),d,c);for(var g=1;g<=a.length;g++)e=F(a,g),e.length&&(e=_.groupBy(e,M),_.each(e,function(e){d=b.slice(),d.push(e),N(a.slice(g),d,c)}))}}function O(a){if(!c.layoutGroups||0===c.layoutGroups.length)return 0;var b=[];return D(),N(a,[],function(a){b.push(a)}),b}function P(){return l.story.selectedPage}function Q(){return Ca.createFooterSolutions().then(function(){if(l.story){var a=Ca.getAllSolutions(p.FOOTER),b=Ca.getSelectedSolutionIndex(p.FOOTER);if(a&&(!a[b]||a[b].status!==g.pass))return Ca.moveToNextValidSolution(p.FOOTER,void 0,!0)}})}function R(a,b){var c=P(),f=e.findPageNodeByName(c);return a!==!0&&f&&f.dirty===!1&&!f.parentPortfolioId?d.when().then(function(){if(u.consumerMode){var a=Ca.getPartSolutions(p.BODY,c);l.emitRenderedPart(p.BODY,a.getSelectedSolution(),a.getSolutionHeight(),c)}else l.emitLayoutSolutionChanged()}):(n.waitForMe("calculateCurrentPage"),k.getLayoutSelectionStore(c).deleteSegments(c),Ca.calculateCurrentPage().then(function(){if(l.story){var a=Ca.getAllSolutions(p.BODY,c),b=Ca.getSelectedSolutionIndex(p.BODY,c);if(a&&(!a[b]||a[b].status!==g.pass))return Ca.moveToNextValidSolution(p.BODY,c,!0)}}).then(function(){return Ca.withMissingSolutions?Ca.calculateMissingPageSolutions():void 0}).then(function(){return b?void 0:u.consumerMode?l.reRender():l.emitLayoutSolutionChanged()}).then(function(){n.imDone("calculateCurrentPage")}))}function S(a){var b=_.uniq(_.map(a,function(a){return a.getId()}));_.each(b,function(a){_.each(Ba,function(b){_.each(b,function(c,d){d.indexOf(a+"#")>-1&&b[d].setAsDirty(!0)})})})}function T(c,d,e,f){if(b.mark({name:"onNodeChanged"}),a.debug("Node changed - recalculating"),_.each(Ba,function(a){_.each(a,function(b,c){b&&b.hasAggregator()&&delete a[c]})}),"delete"===f||"userHidden"===f){var g=_.uniq(_.map(e,function(a){return a.getId()}));_.each(g,function(a){_.each(Ba,function(b){_.each(b,function(c,d){d.indexOf(a+"#")>-1&&delete b[d]})})})}if("reorderList"===f){var h=e[0].containerPageId,i=Ca.getSelectedSolutionIndex(p.BODY,h);Ca.keepSolutionIndex={},Ca.keepSolutionIndex[h]=i}m.validatePortfolio(d,e,f);var j=!0;return R(j,!0).then(function(){return Q()}).then(function(){return u.consumerMode?l.reRender():l.emitLayoutSolutionChanged()}).then(function(){b.measure({name:"onNodeChanged"})})}function U(a,b){var c=Ca.filters&&Ca.filters[b];c&&(a.filters=c.filters,a.lockedLgs=c.lockedLgs),Ca.keepSolutionIndex&&void 0!==Ca.keepSolutionIndex[b]&&(a.forceSelectedSolution=Ca.keepSolutionIndex[b],Ca.keepSolutionIndex=void 0)}function V(a,b,c){return a!==p.BODY?(!Ca.siteSolutions[a]&&c&&(Ca.siteSolutions[a]=new i(a===p.FOOTER?a:"",a)),u.consumerMode&&Ca.siteSolutions[a]&&(!Ca.siteSolutions[a].selectedSolution||Ca.siteSolutions[a].selectedSolution<0)&&(Ca.siteSolutions[a].selectedSolution=0),Ca.siteSolutions[a]):(b=b||"",!Ca.siteSolutions[a][b]&&c&&(Ca.siteSolutions[a][b]=new i(b,a),U(Ca.siteSolutions[a][b],b)),u.consumerMode&&Ca.siteSolutions[a]&&Ca.siteSolutions[a][b]&&(!Ca.siteSolutions[a][b].selectedSolution||Ca.siteSolutions[a][b].selectedSolution<0)&&(Ca.siteSolutions[a][b].selectedSolution=0),Ca.siteSolutions[a][b])}function W(){return Ca.siteSolutions.body}function X(a,b,c){for(var d=-1,e=[],f=0;f<a.length;f++){var g=a[f];if(-1!==b.indexOf(g.type))return c&&a.splice(f,1),g;if(-1!==b.indexOf(g.type+"List")){if(d>-1&&f-d>1)return e;c&&a.splice(f,1),e.push(g),d=f}}return e.length>0?e:void 0}function Y(a){for(var b=0;b<a.length;b++){var c=a[b][0];if(c.isLGrepeater()){if("ListHeader"===_.last(c.segments).contentElement.type||"ListFooter"===c.segments[0].contentElement.type)return!1;if(b>0&&"ListHeader"===_.last(a[b-1][0].segments).contentElement.type||b+1<a.length&&"ListFooter"===a[b+1][0].segments[0].contentElement.type)return!1}}return!0}function Z(b,c,d){u.consumerMode&&c.getPageDescriptor()!==p.FOOTER&&a.error("ERROR calculating solutions in consumer mode!!!!");for(var e=[],f=[],g=0;g<b.length;g++)if(Array.isArray(b[g]))for(var h=[],i=0;i<b[g].length;i++)f.push(b[g][i].node),e.push(b[g][i].ce),h.push(b[g][i].type);else f.push(b[g].node),e.push(b[g].ce);var j=O(b);_.each(j,function(a){var b=fa(a,e,f,c.getPage(),d,u.consumerMode&&c.getPageDescriptor()===p.FOOTER);Y(b)&&c.addSolution(b)})}function $(a){return a.parent&&"ListHeader"!==a.type&&"ListFooter"!==a.type?a.parent.layoutFilter:a.node.layoutFilter}function aa(a,b,c,d){for(var e,f=[],g=!1,h=b;!g&&h<a.length;h++)e=Array.isArray(a[h])?a[h][0]:a[h],e.parent===d&&$(e)===c?f.push(a[h]):g=!0;return f}function ba(a){for(var b,c,d,e=[],f=0;f<a.length;f++)b=Array.isArray(a[f])?a[f][0]:a[f],c=$(b),!b.parent||c!==q.AGGREGATOR&&c!==q.REPEATER?e.push(a[f]):(d=aa(a,f,c,b.parent),"a"===c?e.push(ha("ListHeader"===_.first(d).type,"ListFooter"===_.last(d).type,d)):"r"===c&&e.push(_.flatten(d)),f+=d.length-1);return e}function ca(a,b){a.setLgData(b)}function da(a,b){var c=!0,d=new h;angular.copy(z(b),d);for(var e=0;e<d.segments.length&&c;e++){var f=d.segments[e],g=X(a,f.forContent);if(!g){c=!1;break}var i=!1;if(Array.isArray(g)){i=!0;var j=g[0].type,k=a.indexOf(g[0])-1;"ListHeader"===a[k].type&&g.unshift(a[k]),f.contentElement={ceArray:g,type:"List"+j,aggregator:!0}}else f.contentElement=g;ia(i,f,g)}return c?(ca(d,a),[[d]]):void 0}function ea(a,b,c,d,e,f,g){var i=new h;return g&&(Ba[e]=Ba[e]||{},Ba[e][g]=i),angular.copy(a,i),i.segments.forEach(function(a){a.contentElement=c[b],a.node=d[b],b++}),i.setPage(e),ca(i,f),i}function fa(a,b,c,d,e,f){var g=0;return a=a.map(function(a){var h,i=g;return a.map(function(a){h||(h="",a.segments.forEach(function(a,b){h+=c[i+b].getId()+"#"}));var j=a.id+h;b[i].aggregator&&(j+=a.aggregatorUniqueId(b[i].ceArray)),g=i;var k=!f&&Ba[d]&&Ba[d][j];if(k)return k.copied=!0,g+=k.segments.length,k;var l=ea(a,g,b,c,d,e,j);return g+=l.segments.length,l})})}function ga(a,b){Ba[b]=_.reduce(a,function(a,b){return a[b.getUniqueIdForSolution()]=b,a},{})}function ha(a,b,c){var d=new f;d.ceArray=[],d.aggregator=!0;var e=0,g=[];return a&&(d.ceArray.push(c[0].ce),e=1,g.push(c[0].ce.type)),angular.forEach(c[e],function(a){d.ceArray.push(a.ce)}),c[e].ce&&g.push(c[e].ce.type),b&&(d.ceArray.push(c[e+1].ce),g.push(c[e+1].ce.type)),d.type="List"+c[e][0].type,d.aggregationKey=g.join("#"),{type:d.type,node:c[e][0].parent,ce:d}}function ia(a,b,c){if("GeneralDescription"!==b.contentElement.type){var d=a?c[0]:c;e.traverse(function(c,e){c.getContentElement()===d&&(b.node=a?e:c)})}}function ja(a,b,c,d){ka(a,b,c,d,"address for display","address for google map"),ka(a,b,c,d,"email","Contact form email")}function ka(a,b,c,d,e,f){b===e&&""===a.values[f].value&&d&&(a.values[f].value=a.values[b].value.split("<br/>").join(" "),Ca.handleValueChange(a,f,c,d))}function la(a,b){var c=!1;if(b.layoutFilter&&b.layoutFilter!==a.layoutFilter&&(u.mobileEditor&&b.layoutFilter===q.PART?a.layoutFilter=q.FULL:a.layoutFilter=b.layoutFilter,c=!0),a.isList()){var d=e.getListHeader(a);b.listHeaderLayoutFilter&&b.listHeaderLayoutFilter!==d.layoutFilter&&(d.layoutFilter=b.listHeaderLayoutFilter,c=!0);var f=e.getListFooter(a);b.listFooterLayoutFilter&&b.listFooterLayoutFilter!==f.layoutFilter&&(f.layoutFilter=b.listFooterLayoutFilter,c=!0),b.asymmetric!==a.asymmetric&&(a.asymmetric=b.asymmetric,c=!0)}return c}function ma(b,f,g){var h=[],j=[],k=[],l="SiteHeader"===f.forContent[0]?p.HEADER:p.BODY;if(la(b,f),b.isList()){var m=e.getListHeader(b),n=e.getListFooter(b),o=_.filter(e.getListItems(b),function(a){return!a.isUserHidden()});if(b.setZigZagState(o.length>1&&f.zigZagState,f.zigZagPattern),b.layoutFilter===q.AGGREGATOR){m.isUserHidden()||m.layoutFilter!==q.FULL||(h.push([c.layoutGroups.find(function(a){return a.id===_.first(f.groups).id})]),k.push(m),j.push(m.getContentElement()));var r=[],s=!1,v=!1;m.isUserHidden()||m.layoutFilter!==q.AGGREGATOR||(s=!0,r.push({type:m.getContentElementType(),ce:m.getContentElement(),node:m,parent:b})),r.push(_.map(o,function(a){return{type:a.getContentElementType(),ce:a.getContentElement(),node:a,parent:b}})),n.isUserHidden()||n.layoutFilter!==q.AGGREGATOR||(v=!0,r.push({type:n.getContentElementType(),ce:n.getContentElement(),node:n,parent:b}));var w=_.find(f.groups,function(a){return a.isAggregator});h.push([c.layoutGroups.find(function(a){return a.id===w.id})]),k.push(b),j.push(ha(s,v,r).ce),n.isUserHidden()||n.layoutFilter!==q.FULL||(h.push([c.layoutGroups.find(function(a){return a.id===_.last(f.groups).id})]),k.push(n),j.push(n.getContentElement()))}else{var x=0;_.each(b.children,function(a){if(!a.isUserHidden()){if("ListHeader"===a.getContentElementType())h.push([c.layoutGroups.find(function(a){return a.id===_.first(f.groups).id})]);else if("ListFooter"===a.getContentElementType())h.push([c.layoutGroups.find(function(a){return a.id===_.last(f.groups).id})]);else if(a.getContentElementType()===b.getContentElementType()){if(x%(f.itemsInRow||1)===0){var d=_.find(f.groups,function(a){return!a.isHeader&&!a.isFooter}).id;h.push([c.layoutGroups.find(function(a){return a.id===d})])}x++}k.push(a),j.push(a.getContentElement())}})}}else{var y=f.groups[0].id;"headerLayoutGroup"===y?h.push([z(f.isMobile)]):h.push([c.layoutGroups.find(function(a){return a.id===y})]),k.push(b),j.push(b.getContentElement())}var A=e.getAllVisibleContentElements(),B=new i(g,l);B.isPreview=!0;var C;return l===p.HEADER?(C=da(A,f.isMobile),C[0][0].setPage(g)):(_.each(j,function(a){a.extractCeFields(A),a.updatePrevCeFields()}),C=fa(h,j,k,g,A,!0),delete Ba[g]),Y(C)?(B.addSolution(C),B.sortSolutions(),B.selectedSolution=0,_.sequencePromises(B.getSelectedSolution(),function(a){return!u.consumerMode||a.isHeader()?a.setOptionalLayoutElements():void 0}).then(function(){return B.applyLayoutPreset(b,f,B.selectedSolution)}).then(function(a){return a?_.sequencePromises(B.getSelectedSolution(),function(a){return a.calculateLayoutGroupStatusForPresetPreview()}).then(function(){return va(B.getSelectedSolution())}).then(function(a){if(!a)return d.when(null);var b=B.getSelectedSolution();return _.each(b,function(a){_.each(a.segments,function(a){var b=a.getLE();_.each(b.layoutArray,function(a){"line"===a.type&&(a.widthAndLeftPosition=t.getLineWidthAndLeftPosition(b,a))})})}),b}):d.when(null)})["catch"](function(b){return a.error(b),d.when(null)})):d.when(null)}function na(a,b,c){var d=e.getListHeader(a);if(d.isUserHidden()){var f=_.find(c.groups,function(a){return a.isHeader});f&&b.updateFromPresetLgData(f,[d],c.isMobile)}var g=e.getListFooter(a);if(g.isUserHidden()){var h=_.find(c.groups,function(a){return a.isFooter});h&&b.updateFromPresetLgData(h,[g],c.isMobile)}}function oa(a){var b=_.filter(a,function(a){return a.isOnlyListItem()});return b}function pa(a,b){return _.find(a,function(a){return a.getLENoError().id!==b})}function qa(a,b){for(var c=0;c<b.length;c++){var e=b[c];if(e.length>1&&!ra(e))return d.when(!1)}return _.sequencePromises(a,function(a){return a.ensureHeightMatchesContent()}).then(function(){return!0})}function ra(a){var b=a[0].getLENoError(),c=b.cluster;if(pa(a,b.id)){var d=_.map(a,function(a){return _.pluck(_.filter(a.optionalLayoutElements,function(a){return a.cluster===c&&a.getSolutionStatus()===g.pass}),"id")}),e=_.intersection.apply(_,d);if(!(e.length>0))return _.each(a,function(a){a.containingLG.status=g.fail}),!1;var f=e[0];_.each(a,function(a){var b=_.findIndex(a.optionalLayoutElements,function(a){return a.id===f});a.containingLG.getLayoutSelectionStore().setLESelectionForSegment(a,b)})}return!0}function sa(a,b){return _.findIndex(a.boxTypes,function(a){return a===b})>=0}function ta(a,b){var c=_.find(a,function(a){return a.segments[0].node.isListItem});if(1===c.segments.length){var d=c.segments[0].getLENoError();if(19===d.cluster||21===d.cluster){var e=sa(d,y.LEFT)||sa(d,y.RIGHT);return b||e}}}function ua(a){var b=_.filter(a,function(a){return a.segments[0].node.isListItem}),c=_(b).map(function(a){return a.targetHeight}).max();return _.sequencePromises(b,function(a){return a.changeLayoutGroupHeight(c)})}function va(a){var b=oa(a);if(b.length>1){var c=_.groupBy(_.flatten(_.pluck(b,"segments")),function(a){return a.node.zigZag});return c=_.values(c),qa(b,c).then(function(a){return u.presetImprovementListItemsHeight&&a&&ta(b,c.length>1)?ua(b).then(function(){return!0}):a})}return d.when(!0)}var wa,xa={},ya={},za=3,Aa=[220,300,460,620,700],Ba={},Ca={siteSolutions:{body:{}},initialized:!1,bindFunctionForOverlayService:function(a){wa=a},describeAllSolutions:function(a,b){var c=V(a,b);return c?c.describeAllSolutions():void 0},getLgByNodeId:function(a,b,c){return _.find(Ca.getSelectedSolution(a,b),function(a){return _.find(a.segments,function(a){return a.node.id===c})})},getPartSolutions:V,getSelectedSolution:function(a,b){var c=V(a,b);return c&&a===p.HEADER&&0!==c.selectedSolution&&(c.selectedSolution=0),c?c.getSelectedSolution():void 0},getSelectedSolutionIndex:function(a,b){var c=V(a,b);return c?c.selectedSolution:void 0},moveToNextValidSolution:function(a,b,c){var e=V(a,b);return e?e.moveToValidSolution(c):d.when()},toggleLgLock:function(a,b){var c=V(p.BODY,a);return c?c.toggleLgLock(b):void 0},getLockedLgs:function(a){var b=V(p.BODY,a);return b?b.getLockedLgs():void 0},getValidSolutions:function(a,b,c){var d=V(a,b);return d?d.getFilteredSolutions(c,g.pass):[]},getFailedSolutions:function(a,b,c){var d=V(a,b);return d?d.getFilteredSolutions(c,g.fail):[]},countValidSolutions:function(a,b){return this.getValidSolutions(a,b).length},firstValidSolution:function(a,b){var c=V(a,b);return c?c.firstValidSolution():void 0},getAllCurrentPageSolutions:function(){return V(p.BODY,P(),!0)},getAllSolutions:function(a,b){var c=V(a,b);return c?c.solutions:void 0},moveToSolution:function(a,b,c){var d=V(a,b);return d?d.changeSolutionTo(c):void 0},createLayoutPresetPreviewSolutions:function(a,b,c,d,f){return _.sequencePromises(a,function(a){var g,h="layoutPresetPreview"+a.id+(d||""),i=k.cloneLayoutSelectionStoreForPresetPreview(h,b.containerPageId||"GeneralDescription"===b.contentElementType&&"header");c?(e.setContainerPageId(b,h),g=b):g=e.duplicateNodeForLayoutPresetPreview(b,h);var j=a.data;return f&&(j=ob.deepClone(j),x.setPreferredMediaInPresetData(j,f)),ma(g,j,h).then(function(c){return i.readyToDie=!0,c?(b.isList()&&na(g,i,j),{node:b,preset:a,solution:c,previewNode:g,lss:i,dummyPageId:h}):void 0})}).then(function(a){return _(a).filter().value()})},calculateFooter:function(){return Q()},createLayoutPresetSolution:function(a,b){return ma(b,a,b.containerPageId)},applyLayoutPreset:function(a,b,c,e,f){var g=la(c,e),h=c.isList()&&c.setZigZagState(e.zigZagState,e.zigZagPattern);h&&l.emitClearIdFromLgsMap(c),void 0!==e.pageStyle&&(c.pageStyle=e.pageStyle,a===p.HEADER&&w.changeHeaderStyle(c.pageStyle));var i=d.when();return(g||h||f)&&(i=i.then(function(){return T()})),i.then(function(){var a=c.isList()?c.children:[c];S(a)}).then(function(){var d=V(a,b);return d.applyLayoutPreset(c,e)}).then(function(){return Ca.calculateSolverStatus(void 0,void 0,!0)})},filters:{},clearPageSolution:function(a){this.siteSolutions.body&&this.siteSolutions.body[a]&&(this.filters[a]={},this.filters[a].filters=this.siteSolutions.body[a].filters,this.filters[a].lockedLgs=this.siteSolutions.body[a].lockedLgs,this.siteSolutions.body[a]=void 0)},createFooterSolutions:function(){var a=this;n.waitForMe(p.FOOTER);var b=V(p.FOOTER,null,!0),c=e.getAllVisibleContentElements();return b.clear(),e.traverseFooter(function(a,c){return a.hasContentElement()&&!a.isUserHidden()&&a.getContentElement().getNumOfNonBlankFields()>0&&b.addNodeData(a,c),a.isUserHidden()?-1:void 0}),this.createPageSolutions(b,c).then(function(a){return n.imDone(p.FOOTER),a}).then(function(){return a.onPageCalculatedCallback?a.onPageCalculatedCallback("footer"):void 0})},createHeaderSolutions:function(a){var b=da(a,!u.consumerMode&&u.mobileEditor);return b[0][0].calculateLayoutGroupStatus().then(function(){var a=V(p.HEADER,null,!0);a.addSolution(b),a.sortSolutions()})},createSectionByCopy:function(a,b,c){var d=_.map(b,function(a){return{id:a.id}}),f=e.getAllVisibleContentElements(),g=this.prepareSectionSolution(a,c,d,f),h=_.collect(g,function(a){return a[0]});return h},prepareSectionSolution:function(b,d,f,g){var h=[],i=[],j=[];if(d.isList())if(d.layoutFilter===q.AGGREGATOR){var k=e.getListHeader(d),l=e.getListFooter(d),m=_.filter(e.getListItems(d),function(a){return!a.isUserHidden()});k.isUserHidden()||k.layoutFilter!==q.FULL||(j.push(k),i.push(k.getContentElement()));var n=[],o=!1,p=!1;k.isUserHidden()||k.layoutFilter!==q.AGGREGATOR||(o=!0,n.push({type:k.getContentElementType(),ce:k.getContentElement(),node:k,parent:d})),n.push(_.map(m,function(a){return{type:a.getContentElementType(),ce:a.getContentElement(),node:a,parent:d}})),l.isUserHidden()||l.layoutFilter!==q.AGGREGATOR||(p=!0,n.push({type:l.getContentElementType(),ce:l.getContentElement(),node:l,parent:d})),j.push(d),i.push(ha(o,p,n).ce),l.isUserHidden()||l.layoutFilter!==q.FULL||(j.push(l),i.push(l.getContentElement()))}else _.each(d.children,function(a){a.isUserHidden()||(j.push(a),i.push(a.getContentElement()))});else j.push(d),i.push(d.getContentElement());var r=0;_.each(f,function(a){var b=_.find(c.layoutGroups,{id:a.id});b&&(r+=b.segments.length,h.push([b]))}),r!==j.length&&(a.debug("cannot create section solution due to segments count mismatch for page/node: "+b+"/"+d.id),h=_.map(j,function(a){var b=_.find(c.layoutGroups,function(b){return 1===b.segments.length&&b.segments[0].forContent.indexOf(a.getContentElementType())>=0});return[b]}));var s=fa(h,i,j,b,g,!0);return s},createSimplePageSolution:function(a,b){var c=this,d=[],f={},g=a.getPageDescriptor(),h=a.getLayoutSelectionStore().getSolutionLGs(g),i=e.getPageNodeById(g);_.each(i&&i.children,function(e){var g=h[e.id];if(g&&!e.userHidden){var i=c.prepareSectionSolution(a.getPage(),e,g,b);f[e.id]=_.map(i,function(a){return a[0]}),d=_(d).concat(i).value()}}),Y(d)&&(a.addSolution(d),a.sectionMap=f)},createPageSolutions:function(a,b){var c=ba(a.getNodesData());return u.consumerMode&&a.getPageDescriptor()!==p.FOOTER?this.createSimplePageSolution(a,b):Z(c,a,b),a.sortSolutions(),a.calculateSitePartStatus(b)},calculateAllPages:function(){var a=this,b=e.getPagesList();return _.sequencePromises(b,function(b){return e.getPageNodeById(b).hidePage?void 0:a.calculatePage(b)})},calculateCurrentPage:function(){var a=P();return this.calculatePage(a)},registerWithOnPageCalculatedCallback:function(a){this.onPageCalculatedCallback=a},calculatePage:function(b,c){n.waitForMe("calc");var f=this,g=e.getAllVisibleContentElements();a.debug("calculateCurrentPage: "+b),f.clearPageSolution(b);var h=V(p.BODY,b,!0);return e.traversePage(b,function(a,b){return"page"!==a.getNodeType()&&a.hasContentElement()&&!a.isUserHidden()&&a.getContentElement().getNumOfNonBlankFields()>0&&(a.getContentElement().clearPrevCeFields(),h.addNodeData(a,b)),a.isUserHidden()?-1:void 0}),this.duringCalc=d.when().then(function(){return!c&&e.isSiteHeaderVisible()?f.createHeaderSolutions(g).then(function(){return f.onPageCalculatedCallback?f.onPageCalculatedCallback("header"):void 0}):void 0}).then(function(){return f.createPageSolutions(h,g).then(function(){_.each(h.getSelectedSolution(),function(a){var b=a.getLgData(),c=b.columns;_.isEmpty(c)||a.setColumnsData(c),delete b.columns})}).then(function(){return f.onPageCalculatedCallback?f.onPageCalculatedCallback(b):void 0})}).then(function(){return n.imDone("calc"),f.duringCalc=!1,f.calcDone()}).then(function(){var a=e.findPageNodeByName(b);a&&(a.dirty=!1)}),this.duringCalc},toDoAfterCalc:[],doAfterCalc:function(a){this.toDoAfterCalc.push(a)},doOrDoAfterCalc:function(a){return this.duringCalc?(this.doAfterCalc(a),this.duringCalc):a()},calcDone:function(){var a=this;return _.sequencePromises(this.toDoAfterCalc,function(a){return a()}).then(function(){a.toDoAfterCalc.length=0})},calculateMissingPageSolutions:function(){return this.doOrDoAfterCalc(function(){n.waitForMe("missingPageSolutions");var a=P(),b=V(p.BODY,a,!0);return b.cleanCalcMissingSolutions().then(function(){n.imDone("missingPageSolutions")})})},onNodeChanged:T,handleValueChange:function(a,b,c,e,f){var g=this;return d.resolve().then(function(){if("reference"===b){var h=f&&a.getReferenceContentElements(f)[0];h&&g.setLgsOfContentElementDirty(h),g.setLgsOfContentElementDirty(a)}else{if(g.preHandleValueChange(a,b,c,e),!u.consumerMode&&a.empty&&a.getNumOfNonBlankFields()>0)return l.emitNodeChanged(),d.when();if(b&&(""===a.values[b].value||a.values[b].value&&""===a.values[b].value.callToAction)){if(!e)return d.when()}else if(e&&!c)return d.when()}return k.getLayoutSelectionStore(P()).markForRenderByContentElement(a),c&&(b=null),g.calculateSolverStatus(a,b,void 0,c)})},setLgsOfContentElementDirty:function(a,b){var c=this;"GeneralDescription"===a.type&&_.each(c.getSelectedSolution(p.HEADER),function(a){a.setAsDirty(!0)});var d=a.getDependencies();b&&(d=_(d).map(function(a){return e.isRegularListItem(a)?e.getListItems(e.findIdentifyingNode(a)):a}).flatten().uniq().value()),_.each(d,function(a){P()!==a.containerPageId&&e.markPageNodeAsDirty(a)}),S(d)},preHandleValueChange:function(a,b,c,d){var f=this;e.isReferenceField(a.type,b)&&_.each(e.getAllVisibleContentElements(),function(a){("GeneralDescription"===a.type||"Contact"===a.type)&&f.setLgsOfContentElementDirty(a)}),f.setLgsOfContentElementDirty(a,c),_.each(a.getDependencies(),function(a){wa&&("GeneralDescription"===a.contentElementType||a.containerPageId&&a.containerPageId===l.story.selectedPage&&!a.isUserHidden())&&wa(a)}),ja(a,b,c,d)},handleMaskChange:function(a,b){return this.preHandleValueChange(a,b,!0,!1),k.getLayoutSelectionStore(P()).markForRenderByContentElement(a),this.calculateSolverStatus(a,null,void 0,!0)},calculateSolverStatus:function(a,b,c,f){var g,h=this,j=e.getAllVisibleContentElements();return _.sequencePromises(this.siteSolutions,function(c){return c instanceof i?c.calculateSitePartStatus(j,a,b,!0):_.sequencePromises(c,function(c,d){return P()===d?c.calculateSitePartStatus(j,a,b,!0):void(u.consumerMode||e.markPageAsDirty(d))}).then(_.any)}).then(function(a){return g=a,h.withMissingSolutions?h.calculateMissingPageSolutions():void 0}).then(function(){return u.consumerMode||(c||_.any(g)||a&&"GeneralDescription"===a.type?l.emitLayoutSolutionChanged():l.emitDataChanged({lockRenderer:f})),d.when()})},removePage:function(a){delete W()[a]},setConsumerMode:function(){this.initializeImplementation()},initializeImplementation:function(){this.initialized||(this.initialized=!0,l.onFooterNodeChanged(function(){a.debug("Node changed in footer - recalculating"),Q().then(function(){l.emitLayoutSolutionChanged(p.FOOTER)})}),l.onNodeChanged(T),l.onNodeOverridesChanged(_.debounce(function(a,b){S(b),Ca.calculateSolverStatus()},400,{leading:!1,trailing:!0})),l.onNodeChangedClearCache(function(){Ba={},T()}),l.onNodeChangedClearCacheSynchronous=function(){return Ba={},T()},l.onClearIdFromLgsMap(function(a,b){var c=b.id,d=Ba[b.containerPageId];_.each(d,function(a,b){-1!==b.indexOf(c)&&delete d[b]})}),l.onLocaleChanged(function(){R()}),l.onReferenceFieldChanged(function(a,b){Ca.handleValueChange(b.getContentElement(),"reference",!0,!1)}),l.onValueChanged(_.debounce(function(b,c,d,e,f){a.debug("Value changed - handleValueChange"),Ca.handleValueChange(c,d,e,f)},400,{leading:!1,trailing:!0})),l.onBlurChanged(function(a,b,c,d){Ca.handleValueChange(b,c,d,!0)}),l.onFontOverridesChanged(function(){a.debug("Font changed - onFontOverridesChanged"),Ca.calculateSolverStatus()}),l.onVerticalChanged(function(){R()}),l.onChangingPage(function(){R()}),l.recalculateCurrentPage=function(){return R()},l.onPageDeleted(function(a,b){this.removePage(b)}.bind(this)))},initialize:function(){return this.promise?this.promise:(this.initializeImplementation(),this.promise=d.when(),this.promise)},prepareSolution:fa,prepareLg:ea,updateLgsMapFromSolution:ga,listPostProcessing:va,debugStretchAndRecalc:function(){return Ba={},R(!0).then(function(){var a=V(p.BODY,P(),!0);return _.sequencePromises(a.solutions,function(a){return _.sequencePromises(a.solution,function(a){return a.changeHeightToSpecificIndex(80).then(function(){return _.sequencePromises(a.segments,function(a){return _.sequencePromises(a.optionalLayoutElements,function(b){return b.calculateLayoutElementStatus(a.contentElement)})})})})})})},serialize:function(){return this.lastSaved=Date.now(),JSON.stringify({siteSolutions:this.siteSolutions,selectedSolution:this.selectedSolution,initialized:this.initialized,timestamp:this.lastSaved})},deserialize:function(a){var b=JSON.parse(a);this.siteSolutions=b.siteSolutions,this.selectedSolution=b.selectedSolution,this.initialized=b.initialized}};return v.registerWithLayoutSolver(Ca),Ca}]);var Clusters=function(){function a(a){this.flags=a;var b=["No cluster","1 1 M","1 1/2","2 1/2","3 1/2","1 1/2 M","2 1/2 M","3 1/2 M","1 2/2","2 2/2","3 2/2","1 2/2 M","2 2/2 M","3 2/2 M","1 2/3","2 2/3","3 2/3","1 2/3 M","2 2/3 M","1/2 1","1/3 1","2/2 1","3/3 1","1/2 2/2","2/2 2/2","3/3 2/2","1/2 1/2","1/3 1/2","2/2 1/2","3/3 1/2","1/2 2/3","1/3 2/3","2/2 2/3","3/3 2/3","1/2 1 M","1/3 1 M","2/2 1 M","3/3 1 M","1/2 2/2 M","1/3 2/2 M","1/2 1/2 M","1/3 1/2 M","2/2 2/2 M","2/2 1/2 M","3/3 1/2 M","2/3 1","2/3 1/2","2/3 2/2","0/1","0/2","0/3"];this.expandedClusters=_(b).map(function(a,b){var c=a.split(" "),d=!!c[2];if(c[1]&&"cluster"!==c[1]){var e=_.last(c[0]),f=_.last(c[1]),g=c[1].indexOf("/")>-1?_.first(c[1])-1:0,h=c[1].indexOf("/")>-1?1:c[1],i=c[0].indexOf("/")>-1?_.first(c[0])-1:0,j=c[0].indexOf("/")>-1?1:c[0],k=new Array(+f);return _.each(k,function(a,b){var c=new Array(+e);_.fill(c,"T"),(g===b||b>g&&h>1)&&(1===j?c[i]="M":_.fill(c,"M")),k[b]=c}),[{arr:k,hasMedia:!0,onMediaSolution:d,id:b,desc:a}]}}).flatten().filter().value()}return a.$inject=["flags"],a.prototype.compact=function(a){var b,c=[];_.each(a,function(a,d){_.indexOf(a,"M")>-1?(b===!0&&c.push(d),b=!0):(b===!1&&c.push(d),b=!1)});var d=a.slice();return c.unshift(d),_.pullAt.apply(_,c),d},a.prototype.reverseLookup=function(a,b){return this.clusterFromSolution(a,!0,b)},a.prototype.reducedClusterArray=function(a,b){return a&&a.length?_.reduce(b,function(a,b){var c=ob.deepClone(a);_.each(c,function(a,d){_.each(a,function(a,e){a===b&&(c[d][e]="")})}),c=_.filter(c,function(a){return a.join("").length>0}),c=_.unzip(_.filter(_.unzip(c),function(a){return a.join("").length>0}));var d,e,f,g=function(a,b,f,g){if(""===c[a][b]){var h=a+g,i=b+f;if(c[h]&&"undefined"!=typeof c[h][i]&&""!==c[h][i]&&(d=c[h][i],e=_.filter(f?_.unzip(c)[i]:c[h],function(a){return a===d}).length,1===e))return c[a][b]=d,!0}};return _.each(c,function(a,b){_.each(a,function(a,c){f=g(b,c,1,0)||g(b,c,-1,0)||g(b,c,0,1)||g(b,c,0,-1)})}),c=_.collect(_.unique(_.collect(c,function(a){return a.join("-")})),function(a){return a.split("-")}),c=_.unzip(c),c=_.collect(_.unique(_.collect(c,function(a){return a.join("-")})),function(a){return a.split("-")}),c=_.unzip(c)},a):a},a.prototype.replaceMediaWithOnMediaStructure=function(a,b){if(!a||!a.length)return a;var c=_.flatten(b),d=[],e=0,f=-1;if(_.each(a,function(a,b){var g;d.push(_.map(a,function(a){return"m"===a?(f=b,g||(g=c[e]||_.last(c),e++),g):a}))}),f>-1&&e<c.length){var g=f+1;_.times(c.length-e,function(){d.splice(g,0,_.map(a[f],function(a){return"m"===a?c[e]:a})),g++,e++})}return d},a.prototype.addArgsToStructure=function(a,b){a=ob.deepClone(a);var c=a[0].length,d=_.indexOf(b,"m"),e={b:0,lt:1,s:2,t:3,m:4};if(d>-1){var f=new Array(c);_.fill(f,"m"),a.splice(0,0,f),b.splice(d,1)}if(!b.length)return a;var g=-1,h=_.find(a,function(a){return _.any(a,function(a){return"m"===a})});return h&&(g="m"===_.last(h)?_.findLastIndex(h,function(a){return"m"!==a}):_.findIndex(h,function(a){return"m"!==a})),_.each(b,function(b){var c=_.findLastIndex(a,function(a){var c=g>-1?e[a[g]]:_(a).map(function(a){return e[a]}).max();return e[b]<c}),d=_.map(a[c]||a[0],function(a,c){return-1===g||c===g?b:a});a.splice(c+1,0,d)}),a},a.prototype.calculateFallBackClusterAndStructure=function(a,b,c,d){var e=!_.isEmpty(b)&&(_.isEmpty(a)||_.eq(a,[["m"]]));d&&d.length&&(this.flags.sectionBackground&&e?(b=this.addArgsToStructure(b,_.without(d,"m")),d.indexOf("m")>-1&&(a=[["m"]])):a=this.addArgsToStructure(a,d));var f=_.any(c,function(a){return"m"===a}),g=this.reducedClusterArray(b,c);f&&!_.isEmpty(g)&&(a=this.replaceMediaWithOnMediaStructure(a,g));var h=this.reducedClusterArray(a,c);if(this.flags.sectionBackground||0!==h.length){var i=_.any(h,function(a){return _.any(a,function(a){return"m"===a})});if(!i)return this.flags.sectionBackground&&e?{cluster:1,structure:[],onMediaStructure:f?h:g}:{cluster:this.noMediaClusterId(h[0].length),structure:h,onMediaStructure:[]};var j=_.collect(h,function(a){return _.collect(a,function(a){return"m"===a?"M":"T"})}),k=this.reverseLookup(this.compact(j),!!g&&!!g.length);if(k)return{cluster:k.id,structure:h,onMediaStructure:g}}},a.prototype.rowsMatch=function(a,b){return a.length===b.length&&_.isMatch(a,b,function(a,b){return a&&b&&("M"!==a&&"M"!==b||"M"===a&&"M"===b)})},a.prototype.clusterFromSolution=function(a,b,c){var d=this;return _.find(this.expandedClusters,function(e){return e&&e.hasMedia===b&&e.onMediaSolution===c&&_.isMatch(e.arr,a,d.rowsMatch)})},a.prototype.noMediaClusterId=function(a){return this.expandedClusters.length+a+1},a.prototype.calcCluster=function(a,b){var c=ob.deepClone(a);_.each(c,function(a){_.each(a,function(b,c){"media"===b&&(a[c]="M")})}),c=this.compact(c);var d=!!b.media,e=!!a.onMediaSolution,f=this.clusterFromSolution(c,d,e);if(f)return f.id;if(!d){var g=a[0].length;return this.noMediaClusterId(g)}return c=_.unzip(this.compact(_.unzip(c))),(f=this.clusterFromSolution(c,d,e))?f.id:0},a}();angular.module("siteGeneratorStaticsCoreAppInternal").service("clusters",Clusters),angular.module("siteGeneratorStaticsCoreAppInternal").constant("GraphEdges",{LEFT:0,TOP:1,RIGHT:2,BOTTOM:3}).factory("LayoutGraph",["GraphEdges",function(a){var b=function(b,c){
this.id=c,this.layout=b,this.neighbours=[[],[],[],[]],this.addNeighbours=function(b,c){var d=this;return _.isEqual(c,d.neighbours[b])?!1:(angular.forEach(c,function(c){d.neighbours[b].push(c),c.neighbours[b===a.BOTTOM?a.TOP:a.LEFT].push(d)}),!0)},this.getAboveEements=function(){return this.neighbours[a.TOP]},this.removeFromNeighbours=function(){angular.forEach(this.neighbours,function(b,c){angular.forEach(b,function(b){var d;switch(c){case a.LEFT:d=a.RIGHT;break;case a.TOP:d=a.BOTTOM;break;case a.RIGHT:d=a.LEFT;break;case a.BOTTOM:d=a.TOP}b.neighbours[d].splice(b.neighbours[d].indexOf(b),1)})})}},c=function(c,d){function e(a){return a.top+a.height}function f(a){return a.left+a.width}function g(a,b){return!(f(a)<b.left||a.left>f(b))}function h(a,b){return!(a.top>e(b)||e(a)<b.top)}function i(a,b,c){for(var d=e(a.layout),f=0;f<c.length;f++){var h=c[f];if(h!==b&&h!==a.layout){var i=e(h);if(h.top>d&&i<b.top&&g(h,b))return!1;if(!g(a.layout,h)&&g(b,h)&&h.top<=a.layout.top&&i<b.top&&i>d+20)return!1}}return!0}this.le=c,this.findRightNeighbours=function(a){var b=this,c=_.min(_.pluck(_.filter(this.le.layoutArray,function(b){return b.left>f(a.layout)&&h(b,a.layout)}),"left")),d=[];return c-f(a.layout)<140&&(d=_.map(_.filter(this.le.layoutArray,function(b){return b.left===c&&h(b,a.layout)}),function(a){return b.nodesArray[b.le.layoutArray.indexOf(a)]})),d},this.findBottomNeighbours=function(a){var b=this,f=_.filter(this.le.layoutArray,function(c){return c.top>a.layout.top&&g(a.layout,c)&&c.top-e(a.layout)<=125&&i(a,c,b.le.layoutArray)?!0:!1});angular.forEach(d,function(a){if(1===a.ruleType){var b=_.map(a.arguments,function(a){return _.findIndex(c.argList,a)}),d=_.filter(c.layoutArray,function(a){return void 0!==a.argIndex&&b.indexOf(a.argIndex)>-1});_.intersection(d,f).length>0&&(f=_.union(f,d))}});var h=_.map(f,function(a){return b.nodesArray[b.le.layoutArray.indexOf(a)]});return h},this.calcGraphConnectivity=function(b){var c=this,d=this.findRightNeighbours(b);b.addNeighbours(a.RIGHT,d)&&angular.forEach(d,function(a){c.calcGraphConnectivity(a)});var e=this.findBottomNeighbours(b);b.addNeighbours(a.BOTTOM,e)&&angular.forEach(e,function(a){c.calcGraphConnectivity(a)})},this.init=function(){var a=this;this.le.initSmartLayoutRules(!0),this.le.hangBottomOnTop(),this.nodesArray=[],angular.forEach(c.layoutArray,function(c,d){a.nodesArray.push(new b(c,d))}),angular.forEach(this.nodesArray,function(b){a.calcGraphConnectivity(b)})},this.pushLeft=function(b,c,d,e){var f=this,g=!1;b.layout.left-=c,angular.forEach(b.neighbours[a.RIGHT],function(b){1===b.neighbours[a.LEFT].length&&(g=!0,f.pushLeft(b,c,d,e))}),g||e.push(b),d.push(b)},this.pushTop=function(b,c,d){var e=this;b.layout.top-=c,d.push(b),angular.forEach(b.neighbours[a.BOTTOM],function(b){var f=_.every(b.neighbours[a.TOP],function(a){return d.indexOf(a)>-1});f&&e.pushTop(b,c,d)})},this.calcValueForLeftPush=function(a,b){var c=b.layout.left-a.layout.left,d=_.filter(this.le.layoutArray,function(c){return a.layout!==c&&h(c,b.layout)&&f(c)<b.layout.left?!0:!1});if(d.length>0){var e=Math.max.apply(Math,_.map(d,f));if(e>b.layout.left-c){var g=b.layout.left-f(a.layout);return b.layout.left-(e+g)}}return c},this.calcValueForTopPush=function(a,b){var c=b.layout.top-a.layout.top,d=_.filter(this.le.layoutArray,function(c){return a.layout!==c&&g(c,b.layout)&&e(c)<b.layout.top?!0:!1});if(d.length>0){var f=Math.max.apply(Math,_.map(d,e));if(f>b.layout.top-c){var h=b.layout.top-e(a.layout);return b.layout.top-(f+h)}}return c},this.removeNode=function(b){var c=this,d=!1,e=[];if(b.removeFromNeighbours(),b.neighbours[a.RIGHT].length>0){var f=[],g=[];angular.forEach(b.neighbours[a.RIGHT],function(e){0===e.neighbours[a.LEFT].length&&(d=!0,c.pushLeft(e,c.calcValueForLeftPush(b,e),g,f))}),angular.forEach(f,function(d){angular.forEach(d.neighbours[a.BOTTOM],function(f){-1===g.indexOf(f)&&1===f.neighbours[a.TOP].length&&f.layout.left>d.layout.left+d.layout.width&&c.pushTop(f,c.calcValueForTopPush(b,f),e)})})}b.neighbours[a.BOTTOM].length>0&&!d&&angular.forEach(b.neighbours[a.BOTTOM],function(d){0===d.neighbours[a.TOP].length&&c.pushTop(d,c.calcValueForTopPush(b,d),e)}),this.init()},this.init()};return c}]).factory("ContactGenerator",["applicationParameters","LayoutGraph","fieldSignature","generatorHelper","LayoutUtils","clusters",function(a,b,c,d,e,f){function g(a){var b=_.map(a.layout,function(a){return a.top+a.height});return Math.max.apply(Math,b)}function h(a,b){var c=a;a.recurseLayouts(function(a,d){a.argIndex&&a.argIndex>b.argIndex&&a.argIndex--,a===b&&d&&(c=d)}),c.layout.splice(c.layout.indexOf(b),1),a.argList.splice(b.argIndex,1)}function i(b,c,d,e){angular.forEach(c,function(c){var f=_.filter(b,function(a){return a.indexOf(c.argIndex)>-1}),g=b.indexOf(f[f.length-1]),h=c.top+c.height-d[g];if(h>0){var i=a.quarterBaseLine;h=Math.floor(h/i)*i,c.height-=h,c.mediaMinHeight=c.height,g<b.length-1&&angular.forEach(e,function(a){a.rowIndex>g&&(a.top-=h)})}})}function j(a,b){return"media"===a?"media"===b.media.type?"image":b.media.type:"label"===a.split("#")[0]?"label":a}function k(a,b,c){var d=a[0].length,e=[].concat.apply([],a),f={index:e.indexOf("media")};return f.index>-1&&(f.rowIndex=Math.floor(f.index/d),f.colIndex=f.index-f.rowIndex*d,b&&(f.spanX=b[f.index].x,f.spanY=b[f.index].y),f.media=c),f}function l(a,b){var c=null;return 1===b.length?c=b[0]:b.length>1&&(c=a.smartLayoutRulesNodesMap.image[0].top.component.width<a.smartLayoutRulesNodesMap.map[0].top.component.width?a.smartLayoutRulesNodesMap.map[0].top.component:a.smartLayoutRulesNodesMap.image[0].top.component),c}function m(a,b){return b.isReference?-1===a.indexOf(b.element+"."+b.field):"label"===b.subType?!1:c[b.subType]?-1===a.indexOf(c[b.subType]):!0}function n(a,b){return _.filter(b,function(b){return _.findIndex(a.arguments,b)>-1})}function o(a,b,c){if(a.contactRules)for(var d=0;d<a.contactRules.length;d++){var e=a.contactRules[d];if(0===e.ruleType){var f=n(e,b),g=e.arguments.length-f.length;if(g>0&&e.minArgs>g)return!1}else 1===e.ruleType&&c.push(e)}return!0}function p(a){var b=a[0].length;return _.filter(a,function(a){return a.length===b})}function q(b){return _.collect(b.structure,function(c){return _.collect(c,function(c){var d=b.argList[c];if("label"!==d.subType)return b.getArgSignature(d)+a.getGridUnits(b.getLayoutWithArgIndex(c).width)}).join(",")}).join("#")}var r=["fax","email","phoneNumber","address"];return{remove:function(a,b,c){var d,e=b.layoutArray.indexOf(c),f=a.nodesArray[e];if(r.indexOf(b.argList[c.argIndex].subType)>-1){var g=f.getAboveEements();1===g.length&&"label"===b.argList[g[0].layout.argIndex].subType&&(d=g[0].layout)}if(h(b,c),a.removeNode(f),d){var i=b.layoutArray.indexOf(d);h(b,d),a.removeNode(a.nodesArray[i])}},createStructure:function(a,b){var c=[];a.calculateAbsoluteLocations();var d,e=_.filter(a.layoutArray,function(a){return a.argIndex>-1}),f=_.sortByAll(e,"absoluteTop",_.property("absoluteLeft")),g=0,h=[],j=5;angular.forEach(f,function(a){d&&(d.absoluteTop-j<a.absoluteTop&&a.absoluteTop<d.absoluteTop+j||g++),d=a,a.rowIndex=g,h[g]?h[g]=Math.min(a.absoluteTop+a.height,h[g]):h[g]=a.absoluteTop+a.height});var k,l=[];angular.forEach(f,function(a){var b=a.absoluteTop+a.height,c=a.rowIndex;for(k=a.rowIndex;k<h.length;k++){var d=k+1===h.length;if(d)c=k;else{if(h[k]-j<b&&b+j<h[k+1]){c=k;break}b<h[k]&&(c=k-1)}}for(k=a.rowIndex;c>=k;k++)l[k]||(l[k]=[]),l[k].push(a)});var m=_.max(_.pluck(l,"length")),n=[],o=_.filter(l,function(a){return a.length===m}),q=_.filter(l,function(a){return 1===a.length});angular.forEach(q,function(a){angular.forEach(a,function(a){n[a.argIndex]=m})}),angular.forEach(o,function(a){angular.forEach(a,function(a){n[a.argIndex]=1})}),angular.forEach(l,function(b,d){var e=0;b=_.sortBy(b,"absoluteLeft"),angular.forEach(b,function(f,g){var h;if(n[f.argIndex]>-1)h=n[f.argIndex];else{var i=f.width;b[e+1]&&(i=b[e+1].absoluteLeft-f.absoluteLeft),h=Math.round(i/a.width*m),h>1&&m-e-h<b.length-1-g&&h--,b.indexOf(f)===b.length-1&&(h=m-e)}for(var j=0;h>j;j++)c[d]||(c[d]=[]),c[d][j+e]=f.argIndex;e+=h})}),i(c,b,h,e),a.structure=p(c),a.boxesStructure=[[],[],[],[],[],a.structure],angular.forEach(a.structure,function(b,c){angular.forEach(b,function(b){var d=a.getLayoutWithArgIndex(b);d.colIndex=a.structure[c].indexOf(d.argIndex),d.rowIndex=c})})},calcSmartRules:function(a,b,c,e,f){var g=b[0].length,h=b.length;b.forEach(function(f,i){for(var k=(i+1)%2===0,l=k?g-1:0,m=f[l];"media"===m&&l>=0&&g>l;)l++,m=f[l];for(var n,o,p=i*g+l,q=l;l>=0&&g>l;){do{if(q=k?q-1:q+1,0>q||q>=g){o=null;break}o=f[q],n=i*g+q}while(0===c[n].x||"media"===o||o===m);if(!o)break;var r={parentType:j(m,e),childType:j(o,e),parentComponent:e[m],childComponent:e[o]};i>0&&0!==c[p].y&&0!==c[n].y&&(r.parentFacet="top",r.childFacet="top",a.addRule(r)),h-1>i&&d.isBottomEdge(f,i,l,b)&&d.isBottomEdge(f,i,q,b)&&(r.parentFacet="bottom",r.childFacet="bottom",a.addRule(r)),m=o,l=q,p=n}if(h>i+1)for(var s=k?0:g-1;s>=0&&g>s;){if("media"!==f[s]&&f[s]!==b[i+1][s]){for(var t=0;g>t;t++)p=(i+1)*g+t,0!==c[p].x&&0!==c[p].y&&a.addRule({parentType:j(f[s],e),parentFacet:"bottom",childType:j(b[i+1][t],e),childFacet:"top",parentComponent:e[f[s]],childComponent:e[b[i+1][t]]});break}s=k?s+1:s-1}});var i=k(b,c,f);if(i.index>-1){e.media.mediaMinHeight=e.media.height;var l=i.rowIndex+i.spanY-1;if(l!==h-1){var m=(l+1)%2===0,n=m?i.colIndex:i.colIndex+i.spanX-1,o=b[l+1][n];a.addRule({parentType:j("media",e),parentFacet:"bottom",parentComponent:e.media,childType:j(o,e),childFacet:"top",childComponent:e[o]})}a.addRule({parentType:"LayoutElement",parentFacet:"bottom",childType:j("media",e),childFacet:"bottom",parentComponent:a.smartLayoutRulesNodesMap.LayoutElement[0].bottom.component,childComponent:e.media})}return i},createSmartRules:function(b,c,e){b.height=g(b);var f=d.createSmartRules(b,e.solution,e.spanHints,e.tempMap),h=(b.height-a.minHeight)/a.gridStep;parseInt(h)!==h&&b.mutateByStretching((Math.floor(h)+1)*a.gridStep+a.minHeight),f&&f.index>-1&&d.prepareBoxesStructure(b,f)},calculateCluster:function(a,b){var c=_.get(b,["tempMap","media","type"]);"map"===c&&(b.tempMap.map=b.tempMap.media,delete b.tempMap.media,_.each(b.solution,function(a){_.each(a,function(b,c){"media"===b&&(a[c]="map")})})),a.cluster=f.calcCluster(b.solution,b.tempMap),a.templateId=a.storageId},calcSolutionAndTempMap:function(a,b){var c={tempMap:{},spanHints:[]},d={},e=a.structure[0].length;return c.solution=_.collect(a.structure,function(f,g){return _.collect(f,function(f,h){var i=g*e+h;c.spanHints[i]=c.spanHints[i]||{x:1,y:1},void 0===d[f]?d[f]={colIndex:h,rowIndex:g,hintIndex:i}:(g===d[f].rowIndex&&(c.spanHints[i].x=0,c.spanHints[d[f].hintIndex].x++),h===d[f].colIndex&&(c.spanHints[i].y=0,c.spanHints[d[f].hintIndex].y++));var j=a.argList[f],k=a.smartLayoutRulesNodesMap[j.subType],l=_.find(k,function(a){return a.bottom.component.argIndex===f}).bottom.component,m=b===l?"media":j.subType;return"label"===m&&(m+="#"+j.value),c.tempMap[m]||(c.tempMap[m]=l),m})}),c},createContactLayouts:function(a,c){if(""===c)return[];var d=this,f=[],g=c.split("#");return angular.forEach(a,function(a){var h=a.smartClone();h.argList=_.clone(a.argList);var i=[],j=[],k=_.sortByAll(h.layoutArray,"top","left");angular.forEach(k,function(a){if(void 0!==a.argIndex){var b=h.argList[a.argIndex];m(g,b)&&(j.push(b),i.push(a))}});var n=[];if(o(a,j,n)){var p=new b(h,n);if(angular.forEach(i,function(a){d.remove(p,h,a)}),h.calcArgsSignature(),c===h.getArgsSignature()){var r=e.getMediaElements(h);if(d.createStructure(h,r),h.id+="_"+q(h),h.family=h.id,h.getCleanLE(h.id))f[f.length]=h.getCleanLE(h.id);else{var s=f.length,t=l(h,r),u=d.calcSolutionAndTempMap(h,t);d.createSmartRules(h,t,u),d.calculateCluster(h,u),h.spanHints=d.calcSolutionAndTempMap(h,t).spanHints,f[s]=h}}}}),f}}}]).factory("LayoutUtils",["fieldSignature","applicationParameters",function(a,b){return{getMediaGridWidthFromSignature:function(b){var c=this.getArgumentGridWidthFromSignature(a.media,b);return c||(c=this.getArgumentGridWidthFromSignature(a.map,b)),c||(c=this.getArgumentGridWidthFromSignature("shape",b)&&1),c},getArgumentGridWidthFromSignature:function(a,b){var c=new RegExp(a+"(\\d*)"),d=b?b.match(c):void 0;return d&&d[1]?+d[1]:void 0},isButtonInContainerFromSignature:function(a){return a&&a.indexOf("b")>-1&&a.indexOf("c")>-1},getLayoutDataFromPreset:function(a,c){if(a.isHeader)return{templateId:a.templateId,structureSuffix:a.structureSuffix};var d=this.getMediaGridWidthFromSignature(a.leId.split("_")[1]);return{cluster:a.cluster,templateId:a.templateId,argsSignature:a.argsSignature,structure:this.transformStructureToStringArray(a,a.structure),onMediaStructure:this.transformStructureToStringArray(a,a.onMediaStructure),mediaGridWidth:d&&12*d/b.getGridUnits(c),isButtonInContainer:this.isButtonInContainerFromSignature(a.leId.split("_")[1])||!1}},_structureArrayToString:function(b,c){return b.map(function(b){return b.map(function(b){return a[c.argList[b].subType]}).join("-")}).join(" ")},transformStructureToStringArray:function(a,b){return _.collect(b,function(b){return _.collect(b,function(b){return a.argList[b]})})},getStructureAsString:function(a){var b=this._structureArrayToString(a.structure,a);return a.onMediaStructure&&(b+="#"+this._structureArrayToString(a.onMediaStructure,a)),b},getOverallWidth:function(a){var b=Math.min.apply(null,a.layout.map(function(a){return a.left})),c=Math.max.apply(null,a.layout.map(function(a){return a.left+a.width}));return c-b},getAverageLeftPos:function(a){var b=a.structure.map(_.first),c=b.map(function(b){return a.layout[b].left});return _.sum(c)/c.length},getMediaElements:function(a){var b=[];return a.recurseLayouts(function(c){a.isMediaType(c)&&b.push(c)}),b}}}]),angular.module("siteGeneratorStaticsCoreAppInternal").factory("generatorHelper",["BoxDecorationTypes","applicationParameters",function(a,b){function c(a,b,c,d,e,f){for(var g=[],h=e+b[c].y,i=e;h>i;i++)1===f?g.push(a[i].slice(d+1)):g.push(a[i].slice(0,d));return g}function d(a,b,c){var d=_.unzip(a);angular.forEach(d,function(a){var d=_.uniq(a);if(1===d.length){var e=b[d[0]];c-e.top>e.height&&(e.height=c-e.top)}})}function e(a,b,c){var d=a[0].length,e=[].concat.apply([],a),f=e.indexOf(b),g={index:f,flattedSolution:e};return f>-1&&(g.colCount=a[0].length,g.rowIndex=Math.floor(f/d),g.colIndex=f-g.rowIndex*d,g.hintIndex=g.rowIndex*a[0].length+g.colIndex,c&&(g.spanX=c[f].x,g.spanY=c[f].y)),g}function f(a,b){return e(a,"media",b)}function g(a,b){return _.findIndex(a.smartLayoutRulesNodes,function(a){return a.top.component===b})}function h(a,b,c,d,e,f){return Array.isArray(a[b])?a[b][e[c][d]]:a[b]||a[f]}function i(a,b){if("paragraph"===a)return"longText";if("media"===a)return"media"!==b.media.type?b.media.type:"image";var c=a.split("#");return"label"===c[0]?"label":a}function j(a,b,c){var d,e,f=i(b.childType,c),g=i(b.parentType,c),j=a.smartLayoutRulesNodesMap[g],k=a.smartLayoutRulesNodesMap[f];if(1===k.length)d=k[0][b.childFacet];else for(e=0;e<k.length;e++)k[e][b.childFacet].component===h(c,f,b.childRow,b.childCol,a.containerIndex,b.childType)&&(d=k[e][b.childFacet]);if(1===j.length)d.parentCandidate=j[0][b.parentFacet];else for(e=0;e<j.length;e++)j[e][b.parentFacet].component===h(c,g,b.parentRow,b.parentCol,a.containerIndex,b.parentType)&&(d.parentCandidate=j[e][b.parentFacet]);return a.trySetRule(d),d}function k(a,b,c,d,e,f){d-=a.firstRow,e-=a.firstCol,b[c][d]||(b[c][d]=[]),b[c][d][e]=f}function l(b,c,d,e,f,g){var h,i,j=d.rowIndex-1,l=d.rowIndex;e===a.BOTTOM&&(j=d.rowIndex+d.spanY,l=j-1);var m={firstCol:0,lastCol:d.colIndex+d.spanX-1,firstRow:j,lastRow:j};if(!(0>j||0>l||j>=c.length||l>=c.length)){if(g)m.firstCol=d.colIndex;else{for(h=0;h<d.colIndex;h++)c[j][h]===c[l][h]&&(m.firstCol=h+1);for(h=d.colIndex+d.spanX;h<c[0].length&&c[j][h]!==c[l][h];h++)m.lastCol=h}if(e===a.TOP)for(h=j;h>=0&&(c[h][m.firstCol]!==c[h][m.firstCol-1]&&c[h][m.lastCol]!==c[h][m.lastCol+1]);h--)m.firstRow=h;else for(h=j;h<c.length&&(c[h][m.firstCol]!==c[h][m.firstCol-1]&&c[h][m.lastCol]!==c[h][m.lastCol+1]);h++)m.lastRow=h;if(m.lastRow<c.length)for(h=m.firstRow;h<=m.lastRow;h++)for(i=m.firstCol;i<=m.lastCol;i++)k(m,b.boxesStructure,f,h,i,c[h][i])}}return{shapeMediaGridSize:1,prepareBoxesStructure:function(c,d){if(d&&d.media.width>b.shapeMediaSize){l(c,c.structure,d,a.TOP,a.TOP),l(c,c.structure,d,a.BOTTOM,a.BOTTOM);var e=_(c.structure).unzip().value(),f={spanY:d.spanX,spanX:d.spanY,colIndex:d.rowIndex,rowIndex:d.colIndex};l(c,e,f,a.TOP,a.LEFT,!0),l(c,e,f,a.BOTTOM,a.RIGHT,!0),c.boxesStructure[a.LEFT]=_(c.boxesStructure[a.LEFT]).unzip().value(),c.boxesStructure[a.RIGHT]=_(c.boxesStructure[a.RIGHT]).unzip().uniq().value()}},isBottomEdge:function(a,b,c,d){return a[c]!==d[b+1][c]},calcSmartRules:function(a,e,i,k){var l=e[0].length,m=e.length,n=this;e.forEach(function(b,c){for(var d=(c+1)%2===0,f=d?l-1:0,g=b[f];"media"===g&&f>=0&&l>f;)f++,g=b[f];for(var h,o,p=c*l+f,q=f;f>=0&&l>f;){do{if(q=d?q-1:q+1,0>q||q>=l){o=null;break}o=b[q],h=c*l+q}while(0===i[h].x||"media"===o||o===g);if(!o)break;var r={parentType:g,parentRow:c,parentCol:f,childType:o,childRow:c,childCol:q};c>0&&0!==i[p].y&&0!==i[h].y&&(r.parentFacet="top",r.childFacet="top",j(a,r,k)),m-1>c&&n.isBottomEdge(b,c,f,e)&&n.isBottomEdge(b,c,q,e)&&(r.parentFacet="bottom",r.childFacet="bottom",j(a,r,k)),["title","subTitle"].indexOf(g)>-1&&"paragraph"===o&&(k[g].threshold=75),g=o,f=q,p=h}if(m>c+1)for(var s=d?0:l-1;s>=0&&l>s;){if("media"!==b[s]&&b[s]!==e[c+1][s]){for(var t=0;l>t;t++)p=(c+1)*l+t,0!==i[p].x&&0!==i[p].y&&j(a,{parentType:b[s],parentFacet:"bottom",parentRow:c,parentCol:s,childType:e[c+1][t],childFacet:"top",childRow:c+1,childCol:t},k);break}s=d?s+1:s-1}});var o=f(e,i);if(o.index>-1)if(k.media.width>b.shapeMediaSize){k.media.mediaMinHeight=k.media.height;var p=o.rowIndex+o.spanY-1;if(p!==m-1){var q=(p+1)%2===0,r=q?o.colIndex:o.colIndex+o.spanX-1,s=e[p+1][r],t=g(a,h(k,s,p+1,r,a.containerIndex)),u=a.smartLayoutRulesNodes[t].top.parent;u&&"root"!==u.facet&&(u.component.paddingRef=a.layoutArray.indexOf(k.media)),j(a,{parentType:"media",parentFacet:"bottom",parentRow:o.rowIndex,parentCol:o.colIndex,childType:s,childFacet:"top",childRow:p+1,childCol:r},k)}j(a,{parentType:"LayoutElement",parentFacet:"bottom",childType:"media",childFacet:"bottom",childRow:o.rowIndex,childCol:o.colIndex},k)}else{var v,w=k.media.top+k.media.height;o.colIndex>0&&(v=c(e,i,o.hintIndex,o.colIndex,o.rowIndex,-1),d(v,k,w)),o.colIndex+o.spanX<o.colCount&&(v=c(e,i,o.hintIndex,o.colIndex+o.spanX-1,o.rowIndex,1),d(v,k,w))}},findLocation:e,findMediaLocation:f,calculateSiblings:c,createSmartRules:function(a,b,c,d){a.initSmartLayoutRules(!0),a.hangBottomOnTop();var e=this;if(this.calcSmartRules(a,b,c,d),b.containerSolutions&&angular.forEach(b.containerSolutions,function(c,f){e.calcSmartRules(a,c,b.containerSpanHints[f],d)}),b.onMediaSolution&&(this.calcSmartRules(a,b.onMediaSolution,b.onMediaSpanHints,d.onMediaContainer.tempMap),d.onMediaContainer.vPosition&&d.onMediaContainer.vPosition.top)){var f=a.layoutArray.indexOf(d.media),g=a.layoutArray.indexOf(d.onMediaContainer),h={top:{parentIndex:f,parentFacet:"top",childIndex:g,childFacet:"top"}},i={top:{childIndex:g,childFacet:"top"}};d.onMediaContainer.vPositionRules={},angular.forEach(d.onMediaContainer.vPosition,function(a,b){"top"===b?d.onMediaContainer.vPositionRules[b]=h:d.onMediaContainer.vPositionRules[b]=i})}}}}]);var core;!function(a){var b=function(){function a(a,b,c,d){this.$window=a,this.$rootScope=b,this.applicationParameters=c,this.videoProvidersUtils=d,this.assets={framePath:"index.html",protocolPath:"scripts/protocol.js"}}return a.$inject=["$window","$rootScope","applicationParameters","videoProvidersUtils"],a.prototype.translateMediaFrameResultItemToSdkMediaResultItem=function(a){var b={};return b.fileName=a.title||"",b.relativeUri=("shape"===a.mediaType?a.fileUrl:a.uri)||"",b.width=Number(a.width)||0,b.height=Number(a.height)||0,b.Title="",b.Description="",b.Link="",b.fileOutput=a.fileOutput,b.fileInput=a.fileInput,b.labels=a.labels,b.mediaType=a.mediaType,b.fileBaseUrl=a.fileBaseUrl,b},a.prototype.destroy=function(){var a=this;this.$window.MediaFrame.off("close",function(){return a.cancelHandler()}),this.$window.MediaFrame.off("items",function(b){return a.itemsHandler(b)})},a.prototype.open=function(a){var b=this;return new Promise(function(c){b.resolve=c,b.init(a),b.loadMediaGallery()})},a.prototype.init=function(a){this.data=_.extend({multiSelection:"backgrounds"!==a.mediaType,mediaType:"photos"},a)},a.prototype.loadMediaGallery=function(){var a=this,b=this.getOptionsFromData(this.data);_.assign(b,{mediaGalleryBaseHost:this.applicationParameters.clientTopology.mediaGalleryG5SameOriginUrl,baseHost:this.applicationParameters.clientTopology.baseDomain,i18nCode:"en",windowStyle:"fullscreen"}),this.$window.MediaFrame.on("close",function(){return a.cancelHandler()}),this.$window.MediaFrame.on("items",function(b){return a.itemsHandler(b)}),b.vision=["face","label","color"],this.$window.MediaFrame.open(b)},a.prototype.cancelHandler=function(){this.destroy(),this.$rootScope.$evalAsync(),this.resolve([])},a.prototype.itemsHandler=function(a){this.$rootScope.$evalAsync(),this.resolve(a.items.map(this.translateMediaFrameResultItemToSdkMediaResultItem)),this.destroy()},a.prototype.getScaleToFill=function(a,b,c){var d=a.fileOutput.video[0],e=b/c,f=d.width/d.height;return e>f?e/f:f/e},a.prototype.getVideoUrl=function(a){return this.applicationParameters.clientTopology.videoUrl+"/"+a.fileOutput.video[0].url},a.prototype.itemToThumbnailUrl=function(a,b,c,d){var e,f=d&&d.crop,g=d&&d.alignment,h=d&&d.fit;switch(a.mediaType.toLowerCase()){case"audio":e="./images/audio.png";break;case"shape":e="https://static.wixstatic.com/"+("svg"===a.relativeUri.substr(a.relativeUri.length-3)?a.relativeUri:a.relativeUri.substr(0,a.relativeUri.length-2)+"svg");break;case"pattern":case"image":case"icon":e="https://static.wixstatic.com/media/"+a.relativeUri+"/v1",e+=f?"/crop/x_"+Math.round(f.x)+",y_"+Math.round(f.y)+",w_"+Math.round(f.width)+",h_"+Math.round(f.height)+"/fill/w_"+b+",h_"+c+"/"+a.relativeUri:h?"/fit/w_"+b+",h_"+c+"/"+a.relativeUri:g?"/fill/w_"+b+",h_"+c+",al_"+g.substr(0,1)+"/"+a.relativeUri:"/fill/w_"+b+",h_"+c+"/"+a.relativeUri;break;case"clipart":e="https://static.wixstatic.com/media/"+a.relativeUri+"/v1/fit/w_"+b+",h_"+c+"/b31076b78c214845bc6452ff208140d3.png";break;case"video":e=a.fileOutput?"https://static.wixstatic.com/"+a.fileOutput.image[0].url:"./images/video.svg";break;case"extvideo":e=this.videoProvidersUtils.getVideoThumbnailUrl(a.videoUrl,a)}return e},a.prototype.getOptionsFromData=function(a){var b=a.multiSelection?"multiple":"single";switch(a.mediaType){case"backgrounds":return{selectionType:b,mediaType:"picture",i18nPrefix:"background",canShowSelectButton:!0,canSubmitUntranscoded:!1,tabsList:["private","public"],path:"public",publicMediaRoot:"backgrounds"};case"shape":return{selectionType:b,mediaType:"picture",i18nPrefix:a.multiSelection?"multiple_shape":"shape",canShowSelectButton:!0,canSubmitUntranscoded:!1,tabsList:["public"],path:"public",publicMediaRoot:"shapes"};case"audio":return{selectionType:b,mediaType:"music",i18nPrefix:"music",canShowSelectButton:!0,canSubmitUntranscoded:!0,tabsList:["private"],path:"private"};case"clipart":return{selectionType:b,mediaType:"picture",i18nPrefix:a.multiSelection?"multiple_icons":"single_icon",canShowSelectButton:!0,canSubmitUntranscoded:!1,tabsList:["public","private"],path:"public",publicMediaRoot:"clipart"};case"icon":return{selectionType:b,mediaType:"picture",i18nPrefix:a.multiSelection?"multiple_icons":"single_icon",canShowSelectButton:!0,canSubmitUntranscoded:!1,tabsList:["public"],path:"public",publicMediaRoot:"social_icons"};case"video":return{selectionType:"single",mediaType:"video",i18nPrefix:"video",canShowSelectButton:!0,canSubmitUntranscoded:!0,tabsList:["public","private"],path:"public",publicMediaRoot:"videos"};default:return{selectionType:b,mediaType:"picture",i18nPrefix:a.multiSelection?"multiple_images":"single_image",canShowSelectButton:!0,canSubmitUntranscoded:!1,tabsList:["private","public","external","photoStock"],path:"public",publicMediaRoot:"photos",servicesList:["facebook","flickr","instagram","picasa"]}}},a.prototype.setMediaRef=function(a){switch(a.mediaType){case"pattern":a.mediaRef={type:"Image",uri:a.url||"",description:"",opacity:a.opacity,width:a.width,height:a.height};break;case"picture":case"image":a.mediaRef={type:"Image",uri:a.url||"",description:"",width:a.width,height:a.height};break;case"video":a.mediaRef={mute:!0,type:"WixVideo",qualities:a.qualities,posterImageRef:a.posterImageRef,preload:"auto",opacity:1,metaData:{isPreset:!1,schemaVersion:"1.0",isHidden:!1},duration:a.duration,videoId:a.fileBaseUrl,autoplay:!0,loop:!0}}},a.prototype.setBgObj=function(a,b){if(void 0===b&&(b={}),"video"===a.mediaType)if(a.fileOutput){var c=_.groupBy(a.fileOutput.video,"quality");c=_.map(c,function(a){var b=_.pluck(a,"format"),c=_.pick(a[0],["width","height","quality"]);return c.formats=b,c});var d=_.first(a.fileOutput.image),e=_.pick(d,["width","height","url"]);e.type="Image",e.uri=e.url.replace(/^(.*[\/])/,""),delete e.url,b.posterImageRef=e,b.qualities=c}else{var f=a.width/1920,g=a.height/1080;b.qualities=[{width:Math.round(854*f),height:Math.round(480*g),quality:"480p",formats:["mp4","webm"]},{width:Math.round(1280*f),height:Math.round(720*g),quality:"720p",formats:["mp4","webm"]},{width:Math.round(1920*f),height:Math.round(1080*g),quality:"1080p",formats:["mp4","webm"]}],b.posterImageRef={width:a.width,height:a.height,type:"Image",uri:a.relativeUri+"f000.jpg"},b.duration=Math.round(a.duration/1e3)||1}return b.url=a.relativeUri,b.width=a.width,b.height=a.height,b.mediaType=a.mediaType,"pattern"===a.mediaType?b.fittingType="tile":b.fittingType=b.fittingType||"fill",b.alignType=b.alignType||"center",b.fileBaseUrl=a.fileBaseUrl,a.fileInput&&(b.duration=Math.round(a.fileInput.duration/1e3)||1),this.setMediaRef(b),b},a.prototype.getItemId=function(a){return a.videoUrl||(a.relativeUri||"")+(a.fileUrl||"")},a}();a.MediaGallery=b,angular.module("siteGeneratorStaticsCoreAppInternal").service("mediaGallery",b)}(core||(core={}));var core;!function(a){var b=/^.*(?:youtu.be\/|v\/|u\/\w\/|embed\/|watch\?v=|\&v=)([^#\&\?]*).*/,c=/^\s*https?:\/\/(?:www.)?vimeo\.com/,d=/\/(\d+)(?:\?.*)?$/,e="THUMBNAILS_CACHE",f=function(){function a(a,d,f){var g=this;this.$http=a,this.$cacheFactory=d,this.obMonitoring=f,this.thumbnailCache=this.$cacheFactory(e),this.isYoutube=function(a){return b.test(a)},this.isVimeo=function(a){return c.test(a)},this.getThumbnailFromCache=function(a){return g.thumbnailCache.get(a)},this.getYoutubeId=function(a){return a.match(b)[1]}}return a.$inject=["$http","$cacheFactory","obMonitoring"],a.prototype.getVimeoId=function(a,b){var c=a.match(d);return!c&&b&&b.uri&&(c=b.uri.match(d)),c?c[1]:""},a.prototype.getVideoThumbnailUrl=function(a,b){var c=this,d=this.getThumbnailFromCache(a);return _.isEmpty(d)?(this.isVimeo(a)?d=this.getVimeoThumbnailUrl(a,b).then(function(b){return c.saveToCache(a,b)}):this.isYoutube(a)&&(d=this.getYoutubeThumbnailUrl(a),this.saveToCache(a,d)),d):d},a.prototype.getExtVideoDataFromMediaItem=function(a){var b,c=null;return this.isVimeo(a.videoUrl)?(c="VIMEO",b=this.getVimeoId(a.videoUrl,a)):this.isYoutube(a.videoUrl)&&(c="YOUTUBE",b=this.getYoutubeId(a.videoUrl)),c&&b?{type:"Video",videoId:b,videoType:c}:(this.obMonitoring.error("video without id",{item:a}),{})},a.prototype.saveToCache=function(a,b){return this.thumbnailCache.put(a,b),b},a.prototype.getYoutubeThumbnailUrl=function(a){var b=this.getYoutubeId(a);return"https://img.youtube.com/vi/"+b+"/0.jpg"},a.prototype.getVimeoThumbnailUrl=function(a,b){var c=this.getVimeoId(a,b);return c?this.$http.get("http://vimeo.com/api/v2/video/"+c+".json",{cache:!0}).then(function(b){var c=b.data[0].thumbnail_medium;if("string"!=typeof c)throw'failed to get vimeo video "'+a+'" metadata';return c}):null},a}();a.VideoProvidersUtils=f,angular.module("siteGeneratorStaticsCoreAppInternal").service("videoProvidersUtils",f)}(core||(core={}));var core;!function(a){var b=["Image","Wix Video","Strip Image","Strip Video","Slideshow","Grid (with margins)","Grid (with margins and text below)","Animated Grid","Strip Slideshow","Strip Showcase","Fullwidth Collage","Collage","Slider","Thumbnails","Masonry","Accordion","Honeycomb","Impress","Freestyle"],c=["Fullwidth Collage","Collage","Masonry"],d=["Honeycomb"],e=function(){function a(a,b,c,d,e,f,g,h,i){var j=this;this.storyServices=a,this.sizeRuleValidators=b,this.galleryDefinition=c,this.componentStyles=d,this.mediaOverrideMixins=e,this.sizeRuleValidationArgumentMakers=f,this.sizeRuleValidationErrorFormatters=g,this.PresetMediaType=h,this.flags=i,this.imageGalleriesTypes=["Slideshow","Grid (with margins)","Grid (with margins and text below)","Animated Grid","Strip Slideshow","Strip Showcase","Fullwidth Collage","Collage","Slider","Thumbnails","Masonry","Accordion","Honeycomb","Impress","Freestyle"],this.componentId="_preferred",this.stripGalleriesTypes=["Strip Image","Strip Slideshow","Strip Showcase","Fullwidth Collage","Strip Video"],this["default"]=this.sizeRuleValidators.gallery.Image(60,60,[{mediaType:"image"}]).data.transform({imageScaling:"fill",imageFilter:"none",backgroundPosition:""}),this.getGallery=function(a,b,c){return j._get(b,c,a)},this.getMakeListOfValidatedGalleriesStateId=this.ifSegLELayoutElse(function(){return""},function(a,b,c){var d=j._get(b,c,a);return d.name+"-"+j.getValidationArgId(a,b)}),this.makeListOfValidatedGalleries=this.ifSegLELayoutElse(this.makeInitialValidatedGalleries,function(a,b,c){var d=j.sizeRuleValidationArgumentMakers.gallery(a,b),e=j.makeInitialValidatedGalleries();return e.selected=j._get(b,c,a),Object.keys(j.sizeRuleValidators.gallery).reduce(function(a,b){var c=j.sizeRuleValidators.gallery[b].apply(null,d);return"gallery"===c.type||"video"===c.type?a.valid[b]={name:b,type:c.type,data:c.data,error:null,thumbnailBasename:b.replace(/[^a-z0-9]/gi,"_"),selected:b===a.selected.name}:a.invalid[b]={name:b,type:c.type,data:null,error:j.sizeRuleValidationErrorFormatters.gallery(d,c),thumbnailBasename:b.replace(/[^a-z0-9]/gi,"_"),selected:!1},a},e)}),this._reRender=function(a,b){return a.getLayoutSelectionStore().markForRenderByPageAndLayoutElement(a.getPageDescriptor(),a,b.id)},this._sameAsDefault=function(a){return a.name===j["default"].name&&_.eq(a.properties,j["default"].properties)},this._get=function(a,b,c){return j.getOverrides(a,b,c)||j["default"]},this.set=this.ifSegLELayoutElse(function(){return!1},function(a,b,c,d){var e=j._get(b,c,a);_.eq(e,d)||j._setOrUnset(a,b,c,d)})}return a.$inject=["storyServices","sizeRuleValidators","galleryDefinition","componentStyles","mediaOverrideMixins","sizeRuleValidationArgumentMakers","sizeRuleValidationErrorFormatters","PresetMediaType","flags"],a.prototype.makeAnImageDefault=function(a){var b=_.extend({imageScaling:"fill",imageFilter:"none",backgroundPosition:""},a);return this.sizeRuleValidators.gallery.Image(60,60,[{mediaType:"image"}]).data.transform(b)},a.prototype.getLeMediaOverrides=function(a,b){var c=b?b:a.getMediaLayout();return a.overrides.media&&c?a.overrides.media[c.argIndex]:null},a.prototype.isStripType=function(a,b){var c=this.getLeMediaOverrides(a,b),d=c&&c.name;if(!d)return!1;var e=this.stripGalleriesTypes.indexOf(d)>=0,f="coast2coast"===c.properties.stretch;return e||f},a.prototype.isUnexpectedHeight=function(a,b){var e=this.getLeMediaOverrides(a,b),f=e&&e.name;if(!f)return!1;var g=c.indexOf(f)>=0,h=d.indexOf(f)>=0;return g||h},a.prototype.getGalleryByName=function(a,b,c,d,e){var f=this.sizeRuleValidators.gallery[a](b,c,d);return"gallery"===f.type||"video"===f.type?this.transformGallery(f,e||{}):void 0},a.prototype.transformGallery=function(a,b){var c=this,d={};return _.each(a.data.properties,function(a){c.mediaOverrideMixins[a.type].valueToProperties(d,c.mediaOverrideMixins[a.type].propertiesToValue(b,a.data),a.data)}),a.data.transform(d);
},a.prototype.setGallery=function(a,b,c,d){var e=this._get(b,c,a);return _.eq(d,e)?!1:(this._setOrUnset(a,b,c,d),!0)},a.prototype.setGalleryByNameAndValues=function(a,b,c,d,e){var f=this.sizeRuleValidationArgumentMakers.gallery(a,b),g=this.galleryDefinition[d].apply(null,f);if("gallery"===g.type||"video"===g.type){var h=this.transformGallery(g,e);return this.setGallery(a,b,c,h)}return!1},a.prototype.setPreferredMediaInPresetData=function(a,b){var c=this;_.each(a.groups,function(d){if(!d.isHeader&&!d.isFooter){var e=a.contentType+(a.isList?"List":"");_.each(d.layouts,function(a){var d=_.get(a.selections.overrides.media,[e,c.componentId,"0"]);"video"===b?a.mediaType===c.PresetMediaType.COAST2COAST?d={type:"stripContainer",properties:{},style:{},superType:"media",sourceProperties:{},name:"Strip Video"}:a.mediaType===c.PresetMediaType.IMAGE&&(d={type:"extVideo",properties:{},style:{},superType:"media",sourceProperties:{},name:"video"},a.selections.overrides.style[e].extVideo="v1"):"gallery"===b?d&&"gallery"===d.superType||(a.mediaType===c.PresetMediaType.COAST2COAST?d={type:"StripSlideshow",properties:{transition:"none",autoplay:!0,font:"tahoma",textMode:"titleAndDescription",alignText:"left"},style:{color1:"color_11",color2:"color_15",color3:"color_11",color4:"color_15",color5:"color_15"},superType:"gallery",sourceProperties:{textAlignment:"left",transition:"none"},name:"Strip Slideshow"}:a.mediaType===c.PresetMediaType.IMAGE&&(d={type:"SlideShowGallery",properties:{showNavigation:!1,autoplay:!0,autoplayInterval:3,showAutoplay:!0,transition:"none",transDuration:1,imageMode:"clipImage"},style:{fntt:"font_7",fntds:"font_9"},superType:"gallery",sourceProperties:{imageScaling:"clipImage",transition:"none"},name:"Slideshow"})):"image"===b&&(a.mediaType===c.PresetMediaType.COAST2COAST?d={type:"stripContainer",properties:{fittingType:"fill",alignType:"center",scrollType:"scroll"},superType:"gallery",sourceProperties:{fittingType:"fill",alignType:"center",scrollType:"scroll"},name:"Strip Image"}:a.mediaType===c.PresetMediaType.IMAGE&&(d=void 0)),_.setObject(a.selections.overrides.media,[e,c.componentId,"0"],d)})}})},a.prototype.changeC2CtoFullWidth=function(a,b){var c=this;_.each(b,function(b){var d=a.contentType+(a.isList?"List":"");b.isHeader&&(d+="HeaderList"),_.each(b.layouts,function(a){a.mediaType=c.PresetMediaType.IMAGE;var b=_.get(a.selections.overrides.media,[d,c.componentId,"0"]);b&&("Strip Image"===b.name?b=void 0:"Strip Video"===b.name?(b={type:"extVideo",properties:{},style:{},superType:"media",sourceProperties:{},name:"video"},a.selections.overrides.style[d].extVideo="v1"):b="gallery"===b.superType?{type:"SlideShowGallery",properties:{showNavigation:!1,autoplay:!0,autoplayInterval:3,showAutoplay:!0,transition:"none",transDuration:1,imageMode:"clipImage"},style:{fntt:"font_7",fntds:"font_9"},superType:"gallery",sourceProperties:{imageScaling:"clipImage",transition:"none"},name:"Slideshow"}:void 0,_.setObject(a.selections.overrides.media,[d,c.componentId,"0"],b))})})},a.prototype.mixInController=function(a,c){var d=this;a.optionalGalleries=[],a.values={};var e=function(a,b){var c={};return b.properties.forEach(function(b){c[b.type]=d.mediaOverrideMixins[b.type].propertiesToValue(a.sourceProperties,b.data)}),c};a.open={},a.$watch(function(){return d.getMakeListOfValidatedGalleriesStateId(c.argIndex,a.segment)},function(){if(a.optionalGalleries=[],!a.segment||!a.segment.containingLG.isHeader()){var f=d.makeListOfValidatedGalleries(c.argIndex,a.segment);f.selected&&!_.find(a.open)&&(a.open[f.selected.name]=!0),b.forEach(function(b){f.valid[b]&&(a.optionalGalleries.push(f.valid[b]),f.valid[b].selected&&(a.values=e(f.selected,f.valid[b].data)))}),b.forEach(function(b){f.invalid[b]&&a.optionalGalleries.push(f.invalid[b])});var g=f.valid.video||f.invalid.video;g&&a.optionalGalleries.splice(1,0,g)}}),a.deleteExcept=function(a,b){var c=a[b];a.splice(0,a.length),a[b]=c},a.toggleOpen=function(b){return a.open[b.name]=!a.open[b.name]},a.setGallery=function(b){if(b.data){a.values.showThumbnails&&(a.values.showThumbnails.show?void 0===a.values.showThumbnails.option&&(a.values.showThumbnails.option=0):delete a.values.showThumbnails.option);var e={};b.data.properties.forEach(function(b){d.mediaOverrideMixins[b.type].valueToProperties(e,a.values[b.type],b.data)}),d.set(c.argIndex,a.segment,b.data.transform(e)),d.storyServices.emitValueChanged(a.segment.contentElement)}}},a.prototype.validate=function(a,b,c,d){void 0===d&&(d=!0);var e,f,g=this.sizeRuleValidationArgumentMakers.gallery(a,b);if(void 0===g)return{};var h=this._get(b,c,a);"Animated Grid (with margins)"===h.name&&(h.name="Grid (with margins)");var i=this.sizeRuleValidators.gallery[h.name].apply(null,g);if("gallery"===i.type)f=i;else{if("video"===i.type)return{};e=g[2].length&&_.filter(g[2],{mediaType:"extVideo"}).length===g[2].length?"video":"image_count_is_greater_than_maximum"===i.type?"Strip Image"===h.name?"Strip Slideshow":"Slideshow":"image_count_is_less_than_minimum"===i.type?this.stripGalleriesTypes.indexOf(h.name)<0?"Image":"Strip Image":g[0]>60&&g[1]>60&&g[2].length>1?"Slideshow":"Image",f=this.sizeRuleValidators.gallery[e].apply(null,g),"bad_size"===f.type&&"Strip Slideshow"===e&&(e="Slideshow",f=this.sizeRuleValidators.gallery[e].apply(null,g)),d&&this.storyServices.emitOverridesChanged({override:"gallery",from:h.name,to:e,segment:c,validationArguments:g,validationResponse:i})}return{response:f,currentGallery:h}},a.prototype.revalidate=function(a,b,c){var d=this,e=c.getLE(void 0,!0);if(!e||e!==a)return!1;var f=this.validate(a,b,c),g=f.response;if(!g)return!1;var h=f.currentGallery,i={};if(g.data&&(_.each(g.data.properties,function(a){return d.mediaOverrideMixins[a.type].valueToProperties(i,d.mediaOverrideMixins[a.type].propertiesToValue(h.sourceProperties,a.data),a.data)}),g.data.transform)){var j=g.data.transform(i);if(!_.eq(j,h))return this._setOrUnset(a,b,c,j),!0}return!1},a.prototype.getOverrides=function(a,b,c){var d=c.getMediaIndex(a),e=this._getFromStore(b);return e&&e[d]&&this.transformForMobileIfNeed(e[d],b,c)},a.prototype.transformForMobileIfNeed=function(a,b,c){if(this.flags.consumerMode&&b.isMobile){if("Wix Video"===a.name)return{superType:"media",sourceProperties:{},name:"Strip Video",type:"stripContainer",properties:{},style:{}};if(c.getMediaType()===this.PresetMediaType.COLUMNBG)return{superType:"gallery",sourceProperties:{fittingType:"fill",alignType:"center",scrollType:"scroll"},name:"Strip Image",type:"stripContainer",properties:{fittingType:"fill",alignType:"center",scrollType:"scroll"}}}return a},a.prototype.getValidationArgId=function(a,b){var c=a.getArgValue(b.argIndex);return b.width+"-"+b.height+"-"+(c?c.length:"")+"-"+a.id},a.prototype._getFromStore=function(a){var b=a.getLayoutSelectionStore().getOverride("media",a,this.componentId);return b?(b.sourceProperties||(b.sourceProperties={}),b):void 0},a.prototype._set=function(a,b,c,d){var e=a.getMediaIndex(b),f=this._getFromStore(c)||{};f[e]=d,c.getLayoutSelectionStore().setOverride("media",c,this.componentId,f);var g=c.getLayoutSelectionStore().getOverride("style",c),h=g&&g[d.type]?g[d.type]:this.componentStyles.styles[d.type][0];c.getLayoutSelectionStore().setOverride("style",c,d.type,h),this._reRender(c,a)},a.prototype._unset=function(a,b,c){var d=a.getMediaIndex(b),e=this._getFromStore(c)||{};e[d]&&("media"!==e[d].type&&c.getLayoutSelectionStore().deleteOverride("style",c,e[d].type),delete e[d],0===Object.keys(e).length?c.getLayoutSelectionStore().deleteOverride("media",c,this.componentId):c.getLayoutSelectionStore().setOverride("media",c,this.componentId,e)),this._reRender(c,a)},a.prototype._setOrUnset=function(a,b,c,d){this._sameAsDefault(d)?this._unset(a,b,c):this._set(a,b,c,d)},a.prototype.ifSegLELayoutElse=function(a,b){var c=this;return function(){for(var d=[],e=0;e<arguments.length;e++)d[e]=arguments[e];var f=d[0],g=d[1];if(!g)return a.call(c);var h=g.getLE(void 0,!0);return h?(void 0===f||-1===f?f=h.getMediaLayout():"number"==typeof f&&(f=h.getLayoutWithArgIndex(f)),null===f?a.call(c):b.apply(c,[h,f].concat([].slice.call(d,1)))):a.call(c)}},a.prototype.makeInitialValidatedGalleries=function(){return{valid:{},invalid:{}}},a}();a.MediaOverride=e,angular.module("siteGeneratorStaticsCoreAppInternal").service("mediaOverride",e)}(core||(core={}));var core;!function(a){var b=function(){function a(){this.imageFilter={valueToProperties:function(a,b,c){a.imageFilter=b||c[0].value},propertiesToValue:function(a,b){return a.imageFilter||b[0].value}},this.imageScaling={valueToProperties:function(a,b,c){b="object"==typeof b?b:{},a.imageScaling=(c.options[b.option]||c.options[0]).value,c.cropOptions&&(a.imageScalingCropOption=c.cropOptions[b.cropOption]||c.cropOptions[0])},propertiesToValue:function(a,b){var c=_.findIndex(b.options,{value:a.imageScaling}),d=b.cropOptions?b.cropOptions.indexOf(a.imageScalingCropOption):-1;return{option:0>c?0:c,cropOption:0>d?0:d}}},this.transition={valueToProperties:function(a,b,c){a.transition=(c[b]||c[0]).value},propertiesToValue:function(a,b){var c=_.findIndex(b,{value:a.transition});return 0>c?0:c}},this.columnsRows={propertiesToValue:function(a,b){var c=_.findIndex(b,function(b){return b.columns===a.columns});return 0>c?0:c},valueToProperties:function(a,b,c){_.assign(a,c[b]||c[0])}},this.imageCount={propertiesToValue:function(a,b){var c=_.findIndex(b,function(b){return b.imageCount===a.imageCount});return 0>c?0:c},valueToProperties:function(a,b,c){_.assign(a,c[b]||c[0])}},this.textAlignment={propertiesToValue:function(a,b){var c=b.indexOf(a.textAlignment);return 0>c?0:c},valueToProperties:function(a,b,c){a.textAlignment=c[b]||c[0]}},this.columns={propertiesToValue:function(a,b){var c=b.indexOf(a.columns);return 0>c?0:c},valueToProperties:function(a,b,c){a.columns=c[b]||c[0]}},this.collage={propertiesToValue:function(a,b){var c=_.findIndex(b,function(b){return b.columns===a.columns});c=0>c?0:c;var d=b[c].maxImageSize.indexOf(a.maxImageSize);return d=0>d?0:d,{option:b.map(function(a,b){return b===c}),maxImageSize:b.map(function(a,b){return b===c?d:void 0})}},valueToProperties:function(a,b,c){if("object"==typeof b){var d=b.option&&b.option.indexOf(!0);d=c[d]?d:0,a.columns=c[d].columns,a.maxImageSize="number"==typeof c[d].maxImageSize[b.maxImageSize[d]]?c[d].maxImageSize[b.maxImageSize[d]]:c[d].maxImageSize[0]}else a.columns=c[0].columns,a.maxImageSize=c[0].maxImageSize[0]}},this.showThumbnails={propertiesToValue:function(a,b){if(void 0===a.thumbnailAspectRatio)return{show:!0,option:0};if(null===a.thumbnailAspectRatio)return{show:!1};var c=_.findIndex(b,function(b){return b.horizontal===a.thumbnailAspectRatio.horizontal&&b.vertical===a.thumbnailAspectRatio.vertical});return{show:!0,option:0>c?0:c}},valueToProperties:function(a,b,c){"object"==typeof b?a.thumbnailAspectRatio=b.show?c[b.option]||c[0]:null:a.thumbnailAspectRatio=c[0]}},this.thumbnailPosition={propertiesToValue:function(a,b){var c=b.indexOf(a.thumbnailPosition);return 0>c?0:c},valueToProperties:function(a,b,c){a.thumbnailPosition=c[b]||c[0]}},this.backgroundPosition={propertiesToValue:function(a){return{fittingType:a.fittingType,alignType:a.alignType,scrollType:a.scrollType}},valueToProperties:function(a,b){a.fittingType=b&&b.fittingType||"fill",a.alignType=b&&b.alignType||"center",a.scrollType=b&&b.scrollType||"scroll"}},this.stretch={propertiesToValue:function(a){return"coast2coast"===a.stretch},valueToProperties:function(a,b){a.stretch=b?"coast2coast":"none"}}}return a}();a.MediaOverrideMixins=b,angular.module("siteGeneratorStaticsCoreAppInternal").service("mediaOverrideMixins",b)}(core||(core={}));var core;!function(a){var b=function(){function a(){}return a.prototype.gallery=function(a,b){var c=a.getArgValue(b.argIndex);return c?[Math.max(1,b.width),Math.max(1,b.height),c,{layout:b,layoutElement:a},{hasAnyLayoutsAbove:a.hasComponentsOnMedia.bind(a)}]:void 0},a}();a.SizeRuleValidationArgumentMakers=b,angular.module("siteGeneratorStaticsCoreAppInternal").service("sizeRuleValidationArgumentMakers",b)}(core||(core={}));var core;!function(a){var b=function(){function a(){}return a.prototype.gallery=function(a,b){var c=function(a){var b=_.isArray(a)?_.filter(a,{mediaType:"image"}).length:a;return b+" image"+(b>1?"s":"")};if("has_layouts_above"===b.type)return"There is content placed over media";if("image_count_is_less_than_minimum"===b.type)return"You have "+c(a[2])+", but it needs at least "+c(b.data);if("image_count_is_greater_than_maximum"===b.type)return"You have "+c(a[2])+", but it needs at most "+c(b.data);if("bad_size"===b.type)return a&&a.length?"Doesn't fit "+a[0]+"x"+a[1]+" dimensions":"Doesn't fit dimensions";if("bad_image_count"===b.type){var d=_.unique(b.data),e=d.slice(0,d.length-1),f=d[d.length-1];return"At these dimensions it needs exactly "+(0===e.length?"":e.join(", ")+" or ")+c(f)+", but you have "+c(a[2])}return"no_video"===b.type?"Missing video":""},a}();a.SizeRuleValidationErrorFormatters=b,angular.module("siteGeneratorStaticsCoreAppInternal").service("sizeRuleValidationErrorFormatters",b)}(core||(core={}));var core;!function(a){function b(a,b){var c=b.filter(function(b){return a.reduce(function(a,c,d){return a&&b[2*d]<=c&&c<=b[2*d+1]},!0)});return c.length>0}function c(a){var b=10;return a>=620&&(b=60),a>=300&&(b=20),b}function d(a,b){var d=_.get(a,["data","properties"]),e=_.find(d,function(a){return"columnsRows"===a.type});return 0===e.data.length?{type:"image_count_is_greater_than_maximum",data:c(b)}:a}function e(a,b){var c=[];return 10>=a&&c.push({columns:1,rows:a}),b>=620&&(Math.ceil(a/6)<=10&&c.push({columns:6,rows:Math.ceil(a/6)}),Math.ceil(a/4)<=10&&c.push({columns:4,rows:Math.ceil(a/4)}),Math.ceil(a/3)<=10&&c.push({columns:3,rows:Math.ceil(a/3)})),b>=300&&Math.ceil(a/2)<=10&&c.push({columns:2,rows:Math.ceil(a/2)}),c}angular.module("siteGeneratorStaticsCoreAppInternal").constant("galleryBgPropertiesOverrides",{"Strip Showcase":{galleryImageOnClickAction:"disabled"}}).constant("galleryDefinition",{Accordion:function(a){var b=[];return b.push({type:"textAlignment",data:["left","center","right"]}),940===a&&b.push({type:"stretch",data:["coast2coast","none"]}),{type:"gallery",data:{name:"Accordion",properties:b,transform:function(a){return{name:"Accordion",sourceProperties:a,superType:"gallery",type:"Accordion",properties:{font:"tahoma",textMode:"titleOnly",alignText:a.textAlignment,stretch:a.stretch},style:{color1:"color_15",color2:"color_14",color3:"color_11",color4:"color_11",color5:"color_15"}}}}}},"Animated Grid":function(a,b,c){var d=c.filter(function(a){return"image"===a.mediaType}).length,f=[{type:"transition",data:[{index:0,label:"None",value:"none"},{index:1,label:"Cross-fade",value:"seq_crossFade_All"},{index:2,label:"Shrink",value:"seq_shrink_All"},{index:3,label:"Vertical",value:"swipe_vert_All"},{index:4,label:"Horizontal",value:"swipe_vert_All"},{index:5,label:"Random",value:"seq_random"}]}];return f.push({type:"columnsRows",data:e(d,a)}),940===a&&f.push({type:"stretch",data:["coast2coast","none"]}),{type:"gallery",data:{name:"Animated Grid",properties:f,transform:function(a){return{name:"Animated Grid",sourceProperties:a,superType:"gallery",type:"PaginatedGridGallery",properties:{maxRows:a.rows,numCols:a.columns,margin:0,transition:a.transition,stretch:a.stretch},style:{fntt:"font_7",fntds:"font_9"}}}}}},Collage:function(){var a=[{type:"collage",data:[{columns:3,maxImageSize:[1,2]},{columns:4,maxImageSize:[2,3,4]}]}];return{type:"gallery",data:{name:"Collage",properties:a,transform:function(a){return{name:"Collage",sourceProperties:a,superType:"gallery",type:"Collage",properties:{orientation:"vertical",fitToScreenWidth:!1,numOfCells:a.columns,maxImageSize:a.maxImageSize,margin:20,font:"tahoma",textMode:"titleOnly",alignText:"center"},style:{color1:"color_11",color2:"color_11",color3:"color_15",color4:"color_15",color5:"color_15"}}}}}},Freestyle:function(a){var b=[{type:"imageScaling",data:{options:[{label:"Crop",value:"crop"},{label:"Fit",value:"fit"}]}}];return 940===a&&b.push({type:"stretch",data:["coast2coast","none"]}),{type:"gallery",data:{name:"Freestyle",properties:b,transform:function(a){return{name:"Freestyle",sourceProperties:a,superType:"gallery",type:"Freestyle",properties:{orientation:"horizontal",cropAndFitStage:a.imageScaling,applyRotationInLayout:!0,imageDecoration:"none",borderWidth:0,stretch:a.stretch},style:{color1:"color_15",color2:"color_15",color3:"color_15",color4:"color_15",color5:"color_15"}}}}}},"Fullwidth Collage":function(){var a=[{type:"collage",data:[{columns:3,maxImageSize:[1,2]},{columns:4,maxImageSize:[1,2,3]}]}];return{type:"gallery",data:{name:"Fullwidth Collage",properties:a,transform:function(a){return{name:"Fullwidth Collage",sourceProperties:a,superType:"gallery",type:"Collage",properties:{orientation:"vertical",fitToScreenWidth:!0,numOfCells:a.columns,showNavButtons:!1,minImageSize:1,layoutSeed:50,galleryImageOnClickAction:"zoomMode",expandEnabled:null,avergeImageSize:1,maxImageSize:a.maxImageSize,margin:0,font:"tahoma",textMode:"titleOnly",alignText:"center"},style:{color1:"color_11",color2:"color_11",color3:"color_15",color4:"color_15",color5:"color_15"}}}}}},"Grid (with margins and text below)":function(a,b,c){var d=c.filter(function(a){return"image"===a.mediaType}).length,f=[{type:"imageScaling",data:{options:[{label:"Crop",value:"clipImage"},{label:"Fit",value:"flexibleWidthFixed"}]}},{type:"textAlignment",data:["left","center","right"]}];return 940===a&&f.push({type:"stretch",data:["coast2coast","none"]}),f.push({type:"columnsRows",data:e(d,a)}),{type:"gallery",data:{name:"Grid (with margins and text below)",properties:f,transform:function(a){return{name:"Grid (with margins and text below)",sourceProperties:a,superType:"gallery",type:"MatrixGallery",properties:{maxRows:a.rows,numCols:a.columns,margin:20,imageMode:a.imageScaling,alignText:a.textAlignment,stretch:a.stretch},style:{fntt:"font_7",fntds:"font_9"}}}}}},"Grid (with margins)":function(a,b,c){var d=c.filter(function(a){return"image"===a.mediaType}).length,f=[{type:"imageScaling",data:{options:[{label:"Crop",value:"clipImage"},{label:"Fit",value:"flexibleWidthFixed"}]}},{type:"textAlignment",data:["left","center","right"]}];return 940===a&&f.push({type:"stretch",data:["coast2coast","none"]}),f.push({type:"columnsRows",data:e(d,a)}),{type:"gallery",data:{name:"Grid (with margins)",properties:f,transform:function(a){return{name:"Grid (with margins)",sourceProperties:a,superType:"gallery",type:"MatrixGallery",properties:{maxRows:a.rows,numCols:a.columns,margin:20,imageMode:a.imageScaling,alignText:a.textAlignment,stretch:a.stretch},style:{fntt:"font_7",fntds:"font_9"}}}}}},Honeycomb:function(a){var b=[];return 940===a&&b.push({type:"stretch",data:["coast2coast","none"]}),{type:"gallery",data:{name:"Honeycomb",properties:b,transform:function(a){return{name:"Honeycomb",sourceProperties:a,superType:"gallery",type:"Honeycomb",properties:{margin:10,imageShape:"hexagon",numOfColumns:5,stretch:a.stretch},style:{color1:"color_18",color2:"color_1",color3:"color_15",color4:"color_11",color5:"color_11","alpha-color5":"0"}}}}}},Image:function(){var a=[{type:"imageScaling",data:{options:[{label:"Crop",value:"fill"},{label:"Fit",value:"full"}]}},{type:"backgroundPosition"},{type:"imageFilter",data:[{value:"none",label:"NONE"},{value:"whistler",label:"WHISTLER"},{value:"soledad",label:"SOLEDAD"},{value:"blur",label:"BLUR"},{value:"lighten",label:"LIGHTEN"},{value:"sangria",label:"SANGRIA"},{value:"feathered",label:"FEATHERED"},{value:"kennedy",label:"KENNEDY"},{value:"ink",label:"INK"},{value:"3d",label:"3D"},{value:"greenwash",label:"GREENWASH"},{value:"darken",label:"DARKEN"},{value:"seaweed",label:"SEAWEED"},{value:"blueray",label:"BLUERAY"},{value:"pinkrinse",label:"PINKRINSE"},{value:"yellowstreak",label:"YELLOWSTREAK"},{value:"redrum",label:"REDRUM"},{value:"neonsky",label:"NEONSKY"}]}];return{type:"gallery",data:{name:"Image",properties:a,transform:function(a){return{superType:"media",sourceProperties:a,name:"Image",type:"media",properties:{displayMode:a.imageScaling,alignType:a.alignType,effectName:a.imageFilter}}}}}},"Wix Video":function(){var a=[];return{type:"gallery",data:{name:"Image",properties:a,transform:function(a){return{superType:"media",sourceProperties:a,name:"Wix Video",type:"media",properties:{}}}}}},Impress:function(a){var b=[{type:"imageScaling",data:{options:[{label:"Crop",value:"crop"},{label:"Fit",value:"fit"}]}},{type:"textAlignment",data:["left","center","right"]},{type:"transition",data:[{index:0,label:"Fade",value:"none"},{index:1,label:"Zoom from center",value:"1"},{index:2,label:"Pop from above",value:"2"},{index:3,label:"Roll from above",value:"3"},{index:4,label:"Pop from right",value:"4"}]}];return 940===a&&b.push({type:"stretch",data:["coast2coast","none"]}),{type:"gallery",data:{name:"Impress",properties:b,transform:function(a){return{superType:"gallery",sourceProperties:a,name:"Impress",type:"Impress",properties:{cropAndFitStage:a.imageScaling,transition:a.transition,autoplay:!0,showPagination:!0,font:"tahoma",textMode:"titleAndDescription",alignText:a.textAlignment,stretch:a.stretch},style:{color1:"color_13",color2:"color_18",color3:"color_23",color4:"color_28",color5:"color_33",color6:"color_16",color7:"color_1",color8:"color_14"}}}}}},Masonry:function(a){var b=[{type:"columns",data:[2,3,4]},{type:"textAlignment",data:["left","center","right"]}];return 940===a&&b.push({type:"stretch",data:["coast2coast","none"]}),{type:"gallery",data:{name:"Masonry",properties:b,transform:function(a){return{superType:"gallery",sourceProperties:a,name:"Masonry",type:"Masonry",properties:{numCols:a.columns,margin:20,font:"tahoma",textMode:"titleAndDescription",alignText:a.textAlignment,boxShadowIsOn:!1,stretch:a.stretch},style:{color1:"#000000",color2:"#000000",color3:"#ffffff",color4:"#000000",color5:"color_15"}}}}}},Slider:function(a){var b=[];return 940===a&&b.push({type:"stretch",data:["coast2coast","none"]}),{type:"gallery",data:{name:"Slider",properties:b,transform:function(a){return{superType:"gallery",sourceProperties:a,name:"Slider",type:"SliderGallery",properties:{imageMode:"clipImage",aspectRatioPreset:"4:3",margin:10,maxSpeed:5,loop:!0,stretch:a.stretch}}}}}},Slideshow:function(){var a=[{type:"imageScaling",data:{options:[{label:"Crop",value:"clipImage"},{label:"Fit",value:"flexibleWidthFixed"}]}},{type:"transition",data:[{index:0,label:"None",value:"none"},{index:1,label:"Vertical",value:"swipeVertical"},{index:2,label:"Horizontal",value:"swipeHorizontal"},{index:3,label:"Cross-fade",value:"crossfade"},{index:4,label:"Out-in",value:"outIn"}]}];return{type:"gallery",data:{name:"Slideshow",properties:a,transform:function(a){return{superType:"gallery",sourceProperties:a,name:"Slideshow",type:"SlideShowGallery",properties:{showNavigation:!1,autoplay:!0,autoplayInterval:3,showAutoplay:!0,transition:a.transition,transDuration:1,imageMode:a.imageScaling},style:{fntt:"font_7",fntds:"font_9"}}}}}},"Strip Image":function(){var a=[{type:"backgroundPosition"}];return{type:"gallery",data:{name:"Strip Image",properties:a,transform:function(a){return{superType:"gallery",sourceProperties:a,name:"Strip Image",type:"stripContainer",properties:{fittingType:a.fittingType,alignType:a.alignType,scrollType:a.scrollType}}}}}},"Strip Showcase":function(){var a=[{type:"showThumbnails",data:[{horizontal:4,vertical:3},{horizontal:3,vertical:4},{horizontal:16,vertical:9}]},{type:"imageScaling",data:{options:[{label:"Crop",value:"crop"},{label:"Fit",value:"fit"}],cropOptions:["4:3","3:4","16:9"]}}];return{type:"gallery",data:{name:"Strip Showcase",properties:a,transform:function(a){var b={cropAndFitStage:a.imageScaling,imageMargin:5,showThumbnails:!1,thumbsMargin:5,autoplay:!0,arrowMode:!0};return null!==a.thumbnailAspectRatio&&(b.showThumbnails=!0,b.thumbsScale=a.thumbnailAspectRatio.horizontal+":"+a.thumbnailAspectRatio.vertical,b.autoplay=!0,b.arrowMode=!1),"crop"===a.imageScaling&&(b.imageScale=a.imageScalingCropOption),{superType:"gallery",sourceProperties:a,name:"Strip Showcase",type:"StripShowcase",properties:b}}}}},"Strip Slideshow":function(){var a=[{type:"textAlignment",data:["left","center","right"]},{type:"transition",data:[{index:0,label:"None",value:"none"},{index:1,label:"Cross-fade",value:"crossFade"},{index:2,label:"Slide horizontal",value:"slide"},{index:3,label:"Slide vertical",value:"scroll"},{index:4,label:"Zoom",value:"zoom"},{index:5,label:"Random",value:"random"}]}];return{type:"gallery",data:{name:"Strip Slideshow",properties:a,transform:function(a){return{superType:"gallery",sourceProperties:a,name:"Strip Slideshow",type:"StripSlideshow",properties:{transition:a.transition,autoplay:!0,font:"tahoma",textMode:"titleAndDescription",alignText:a.textAlignment},style:{color1:"color_11",color2:"color_11",color3:"color_15",color4:"color_15",color5:"color_15"}}}}}},"Strip Video":function(){var a=[];return{type:"video",data:{name:"Strip Video",properties:a,transform:function(a){return{superType:"media",sourceProperties:a,name:"Strip Video",type:"stripContainer",properties:{},style:{}}}}}},Thumbnails:function(a){var b=[{type:"imageScaling",data:{options:[{label:"Crop",value:"crop"},{label:"Fit",value:"fit"}]}},{type:"thumbnailPosition",data:["bottom","left","right"]},{type:"transition",data:[{index:0,label:"None",value:"none"},{index:1,label:"Cross-fade",value:"crossFade"},{index:2,label:"Slide horizontal",value:"slide"},{index:3,label:"Slide vertical",value:"scroll"},{index:4,label:"Zoom",value:"zoom"},{index:5,label:"Random",value:"random"}]}];return 940===a&&b.push({type:"stretch",data:["coast2coast","none"]}),{type:"gallery",data:{name:"Thumbnails",properties:b,transform:function(a){return{superType:"gallery",sourceProperties:a,name:"Thumbnails",type:"Thumbnails",properties:{cropAndFitStage:a.imageScaling,componentScale:"4:3",transition:a.transition,thumbnailsGravity:a.thumbnailPosition,margin:5,autoplay:!0,font:"tahoma",textMode:"titleAndDescription",arrowMode:!0,stretch:a.stretch},style:{color1:"color_11",color2:"color_11",color3:"color_15",color4:"color_15",color5:"color_15"}}}}}},video:function(){var a=[];return{type:"video",data:{name:"video",properties:a,transform:function(a){return{superType:"media",sourceProperties:a,name:"video",type:"extVideo",properties:{},style:{}}}}}}}),angular.module("siteGeneratorStaticsCoreAppInternal").factory("sizeRuleValidators",["flags","galleryDefinition",function(a,c){return{gallery:{Accordion:function(a,d,e,f,g){var h=e.filter(function(a){return"image"===a.mediaType}).length;return 2>h?{type:"image_count_is_less_than_minimum",data:2}:b([a,d],[[380,940,220,300],[460,940,300,460],[540,940,460,700],[620,940,700,780],[700,940,780,860],[780,940,860,5e3]])?g.hasAnyLayoutsAbove(f.layout)?{type:"has_layouts_above"}:c.Accordion(a):{type:"bad_size",data:{}}},"Animated Grid":function(e,f,g,h,i){var j=g.filter(function(a){return"image"===a.mediaType}).length;if(2>j)return{type:"image_count_is_less_than_minimum",data:2};if(!b([e,f],[[220,940,60,5e3]]))return{type:"bad_size",data:{}};if(a.moreStripGalleries&&i.hasAnyLayoutsAbove(h.layout))return{type:"has_layouts_above"};var k=c["Animated Grid"](e,f,g);return d(k,e)},Collage:function(d,e,f,g,h){var i=f.filter(function(a){return"image"===a.mediaType}).length;return 2>i?{type:"image_count_is_less_than_minimum",data:2}:b([d,e],[[940,940,60,5e3]])?a.moreStripGalleries&&h.hasAnyLayoutsAbove(g.layout)?{type:"has_layouts_above"}:c.Collage():{type:"bad_size",data:{}}},Freestyle:function(a,d,e,f,g){var h=e.filter(function(a){return"image"===a.mediaType}).length;return 2>h?{type:"image_count_is_less_than_minimum",data:2}:b([a,d],[[460,940,300,540],[540,940,540,700],[620,940,700,5e3]])?g.hasAnyLayoutsAbove(f.layout)?{type:"has_layouts_above"}:c.Freestyle(a):{type:"bad_size",data:{}}},"Fullwidth Collage":function(d,e,f,g,h){var i=f.filter(function(a){return"image"===a.mediaType}).length;return 2>i?{type:"image_count_is_less_than_minimum",data:2}:b([d,e],[[940,940,60,5e3]])?a.changeFullWidthCollageToSlideShow&&h.hasAnyLayoutsAbove(g.layout)?{type:"has_layouts_above"}:c["Fullwidth Collage"]():{type:"bad_size",data:{}}},"Grid (with margins and text below)":function(a,e,f,g,h){var i=f.filter(function(a){return"image"===a.mediaType}).length;if(2>i)return{type:"image_count_is_less_than_minimum",data:2};if(!b([a,e],[[220,940,60,5e3]]))return{type:"bad_size",data:{}};if(h.hasAnyLayoutsAbove(g.layout))return{type:"has_layouts_above"};if(g.layout.squareImage)return{type:"bad_size",data:{}};var j=c["Grid (with margins and text below)"](a,e,f);return d(j,a)},"Grid (with margins)":function(e,f,g,h,i){var j=g.filter(function(a){return"image"===a.mediaType}).length;if(2>j)return{type:"image_count_is_less_than_minimum",data:2};if(!b([e,f],[[220,940,60,5e3]]))return{type:"bad_size",data:{}};if(h.layout.squareImage)return{type:"bad_size",data:{}};if(a.moreStripGalleries&&i.hasAnyLayoutsAbove(h.layout))return{type:"has_layouts_above"};var k=c["Grid (with margins)"](e,f,g);return d(k,e)},Honeycomb:function(a,d,e,f,g){var h=e.filter(function(a){return"image"===a.mediaType}).length;return 2>h?{type:"image_count_is_less_than_minimum",data:2}:b([a,d],[[940,940,60,5e3]])?g.hasAnyLayoutsAbove(f.layout)?{type:"has_layouts_above"}:c.Honeycomb(a):{type:"bad_size",data:{}}},Image:function(a,d,e){var f=e.filter(function(a){return"image"===a.mediaType}).length;return a>60&&d>60&&1>f?{type:"image_count_is_less_than_minimum",data:1}:b([a,d],[[1,940,1,5e3]])?c.Image():{type:"bad_size",data:{}}},"Wix Video":function(a,d,e){var f=e.filter(function(a){return"video"===a.mediaType}).length;return 1>f?{type:"no_video",data:2}:b([a,d],[[1,940,1,5e3]])?c["Wix Video"]():{type:"bad_size",data:{}}},Impress:function(a,d,e){var f=e.filter(function(a){return"image"===a.mediaType}).length;return 2>f?{type:"image_count_is_less_than_minimum",data:2}:b([a,d],[[700,940,300,380],[780,940,380,460],[860,940,460,540],[940,940,540,620]])?c.Impress(a):{type:"bad_size",data:{}}},Masonry:function(a,d,e,f,g){var h=e.filter(function(a){return"image"===a.mediaType}).length;return 2>h?{type:"image_count_is_less_than_minimum",data:2}:b([a,d],[[940,940,60,5e3]])?g.hasAnyLayoutsAbove(f.layout)?{type:"has_layouts_above"}:c.Masonry(a):{type:"bad_size",data:{}}},Slider:function(d,e,f,g,h){var i=f.filter(function(a){return"image"===a.mediaType}).length;return 2>i?{type:"image_count_is_less_than_minimum",data:2}:b([d,e],[[220,460,140,380],[300,460,380,460],[460,940,220,460],[300,940,460,540],[380,940,540,620],[460,940,620,700],[540,940,700,780],[620,940,780,860],[700,940,860,5e3]])?a.moreStripGalleries&&h.hasAnyLayoutsAbove(g.layout)?{type:"has_layouts_above"}:c.Slider(d):{type:"bad_size",data:{}}},Slideshow:function(d,e,f,g,h){var i=f.filter(function(a){return"image"===a.mediaType}).length;return 2>i?{type:"image_count_is_less_than_minimum",data:2}:b([d,e],[[61,940,61,5e3]])?a.moreStripGalleries&&h.hasAnyLayoutsAbove(g.layout)?{type:"has_layouts_above"}:c.Slideshow():{type:"bad_size",data:{}}},"Strip Image":function(a,d,e){var f=e.filter(function(a){return"image"===a.mediaType}).length;return 1>f?{type:"image_count_is_less_than_minimum",data:1}:b([a,d],[[940,940,1,5e3]])?c["Strip Image"]():{type:"bad_size",data:{}}},"Strip Showcase":function(a,d,e){var f=e.filter(function(a){return"image"===a.mediaType}).length;return 2>f?{type:"image_count_is_less_than_minimum",data:2}:b([a,d],[[940,940,100,5e3]])?c["Strip Showcase"]():{type:"bad_size",data:{}}},"Strip Slideshow":function(a,d,e){var f=e.filter(function(a){return"image"===a.mediaType}).length;return 2>f?{type:"image_count_is_less_than_minimum",data:2}:b([a,d],[[940,940,100,5e3]])?c["Strip Slideshow"]():{type:"bad_size",data:{}}},"Strip Video":function(a,d,e){var f=e.filter(function(a){return"video"===a.mediaType}).length;return 1>f?{type:"no_video",data:2}:b([a,d],[[940,940,1,5e3]])?c["Strip Video"]():{type:"bad_size",data:{}}},Thumbnails:function(d,e,f,g,h){var i=f.filter(function(a){
return"image"===a.mediaType}).length;return 2>i?{type:"image_count_is_less_than_minimum",data:2}:b([d,e],[[300,940,300,460],[380,940,460,620],[460,940,620,700],[540,940,700,780],[700,940,780,860],[780,940,860,5e3]])?a.moreStripGalleries&&h.hasAnyLayoutsAbove(g.layout)?{type:"has_layouts_above"}:c.Thumbnails(d):{type:"bad_size",data:{}}},video:function(a,d,e){var f=e.filter(function(a){return"extVideo"===a.mediaType}).length;return 1>f?{type:"no_video",data:2}:b([a,d],[[200,940,160,5e3]])?c.video():{type:"bad_size",data:{}}}}}}])}(core||(core={})),angular.module("siteGeneratorStaticsCoreAppInternal").factory("MenuOverridesManager",function(){function a(){this.menuOverrides={alignment:"center",stretchButtons:!0},this.alignment=function(a){return void 0===a?this.menuOverrides.alignment:void(this.menuOverrides.alignment=a)},this.stretchButtons=function(a){return void 0===a?this.menuOverrides.stretchButtons:void(this.menuOverrides.stretchButtons=a)}}return a});var MenuService=function(){function a(a,b,c,d){this.modelTree=a,this.documentServicesMediator=b,this.previewService=c,this.flags=d,this.menuItems=[],this.resolveDocumentId=null,this.dataLoaded=!1}return a.$inject=["modelTree","documentServicesMediator","previewService","flags"],a.prototype.initialize=function(){var a=this;if(!this.resolveDocumentId)throw new Error("menuService::assignDocumentPageIdResolver must be set before init!");if(!this.dataLoaded){var b=this.modelTree.getPagesNodes();_.each(b,function(b){a.add(b)})}this.documentUpdateMenu()},a.prototype.updateMenu=function(){this.documentUpdateMenu()},a.prototype.reset=function(){this.menuItems.length=0,this.dataLoaded=!1},a.prototype.cleanUpData=function(a){var b=this;_.each(a,function(a){delete a.$$hashKey,delete a.menuId,b.cleanUpData(a.children)})},a.prototype.serialize=function(){var a=ob.deepClone(this.menuItems);return this.cleanUpData(a),JSON.stringify(a)},a.prototype.deserialize=function(a){a=_.isString(a)?JSON.parse(a):ob.deepClone(a),this.cleanUpData(a),this.dataLoaded=!0,this.menuItems=_.uniq(a,function(a){return a.id})},a.prototype.removeMenuItem=function(a){var b=a.parent&&a.parent.children||this.menuItems;b.splice.apply(b,[a.itemIndex,1].concat(a.item.children))},a.prototype.isLinkToNode=function(a,b){return a.anchor&&a.id===b.id&&(a.pageId===b.containerPageId||!a.pageId)},a.prototype.shouldHide=function(a){return a.isHiddenFromMenu},a.prototype.getLinkToNode=function(a){var b=this;return this.findMenuItemAndParent(function(c){return b.isLinkToNode(c,a)})},a.prototype.addLinkToNode=function(a,b){var c=this.pagesManager.addAnchorLink(a),d=this.add(a,b),e=d.item;this.shouldHide(e)?e.menuId=null:e.menuId=this.documentServicesMediator.addMenuLinkItem(c,e.name,_.get(d,["parent","menuId"]))},a.prototype.removeLinkToNode=function(a){var b=this.getLinkToNode(a);b&&(this.pagesManager.removeAnchorLink(a),this.removeMenuItem(b),b.item.menuId&&this.documentServicesMediator.removeMenuItem(b.item.menuId))},a.prototype.toggleLinkToNode=function(a){var b=this.getLinkToNode(a);b?this.removeLinkToNode(a):this.addLinkToNode(a)},a.prototype.calcIndexWithoutHiddens=function(a,b){return a-b.slice(0,a).filter(function(a){return a.isHiddenFromMenu}).length},a.prototype.ensureLinkToNodePosition=function(a,b){var c=this.menuItems[b];if(!c||!this.isLinkToNode(c,a)){var d=this.getLinkToNode(a);if(d){_.pull(d.parent&&d.parent.children||this.menuItems,d.item),this.menuItems.splice(b,0,d.item);var e=this.calcIndexWithoutHiddens(b,this.menuItems);this.documentServicesMediator.moveMenuItem(d.item.menuId,void 0,e)}}},a.prototype.addLinkToPage=function(a,b){var c=this.add(a,b);return c.item.menuId=this.documentFindPageMenuItem(c.item),c},a.prototype.add=function(a,b){var c=this.createFromNode(a),d={item:c},e=b&&this.getLinkToPage(b);return e?(e.item.children.push(c),d.parent=e.item):this.menuItems.push(c),d},a.prototype.isLinkPage=function(a,b){return a.page&&a.id===b},a.prototype.getLinkToPage=function(a){var b=this;return this.findMenuItemAndParent(function(c){return b.isLinkPage(c,a)})},a.prototype.removeLinkToPage=function(a){var b=this.getLinkToPage(a);b&&this.removeMenuItem(b)},a.prototype.isOuterLevelById=function(a){return _.some(this.menuItems,"id",a)},a.prototype.toggleNestingById=function(a){var b=this.getLinkToPage(a);if(b)if(b.parent){this.menuItems.splice(b.parentIndex+1,0,b.parent.children.splice(b.itemIndex,1).pop());var c=this.calcIndexWithoutHiddens(b.parentIndex+1,this.menuItems);this.documentServicesMediator.moveMenuItem(b.item.menuId,void 0,c)}else if(b.itemIndex>0){var d=this.menuItems[b.itemIndex-1];d.children.push(this.menuItems.splice(b.itemIndex,1).pop());var c=this.calcIndexWithoutHiddens(d.children.length-1,d.children);this.documentServicesMediator.moveMenuItem(b.item.menuId,d.menuId,c)}},a.prototype.updateLinkToPage=function(a){var b=this.getLinkToPage(a.id);b&&(b.item.name=a.getDisplayName())},a.prototype.updateLinkToNode=function(a,b){var c=this.getLinkToNode(a);c&&(c.item.name=b,c.item.menuId&&!this.shouldHide(c.item)&&this.documentServicesMediator.setMenuItemLabel(c.item.menuId,b))},a.prototype.updateLinkToNodeVisibility=function(b){var c=this.getLinkToNode(b);c&&(c.item.isHiddenFromMenu=!!b.getMetadatum(a.HiddenFromMenu),this.documentRefresh())},a.prototype.assignDocumentPageIdResolver=function(a){this.resolveDocumentId=a},a.prototype.setPagesManager=function(a){this.pagesManager=a},a.prototype.refresh=function(){this.documentRefresh()},a.prototype.createFromNode=function(b){var c={id:b.getId(),children:[],name:void 0,isHiddenFromMenu:!!b.getMetadatum(a.HiddenFromMenu)};return b.isPage()?(c.page=!0,c.name=b.getDisplayName()):(c.anchor=!0,c.pageId=b.containerPageId,c.name=b.getMetadatum(a.NameInMenu)||b.alias||b.contentElementType),c},a.prototype.getMenuItems=function(a){var b=this;return this.menuItems.filter(function(c){return c.page===!0&&(!a||a&&!b.pagesManager.isHiddenPage(c.id))})},a.prototype.findMenuItemAndParent=function(a){var b={item:void 0,itemIndex:void 0,parent:void 0,parentIndex:void 0};return _.some(this.menuItems,function(c,d){return a(c)?(b.item=c,b.itemIndex=d,!0):_.some(c.children,function(e,f){return a(e)?(b.item=e,b.itemIndex=f,b.parent=c,b.parentIndex=d,!0):void 0})}),b.item&&b||null},a.prototype.documentUpdateMenu=function(){var a=this;this.documentServicesMediator.siteChanges.register(function(){return a.documentRefresh()})},a.prototype.fixMissingPages=function(){var a=this,b=_.union(_.collect(this.menuItems,"id"),_(this.menuItems).collect("children").flatten().collect("id").value());_.each(this.modelTree.getPagesNodes(),function(c){-1===b.indexOf(c.id)&&a.addLinkToPage(c)})},a.prototype.documentRefresh=function(){var a=this;this.fixMissingPages();var b=[];_.each(this.menuItems,function(c,d){var e=a.documentMenuUpdate(c,null,d);b.push(e),_.each(c.children,function(c,d){b.push(a.documentMenuUpdate(c,e,d))}),_.remove(c.children,function(b){return!b.menuId&&!a.shouldHide(b)})}),_.remove(this.menuItems,function(b){return!b.menuId&&!a.shouldHide(b)}),_.each(this.documentServicesMediator.getMenuItems(),function(c){_.each(c.items,function(c){-1===b.indexOf(c.id)&&a.documentServicesMediator.isMenuItemRemovable(c.id)&&a.documentServicesMediator.removeMenuItem(c.id)}),-1===b.indexOf(c.id)&&a.documentServicesMediator.isMenuItemRemovable(c.id)&&a.documentServicesMediator.removeMenuItem(c.id)})},a.prototype.pageLinkMatch=function(a,b){return a&&a.link&&a.link.pageId===b&&"PageLink"===a.link.type},a.prototype.documentFindMenuItem=function(a){var b=null;return _.find(this.documentServicesMediator.getMenuItems(),function(c){return a(c)?(b=c,!0):c.items&&c.items.length>0?_.find(c.items,function(c){return a(c)?(b=c,!0):void 0}):void 0}),b},a.prototype.documentFindPageMenuItem=function(a){var b,c=this,d=this.resolveDocumentId(a.id),e="#"+d;return a.menuId&&(b=this.documentFindMenuItem(function(b){return b.id===a.menuId})),b||(b=this.documentFindMenuItem(function(a){return c.pageLinkMatch(a,e)})),a.menuId=b&&b.id,a.menuId},a.prototype.createOrUpdateAnchorMenuItem=function(a){var b,c=this.modelTree.findById(a.id,a.pageId||this.modelTree.homePageId),d=this.pagesManager.getAnchorLinkObj(c);return a.menuId&&(b=this.documentFindMenuItem(function(b){return b.id===a.menuId})),this.shouldHide(a)?(a.menuId=null,null):b?d?(this.documentServicesMediator.updateMenuLinkItem(b.id,d),this.documentServicesMediator.setMenuItemLabel(b.id,a.name),b.id):void(a.menuId=null):(a.menuId=d&&this.documentServicesMediator.addMenuLinkItem(d,a.name),a.menuId)},a.prototype.documentMenuUpdate=function(a,b,c){var d,e=this;if(a.page?d=this.documentFindPageMenuItem(a):a.anchor&&(d=this.createOrUpdateAnchorMenuItem(a)),d){if(b){var f=this.documentFindMenuItem(function(a){return a.id===d});_.each(f&&f.items,function(a){var b=e.calcIndexWithoutHiddens(e.menuItems.length,e.menuItems);e.documentServicesMediator.moveMenuItem(a.id,void 0,b)})}var g=this.calcIndexWithoutHiddens(c,this.menuItems);return this.documentServicesMediator.moveMenuItem(d,b,g),d}return null},a}();MenuService.NameInMenu="nameInMenu",MenuService.HiddenFromMenu="hiddenFromMenu",angular.module("siteGeneratorStaticsCoreAppInternal").service("menuService",MenuService);var core;!function(a){var b=["Welcome","About","Quote","Service","TeamMember","Product","Careers","SpecialOffer","Testimonial","Donation","Membership","Project","Portfolio","Client","Feature","FAQ","Event","News","Facility","OpeningHours","Homepage_about","Inner_about","CV","Subscribe","Social","Contact","Widget"],c=function(){function a(a,b,c,d,e,f,g,h,i,j,k,l,m){var n=this;this.$log=a,this.TreeNode=b,this.bft=c,this.siteModelData=d,this.storyServices=e,this.nodeFilterTypes=f,this.$p=g,this.flags=h,this.ContentElement=i,this.referenceFields=j,this.tpaService=k,this.obMonitoring=l,this.documentServicesMediator=m,this.context={},this.footerNode=null,this.minIdForFirstLevel=100,this.minIdForPage=1e3,this.availableNodes=[],this.tpaNodes=[],this.tpaWidgetsNodes=[],this.tpaWidgetsTypes=[],this.tpaSectionTypes=[],this.listNodes=[],this.toString=function(){return n.reduceTraverse(n.data,function(){return!0},function(a,b,c,d){return d+=a.toString()},"")},this.getAvailableNodes=function(){return n.availableNodes},this.getAvailableWidgetsNodes=function(){return n.tpaWidgetsNodes},this.getAvailableWidgetsTypes=function(){return n.tpaWidgetsTypes},this.getAvailableTpaTypes=function(){return n.tpaSectionTypes},this.getTpaNodes=function(){return n.tpaNodes},this.getListNodes=function(){return n.listNodes},this.traverse=function(a,b){return n.traverseNode(n.data,a,b)},this.getAnchorDataId=function(a){return"adi_"+a.containerPageId+"_"+a.id.replace(/\./g,"_")},this.getAnchorName=function(a){return n.getPageById(a.containerPageId)+": "+a.contentElementType},this.isSiteMenuVisible=function(){return _.get(n.getGeneralInformation(),["contentElement","argsMatchingPolicy","Menu"])},this.getFooterInformation=function(){return _.find(n.footerNode.children,"contentElementType","GeneralDescription")},this.switchLocale=function(){return n.populateTree({})},this.find=function(a){return t.find(n.data,a)},this.isReferenceField=function(a,b){return _.indexOf(n.referenceFields[a],b)>-1},this.setContainerPageId=function(a,b){return n.traverseNode(a,function(a){return a.setContainerPageId(b)})}}return a.$inject=["$log","TreeNode","bft","siteModelData","storyServices","nodeFilterTypes","$p","flags","ContentElement","referenceFields","tpaService","obMonitoring","documentServicesMediator"],a.prototype.setContext=function(a){this.context=a,this.populateTree(a)},a.prototype.deleteNode=function(a){var b=a.getDependencies();if(a.isOriginalNode(this)&&b.length>0)return b;var c=this.deleteSingleNode(a);return this.deleteEmptyLists(),this.updateAvailableNodes(),c},a.prototype.deleteEmptyLists=function(){var a=this;this.traverse(function(b){"contentElementList"===b.getNodeType()&&0===b.children.length&&a.deleteSingleNode(b)})},a.prototype.getDependentPages=function(a,b){var c=this;return _.chain(a).map(function(a){return a.getContainerPageId()}).uniq().compact().without(b).map(function(a){return c.getPageById(a)}).value()},a.prototype.markPageNodeAsDirty=function(a){a.containerPageId&&!a.isUserHidden()&&this.markPageAsDirty(a.containerPageId)},a.prototype.markPageAsDirty=function(a){var b=this.findPageNodeByName(a);b&&(b.dirty=!0)},a.prototype.deleteConfirmed=function(a,b){var c=this,d=[],e=this.storyServices.story&&this.storyServices.story.getContentForActiveLocale();return b&&(e&&this.traverseNode(a,function(a){delete e[c.siteModelData.safeId(a.id)]}),d=_.collect(a.getDependencies(),function(a){return c.markPageNodeAsDirty(a),c.deleteSingleNode(a)})),d.push(this.deleteSingleNode(a)),this.deleteEmptyLists(),this.updateAvailableNodes(),d},a.prototype.deleteSingleNode=function(a){var b,c=this;return this.traverse(function(d,e){a===d&&(b=e,e.children.splice(e.children.indexOf(a),1),c.traverseNode(d,function(a){return a.unRegister()}))}),b},a.prototype.addChildToNode=function(a,b,c){var d=this;a.children=a.children||[];var e=b?b:this.getNextListItemId(a),f=new this.TreeNode({type:"contentElement",contentElementType:c?c:a.getContentElementType(),children:[]},e);if(a.isList()){var g=_.find(this.data.children,function(b){return b.getId()===a.getId()});this.populateNode(f,g,this.context),g.addChild(f),this.traverse(function(b){if(b.getId()===a.getId()&&b!==a&&b.getContainerPageId()){var c=f.duplicate();c.userHidden=!0,b.addChild(c),d.setContainerPageId(c,b.getContainerPageId()),d.populateAddedNode(c,b)}});var h=_.find(a.children,function(a){return!a.contentElement.isSpecialListItem()});_.each(f.contentElement.values,function(a,b){a.displayName=h.contentElement.values[b].displayName}),f=f.duplicate()}return this.populateNode(f,a,this.context),a.addChild(f),this.setContainerPageId(f,a.isPage()?a.getId():a.getContainerPageId()),f},a.prototype.serialize=function(a){return this.flags.consumerMode&&(this.data.nextFirstLevelNodeId=this.storyServices.nextFirstLevelNodeId,this.data.nextPageNodeId=this.storyServices.nextPageNodeId),a?{data:this.data.toJSON(),homePageId:this.homePageId}:{data:this.data.toJSON(),homePageId:this.homePageId,context:this.context,footerNode:this.footerNode}},a.prototype.deserialize=function(a){var b=this,c=_.isString(a)?JSON.parse(a):ob.deepClone(a);return this.data=t.map(c.data,function(a){"page"===a.type&&"none"===a.contentElementType&&(a.contentElementType="Page"),"footer"===a.type&&(a.contentElementType="footer");var c=new b.TreeNode(a,a.id);return"footer"===a.type&&(b.footerNode=c),c}),this.data.nextFirstLevelNodeId=c.data.nextFirstLevelNodeId||this.minIdForFirstLevel,this.data.nextPageNodeId=c.data.nextPageNodeId||this.minIdForPage,this.footerNode||this.addFooterPageToTree(),this.homePageId=c.homePageId,this.populateTree({}),this.updateAvailableNodes()},a.prototype.initialize=function(a){var b=this;return this.bft.getBft().then(function(c){b.data=c.duplicate(!0);var d=_.find(c.children,{contentElementType:"GeneralDescription"});d&&(b.data.children=[d.duplicate()]),b.data.nextFirstLevelNodeId=b.minIdForFirstLevel,b.data.nextPageNodeId=b.minIdForPage,b.setContext(a),b.updateAvailableNodes()})},a.prototype.addHeader=function(a,b){var c="ListHeader"===b?"contentElementList":"page";if(a.getNodeType()===c){var d=new this.TreeNode({type:"contentElement",contentElementType:b,children:[],containerPageId:"page"===c?a.id:a.containerPageId},a.getId()+".header");return a.children.unshift(d),d}},a.prototype.addFooter=function(a){if("contentElementList"===a.getNodeType()){var b=new this.TreeNode({type:"contentElement",contentElementType:"ListFooter",children:[],containerPageId:a.containerPageId},a.getId()+".footer");a.children.push(b)}},a.prototype.addHomePageTeaser=function(a){if("contentElementList"===a.getNodeType()){var b=new this.TreeNode({type:"contentElement",contentElementType:"HomePageTeaser",children:[],containerPageId:a.containerPageId,userHidden:!0},a.getId()+".hpTeaser");a.children.unshift(b)}},a.prototype.maxFirstLevelChildId=function(){if(this.flags.consumerMode){var a=++this.storyServices.nextFirstLevelNodeId;if(isNaN(a))return this.obMonitoring.error("nextFirstLevelNodeId is NaN",{functionName:"maxFirstLevelChildId"}),this.storyServices.nextFirstLevelNodeId=this.minIdForFirstLevel+10,this.maxFirstLevelChildId();var b="1."+a;return _.find(this.data.children,function(a){return a.id===b})?(this.obMonitoring.error("nextFirstLevelNodeId duplicates",{functionName:"maxFirstLevelChildId"}),this.storyServices.nextFirstLevelNodeId+=10,this.maxFirstLevelChildId()):a}return++this.data.nextFirstLevelNodeId},a.prototype.maxPageNodeId=function(){if(this.flags.consumerMode){var a=++this.storyServices.nextPageNodeId;if(isNaN(a))return this.obMonitoring.error("nextPageNodeId is NaN",{functionName:"maxPageNodeId"}),this.storyServices.nextPageNodeId=this.minIdForPage+10,this.maxPageNodeId();var b="page"+a;return _.find(this.data.children,function(a){return a.id===b})?(this.obMonitoring.error("nextPageNodeId duplicates",{functionName:"maxPageNodeId"}),this.storyServices.nextPageNodeId+=10,this.maxPageNodeId()):a}return++this.data.nextPageNodeId},a.prototype.replaceNode=function(a,b){this.setContainerPageId(a,b.id);var c=_.findIndex(b.children,function(b){return b.getId()===a.getId()});return-1===c?this.$log.error("node does not exist in the page, node id: "+a.getId()):(this.unRegisterNode(b.children[c]),b.children[c]=a,this.registerNode(a)),a},a.prototype.addNewNodeWithValues=function(a,b,c){var d=_.find(this.data.children,{id:a.getId()});d||(a.setId(this.data.getId()+"."+this.maxFirstLevelChildId()),this.siteModelData.setCEValuesFromNode(a,this.storyServices.story),d=a.duplicate(),this.setContainerPageId(d,void 0),this.data.children.push(d),this.populateAddedNode(d),this.updateAvailableNodes());var e=_.findIndex(b.children,function(a){return a.getId()===c});return-1===e&&(e=0),this.registerNode(a),this.setContainerPageId(a,b.id),b.addChild(a,e+1),a},a.prototype.addNodeToTree=function(a){var b=a.duplicate();return b.setId(this.data.getId()+"."+this.maxFirstLevelChildId()),this.setContainerPageId(b,void 0),this.data.children.push(b),this.addHeader(b,"ListHeader"),this.addFooter(b),this.addHomePageTeaser(b),this.populateAddedNode(b),this.updateAvailableNodes(),b},a.prototype.createNodeFromCE=function(a,b){var c=this,d="dummyPage";if(a.items){var e=new this.TreeNode({type:"contentElementList",contentElementType:a.type,children:[],containerPageId:d},b);if(a.header){var f=new this.TreeNode({type:"contentElement",contentElementType:"ListHeader",children:[],containerPageId:d},b+".header");f.parent=e,f.populate(a.header,e),e.children.push(f)}if(_.each(a.items,function(d,f){var g=new c.TreeNode({type:"contentElement",contentElementType:a.type,children:[],containerPageId:"fakePage"},b+"."+f);g.parent=e,g.populate(d,e),e.children.push(g)}),a.footer){var g=new this.TreeNode({type:"contentElement",contentElementType:"ListFooter",children:[],containerPageId:d},b+".footer");g.parent=e,g.populate(a.footer,e),e.children.push(g)}return e}var h=new this.TreeNode({type:"contentElement",contentElementType:a.type,children:[],containerPageId:"dummyPage"},b);return h.hiddenMedia=a.hiddenMedia,h.populate(a),h},a.prototype.duplicateNodeAndContentElementForPresetPreview=function(a){var b=this,c=a.duplicate(),d=function(a,c,d){a.parentContentElementType=c.parentContentElementType,a.isListItem=c.isListItem;var e=c.contentElement;if(e){var f=new b.ContentElement(e.type);f.values=e.values,a.populate(f,d),_.assign(f.argsMatchingPolicy,e.argsMatchingPolicy)}};return d(c,a),_.each(c.children,function(b,e){d(b,a.children[e],c)}),this.traverseNode(c,function(a){a.identifyingNode=c}),c},a.prototype.duplicateNodeForLayoutPresetPreview=function(a,b){var c=this,d=function(a){var b=new c.TreeNode(_.extend({},a.nodeDescription,a),a.id);return b.children=_.collect(a.children,function(a){return d(a)}),b.parentContentElementType=a.parentContentElementType,b.contentElement=a.contentElement,b.isListItem=a.isListItem,b},e=d(a);return a.containerPageId&&this.setContainerPageId(e,b),this.traverseNode(e,function(a){a.identifyingNode=e}),e},a.prototype.addNewNode=function(a,b,c){var d=this.addNodeToTree(a);return this.addExistingNode(d,b,void 0,c)},a.prototype.addExistingNode=function(a,b,c,d){var e=a.duplicate();return c&&e.copyStateFrom(c),b.addChild(e,d),b.isPage()&&this.setContainerPageId(e,b.getId()),this.populateAddedNode(e,b),this.updateFieldsVisibility(e,b),this.updateNodeVisibility(e,b),e},a.prototype.duplicatePage=function(a){var b=this,c=this.addPageToTree(a.displayName+" copy");return _.each(a.children,function(a){if("Contact"===a.contentElementType){var d=b.duplicateNodeAndContentElementForPresetPreview(a);return b.addExistingNode(d,c,a,void 0)}"PageHeader"!==a.contentElementType&&b._duplicateNode(a,c)}),this.updateAvailableNodes(),c},a.prototype._duplicateNode=function(a,b,c){var d=_.find(this.data.children,function(b){return b.getId()===a.getId()}),e=d.duplicate();if(e.setId(this.data.getId()+"."+this.maxFirstLevelChildId()),this.data.children.push(e),d.isList())for(var f=0;f<d.children.length;f++)this.populateDuplicatedNode(e.children[f],e,d.children[f]);else this.populateDuplicatedNode(e,this.data,d);return a.isTpaWidget&&this.tpaService.cloneStyle(a,e),this.addExistingNode(e,b,a,c)},a.prototype.duplicateNode=function(a,b){var c=this._duplicateNode(a,b,b.children.indexOf(a)+1);return this.updateAvailableNodes(),c},a.prototype.duplicateListItem=function(a,b,c){var d=this,e=_.find(this.data.children,function(a){return a.getId()===b.getId()});c=c||_.indexOf(b.children,a)+1;var f=new this.TreeNode({type:"contentElement",contentElementType:b.getContentElementType(),children:[]},this.getNextListItemId(e));return e.addChild(f,c),this.populateDuplicatedNode(f,e,a),this.traverse(function(a){if(a.getId()===e.getId()&&a!==e){var g=f.duplicate();g.userHidden=a!==e&&a!==b,a.addChild(g,c),d.setContainerPageId(g,a.getContainerPageId()),d.populateAddedNode(g,a)}}),b.updateZigZagState(),b.children[c]},a.prototype.getTpaWidgetsInPage=function(a,b){return _.filter(a.children,function(a){return a.isTpaWidget&&!a.isTpaMultiSection()&&a.contentElementType.indexOf(b)>-1})},a.prototype.getGeneralInformation=function(){return this.data?_.find(this.data.children,{contentElementType:"GeneralDescription"}):void 0},a.prototype.isSiteHeaderVisible=function(){var a=this.getGeneralInformation();return a&&this.isNodeVisible(a)},a.prototype.isSiteFooterVisible=function(){var a=this;return _.all(this.footerNode.children,function(b){return a.isNodeVisible(b)})},a.prototype.getNodeByContentElementName=function(a){var b=this.traverse(function(b){return b&&"contentElement"===b.getNodeType()&&b.getContentElementType()===a},!0);return b?b.node:null},a.prototype.getPortfolioClusterList=function(){var a={};return this.traverse(function(b){b&&"portfolio"===b.getNodeType()&&(a[b.getId()]=[],angular.forEach(b.children,function(c){a[b.getId()].push(c.getId())}))}),a},a.prototype.getPagesList=function(){return _.collect(this.getPagesNodes(!0),function(a){return a.getId()})},a.prototype.getPageById=function(a){var b=this.getPageNodeById(a);return b?b.getDisplayName():void 0},a.prototype.getPageNodeById=function(a){for(var b=this.getPagesNodes(),c=0;c<b.length;c++)if(b[c].getId()===a)return b[c]},a.prototype.getPagesNodes=function(a){var b=[],c=function(a){return a&&"page"===a.getNodeType()&&a.getId()};return this.traverse(function(d){var e=c(d);return!e||a&&"portfolio"===d.getSubType()?void 0:(b.push(d),!0)}),b},a.prototype.getListNodesFromPagesByType=function(a){var b=this.getPagesNodes(),c=[];return _.each(b,function(b){_.each(b.children,function(b){b.contentElementType===a&&b.isList()&&c.push(b)})}),c},a.prototype.getNodeById=function(a){var b=this.traverse(function(b){return b&&b.getId()===a},!0);return b?b.node:null},a.prototype.findPageNodeByName=function(a,b){void 0===b&&(b="page");var c=this.traverse(function(c){return c&&c.getNodeType()===b&&c.getId()===a},!0);return c?c.node:null},a.prototype.firstModelCreation=function(a){var b=this,c=this.addPageToTree(a),d=this.addFooterPageToTree(),e=this.getGeneralInformation();if(e){var f=e.duplicate();this.populateAddedNode(f,d),f.setContainerPageId("footer");var g=this.siteModelData.getDefaultCheckBoxesValues(f,this.storyServices.story,d,!0);_.each(Object.keys(g),function(a){f.getArgsMatchingPolicy()[a]=g[a]}),d.children.push(f)}return this.setHomePage(c),this.updateAvailableNodes().then(function(){return _.each(b.getAvailableNodes(),function(a){var c=a.getContentElementType();("Social"===c||"Contact"===c)&&b.addNodeToTree(a)}),c})},a.prototype.addFooterPageToTree=function(){return this.footerNode=this.data.makeFooterNode(),this.data.children.push(this.footerNode),this.footerNode},a.prototype.getPageSEODefaults=function(a){var b={},c=DocumentServicesMediator.SEO_VALIDATIONS.TITLE_MAX_LENGTH,d=this.getGeneralInformation(),e=d.contentElement.values;return b.pageTitleSEO=a.displayName,e.BusinessName&&e.BusinessName.value&&e.BusinessName.value.length<=c-b.pageTitleSEO.length-3&&(b.pageTitleSEO+=" | "+e.BusinessName.value),e.City&&e.City.value&&e.City.value.length<=c-b.pageTitleSEO.length-3&&(b.pageTitleSEO+=" | "+e.City.value),b.pageTitleSEO=this.documentServicesMediator.getValidSeoTitle(b.pageTitleSEO),e.BusinessTagline&&e.BusinessTagline.value&&(b.metaKeywordsSEO=this.documentServicesMediator.getValidSeoKeywords(e.BusinessTagline.value)),b},a.prototype.addPageToTree=function(a,b,c){var d=this.getUniqeId(),e=this.data.makePageNode(a,d,c);"portfolio"===c&&(e.parentPortfolioId=b.getId()),b?b.children.push(e):this.data.children.push(e);var f=this.addHeader(e,"PageHeader");return this.populateAddedNode(e),this.flags.consumerMode&&(f.userHidden=!0,e.alias=a),this.updateFieldsVisibility(f,e,null,!0),e},a.prototype.removePageFromTree=function(a){var b=this,c=this.traverse(function(b){return b&&"page"===b.getNodeType()&&b.getId()===a},!0);if(c){var d=c.node,e=c.parent;this.traverseNode(d.children,function(a){return a.unRegister()}),e.children.splice(e.children.indexOf(d),1);var f={};return this.siteModelData.applyFunctionForEveryCEInAllLocales(function(b,c){angular.forEach(b,function(b){"button"===b.type&&b.value&&b.value.isPageRef&&b.value.targetPage===a&&(b.value.isPageRef=!1,b.value.targetUrl="",f[c]=!0)})}),d.tpaSection&&_(this.getPagesNodes()).filter(function(a){return a.tpaExtraPage&&-1!==a.tpaExtraPage.indexOf(d.tpaSection)}).each(function(a){b.removePageFromTree(a.getId())}).value(),{pageNode:d,localesChanged:f}}},a.prototype.addPortfolioClusterToTree=function(a){var b=this.data.makePortfolioClusterNode(a,this.getUniqeId("portfolio"));if(this.data.children.push(b),b.shouldPopulate()){var c=this.siteModelData.getCEForNode(b.getContentElementType(),b.getId(),this.context.vertical,this.data,this.storyServices.story);b.populate(c,this.data)}return b},a.prototype.getValidPagesForNode=function(a){var b=this.getPagesNodes(),c=a.containerPageId;return _.filter(b,function(b){return b.id!==c&&!b.tpaExtraPage&&!b.tpaSection&&0===_.where(b.children,{id:a.id}).length})},a.prototype.getDataHoldersAndExistingNodesForPage=function(a,b,c){var d=this,e=this.nodeAvailableForPage(a);if(!e||0===e.length)return[];var f=_(this.getPagesNodes()).filter(function(b){return!(a&&b.id===a.id)}).collect(function(a){return a.children}).flatten().reduce(function(a,b){return-1===["Contact","Social","GeneralDescription"].indexOf(b.contentElementType)&&(a[b.id]||(a[b.id]=b.containerPageId)),a},{}),g=[];_.each(e,function(a){!f[a.id]&&a.source&&(a.containerSourceName=a.source,a.getContentElementType()===b&&a.isList()===c&&g.push(a))});var h=[];return _.keys(f).length&&_.each(e,function(a){f[a.id]&&(a.getContentElementType()===b&&a.isList()===c&&h.push(a),a.containerPageName=d.getPageNodeById(f[a.id]).getDisplayName())}),{existingNodes:h,dataHolders:g}},a.prototype.isTypeUsedInPage=function(a,b){var c=_(this.getPagesNodes()).collect(function(a){return a.children}).flatten().find(function(c){return a&&c.alias?a===c.alias:c.contentElementType===b});return void 0!==c},a.prototype.nodeAvailableForPage=function(a){var b=this;return this.data?this.data.children.filter(function(c){if(c.hasContentElement()&&c.getContentElement().getUsageLimitation()&&"body"!==c.getContentElement().getUsageLimitation())return!1;if(c.isPage())return!1;if(c.isFooter())return!1;var d=b.traverseNode(a,function(a){return a.getId()===c.getId()},!0);return d?!1:c}):[]},a.prototype.traversePage=function(a,b){this.traverseNode(this.findPageNodeByName(a),b)},a.prototype.traverseFooter=function(a){this.traverseNode(this.footerNode,a)},a.prototype.traverseWithoutPages=function(a){this.traverse(function(b){return b.isPage()?!0:a(b)})},a.prototype.getAllVisibleContentElements=function(){var a=[];return this.traverseWithoutPages(function(b){b.hasContentElement()&&!b.isUserHidden()&&a.push(b.getContentElement())}),a},a.prototype.findById=function(a,b){return this.find(function(c){return c.id===a&&(!b||c.containerPageId===b)})},a.prototype.findByIdInFooter=function(a){return t.find(this.footerNode,function(b){return b.id===a})},a.prototype.findNodeAndParentAndPageByNodeId=function(a,b){var c={};return c.pageNode=this.findById(b),c.node=t.find(c.pageNode,function(b,d){return c.parentNode=d,b.id===a}),c.pageNode&&c.node&&c},a.prototype.addNodeByContentType=function(a){var b=_.find(this.getAvailableNodes(),function(b){return b.getContentElementType()===a});b&&this.addNodeToTree(b)},a.prototype.handleNodePageConnectedness=function(a){a.isCrossPageConnected()?a.argsMatchingPolicy=this.data.argsMatchingPolicy:a.argsMatchingPolicy=_.clone(a.argsMatchingPolicy)},a.prototype.toggleNodeVisibility=function(a,b){var c=this,d=a.isUserHidden()&&b&&b.isList()&&b.isUserHidden()&&!b.hasVisibleChildren();a.toggleUserHidden();var e=b&&b.isList()&&!b.isUserHidden()&&!b.hasVisibleChildren();(e||d)&&b.toggleUserHidden();var f,g=[];a.isUserHidden()||(a.isList()?(a.hasVisibleChildren()||_.each(a.children,function(a){"HomePageTeaser"!==a.getContentElementType()&&(a.toggleUserHidden(),g.push(a))}),f=a):(g.push(a),f=b)),_.each(g,function(a){if(!a.hasVisibleFields()){var b=c.siteModelData.getDefaultCheckBoxesValues(a,c.storyServices.story,f);_.each(Object.keys(b),function(c){a.getArgsMatchingPolicy()[c]=b[c]})}}),this.updateFieldsVisibility(a,b,null,!0)},a.prototype.getListItems=function(a){return _.filter(a.children,function(b){return b.getContentElementType()===a.getContentElementType()})},a.prototype.updateReferenceFieldsVisibility=function(a,b,c){var d=b.split("."),e=d[0],f=d[1],g=a.getContentElement().getReferenceContentElements(e)[0];if(g){var h=g.getFieldValue(f),i=_.find(this.data.children,{contentElementType:e}),j=this.siteModelData.getDefaultValues(i,this.storyServices.story);a.updateReferenceFieldVisibility(b,g,h,c,j&&j[f])}},a.prototype.updateFieldsVisibility=function(a,b,c,d,e){var f=this;if(a.isList())_.each(a.children,function(b){f.updateFieldsVisibility(b,a,null,d,e)});else{var g=c?[c]:a.getContentElement().getKeys(),h=function(a,c,d){var e=f.siteModelData.getDefaultValues(a,f.storyServices.story,b);_.each(g,function(b){a.updateFieldVisibility(b,c,e&&e[b],d)})};h(a,d,e);var i;b&&b.isList()&&a.getContentElementType()===b.getContentElementType()?i=_.filter(this.getListItems(b),function(b){return b!==a}):a.canCrossPageConnect()&&a.isCrossPageConnected()&&(i=[],this.traverse(function(b){b.canCrossPageConnect()&&b.isCrossPageConnected()&&b!==a&&i.push(b)})),_.each(i,function(a){h(a,d||e,!1)})}},a.prototype.updateNodeVisibility=function(a,b,c){var d=this;if(!a.isList()){var e=[];if(a.hasVisibleFields()){if(c){var f=b&&b.isList()&&b.hasVisibleChildren();a.isUserHidden()&&(a.toggleUserHidden(),e.push(a),b&&b.isList()&&b.isUserHidden()&&!f&&(b.toggleUserHidden(),e.push(b)))}}else{var g=[a];b&&b.isList()&&a.getContentElementType()===b.getContentElementType()?g=this.getListItems(b):a.canCrossPageConnect()&&a.isCrossPageConnected()&&(g=[],this.traverse(function(a){
a.canCrossPageConnect()&&a.isCrossPageConnected()&&g.push(a)})),_.each(g,function(a){a.isUserHidden()||(a.toggleUserHidden(),e.push(a))}),b&&b.isList()&&!b.hasVisibleChildren()&&!b.isUserHidden()&&b.toggleUserHidden()}return e}_.each(a.children,function(b){d.updateNodeVisibility(b,a)})},a.prototype.findIdentifyingNode=function(a){if(a&&a.getId()&&this.findById){if(!a.identifyingNode){var b=this.findById(a.getId().substring(0,a.getId().lastIndexOf(".")),a.containerPageId);b&&"contentElementList"===b.getNodeType()?a.identifyingNode=b:a.identifyingNode=a}return a.identifyingNode}},a.prototype.findIdentifyingNodeId=function(a){var b=this.findIdentifyingNode(a);return b?(a.identifyingNodeId=b.getId(),a.identifyingNodeId):""},a.prototype.getTypeForLSS=function(a){if(!a)return"GeneralDescription";var b=a.contentElementType;return a&&(a.parentContentElementType&&(b+=a.parentContentElementType),a.isListItem&&(b+="List")),b},a.prototype.getTypeForLSSWithoutPartition=function(a){var b=this.getTypeForLSS(a)+"|"+_.last(this.findIdentifyingNodeId(a).split("."));return a.zigZag&&(b+="zigzag"),b},a.prototype.getMatchingPolicy=function(){return this.flags.matchingPolicy?this.flags.matchingPolicy:this.data&&this.data.matchingPolicy},a.prototype.isHomePage=function(a){return this.isHomePageId(a.getId())},a.prototype.isHomePageId=function(a){return this.homePageId===a},a.prototype.setHomePage=function(a){this.homePageId=a.getId();var b=a.children[0];b.isUserHidden()||(b.toggleUserHidden(),a.dirty=!0)},a.prototype.dirtifyAllPages=function(){_.each(this.getPagesNodes(),function(a){a.dirty=!0})},a.prototype.isRegularListItem=function(a){return this.findIdentifyingNode(a).isList()&&a.contentElement&&!a.contentElement.isSpecialListItem()},a.prototype.getListHeader=function(a){return a.children.find(function(a){return"ListHeader"===a.getContentElementType()})},a.prototype.getListFooter=function(a){return a.children.find(function(a){return"ListFooter"===a.getContentElementType()})},a.prototype.isAggregatorAllowed=function(a){var b=this.getListItems(a)[0];if(b){var c=_.findKey(b.contentElement.values,{type:"media"});if(c)return a.getArgsMatchingPolicy()[c]&&_.all(this.getListItems(a),function(a){var b=a.getContentElement().getValuesByMediaType();return b&&b.image&&b.image.length})}return!1},a.prototype.updateLayoutFilter=function(a,b,c){return b&&b.isList()&&"media"===a.contentElement.values[c].type&&b.layoutFilter===this.nodeFilterTypes.AGGREGATOR&&!this.isAggregatorAllowed(b)?(b.layoutFilter=this.nodeFilterTypes.FULL,this.getListHeader(b).layoutFilter=this.nodeFilterTypes.FULL,this.getListFooter(b).layoutFilter=this.nodeFilterTypes.FULL,!0):void 0},a.prototype.initFromStory=function(a){var b=this;return a.bft&&(_.isString(a.bft)?JSON.parse(a.bft).data:a.bft.data)?(this.deserialize(a.bft),a.selectedPage=this.homePageId,this.$p.when()):this.initialize({vertical:a.vertical}).then(function(){return b.firstModelCreation("Home")}).then(function(c){return a.selectedPage=c.id,a.bft=b.serialize(),!0})},a.prototype.traverseNode=function(a,b,c){return this.reduceTraverse(a,b,function(a,b,d){return d.cutoff=!0,d.stop=!!c,{node:a,parent:b}})},a.prototype.reduceTraverse=function(a,b,c,d){var e=d;return a&&t.dfs(a,function(a,d,f){b(a,d)&&(e=c(a,d,f,e))}),e},a.prototype.populateTree=function(a){var b=this;this.traverse(function(c,d){b.populateNode(c,d,a)})},a.prototype.populateAddedNode=function(a,b){var c=this;this.traverseNode(a,function(a,d){c.populateNode(a,d||b||c.data,c.context)})},a.prototype.populateNode=function(a,b,c){if(a.shouldPopulate()){var d=this.siteModelData.getCEForNode(a.getContentElementType(),a.getId(),c.vertical,b);if(a.isCrossPageConnected()&&(!this.data.argsMatchingPolicy||_.isEmpty(this.data.argsMatchingPolicy)?this.data.argsMatchingPolicy=d.getArgsMatchingPolicy():d.setArgsMatchingPolicy(this.data.argsMatchingPolicy)),this.flags.validateContentElementFields){var e=_.difference(_.keys(a.argsMatchingPolicy),_.keys(d.values));e.length>0&&(this.$log.warn("found illegal ArgMatchngFields in node: ",a.getId()," tyep: ",a.getContentElementType()," illegalFields: ",e),_.each(e,function(b){delete a.argsMatchingPolicy[b]}))}a.populate(d,b)}a.register(this)},a.prototype.populateDuplicatedNode=function(a,b,c){a.populate(this.siteModelData.getDuplicateCEValues(a.getContentElementType(),a.getId(),this.storyServices.story,c.getContentElement()),b),a.register(this)},a.prototype.getNextListItemId=function(a){return a.getId()+"."+(Math.max.apply(null,a.children.map(function(a){var b=parseInt(a.getId().split(".").pop(),10);return isNaN(b)?-1:b}))+1)},a.prototype.unRegisterNode=function(a){var b=this;a.isList()?_.each(a.children,function(a){a.unRegister(b)}):a.unRegister(this)},a.prototype.registerNode=function(a){var b=this;a.isList()?_.each(a.children,function(a){a.register(b)}):a.register(this)},a.prototype.getUniqeId=function(a){var b;for(_.isString(a)&&"Untitled"!==a||(a="Page"),a=a.replace(/\s/g,"").toLowerCase();!b||this.storyServices.story.getContentForActiveLocale()[b];)b=a+this.maxPageNodeId();return b},a.prototype.isNodeVisible=function(a){return!a.isUserHidden()&&a.hasVisibleFields()&&a.getContentElement().getNumOfNonBlankFields()>0},a.prototype.updateAvailableNodes=function(){var a=this;return this.bft.getBft().then(function(c){var d=_(c.children);a.listNodes=d.filter(function(a){return"contentElementList"===a.getNodeType()}).pluck("contentElementType").map(function(a){return"List"+a}).value(),a.availableNodes=c.children.filter(function(b){if(b.isTpa||b.isTpaWidget)return!1;var c=!1;return a.traverse(function(a){return a.getContentElementType()===b.getContentElementType()?(c=!0,!0):void 0},!0),c&&b.isUniqueNode()||b.isHiddenNode()?!1:b}),a.availableNodes=_.sortBy(a.availableNodes,function(a,c){return b.indexOf(a.contentElementType)-b.indexOf(c.contentElementType)}),a.tpaNodes=d.filter("isTpa").sortBy("contentElementType").value(),a.tpaSectionTypes=_.pluck(a.tpaNodes,"contentElementType"),a.tpaWidgetsNodes=d.filter("isTpaWidget").sortBy("contentElementType").value(),_.forEach(a.tpaWidgetsNodes,function(a){a.typeToShow=a.contentElementType.replace(/_/g," ",!0).replace(" "," - ")}),a.tpaWidgetsTypes=_.pluck(a.tpaWidgetsNodes,"contentElementType")})},a}();a.ModelTree=c}(core||(core={})),angular.module("siteGeneratorStaticsCoreAppInternal").service("modelTree",core.ModelTree),angular.module("siteGeneratorStaticsCoreAppInternal").factory("$p",function(){return Promise.onPossiblyUnhandledRejection(function(a){throw a}),_.assign(this,{defer:function(){var a={};return a.promise=new Promise(function(b,c){a.resolve=b,a.reject=c}),a},resolve:Promise.resolve.bind(Promise),when:Promise.resolve.bind(Promise),reject:Promise.reject.bind(Promise),all:Promise.all.bind(Promise)})}),angular.module("siteGeneratorStaticsCoreAppInternal").factory("dataFlags",["flags",function(a){var b={importFromMap:function(a,c){var d=b.getNames(a).concat(c[a.id]||[]);_.uniq(d).forEach(function(d){b.set(a,d,c[a.id].indexOf(d)>=0)})},createMap:function(a){return a.reduce(function(a,c){return a[c.id]=b.getNames(c).filter(function(a){return b.get(c,a)}),a},{})},negativePrefix:"no_",areFulfilled:function(c){return b.getNames(c).every(function(d){if(!b.get(c,d))return!0;var e=0!==d.indexOf(b.negativePrefix),f=!!a[e?d:d.substr(b.negativePrefix.length)];return e===f})},getNames:function(a){return Object.keys(a).filter(function(a){return 0===a.indexOf("flag_")}).map(function(a){return a.substr("flag_".length)})},get:function(a,b){return!!a["flag_"+b]},set:function(a,b,c){a["flag_"+b]=!!c}};return b}]).factory("Story",["StoryLocale","StoryLocaleLogDigest","$q","BackendStory",function(a,b,c,d){function e(a){this.sourceObject=a,_.extend(this,a),this.storyLocales={}}return _.extend(e,{build:function(a){return a=_.assign({},{status:"1",selectedPage:"",selectedStyle:{},bft:"{}",scenarioId:"",archived:!1},a),a.description||(a.description=""),a.vertical||(a.vertical=""),a.subVertical||(a.subVertical=""),new e(d.build(a))},clone:function(a,b,c){var d={assignee:a.assignee,status:a.status,bft:a.bft,description:a.description,selectedPage:a.selectedPage,subVertical:a.subVertical,vertical:a.vertical,selectedStyle:a.selectedStyle,contentElements:a.contentElements,activeLocale:a.activeLocale,mainMenu:a.mainMenu,richTextLinks:a.richTextLinks,revision:1,snapShot:void 0,createdBy:b,name:c};return e.build(d)},list:function(a,b,c){return d.search({skip:b.from,limit:b.to-b.from+1,where:JSON.stringify(a),sort:c}).then(function(a){return a.map(function(a){return new e(a)})})},find:function(a){return d.find(a).then(function(a){return new e(a)})},count:function(a){return d.count(a)}}),e.prototype={activeLocale:"en",status:1,vertical:"unspecified",subVertical:"unspecified",createdBy:"",revision:0,getSourceObject:function(){return this.sourceObject},getContentForActiveLocale:function(){return this.storyLocales[this.activeLocale].contentElements},getActiveLocale:function(){return this.storyLocales[this.activeLocale]},getLastLogDigestStatus:function(){return this.logDigest&&this.logDigest.length?_.last(this.logDigest).status:"1"},getCETypes:function(a){if(!this.ceTypes||a){var b=this.bft;b&&b.data&&b.data.children?this.ceTypes=_(b.data.children).chain().reject({type:"page"}).pluck("contentElementType").uniq().without("FooterInformation").without("GeneralDescription").collect().value():this.ceTypes=[]}return this.ceTypes},getCETypesHuman:function(){return _.map(this.getCETypes(),_.humanize)},save:function(){var a=this;return delete this.sourceObject.storyLocales,this.sourceObject.assignee=this.assignee,this.sourceObject.status=this.status,this.sourceObject.bft=this.bft,this.sourceObject.description=this.description,this.sourceObject.selectedPage=this.selectedPage,this.sourceObject.name=this.name,this.sourceObject.subVertical=this.subVertical,this.sourceObject.vertical=this.vertical,this.sourceObject.selectedStyle=this.selectedStyle,this.sourceObject.contentElements=this.contentElements,this.sourceObject.activeLocale=this.activeLocale,this.sourceObject.archived=this.archived,this.sourceObject.createdBy=this.createdBy,this.sourceObject.revision=this.revision,this.sourceObject.snapShot=this.snapShot,this.sourceObject.mainMenu=this.mainMenu,this.sourceObject.richTextLinks=this.richTextLinks,this.sourceObject.save().then(function(){_.extend(a,_.omit(a.sourceObject,"storyLocales"))})}},e}]).factory("StoryLocale",["$window","$q","storyServices","BackendStoryLocale",function(a,b,c,d){function e(a){this.sourceObject=a,this.contentElements={},_.extend(this,a)}return _.extend(e,{generatorLanguages:["de","en","es","fr","it","ja","ko","pl","pt","ru","tr","nl","da","sv","no"],build:function(a){var b=_.assign({},{locale:"en",contentElements:{},layoutSelections:"{}",status:"1",translationProgress:0,revision:0,styles:{}},a);return new e(d.build(b))},list:function(a){return d.search({limit:1e3,story:a}).then(function(a){return a.map(function(a){return new e(a)})})},clone:function(a,b){var c={contentElements:a.contentElements,layoutSelections:a.layoutSelections,locale:a.locale,styles:a.styles,revision:1,savedSites:{},createdBy:b};return e.build(c)}}),e.prototype={getSourceObject:function(){return this.sourceObject},toFlatValues:function(a){var b=a+this.story.$pk,c={storyId:b};return angular.forEach(this.contentElements,function(a,b){angular.forEach(a,function(a,d){var e=a.value;if(e)switch(a.type){case"text":e.length&&(c[b+"##"+d]=e);break;case"media":e.length>0&&e.forEach(function(a,e){a.Title&&(c[b+"##"+d+"^^"+e+"^^Title"]=a.Title),a.Description&&(c[b+"##"+d+"^^"+e+"^^Description"]=a.Description)});break;case"button":e.callToAction.length&&(c[b+"##"+d+"^^callToAction"]=e.callToAction)}})}),c},fromFlatValues:function(a){var b,c={};angular.forEach(a,function(a,d){var e=d.split("##");if(2===e.length){var f=e[1].split("^^"),g=e[0],h=f[0];switch(c[g]=c[g]||{},f.length){case 1:c[g][h]=a;break;case 2:b=f[1],c[g][h]=c[g][h]||{},c[g][h].value=c[g][h].value||{},c[g][h].value[b]=a;break;case 3:var i=f[1];b=f[2],c[g][h]=c[g][h]||{},c[g][h].value=c[g][h].value||[],c[g][h].value.length<=i&&c[g][h].value.push({}),c[g][h].value[i][b]=a}}}),angular.forEach(this.contentElements,function(a,b){angular.forEach(a,function(a,d){if(c[b]&&c[b][d])switch(a.type){case"text":a.value=c[b][d];break;case"button":c[b][d].value.callToAction&&(a.value.callToAction=c[b][d].value.callToAction);break;case"media":a.value.forEach(function(a,e){c[b][d].value[e]&&(c[b][d].value[e].Title&&(a.Title=c[b][d].value[e].Title),c[b][d].value[e].Description&&(a.Description=c[b][d].value[e].Description))})}})})},save:function(){var a=this;return this.sourceObject.contentElements=this.contentElements,this.sourceObject.layoutSelections=this.layoutSelections,this.sourceObject.locale=this.locale,this.sourceObject.story=this.story,this.sourceObject.styles=this.styles,this.sourceObject.archived=this.archived,this.sourceObject.createdBy=this.createdBy,this.sourceObject.revision=this.revision,this.sourceObject.savedSites=this.savedSites,this.sourceObject.save().then(function(){_.extend(a,a.sourceObject)})}},e}]).factory("StoryLocaleLogDigest",function(){function a(a){this.data=a}return _.extend(a.prototype,{lastEn:function(){return _.last(this.data.en)||{status:0}},enBriefDone:function(){var a=this.data.en,b=this.lastEn();return b&&"1"===b.status?b:_.findLast(a,{status:"2"})},enDesignDone:function(){return this.designDone("en")},enQADone:function(){var a=this.data.en;return this.lastEn().status>=8?_.findLast(a,{status:"8"}):void 0},enPublished:function(){var a=this.data.en;return"9"===this.lastEn().status?_.findLast(a,{status:"9"}):void 0},designDone:function(a){var b=this.data[a];return _.findLast(b,{status:"4"})},lastLocale:function(a){var b=this.data[a];return _.last(b)},translationStatus:function(a){var b=this.data[a],c=_.last(b);return c&&"5"!==c.status&&"6"!==c.status?_.findLast(b,{status:"7"})||c:c},designStatus:function(a){var b=this.data[a],c=_.last(b);return c&&"5"!==c.status&&"6"!==c.status?"4"===c.status||c.status>7?_.findLast(b,{status:"4"}):c:void 0}}),a}).factory("contentElements",["$q","$http","BackendContentElement",function(a,b,c){var d,e={elements:{},singleElements:{},listElements:{},uniqueElements:{},load:function(){if(d)return d;var b=this;return d=a.when().then(function(){return c.search({limit:1e4})}).then(function(a){angular.forEach(a,function(a){if(a.description){var c=a.fields,d=a.usageLimitation,e=a.extraData,f=a.description.split(",");angular.forEach(f,function(a){a=a.trim(),b.elements[a]={fields:c,usageLimitation:d,extraData:e};var f=_.isString(e)?JSON.parse(e):e;if(!(f&&f.All&&f.All.properties&&f.All.properties.isTpaWidget)){f.All&&f.All.list&&(b.listElements[a]=b.elements[a]);var g=f.All&&f.All.properties&&(f.All.properties.isTpa||f.All.properties.isTpaWidget),h=-1!==["ListHeader","ListFooter","HomePageTeaser","Page","PageHeader"].indexOf(a),i=-1!==["Social","Contact","Subscribe","GeneralDescription","FooterInformation"].indexOf(a);g||h||i||(b.singleElements[a]=b.elements[a]),i&&(b.uniqueElements[a]=b.elements[a])}})}})})},create:function(){}};return e}]).factory("scenarios",["$window","$log","$q","LayoutElementGeneratorScenario","BackendLayoutElement","BackendScenario","applicationParameters",function(a,b,c,d,e,f,g){function h(f){var h=new d;return h["delete"]=function(){this.duringSave=!0;var a=c.defer(),b=this;return f.destroy().then(function(){b.duringSave=!1,a.resolve()},function(c){b.duringSave=!1,a.reject(c)}),a.promise},h.save=function(){this.duringSave=!0;var a=c.defer(),b=this,d=this.serialize();return f.positionRules=d.positionRules,f.sizeRules=d.sizeRules,f.runCases=d.runCases,f.forContent=d.forContent,f.isAllowedFooter=d.isAllowedFooter,f.spacing=d.spacing,f.minWidthForColumnCount=d.minWidthForColumnCount,f.widthSelections=d.widthSelections,f.published=this.published,f.name=this.name,f.excludedLayouts=this.excludedLayoutSignatures,f.priorityLayouts=this.priorityLayoutSignatures,f["default"]=this["default"],f.save().then(function(c){b.id=c.id,b.createdAt=c.createdAt,b.updatedAt=c.updatedAt,b.duringSave=!1,a.resolve(c)},function(c){b.duringSave=!1,a.reject(c)}),a.promise},h.publish=function(){var d=this,f=c.defer(),g=[];d.published=!0;var i=this.getTotalLayouts();return angular.forEach(this.getCases(),function(f){angular.forEach(d.widths,function(h){var j=d.getFlattenLayouts(f,h);angular.forEach(j,function(d){if(!d.isExcluded){var f=e.build({archived:!1});if(d.setLayoutData(f),d.scenarioId){var h=c.defer();g.push(h.promise),a.setTimeout(function(){f.save().then(function(){h.resolve()})},i>1e3?100:50)}else b.debug("le without scenarioId!!!")}})})}),c.all(g).then(function(){h.save().then(function(){f.resolve()})}),f.promise},h.batchPublish=function(a){var d=this,f=c.defer(),g=[];angular.forEach(this.getCases(),function(a){angular.forEach(d.widths,function(c){var f=d.getFlattenLayouts(a,c);angular.forEach(f,function(a){if(!a.isExcluded){var c=e.build({archived:!1});a.setLayoutData(c),a.scenarioId?g.push(c):b.debug("le without scenarioId!!!")}})})});for(var i=Math.ceil(g.length/100),j=[],k=0;i>k;k++){var l=g.splice(0,100);j.push(e.saveAll(l))}return c.all(j).then(function(){d.published=!0,a?f.resolve():h.save().then(function(){f.resolve()},function(a){f.reject(a)})},function(a){f.reject(a)}),f.promise},h.unPublish=function(a){var b=this;return e.destroyAll({where:JSON.stringify({scenarioId:b.id})}).then(function(){return b.published=!1,a?c.when(!0):b.save()})},h.sourceObject=f,h.id=f.id,h.name=f.name,h.excludedLayoutSignatures=f.excludedLayouts||[],h.priorityLayoutSignatures=f.priorityLayouts||[],h.createdAt=f.createdAt,h.updatedAt=f.updatedAt,h.createdBy=f.createdBy,h.published=f.published||!1,h.spacing=void 0===f.spacing?h.spacing:f.spacing,h.forContent=void 0===f.forContent?g.defaultForContent:f.forContent,h.isAllowedFooter=f.isAllowedFooter,h["default"]=f["default"],_.each(h.serializedProperties,function(a){var b=f[a];void 0!==b&&_.assign(h[a],b)}),h.deSerialize(f),h}return{list:function(){return f.search({limit:1e4}).then(function(a){return a.map(h)})},duplicate:function(a){var b=a.sourceObject.$encode();return b.name="copy of "+b.name,delete b.id,this.create(b)},create:function(a){var b=f.build(a),c=h(b);return c.save()}}}]).factory("designPolicies",["$q","DesignPolicy","$log","DesignPolicyDefaultRules",function(a,b,c,d){return{policies:[],getAll:function(){var c=this;return a.when([]).then(function(a){var e=new b({name:"Default",id:"default",rules:d}),f=new b({name:"Linear Approx",id:"linear",rules:d,isLinear:!0});return f.setRulesFromLinearModel(),a.push(e),a.push(f),c.policies=a,a})},getDefault:function(){return new b({name:"Default",id:"default",rules:d})}}}]),angular.module("siteGeneratorStaticsCoreAppInternal").factory("portfolioService",["modelTree",function(a){function b(b){var c=a.findPageNodeByName(b.portfolioId,"portfolio");b.children.forEach(function(c){c.getContentElementType()===b.getContentElementType()&&(a.removePageFromTree(c.portfolioId),c.portfolioId="")}),a.deleteSingleNode(c),b.portfolioId=""}function c(b){if(b.hasPortfolioCluster()){var c=a.addPortfolioClusterToTree(b.getContentElementType());e(b,c),b.portfolioId=c.getId()}}function d(b){b.hasPortfolioCluster()&&e(b,a.findPageNodeByName(b.portfolioId,"portfolio"))}function e(b,c){angular.forEach(b.children,function(d){if(d.getContentElementType()===b.getContentElementType()&&!d.portfolioId){var e=a.addPageToTree(d.getContentElement().getFieldValueByType("text","title",!0),c,"portfolio");e.hidePage=!0,a.addChildToNode(e,d.getId(),d.getContentElementType()),g(e.children[0],d),d.portfolioId=e.getId()}})}function f(b){var c=a.findPageNodeByName(b.portfolioId,"portfolio"),d=c.children;c.children=[],angular.forEach(b.children,function(a){for(var b=0;b<d.length;b++)d[b].getId()===a.portfolioId&&c.children.push(d.splice(b,1)[0])})}function g(a,b){var c=a.getContentElement();angular.forEach(c.values,function(a){("title"===a.subType||"subTitle"===a.subType)&&(a.value=b.getContentElement().getFieldValueByType(a.type,a.subType,!0))})}var h={onPortfolioChange:function(a){a.hasPortfolioCluster()?c(a):b(a)},validatePortfolio:function(c,e,g){switch(g){case"delete":e.length>0&&angular.forEach(e,function(c){c.hasPortfolioCluster()?b(c):c.portfolioId&&a.removePageFromTree(c.portfolioId)});break;case"add":d(c);break;case"reorder":case"reorderList":c&&c.hasPortfolioCluster()&&f(c)}}};return h}]);var core;!function(a){var b=300,c={mobileStripHeight:240,stripHeight:560,mediaMinHeight:{940:440,700:440,620:440,460:340,300:240,220:200},thumbnailsHeight:{940:560,700:520,620:480,460:460},gridRowHeight:{1:{940:340,700:320,620:300,460:260,300:240,220:200},2:{940:300,700:280,620:260,460:220,300:160},3:{940:260,700:220,620:200},4:{940:220,700:160,620:140},6:{940:140,700:100,620:80}}},d=function(){function a(a,b,c,d,e,f){this.BoxDecorationTypes=a,this.LayoutDecorationUtils=b,this.applicationParameters=c,this.mediaOverride=d,this.PresetMediaType=e,this.flags=f}return a.$inject=["BoxDecorationTypes","LayoutDecorationUtils","applicationParameters","mediaOverride","PresetMediaType","flags"],a.prototype.getLayoutAdditionalHeight=function(a,c){return this.flags.sectionBackground&&a.containingSegment.node.isListHeader()&&1===a.cluster?-1*(c-b):a.containingLG.getAdditionalHeight()},a.prototype.getLayoutPrettyHeight=function(a){var b=this;if(a.isContact())return 0;if(a.mediaFullWidth){var d=a.passingHeight,e=a.getMediaLayout();if(e||1!==a.cluster||(e=a.layout[0]),e){var f=this.getMediaFullWidthPrettyHeight(a,e);f>e.passingHeight&&(d+=Math.ceil((f-e.passingHeight)/this.applicationParameters.gridStep)*this.applicationParameters.gridStep)}return d}var g=this.calcRatios(a),h=-1;if(angular.forEach(g.boxes,function(a){a.height>-1&&(h=Math.max(a.height*b.applicationParameters.prettyMode,0))}),!(0>h)){if(this.flags.presetImprovementPaddingConsistency)return Math.max(a.passingHeight,c.mediaMinHeight[g.mediaWidth]||0);var i=h-g.mediaHeight,j=a.height;return 0!==i&&(j+=Math.floor(i/this.applicationParameters.gridStep)*this.applicationParameters.gridStep),Math.max(j,a.passingHeight,c.mediaMinHeight[g.mediaWidth]||0)}},a.prototype.calcRatios=function(a){var b=this;a.calculateAbsoluteLocations();var c=this.LayoutDecorationUtils.getStretchableMedia(a);if(!c)return{};var d={mediaWidth:c.width,mediaHeight:c.height,boxes:[]};return angular.forEach(a.boxesStructure,function(c,e){if(e!==b.BoxDecorationTypes.FULL&&e!==b.BoxDecorationTypes.ON_MEDIA)if(0===c.length)d.boxes.push({});else{var f=b.getElementsInBox(a,e),g=b.getOverallWidth(f),h=b.getOverallHeight(a,e,f);d.boxes.push({width:g,height:h,"w1#w2":d.mediaWidth/g,"h1#h2":d.mediaHeight/h,"h1#w2":d.mediaHeight/g,"w1#h2":d.mediaWidth/h})}}),d},a.prototype.getMediaStripPrettyHeight=function(a){return a.isMobile()?c.mobileStripHeight:c.stripHeight},a.prototype.getMediaFullWidthPrettyHeight=function(a,b){if("container"===b.type){var d=a.getMediaType();return d===this.PresetMediaType.COAST2COAST?this.getMediaStripPrettyHeight(a):c.mediaMinHeight[a.width]||b.passingHeight}if(b.squareImage)return b.width;if(a.isShapeLayout(b))return b.height;if(this.mediaOverride.isStripType(a))return this.getMediaStripPrettyHeight(a);var e,f=a.overrides&&a.overrides.media&&a.overrides.media[b.argIndex];if(f&&f.name.indexOf("Grid")>-1){e=a.getArgValue(b.argIndex).length;var g=f.properties.numCols,h=Math.ceil(e/g),i=c.gridRowHeight[g]&&c.gridRowHeight[g][a.width]||100;return i*h}if(f&&"Thumbnails"===f.name)return c.thumbnailsHeight[a.width]||b.passingHeight;if(f&&"Honeycomb"===f.name){e=a.getArgValue(b.argIndex).length;var j=Math.ceil(e/9),k=Math.ceil(Math.max(0,e-5)/9);return 60+160*(j+k)}return c.mediaMinHeight[a.width]||b.passingHeight},a.prototype.getElementsInBox=function(a,b){var c=_.uniq(_.flatten(a.boxesStructure[b])),d=[];return a.recurseLayouts(function(a){c.indexOf(a.argIndex)>-1&&d.push(a)}),d},a.prototype.getLayoutExactLeft=function(a){if("text"===a.type)switch(a.align){case"left":return a.absoluteLeft;case"center":return a.absoluteLeft+(a.width-a.textWidth)/2;case"right":return a.absoluteLeft+a.width-a.textWidth}return a.absoluteLeft},a.prototype.getLayoutExactRight=function(a){if("text"===a.type)switch(a.align){case"left":return a.absoluteLeft+a.textWidth;case"center":return a.absoluteLeft+a.width-(a.width-a.textWidth)/2;case"right":return a.absoluteLeft+a.width}return a.absoluteLeft+a.width},a.prototype.getOverallWidth=function(a){var b=this,c=Math.min.apply(null,a.map(function(a){return b.getLayoutExactLeft(a)})),d=Math.max.apply(null,a.map(function(a){return b.getLayoutExactRight(a)}));return d-c},a.prototype.getOverallHeight=function(a,b,c){var d=[],e=[];return angular.forEach(a.boxesStructure[b],function(a,b){angular.forEach(a,function(a,f){if(void 0===e[a]||e[a]===b){var g=_.find(c,function(b){return b.argIndex===a});e[a]=b,d[f]=d[f]||0,d[f]+=g.height,b>0&&_.keys(g.designMargin).length>0&&(d[f]+=_.max(_.map(g.designMargin,function(a){return a})))}})}),_.max(d)},a}();a.PrettyLayoutService=d,angular.module("siteGeneratorStaticsCoreAppInternal").service("prettyLayoutService",d)}(core||(core={})),angular.module("siteGeneratorStaticsCoreAppInternal").factory("previewService",["$p","spinnerService","$window","screenCaptureService","storyServices","$rootScope","toasterService","applicationParameters","flags",function(a,b,c,d,e,f,g,h,i){function j(a){c.setTimeout(function(){f.$apply(function(){a()})})}function k(a){if(G.length){var b=_.map(G,function(b){return b(a)});_.any(b)&&f.$apply()}}var l="http%3A%2F%2Flocalhost",m="40b370cd-eb2f-4e65-a619-a57040ae7090",n="bb80349d-97a4-48a5-b9f2-8ddc2463709a",o="&isSantaEditor=true&isEdited=true&petri_ovr=specs.DisableNewRelicScripts:true;";i.mobileEditor&&(i.santaVersion="1.2449.0"),i.santaVersion&&(o+="&ReactSource="+i.santaVersion),o+=i.santaExperiments?"&experiments=onboardingviewportmode,"+i.santaExperiments:"&experiments=onboardingviewportmode",i.experimentsoff&&(o+="&experimentsoff="+i.experimentsoff);var p=h.clientTopology.editorBaseUrl+"/html/editor/web/renderer/render/template/<%= siteId %>?metaSiteId=<%= metaSiteId %>",q=h.clientTopology.editorBaseUrl+"/html/editor/web/renderer/render/document/<%= siteId %>?metaSiteId=<%= metaSiteId %>";i.localSanta&&(o+="&ReactSource="+l+"&baseVersion="+l),i.debugSanta&&(o+="&debug="+i.debugSanta),i.santaParams&&(o+=i.santaParams),i.isqa&&(o+="&isqa=true"),i.dsTrace&&(o+="&dsQTrace=true"),o+="&dsOrigin=onboarding",p+=o,q+=o;var r,s,t,u,v,w,x,y,z,A,B,C,D,E=_.template(q),F=_.template(p),G=[],H=!1,I=!1,J=[];return{registerUrlLoader:function(a){r=a,C&&(a(C,H),C=null,H=!1)},registerInit:function(a,b){J.push(a),b&&b.$on("$destroy",this.unregisterInit.bind(this,a))},unregisterInit:function(a){_.pull(J,a)},fireInits:function(a){_.each(J,function(b){b(a)})},registerThemeReimport:function(a){D=a},setDocumentServices:function(a){y=a},setDocumentServicesModel:function(a){z=a},setRendererModel:function(a){A=a},setSantaSiteModel:function(a){a?(B=a,i.realSantaVersion=a.baseVersion||"unknown"):(a={},i.realSantaVersion="unknown")},getHtmlRevision:function(){return z?z.revision:void 0},urlLoaded:function(a,d,e,f,g){u=e,v&&angular.element(v).off("click",k),v=f,angular.element(v).on("click",k),w=g&&g.document,x=g,this.setDocumentServices(a),this.setDocumentServicesModel(d),this.setRendererModel(g.rendererModel),this.setSantaSiteModel(g.siteModel),this.fireInits({documentServices:y,iframeWindow:w,overlayContainer:v,overlay:u,rendererModel:A}),c.rendererModel=A,c.documentServices=y,c.santaBase=g.santaBase,y.documentMode.toggleWixAds(),this.setPreviewMode(this.isPreview),t&&(y?t.resolve({documentServices:y,overlay:u,iframeWindow:w}):t.reject("Can't load document services")),b.imDone("loadPreviewUrl")},urlLoadFailed:function(){t.reject()},loadUrl:function(c,d){return c=this.normalizeUrl(c),c!==s||d?(t&&t.reject(),t=a.defer(),b.waitForMe("loadPreviewUrl"),r?r(c,d):(C=c,H=d),s=c,t.promise):t.promise},loadObUrl:function(){return this.loadStoryUrl()},blankSiteUrl:function(){return this.templateUrl(m,n)},templateUrl:function(a,b){return F({siteId:a,metaSiteId:b})},siteUrl:function(a,b){return E({siteId:a,metaSiteId:b})},mobilePreviewUrl:function(a,b){return this.siteUrl(a,b)+"&showMobileView=true"},loadStoryUrl:function(a,b){var c;return c=a&&b?this.siteUrl(a,b):this.blankSiteUrl(),i.consumerMode&&(c+="&editorSessionId="+h.clientTopology.esi),this.loadUrl(c,null)},hideOverlay:function(){angular.element(v).hide()},showOverlay:function(){angular.element(v).show()},getOverlay:function(){return u},getOverlayContainer:function(){return v},getIframeDocument:function(){return w},getIframeWindow:function(){return x},getDocumentServices:function(){return y},getDocumentServicesModel:function(){return z},getElementByCompRef:function(a){return this.getIframeDocument().getElementById(a.id)},remove:function(a){y.components.remove(a)},grabSnapShot:function(){if(w){var a=y.siteSegments.getSiteStructureId(),c=this.getIframeDocument().getElementById(a);if(c)return b.waitForMe("snapShot"),d.grabElement(c).then(function(a){return b.imDone("snapShot"),a},function(){return b.imDone("snapShot"),null})}},normalizeUrl:function(a){if(a=a.replace("petri_ovr=specs.RenderReactByUser:false",""),a.indexOf(o)>-1)return a;var b=a.split("#"),c=b[0];return c+=c.indexOf("?")>-1?"&":"?",c+=o,b[1]&&(c+="#"+b[1]),c},getIdsFromEditorUrl:function(a){var b=a.match(/\/edit\/(.*)\?/)[1],c=a.match(/metaSiteId=([^&]*)/)[1];return{metaSiteId:c,siteId:b}},addClickHandler:function(a){G.push(a)},removeClickHandler:function(a){_.pull(G,a)},waitForChanges:function(){if(!y)return a.when();var b=a.defer();return y.waitForChangesApplied(function(){j(function(){b.resolve()})}),b.promise},onLoad:function(a){var c;try{c=a.innerHTML}catch(d){g.error("Can't load preview! Probably no permission."),s!==this.blankSiteUrl()?this.loadStoryUrl().then(t.resolve):(this.urlLoadFailed(),b.imDone("loadPreviewUrl"))}return!!c},getThemeReimportIframe:function(){var b="#!/theme-manager?reimport=true";"prod"===e.parseMode&&(b+="&prod");var d=D(b);if(I)return a.when(d);var f=a.defer(),g=function(a){a&&"reimportReady"===a.data&&(c.removeEventListener("message",g,!1),j(function(){I=!0,f.resolve(d)}))};return c.addEventListener("message",g,!1),f.promise},isFirstSave:function(){return y.generalInfo.isFirstSave()},isSitePublished:function(){return y.generalInfo.isSitePublished()},getSiteId:function(){return y.generalInfo.getSiteId()},getMetaSiteId:function(){return y.generalInfo.getMetaSiteId()},getPublicUrl:function(){return y.generalInfo.getPublicUrl()},setPublicUrl:function(a){y.generalInfo.setPublicUrl(a)},getSiteName:function(){return y.siteName.get()},setSiteName:function(a){if(y.siteName.get()!==a){var b=y.siteName.validate(a);if(!b.success)return b.errorCode;y.siteName.set(a)}},isSiteNameValid:function(a){return!!y.siteName.validate(a).success},validateSiteName:function(a){return y.siteName.validate(a)},getUsername:function(){return y.generalInfo.getUserInfo().name},isPremium:function(){return y.premiumFeatures.get().length>0},getFreeDomain:function(){return y.generalInfo.urlFormat.isSlash()?"wixsite.com":"wix.com"},isDomainConnected:function(){var a=this.getPublicUrl(),b=this.getFreeDomain();return null!==a&&void 0!==a&&!_.includes(a,b)},isValidStyle:function(a){return!!y.theme.styles.get(a)},setFixedHeader:function(a){var b=y.siteSegments.getHeader();y.components.layout.update(b,{fixedPosition:a})},isDocumentServicesLoaded:function(){return!!y},setPreviewMode:function(a){if(a=!!a,this.isPreview=a,y&&(y.documentMode.onboardingViewportMode&&y.documentMode.onboardingViewportMode(a?"auto":"parent"),y.documentMode.enablePlaying(a),y.documentMode.enableZoom(a),y.documentMode.enableSocialInteraction(!1),y.documentMode.enableExternalNavigation(!1),y.documentMode.enableSlideShowGalleryClick(a),y.documentMode.enableTinyMenuOpening(a),y.documentMode.enableRenderFixedPositionContainers(a),y.documentMode.enableRenderFixedPositionBackgrounds(a),y.documentMode.enableBackToTopButton(a),y.documentMode.enablePageProtection(!1),
y.documentMode.enableBgVideoAutoplay(a),y.documentMode.enableSiteMembersDialogsOpening(a),y.documentMode.enableResetGalleryToOriginalState(a),y.documentMode.enableResetComponent(!a),y.documentMode.resetBehaviors(a),y.documentMode.enableAction("screenIn",a),y.documentMode.enableAction("bgScrub",a),y.documentMode.toggleWixAds(a),y.documentMode.enableShouldUpdateJsonFromMeasureMap(!a),y.documentMode.allowSiteOverflow(a),y.documentMode.setComponentViewMode(a?"preview":"editor"),y.tpa.change.editMode(a?"preview":"editor"),y.documentMode.enablePageTransitions(a),!a))try{y.tpa.closePopupsAndModal()}catch(b){c.console.log("closePopupsAndModal throws")}},isPreview:void 0}}]);var renderer;!function(a){var b=function(){function b(a,b,c,d,e,f,g,h,i,j,k,l,m,n,o,p,q,r,s,t){var u=this;this.flags=a,this.designKit=b,this.componentStyles=c,this.componentClasses=d,this.SkinValidator=e,this.invertedStyleService=f,this.LayoutElementFormatting=g,this.RichTextTags=h,this.pagesManager=i,this.applicationParameters=j,this.modelTree=k,this.defaultGeolocation=l,this.previewService=m,this.mediaOverride=n,this.themeChooser=o,this.mobileFonts=p,this.videoProvidersUtils=q,this.richTextService=r,this.backgroundScrollService=s,this.componentExtraStyling=t,this.geoLocations={},this.links={document:function(a){return{type:"DocumentLink",docId:a.file.id,name:a.file.name||""}},externalLink:function(a){return{type:"ExternalLink",url:a.targetUrl}},anchore:function(a){var b=a.link.targetPage;b||(b=u.pagesManager.getPageNodeIdBySantaPageId(_.trimLeft(a.link.pageId,"#")));var c=b&&u.modelTree.findById(a.link.nodeId,b);return c?u.pagesManager.getAnchorLinkObj(c):void 0},page:function(a){return{type:"PageLink",pageId:"#"+u.pagesManager.getPageIdByName(a.targetPage)}},email:function(a){return{type:"EmailLink",recipient:a.targetEmail}},phone:function(a){return{type:"PhoneLink",phoneNumber:a.targetPhone}}}}return b.$inject=["flags","designKit","componentStyles","componentClasses","SkinValidator","invertedStyleService","LayoutElementFormatting","RichTextTags","pagesManager","applicationParameters","modelTree","defaultGeolocation","previewService","mediaOverride","themeChooser","mobileFonts","videoProvidersUtils","richTextService","backgroundScrollService","componentExtraStyling"],b.prototype.createGalleryAttributes=function(a,b,c){var d=this.componentClasses[a.type]?this.componentClasses[a.type]:this.componentClasses[a.superType],e={dataInSkin:!1,type:a.superType,subType:a.type,properties:a.properties,style:this.flags.designKit?this.designKit.adjustStyleOfGallery(a.style):a.style,componentClass:d.comp,skin:d.skin,propertiesSchemaType:d.props,layout:{x:b.left,y:b.top,width:b.width,height:b.height}};return"wysiwyg.viewer.components.MatrixGallery"===e.componentClass&&(e.layout.height+=25),this.flags.designKit&&(e.properties=this.designKit.getPropsOfTpaGallery(e.componentClass,!0)||e.properties),this.createImageListData(e,this.getMediaValues(c,"image"),{setTitle:!0}),e},b.prototype.overrideFromOverrides=function(a,b,c,d){var e=c&&c.media&&c.media[b.argIndex]||null;return"media"===a.type&&e&&"shape"!==d[0].mediaType?(a.type=e.superType,a.subType=e.type,a.properties=e.properties,a.style=this.flags.designKit?this.designKit.adjustStyleOfGallery(e.style):e.style,!0):!1},b.prototype.overrideFromData=function(a,b){return"media"===a.type&&Array.isArray(b)&&0!==b.length?(a.subType=b[0].mediaType,"shape"===a.subType&&(a.dataInSkin=!0),!0):!1},b.prototype.createLayout=function(b,c){var d={x:b.left,y:b.top,width:b.width,height:b.height,font:b.font,align:b.align,margin:b.margin};if(a.StripRenderer.isMapStripType(c,b))d.docked={left:{px:0,vw:0},right:{px:0,vw:0}};else if("media"===b.type&&"image"===b.subType&&!this.flags.dontStretchImageRU){var e=c.overrides.media&&c.overrides.media[b.argIndex];e&&"coast2coast"===e.properties.stretch&&(d.docked={left:{px:0,vw:0},right:{px:0,vw:0}});var f=c.getLayoutSelectionStore().getImageStretch(c.containingSegment,c);f&&(b.stretchData=f,(f.top>0||f.bottom>0)&&(d.y-=f.top||0,d.height+=f.bottom||0,d.height+=f.top||0),(f.left>0||f.right>0)&&(d.x-=f.left||0,d.width+=f.right||0,d.width+=f.left||0))}return d},b.prototype.getStyleDesignKit=function(a,b,c,d,e){return"decorative"===b.containerRole?void(a.styleId=this.designKit.getBoxColoredStyle(a.styleId,c,d)):"button"===b.subType?void(a.styleId=this.designKit.getButtonColoredStyle(a.styleId,c)):"line"===b.type?void(a.styleId=this.designKit.getLineColoredStyle(a.styleId,c,d,b)):"image"===a.subType||"gallery"===a.type?void(a.styleId=this.designKit.getImageColoredStyle(a.styleId,c,b,e)):"menu"===b.type?void(a.styleId=this.designKit.getMenuColoredStyle(a.styleId,c)):"form"===b.subType?void(a.styleId=this.designKit.getFormColoredStyle(a.styleId,c)):void 0},b.prototype.addBehavior=function(a,b){b&&(void 0===a.behaviors&&(a.behaviors={items:[],type:"ObsoleteBehaviorsList"}),a.behaviors.items.push(b))},b.prototype.addBehaviors=function(a,b){var c=this;_.each(b,function(b){c.addBehavior(a,b)})},b.prototype.setPropertiesSchemaTypeAttribute=function(a){a.propertiesSchemaType=this.componentClasses[a.subType]?this.componentClasses[a.subType].props:this.componentClasses[a.type].props},b.prototype.getTextComponentParams=function(a,b,c,d,e){var f=this,g=c&&c.getAlignment(d,"align"),h=c&&c.getFormatting(d,!e),i=c&&c.getLayoutSelectionStore().getTextDirection(),j=e&&this.richTextService.isRichText(b),k={type:"StyledText",linkList:[]},l={};if(j)k.text=this.richTextService.transformForViewer(b,a.layout.font,g,i,h,l);else{var m=_.htmlEncode(c&&c.getLayoutValue(d,b)||b),n=this.LayoutElementFormatting.format(m,h),o=this.RichTextTags[a.layout.font]||"p",p="font_"+a.layout.font,q=g?"text-align: "+g+";":"";if(i&&(q+=" direction: rtl;"),c&&c.isMobile()||d.isMobile){var r=this.mobileFonts.getFontSize(p);q+="font-size:"+r+"px;"}q+="line-height:"+this.themeChooser.getLineHeight(p);var s="<"+o+' class="'+p+'" style="'+q+'">'+n+"</"+o+">";k.text=s}return e&&(k.linkList=_.chain(l).map(function(a,b){var c={};return f.createLink(a,c),c.link?(c.link.id=b,c.link):void 0}).filter().value()),k},b.prototype.getMediaValues=function(a,b){return a.filter(function(a){return a.mediaType===b})},b.prototype.addProperty=function(a,b,c){c&&(void 0===c.componentProperties&&(c.componentProperties={}),c.componentProperties[a]=b)},b.prototype.createLink=function(a,b){_.isEmpty(a)||(a.file&&!a.isPageRef?b.link=this.links.document(a):a.targetUrl&&a.targetUrl.length>0&&!a.isPageRef?b.link=this.links.externalLink(a):a.link&&"AnchorLink"===a.link.type?b.link=this.links.anchore(a):a.targetPage?b.link=this.links.page(a):a.targetEmail?b.link=this.links.email(a):a.targetPhone&&(b.link=this.links.phone(a)))},b.prototype.createImageData=function(a,b){a.dataObj=this.getImageItemFromData(b,{setTitle:!1})},b.prototype.createShapeData=function(a,b,c){this.setSkinAttributeFromMediaItem(a,b,c),a.dataObj={type:"SvgShape"},this.createLink(b.Link,a.dataObj)},b.prototype.createImageListData=function(a,b,c){var d=this;"gallery"===a.type&&(a.styleId=a.styleId||this.componentStyles.styles[a.subType][0],_.forEach(b,function(a){a.Title&&(a.Title=a.Title.replace(/<br\/>/g,""))})),a.dataObj={type:"ImageList",items:_.map(b,function(a){return d.getImageItemFromData(a,c)}),isRef:!0}},b.prototype.getImageItemFromData=function(a,b){var c=b.setTitle,d=a.Title||"";d.length>100&&(d=d.substring(0,100));var e={type:"Image",uri:a.relativeUri||"",alt:d,description:a.Description||"",width:a.width||0,height:a.height||0,isRef:!0};return c&&(e.title=d),a.crop&&(e.crop=a.crop),this.createLink(a.Link,e),e},b.prototype.shapeUrlToSkin=function(a){if("js"===a.substr(a.length-2)||a.indexOf("_svgshape.v1.")>-1){var b=/^shapes\/([a-f0-9]+)_svgshape\.v1\.([a-zA-Z0-9]+)\./.exec(a);return"svgshape.v1.svg_"+b[1]+"."+b[2]}return a.indexOf("shapes")>-1?"svgshape.v2.Svg_"+/^shapes\/([a-f0-9]+)/.exec(a)[1]:a},b.prototype.setSkinAttributeFromMediaItem=function(a,b,c){if("shape"===b.mediaType){a.skin=this.shapeUrlToSkin(b.relativeUri);var d=void 0;this.flags.designKit&&c&&(d=this.designKit.getShapeColor(c)),a.style={"alpha-fillcolor":"1","alpha-stroke":"1",fillcolor:d||b.fillColor||this.applicationParameters.defaultShapeProperties.fillColor,stroke:b.borderColor||this.applicationParameters.defaultShapeProperties.borderColor,strokewidth:(b.borderWidth||this.applicationParameters.defaultShapeProperties.borderWidth)+"px"}}},b.prototype.getMargin=function(a){return a.layout.margin||0},b.prototype.darkenTheBackgroundMedia=function(a){a.mediaRef.opacity=.75,a.color="#000000",a.colorOpacity=1,a.colorOverlayOpacity=.15,a.colorOverlay="#000000"},b.prototype.buildDesign=function(a,b){var c={type:"BackgroundMedia",mediaRef:a&&a.media?"video"===a.media.mediaType?{autoplay:!0,loop:!0,preload:"auto",opacity:1,playbackSpeed:1,posterImageRef:{type:"Image",title:"",description:"",uri:a.media.fileOutput.image[0].url.substr("media/".length),width:a.media.fileOutput.image[0].width,height:a.media.fileOutput.image[0].height},duration:a.media.fileInput.duration,videoId:a.media.fileBaseUrl,title:a.media.Title,mute:!0,type:"WixVideo",qualities:_.map(_.groupBy(a.media.fileOutput.video,"quality"),function(a){return{quality:a[0].quality,width:a[0].width,height:a[0].height,formats:_.map(a,"format")}})}:{type:"Image",opacity:1,title:a.media.Title,uri:a.media.relativeUri,description:a.media.Description,width:a.media.width,height:a.media.height,alt:a.media.Title}:void 0,alignType:a&&a.alignment,fittingType:_.get(a&&a.mediaOverrides,"sourceProperties.fittingType","fill"),scrollType:"none",color:a&&a.color||"",colorOpacity:a&&a.colorOpacity||0,colorOverlay:"",colorOverlayOpacity:0};return a&&a.media&&b&&this.darkenTheBackgroundMedia(c),{type:"MediaContainerDesignData",background:c}},b.prototype.getComponentParams=function(a,b,c,d,e){switch(a.type){case"pinterestFollow":a.dataObj={type:"PinterestFollow"};break;case"twitterTweet":a.dataObj={type:"TwitterTweet"};break;case"facebookShare":a.dataObj={type:"FacebookShareButton"};break;case"twitterFollow":a.dataObj={type:"TwitterFollow"};break;case"text":a.styleId="",a.dataObj=this.getTextComponentParams(a,b,d,c,e);break;case"button":case"textButton":var f=_.isObject(b)?b.callToAction:b;a.dataObj={label:f||"",type:"LinkableButton"},_.isEmpty(c.font)||(a.style=_.assign({},a.style,{fnt:"font_"+c.font})),this.createLink(b,a.dataObj);var g=d&&d.getAlignment(c,"align");g&&this.addProperty("align",g,c),this.addProperty("margin",this.getMargin(a),c);break;case"media":switch(a.subType){case"shape":this.createShapeData(a,this.getMediaValues(b,a.subType)[0],d);break;case"extVideo":var h=this.getMediaValues(b,a.subType)[0];h.videoUrl||(h.videoUrl="https://vimeo.com/200660389"),a.dataObj=this.videoProvidersUtils.getExtVideoDataFromMediaItem(h),a.properties=a.properties||{},a.properties.autoplay=!!_.get(h,["playmode","autoplay"]),a.properties.loop=!!_.get(h,["playmode","loop"]),a.properties.showControls=["always_hide","temp_show","always_show"][h.controls]||"always_show";break;case"audio":if("wysiwyg.viewer.components.AudioPlayer"===a.componentClass)a.dataObj={type:"AudioPlayer",uri:b[0].relativeUri,originalFileName:b[0].fileName};else{if("wysiwyg.common.components.singleaudioplayer.viewer.SingleAudioPlayer"!==a.componentClass)throw new Error("componentClass "+a.componentClass+" is not registered for audio");a.dataObj={type:"SingleAudioPlayer",uri:b[0].relativeUri,originalFileName:b[0].fileName,artist:"TODO artist",track:"TODO track"}}break;default:a.layout.width=300===a.layout.width?301:a.layout.width;var i=this.getMediaValues(b,"image")[0]||this.getMediaValues(b,"clipart")[0]||this.getMediaValues(b,"clipArt")[0]||{};this.createImageData(a,i)}break;case"stripContainer":var j=b&&b.fittingType||b&&b[0]&&b[0].fittingType||a.dataObj&&a.dataObj.background.fittingType||"fill",k=d&&d.containingSegment.getAlignment()||"center",l=b&&b.scrollType||b&&b[0]&&b[0].scrollType||"scroll";if(a.dataObj={type:"StripContainer",background:{color:b.color||"{color_18}",scrollType:"none",colorOpacity:1,colorOverlay:"",mediaRef:b.mediaRef||b[0]&&this.getImageItemFromData(b[0],{setTitle:!1}),type:"BackgroundMedia",colorOverlayOpacity:0,fittingType:j,alignType:k}},a.dataObj.background.mediaRef&&d&&d.textDirectlyOnMedia(c)&&this.darkenTheBackgroundMedia(a.dataObj.background),l){var m=this.backgroundScrollService.getBehaviors(l);m&&this.addBehaviors(a,m)}a.properties=void 0;break;case"gallery":if("strip"===a.subType)this.createImageData(a,this.getMediaValues(b,"image")[0]);else{if(this.flags.designKit){var n=this.mediaOverride.isStripType(d);a.properties=this.designKit.getPropsOfTpaGallery(a.componentClass,n)||a.properties}this.createImageListData(a,this.getMediaValues(b,"image"),{setTitle:!0})}break;case"map":a.dataObj={type:"GeoMap",addressInfo:b},_.assign(a.dataObj,this.geoLocations[b]||this.defaultGeolocation),a.properties=a.properties||{},a.properties.mapDragging=!1;break;case"form":var o=/^(([a-zA-Z0-9_\.\-\+])+\@(([a-zA-Z0-9\-])+\.)+([a-zA-Z0-9]{2,4})+|\s*)$/;b=d.containingSegment.contentElement.values.email.value||this.modelTree.getGeneralInformation().getContentElement().values.MainEmail.value,b&&o.test(b)||(b="contact@me.com"),a.dataObj={type:"ContactForm",toEmailAddress:b};break;case"social":this.flags.designKit&&this.designKit.modifySocialImages(b,d,c),this.createImageListData(a,b,{setTitle:!1});break;case"subscribe":a.dataObj={toEmailAddress:this.modelTree.getGeneralInformation().getContentElement().values.MainEmail.value,type:"SubscribeForm",subscribeFormTitle:b.titleLabel||"",emailFieldLabel:b.emailPlaceHolder||"",submitButtonLabel:b.sendButtonLabel||"",nameFieldLabel:b.namePlaceHolder||""};break;case"menu":a.dataObj="#MAIN_MENU",this.addProperty("alignText",d.getLayoutSelectionStore().menuOverridesManager.alignment(),c),this.addProperty("alignButtons",d.getLayoutSelectionStore().menuOverridesManager.alignment(),c),this.addProperty("stretchButtonsToMenuWidth",d.getLayoutSelectionStore().menuOverridesManager.stretchButtons(),c);break;case"line":if(d){var p=d.getLineWidthAndLeftPosition(c);a.layout.x=p.left,a.layout.width=p.width}}},b.prototype.createAttributes=function(a,b,c,d,e,f){var g={dataInSkin:!1,type:a.type,subType:a.subType,properties:{}};if(this.overrideFromOverrides(g,a,c,b)||this.overrideFromData(g,b)||!a.componentClass?(g.componentClass=this.componentClasses[g.subType]?this.componentClasses[g.subType].comp:this.componentClasses[g.type].comp,g.skin=this.componentClasses[g.subType]?this.componentClasses[g.subType].skin:this.componentClasses[g.type].skin):g.componentClass=a.componentClass,"text"===a.type?g.skin="wysiwyg.viewer.skins.WRichTextNewSkin":g.skin=this.SkinValidator.skinForComponent(g.componentClass,g.skin),this.setPropertiesSchemaTypeAttribute(g),g.layout=this.createLayout(a,d),"wysiwyg.viewer.components.MatrixGallery"===g.componentClass&&(g.layout.height+=25),"structure"===a.containerRole||a.containerRole&&a.containerRole.indexOf("repeater")>-1)g.styleId=core.invisibleContainerStyleId;else{var h=("image"!==g.subType&&g.subType||g.type)+this.componentStyles.getDecorationUniqueID(a);g.styleId=c&&c.style&&c.style[h]||this.componentStyles.styles[g.subType]&&this.componentStyles.styles[g.subType][0]||this.componentStyles.styles[g.type]&&this.componentStyles.styles[g.type][0],c&&c.extra&&g.type&&c.extra[g.type]&&c.extra[g.type].stylingIndex&&(g.extra=this.componentExtraStyling.extraStyles[g.type][c.extra[g.type].stylingIndex]),g.styleId&&!this.previewService.isValidStyle(g.styleId)&&this.componentStyles.styles[g.subType]&&(g.styleId=this.componentStyles.styles[g.subType][0]),this.flags.designKit&&e&&!this.flags.renderedModel&&this.getStyleDesignKit(g,a,d,h,c),c&&c.style&&c.style[a.type+"_invert"]&&(g.styleId=this.invertedStyleService.getStyle(g.styleId+"-inv"))}return(b||"menu"===a.type||"line"===a.type||"text"===a.type)&&this.getComponentParams(g,b,a,d,e),d&&d.isHeader&&a&&"media"===a.type&&g&&!g.dataObj.link&&(g.dataObj.link={type:"PageLink",pageId:"#"+this.pagesManager.getHomePageSantaId()}),f&&this.addBehavior(g,AnimationKit.formatAnimationForDS(f)),g},b}();a.ComponentAttributesBuilder=b,angular.module("siteGeneratorStaticsCoreAppInternal").service("componentAttributesBuilder",b)}(renderer||(renderer={}));var core;!function(a){var b="DefaultProperties",c=["wysiwyg.viewer.components.tpapps.TPAMultiSection","wysiwyg.viewer.components.tpapps.TPASection"];a.BROKEN_SANTA_COMPS=["wysiwyg.viewer.components.menus.DropDownMenu","wysiwyg.viewer.components.GoogleMap"],a.DROP_DOWN_MENU="wysiwyg.viewer.components.menus.DropDownMenu";var d=function(){function d(a,b,c,d,e,f,g,h,i,j,k,l,m,n){var o=this;this.$p=a,this.componentClasses=b,this.componentAttributesBuilder=c,this.SkinValidator=d,this.$log=e,this.$window=f,this.defaultGeolocation=g,this.applicationParameters=h,this.tpaService=i,this.previewService=j,this.flags=k,this.designKit=l,this.backgroundScrollService=m,this.documentServicesMediator=n,j.registerInit(function(a){o.documentServices=a.documentServices})}return d.$inject=["$p","componentClasses","componentAttributesBuilder","SkinValidator","$log","$window","defaultGeolocation","applicationParameters","tpaService","previewService","flags","designKit","backgroundScrollService","documentServicesMediator"],d.prototype.buildComponent=function(a,b,c,d,e,f,g,h,i,j){if(f=f||{},"widget"===b.subType){var k={fixedPosition:!1,scale:1,rotationInDegrees:0};this.applicationParameters.extendValidLayout(k,b);var l=e.containingSegment;return k.x="Stores_Product_Widget"===l.contentElement.type?0:20,l.node.widgetRef&&this.documentServices.components.is.exist(l.node.widgetRef)?(this.updateLayout(l.node.widgetRef,k),this.$p.when(l.node.widgetRef)):l.node.widgetRef&&l.node.serializedWidget?(this.applicationParameters.extendValidLayout(l.node.serializedWidget.layout,b),this.tpaService.restoreFromSerialized(a,l.node,k),this.flags.undoRedoForTpa&&this.tpaService.updateStyle(l.node),this.$p.when(l.node.widgetRef)):this.tpaService.addTpaWidget(l.contentElement.type,a,k,void 0,l.node).then(function(){return l.node.widgetRef})}var m=this.componentAttributesBuilder.createAttributes(b,c,d,e,!g,h);return _.defaults(m,{properties:f}),this.buildSomeComponent(m,a,b.componentProperties,e,i)},d.prototype.buildComponentRaw=function(a,b,c){return this.buildSomeComponent(b,a)},d.prototype.buildContainer=function(b,c,d,e,f,g,h){var i={layout:{x:c,y:d,width:e,height:f},componentClass:this.componentClasses.container.comp,skin:this.componentClasses.container.skin,styleId:a.invisibleContainerStyleId,properties:g};return this.buildSomeComponent(i,b)},d.prototype.buildStripContainer=function(a,b,c,d,e){var f={dataInSkin:!1,type:"stripContainer",componentClass:this.componentClasses.stripContainer.comp,layout:{x:0,y:b,width:this.applicationParameters.desktopPageWidth,height:c},styleId:"strc1",properties:d,dataObj:{type:"StripContainer",background:{color:"",scrollType:"scroll",colorOpacity:0,colorOverlay:"",type:"BackgroundMedia",colorOverlayOpacity:0,fittingType:"fill",alignType:"center"}}};return this.buildSomeComponent(f,a)},d.prototype.buildColumn=function(a,b,c,d,e,f,g){var h={type:"Container",layout:{width:b,height:c,x:0,y:0,scale:1,rotationInDegrees:0,anchors:[],fixedPosition:!1},componentType:this.componentClasses.column.comp,componentClass:this.componentClasses.column.comp,properties:d,style:"strc1",design:this.componentAttributesBuilder.buildDesign(f,g),skin:this.SkinValidator.skinForComponent(this.componentClasses.column.comp)};return e&&this.componentAttributesBuilder.addBehaviors(h,this.backgroundScrollService.getBehaviors(e)),this.buildSomeComponent(h,a)},d.prototype.buildStripColumnsContainer=function(a,b,c,d,e){var f={type:"stripColumnsContainer",componentClass:this.componentClasses.stripColumnsContainer.comp,layout:{x:0,y:b,width:0,height:c,scale:1,rotationInDegrees:0,fixedPosition:!1},styleId:"strc1",properties:d,behaviors:'[{"action":"bgScrub","name":"BackgroundParallax","duration":1,"delay":0}]',design:this.componentAttributesBuilder.buildDesign(e,!0),skin:this.SkinValidator.skinForComponent(this.componentClasses.stripColumnsContainer.comp)};return this.buildSomeComponent(f,a)},d.prototype.buildLine=function(a,b,c,d,e,f){var g={type:"line",layout:{x:b,y:c,width:e?void 0:d,height:5},componentClass:this.componentClasses.line.comp,skin:this.componentClasses.line.skin,styleId:f,properties:{},subType:void 0};return this.buildSomeComponent(g,a,{fullScreenModeOn:e===!0})},d.prototype.setComponentBuilderData=function(a,b){void 0===b.propertiesSchemaType&&a.withData(b.dataObj)},d.prototype.setComponentPropertiesSchemaAndData=function(a,b){void 0!==b.propertiesSchemaType&&(a._propertiesSchemaType_=b.propertiesSchemaType,a.setDataItem(b.dataObj))},d.prototype.getCompChildren=function(a){var b=a.pageId?a:this.documentServices.components.get.byId(a.id,a.isPage?a.id:"masterPage");return this.documentServicesMediator.getDesktopChildren(b)},d.prototype.removeComps=function(a){var b=this,d=this.tpaService.getShoppingCartId();return _.each(a,function(a){if(b.documentServices.components.is.exist(a)){var e=b.documentServicesMediator.getComponentType(a);-1!==c.indexOf(e)||d&&d.id===a.id||("wysiwyg.viewer.components.tpapps.TPAWidget"===e?b.documentServices.tpa.widget["delete"](a):b.documentServices.components.remove(a))}else b.flags.debugMode&&b.$log.error("trying to remove non existing component",a)}),this.$p.when()},d.prototype.clearComponent=function(a){if(a){var b=this.getCompChildren(a);return this.removeComps(b)}return this.$p.when()},d.prototype.updateLayout=function(a,b){this.documentServicesMediator.updateLayout(a,b)},d.prototype.toDefinition=function(b,c,d){var e=this,f=this.$p.defer();if(b.componentClass){"core.components.Container"===b.componentClass&&(b.componentClass="mobile.core.components.Container");var g={componentType:b.componentClass,layout:b.layout,skin:b.skin};b.styleId&&(g.style=b.styleId),b.design&&(g.design=b.design),b.behaviors&&(g.behaviors=b.behaviors),b.style&&(g.style=!("media"===b.type&&"shape"===b.subType)&&b.styleId&&this.documentServices.theme.styles.get(b.styleId.length>8&&b.styleId.indexOf("_")>-1?"c2":b.styleId)||{style:{properties:{},propertiesSource:{},groups:{}},type:"TopLevelStyle",skin:b.skin},g.style.styleType="custom",_.merge(g.style.style.properties,b.style),g.style.style.propertiesSource=_.transform(g.style.style.properties,function(a,b,c){a[c]="theme"})),b.dataObj&&(_.isString(b.dataObj)?g.dataQuery=b.dataObj:(b.dataObj.isRef=!0,g.data=b.dataObj)),"mobile.core.components.Container"===b.componentClass||b.componentClass===this.componentClasses.stripContainer.comp||b.componentClass===this.componentClasses.stripColumnsContainer.comp||b.componentClass===this.componentClasses.column.comp||b.componentClass===this.componentClasses.stripContainerSlideShow.comp||b.componentClass===this.componentClasses.stripContainerSlideShowSlide.comp?(g.components=[],g.type="Container",g.behaviors=b.behaviors):g.type="Component",c&&Object.keys(c).length&&(g.props=_.clone(c)),b.properties&&Object.keys(b.properties).length&&(g.props?_.merge(g.props,b.properties):g.props=_.clone(b.properties)),"wysiwyg.viewer.components.menus.DropDownMenu"===b.componentClass&&(g.props=_.merge({},{sameWidthButtons:!1,moreButtonLabel:"More",moreItemHeight:15,stretchButtonsToMenuWidth:!0,alignText:"center",type:"HorizontalMenuProperties",alignButtons:"center",isRef:!0},g.props));var h=this.getComponentPropertyType(g);if(h&&(g.props=g.props||{},g.props.type=h),b.extra&&_.merge(g,b.extra),a.BROKEN_SANTA_COMPS.indexOf(g.componentType)>=0)this.flags.renderedModel?this.brokenComps(b,f,g):this.previewService.waitForChanges().then(function(){return e.brokenComps(b,f,g)});else{var i=void 0;b.properties&&"number"==typeof b.properties.zIndex&&(i=b.properties&&b.properties.zIndex),f.resolve({compDef:g,zIndex:i})}}else f.resolve();return f.promise},d.prototype.brokenComps=function(a,b,c){a.dataObj&&"GeoMap"===a.dataObj.type?this.calcGeoLocation(a.dataObj.addressInfo).then(function(d){_.assign(a.dataObj,d),b.resolve({compDef:c})}):b.resolve({compDef:c})},d.prototype.getSantaCompDefinition=function(a){var b=this.documentServices.components.COMPONENT_DEFINITION_MAP[a.componentType];return b},d.prototype.getComponentPropertyType=function(a){var c=this.getSantaCompDefinition(a),d=c.propertyType||c.propertyTypes||[],e=_.last(_.isArray(d)?d:[d]);return e?e:a.props&&b},d.prototype.buildSomeComponent=function(a,b,c,d,e){var f=this,g=this.$p.defer();if("shoppingCart"===a.type){var h=this.designKit.getCartColoredStyle(d);this.tpaService.updateCartPosition(a.layout.y,a.layout.x,b,h),g.resolve(this.tpaService.getShoppingCartId())}else this.toDefinition(a,c).then(function(c){c?(a.component=f.documentServices.components.add(b,c.compDef,e,c.zIndex),g.resolve(a.component)):g.resolve()});return g.promise},d.prototype.calcGeoLocation=function(a){var b=this,c=this.$p.defer();this.componentAttributesBuilder.geoLocations[a]&&c.resolve(this.componentAttributesBuilder.geoLocations[a]);var d=new this.$window.google.maps.Geocoder;return d.geocode({address:a},function(d,e){if(e===b.$window.google.maps.GeocoderStatus.OK){var f=d[0].geometry.location;b.componentAttributesBuilder.geoLocations[a]={latitude:f.lat(),longitude:f.lng()}}else e===b.$window.google.maps.GeocoderStatus.ZERO_RESULTS&&(b.componentAttributesBuilder.geoLocations[a]=b.defaultGeolocation);c.resolve(b.componentAttributesBuilder.geoLocations[a])}),c.promise},d}();a.ComponentBuilder=d,angular.module("siteGeneratorStaticsCoreAppInternal").service("SkinValidator",["previewService",function(a){var b,c={};return a.registerInit(function(a){b=a.documentServices}),{skinForComponent:function(a,d){return c[a]||(c[a]=b.theme.skins.getComponentSkins(a)),c[a].indexOf(d)>-1?d:c[a].length?c[a][0]:d}}}]).constant("defaultGeolocation",{latitude:37.77065,longitude:-122.387301}).service("ComponentBuilder",d)}(core||(core={}));var core;!function(a){var b=function(){function a(a,b,c,d,e,f,g,h){var i=this;this.$p=a,this.$log=b,this.documentServicesMediator=c,this.mobileFonts=d,this.previewService=e,this.componentClasses=f,this.applicationParameters=g,this.renderedModelMobileAdapter=h,this.MINIMIZED_TEXT_SCALE=.05,this.MINIMIZED_WIDTH=300,this.MINIMIZED_HEIGHT=5,this.getWantedLEComponents=function(a){return i.getLEComponents(a,!0)},this.getUnwantedLEComponents=function(a){return i.getLEComponents(a,!1)},this.getWantedColumnRefs=function(a){return i.getFilteredColumnRefs(a,!0)},this.getUnwantedColumnRefs=function(a){return i.getFilteredColumnRefs(a,!1)}}return a.$inject=["$p","$log","documentServicesMediator","mobileFonts","previewService","componentClasses","applicationParameters","renderedModelMobileAdapter"],a.prototype.buildComponent=function(a,b,c,d,e,f,g,h,i,j){var k=this;if(!j)return this.$log.error("no comp ref provided for layout",b),this.$p.when();var l=this.getMobileCompRef(j);return this.$p.when().then(function(){var c=k.createMobileLayout(e,b),d=k.createMobileProps(e,b);return"menu"!==b.type&&"widget"!==b.subType&&k.documentServicesMediator.setContainer(l,k.documentServicesMediator.getMobileComponent(a)),k.updateLayout(l,c),k.updateProps(l,d),l})},a.prototype.updateLayout=function(a,b){var c=this.getMobileCompRef(a),d=["x","y"],e=_.pick(b,d);_.isEmpty(e)||this.documentServicesMediator.updateLayout(c,e);var f=_.omit(b,d);_.isEmpty(f)||this.documentServicesMediator.updateLayout(c,f)},a.prototype.updateProps=function(a,b){if(!_.isEmpty(b)){var c=this.getMobileCompRef(a);this.documentServicesMediator.isMobilePropsForked(c)||this.documentServicesMediator.forkMobileProps(c),this.documentServicesMediator.updateProps(c,b)}},a.prototype.buildComponentRaw=function(a,b,c){var d=this.getMobileCompRef(c);return this.$p.when(d)},a.prototype.buildStripContainer=function(a,b,c,d,e,f){var g=this;void 0===f&&(f=!0);var h=this.getMobileCompRef(e);return this.$p.when().then(function(){return f&&g.documentServicesMediator.doesComponentExistByRef(h)&&g.updateLayout(h,{y:b,height:c,x:0,width:g.applicationParameters.mobilePageWidth}),h})},a.prototype.buildContainer=function(a,b,c,d,e,f,g){var h=this,i=this.getMobileCompRef(g);return this.documentServicesMediator.setContainer(i,this.documentServicesMediator.getMobileComponent(a)),this.$p.when().then(function(){if(a.id!==i.id){var f={y:c,x:b,height:e,width:d};h.updateLayout(i,f)}return i})},a.prototype.buildStripColumnsContainer=function(a,b,c,d,e,f,g){var h=this,i=this.getMobileCompRef(f);return this.$p.when().then(function(){if(g){var a={y:b,width:h.applicationParameters.mobilePageWidth};return h.updateLayout(i,a),h.updateProps(i,{columnsMargin:0}),i}})},a.prototype.buildColumn=function(a,b,c,d,e,f,g,h,i){var j=this,k=this.getMobileCompRef(h);return this.$p.when().then(function(){var a={height:c};return j.updateLayout(k,a),i&&j.documentServicesMediator.moveToIndex(k,i),k})},a.prototype.getUnwantedComponents=function(a){var b=this;return _.reduce(a,function(a,c){return a.push.apply(a,b.getUnwantedComponentsForLg(c)),a},[])},a.prototype.getUnwantedComponentsForLg=function(a){var b=this,c=[];c.push.apply(c,this.getUnwantedLEComponents(a)),c.push.apply(c,this.getUnwantedColumnRefs(a));var d=this.getStripComponentRef(a),e=this.hasMediaLayout(a);return d&&!e&&c.push(d),c=_.map(c,function(a){return b.documentServicesMediator.getMobileComponent(a)})},a.prototype.toDefinition=function(a,b,c){var d=this.$p.defer(),e={componentType:a.componentClass,layout:this.createLayoutForNewRenderer(a,c),skin:a.skin,props:this.createPropsForNewRenderer(a,c)};return d.resolve({compDef:e}),d.promise},a.prototype.createLayoutForNewRenderer=function(a,b){var c=ob.deepClone(a.layout);return"text"===a.type&&(c.scale=this.getFontSizeScale(b.from.le,b.from.layout)),("stripContainer"===a.type&&"media"===_.get(b,"from.layout.type")||"gallery"===a.type&&"Accordion"===a.subType&&a.layout.docked||"gallery"===a.type&&"Strip Showcase"===a.subType||"gallery"===a.type&&"Strip Slideshow"===a.subType)&&(c.x=0,c.width=320,c.height=240),c},a.prototype.createPropsForNewRenderer=function(b,c){var d,e,f=a.createProperties(b.type,b.subType);if(void 0===f&&"text"===b.type&&(d=c.from.le,e=c.from.layout,f={overrideAlignment:d.getAlignment(e,"align")},d)){var g=d.getFormatting(e);f.overrideColor="color_"+g.getColor()}return f},a.createProperties=function(a,b){var c;return"map"===a&&(c={showStreetView:!1,showZoom:!1}),"social"===a&&(c={spacing:10,iconSize:20}),"media"===a&&"extVideo"===b&&(c={loop:!1,showinfo:!1}),"gallery"===a&&"StripSlideshow"===b&&(c={autoplay:!0,autoplayInterval:3,textMode:"noText",transition:"slide"}),"gallery"===a&&"StripShowcase"===b&&(c={arrowMode:!1,autoplay:!0,autoplayInterval:3,cropAndFitStage:"crop",galleryImageOnClickAction:"disabled",imageMargin:5,showThumbnails:!1}),"gallery"===a&&"SliderGallery"===b&&(c={loop:!0,maxSpeed:5,imageMode:"clipImage",aspectRatio:1}),"gallery"===a&&"Collage"===b&&(c={orientation:"horizontal",numOfCells:4,maxImageSize:2,margin:0}),"gallery"===a&&"PaginatedGridGallery"===b&&(c={numCols:1,margin:0,maxRows:1,showNavigation:!0,transition:"none",galleryImageOnClickAction:"zoomMode",showAutoplay:!0,autoplay:!1}),"gallery"===a&&"MatrixGallery"===b&&(c={numCols:1,maxRows:3,margin:20,alignText:"left",imageMode:"clipImage",galleryImageOnClickAction:"zoomMode",incRows:2}),"gallery"===a&&"SlideShowGallery"===b&&(c={showNavigation:!1,showAutoplay:!0,autoplay:!0,autoplayInterval:3,imageMode:"clipImage",transition:"swipeHorizontal",transDuration:1,reverse:!1}),"stripColumnsContainer"===a&&(c={columnsMargin:0}),c},a.prototype.getFontSizeScale=function(a,b){var c="font_"+b.font,d=this.mobileFonts.getFontSize(c),e=a.getDesktopSegment().getLENoError(),f=e.getLayoutBySubType(b.subType),g=this.documentServicesMediator.getMobileFontSize(f.fontSize);return Math.round(d/g*100)/100},a.prototype.getMobileCompRef=function(a){return this.documentServicesMediator.getMobileComponent(a)},a.prototype.createMobileLayout=function(a,b){var c={x:b.left,y:b.top,width:b.width,height:b.height};return"text"===b.type&&(c.scale=this.getFontSizeScale(a,b)),
c},a.prototype.createMobileProps=function(a,b){var c={};if("text"===b.type&&(c.overrideAlignment=a.getAlignment(b,"align")),a&&"text"===b.type){var d=a.getFormatting(b);c.overrideColor="color_"+d.getColor()}return"map"===b.type&&(c.showStreetView=!1,c.showZoom=!1),"social"===b.type&&(c.spacing=10,c.iconSize=20),c},a.prototype.minimizeDescendantsLayout=function(a,b){var c=this;void 0===b&&(b=!0);var d=this.documentServicesMediator.getChildren(a);_.each(d,function(a){c.minimizeDescendantsLayout(a,b);var d=c.isContainer(a);(b&&d||!b&&!d)&&c.minimizeComponent(a)})},a.prototype.isContainer=function(a){var b=this.documentServicesMediator.getComponentType(a);return"mobile.core.components.Container"===b||b===this.componentClasses.stripContainer.comp||b===this.componentClasses.stripColumnsContainer.comp||b===this.componentClasses.column.comp},a.prototype.minimizeNonContainers=function(a){this.minimizeDescendantsLayout(a,!1)},a.prototype.minimizeContainers=function(a){this.minimizeDescendantsLayout(a,!0)},a.prototype.minimizeMobileLayout=function(a){var b=this;return this.minimizeNonContainers(a),this.previewService.waitForChanges().then(function(){return b.minimizeContainers(a),b.previewService.waitForChanges()})},a.prototype.minimizeComponent=function(a){var b=this.getMobileCompRef(a);if(this.documentServicesMediator.doesComponentExistByRef(b)){var c=this.documentServicesMediator.getComponentType(b),d={};c!==this.componentClasses.column.comp&&(d.y=0,d.width=this.MINIMIZED_WIDTH,d.x=0),c===this.componentClasses.text.comp?d.scale=this.MINIMIZED_TEXT_SCALE:c!==this.componentClasses.stripColumnsContainer.comp&&(d.height=this.MINIMIZED_HEIGHT),this.updateLayout(b,d)}},a.prototype.hideUnwantedMobileComponents=function(a){var b=this,c=this.getUnwantedLEComponents(a);_.each(c,function(a){return b.documentServicesMediator.hideMobileComponent(a)});var d=this.getUnwantedColumnRefs(a);_.each(d,function(a){return b.documentServicesMediator.hideMobileComponent(a)});var e=this.getStripComponentRef(a),f=this.hasMediaLayout(a);e&&!f&&this.documentServicesMediator.hideMobileComponent(e)},a.prototype.showWantedMobileComponents=function(a){var b=this,c=this.getWantedLEComponents(a);_.each(c,function(a){return b.documentServicesMediator.showMobileComponent(a)});var d=this.getWantedColumnRefs(a);_.each(d,function(a){return b.documentServicesMediator.showMobileComponent(a)});var e=this.getStripComponentRef(a),f=this.hasMediaLayout(a);e&&f&&this.documentServicesMediator.showMobileComponent(e)},a.prototype.getLEComponents=function(a,b){var c=this;void 0===b&&(b=!0);var d=a.segments[0],e=d.getDesktopSegment(),f=d.getLENoError(),g=e.getLENoError(),h=g.layoutArray||[];return _(h).filter(function(a){var c;if("shoppingCart"!==a.type&&"line"!==a.type){if("container"===a.type)"decorative"===a.containerRole?c=f.getAllDecorativeContainersLayout().length>0:"structure"===a.containerRole&&(c=f.getAllStructureContainersLayout().length>0);else{var d=g.argList[a.argIndex];c=!!f.getLayoutByArg(d)}return c&&b||!c&&!b}}).map(function(a){return c.renderedModelMobileAdapter.getComponentRefByLayout(e,a)}).without(void 0).value()},a.prototype.getColumnRefs=function(a){var b=this;return _.map(a.columns,function(c,d){return b.renderedModelMobileAdapter.getSegmentOrColumnRef(a.sitePart,a.isMobile()?a.getDesktopLG():a,a.columns,d)})},a.prototype.getFilteredColumnRefs=function(a,b){void 0===b&&(b=!0);var c=a.getDesktopLG();if(c.columns&&a.columns&&a.columns[0].isVirtual){var d=this.getColumnRefs(c),e=_.pluck(d,"id"),f=this.getColumnRefs(a),g=_.pluck(f,"id"),h=b?_.intersection(e,g):_.difference(e,g);return _.filter(d,function(a){return _.contains(h,a.id)})}return[]},a.prototype.hasMediaLayout=function(a){var b=a.segments[0].getLENoError();return b&&_.find(b.layout,{type:"media"})},a.prototype.getStripComponentRef=function(a){var b=a.getDesktopLG();return this.renderedModelMobileAdapter.getMediaStripRef(b)},a}();a.MobileComponentOrganizer=b,angular.module("siteGeneratorStaticsCoreAppInternal").service("MobileComponentOrganizer",b)}(core||(core={}));var core;!function(a){var b=function(){function a(a,b){this.documentServicesMediator=a,this.renderedModelMobileAdapter=b}return a.$inject=["documentServicesMediator","renderedModelMobileAdapter"],a.prototype.getMobileComponentByLayout=function(a,b){if("menu"===a.type)return this.documentServicesMediator.getTinyMenuComp();var c=this.getComponentByLayout(a,b.getDesktopSegment());return c&&(c=this.documentServicesMediator.getMobileComponent(c)),c},a.prototype.getComponentByLayout=function(a,b){return this.renderedModelMobileAdapter.getComponentRefByLayout(b,a)},a.prototype.setComponentByLayout=function(a,b,c){c.addRenderedComponent(b,a)},a}();a.ComponentMediator=b,angular.module("siteGeneratorStaticsCoreAppInternal").service("componentMediator",b)}(core||(core={}));var core;!function(a){var b=function(){function a(a,b,c){this.ComponentBuilder=a,this.MobileComponentOrganizer=b,this.applicationParameters=c}return a.$inject=["ComponentBuilder","MobileComponentOrganizer","applicationParameters"],a.prototype.getBuilder=function(){return this.getSpecificBuilder(this.applicationParameters.isInMobileEditMode())},a.prototype.getSpecificBuilder=function(a){return void 0===a&&(a=!1),a?this.MobileComponentOrganizer:this.ComponentBuilder},a}();a.ComponentBuilderProvider=b,angular.module("siteGeneratorStaticsCoreAppInternal").service("componentBuilderProvider",b)}(core||(core={}));var renderer;!function(a){var b=function(){function a(a,b,c,d,e,f,g,h,i,j,k,l){this.$p=a,this.flags=b,this.componentBuilder=c,this.mediaOverride=d,this.previewService=e,this.colorThiefService=f,this.stripRenderer=g,this.animationKit=h,this.documentServicesMediator=i,this.componentMediator=j,this.storyServices=k,this.sitePartTypes=l}return a.$inject=["$p","flags","componentBuilder","mediaOverride","previewService","colorThiefService","stripRenderer","animationKit","documentServicesMediator","componentMediator","storyServices","sitePartTypes"],a.prototype.shouldUsePartRef=function(a,b){return a.isHeader||a.containingSegment.node&&a.containingSegment.node.isTpaWidget||"line"===b.type&&_.get(b,["componentProperties","fullScreenModeOn"])},a.prototype.isValidValue=function(a,b){switch(a.type){case"text":return!!b;case"media":case"gallery":case"social":return _.isArray(b)&&!_.isEmpty(b);case"button":return!!_.get(b,["callToAction"]);case"subscribe":return!!_.get(b,["titleLabel"]);default:return!0}},a.prototype.sortLayouts=function(a,b){var c=this,d=[];return _.each(b,function(b){a.isMediaLayout(b)?d.unshift(b):d.push(b),b.layout&&(b.layout=c.sortLayouts(a,b.layout))}),d},a.prototype.renderElementList=function(a,b,c,d,e,f,g,h){var i,j=this,k=a.getLENoError(),l=[];i=this.sortLayouts(k,b);var m=this.animationKit.getAnimationsForLayouts(i,k);return angular.forEach(i,function(b,i){var n,o=!1,p=j.mediaOverride.getLeMediaOverrides(k,b);if(!j.stripRenderer.isStripType(k,b)&&(j.shouldUsePartRef(k,b)&&(o=!0,n=ob.deepClone(b),n.top+=f),!d||!d(b))){var q=k.getArgValue(b.argIndex);if(!b.hidden&&j.isValidValue(b,q)&&(!q||!q.skip)){q=j.buttonEllipses(b,q),"media"===b.type&&"image"===b.subType&&(q=j.setCropImage(a,b.argIndex,q,b)),"header"===a.sitePart&&o&&(n.left+=a.isMobile?10:20);var r=a.isMobile&&j.flags.consumerMode&&j.componentMediator.getMobileComponentByLayout(b,a);l.push(j.componentBuilder.buildComponent(o?e:c,n||b,q,k.overrides,k,void 0,void 0,m&&m[i],void 0,r).then(function(d){return p&&j.mediaOverride.isUnexpectedHeight(k,b)&&(k.containingSegment.unexpectedHeightRef={ref:d,layout:b}),k.setArgComponent(b.argIndex,d),b.layout&&d?j.renderElementList(a,b.layout,d,void 0,e,f,g).then(function(a){if(!g||!a.length)return d;var e=h&&b.onMediaIndex>=0?h:c;if("structure"!==b.containerRole)return j.documentServicesMediator.setContainer(d,e),d;var f=j.groupComponents(a,e);return f?(j.documentServicesMediator.siteChanges.register(function(){j.documentServicesMediator.doesComponentExist(d)&&j.documentServicesMediator.removeComponent(d)}),f):void 0}):d}).then(function(c){return j.componentMediator.setComponentByLayout(c,b,a),c}))}}}),this.$p.all(l)},a.prototype.setCropImage=function(a,b,c,d){var e=a.node,f=e&&e.hasCrops(b);if(f){var g=angular.copy(c);return _.forEach(g,function(a){var c=e.getCropOfImage(b,a.relativeUri,d);c&&(a.crop=c)}),g}return c},a.prototype.buttonEllipses=function(a,b){if("button"===a.type&&a.clientRectWidth){var c=(a.clientRectWidth-a.validationWidth)/a.clientRectWidth,d=Math.floor(.8*(1-c)*b.callToAction.length),e=angular.copy(b);return e.callToAction=e.callToAction.substr(0,d)+"...",e}return b},a.prototype.cacheImageForColorThiefIfNeeded=function(a){if(a.onMediaStructure){var b=a.getLayoutBySubType("image"),c=b&&a.getArgValue(b.argIndex);if(c&&c[0]&&"image"===c[0].mediaType&&!a.containingSegment.hasColumnWithMediaBackground())return this.colorThiefService.cacheImage(a,c[0])}return this.$p.when()},a.prototype.filterGroupableRefs=function(a,b,c){var d=this;return _.filter(a,function(a){return d.documentServicesMediator.doesComponentExistByRef(a)?b?d.documentServicesMediator.getContainer(a).id!==b.id?!1:d.documentServicesMediator.isComponentGroupable(a)?!0:(d.documentServicesMediator.setContainer(a,c),!1):!1:!0})},a.prototype.groupComponents=function(a,b){var c;return a.length>1?c=this.documentServicesMediator.groupComponents(a):1===a.length&&(c=a[0]),c?(this.documentServicesMediator.setContainer(c,b),c):void 0},a.prototype.render=function(a,b,c,d,e,f,g,h,i){var j=this,k=a.getLENoError();return g||(g=k.layout),this.cacheImageForColorThiefIfNeeded(k).then(function(){return j.renderElementList(a,g,b,void 0,c,d,e,f)}).then(function(d){var f=a.sitePart;if(e){var g="header"!==f;if(g){var i=h?b:c,k=j.filterGroupableRefs(d,b,i);return j.groupComponents(k,i)}}}).then(function(b){if(b){var c=(i+"|"+(a.node&&a.node.id||j.sitePartTypes.HEADER)).replace(/\./g,"_");j.storyServices.nodesRefMap[c]=b.id}return b})},a}();a.LayoutElementRenderer=b,angular.module("siteGeneratorStaticsCoreAppInternal").factory("layoutElementRendererFactory",["$injector",function(a){return function(c,d){return a.instantiate(b,{componentBuilder:c,stripRenderer:d})}}])}(renderer||(renderer={}));var renderer;!function(a){var b=function(){function a(a,b,c,d,e){var f=this;this.$p=a,this.flags=b,this.previewService=c,this.documentServicesMediator=d,this.ComponentBuilder=e,this._containerId="ADI_VALIDATION_CONTAINER_ID",this._containerParams={layout:{rotationInDegrees:0,width:319,height:500,scale:1,x:-1e3,y:-1e3,fixedPosition:!0,anchors:[]},components:[],componentType:"mobile.core.components.Container",type:"Container",skin:"wysiwyg.viewer.skins.area.DefaultAreaSkin",style:"c2"},this.containerRef=null,this.getComponentId=function(a){return _.map(a).join("|")},this.shouldKeepComponent=function(a){return f.flags.dsValidationContainerOptim&&"text"===a.layout.type},this.getComponentRefId=function(a){return"ADI-VALIDATION-"+f.getComponentId(a.props).split(".").join("-")},c.registerInit(function(){return f.bindExistingContainer()})}return a.$inject=["$p","flags","previewService","documentServicesMediator","ComponentBuilder"],a.prototype.onBeforeSave=function(a){(!this.flags.dsValidationContainerOptim||a)&&(this.containerRef&&this.documentServicesMediator.doesComponentExistByRef(this.containerRef)&&this.documentServicesMediator.removeComponent(this.containerRef),this.containerRef=null)},a.prototype.onAfterUseComponent=function(a,b){this.shouldKeepComponent(a)||this.documentServicesMediator.removeComponent(b)},a.prototype.buildComponentForValidation=function(a,b,c){var d={layout:a,value:b,le:c,overrides:c&&c.overrides};return this.buildComponentsForValidation([d]).then(function(a){return a[0]})},a.prototype.buildComponentsForValidation=function(a){var b=this;return this.$p.all(a.map(function(a){return b.findExistingComponent(a)||b.buildComponent(a)}))},a.prototype.bindExistingContainer=function(){this.documentServicesMediator.doesComponentExist(this._containerId)&&(this.flags.dsValidationContainerOptim?this.containerRef=this.documentServicesMediator.getComponentRef(this._containerId):this.documentServicesMediator.removeComponent(this._containerId))},a.prototype.findExistingComponent=function(a){var b=this.getComponentRefId(a),c=this.documentServicesMediator.doesComponentExist(b);return c?this.documentServicesMediator.getComponentRef(b):null},a.prototype.getContainerRef=function(){return this.containerRef||(this.containerRef=this.buildContainer()),this.containerRef},a.prototype.buildComponent=function(a){var b=this.getContainerRef(),c=a.layout,d=a.value,e=a.le,f=a.overrides;"button"===c.type&&(c=_.assign({},c,{width:1,height:1}));var g,h=c.breakingText;return this.shouldKeepComponent(a)&&(g=this.getComponentRefId(a)),this.ComponentBuilder.buildComponent(b,c,d,f||{},e,void 0,!0,void 0,g).then(function(a){return h&&(c.breakingText=h),a})},a.prototype.buildContainer=function(){var a=this.documentServicesMediator.getSiteStructure();return this.flags.dsValidationContainerOptim?this.documentServicesMediator.addComponent(a,this._containerParams,{compId:this._containerId}):this.documentServicesMediator.addComponent(a,this._containerParams)},a}();a.VisualValidationRenderer=b,angular.module("siteGeneratorStaticsCoreAppInternal").service("visualValidationRenderer",b)}(renderer||(renderer={}));var RendererSeo=function(){function a(a,b,c,d){this.modelTree=a,this.storyServices=b,this.documentServicesMediator=c,this.pagesManager=d}return a.$inject=["modelTree","storyServices","documentServicesMediator","pagesManager"],a.prototype.setPageSEO=function(a,b){void 0===b&&(b=[]);var c=a.children&&a.children.filter(function(a){return a.isTpaMultiSection()}).length>0;if(this.storyServices.getSavedSite()){var d=this.pagesManager.getPageIdByName(a.getId()),e=a.getContentElement();e.values.indexable&&""===e.values.indexable.value&&(e.values.indexable.value=!0);var f={};c||(f=this.modelTree.getPageSEODefaults(a),["pageTitleSEO","descriptionSEO","metaKeywordsSEO","pageUriSEO","indexable"].forEach(function(a){e.values[a]&&e.values[a].value&&(f[a]=e.values[a].value)})),f.pageUriSEO||(f.pageUriSEO=this.getValidPageUriSEO(e.values.displayName.value,d,b)),d&&(b.push(f.pageUriSEO),this.documentServicesMediator.updatePage(d,f),this.documentServicesMediator.getHomePage()===d&&void 0!==f.pageTitleSEO&&this.documentServicesMediator.setSeoTitle(f.pageTitleSEO))}},a.prototype.getValidPageUriSEO=function(a,b,c){a=this.documentServicesMediator.getValidPageUriSEO(b,a);for(var d=a,e=1;c.indexOf(d)>-1;e++)d=a+"-"+e;return d},a}();angular.module("siteGeneratorStaticsCoreAppInternal").service("rendererSeo",RendererSeo);var core;!function(a){var b=function(){function a(){var a=this;this.layoutFields=["font","fontSize","width","style","margin","buttonFull"],this.validationCache={},this.resetCache=function(){return a.validationCache={}}}return a.prototype.get=function(a,b){return b=this.getUniqueLayout(b),this.validationCache[b]&&this.validationCache[b][a]?this.validationCache[b][a]:void 0},a.prototype.set=function(a,b,c){b=this.getUniqueLayout(b),this.validationCache[b]=this.validationCache[b]||{},this.validationCache[b][a]=c},a.prototype.getUniqueLayout=function(a){return _(a).pick(this.layoutFields).map().filter().join("_")},a}();a.ValidationCache=b,angular.module("siteGeneratorStaticsCoreAppInternal").service("validationCache",b)}(core||(core={}));var core;!function(a){var b=function(){function a(a,b,c){this.layoutSolver=a,this.sitePartTypes=b,this.renderedModelAdapter=c}return a.$inject=["layoutSolver","sitePartTypes","renderedModelAdapter"],a.prototype.prepareSolution=function(a,b){var c=this.layoutSolver.getPartSolutions(a,b);a===this.sitePartTypes.HEADER&&(c.selectedSolution=0);var d=c.getSelectedSolution();return d&&d.forEach(function(a){return a.segments.forEach(function(a){return a.setOverrides()})}),c},a.prototype.postRender=function(a,b,c){var d=this;b&&b.forEach(function(b){"body"===a&&(b.structure=d.renderedModelAdapter.createLayoutGroupStructure(c,b)),b.renderedColumns=b.columns,b.segments.forEach(function(a){return a.updateRenderTime()})})},a}();a.SolutionPreparation=b,angular.module("siteGeneratorStaticsCoreAppInternal").service("solutionPreparation",b)}(core||(core={}));var core;!function(a){var b=function(){function b(b,c,d,e,f,g,h,i,j,k,l,m,n,o,p,q){var r=this;if(this.$p=b,this.flags=c,this.modelTree=d,this.layoutSolver=e,this.storyServices=f,this.renderer=g,this.richTextService=h,this.documentServicesMediator=i,this.solutionPreparation=j,this.rendererSeo=k,this.modelLogs=l,this.modelStore=m,this.modelBuilder=n,this.modelRender=o,this.modelRenderGoToEditor=p,this.modelLookup=q,c.renderedModel){var s=new a.SequentialExecution(function(a){for(var b=[],c=1;c<arguments.length;c++)b[c-1]=arguments[c];return a.apply(r,b)});f.reRender=function(a,b){return s.execute(r.renderPage,a,b)},f.reRenderParts=function(){return s.execute(r.renderPage)},f.renderAnimated=function(a,b,c){return s.execute(r.renderAnimate,a,b,c)},f.calculateAndRenderAllPages=function(a){return r.calculateAndRenderAllPages(a)},c.consumerMode||(f.onLayoutSolutionChanged(function(){return f.reRender()}),f.onDataChanged(function(){return f.reRender()}))}}return b.$inject=["$p","flags","modelTree","layoutSolver","storyServices","renderer","richTextService","documentServicesMediator","solutionPreparation","rendererSeo","modelLogs","modelStore","modelBuilder","modelRender","modelRenderGoToEditor","modelLookup"],b.prototype.get=function(a,b,c){return void 0===a&&(a="body"),void 0===b&&(b=this.storyServices.story.selectedPage),void 0===c&&(c=!1),c?this.modelStore.mobileModel.get(a,b):this.modelStore.model.get(a,b)},b.prototype.getToSave=function(){var b=a.ModelUtils.stripOrigin(this.modelStore.model.get("header")),c=a.ModelUtils.stripOrigin(this.modelStore.model.get("footer")),d=this.storyServices.story.selectedPage,e=a.ModelUtils.stripOrigin(this.modelStore.model.get("body",this.storyServices.story.selectedPage));return{header:b,footer:c,selectedPage:e,selectedPageId:d}},b.prototype.loadSaved=function(a){this.modelStore.model.save("header",a.header),this.modelStore.model.save("footer",a.footer),this.modelStore.model.save("body",a.selectedPage,a.selectedPageId)},b.prototype.renderAnimate=function(b,c,d){var e=this;this.modelLogs.trace("renderAnimate",b),d=d||{type:"NoTransition",direction:"NORMAL"};var f=b.startIndex,g=b.newSolution,h=b.oldSolution,i=h.slice(f,f+b.length),j=g.slice(f,f+b.newLength),k=j[0]||i[0],l=k.sitePart,m=k.page,n=this.solutionPreparation.prepareSolution(l,m),o=this.modelRender.partContainer(l,m),p=n.getSelectedSolution();return this.modelBuilder.buildFrom(l,p,a.ModelBuilder.DESKTOP_MIN_HEIGHT).then(function(a){var b=e.modelStore.model.get(l,m),c=e.modelLookup.stripsForLgs(a,j),f=b?e.modelLookup.stripsForLgs(b,i):[];return e.modelRender.renderAnimate(a,b,c,f,o,d).then(function(){e.modelStore.model.save(l,a,m),e.postRender(l,a,n,m)})})},b.prototype.renderPage=function(b,c){var d=this;void 0===b&&(b=null),void 0===c&&(c=this.storyServices.story.selectedPage),this.modelLogs.trace("renderPage",b,c);var e=b?[b]:["body","header","footer"],f=e.map(function(a){return d.solutionPreparation.prepareSolution(a,c)}),g=e.map(function(b,c){var e=f[c].getSelectedSolution();return d.modelBuilder.buildFrom(b,e||[],a.ModelBuilder.DESKTOP_MIN_HEIGHT)}),h=this.richTextService.initForRender(),i=this.documentServicesMediator.siteChanges.flush(!0);return this.$p.all([h,i]).then(function(){return d.$p.all(g)}).then(function(a){a.forEach(function(a,b){var g=d.modelRender.partContainer(e[b],c),h=d.modelStore.model.get(e[b],c);d.modelRender.renderPart(e[b],c,a,h,g),d.modelStore.model.save(e[b],a,c),d.postRender(e[b],a,f[b],c),d.documentServicesMediator.siteChanges.flush()})})},b.prototype.postRender=function(a,b,c,d){var e=c.getSelectedSolution();if(e){this.solutionPreparation.postRender(a,e,b);var f="body"!==a||this.storyServices.story.selectedPage===d;f&&this.storyServices.emitRenderedPart(a,e,b.height,d)}},b.prototype.goToEditor=function(a,b){if(a){var c=this.get("body",b.id);this.modelRenderGoToEditor.adjust(b,c)}},b.prototype.calculateAndRenderAllPages=function(a){var b=this;return _.sequencePromises(this.modelTree.getPagesNodes(),function(c){return b.calculateAndRenderPage(c,a)})},b.prototype.calculateAndRenderPage=function(a,b){var c=this,d=this.$p.when();return a.dirty!==!1&&(d=this.layoutSolver.calculatePage(a.id,!0).then(function(){return c.renderPage("body",a.id)}).then(function(){return c.rendererSeo.setPageSEO(a)})),d.then(function(){return c.goToEditor(b,a)})},b}();a.RenderedModelApi=b,angular.module("siteGeneratorStaticsCoreAppInternal").service("renderedModelApi",b)}(core||(core={}));var core;!function(a){var b=function(){function b(b,c,d,e,f,g,h,i,j,k,l,m,n,o,p){var q=this;if(this.$p=b,this.flags=c,this.renderedModelApi=d,this.modelTree=e,this.storyServices=f,this.renderer=g,this.$log=h,this.applicationState=i,this.documentServicesMediator=j,this.modelLogs=k,this.mobileSolutionManager=l,this.modelStore=m,this.mobileModelBuilder=n,this.mobileModelRender=o,this.modelUtils=p,this.calculateAndRenderMobilePage=function(a,b){var c=q.storyServices.story.selectedPage;q.storyServices.story.selectedPage=a.id;var d=q.renderer.editorRenderMode;return q.renderer.editorRenderMode=b,q.$p.when().then(function(){return q.mobileSolutionManager.calculatePage(a.id,!0)}).then(function(){return q.mobileSolutionManager.renderPage(a.id)}).then(function(a){q.renderer.editorRenderMode=d,q.storyServices.story.selectedPage=c})},this.calculateAndRenderDesktopAndMobilePages=function(a,b){void 0===b&&(b=!1);var c=q.modelTree.getPagesNodes().filter(function(b){return"current"===a?q.storyServices.story.selectedPage===b.id:!0});return q.$p.when().then(function(){return _.sequencePromises(c,function(a){return q.renderedModelApi.calculateAndRenderPage(a,b)})}).then(function(){return q.applicationState.isInDesktopEditMode()&&q.documentServicesMediator.resetMobileLayoutOnAllPages()}).then(function(){return"current"===a?q.applicationState.enableMobileEditor():void 0}).then(function(){return _.sequencePromises(c,function(a){return q.calculateAndRenderMobilePage(a,b)})})},c.renderedModel&&!c.mobileOldRenderedModel){var r=new a.SequentialExecution(function(a){for(var b=[],c=1;c<arguments.length;c++)b[c-1]=arguments[c];return a.apply(q,b)});f.renderMobileSolution=function(a,b,c,d){return r.execute(q.renderMobile,a,b,c,d)}}f.calculateAndRenderDesktopAndMobilePages=this.calculateAndRenderDesktopAndMobilePages}return b.$inject=["$p","flags","renderedModelApi","modelTree","storyServices","renderer","$log","applicationState","documentServicesMediator","modelLogs","mobileSolutionManager","modelStore","mobileModelBuilder","mobileModelRender","modelUtils"],b.prototype.renderMobile=function(a,b){var c=this;void 0===a&&(a=null),void 0===b&&(b=this.storyServices.story.selectedPage),this.modelLogs.trace("renderMobile",a,b);var d=this.mobileSolutionManager.getMobileSitePartSolution(a,b),e=this.modelStore.model.get(a,b);return this.mobileModelBuilder.buildFrom(a,d,e).then(function(e){var f=c.mobileModelRender.partContainer(a,b);return c.mobileModelRender.renderPart(e,f),c.modelStore.mobileModel.save(a,e,b),c.mobilePostRender(a,e,d,b),c.documentServicesMediator.siteChanges.flush(!0)})["catch"](function(a){c.$log.error(a)})},b.prototype.mobilePostRender=function(a,b,c,d){var e=this.modelUtils.getHeight(b),f="body"!==a||this.storyServices.story.selectedPage===d;f&&this.storyServices.emitRenderedPart(a,c,e,d)},b}();a.MobileRenderedModelApi=b,angular.module("siteGeneratorStaticsCoreAppInternal").service("mobileRenderedModelApi",b)}(core||(core={}));var core;!function(a){var b=function(){function a(a,b){this.modelTree=a,this.modelLookup=b,this.toStructure=function(a,b){return{component:a.compRef,top:a.compDef.layout.y-b.top}}}return a.$inject=["modelTree","modelLookup"],a.prototype.isAbsolutePosition=function(a,b){var c=a.from.tpaSection===b,d=a.from.slideShow&&a.from.slideShow.indexOf(b)>=0;return c||d},a.prototype.createLayoutGroupStructure=function(a,b){var c=this,d=[];return a.children.forEach(function(e){if(e.from.lgs&&e.from.lgs[0]===b){d.push(c.toStructure(e,b));var f=c.modelTree.findIdentifyingNode(b.segments[0].node),g=c.modelLookup.findByOrigin({anchorNodeId:f.id},a.children);g&&d.push(c.toStructure(g,b))}else c.isAbsolutePosition(e,b)&&d.push(c.toStructure(e,b))}),d},a}();a.RenderedModelAdapter=b,angular.module("siteGeneratorStaticsCoreAppInternal").service("renderedModelAdapter",b)}(core||(core={}));var core;!function(a){var b=function(){function a(a,b,c,d,e){this.flags=a,this.renderedModelAdapter=b,this.mediaOverride=c,this.modelStore=d,this.modelLookup=e}return a.$inject=["flags","renderedModelAdapter","mediaOverride","modelStore","modelLookup"],a.prototype.getRenderedDecorativeStripRef=function(a){if(!this.flags.renderedModel)return a.renderedDecorativeStripRef;var b=this.modelStore.model.get("body",a.page),c=this.modelLookup.findStripByLg(b,a);return c&&c.compRef},a.prototype.getDecorativeStripRef=function(a){if(!this.flags.renderedModel)return a&&a.decorativeStripRef;var b=this.modelStore.model.get("body",a.page),c=a&&b.children.find(function(b){return b.children[0]&&b.from.lgs&&0===b.from.lgs.indexOf(a)});return c&&c.compRef},a.prototype.getLgRef=function(a){if(!this.flags.renderedModel)return a&&a.componentRef;var b=this.modelStore.model.get("body",a.page),c=a&&this.modelLookup.findLg(b,a);return c&&!a.columns?c.compRef:void 0},a.prototype.getColumnsContainerRef=function(a){if(!this.flags.renderedModel)return a&&a.columnsComponentRef;var b=a&&this.getColumnsContainer("body",a);return b&&a.columns?b.compRef:void 0},a.prototype.getSegmentOrColumnRef=function(a,b,c,d){if(!this.flags.renderedModel)return c[d].ref;var e=b&&this.getColumnsContainer(a,b),f=e&&e.children.filter(function(a){return!!a.from.segment&&a.from.segment===c[d].segment.getDesktopSegment()})[d];return _.get(f||e,"compRef")},a.prototype.getComponentRefByLayout=function(a,b){if(!this.flags.renderedModel)return a.getRenderedComponent(b)||void 0;var c,d=this.modelStore.model.get("footer"===a.page?"footer":a.sitePart,a.getPageDescriptor());if("header"===a.sitePart)c=this.findSegmentLayout(d,a,b);else{var e=this.modelLookup.findLg(d,a.containingLG);c=e&&this.findSegmentLayout(e,a,b)}return c&&c.compRef},a.prototype.getColumnsContainer=function(a,b){var c=this.modelStore.model.get(a,b.page),d=this.modelLookup.findLg(c,b);return d&&(d.children[0].from.lg?d.children[0]:d)},a.prototype.layoutsMatch=function(a,b){return!!(void 0!==a.argIndex&&a.argIndex===b.argIndex||a.containerRole&&a.containerRole===b.containerRole)},a.prototype.findSegmentLayout=function(a,b,c){var d,e=this;return _.each(a.children,function(a){d=a.from.layout&&a.from.le.containingSegment===b&&e.layoutsMatch(a.from.layout,c)?a:d||e.findSegmentLayout(a,b,c)}),d},a.prototype.getStripOfLERef=function(a){if(!this.flags.renderedModel){var b=a.getLE(),c=_.find(b.layout,{subType:"image"}).argIndex;return b.argsComponents[c]}var d=a.containingLG,e=this.getMediaStrip(d);return e&&e.compRef},a.prototype.getStripGalleryRef=function(a){if(!this.flags.renderedModel)return a&&a.segments&&a.segments[0]&&a.segments[0].stripGalleryRef;var b=this.getMediaStrip(a);return b&&b.compRef},a.prototype.getMediaStripRef=function(a){if(!this.flags.renderedModel)return a&&a.stripComponentRef;if(!a.isHeader()){var b=this.getMediaStrip(a);return b&&b.compRef}},a.prototype.getMediaStrip=function(a){var b=this,c=this.modelStore.model.get("body",a.page),d=a&&this.modelLookup.findLg(c,a);return _.find(d.children,function(a){var c=a.from&&a.from.layout;return c?b.mediaOverride.isStripType(a.from.le,a.from.layout):!1})},a}();a.RenderedModelMobileAdapter=b,angular.module("siteGeneratorStaticsCoreAppInternal").service("renderedModelMobileAdapter",b)}(core||(core={}));var core;!function(a){var b=function(){function b(b,c,d,e,f,g,h,i,j,k,l,m){var n=this;this.$p=b,this.flags=c,this.heightMutations=d,this.applicationParameters=e,this.pagesManager=f,this.mediaOverride=g,this.tpaService=h,this.modelLogs=i,this.modelStore=j,this.modelRenderDS=k,this.storyServices=l,this.documentServicesMediator=m,this.isActive=!1,this.sync=function(){var a=n.pagesManager.getCurrentPageName()||n.storyServices.story.selectedPage,b=n.modelStore.model.get("body",a);return n.modelLogs.trace("sync",a,b),n.syncModel(b).then(function(b){return b?n.storyServices.reRender("body",a):null}).then(function(){return n.syncMobile(a)}).then(function(b){return b?n.storyServices.renderMobileSolution("body",a):null})},this.heightByStep=function(a,b){return Math.ceil(a/b)*b},this.isBlogFeed=function(a){return a.from&&a.from.lg&&a.from.lg.contentType===n.applicationParameters.tpaTypes.Blog.type},this.isUnexpectedGallery=function(a){return a.from&&a.from.layout&&n.mediaOverride.isUnexpectedHeight(a.from.le,a.from.layout)},this.isTpa=function(a){return a.from&&(a.from.tpaWidget||a.from.tpaSection)},this.isContactForm=function(a){return a.from&&a.from.layout&&"form"===a.from.layout.type},c.renderedModel&&(this.sequentialSync=new a.SequentialExecution(this.sync),m.siteChanges.register(function(){n.isActive&&n.sequentialSync.execute()},!0))}return b.$inject=["$p","flags","heightMutations","applicationParameters","pagesManager","mediaOverride","tpaService","modelLogs","modelStore","modelRenderDS","storyServices","documentServicesMediator"],b.prototype.activate=function(){return this.isActive=!0,this.sequentialSync.execute()},b.prototype.syncMobile=function(a){if(!this.flags.mobileOldRenderedModel){var b=this.modelStore.mobileModel.get("body",a);return this.syncModel(b)}},b.prototype.syncModel=function(a){if(!a||!a.children[0])return this.$p.when(!1);if(this.tpaService.isCurrentPageIsBlogSinglePost()){var b=this.updateBlogSinglePost(a);return this.$p.when(b)}return this.syncNode(a)},b.prototype.updateBlogSinglePost=function(a){var b=a.children[1],c=this.documentServicesMediator.getCurrentPageId(),d=this.documentServicesMediator.getPageReference(c),e=this.documentServicesMediator.getLayout(d),f=b.compDef.layout.height;if(e.height-f!==0){var g=a.children[1].from.lgs[0];return this.changeLGHeight(g,e.height,!0),!0}return!1},b.prototype.syncNode=function(a){var b=this,c=a.compRef,d=!1;return(!c||this.documentServicesMediator.doesComponentExistByRef(c))&&(d=this.isBlogFeed(a)?this.updateBlogFeed(a):this.isTpa(a)?this.updateTpa(a):this.isUnexpectedGallery(a)?this.updateUnexpectedLayout(a,!0):this.isContactForm(a)?this.updateUnexpectedLayout(a,!1):this.$p.all(a.children.map(function(a){return b.syncNode(a)})).then(function(a){return a.indexOf(!0)>=0})),d.then?d:this.$p.when(d)},b.prototype.updateBlogFeed=function(a){var b=a.from.lg,c=a.compDef.layout.height,d=this.tpaService.getBlogFeedHeight(a.from.lg.isMobile());this.modelRenderDS.tpa.section.fixBlogFeedContainer(a,d);var e=this.heightByStep(d,this.applicationParameters.gridStep),f=e-c;return 0!==f?(this.changeLGHeight(b,e),this.tpaService.setHeightOfPreset(b.segments[0].node,b.targetHeight),!0):!1},b.prototype.updateTpa=function(a){var b=a.from.tpaSection||a.from.tpaWidget,c=a.compDef.layout.height,d=this.documentServicesMediator.getLayout(a.compRef),e=this.heightByStep(d.height,this.applicationParameters.gridStep);return Math.abs(e-c)>this.applicationParameters.gridStep?(this.changeLGHeight(b,e),this.tpaService.setHeightOfPreset(b.segments[0].node,b.targetHeight),!0):!1},b.prototype.updateUnexpectedLayout=function(a,b){var c=this,d=this.$p.when(!1),e=a.from.le,f=a.from.layout,g=e.containingSegment,h=e.containingLG,i=a.from.layout.height,j=this.documentServicesMediator.getLayout(a.compRef),k=j.height-i;return k&&Math.abs(k)>this.heightStep(e)&&(0>k&&(d=e.shrink()),d=d.then(function(){var a=!1;if(b||(e.mutate(f.argIndex,i+k),a=!0),b||0>k){var d=e.mutateByStretching(g.height+k);e.squizLayouts(),a=a||d&&d.containerMutation}if(a){var j=_.findIndex(c.heightMutations.heightMutations,function(a){return a>=e.height});return c.changeLGHeight(h,e.height,!0,j),
!0}return!1})),d},b.prototype.heightStep=function(a){var b=a&&a.height>=this.applicationParameters.minHeightForLargeHeightMutations;return b?this.applicationParameters.heightMutationStep:this.applicationParameters.gridStep},b.prototype.changeLGHeight=function(a,b,c,d){void 0===c&&(c=!1),d>=0?a.changeHeightMutationIndex(d):a.targetHeight=b;var e=a.segments[0];e.height=a.targetHeight,e.selectedHeightMutation=a.selectedHeightMutation;var f=e.getLENoError();f&&!c&&(f.height=a.targetHeight,f.layout[0].height=a.targetHeight)},b}();a.ModelSiteChanges=b,angular.module("siteGeneratorStaticsCoreAppInternal").service("modelSiteChanges",b)}(core||(core={}));var core;!function(a){var b=function(){function a(a){this.operation=a,this.isQueued=!1}return a.prototype.execute=function(){for(var a=[],b=0;b<arguments.length;b++)a[b]=arguments[b];return this.running?(this.queuedArgs=a,this.isQueued=!0,this.running):this.callRealAction.apply(this,a)},a.prototype.callRealAction=function(){for(var a=this,b=[],c=0;c<arguments.length;c++)b[c]=arguments[c];var d=this.operation.apply(this,b);return this.running=d.then(function(){return a.running=null,a.isQueued?(a.isQueued=!1,a.callRealAction.apply(a,a.queuedArgs)):void 0}),this.running},a}();a.SequentialExecution=b}(core||(core={}));var core;!function(a){var b=function(){function a(a,b){var c=this;this.flags=a,this.$log=b,this.styles={},this.ifLog=function(a){return c.flags.renderedModel&&c.flags.debug?a:_.noop},this.trace=this.ifLog(function(a){for(var b=[],d=1;d<arguments.length;d++)b[d-1]=arguments[d];var e=c.style(a);(f=c.$log).info.apply(f,["%c"+a,e].concat(b));var f})}return a.$inject=["flags","$log"],a.prototype.style=function(a){return this.styles[a]||(this.styles[a]="color: #"+((1<<24)*Math.random()|0).toString(16)),this.styles[a]},a}();a.ModelLogs=b,angular.module("siteGeneratorStaticsCoreAppInternal").service("modelLogs",b)}(core||(core={}));var core;!function(a){a.invisibleContainerStyleId="c100",a.renderConfig={segmentPadding:20,mobileSegmentPadding:10}}(core||(core={}));var core;!function(a){var b=function(){function b(){}return b.prototype.stripsForLgs=function(b,c){return b.children.filter(function(b){return b.children[0]&&_.every(a.ModelUtils.getLgNodes(b),function(a){return c.indexOf(a.from.lg)>=0})})},b.prototype.findByOrigin=function(a,b){var c=this;return _.find(b,function(b){var d=Object.keys(b.from);return _.every(d,function(d){return c.same(b.from[d],a[d])})})},b.prototype.findForUpdate=function(b,c){var d=_.find(c,function(a){return a.key===b.key}),e=d&&a.ModelUtils.isSameComponent(b.compDef,d.compDef);return e?d:null},b.prototype.findStripByLg=function(a,b){return _.find(a.children,function(a){return a.from.lgs&&a.from.lgs.indexOf(b)>=0})},b.prototype.findLg=function(a,b){var c=a.children.filter(function(a){return a.from.lg===b})[0];if(!c){var d=this.findStripByLg(a,b);c=d&&_.find(d.children,function(a){return a.from.lg===b})}return c},b.prototype.flatten=function(a,b,c){var d=this;return void 0===b&&(b=function(){return!0}),void 0===c&&(c=[]),(!a.from||b(a))&&(a.from&&c.push(a),a.children.forEach(function(a){return d.flatten(a,b,c)})),c},b.prototype.findFirst=function(a,b){var c=this,d=null;for(b(a)&&(d=a);!d;)a.children.forEach(function(a){return d=c.findFirst(a,b)});return d},b.prototype.same=function(a,b){if(Array.isArray(a)&&Array.isArray(b)){var c=a.reduce(function(c,d,e){return c&&a[e]===b[e]},!0);return c&&a.length===b.length}return a===b},b}();a.ModelLookup=b,angular.module("siteGeneratorStaticsCoreAppInternal").service("modelLookup",b)}(core||(core={}));var core;!function(a){var b=function(){function a(){var a=this;this.store={},this.defineStore=function(b){return{save:function(c,d,e){if(d){var f=a.getStore(c,e,b);f.model=d}},get:function(c,d){var e=a.getStore(c,d,b);return e.model}}},this.model=this.defineStore("desktop"),this.mobileModel=this.defineStore("mobile")}return a.prototype.getStore=function(a,b,c){var d,e=this.ensureStore(c);return"body"===a?(e.body[b]=e.body[b]||{},d=e.body[b]):(e[a]=e[a]||{},d=e[a]),d},a.prototype.ensureStore=function(a){return this.store[a]||(this.store[a]={header:null,footer:null,body:{}}),this.store[a]},a}();a.ModelStore=b,angular.module("siteGeneratorStaticsCoreAppInternal").service("modelStore",b)}(core||(core={}));var core;!function(a){var b=function(){function a(a,b){this.$p=a,this.mediaOverride=b,this.mobileLeftPadding=10,this.desktopLeftPadding=20}return a.$inject=["$p","mediaOverride"],a.isSameComponent=function(a,b){var c=["componentType","skin"],d=!0;return c.forEach(function(c){return d=d&&a[c]===b[c]}),d},a.getLgNodes=function(a){return a.children.filter(function(a){return!a.from.galleryName&&!a.from.menu})},a.getBgGalleryNode=function(a){return a.children[0]&&a.children[0].from.galleryName?a.children[0]:void 0},a.stripOrigin=function(b){if(!b)return null;var c=Object.keys(b.from).reduce(function(a,b){return a[b]={},a},{}),d=b.children.map(a.stripOrigin);return _.extend({},b,{from:c,children:d})},a.prototype.getStripLayout=function(a){var b=a.getMediaLayout(),c=b&&this.mediaOverride.isStripType(a,b);return c?b:null},a.prototype.buildNode=function(a,b){var c=this;return void 0===b&&(b=[]),this.$p.all(b).then(function(b){return a.then?a.then(function(a){return c.extend(a,b)}):c.extend(a,b)})},a.prototype.extend=function(a,b){var c={from:{},extraDef:{}};return _.extend(c,a,{children:b})},a.prototype.groupBy=function(a,b){return a.reduce(function(a,c){var d=_.last(a);return b(d,c)?d.push(c):a.push([c]),a},[])},a.prototype.pullChildren=function(a,b){for(var c=0,d=0,e=a,f=0;b>f;++f)e=e.children[0],d+=e.compDef.layout.x,c+=e.compDef.layout.y;return e.children.map(function(a){return a.compDef.layout.x+=d,a.compDef.layout.y+=c,a})},a.prototype.printTree=function(a,b){var c=this;void 0===b&&(b=0),a.children&&a.children.forEach(function(a,d){var e=_.range(b).map(function(){return" "}).join("");console.log(""+e+b+"."+d,a.compDef.componentClass),console.log(""+e+b+"."+d,a.compDef.layout),c.printTree(a,b+1)})},a.prototype.getHeight=function(a){var b=a.height;if(!b&&a.children[0]){var c=_.last(a.children.filter(function(a){return a.from.lgs})),d=c.compDef.layout;b=d.y+d.height}return b||0},a}();a.ModelUtils=b,angular.module("siteGeneratorStaticsCoreAppInternal").service("modelUtils",b)}(core||(core={}));var core;!function(a){var b=function(){function b(a,b,c,d,e){this.modelLookup=a,this.modelBuilder=b,this.documentServicesMediator=c,this.solutionManager=d,this.componentClasses=e}return b.$inject=["modelLookup","modelBuilder","documentServicesMediator","solutionManager","componentClasses"],b.prototype.buildFrom=function(b,c,d){var e=this;this.solutionManager.getAndNormalizeLgDataArray(b,c);var f=_.filter(c,function(a){return!a.isMobile()||a.isMobileFirstLG()});return this.modelBuilder.buildFrom(b,f,a.ModelBuilder.MOBILE_MIN_HEIGHT).then(function(a){return e.assignCompRef(a,d),e.fixNotRenderedLgTops(c),a})},b.prototype.fixNotRenderedLgTops=function(a){_.each(a,function(b,c){if(!b.isMobileFirstLG()&&c){var d=a[c-1],e=b.getLgData();b.top=d.getBoundingTop()+d.getBoundingHeight(),e.strip.enable?b.top+=e.strip.paddingTop:e.topLine.enable&&"space"===e.topLine.line&&(b.top+=e.topLine.space)}})},b.prototype.assignCompRef=function(a,b){var c,d=this;if(a.from){var e=void 0;if(a.extraDef.compId)e={id:a.extraDef.compId};else if(a.from.layout)e="menu"===a.from.layout.type?this.documentServicesMediator.getTinyMenuComp():this.getComponentRefByLayout(b,a.from.le,a.from.layout);else if(a.from.menu)e=this.findMenuStripRef(b);else if(a.from.lgs)c=this.modelLookup.findStripByLg(b,a.from.lgs[0].getDesktopLG()),e=c.compRef;else if(a.from.lg){var f=a.from.columns?this.findColumnsContainer(b,a.from.lg):this.findLg(b,a.from.lg);e=f.compRef}else if(a.from.segment){var g=this.findColumnsContainer(b,a.from.segment.containingLG),h=g.children.filter(function(b){return!!b.from.segment&&b.from.segment===a.from.segment.getDesktopSegment()})[a.from.columnIndex];e=h.compRef}e?a.compRef=this.documentServicesMediator.getMobileComponent(e):console.log("ERROR - couldn' find compRef")}_.each(a.children,function(a){d.assignCompRef(a,c||b)})},b.prototype.findLg=function(a,b){return _.find(a.children,function(a){return a.from.lg===b.getDesktopLG()})},b.prototype.findColumnsContainer=function(a,b){var c=this,d=this.findLg(a,b);return d.children.find(function(a){return a.compDef.componentType===c.componentClasses.stripColumnsContainer.comp})},b.prototype.findMenuStripRef=function(a){var b=_.find(a.children,function(a){return!!a.from.menu});return b&&b.compRef},b.prototype.getComponentRefByLayout=function(a,b,c){var d=b.containingSegment.getDesktopSegment(),e=this.findSegmentLayout(a,d,c);return e&&e.compRef},b.prototype.findSegmentLayout=function(a,b,c){var d,e=this;return _.each(a.children,function(a){d=a.from.layout&&a.from.le.containingSegment===b&&a.from.layout.type===c.type&&a.from.layout.subType===c.subType&&a.from.layout.containerRole===c.containerRole?a:d||e.findSegmentLayout(a,b,c)}),d},b}();a.MobileModelBuilder=b,angular.module("siteGeneratorStaticsCoreAppInternal").service("mobileModelBuilder",b)}(core||(core={}));var core;!function(a){var b=function(){function a(a,b,c,d,e,f,g,h,i,j){this.$p=a,this.solutionManager=b,this.modelUtils=c,this.modelBuilderTpa=d,this.modelDefinitions=e,this.modelBuilderStrips=f,this.modelBuilderStack=g,this.modelAccessibility=h,this.modelBuilderSlidesShow=i,this.modelBuilderLg=j}return a.$inject=["$p","solutionManager","modelUtils","modelBuilderTpa","modelDefinitions","modelBuilderStrips","modelBuilderStack","modelAccessibility","modelBuilderSlidesShow","modelBuilderLg"],a.prototype.buildFrom=function(a,b,c){var d=this;this.solutionManager.getAndNormalizeLgDataArray(a,b);var e=this.modelBuilderStrips.mergeDecorativeStrips(b),f=this.decorativeStrips(e),g=this.anchors(b,e);return f.then(function(b){return g.then(function(e){d.modelAccessibility.updatePart(a,b);var f=d.modelBuilderStrips.mergeAnchors(b,e),g=d.modelBuilderStrips.popAbsolutePositionFromStrips(f);return d.root(a,c,g)})})},a.prototype.root=function(a,b,c){var d={children:c};return"body"===a?(d.height=Math.max(this.modelUtils.getHeight(d),b),d):c.length?this.flatten(d):d},a.prototype.decorativeStrips=function(a){var b=this;return this.$p.all(a.map(function(a){if(SolutionManager.isTpaNode(a[0]))return b.modelBuilderTpa.fromTpa(a);var c=b.modelDefinitions.forDecorativeStrip(a),d=b.modelBuilderSlidesShow.isSlideShow(a),e=d?b.modelBuilderSlidesShow.slideShow(a):a.map(function(a){return b.modelBuilderLg.lg(a)}),f=b.modelDefinitions.forGalleryBackground(a);return f&&e.unshift(b.modelUtils.buildNode(f)),b.modelUtils.buildNode(c,e)})).then(function(a){return b.modelBuilderStack.stackDecorativeStrips(a)})},a.prototype.anchors=function(a,b){var c=this,d=[];return a[0]&&"body"===a[0].sitePart&&(d=b.map(function(a){var b=c.modelDefinitions.forAnchor(a[0]);return c.modelUtils.buildNode(b)})),this.$p.all(d)},a.prototype.flatten=function(a){var b=a.children;return{children:this.modelUtils.pullChildren({children:b},2),height:b[0].compDef.layout.height,hideableComps:b[0].hideableComps}},a}();b.DESKTOP_MIN_HEIGHT=500,b.MOBILE_MIN_HEIGHT=200,a.ModelBuilder=b,angular.module("siteGeneratorStaticsCoreAppInternal").service("modelBuilder",b)}(core||(core={}));var core;!function(a){var b=function(){function b(a,b,c,d){this.tpaService=a,this.mediaOverride=b,this.modelUtils=c,this.modelDefinitions=d}return b.$inject=["tpaService","mediaOverride","modelUtils","modelDefinitions"],b.prototype.forSegment=function(b){var c=b.getLE();if(!c)return[];var d={x:b.left+(b.isMobile?a.renderConfig.mobileSegmentPadding:a.renderConfig.segmentPadding),y:b.top};return this.forLayouts(c,c.layout,d)},b.prototype.forLayouts=function(a,b,c,d){var e=this;void 0===c&&(c={x:0,y:0}),void 0===d&&(d=[]);var f=this.mediaContainer(a,b),g=f.mediaLayout,h=f.onMediaLayouts;return b.forEach(function(b){var f=h.indexOf(b)>=0,i=a.isStructureContainerLayout(b);if(!f&&i)e.skipLayout(c,b,a,d);else if(!f){var j=e.layoutDef(b,a,c),k=e.getLayoutChildren(b,g,h),l=b===g,m=e.forLayouts(a,k,l?c:void 0);d.push(e.modelUtils.buildNode(j,m))}}),d},b.prototype.getLayoutChildren=function(a,b,c){var d=[];return a.layout&&d.push.apply(d,a.layout),a===b&&d.push.apply(d,c),d},b.prototype.mediaContainer=function(a,b){var c=b.filter(function(b){return a.isMediaLayout(b)})[0],d=c&&a.overrides.media&&a.overrides.media[c.argIndex],e=d&&"stripContainer"===d.type,f=[];return c&&e&&(f=b.filter(function(a){return a.onMediaIndex===c.argIndex})),{mediaLayout:c,onMediaLayouts:f}},b.prototype.layoutDef=function(a,b,c){var d;return this.isTpaLayout(a)?(d=this.modelDefinitions.forTpaLayout(b,a,{offset:c}),d.compRef=this.tpaService.getShoppingCartId()):d=this.modelDefinitions.forLayout(b,a,{offset:c}),d},b.prototype.skipLayout=function(a,b,c,d){var e={x:a.x+b.left,y:a.y+b.top};b.layout&&this.forLayouts(c,b.layout,e,d)},b.prototype.isTpaLayout=function(a){return"shoppingCart"===a.type},b}();a.ModelBuilderLayout=b,angular.module("siteGeneratorStaticsCoreAppInternal").service("modelBuilderLayout",b)}(core||(core={}));var core;!function(a){var b=function(){function a(a,b,c,d){this.documentServicesMediator=a,this.tpaService=b,this.modelUtils=c,this.modelDefinitions=d,this.isTpaSection=function(a){return a.isTpa||a.isTpaMultiSection()}}return a.$inject=["documentServicesMediator","tpaService","modelUtils","modelDefinitions"],a.prototype.fromTpa=function(a){var b=a[0].segments[0].node;return this.isTpaSection(b)?this.tpaSection(a,this.tpaSectionRef(b)):this.tpaWidget(a,b.widgetRef)},a.prototype.tpaSectionRef=function(a){return a.isTpa?this.tpaService.getCompRef(a.contentElementType):a.widgetRef},a.prototype.tpaSection=function(a,b){var c=this.modelDefinitions.forDecorativeStrip(a),d=this.modelDefinitions.forTpaSection(a[0]),e=this.modelUtils.buildNode(d),f=this.modelUtils.buildNode(c,[e]);return f.then(function(a){return a.extraDef.zIndex=0,a.children[0].compRef=b,a})},a.prototype.tpaWidget=function(a,b){var c=this,d=a[0],e=this.modelDefinitions.forTopLevelColumns(d),f=this.modelDefinitions.forTopLevelColumn(d),g=this.modelDefinitions.forTpaWidget(d),h=this.modelUtils.buildNode(g),i=this.modelUtils.buildNode(f,[h]),j=this.modelUtils.buildNode(e,[i]);return j.then(function(a){return b&&c.documentServicesMediator.doesComponentExistByRef(b)&&c.attachRefs(a,b),a})},a.prototype.attachRefs=function(a,b){var c=this.documentServicesMediator.getContainer(b),d=/\.Column$/.test(this.documentServicesMediator.getComponentType(c));d&&(a.compRef=this.documentServicesMediator.getContainer(c),a.children[0].compRef=c),a.children[0].children[0].compRef=b},a}();a.ModelBuilderTpa=b,angular.module("siteGeneratorStaticsCoreAppInternal").service("modelBuilderTpa",b)}(core||(core={}));var core;!function(a){var b=function(){function a(a,b){var c=this;this.solutionManager=a,this.modelUtils=b,this.mergeDecorativeStrips=function(a){return c.modelUtils.groupBy(a,c.shouldMergeToStrip)},this.shouldMergeToStrip=function(a,b){if(!a||!a[0])return!1;var d=a[0],e=d.getLgData().strip,f=b.getLgData().strip;return c.solutionManager.isStripsShouldCombine(e,f,d,b)}}return a.$inject=["solutionManager","modelUtils"],a.prototype.mergeAnchors=function(a,b){var c=_.uniq(b,function(a){return a.from.anchorNodeId}),d=0;return a.reduce(function(a,b){var e=c[d];return e&&e.from.anchorNodeId===b.from.lgs[0].findIdentifyingNodeId()&&(d++,e.compDef.layout.y=b.compDef.layout.y,a.push(e)),a.push(b),a},[])},a.prototype.popAbsolutePositionFromStrips=function(a){var b=this;return a.reduce(function(a,c){a.push(c);var d=_.findIndex(c.children,function(a){return b.isOnPage(a)});if(d>=0){var e=c.children.splice(d,1)[0];e.compDef.layout.y+=c.compDef.layout.y,a.push(e)}return a},[])},a.prototype.isOnPage=function(a){return a.from.tpaSection||a.from.slideShow},a}();a.ModelBuilderStrips=b,angular.module("siteGeneratorStaticsCoreAppInternal").service("modelBuilderStrips",b)}(core||(core={}));var core;!function(a){var b=function(){function b(a,b){this.mergedHeaderService=a,this.flags=b}return b.$inject=["mergedHeaderService","flags"],b.prototype.stackDecorativeStrips=function(a){var b=this;return a.forEach(function(a){b.isTpaWidgetStrip(a)?b.stackTpaWidget(a):b.stackStrip(a)}),this.stack(a),this.flags.mergedHeader&&this.stretchFirstSection(a),this.updateBackToSolution(a),a},b.prototype.isTpaWidgetStrip=function(a){var b=a.children[0];return b.children[0]&&b.children[0].from.tpaWidget},b.prototype.stackTpaWidget=function(a){var b=a.children[0],c=b.children[0],d=this.lgSpacing(b.from.lg),e=d.top,f=d.bottom;c.compDef.layout.y+=e,b.compDef.layout.height+=e+f,a.compDef.layout.height+=e+f},b.prototype.stackStrip=function(b){var c=this,d=a.ModelUtils.getLgNodes(b),e=d.reduce(function(a,b){var d=c.lgSpacing(b.from.lg),e=d.top,f=d.bottom;return b.compDef.layout.y=a+e,f},0);this.stack(d);var f=_.last(d).compDef.layout;b.compDef.layout.height=f.y+f.height+e;var g=a.ModelUtils.getBgGalleryNode(b);g&&(g.compDef.layout.height=b.compDef.layout.height)},b.prototype.stack=function(a){return a.reduce(function(a,b){return b.compDef.layout.y+=a,b.compDef.layout.y+b.compDef.layout.height},0),a},b.prototype.stretchFirstSection=function(a){if(0!==a.length){var b=this.getPart(a[0]);"body"===b&&this.mergedHeaderService.stretchFirstSection(a[0])}},b.prototype.updateBackToSolution=function(b){b.forEach(function(b){return a.ModelUtils.getLgNodes(b).forEach(function(a){var c=a.compDef.layout.y+b.compDef.layout.y;if(a.from.lg){a.from.lg.top=c;var d=a.children[0];d&&d.from.tpaWidget&&(a.from.lg.top+=d.compDef.layout.y)}a.from.lgs&&a.from.lgs.forEach(function(a){return a.top=c})})})},b.prototype.lgSpacing=function(a){var b=0,c=0,d=a.getLgData(),e=d;a.isMobile()&&(e=_.last(a.getMobileSiblingLGs()).getLgData());var f=d.topLine;f.enable&&(b+=f.space);var g=e.bottomLine;g.enable&&(c+=g.space);var h=d.strip;h.enable&&(b+=h.paddingTop);var i=e.strip;return i.enable&&(c+=i.paddingBottom),{top:b,bottom:c}},b.prototype.getPart=function(a){return a.from.lgs[0].sitePart},b}();a.ModelBuilderStack=b,angular.module("siteGeneratorStaticsCoreAppInternal").service("modelBuilderStack",b)}(core||(core={}));var core;!function(a){var b=function(){function a(a,b,c,d,e){this.modelUtils=a,this.modelDefinitions=b,this.modelBuilderLayout=c,this.mediaOverride=d,this.columnService=e,this.hasColumns=function(a){return a.columns}}return a.$inject=["modelUtils","modelDefinitions","modelBuilderLayout","mediaOverride","columnService"],a.prototype.columnSiblings=function(a){var b=[],c=a.segments[0].getLE(),d=this.modelUtils.getStripLayout(c);if(d&&(!a.isMobile()||1===a.columns.length)){var e=this.modelDefinitions.forLayout(c,d);b.push(this.modelUtils.buildNode(e))}return b},a.prototype.columnsContainer=function(a){var b,c=this,d=this.lgHeight(a),e=this.modelDefinitions.forColumnsContainer(a,d);if(a.isMobile()&&a.isMobileFirstLG()){var f=a.getMobileSiblingLGs();b=_(f).map(function(a){return c.columns(a)}).flatten().value()}else b=this.columns(a);return this.modelUtils.buildNode(e,b)},a.prototype.lgHeight=function(a){if(a.isMobile()){var b=a.getMobileSiblingLGs();if(b.length>1){var c=_(b).map("columns").flatten().map("height").flatten().reduce(function(a,b){return a+b},0);return c}}return Math.max.apply(Math,[a.targetHeight].concat(_.map(a.columns,"height")))},a.prototype.columns=function(a){var b=this,c=this.lgHeight(a);return a.columns.map(function(d,e){var f=d.isMobile?d.height:c;return b.singleColumn(a,d,e,f)})},a.prototype.singleColumn=function(a,b,c,d){var e=this.modelDefinitions.forColumn(a,b,c,d),f=[];if(!b.empty){var g=b.segment,h=g.getLENoError();if(h){var i=-1;b.isVirtual&&(i=b.isMobile?c:b.virtualColumnIndex);var j=this.columnService.hasMediaBackground(a.columns,c,a),k=this.getLayouts(h,i,j,a.columns,c);f=this.modelBuilderLayout.forLayouts(h,k)}}return this.modelUtils.buildNode(e,f)},a.prototype.getLayouts=function(a,b,c,d,e){var f=this,g=0>b?a.layout:d[0].isMobile?d[b].layout:a.getColumns()[b].layout;return c&&(g=g.filter(function(a){return"media"!==a.type})),a.isMobile()&&d&&d[0].isMobile&&(g=this.columnService.addMobilePadding(g,this.modelUtils.mobileLeftPadding)),g=this.columnService.adjustLayoutForColumns(a,g,d,e).map(function(a,b){return a.originalLayout=g[b],a}),g.filter(function(b){return!f.mediaOverride.isStripType(a,b)})},a}();a.ModelBuilderColumns=b,angular.module("siteGeneratorStaticsCoreAppInternal").service("modelBuilderColumns",b)}(core||(core={}));var core;!function(a){var b=function(){function a(a,b,c,d,e,f,g){var h=this;this.modelUtils=a,this.componentClasses=b,this.flags=c,this.slideShowService=d,this.documentServicesMediator=e,this.modelBuilderLg=f,this.modelDefinitions=g,this.isHeader=function(a){return"ListHeader"===a.contentType},this.isFooter=function(a){return"ListFooter"===a.contentType},this.isStrip=function(a){return a.compDef.componentType===h.componentClasses.stripContainer.comp||a.compDef.componentType===h.componentClasses.stripColumnsContainer.comp||a.compDef.componentType===h.componentClasses.column.comp}}return a.$inject=["modelUtils","componentClasses","flags","slideShowService","documentServicesMediator","modelBuilderLg","modelDefinitions"],a.prototype.slideShow=function(a){var b=this,c=a.filter(this.isHeader)[0],d=a.filter(this.isFooter)[0],e=a.filter(function(a){return!b.isHeader(a)&&!b.isFooter(a)}),f=this.modelDefinitions.forSlideShowContainer(e),g=[];return c&&g.push(this.modelUtils.buildNode(this.modelBuilderLg.lg(c))),g=g.concat(this.modelUtils.buildNode(f,e.map(function(a){return b.singleSlideShow(a)}))),d&&g.push(this.modelUtils.buildNode(this.modelBuilderLg.lg(d))),g},a.prototype.singleSlideShow=function(a){var b=this,c=this.modelDefinitions.forSlideShow(a);return this.modelUtils.buildNode(c,this.modelBuilderLg.children(a)).then(function(a){return b.removeStrips(a)})},a.prototype.isSlideShow=function(a){var b=this;if(!this.flags.listItemSlideShow)return!1;if(!_.any(a,function(a){return!b.isHeader(a)&&!b.isFooter(a)}))return!1;var c=a[0].segments[0].node;if(!c)return!1;var d=this.slideShowService.isSlideShowNode(c.identifyingNodeId);return c.isListItem&&d},a.prototype.removeStrips=function(a){var b=this,c=[];return a.children.forEach(function(a){b.removeStrips(a),b.isStrip(a)?c.push.apply(c,a.children):c.push(a)}),a.children=c,a},a}();a.ModelBuilderSlidesShow=b,angular.module("siteGeneratorStaticsCoreAppInternal").service("modelBuilderSlidesShow",b)}(core||(core={}));var core;!function(a){var b=function(){function a(a,b,c,d){this.modelBuilderColumns=a,this.modelBuilderLayout=b,this.modelDefinitions=c,this.modelUtils=d}return a.$inject=["modelBuilderColumns","modelBuilderLayout","modelDefinitions","modelUtils"],a.prototype.children=function(a){var b=this,c=[];if(this.modelBuilderColumns.hasColumns(a))c.push.apply(c,this.modelBuilderColumns.columnSiblings(a)),c.push(this.modelBuilderColumns.columnsContainer(a));else{var d=a.segments.map(function(c){var d=b.modelBuilderLayout.forSegment(c);return b.mergeMenuStrip(a,d),d});c.push.apply(c,_.flatten(d))}return c},a.prototype.lg=function(a){var b=this.modelDefinitions.forLg(a);return this.modelUtils.buildNode(b,this.children(a))},a.prototype.mergeMenuStrip=function(a,b){var c=this.modelDefinitions.forMenuStrip(a);if(c){var d=this.modelUtils.buildNode(c);b.unshift(d)}return b},a}();a.ModelBuilderLg=b,angular.module("siteGeneratorStaticsCoreAppInternal").service("modelBuilderLg",b)}(core||(core={}));var core;!function(a){var b=function(){function b(a,b,c,d,e,f,g,h,i,j,k,l,m){this.mediaOverride=a,this.modelTree=b,this.flags=c,this.modelAccessibility=d,this.componentAttributesBuilder=e,this.componentClasses=f,this.applicationParameters=g,this.componentBuilderProvider=h,this.modelAttributes=i,this.modelStyles=j,this.columnAttributes=k,this.slideShowAttributes=l,this.galleryBgPropertiesOverrides=m,this.key={lg:function(a,b){var c=b?b+"-":"",d=a.segments[0]&&a.segments[0].node;if(d){var e=a.contentType?a.contentType+"-":"";return""+c+e+d.id}return""+c+a.getTypeForLSS()},layout:function(a,b){var c=b.subType?b.subType:b.type,d=a.containingLG;if("header"===d.sitePart||"footer"===d.sitePart)return d.contentType+"-"+c+"-"+b.width;var e=a.containingSegment.getTypeForLSS();return e+"-"+c}}}return b.$inject=["mediaOverride","modelTree","flags","modelAccessibility","componentAttributesBuilder","componentClasses","applicationParameters","componentBuilderProvider","modelAttributes","modelStyles","columnAttributes","slideShowAttributes","galleryBgPropertiesOverrides"],b.prototype.forLg=function(a,b){void 0===b&&(b=a.targetHeight);var c=this.modelAttributes.lg(a,b),d=this.key.lg(a);return this.build(c,{from:{lg:a},key:d})},b.prototype.forDecorativeStrip=function(a){var b=this.modelAttributes.decorativeStrip(a),c=this.key.lg(a[0],"decorativeStip");return this.build(b,{from:{lgs:a},key:c})},b.prototype.forTopLevelColumns=function(a,b){void 0===b&&(b=a.targetHeight);var c=this.columnAttributes.columnsContainer(a,b),d=a.getLgData();_.get(d,["strip","enable"])&&(c.design={type:"MediaContainerDesignData",background:{type:"BackgroundMedia",color:d.strip.color}}),c.properties={columnsMargin:0,frameMargin:0,fullWidth:!0,rowMargin:0,siteMargin:0};var e=this.key.lg(a,"columnsContainer");return this.build(c,{from:{lgs:[a]},key:e})},b.prototype.forTopLevelColumn=function(a){var b=this.columnAttributes.column(a),c=this.key.lg(a,"column");return this.build(b,{from:{lg:a},key:c})},b.prototype.forColumnsContainer=function(a,b){var c=this.columnAttributes.columnsContainer(a,b),d=this.key.lg(a,"columnsContainer");return this.build(c,{from:{lg:a,columns:!0},key:d})},b.prototype.forColumn=function(a,b,c,d){var e=this.columnAttributes.column(a,b,d),f={segment:b.segment,columnIndex:c},g=this.key.lg(a,"column-"+c+"-"+b.width);return this.build(e,{from:f,key:g,columnPositionIndex:b.columnPositionIndex})},b.prototype.forSlideShowContainer=function(a){var b=_.max(a,function(a){return a.targetHeight}),c=this.slideShowAttributes.slideShowContainer(b.targetHeight),d=this.key.lg(b,"slideShowContainer");return this.build(c,{from:{lg:b,slideShow:a},key:d})},b.prototype.forSlideShow=function(a){var b=this.slideShowAttributes.slideShow(a.targetHeight),c=this.key.lg(a,"slide");return this.build(b,{from:{lg:a},key:c})},b.prototype.forTpaSection=function(a){var b={layout:{y:0,height:a.targetHeight}},c=this.key.lg(a,"tpaSection");return{compDef:b,from:{lg:a,tpaSection:a},key:c}},b.prototype.forTpaWidget=function(b){var c=b.segments[0],d=c.getLE(),e={y:0,height:d.layout[0].height},f=_.get(b,"segments[0].node.dockToWidget.fullWidth");return f||(e.x=b.isMobile()?a.renderConfig.mobileSegmentPadding:a.renderConfig.segmentPadding,e.width=d.layout[0].width),{compDef:{layout:e},from:{tpaWidget:b},key:this.key.lg(b,"tpaWidget")}},b.prototype.forGalleryBackground=function(a){var b=a[0],c=b.getLgData(),d=c.strip,e=a[0].targetHeight;if(this.flags.sectionBackground&&"gallery"===d.mediaType){var f=d.galleryType||"Strip Slideshow",g=d.galleryProps,h=this.mediaOverride.getGalleryByName(f,940,e,d.mediaItems,g);if(h){var i={top:0,width:this.applicationParameters.desktopPageWidth,left:0,height:e},j=this.componentAttributesBuilder.createGalleryAttributes(h,i,d.mediaItems);_.each(this.galleryBgPropertiesOverrides[h.name],function(a,b){j.properties[b]=a});var k=this.key.lg(b,"galleryBackGround");return this.build(j,{from:{lgs:a,galleryName:f},key:k})}}},b.prototype.forMenuStrip=function(a){var b=a.getLgData();if(!b.menuStrip||!b.menuStrip.enable)return null;var c=a.segments[0].getLENoError();if(!c)return null;var d=_.find(c.layout,function(a){return"menu"===a.type||"copyrightMSG"===a.subType});if(!d)return null;var e=a.isMobile()&&a.isSiteHeader()?c.menuStripBottom-c.menuStripTop:b.menuStrip.paddingTop+d.height+b.menuStrip.paddingBottom,f=a.isMobile()&&a.isSiteHeader()?c.menuStripTop:0+d.top-b.menuStrip.paddingTop;if(0>=e)return null;var g=renderer.StripRenderer.createCompLayoutForStrip(f,e),h={style:{strip:b.menuStrip.style}},i=this.componentAttributesBuilder.createAttributes(g,b.menuStrip,h,c,!1,!1);i.properties=i.properties||{},i.properties.zIndex=0;var j=this.key.lg(a,"menuStrip");return this.build(i,{from:{le:c,menu:d},key:j})},b.prototype.forAnchor=function(a){var b=this.modelAttributes.getLgNode(a),c={componentType:this.componentClasses.anchor.comp,data:{name:this.modelTree.getAnchorName(b),type:"Anchor"},layout:{height:21,width:1918,x:-469,y:0},skin:this.componentClasses.anchor.skin,style:"Anchor_1",type:"Component"},d=this.modelTree.getAnchorDataId(b);return{compDef:c,from:{anchorNodeId:a.findIdentifyingNodeId()},extraDef:{compId:d},key:"anchor-"+d}},b.prototype.forLayout=function(a,b,c){var d=this.modelAttributes.layout(a,b);c&&c.offset&&(d.layout.y+=c.offset.y,d.layout.x+=c.offset.x),this.modelAccessibility.updateLayout(a,b,d);var e=this.modelStyles.forLayout(a,b,d),f=this.key.layout(a,b),g={styleDef:e,from:{layout:b.originalLayout||b,le:a},key:f};return d.dataObj&&d.dataObj.items&&(g.from.numberOfItems=d.dataObj.items.length),this.build(d,g,b.componentProperties)},b.prototype.forTpaLayout=function(a,b,c){var d=this.key.layout(a,b),e={compDef:{layout:{y:b.top+c.offset.y,x:b.left+c.offset.x,width:b.width,height:b.height}},from:{layout:b,le:a,tpa:b},key:d},f=this.modelStyles.forTpaLayout(a);return f&&(e.styleDef={styleId:f}),e},b.prototype.getLgFromExtra=function(a){return a.from.lg||a.from.lgs&&a.from.lgs[0]||a.from.le&&a.from.le.containingLG&&a.from.le.containingLG},b.prototype.build=function(a,b,c){void 0===b&&(b={});var d,e=this.getLgFromExtra(b);return this.flags.mobileEditor&&e?(d=this.componentBuilderProvider.getSpecificBuilder(e.isMobile&&e.isMobile()),b.from.lgs&&d.getUnwantedComponents&&(b.hideableComps=d.getUnwantedComponents(b.from.lgs))):d=this.componentBuilderProvider.getSpecificBuilder(),d.toDefinition(a,c,b).then(function(a){var c=a.compDef,d=a.zIndex;return angular.extend({compDef:c,extraDef:{zIndex:d}},b)})},b}();a.ModelDefinitions=b,angular.module("siteGeneratorStaticsCoreAppInternal").service("modelDefinitions",b)}(core||(core={}));var core;!function(a){var b=function(a){return a&&a.isListItem&&!a.isListHeader()&&!a.isListFooter()},c={title:"h2","title-list":"h3","title-first":"h1",subTitle:"h3","subTitle-list":"h4",_key:function(a,d,e){var f=d.subType;return c[f+"-list"]&&b(a.containingSegment.node)?f+="-list":c[f+"-first"]&&e&&(f+="-first"),f}},d=function(){function a(a,b,c){this.flags=a,this.richTextService=b,this.modelLookup=c}return a.$inject=["flags","richTextService","modelLookup"],a.prototype.updateLayout=function(a,b,d,e){if(this.flags.accessibilityHTags){var f=c._key(a,b,e),g=c[f],h=d.data||d.dataObj;h&&g&&(h.text=this.richTextService.setAccessibilityHTag(h.text,g))}},a.prototype.updatePart=function(a,b){var c=this,d=_.first(b);"body"===a&&d&&this.modelLookup.flatten(d).filter(function(a){return a.from.layout}).forEach(function(a){return c.updateLayout(a.from.le,a.from.layout,a.compDef,!0)})},a}();a.ModelAccessibility=d,angular.module("siteGeneratorStaticsCoreAppInternal").service("modelAccessibility",d)}(core||(core={}));var core;!function(a){var b=function(){function a(a,b,c,d,e,f,g,h,i){this.mediaGallery=a,this.modelTree=b,this.flags=c,this.animationKit=d,this.backgroundScrollService=e,this.componentAttributesBuilder=f,this.componentClasses=g,this.applicationParameters=h,this.backgroundMediaOpacity=i}return a.$inject=["mediaGallery","modelTree","flags","animationKit","backgroundScrollService","componentAttributesBuilder","componentClasses","applicationParameters","backgroundMediaOpacity"],a.prototype.decorativeStrip=function(a){var b=a[0],c=b.getLgData(),d=c.strip;if(this.flags.sectionBackground&&("video"===d.mediaType||"bgImage"===d.mediaType||"pattern"===d.mediaType)){var e=d.mediaType;d=ob.deepClone(d),this.mediaGallery.setBgObj(d.mediaItems[0],d),"pattern"===d.mediaType?d.scrollType="none":(d.scrollType=this.backgroundScrollService.getActiveScrollType(this.getLgNode(b)),d.mediaRef.opacity=this.backgroundMediaOpacity.getBackgroundOpacity(b,d.color,e,d.mediaItems));
}var f={dataInSkin:!1,type:"stripContainer",componentClass:this.componentClasses.stripContainer.comp,skin:"wysiwyg.viewer.skins.stripContainer.DefaultStripContainer",layout:{x:0,y:0,width:a[0].isMobile()?this.applicationParameters.mobilePageWidth:this.applicationParameters.desktopPageWidth,height:a[0].targetHeight},styleId:"strc1",properties:{zIndex:0},dataObj:{type:"StripContainer",background:{color:d&&d.color||"",scrollType:"scroll",colorOpacity:1,colorOverlay:"",type:"BackgroundMedia",mediaRef:d.mediaRef,colorOverlayOpacity:0,fittingType:d&&d.fittingType||"fill",alignType:d&&d.alignType||"center"}}};if(d.scrollType){var g=this.backgroundScrollService.getBehaviors(d.scrollType);g&&this.componentAttributesBuilder.addBehaviors(f,g)}return f},a.prototype.lg=function(a,b){return void 0===b&&(b=a.targetHeight),{dataInSkin:!1,type:"stripContainer",componentClass:this.componentClasses.stripContainer.comp,layout:{x:0,y:0,width:a.isMobile()?this.applicationParameters.mobilePageWidth:this.applicationParameters.desktopPageWidth,height:b},styleId:"strc1",dataObj:{type:"StripContainer",background:{color:"",scrollType:"scroll",colorOpacity:0,colorOverlay:"",type:"BackgroundMedia",colorOverlayOpacity:0,fittingType:"fill",alignType:"center"}}}},a.prototype.layout=function(a,b){var c,d=this.isLayoutStripContainer(a,b),e=this.layoutData(a,b);c=d?renderer.StripRenderer.createCompLayoutForStrip(b.top,b.height,b.mediaIndex,b.argIndex):b;var f=this.animationKit.getAnimationsForLayouts([b],a),g=f&&f[0],h=this.componentAttributesBuilder.createAttributes(c,e,a.overrides,a,!0,g);return a.isMediaLayout(b)&&(h.properties=h.properties||{},h.properties.zIndex=0),h},a.prototype.getLgNode=function(a){var b,c=a.segments[0],d=this.modelTree.findIdentifyingNode(c.node);return b=d&&c.node!==d?d:c.node},a.prototype.isLayoutStripContainer=function(a,b){var c=a.overrides.media&&a.overrides.media[b.argIndex];return c&&"stripContainer"===c.type},a.prototype.layoutData=function(a,b){var c=a.getArgValue(b.argIndex),d=a.overrides.media&&a.overrides.media[b.argIndex];return d&&"stripContainer"===d.type?c=this.layoutStripContainerData(a,d,c):"media"===b.type&&"image"===b.subType?c=this.layoutImageData(a,b,c):"button"===b.type&&b.clientRectWidth&&(c=this.layoutButtonData(b,c)),c},a.prototype.layoutButtonData=function(a,b){var c=angular.copy(b),d=(a.clientRectWidth-a.validationWidth)/a.clientRectWidth,e=Math.floor(.8*(1-d)*c.callToAction.length);return c.callToAction=c.callToAction.substr(0,e)+"...",c},a.prototype.layoutImageData=function(a,b,c){var d=c,e=a.containingSegment.node,f=b.argIndex,g=e&&e.hasCrops(f);return g&&(d=angular.copy(c),_.forEach(d,function(a){var c=e.getCropOfImage(f,a.relativeUri,b);c&&(a.crop=c)})),d},a.prototype.layoutStripContainerData=function(a,b,c){var d,e=this.backgroundScrollService.getStripScrollType(a),f=renderer.StripRenderer.getBackgroundData(b,e);if("Strip Video"===b.name){var g=_.find(c,function(a){return"video"===a.mediaType});d=renderer.StripRenderer.normalizeWixVideoItem(g)}else d=c[0];return this.mediaGallery.setBgObj(d,f)},a}();a.ModelAttributes=b,angular.module("siteGeneratorStaticsCoreAppInternal").service("modelAttributes",b)}(core||(core={}));var core;!function(a){var b=function(){function a(a,b,c){this.flags=a,this.componentStyles=b,this.designKit=c}return a.$inject=["flags","componentStyles","designKit"],a.prototype.forTpaLayout=function(a){return this.flags.designKit&&!a.containingSegment.isMobile?this.designKit.getCartColoredStyle(a):void 0},a.prototype.forLayout=function(a,b,c){if(this.flags.designKit&&!a.containingSegment.isMobile){var d=("image"!==c.subType&&c.subType||c.type)+this.componentStyles.getDecorationUniqueID(b),e=void 0;return"decorative"===b.containerRole?e=this.designKit.getBoxColoredStyleDefinition(c.styleId,a,d):"button"===b.subType?e=this.designKit.getButtonColoredStyleDefinition(c.styleId,a):"line"===b.type?e=this.designKit.getLineColoredStyleDefinition(c.styleId,a,d,b):"image"===c.subType||"gallery"===c.type?e=this.designKit.getImageColoredStyleDefinition(c.styleId,a,b,a.overrides):"menu"===b.type?e=this.designKit.getMenuColoredStyleDefinition(c.styleId,a):"form"===b.subType&&(e=this.designKit.getFormColoredStyleDefinition(c.styleId,a)),e&&(e.styleType="custom"),e}},a}();a.ModelStyles=b,angular.module("siteGeneratorStaticsCoreAppInternal").service("modelStyles",b)}(core||(core={}));var core;!function(a){var b=function(){function a(a,b,c,d,e,f){this.backgroundScrollService=a,this.componentAttributesBuilder=b,this.componentClasses=c,this.applicationParameters=d,this.SkinValidator=e,this.columnService=f}return a.$inject=["backgroundScrollService","componentAttributesBuilder","componentClasses","applicationParameters","SkinValidator","columnService"],a.prototype.columnsContainer=function(a,b){void 0===b&&(b=a.targetHeight);var c={type:"stripColumnsContainer",componentClass:this.componentClasses.stripColumnsContainer.comp,layout:{x:0,y:0,width:a.isMobile()?this.applicationParameters.mobilePageWidth:this.applicationParameters.desktopPageWidth,height:b},styleId:"strc1",properties:null,behaviors:'[{"action":"bgScrub","name":"BackgroundParallax","duration":1,"delay":0}]',design:null,skin:this.SkinValidator.skinForComponent(this.componentClasses.stripColumnsContainer.comp)};return a.columns&&(c.properties=this.columnService.getColumnsContainerProps(a.columns)),c},a.prototype.column=function(a,b,c){void 0===b&&(b={}),void 0===c&&(c=a.targetHeight);var d=b.width||12,e=b.extraProps||{},f=this.backgroundScrollService.getColumnsScrollType(a,a.columns),g=this.columnService.createColumnBackground(b),h=b.hasText,i={type:"Container",layout:{width:d,height:c,x:0,y:0},componentType:this.componentClasses.column.comp,componentClass:this.componentClasses.column.comp,properties:e,style:"strc1",design:this.componentAttributesBuilder.buildDesign(g,h),skin:this.SkinValidator.skinForComponent(this.componentClasses.column.comp)};return f&&this.componentAttributesBuilder.addBehaviors(i,this.backgroundScrollService.getBehaviors(f)),i},a}();a.ColumnAttributes=b,angular.module("siteGeneratorStaticsCoreAppInternal").service("columnAttributes",b)}(core||(core={}));var core;!function(a){var b=function(){function a(a,b){this.componentClasses=a,this.applicationParameters=b}return a.$inject=["componentClasses","applicationParameters"],a.prototype.slideShowContainer=function(a){var b={componentType:this.componentClasses.stripContainerSlideShow.comp,layout:{x:0,y:0,width:this.applicationParameters.desktopPageWidth,height:a,fixedPosition:!1,rotationInDegrees:0,scale:1},properties:{autoPlay:!0,autoPlayInterval:3,pauseAutoPlayOnMouseOver:!0,transition:"SlideHorizontal",transDuration:1,direction:"RTL",shouldHideOverflowContent:!0,showNavigationButton:!0,navigationButtonSize:20,navigationButtonMargin:100,showNavigationDots:!0,navigationDotsGap:12,navigationDotsSize:6,navigationDotsMargin:40,navigationDotsAlignment:"center",flexibleBoxHeight:!1,type:"StripContainerSlideShowProperties"},skin:this.componentClasses.stripContainerSlideShow.skin,componentClass:this.componentClasses.stripContainerSlideShow.comp,type:"Container"};return b},a.prototype.slideShow=function(a){var b=980,c={componentType:this.componentClasses.stripContainerSlideShowSlide.comp,dataObj:{type:"StripContainerSlideShowSlide"},design:{type:"MediaContainerDesignData",background:{type:"BackgroundMedia",color:"{color_11}",colorOpacity:1,alignType:"center",fittingType:"fill",scrollType:"none",colorOverlay:"#8B143C",colorOverlayOpacity:0}},layout:{width:b,height:a,fixedPosition:!1,rotationInDegrees:0,scale:1,x:0,y:0},skin:this.componentClasses.stripContainerSlideShowSlide.skin,componentClass:this.componentClasses.stripContainerSlideShowSlide.comp,type:"Container"};return c},a}();a.SlideShowAttributes=b,angular.module("siteGeneratorStaticsCoreAppInternal").service("slideShowAttributes",b)}(core||(core={}));var core;!function(a){var b=function(){function a(a,b,c,d,e,f,g,h){this.documentServicesMediator=a,this.modelRenderDS=b,this.pagesManager=c,this.modelLookup=d,this.tpaService=e,this.mergedHeaderService=f,this.modelRenderOnce=g,this.modelRenderNode=h,this.isStripTpa=function(a){return a.from.lgs&&SolutionManager.isTpaNode(a.from.lgs[0])}}return a.$inject=["documentServicesMediator","modelRenderDS","pagesManager","modelLookup","tpaService","mergedHeaderService","modelRenderOnce","modelRenderNode"],a.prototype.partContainer=function(a,b){if("body"===a){var c=this.pagesManager.getPageIdByName(b);return this.documentServicesMediator.getDesktopPartContainer(a,c)}return this.documentServicesMediator.getDesktopPartContainer(a)},a.prototype.renderPart=function(a,b,c,d,e){this.mergedHeaderService.shouldMergeHeader(c)&&this.mergedHeaderService.moveHeaderAndStylePage(b),this.modelRenderOnce.perform(a,e),this.renderStrips(c.children,d,e),this.tpaService.isCurrentPageIsBlogSinglePost(e)||this.modelRenderDS.components.clearDeleted(c,e),this.modelRenderDS.updatePartContainer(e,c)},a.prototype.renderStrips=function(a,b,c){var d=this;a.forEach(function(a){var e=b&&d.modelLookup.findForUpdate(a,b.children);d.modelRenderNode.update(a,e,c)})},a.prototype.renderAnimate=function(a,b,c,d,e,f){var g=this,h=c.filter(function(a){return g.isStripTpa(a)});this.renderStrips(h,b,e);var i=c.filter(function(a){return!g.isStripTpa(a)}),j=d.filter(function(a){return!g.isStripTpa(a)});return i.forEach(function(a){return g.modelRenderNode.create(a,e)}),this.modelRenderDS.animations.hide(i),this.documentServicesMediator.siteChanges.flush(!0).then(function(){return g.modelRenderDS.animations.transitionInOut(i,j,f)}).then(function(){g.modelRenderDS.animations.show(i),g.renderStrips(_.difference(a.children,i),b,e),g.tpaService.isCurrentPageIsBlogSinglePost(e)||g.modelRenderDS.components.clearDeleted(a,e),g.modelRenderDS.updatePartContainer(e,a)})},a}();a.ModelRender=b,angular.module("siteGeneratorStaticsCoreAppInternal").service("modelRender",b)}(core||(core={}));var core;!function(a){var b=function(){function b(a,b,c,d,e,f){this.documentServicesMediator=a,this.tpaService=b,this.modelRenderDS=c,this.modelLookup=d,this.modelRenderTpa=e,this.modelRenderDiffs=f}return b.$inject=["documentServicesMediator","tpaService","modelRenderDS","modelLookup","modelRenderTpa","modelRenderDiffs"],b.prototype.create=function(b,c){var d=this;b.from.tpaSection||(b.from.tpaWidget?this.modelRenderTpa.createWidget(c,b):(b.styleDef&&(b.compDef.style=this.documentServicesMediator.createCustomStyle(b.styleDef)),b.from.slideShow?(this.modelRenderDS.components.createTree(b,c),this.documentServicesMediator.siteChanges.register(function(){return d.modelRenderDS.components.resolveRefs(b)})):(a.DROP_DOWN_MENU===b.compDef.componentType?this.documentServicesMediator.siteChanges.register(function(){return d.modelRenderDS.components.create(c,b)}):this.modelRenderDS.components.create(c,b),b.children.forEach(function(a){return d.create(a,b.compRef)}))))},b.prototype.update=function(a,b,c){var d=this;if(a.compRef=this.recoverNodeRef(b,a),a.compRef){a.from.tpaWidget&&this.modelRenderDS.reparent(c,a);var e=this.modelRenderDiffs.diff(a,b);this.modelRenderDS.components.update(a,e),a.children.forEach(function(c){var e=b?d.modelLookup.findForUpdate(c,b.children):null;d.update(c,e,a.compRef)}),this.modelRenderDS.components.clearDeleted(a);var f=b&&a.compDef.layout.height<b.compDef.layout.height;a.children[0]&&f&&this.modelRenderDS.components.shrinkAfterUpdate(a)}else this.create(a,c)},b.prototype.recoverNodeRef=function(a,b){var c=a&&a.compRef,d=this.documentServicesMediator.getDesktopComponentRef(b.extraDef.compId),e=b.compRef||c||d;return this.documentServicesMediator.doesComponentExistByRef(e)?e:null},b}();a.ModelRenderNode=b,angular.module("siteGeneratorStaticsCoreAppInternal").service("modelRenderNode",b)}(core||(core={}));var core;!function(a){var b=function(){function b(a,b,c){this.modelLogs=a,this.documentServicesMediator=b,this.modelRenderDS=c,this.first=!1}return b.$inject=["modelLogs","documentServicesMediator","modelRenderDS"],b.prototype.perform=function(a,b){var c=this;this.onceForAll(function(){c.setInvisibleContainerStyle()})},b.prototype.onceForAll=function(a){this.first||(this.first=!0,a())},b.prototype.setInvisibleContainerStyle=function(){var b={componentClassName:"",pageId:"",compId:"",metaData:{isPreset:!1,isHidden:!1,schemaVersion:"1.0"},style:{properties:{"alpha-bg":"0","alpha-brd":"0",bg:"color_11","boxShadowToggleOn-shd":"false",brd:"color_15",brw:"0px",rd:"0px"}},type:"TopLevelStyle",id:a.invisibleContainerStyleId,skin:"wysiwyg.viewer.skins.area.RectangleArea"},c=this.documentServicesMediator.getStyleDefinition(a.invisibleContainerStyleId);_.isEqual(b,c)||(this.documentServicesMediator.updateStyleByStyleIdAndData(a.invisibleContainerStyleId,b),this.modelLogs.trace("setInvisibleContainerStyle"))},b}();a.ModelRenderOnce=b,angular.module("siteGeneratorStaticsCoreAppInternal").service("modelRenderOnce",b)}(core||(core={}));var core;!function(a){var b=function(){function b(a,b,c){var d=this;this.documentServicesMediator=a,this.modelLogs=b,this.tpaService=c,this.animations={hide:function(a){return a.forEach(function(a){return d.documentServicesMediator.updateProps(a.compRef,{isHidden:!0})})},show:function(a){return a.forEach(function(a){return d.documentServicesMediator.updateProps(a.compRef,{isHidden:!1})})},transitionInOut:function(a,b,c){var e=a.map(function(a){return a.compRef}),f=b.map(function(a){return a.compRef});return d.documentServicesMediator.transitionInOut(e,f,c)}},this.components={isExist:function(a){return a&&d.documentServicesMediator.doesComponentExistByRef(a)},createTree:function(a,b){var c=d.createSantaDef(a);a.compRef=d.documentServicesMediator.addComponent(b,c),d.modelLogs.trace("components.createTree",a.key,a.from,a.compRef,b,a)},resolveRefs:function(a,b){void 0===b&&(b=a.compRef);var c=d.documentServicesMediator.serializeComponent(b);d.resolveRefsDeep(a,c),d.modelLogs.trace("components.resolveRefs",a.key,a.from,a,b)},create:function(a,b){b.compRef=d.documentServicesMediator.addComponent(a,b.compDef,b.extraDef),d.modelLogs.trace("components.create",b.key,b.from,b.compRef,a,b.compDef,b.extraDef)},remove:function(a){d.documentServicesMediator.removeComponent(a.compRef),d.modelLogs.trace("components.remove",a.key,a.from,a.compRef)},group:function(a){d.documentServicesMediator.groupComponents(a.map(function(a){return a.compRef})),d.modelLogs.trace("components.group",a)},update:function(a,b){Object.keys(b)[0]&&(d.documentServicesMediator.updateComponent(a.compRef,b),d.modelLogs.trace("components.update",a.key,a.from,a.compRef,b))},clearDeleted:function(a,b){if(void 0===b&&(b=a.compRef),!a.from||!a.from.tpaSection){var c=a.children.map(function(a){return a.compRef}),e=d.documentServicesMediator.getChildren(b).filter(function(a){return a.id.indexOf("TPA")<0}),f=e.filter(function(a){return!_.some(c,a)});f[0]&&(f.forEach(function(a){return d.documentServicesMediator.removeComponent(a)}),d.modelLogs.trace("components.clearDeleted",a.key,a.from,b,f))}},shrinkAfterUpdate:function(a){var b=a.compDef.layout.height;d.documentServicesMediator.updateLayout(a.compRef,{height:b}),d.modelLogs.trace("components.shrinkAfterUpdate",a,a.compRef,{height:b}),a.children.forEach(function(a){var b=a.compDef.layout.y;d.documentServicesMediator.updateLayout(a.compRef,{y:b}),d.modelLogs.trace("components.shrinkAfterUpdate",a,a.compRef,{y:b})})}},this.tpa={section:{fixBlogFeedContainer:function(a,b){var c=d.documentServicesMediator.getLayout(a.compRef);c.height>b&&(d.documentServicesMediator.updateLayout(a.compRef,{height:b}),d.modelLogs.trace("tpa.section.fixBlogFeedContainer",a.key,a.compRef,{height:b}))},updateLayout:function(a,b){var c={y:b.y};"MOBILE"===a.compRef.type&&(c.x=10,c.width=300),d.documentServicesMediator.updateLayout(a.compRef,c),d.modelLogs.trace("tpa.section.updateLayout",a.key,a.compRef,c)}},widget:{add:function(a,b,c,e){d.tpaService.addTpaWidget(a,b,c.compDef.layout,null,e),c.compRef=e.widgetRef,d.modelLogs.trace("tpa.widget.add",c.key,a,b,c.compDef.layout,null,e)},updateLayout:function(a){var b=a.compDef.layout,c=_.get(a,"from.tpaWidget.segments[0].node.dockToWidget.fullWidth");c&&(delete b.x,delete b.width),d.documentServicesMediator.updateLayout(a.compRef,b),d.modelLogs.trace("tpa.widget.updateLayout",a.key,a.compRef,b)}}}}return b.$inject=["documentServicesMediator","modelLogs","tpaService"],b.prototype.reparent=function(a,b){var c=this.documentServicesMediator.getContainer(b.compRef);c.id!==a.id&&(this.documentServicesMediator.setContainer(b.compRef,a),this.modelLogs.trace("reparent",b.key,b.compRef,a))},b.prototype.updatePartContainer=function(a,b){var c=this.documentServicesMediator.getLayout(a),d=b.height;c&&d===c.height||(this.documentServicesMediator.updateLayout(a,{height:d}),this.modelLogs.trace("updatePartContainer",a,{height:d}))},b.prototype.resolveRefsDeep=function(b,c,d){var e=this;void 0===d&&(d=b.compRef);var f=this.documentServicesMediator.getChildren(d),g=c.components;b.children.forEach(function(b){var c=_.findIndex(g,function(c){return a.ModelUtils.isSameComponent(c,b.compDef)});c>=0&&(b.compRef=f.splice(c,1)[0],e.resolveRefsDeep(b,g.splice(c,1)[0]),b.compDef.components=[])})},b.prototype.createSantaDef=function(a){var b=this;a.styleDef&&(a.compDef.style=this.documentServicesMediator.createCustomStyle(a.styleDef));var c=a.children.map(function(a){return b.createSantaDef(a)});return _.extend({},a.compDef,{components:c})},b}();a.ModelRenderDS=b,angular.module("siteGeneratorStaticsCoreAppInternal").service("modelRenderDS",b)}(core||(core={}));var core;!function(a){var b=function(){function a(a){this.componentClasses=a}return a.$inject=["componentClasses"],a.prototype.diff=function(a,b){var c=this.changable(a),d=b?this.changable(b):{},e=Object.keys(c).filter(function(a){return c[a]&&!_.isEqual(c[a],d[a])});return _.pick(c,e)},a.prototype.changable=function(a){var b=a.compDef,c=b.layout,d=b.data,e=b.props,f=b.design,g=b.behaviors;return a.compDef.componentType===this.componentClasses.column.comp?c=_.omit(c,["width","x"]):a.from.tpaSection&&(c=_.pick(c,["y"])),{layout:c,data:d,props:e,design:f,behaviors:g,styleDef:a.styleDef}},a}();a.ModelRenderDiffs=b,angular.module("siteGeneratorStaticsCoreAppInternal").service("modelRenderDiffs",b)}(core||(core={}));var core;!function(a){var b=function(){function a(a,b,c){this.modelRenderDS=a,this.componentClasses=b,this.documentServicesMediator=c}return a.$inject=["modelRenderDS","componentClasses","documentServicesMediator"],a.prototype.createWidget=function(a,b){var c=b.from.tpaWidget.segments[0],d=c.contentElement.type;this.modelRenderDS.tpa.widget.add(d,a,b,c.node)},a.prototype.renderMobileOldBlog=function(a){var b,c,d=a.compRef;this.documentServicesMediator.checkIfComponentType(d).is(this.componentClasses.stripColumnsContainer.comp)?(c=this.documentServicesMediator.getChildren(d)[0],b=this.documentServicesMediator.getChildren(c)):b=this.documentServicesMediator.getChildren(d);var e=this.getMobileOldBlogCompsOrdered(b);this.updateLayoutOfMobileOldBlog(e,c)},a.prototype.findOldBlogCompsIndex=function(a,b,c,d,e){var f,g=b[_.findIndex(a,{viewName:d})];return e&&g&&(f=b[_.findIndex(a,function(a){return a&&a.text&&-1!==a.text.indexOf(e)})]),[f,c,g]},a.prototype.findLines=function(a){var b=this;return _.filter(a,function(a){return b.documentServicesMediator.checkIfComponentType(a).is(b.componentClasses.line.comp)})},a.prototype.getMobileOldBlogCompsOrdered=function(a){var b=_.map(a,documentServices.components.data.get),c=this.findLines(a),d=this.findOldBlogCompsIndex(b,a,void 0,"MediaTopPage"),e=this.findOldBlogCompsIndex(b,a,c.pop(),"PostsListMediaLeft","Recent Posts"),f=this.findOldBlogCompsIndex(b,a,c.pop(),"ArchiveList","Archive"),g=this.findOldBlogCompsIndex(b,a,c.pop(),"TagCloud","Tags");return _.filter(d.concat(e,f,g))},a.prototype.updateLayoutOfMobileOldBlog=function(a,b){var c=this,d=5,e=d;_.each(a,function(a){var b=c.documentServicesMediator.getLayout(a),f={x:10,y:e,width:300};e+=b.height+d,c.documentServicesMediator.updateLayout(a,f)}),b&&this.documentServicesMediator.updateLayout(b,{height:e})},a}();a.ModelRenderTpa=b,angular.module("siteGeneratorStaticsCoreAppInternal").service("modelRenderTpa",b)}(core||(core={}));var core;!function(a){var b=function(){function a(a,b,c,d){var e=this;this.modelRenderDS=a,this.mediaOverride=b,this.modelTree=c,this.modelLookup=d,this.adjustNode=function(a){var b=a.children.filter(e.shouldGroup),c=_.groupBy(b,function(a){return a.from.le.containingSegment.getTypeForLSS()});Object.keys(c).forEach(function(a){return e.modelRenderDS.components.group(c[a])}),a.children.forEach(e.adjustNode)},this.shouldGroup=function(a){var b=a.from.layout;if(!b)return!1;var c=a.from.le,d=c.isMediaLayout(b);return!d||!e.mediaOverride.isStripType(c,b)}}return a.$inject=["modelRenderDS","mediaOverride","modelTree","modelLookup"],a.prototype.adjust=function(a,b){this.removeUnusedAnchors(a,b),this.applyGrouping(b)},a.prototype.removeUnusedAnchors=function(a,b){var c=this,d=_.chain(a.children).filter("anchor").map(function(a){return c.modelTree.getAnchorDataId(a)}).value(),e=b.children.filter(function(a){return a.from.anchorNodeId});e.filter(function(a){return d.indexOf(a.extraDef.compId)<0}).forEach(function(a){return c.modelRenderDS.components.remove(a)})},a.prototype.applyGrouping=function(a){var b=this.modelLookup.flatten(a,function(a){return a.from.lgs||a.from.lg}).filter(function(a){return a.from.lg});b.forEach(this.adjustNode)},a}();a.ModelRenderGoToEditor=b,angular.module("siteGeneratorStaticsCoreAppInternal").service("modelRenderGoToEditor",b)}(core||(core={}));var core;!function(a){var b=function(){function a(a,b,c,d,e,f,g,h){this.documentServicesMediator=a,this.pagesManager=b,this.componentClasses=c,this.modelLogs=d,this.modelRenderTpa=e,this.modelUtils=f,this.mergedHeaderService=g,this.flags=h}return a.$inject=["documentServicesMediator","pagesManager","componentClasses","modelLogs","modelRenderTpa","modelUtils","mergedHeaderService","flags"],a.prototype.partContainer=function(a,b){if("body"===a){var c=this.pagesManager.getPageIdByName(b);return this.documentServicesMediator.getMobilePartContainer(a,c)}return this.documentServicesMediator.getMobilePartContainer(a)},a.prototype.renderPart=function(a,b){this.hideComponents(a,b),this.renderStrips(a.children,b),this.updatePartContainer(a,b)},a.prototype.renderStrips=function(a,b){var c=this;a.forEach(function(a){c.updateNode(a,b),a.from.lg&&"Blog"===a.from.lg.contentType&&c.modelRenderTpa.renderMobileOldBlog(a)})},a.prototype.updateNode=function(a,b){var c=this;if(a.compRef){this.documentServicesMediator.showMobileComponent(a.compRef),"TINY_MENU"===a.compRef.id||a.from.tpaWidget||a.from.tpaSection||a.from.lgs&&SolutionManager.isTpaNode(a.from.lgs[0])||(a.compDef.componentType!==this.componentClasses.column.comp&&this.documentServicesMediator.setContainer(a.compRef,b),this.changeComponentPosition(a));var d=this.updatedParams(a);d.props&&this.forkProps(a),this.documentServicesMediator.updateComponent(a.compRef,d),this.modelLogs.trace("updateNode",a.from,a.compRef,a.compDef,d,b),this.updateLayoutOfNode(a,"updateNodeLayout"),a.children.forEach(function(b){c.updateNode(b,a.compRef)}),this.pockOverlay(a),this.fitContainer(a),a.compDef.componentType!==this.componentClasses.column.comp&&(this.documentServicesMediator.updateComponent(a.compRef,d),this.modelLogs.trace("updateNode2",a.from,a.compRef,a.compDef,d,b),this.updateLayoutOfNode(a,"updateNodeLayout2"))}else console.log("ERROR - updateMobileNode without compRef")},a.prototype.updatedParams=function(a){var b={},c=a.compDef,d=c.data,e=c.props,f=c.design;return b.data=d,b.props=e,b.design=f,b.styleDef=a.styleDef,b},a.prototype.changeComponentPosition=function(a){a.compDef.componentType===this.componentClasses.column.comp&&void 0!==a.columnPositionIndex&&this.documentServicesMediator.moveToIndex(a.compRef,a.columnPositionIndex)},a.prototype.updateLayoutOfNode=function(a,b){var c=a.compDef.layout;a.compDef.componentType===this.componentClasses.column.comp&&(c=_.omit(c,["width","x","y"]));var d=_.pick(c,["height","width"]),e=_.pick(c,["x","y"]);_.isEmpty(d)||this.documentServicesMediator.updateLayout(a.compRef,d),_.isEmpty(e)||this.documentServicesMediator.updateLayout(a.compRef,e),_.isEmpty(c)||this.documentServicesMediator.updateLayout(a.compRef,c),this.modelLogs.trace(b,a.compRef.id+" x: "+c.x+", y: "+c.y+", h: "+c.height+", w: "+c.width)},a.prototype.fitContainer=function(a){var b=this,c=this.documentServicesMediator.getDesktopComponent(a.compRef);"TINY_MENU"!==a.compRef.id&&this.documentServicesMediator.isComponentContainer(c)&&(this.updateLayoutOfNode(a,"fitContainerSize"),a.children.forEach(function(a){b.updateLayoutOfNode(a,"fitContainerChildrenPosition")}))},a.prototype.hideComponents=function(a,b){var c=this;a.hideableComps&&_.each(a.hideableComps,function(a){var d=c.documentServicesMediator.getChildren(a);_.each(d,function(a){c.documentServicesMediator.setContainer(a,b)}),c.documentServicesMediator.hideMobileComponent(a)}),a.children&&_.each(a.children,function(a){return c.hideComponents(a,b)})},a.prototype.forkProps=function(a){!a.from.le||a.from.tpaWidget||a.from.tpaSection||a.compDef.componentType===this.componentClasses.stripContainer.comp||this.documentServicesMediator.isMobilePropsForked(a.compRef)||this.documentServicesMediator.forkMobileProps(a.compRef)},a.prototype.pockOverlay=function(a){a.from.lg&&a.from.lg.segments.forEach(function(a){return a.updateRenderTime()})},a.prototype.updatePartContainer=function(a,b){var c=this.modelUtils.getHeight(a);c&&("mobile.core.components.Page"===this.documentServicesMediator.getComponentType(b)&&(b=this.documentServicesMediator.getMobilePagesContainer()),this.modelLogs.trace("updatePartContainer",b,c),this.documentServicesMediator.updateLayout(b,{height:c}))},a}();a.MobileModelRender=b,angular.module("siteGeneratorStaticsCoreAppInternal").service("mobileModelRender",b)}(core||(core={}));var PagesManager=function(){function a(a,b,c,d,e,f,g,h,i,j,k){var l=this;this.$p=a,this.modelTree=b,this.tpaService=c,this.storyServices=d,this.setTpaContentService=e,this.menuService=f,this.flags=g,this.designKit=h,this.previewService=i,this.layoutSelectionStoreProvider=j,this.documentServicesMediator=k,this.BgObjDefaults={type:"BackgroundMedia",positionx:"center",width:1980,height:1200,positiony:"center",repeatx:"repeat",repeaty:"repeat",attachment:"fixed",color:"{color_11}",metaData:{isPreset:!1,schemaVersion:"1.1"},isRef:!0},this.getTpaExtraPages=function(a){return _(l.modelTree.getPagesNodes()).filter(function(b){return b.tpaExtraPage&&0===b.tpaExtraPage.indexOf(a)}).value()},this.ensurePages=function(){return l.tpaService.ensureCanEnsurePages().then(function(){return _(l.modelTree.getPagesNodes()).reduce(function(a,b){return a.then(function(){return l.getOrCreatePage(b)})},l.$p.when())}).then(function(){var a=l.currentStoryPages[l.modelTree.homePageId];return a&&a!==l.documentServicesMediator.getHomePage()?l.goToPageIfNeeded(l.modelTree.homePageId).then(function(){return l.documentServicesMediator.setHomePage(a),l.previewService.waitForChanges()}):void 0}).then(function(){var a=l.documentServicesMediator.getCurrentPageId();return _.contains(l.currentStoryPages,a)?void 0:l.goToPageIfNeeded(l.modelTree.homePageId)})},this.pageStyleProperties=["p1","p2","p3"],this.headerStyleProperties=["hc1","hc2","hc2"],this.footerStyleProperties=["fc1","fc2","fc3"],this.pagesTransitionNamesMap={none:"None",swipeHorizontalFullScreen:"Horizontal",swipeVerticalFullScreen:"Vertical",crossfade:"Cross Fade",outIn:"Out-In"},this.changeStory=function(){return l.currentStoryPages={},l.ensurePages().then(function(){l.serializeAllTpaWidgetIntoModelTree(),l.removeUnusedPages()}).then(function(){var a=l.modelTree.getGeneralInformation();a&&void 0!==a.pageStyle&&l.changeHeaderStyle(a.pageStyle,!0),l.modelTree.footerNode&&void 0!==l.modelTree.footerNode.pageStyle&&l.changeFooterStyle(l.modelTree.footerNode.pageStyle,!0);var b=l.getPagesTransition(),c=_.invert(l.pagesTransitionNamesMap)[b];l.documentServicesMediator.setPagesTransition(c)})},this.goToSelectedPage=function(){return l.goToPageIfNeeded(l.storyServices.story.selectedPage)},this.goToPage=function(a){return l.goToPageIfNeeded(a)},this.syncPageWithSantaCurrentPage=function(){var a=l.documentServicesMediator.getCurrentPageId(),b=_.findKey(l.currentStoryPages,function(b){return b===a});if(l.storyServices.story.selectedPage!==b){l.storyServices.story.selectedPage=b;var c={pageId:b};l.storyServices.emitChangingPage(c)}},this.isHome=function(a){return a===l.modelTree.homePageId},this.setHomeById=function(a){var b=l.modelTree.getPageNodeById(a);if(b){l.modelTree.setHomePage(b);var c=l.getSantaPageIdByPageNodeId(b.getId());l.documentServicesMediator.setHomePage(c),l.storyServices.emitNodeChanged()}},this.addPage=function(a){var b=l.modelTree.addPageToTree(a);return l.ensurePages().then(function(){return l.menuService.addLinkToPage(b),b})},this.duplicatePage=function(a){var b=l.modelTree.duplicatePage(a);return l.ensurePages().then(function(){return l.menuService.addLinkToPage(b),b})},this.removePage=function(a){return a===l.modelTree.homePageId?l.$p.when():l.goToPageIfNeeded(l.modelTree.homePageId).then(function(){var b=l.currentStoryPages[a];b&&l.documentServicesMediator.removePage(b),delete l.currentStoryPages[a],l.menuService.removeLinkToPage(a)})},this.renamePage=function(a,b){var c=l.modelTree.getPageNodeById(a);c&&(c.setDisplayName(b),c.alias=b,l.updatePageNameAndVisibility(c))},this.updatePageNameAndVisibility=function(a){var b=l.currentStoryPages[a.id];b&&l.updateDocumentPageAndVisibility(b,a.getDisplayName(),!!a.hidePage),l.menuService.updateLinkToPage(a)},this.togglePageVisibility=function(a){a.hidePage=!a.hidePage,l.updatePageNameAndVisibility(a)},this.isHiddenPage=function(a){var b=l.modelTree.getPageNodeById(a);return!(!b||!b.hidePage)},this.isSelectedPage=function(a){return a===l.storyServices.story.selectedPage},this.setPageBackground=function(a,b,c){void 0===c&&(c=!0);var d=_.extend({},l.BgObjDefaults,a);if(b.forEach(function(a){var b=l.modelTree.findPageNodeByName(a.id);b.bgObj=d,l.setBackground(l.currentStoryPages[a.id],b.bgObj)}),c){if(l.flags.consumerMode)return l.storyServices.reRender();l.flags.designKit&&l.storyServices.emitLayoutSolutionChanged()}},this.getNameToPageMap=function(){return _.clone(l.currentStoryPages)},this.getHomePageSantaId=function(){return l.getSantaPageIdByPageNodeId(l.modelTree.homePageId)},this.getPageIdByName=function(a){return l.getSantaPageIdByPageNodeId(a)},this.getSantaPageIdByPageNodeId=function(a){return l.currentStoryPages&&l.currentStoryPages[a]},this.getPageNodeIdBySantaPageId=function(a){return l.currentStoryPages&&_.findKey(l.currentStoryPages,function(b){return a===b})},this.changePageStyle=function(a,b){b=b||l.documentServicesMediator.getCurrentPageId(),l.documentServicesMediator.setPageStyle(b,l.pageStyleProperties[a])},this.changeFooterStyle=function(a,b){l.documentServicesMediator.setFooterStyle(l.footerStyleProperties[a]),b||l.storyServices.emitLayoutSolutionChanged()},this.changeHeaderStyle=function(a,b){l.documentServicesMediator.setHeaderStyle(l.headerStyleProperties[a]),b||l.storyServices.emitLayoutSolutionChanged()},this.getCurrentPageName=function(){var a=l.documentServicesMediator.getCurrentPageId();return _.findKey(l.currentStoryPages,function(b){return b===a})},this.getPagesTransitionNames=function(){return _.values(l.pagesTransitionNamesMap)},this.getPagesTransition=function(){var a=l.layoutSelectionStoreProvider.getLayoutSelectionStore();return l.pagesTransitionNamesMap[a.getPagesTransitionForSite()]||l.getDefaultPagesTransition()},this.setPagesTransition=function(a){var b=_.invert(l.pagesTransitionNamesMap)[a];l.documentServicesMediator.setPagesTransition(b);var c=l.layoutSelectionStoreProvider.getLayoutSelectionStore();return c.setPagesTransitionForSite(b)},this.menuService.assignDocumentPageIdResolver(this.getSantaPageIdByPageNodeId),
this.menuService.setPagesManager(this)}return a.$inject=["$p","modelTree","tpaService","storyServices","setTpaContentService","menuService","flags","designKit","previewService","layoutSelectionStoreProvider","documentServicesMediator"],a.prototype.addAnchorLink=function(a){return a.anchor?a.anchor.links++:a.anchor={links:1},this.getAnchorLinkObj(a)},a.prototype.getAnchorLinkObj=function(a){return{type:"AnchorLink",anchorDataId:"#"+this.modelTree.getAnchorDataId(a),pageId:"#"+this.getSantaPageIdByPageNodeId(a.containerPageId)}},a.prototype.removeAnchorLink=function(a){a.anchor&&(a.anchor.links--,a.anchor.links<=0&&delete a.anchor)},a.prototype.getListOfUnprotectedPages=function(){var a=this,b=_.filter(this.documentServicesMediator.getPageIdList(),function(b){return!a.tpaService.isProGallerySectionPage(b)});return b},a.prototype.updateDocumentPageAndVisibility=function(a,b,c){this.documentServicesMediator.updatePageNameAndVisibility(a,b,c)},a.prototype.matchTpaType=function(a,b){var c=this.documentServicesMediator.getPageData(a);return b?b===c.tpaPageId||b===c.appPageId:"Page"===c.type&&!c.tpaPageId},a.prototype.getOrCreatePage=function(a){var b=this,c=this.$p.defer(),d=a.getId(),e=a.getDisplayName();if(this.currentStoryPages[d])c.resolve(this.currentStoryPages[d]);else{var f,g=this.getListOfUnprotectedPages(),h=this.storyServices.getSavedSite(),i=h&&h.pagesMap,j=this.tpaService.getTpaPageId(a),k=i&&i[a.id];if(k&&this.documentServicesMediator.doesPageExist(k)&&this.matchTpaType(k,j)?f=k:j&&(f=_.find(g,function(a){return!_.contains(b.currentStoryPages,a)&&b.matchTpaType(a,j)})),a.tpaExtraPage&&!f)return this.$p.when();if(f){if(a.tpaSection){var l;l="Blog"!==a.tpaSection?this.tpaService.getSectionRefByPageId(f):this.tpaService.findBlogStripInPage(f),this.tpaService.setComp(a.tpaSection,f,l)}if(this.documentServicesMediator.updatePage(f,{pageUriSEO:""}),this.currentStoryPages[d]=f,this.updateDocumentPageAndVisibility(f,e,!!a.hidePage),a.bgObj)this.setBackground(f,a.bgObj);else if(this.flags.designKit){var m=this.designKit.getDefaultBackgroundColor();this.setBackground(f,{color:m})}this.changePageStyle(a.pageStyle||0,f),c.resolve(this.currentStoryPages[d])}else if(a.tpaSection){var n=_.find(a.children,{contentElementType:a.tpaSection});this.tpaService.addTpa(a.tpaSection,function(d){_(b.getTpaExtraPages(a.tpaSection)).each(function(a,c){var e,f=d[c+1],g=b.tpaService.getTypeByWidgetId(f.widgetId),h=_.find(a.children,{contentElementType:g});if(h.widgetRef=b.tpaService.getCompByTypeAndWidgetId(g,f.widgetId),h.widgetRef)e=b.documentServicesMediator.getPageOfComponent(h.widgetRef).id;else{var i=b.tpaService.getBlogPageIds();e=i[1]}b.currentStoryPages[a.getId()]=e}).value(),i&&(i[a.id]=void 0),b.getOrCreatePage(a).then(function(d){c.resolve(d),b.setTpaContentService.addContentToTpa(a.tpaSection)})},void 0,n)}else this.currentStoryPages[d]=this.documentServicesMediator.addPage(e).id,this.previewService.waitForChanges().then(function(){b.updateDocumentPageAndVisibility(b.currentStoryPages[d],e,!!a.hidePage),a.bgObj&&b.setBackground(b.currentStoryPages[d],a.bgObj),c.resolve(b.currentStoryPages[d])})}return c.promise},a.prototype.getBackgroundObject=function(a){return{pageBackgrounds:{desktop:{isPreset:!1,custom:!0,ref:_.assign(a||this.BgObjDefaults,{isRef:!0})},mobile:{isPreset:!1,custom:!0,ref:_.assign(a||this.BgObjDefaults,{isRef:!0})}}}},a.prototype.convertBGObj=function(a){var b={};return _.each(["fittingType","scrollType","color","alignType"],function(c){a[c]&&(b[c]=a[c])}),b.mediaRef=a.mediaRef,b},a.prototype.setBackground=function(a,b){var c=this.getBackgroundObject(this.convertBGObj(b));this.documentServicesMediator.updatePage(a,c)},a.prototype.goToPageIfNeeded=function(a){if(a&&this.currentStoryPages){var b=this.currentStoryPages[a];if(b&&this.documentServicesMediator.getCurrentPageId()!==b)return this.documentServicesMediator.navigateToPage(b).then(function(){return a})}return this.$p.when()},a.prototype.removeUnusedPages=function(){var a=this,b=this.getListOfUnprotectedPages();_.each(b,function(b){b===a.documentServicesMediator.getHomePage()||_.contains(a.currentStoryPages,b)||a.documentServicesMediator.removePage(b)})},a.prototype.shouldSerializeTpaWidget=function(a){var b=this.currentStoryPages[a.containerPageId],c=this.documentServicesMediator.getPageOfComponent(a.widgetRef).id;return b!==c},a.prototype.serializeAllTpaWidgetIntoModelTree=function(){var a=this;this.modelTree.traverse(function(b,c){b.isTpaWidget&&b.widgetRef&&b.containerPageId&&!b.isTpaMultiSection()&&a.documentServicesMediator.doesComponentExistByRef(b.widgetRef)&&(a.shouldSerializeTpaWidget(b)?(a.tpaService.serializeToReAdd(b),a.documentServicesMediator.removeComponent(b.widgetRef)):a.flags.undoRedoForTpa&&a.tpaService.updateStyle(b))})},a.prototype.getDefaultPagesTransition=function(){return this.pagesTransitionNamesMap.outIn},a.prototype.setDefaultPagesTransition=function(){this.setPagesTransition(this.getDefaultPagesTransition())},a}();angular.module("siteGeneratorStaticsCoreAppInternal").service("pagesManager",PagesManager),angular.module("siteGeneratorStaticsCoreAppInternal").factory("renderer",["$window","flags","$p","obMonitoring","renderSiteChanges","ComponentBuilder","SitePartRenderer","layoutSolver","storyServices","$rootScope","pagesManager","previewService","layoutSelectionStoreProvider","modelTree","mediaOverride","spinnerService","sitePartTypes","documentServicesMediator","rendererSeo","richTextService","applicationParameters","mobileSolutionManager",function(a,b,c,d,e,f,g,h,i,j,k,l,m,n,o,p,q,r,s,t,u,v){function w(){r.updateStyleByStyleIdAndData(core.invisibleContainerStyleId,{componentClassName:"",pageId:"",compId:"",styleType:"system",metaData:{isPreset:!1,isHidden:!1,schemaVersion:"1.0"},style:{properties:{"alpha-bg":"0","alpha-brd":"0",bg:"color_11","boxShadowToggleOn-shd":"false",brd:"color_15",brw:"0px",rd:"0px"}},type:"TopLevelStyle",id:core.invisibleContainerStyleId,skin:"wysiwyg.viewer.skins.area.RectangleArea"})}function x(a){return _.isEmpty(a.oldSolution)?a.newSolution[0].sitePart:a.oldSolution[0].sitePart}function y(a,b,c){c=c||{type:"NoTransition",direction:"NORMAL"};var d=i.story.selectedPage,e=x(a),f=a.startIndex,h=a.newSolution,j=a.newLength,k=h.slice(f,f+j),l="NoTransition"!==c.type,m=r.getCurrentDesktopPage();return new g(M,d,e,k,m,b||0,!1,{isHidden:l}).replaceLayoutGroupArray(a,c).then(function(){V=C()})}function z(a,b,c,d){var e=h.getSelectedSolution(a,c),f=Y.editorRenderMode,i=new g(M,c,a,e,b,d,f,void 0);return i.renderPart().then(function(a){return{sitePartRenderer:i,height:a,solution:e}})}function A(a,b){var c=f.getCompChildren(b);return f.removeComps(c).then(function(){r.updateAndAdjustLayout(b,{height:0})})}function B(a){return _.map(a,function(a){return a.targetHeight})}function C(){var a=B(h.getSelectedSolution(q.HEADER)),b=B(h.getSelectedSolution(q.FOOTER)),c=B(h.getSelectedSolution(q.BODY,i.story.selectedPage));return[].concat(a,c,b)}function D(c,d,e){P.css("min-height",P.height()),Q.css("min-height",P.height());var f;l.isPreview!==!1&&(f=l.isPreview,l.setPreviewMode(!1)),S=!0;var g=k.getPageIdByName(c),h=r.getDesktopPageReference(g),i=r.getDesktopHeader(),j=r.getDesktopFooter();return w(),b.debug&&e&&"Stores_Thank_You_Widget"===e.tpaExtraPage&&a.console.log("a"),t.initForRender().then(function(){return b.debug&&e&&"Stores_Thank_You_Widget"===e.tpaExtraPage&&a.console.log("b"),d&&"header"!==d?void 0:n.isSiteHeaderVisible()?z("header",i).then(function(a){Y.editorRenderMode||r.siteChanges.register(function(){a.sitePartRenderer.updateLGsWithStructure(a.solution)}),!_.isNaN(a.height)&&a.height&&r.updateLayout(i,{height:a.height})}):A("header",i)}).then(function(){return d&&"body"!==d?void 0:(b.debug&&e&&"Stores_Thank_You_Widget"===e.tpaExtraPage&&a.console.log("c"),z("body",h,c,500).then(function(c){Y.editorRenderMode||(b.debug&&e&&"Stores_Thank_You_Widget"===e.tpaExtraPage&&a.console.log("d"),r.siteChanges.register(function(){c.sitePartRenderer.updateLGsWithStructure(c.solution)}))}))}).then(function(){return d&&"footer"!==d?void 0:n.isSiteFooterVisible()?z("footer",j).then(function(a){Y.editorRenderMode||r.siteChanges.register(function(){a.sitePartRenderer.updateLGsWithStructure(a.solution)}),r.updateLayout(j,{height:a.height})}):A("footer",j)}).then(function(){return r.siteChanges.flush()}).then(function(){var a=n.getGeneralInformation().isUserHidden()&&n.footerNode.isUserHidden();r.updatePage(h.id,{isLandingPage:a})}).then(function(){return S=!1,P.css("min-height",""),Q.css("min-height",""),N.parentElement.scrollTop=N.parentElement.scrollTop-1,N.parentElement.scrollTop=N.parentElement.scrollTop+1,T.length?D(T.shift()):(void 0!==f&&l.setPreviewMode(f),void(V=C()))})}function E(a){return i.story&&i.story.selectedPage?K(i.story.selectedPage,a):c.when()}function F(){return X?(W=!0,c.when()):(X=!0,_.collectPromises(m.getLayoutSelectionStore().renderCallbacks,function(a){return _.collectPromises(a,function(a){return _.collectPromises(a,function(a){return a.dirty?(a.dirty=!1,a.callback()):void 0})})})["finally"](function(){return X=!1,W?(W=!1,F()):void 0}))}function G(){var a=k.getCurrentPageName(),b=u.isInMobileEditMode()?v.getMobileSitePartSolution("body",a):h.getSelectedSolution("body",a);if(V=C(),!R||"preview"!==R()){var c=b[b.length-1].getBoundingTop()+b[b.length-1].getBoundingHeight();c=Math.max(500,c),i.emitRenderedPart("body",b,c,a)}}function H(a){return void 0!==a.dirty&&!a.dirty}function I(e){var f=[],g=n.getPagesNodes();return Y.editorRenderMode=e,_.sequencePromises(g,function(g,i){var j,k=!0;return H(g)?(b.debug&&a.console.log("page"+i+" is calculated:",g),k=e,j=c.when()):(b.debug&&a.console.log("calculating page"+i+":",g),j=h.calculatePage(g.id,!0)),j.then(function(){return k?(b.debug&&a.console.log("rendering page"+i+":",g),D(g.id,"body",g)):void(b.debug&&a.console.log("no need to render page"+i+":",g))}).then(function(){return b.debug&&a.console.log("setting page"+i+"seo:",g),s.setPageSEO(g,f),c.when()})["catch"](function(c){b.debug&&a.console.log(c.stack),d.error("calculateAndRenderAllPages",c)})}).then(function(){return e?D(i.story.selectedPage,"header"):void 0}).then(function(){return e?D(i.story.selectedPage,"footer"):void 0}).then(function(){Y.editorRenderMode=!1})}function J(){var a=n.getPageNodeById(n.homePageId);return H(a)?c.when():h.calculatePage(a.id,!0).then(function(){return D(a.id,"body")}).then(function(){s.setPageSEO(a)})}function K(a,b){return M&&!S?U=D(a,b):M&&(T.push(a),T=_.uniq(T)),U}function L(){return S}var M,N,O,P,Q,R,S=!1,T=[],U=c.when(),V=[],W=!1,X=!1;b.renderedModel||(i.renderAnimated=function(a,b,c){return d.mark({name:"renderAnimate"}),y(a,b,c).then(function(){d.measure({name:"renderAnimate"})})},i.reRender=function(a){return d.mark({name:"renderPage"}),E(a).then(function(){d.measure({name:"renderPage"})})},i.reRenderParts=function(){d.mark({name:"renderPage"});var a=!_.isEqual(V,C()),b=a?E():F();return b.then(function(){d.measure({name:"renderPage"})})},i.calculateAndRenderAllPages=I,i.onLayoutSolutionChanged(function(a,b){E(b)}),i.onDataChanged(function(a,b){var c=b&&(b.oldLe&&o.isUnexpectedHeight(b.oldLe)||b.newLe&&o.isUnexpectedHeight(b.newLe)),d=!_.isEqual(V,C()),e=b&&b.lockRenderer;e&&p.waitForMe("reRender");var f;f=c||d?E():F(),f.then(function(){e&&p.imDone("reRender")})}),l.registerInit(function(a){M=a.documentServices,M.documentMode.setComponentViewMode("preview"),O=a.iframeWindow,N=a.overlay,P=angular.element(N),O&&(Q=angular.element(O.body)),r.siteChanges.register(function(){i.noOverlay&&k.syncPageWithSantaCurrentPage(),L()||l.isPreview||e.syncChanges().then(function(a){a&&G()})},!0)},void 0,"renderer"));var Y={setStateGetter:function(a){R=a},editorRenderMode:!1,renderSolution:K,reRender:E,setPreviewMode:l.setPreviewMode.bind(l),setInvisibleContainerStyle:w,init:_.noop,isRendering:L,renderAnimated:y,updateHeightIfChanged:G,calculateAndRenderHomePage:J};return Y}]);var core;!function(a){var b=function(){function a(a,b,c,d,e,f,g,h,i,j,k,l,m){var n=this;this.storyServices=a,this.mobileSolutionManager=b,this.pagesManager=c,this.sitePartTypes=d,this.previewService=e,this.rendererSeo=f,this.$q=g,this.renderer=h,this.layoutSolver=i,this.flags=j,this.SitePartRenderer=k,this.modelTree=l,this.documentServicesMediator=m,e.registerInit(function(a){n.documentServices=a.documentServices}),this.flags.mobileOldRenderedModel&&(this.storyServices.renderMobileSolution=function(a,b,c,d){return n.renderMobileSolution(a,b,c,d)})}return a.$inject=["storyServices","mobileSolutionManager","pagesManager","sitePartTypes","previewService","rendererSeo","$q","renderer","layoutSolver","flags","SitePartRenderer","modelTree","documentServicesMediator"],a.prototype.getPageContainer=function(a,b){var c;switch(a){case this.sitePartTypes.HEADER:c=this.documentServicesMediator.getMobileHeader();break;case this.sitePartTypes.FOOTER:c=this.documentServicesMediator.getMobileFooter();break;default:var d=this.pagesManager.getPageIdByName(b);c=this.documentServicesMediator.getMobilePageReference(d)}return c},a.prototype.renderMobileSolution=function(a,b,c,d){var e=this,f=this.getPageContainer(a,b),g=this.mobileSolutionManager.getMobileSitePartSolution(a,b);return new this.SitePartRenderer(this.documentServices,b,a,c,f,0,!1,void 0,!0).renderMobileSection(g,c,d||c).then(function(c){var d;d=a===e.sitePartTypes.BODY?e.documentServicesMediator.getMobilePagesContainer():f,d&&(e.documentServicesMediator.updateLayout(d,{height:c}),e.storyServices.emitRenderedPart(a,g,c,b))}).then(function(){return e.previewService.waitForChanges()})},a}();a.MobileRenderer=b,angular.module("siteGeneratorStaticsCoreAppInternal").service("mobileRenderer",b)}(core||(core={})),angular.module("siteGeneratorStaticsCoreAppInternal").factory("SitePartRenderer",["$p","componentAttributesBuilder","componentBuilderProvider","layoutElementRendererFactory","columnService","layoutSelectionStoreProvider","modelTree","storyServices","tpaService","previewService","$window","$log","flags","designKit","solutionSantaMediator","mediaGallery","mediaOverride","stripRendererFactory","solutionManager","applicationParameters","documentServicesMediator","obMonitoring","backgroundScrollService","renderedModelMobileAdapter",function(a,b,c,d,e,f,g,h,i,j,k,l,m,n,o,p,q,r,s,t,u,v,w,x){var y="REVERSE";return function(k,l,n,p,q,z,A,B,C){function D(){if(!C){var a;return l&&(a=g.getPageNodeById(l).parentPortfolioId),Ga.deleteCallbacksForPage(a||l||n),l&&Ga.deleteCallbacksForPage("general"),na.getCompChildren(q)}}function E(a,b){var c=_.findIndex(a,{id:b});-1!==c&&a.splice(c,1)}function F(b,c){if(!C){if(!Da){if("body"===n){var d=c&&c.newLayoutGroups||p;_.forEach(d,function(a){var c,d=a.segments[0]&&a.segments[0].node;if(O(a)){c=_.findIndex(b,{id:d.widgetRef.id}),E(b,d.widgetRef.id);var e=i.getContainingStripRef(d);e&&E(b,e.id)}if(M(a)===ua){var f=i.getCompRef(ua);E(b,f&&f.id)}})}return na.removeComps(b)}return a.when()}}function G(a){return s.isLGHasStrip(Ca,a)}function H(a){return a>=p.length||!G(a)}function I(a){return Ba[a]}function J(a,b){return s.isLGsFromTheSameList(a,b)}function K(a){return a<Ca.length&&Ca[a].topLine&&Ca[a].topLine.enable}function L(a){return a&&a.enable}function M(a){return a.segments[0]&&a.segments[0].contentElement.type}function N(a){return SolutionManager.isTpa(a)}function O(a){return SolutionManager.isTpaWidget(a)}function P(a){return SolutionManager.isTpaNode(a)}function Q(a,b){L(a)&&("line"===a.line?(va+=a.topMargin,a._top=va,Ia.push({data:a,lg:b}),va+=a.bottomMargin):va+=a.space||0)}function R(){return _.collectPromises(Ia,function(b){var c=b.data;if(c.lineLength>0){var d=za;return"center"===c.align?d+=(940-c.lineLength)/2:"right"===c.align&&(d+=940-c.lineLength),na.buildLine(q,d,c._top,c.lineLength,c.fullWidth,c.style).then(function(a){b.lg.addLineRef(a)})}return a.when()})}function S(a){return s.stripEnabled(a)}function T(a,b,c,d){var e=[];return _.each("body"===n&&b.segments,function(f){var h,i=g.findIdentifyingNode(f.node);h=i&&f.node!==i?i:f.node;var j=h&&g.getAnchorDataId(h);if(j&&!d[j]){var k;if(b.isMobile())k=u.getMobileComponent({id:j}),na.updateLayout(k,{y:c});else{var l={componentType:"wysiwyg.common.components.anchor.viewer.Anchor",data:{name:g.getAnchorName(h),type:"Anchor"},layout:{fixedPosition:!1,height:21,rotationInDegrees:0,scale:1,width:1918,x:-469,y:c},skin:"wysiwyg.common.components.anchor.viewer.skins.AnchorSkin",style:"Anchor_1",type:"Component"};k=u.addComponent(a,l,{compId:j})}d[j]=k,e.push(k)}}),e}function U(a,b,c,d){if(b||C&&m.renderedModel){if(a.columns){var f=Math.max.apply(Math,[a.targetHeight].concat(_.map(a.columns,"height"))),g=x.getColumnsContainerRef(a.getDesktopLG());return na.buildStripColumnsContainer(c,d,f,e.getColumnsContainerProps(a.columns),void 0,g,a.columns[0].isMobile?a.isMobileFirstLG():void 0).then(function(b){a.setColumnsComponentRef(b);var c=w.getColumnsScrollType(a,a.columns);return _.sequencePromises(a.columns,function(d,g){var h=e.createColumnBackground(d);d.renderedBackground=h;var i=x.getSegmentOrColumnRef(n,a.getDesktopLG(),a.columns,g);return na.buildColumn(b,d.width,d.isMobile?d.height:f,d.extraProps,c,h,d.hasText,i,d.columnPositionIndex).then(function(a){return d.ref=a,d})})})}return _.sequencePromises(a.segments.filter(function(a){return a.getLENoError()}),function(c){if(C&&m.renderedModel)return{segment:c,isVirtual:!1};var d=C&&x.getSegmentOrColumnRef(n,a.getDesktopLG(),a.getDesktopLG().renderedColumns,a.getMobileSegmentIndexInDesktop()),e=C?a.renderedTop-a.getMobileFirstLG().renderedTop:c.top;return na.buildContainer(b,c.left+za,e,c.width,c.height||a.targetHeight,void 0,d).then(function(a){return{segment:c,isVirtual:!1,ref:a}})})}var h=a.segments[0],i=h.getLENoError();return i?[{segment:h,isVirtual:!1,ref:void 0}]:[]}function V(b,c,d,e){if(N(c)){var f=M(c);return i.changeTpaTop(f,d),a.when(0)}var g,h;return a.resolve().then(function(){if(!O(c)&&"header"!==c.sitePart){if(C&&m.renderedModel&&c.getDesktopLG().columns)return;var a=C&&x.getLgRef(c.getDesktopLG());return na.buildStripContainer(b,d,c.targetHeight,e,a,C?c.isMobileFirstLG():void 0)}}).then(function(a){g=a,c.setComponentRef(g)}).then(function(){var a=A||"header"===c.sitePart,f=a&&d||0,i=a&&b||g;return oa.renderLgStrips(c,i,f,l,n,e).then(function(){c.stripComponentRef&&(h=c.stripComponentRef)})}).then(function(){return"header"!==c.sitePart?U(c,g,b,d):void 0}).then(function(a){c.renderedColumns=a;var e=sa.getId();return"header"===c.sitePart&&(a=[{isVirtual:!1,segment:c.segments[0]}]),_.sequencePromises(a,function(f,g){return ea(c,e,b,d,h,a,g)})}).then(function(){A&&g&&k.waitForChangesApplied(function(){k.components.remove(g)})})}function W(a,b){for(var c=0,d=a;b>d&&d<p.length;d++)c+=p[d].targetHeight,d!==a&&(c+=Ca[d].topLine.enable?Ca[d].topLine.bottomMargin+Ca[d].topLine.topMargin:Ca[d].strip.paddingTop+Ca[d].strip.paddingBottom),d!==b-1&&Ca[d].bottomLine.enable&&(c+=Ca[d].bottomLine.bottomMargin+Ca[d].bottomLine.topMargin);return c}function X(b){b=b||{},sa=l?g.findPageNodeByName(l):g.data,va=b.nextYPosition||0;var c,d,e,f,j,k,o,r=-1,w=b.newLayoutGroups||p,y=q,C=_.map(w,function(a){return s.hasStripOnLE(a)});Ca=s.getAndNormalizeLgDataArray(n,w);var D={};return va+=s.mergeDecorativeStrips(w,Ca,C,Aa,Ba),_.sequencePromises(w,function(b,h){var l;return a.when().then(function(){b.isMobile()&&m.consumerMode&&na.showWantedMobileComponents(b)}).then(function(){var n;if(N(b)||O(b)){var p=b.segments[0].getLE(),q=i.getHeightOfPreset(b.segments[0].node);q&&(p||v.error("no le (sitePartRenderer.js L449)",{type:b.segments[0].node.contentElementType}),p.height=q,p.layout[0].height=q,b.segments[0].rendererHeight=void 0),b.targetHeight=p.layout[0].height,b.segments[0].height=b.targetHeight,n=i.getContainingStripRef(b.segments[0].node),b.isMobile()&&(p.layout[0].left=za,n=n&&u.getMobileComponent(n))}j=h+1,k=Aa[h],o=Ca[h],S(o)&&(c=o.strip.paddingTop,d=o.strip.paddingBottom,e=o.strip.disableBottomMargin?0:o.strip.marginBottom,f=o.strip.disableTopMargin?0:o.strip.marginTop);var s=Ba[h];if(s){if(Ha=d+c,o.topLine.enable?o.topLine.topMargin+o.topLine.bottomMargin>f+c?ra=va+(o.topLine.topMargin+o.topLine.bottomMargin)-c:(ra=va+f,va+=f+c-(o.topLine.topMargin+o.topLine.bottomMargin)):(va+=f,ra=va+(0>c?-c:0),va+=c>0?c:0),Ha+=W(h,h+s),Ha>0){var w=renderer.StripRenderer.createCompLayoutForStrip(ra,Ha,void 0,void 0,b.isMobile());if(r=s-1,b.contentType!==ua){if(n)return t.extendValidLayout(l={},w),na.updateLayout(n,l),n;k.style=Fa,(N(b)||O(b))&&(B.zIndex=0);var z=x.getDecorativeStripRef(b.getDesktopLG());return a.when().then(function(){return b.isMobile()&&m.consumerMode&&z?na.minimizeMobileLayout(z):void 0}).then(function(){return oa.renderStrip(y,w,b,b.segments[0]&&g.findIdentifyingNode(b.segments[0].node),k,B,z)})}}}else r--,r>=0&&(va+=c)}).then(function(a){b.setDecorativeStripRef(a),ta=a||ta,Q(o.topLine,b),b.top=va}).then(function(){b.setRenderedDecorativeStripRef(b.decorativeStripRef||G(h)&&ta),b.renderedDecorativeStripHeight=b.renderedDecorativeStripRef&&Ha;var a=!P(b)||i.shouldRenderInStrip(b.segments[0].node),c=a&&b.renderedDecorativeStripRef;return b.setAnchorRefs(T(y,b,c&&ra||va,D)),b.renderedTop=va-(c&&ra||0),V(c||y,b,b.renderedTop,!c&&B||void 0)}).then(function(){b.isMobile()&&m.consumerMode&&na.hideUnwantedMobileComponents(b),l&&b.decorativeStripRef&&na.updateLayout(b.decorativeStripRef,l),b.rendererHeight=b.targetHeight,va+=b.rendererHeight,b.clearLineRefs(),Q(o.bottomLine,b),S(Ca[h])&&(o.bottomLine.enable&&o.bottomLine.bottomMargin+o.bottomLine.topMargin<d+e?va+=d+e-(o.bottomLine.bottomMargin+o.bottomLine.topMargin):o.bottomLine.enable||(va+=d>0?d:0)),b.isHeader()||L(o.bottomLine)||C[h]&&C[h+1]||(G(h)&&(H(j)||I(j))?va+=e:G(j)||K(j)||(j<w.length&&J(b,w[j])?va+=b.segments[0]&&b.segments[0].contentElement.isSpecialListItem()||w[j]&&w[j].segments[0]&&w[j].segments[0].contentElement.isSpecialListItem()?ya:xa:H(h)&&j<w.length&&H(j)&&(va+=Ea)))})}).then(function(){return R()}).then(function(){if("body"===n&&A){var a=_(sa.children).filter("anchor").map(function(a){return g.getAnchorDataId(a)}).value();_.each(D,function(b,c){-1===a.indexOf(c)&&u.removeComponent(b)})}}).then(function(){var a=w&&w.slice(0);b.solution&&(a=b.solution.slice(0));var c=Y(b.solution),d=Math.max(z||0,c);return qa=function(){aa()&&h.emitRenderedPart(n,a,d,l)},qa(),w})}function Y(a){var b;return a&&(b=_.reduce(a,function(a,b){return a+b.getBoundingHeight()},0)),b||va}function Z(a){_.each(a,function(a){a.structure=$(a)})}function $(a){var b=a.getComponentRefs(),c=b.map(function(b){var c=C?u.getMobileLayout(b):u.getLayout(b);return c||v.error("no layout (sitePartRenderer L633)",{type:a.segments[0].node.contentElementType,numOfSegments:a.segments.length}),{component:b,top:c.y-a.top}});return c}function aa(){return"body"===n&&h.story.selectedPage&&l&&l!==h.story.selectedPage?!1:!0}function ba(a,b,c,d,f){var g=0>b?a.layout:d[0].isMobile?d[b].layout:a.getColumns()[b].layout;return c&&(g=g.filter(function(a){return"media"!==a.type})),C&&(d&&d[0].isMobile?g=e.addMobilePadding(g,za):m.renderedModel&&"body"===n&&(g=g.map(function(a){return Object.assign({},a,{left:a.left+10})}))),e.adjustLayoutForColumns(a,g,d,f)}function ca(a,b,c,d,f,g){var h=f[g],i=h.segment,k=i.getLE();if(k){var l,m=oa.isStripType(k);if(a||i.stripGalleryRef||m){var o=[b.componentRef];b.columnsComponentRef&&o.push(b.columnsComponentRef),l=na.removeComps(o).then(function(){return i.setStripGalleryRef(void 0),b.columns=s.calculateColumns(b),V(d,b,c)}).then(function(){return j.waitForChanges()}).then(function(){b.structure=$(b)})}else{var p=function(a,f){var g=a[f],h=x.getSegmentOrColumnRef(n,b.getDesktopLG(),a,f),i=g.segment,j=g.isVirtual?f:-1,l=e.hasMediaBackground(a,f,b),m=ba(k,j,l,a,f);return g.isVirtual&&0!==f||i.clearRenderedComponents(),na.clearComponent(h).then(function(){return i.setStripGalleryRef(void 0),pa.render(i,h,d,c,A,void 0,m,a.allSettings,sa.getId()).then(function(a){return da(g),a})})};l=h.isVirtual?_.sequencePromises(f,function(a,b){return p(f,b)}):p(f,g)}return l.then(function(){i.updateRenderTime()})}}function da(a){var c=e.createColumnBackground(a);if(!_.eq(c,a.renderedBackground)){a.renderedBackground=c;var d=b.buildDesign(c,a.hasText);k.components.design.update(a.ref,d)}}function ea(b,c,d,f,h,i,j){var k=i[j];if(!k.empty){var l=x.getSegmentOrColumnRef(n,b.getDesktopLG(),i,j),m=k.segment,o=k.isVirtual?j:-1,p=m.getLENoError();if(!p)return a.when();if(m.contentElement.portfolio){var q=_.find(m.contentElement.ceArray,function(a){return a.pageId===c});p.getArgumentsValues(q,g.getAllVisibleContentElements())}var r=e.hasMediaBackground(i,j,b),s=ba(p,o,r,i,j);return k.isVirtual&&0!==j||m.clearRenderedComponents(),C||b.getLayoutSelectionStore().assignWithRenderCallback(b.getPageDescriptor(),m,ca.bind(null,h,b,f,d,i,j)),pa.render(m,l,d,f,A,h,s,k.allSettings,c).then(function(){m.updateRenderTime()})}}function fa(b,c,d){var e=a.defer(),f=d.direction===y;return k.components.behaviors.previewTransition(c,b,{name:d.type,duration:d.duration||1,params:{to:{x:1920},reverse:f,callbacks:{onComplete:function(){b.forEach(function(a){k.components.properties.update(a,{isHidden:!1})}),c.forEach(function(a){var b=k.components.getChildren(a)[0],c=b&&u.getComponentType(b),d=u.getComponentType(a);if(!(i.getCompRef(ua)===a||c&&-1!==Ja.indexOf(c)||d&&-1!==Ja.indexOf(d))){var e=j.getElementByCompRef(a);e&&(e.style.visibility="hidden")}}),e.resolve()}}}}),e.promise}function ga(a){return _(a).map(_.method("getBoundingHeight")).sum()}function ha(a){return a.getBoundingTop()+a.getBoundingHeight()}function ia(a){return _.filter(a,function(a){return/.Anchor$/.test(u.getComponentType(a))?(u.removeComponent(a),!1):!0})}function ja(a,b){var c=a.startIndex,d=a.newSolution,e=a.oldSolution,f=_.difference(e,d);_.each(f,function(a){_.each(a.segments,function(b){a.getLayoutSelectionStore().deleteRenderCallbackForSegment(a.getPageDescriptor(),b)})});var g=e[c-1],h=e.slice(c,c+a.length),i=d.slice(c,c+a.newLength),k=e.slice(c+a.length),l=o.getLayoutGroupArrayComponents(h);l=ia(l);var m=g?ha(g):0,n=a.oldHeight||ga(h),p={nextYPosition:m,newLayoutGroups:i,solution:a.newSolution};return X(p).then(function(a){return j.waitForChanges().then(function(){return Z(a),a})}).then(function(a){var c=ga(a),d=c-n,e=o.getLayoutGroupArrayComponents(a),f=o.moveLayoutGroupArrayByOffset.bind(o,k,d),g=fa.bind(this,e,l,b);return c>n?f().then(g):g().then(f)}).then(function(){qa()}).then(_.partial(F,l,p))}function ka(a){return _(a).filter(function(a){return a.renderedDecorativeStripRef}).map(function(a){return{ref:a.renderedDecorativeStripRef,height:a.renderedDecorativeStripHeight}}).groupBy(function(a){return a.ref.id}).map(0).pluck("height").sum()}function la(a,b,c){var d=_.findIndex(a,b[0]),e=a[d-1],f=a.slice(d+b.length,a.length),g=e?ha(e):0,h=ka(c),i={nextYPosition:g,newLayoutGroups:b,solution:a};return X(i).then(function(){return j.waitForChanges()}).then(function(){Z(b)}).then(function(){var c=ka(b);return o.moveLayoutGroupArrayByOffset(f,c-h).then(function(){return Y(a)})})}function ma(){if(Da){var b=k.pages.getLayout(k.pages.getCurrentPage().id).height;return p&&p[0]&&(p[0].segments[0].height=b,p[0].targetHeight=b,p[0].rendererHeight=b,p[0].top=0),aa()&&h.emitRenderedPart(n,p,b,l),a.when(b)}var c=D();return c=ia(c),X().then(function(){return F(c)}).then(function(){return va})}var na=c.getSpecificBuilder(C),oa=r(na),pa=d(na,oa);B=B||{};var qa,ra,sa,ta,ua=t.tpaTypes.Blog.type,va=0,wa=40,xa=40,ya=60,za=C?10:20,Aa=[],Ba=[],Ca=[],Da="body"===n&&i.isCurrentPageIsBlogSinglePost(q),Ea=Number(h.story.selectedStyle.margin?h.story.selectedStyle.margin:wa),Fa="strc1",Ga=f.getLayoutSelectionStore(l||n),Ha=0,Ia=[],Ja=["wysiwyg.viewer.components.tpapps.TPAWidget","wysiwyg.viewer.components.tpapps.TPASection","wixapps.integration.components.AppPart"];this.replaceLayoutGroupArray=ja,this.renderMobileSection=la,this.renderPart=ma,this.updateLGsWithStructure=Z}}]);var renderer;!function(a){var b=function(){function a(a,b,c,d,e,f,g,h,i,j,k,l,m){this.$p=a,this.mediaGallery=b,this.componentBuilder=c,this.componentAttributesBuilder=d,this.mediaOverride=e,this.flags=f,this.designKit=g,this.backgroundScrollService=h,this.applicationParameters=i,this.documentServicesMediator=j,this.backgroundMediaOpacity=k,this.renderedModelMobileAdapter=l,this.galleryBgPropertiesOverrides=m}return a.$inject=["$p","mediaGallery","componentBuilder","componentAttributesBuilder","mediaOverride","flags","designKit","backgroundScrollService","applicationParameters","documentServicesMediator","backgroundMediaOpacity","renderedModelMobileAdapter","galleryBgPropertiesOverrides"],a.isMapStripType=function(a,b){var c=a&&a.variationsMap&&a.variationsMap.map&&a.variationsMap.map.fullWidth;if(c){var d=_.find(b?[b]:a.layout,function(a){return"map"===a.type});c=d&&940===d.width}return c},a.normalizeWixVideoItem=function(a){if(a.fileOutput)return a;var b=a.fileName,c=a.width,d=a.height,e=a.duration,f=a.displayAspectRatio,g=a.videoBitrate,h=a.audioBitrate,i=a.fps,j=a.title;return{mediaType:"video",fileName:b,uri:b,fileUrl:"video/"+b,title:j,fileInput:{audioBitrate:h/1e3,videoBitrate:g/1e3,height:d,width:c,fps:i,duration:e,type:"video",displayAspectRatio:f},fileOutput:{image:[{status:"READY",secure:!1,format:"jpg",url:"media/"+b+"f000.jpg",height:d,width:c,key:"poster.0"},{status:"READY",secure:!1,format:"jpg",url:"media/"+b+"f001.jpg",height:d,width:c,key:"poster.1"},{status:"READY",secure:!1,format:"jpg",url:"media/"+b+"f002.jpg",height:d,width:c,key:"poster.2"},{status:"READY",secure:!1,format:"jpg",url:"media/"+b+"f003.jpg",height:d,width:c,key:"poster.3"}],video:[{status:"READY",audioBitrate:-1,secure:!1,fps:i,format:"mp4",url:"video/"+b+"/480p/mp4/file.mp4",height:480,videoBitrate:877,tag:"High",key:"480p.mp4",duration:e,displayAspectRatio:f,quality:"480p",width:Math.round(480*c/d)},{status:"READY",audioBitrate:-1,secure:!1,fps:i,format:"webm",url:"video/"+b+"/480p/webm/file.webm",height:480,videoBitrate:1457,tag:"High",key:"480p.webm",duration:e,displayAspectRatio:f,quality:"480p",width:Math.round(480*c/d)},{status:"READY",audioBitrate:-1,secure:!1,fps:i,format:"mp4",url:"video/"+b+"/720p/mp4/file.mp4",height:720,videoBitrate:3362,tag:"HD",key:"720p.mp4",duration:e,displayAspectRatio:f,quality:"720p",width:Math.round(720*c/d)},{status:"READY",audioBitrate:-1,secure:!1,fps:i,format:"webm",url:"video/"+b+"/720p/webm/file.webm",height:720,videoBitrate:3954,tag:"HD",key:"720p.webm",duration:e,displayAspectRatio:f,quality:"720p",width:Math.round(720*c/d)},{status:"READY",audioBitrate:-1,secure:!1,fps:i,format:"mp4",url:"video/"+b+"/1080p/mp4/file.mp4",height:1080,videoBitrate:5753,tag:"HD",key:"1080p.mp4",duration:e,displayAspectRatio:f,quality:"1080p",width:Math.round(1080*c/d)},{status:"READY",audioBitrate:-1,secure:!1,fps:i,format:"webm",url:"video/"+b+"/1080p/webm/file.webm",height:1080,videoBitrate:7151,tag:"HD",key:"1080p.webm",duration:e,displayAspectRatio:f,quality:"1080p",width:Math.round(1080*c/d)}]},vendor:"bigstock&bigstock&bigstock&clipcanvas",reference:"v49780622&v493478872&v49737086&v318347",fileBaseUrl:"video/"+b,relativeUri:b,thumbnailUrl:"https://static.wixstatic.com/media/"+b+"f002.jpg/v1/fit/w_288,h_155/"+b+"f002.jpg",Title:j,Description:"",controls:0,playmode:{autoplay:!0,loop:!0},active:!0}},a.createCompLayoutForStrip=function(b,c,d,e,f){return void 0===f&&(f=!1),{top:b||0,width:f?320:980,left:0,height:c,style:a.DEF_STRIP_STYLE,subType:void 0,type:"stripContainer",argIndex:e,mediaIndex:d}},a.getBackgroundData=function(a,b){var c={fittingType:a.properties.fittingType,alignType:a.properties.alignType,scrollType:b};return c},a.prototype.isStripType=function(b,c){return this.mediaOverride.isStripType(b,c)||a.isMapStripType(b,c)},a.prototype.renderStrip=function(a,b,c,d,e,f,g){var h=this;if(this.flags.sectionBackground&&("video"===e.mediaType||"bgImage"===e.mediaType||"pattern"===e.mediaType)){var i=e.mediaType;e=ob.deepClone(e),this.mediaGallery.setBgObj(e.mediaItems[0],e),
"pattern"===e.mediaType?e.scrollType="none":(e.scrollType=this.backgroundScrollService.getActiveScrollType(d),e.mediaRef.opacity=this.backgroundMediaOpacity.getBackgroundOpacity(c,c.getLgData().strip.color,i,e.mediaItems))}return this.componentBuilder.buildComponent(a,b,e,{style:{strip:e.style}},null,f,void 0,void 0,void 0,g).then(function(a){return h.$p.when().then(function(){if(h.flags.sectionBackground&&"gallery"===e.mediaType){var c=e.galleryType||"Strip Slideshow",d=e.galleryProps,f=h.mediaOverride.getGalleryByName(c,940,b.height,e.mediaItems,d);if(f){var g={top:0,width:940,left:0,height:b.height},i=h.componentAttributesBuilder.createGalleryAttributes(f,g,e.mediaItems);return _.each(h.galleryBgPropertiesOverrides[f.name],function(a,b){i.properties[b]=a}),h.componentBuilder.buildComponentRaw(a,i)}}}).then(function(){return a})})},a.prototype.renderLgStrips=function(b,c,d,e,f,g){b.setStripComponentRef(void 0);var h=[],i=b.isMobile()&&b.columns&&b.columns[0].isVirtual&&b.columns.length>1;if(!b.isHeader()&&1===b.segments.length&&!i){b.segments[0].setStripGalleryRef(void 0);var j=b.segments[0].getLENoError();if(j){if(a.isMapStripType(j)){var k=this.renderMapStrip(b,c,d);h.push(k)}if(j.overrides){var l=j.getStripImageArgIndex();if(void 0!==l){var m=this.renderStripOfLE(c,d,j,l,g).then(function(a){return b.setStripComponentRef(a)});h.push(m)}else{var n=j.getMediaLayout();if(n&&this.mediaOverride.isStripType(j)){n=ob.deepClone(n),n.top+=d;var o=this.renderMediaStrip(b,c,n);h.push(o)}}}}}var p=b.getLayoutSelectionStore().getLgData(b.getUniqueIdForSolution(),e||f);if(p.menuStrip&&p.menuStrip.enable){var q=this.renderMenuStrip(b,p,c,d,f,g);q&&h.push(q)}return this.$p.all(h)},a.prototype.renderStripOfLE=function(b,c,d,e,f){var g,h=d.containingSegment,i=d.getLayoutWithArgIndex(+e),j=a.createCompLayoutForStrip(i.top+c,i.height,i.mediaIndex,i.argIndex,h.isMobile),k=d.getArgValue(i.argIndex),l=d.overrides.media[i.argIndex],m=this.backgroundScrollService.getStripScrollType(d),n=a.getBackgroundData(l,m);"Strip Video"===l.name?(g=_.find(k,function(a){return"video"===a.mediaType}),g=a.normalizeWixVideoItem(g)):g=k[0],this.mediaGallery.setBgObj(g,n);var o;return h.isMobile&&(o=this.renderedModelMobileAdapter.getStripOfLERef(h.getDesktopSegment())),this.componentBuilder.buildComponent(b,j,n,d.overrides,d,f,void 0,void 0,void 0,o).then(function(a){return d.setArgComponent(i.argIndex,a),a})},a.prototype.renderMenuStrip=function(b,c,d,e,f,g){var h=this,i=b.segments[0].getLENoError();if(i){var j=_.find(i.layout,function(a){return"menu"===a.type||"copyrightMSG"===a.subType});if(j){var k=void 0,l=void 0;if(b.isMobile()&&b.isSiteHeader()?(l=i.menuStripTop+b.renderedTop,k=i.menuStripBottom-i.menuStripTop):(k=c.menuStrip.paddingTop+j.height+c.menuStrip.paddingBottom,l=e+j.top-c.menuStrip.paddingTop),k>0){var m=b.segments[0].isMobile&&_.find(this.documentServicesMediator.getChildren(d),function(a){var b=h.documentServicesMediator.getComponentType(a);return"wysiwyg.viewer.components.StripContainer"===b||"wysiwyg.viewer.components.StripColumnsContainer"===b}),n=a.createCompLayoutForStrip(l,k,void 0,void 0,b.isMobile());return this.renderStrip(d,n,b,b.segments[0].node,c.menuStrip,g,m).then(function(a){})}}}},a.prototype.renderMapStrip=function(a,b,c){var d=a.segments[0].getLENoError(),e=ob.deepClone(_.find(d.layout,function(a){return"map"===a.type}));e.top+=c;var f=d.getArgValue(e.argIndex);return this.componentBuilder.buildComponent(b,e,f,d.overrides,d)},a.prototype.renderMediaStrip=function(a,b,c){var d=this,e=a.segments[0].getLENoError(),f=e.getArgValue(c.argIndex),g=a.isMobile()&&this.renderedModelMobileAdapter.getStripGalleryRef(a.getDesktopLG());return this.componentBuilder.buildComponent(b,c,f,e.overrides,e,void 0,void 0,void 0,void 0,g).then(function(b){a.segments[0].stripGalleryRef=b,d.mediaOverride.isUnexpectedHeight(e,c)&&(e.containingSegment.unexpectedHeightRef={ref:b,layout:c})})},a}();b.DEF_STRIP_STYLE="strc1",a.StripRenderer=b,angular.module("siteGeneratorStaticsCoreAppInternal").factory("stripRendererFactory",["$injector",function(a){return function(c){return a.instantiate(b,{componentBuilder:c})}}])}(renderer||(renderer={}));var renderer;!function(a){var b=function(){function a(a,b,c,d,e,f,g,h,i){this.$p=a,this.applicationParameters=b,this.heightMutations=c,this.mediaOverride=d,this.tpaService=e,this.pagesManager=f,this.layoutSolver=g,this.documentServicesMediator=h,this.solutionSantaMediator=i,this.isActive=!1,this.synching=null}return a.$inject=["$p","applicationParameters","heightMutations","mediaOverride","tpaService","pagesManager","layoutSolver","documentServicesMediator","solutionSantaMediator"],a.prototype.activate=function(){return this.isActive=!0,this.syncChanges()},a.prototype.syncChanges=function(){var a=this;if(!this.isActive)return this.$p.when();if(this.synching)return this.synching;var b=this.pagesManager.getCurrentPageName(),c=this.layoutSolver.getSelectedSolution("body",b);if(!c)return this.$p.when();var d,e=[];return c.forEach(function(b,f){var g,h,i=b.contentType===a.applicationParameters.tpaTypes.Blog.type,j=a.$p.when(),k=b.segments[0],l=k.getLENoError(),m=l&&l.getLayoutBySubType("image"),n=m&&a.mediaOverride.isUnexpectedHeight(l,m);if(k.node.isTpaNode()?h=k.node.isTpa?a.tpaService.getCompRef(k.node.contentElementType):k.node.widgetRef:n&&(h=k.unexpectedHeightRef&&k.unexpectedHeightRef.ref),h&&a.documentServicesMediator.doesComponentExistByRef(h)){a.applicationParameters.isInMobileEditMode()&&(h=a.documentServicesMediator.getMobileComponent(h),b=b.getMobileFirstLG());var o,p=n?m&&m.height:b.targetHeight,q=a.documentServicesMediator.getLayout(h),r=i?a.tpaService.getBlogFeedHeight():q.height;if(n){var s=l&&l.height>=a.applicationParameters.minHeightForLargeHeightMutations,t=s?a.applicationParameters.heightMutationStep:a.applicationParameters.gridStep;o=r-p,Math.abs(o)>t&&(0>o&&(j=l.shrink()),j=j.then(function(){var c=l.mutateByStretching(k.height+o);if(l.squizLayouts(),c&&c.containerMutation){var d=_.findIndex(a.heightMutations.heightMutations,function(a){return a>=l.height});return o=a.changeLGHeight(b,l.height,!0,d),g=!0,k.reRender().then(function(){a.addExtraHeightToLgStrip(b,o)})}window.console.log("gallery is too big - mutation failed")}))}else{var t=a.applicationParameters.gridStep,u=Math.ceil(r/t)*t;o=u-p,i&&q.height!==u&&(q.height=u,a.documentServicesMediator.updateLayout(h,q)),Math.abs(o)>a.applicationParameters.gridStep&&(o=a.changeLGHeight(b,u),a.addExtraHeightToLgStrip(b,o),g=!0,a.tpaService.setHeightOfPreset(k.node,b.targetHeight))}j=j.then(function(){if(g){d=!0;var e=_.slice(c,f+1);return b.renderedDecorativeStripRef&&_.each(e,function(c){return _.eq(c.renderedDecorativeStripRef,b.renderedDecorativeStripRef)?(c.renderedTop+=o,a.documentServicesMediator.updateLayout(c.componentRef,{y:c.renderedTop}),void(c.columnsComponentRef&&a.documentServicesMediator.updateLayout(c.columnsComponentRef,{y:c.renderedTop}))):!1}),a.solutionSantaMediator.moveLayoutGroupArrayByOffset(e,o)}}),e.push(j)}}),this.synching=this.$p.all(e).then(function(){return a.synching=null,d}),this.synching},a.prototype.changeLGHeight=function(a,b,c,d){void 0===c&&(c=!1);var e=a.targetHeight;d>=0?a.changeHeightMutationIndex(d):a.targetHeight=b,a.rendererHeight=b;var f=a.segments[0];f.rendererHeight=a.rendererHeight,f.height=a.targetHeight,f.selectedHeightMutation=a.selectedHeightMutation;var g=f.getLENoError();return g&&!c&&(g.height=a.targetHeight,g.layout[0].height=a.targetHeight),a.targetHeight-e},a.prototype.addExtraHeightToLgStrip=function(a,b){if(a.renderedDecorativeStripRef){var c=a.componentRef&&this.documentServicesMediator.getLayout(a.componentRef);c&&c.height>a.targetHeight&&(c.height=a.targetHeight,this.documentServicesMediator.updateLayout(a.componentRef,c)),a.renderedDecorativeStripHeight+=b,this.documentServicesMediator.updateLayout(a.renderedDecorativeStripRef,{height:a.renderedDecorativeStripHeight})}},a}();a.RenderSiteChanges=b,angular.module("siteGeneratorStaticsCoreAppInternal").service("renderSiteChanges",b)}(renderer||(renderer={})),angular.module("siteGeneratorStaticsCoreAppInternal").factory("solutionSantaMediator",["previewService","$p","$log",function(a,b,c){function d(a){var b=m.pages.getCurrentPage();if(n&&m.components.is.exist(n))m.components.layout.update(n,a);else{var c=_.assign({},p,{layout:a});n=m.components.add(b,c)}return e(n)}function e(b){return a.waitForChanges().then(function(){return b})}function f(){var a=m.pages.getCurrentPage();return m.components.layout.get(a)}function g(a){return a.reduce(function(a,b){return a.concat(b.getComponentRefs())},[]).filter(function(a){var b=m.components.getContainer(a);return/.Page$/.test(m.components.getType(b))})}function h(b,c){var d=g(b);return _.forEach(d,function(a){m.components.properties.update(a,{isHidden:!c})}),a.waitForChanges()}function i(a,c){var d=g(a),e=d.map(function(a){var d=b.defer();return m.components.behaviors.previewAnimation(a,{name:"BasePosition",duration:1,delay:0,params:{top:"+="+c}},function(){d.resolve()}),d.promise});return b.all(e).then(function(){return j(a,c)})}function j(b,d){return _.forEach(b,function(a){a.top+=d,_.forEach(a.structure,function(b){if(m.components.is.exist(b.component)){var d=m.components.getContainer(b.component),e=/.Page$/.test(m.components.getType(d));if(e){var f=a.top+b.top;m.components.layout.update(b.component,{y:f})}}else c.error("non existing comp: "+b.component.id)})}),a.waitForChanges()}function k(a,b){if(m){var c=f(),e=0;o>a&&(e=o-a);var g=b||c.height;return d({height:a,y:g-e})}}function l(){return n&&(m.components.is.exist(n)&&m.components.remove(n),n=null),a.waitForChanges()}var m,n,o=90,p={componentType:"wysiwyg.viewer.components.StripContainer",layout:{x:0,y:-9999,fixedPosition:!1,width:5,height:5,scale:1,rotationInDegrees:0},type:"Container",components:[],data:{type:"StripContainer",background:{color:"",scrollType:"scroll",colorOpacity:0,colorOverlay:"",type:"BackgroundMedia",colorOverlayOpacity:0,fittingType:"fill",alignType:"center"},isRef:!0,metaData:{isPreset:!1,schemaVersion:"1.0",isHidden:!1}},style:"strc1"};return a.registerInit(function(a){m=a.documentServices}),{animateMoveLayoutGroupArrayByOffset:i,clearPlaceholder:l,getLayoutGroupArrayComponents:g,moveLayoutGroupArrayByOffset:j,setLayoutGroupsVisibility:h,setPlaceholder:k}}]);var DocumentServicesMediator=function(){function a(a,b,c,d,e,f){var g=this;this.$p=a,this.previewService=b,this.storyServices=c,this.$log=d,this.applicationParameters=e,this.flags=f,this.siteChanges={_queueOnce:[],_queue:[],register:function(a,b){void 0===b&&(b=!1),b?g.siteChanges._queue.push(a):g.siteChanges._queueOnce.push(a)},flush:function(a){if(void 0===a&&(a=!1),!a&&g.siteChanges._queueOnce.length<=0)return g.$p.when();var b=g.siteChanges._queueOnce.map(function(a){return a});g.siteChanges._queueOnce.length=0;var c=g.$p.defer();return g.documentServices.waitForChangesApplied(function(){var a=b.map(function(a){return a()});g.$p.all(a).then(c.resolve.bind(c))}),c.promise}},this.tpa={addWidget:function(a,b,c){var d=g.documentServices.tpa.widget.add(b,_.extend(c,{pageId:a}));return g.documentServices.components.layout.unDock(d),d}},b.registerInit(function(a){g.initialize(a.documentServices)},void 0,"renderer")}return a.$inject=["$p","previewService","storyServices","$log","applicationParameters","flags"],a.prototype.initialize=function(b){var c=this;this.documentServices=b,this.flags.consumerMode&&this.useSimpleTimeoutToDeferQueue(),this.documentServices.registerToSiteChanged(_.debounce(function(){c.siteChanges._queue.map(function(a){return a()}),c.siteChanges._queueOnce.map(function(a){return a()}),c.siteChanges._queueOnce.length=0},a.SITE_CHANGES_DEBOUNCE))},a.prototype.getMetaSiteId=function(){return this.documentServices.generalInfo.getMetaSiteId()},a.prototype.getSiteId=function(){return this.documentServices.generalInfo.getSiteId()},a.prototype.getPartContainer=function(a,b){return"body"===a?this.getPageReference(b||this.getCurrentPageId()):"header"===a?this.getHeader():this.getFooter()},a.prototype.getDesktopPartContainer=function(a,b){return this.getDesktopComponent(this.getPartContainer(a,b))},a.prototype.getMobilePartContainer=function(a,b){return this.getMobileComponent(this.getPartContainer(a,b))},a.prototype.cloneComponentAndChangeType=function(a,b){var c=this;if(null===a)return null;if(a.type===b)return a;if("DESKTOP"===a.type&&"MOBILE"===b&&this.getComponentType(a)===core.DROP_DOWN_MENU)return this.getTinyMenuComp();if("MOBILE"===a.type&&"DESKTOP"===b&&"TINY_MENU"===a.id){var d={type:"DESKTOP",id:"SITE_HEADER"},e=this.documentServices.components.getChildren(d),f=e.filter(function(a){return c.getComponentType(a)===core.DROP_DOWN_MENU});return f[0]}var g=ob.deepClone(a);return g.type=b,g},a.prototype.getMobileComponent=function(a){return this.cloneComponentAndChangeType(a,"MOBILE")},a.prototype.getDesktopComponent=function(a){return this.cloneComponentAndChangeType(a,"DESKTOP")},a.prototype.setDocumentServicesStyles=function(a){var b=this;_.each(a,function(a,c){b.updateStyle(c,a.properties,a.skin)})},a.prototype.createStyle=function(a,b,c){return{componentClassName:"",pageId:"",compId:"",styleType:"system",style:{properties:b},type:"TopLevelStyle",id:a,skin:c}},a.prototype.hideMobileComponent=function(a){var b=this.getMobileComponent(a);this.doesComponentExistByRef(b)&&this.documentServices.mobile.hiddenComponents.hide(b,{updateLayout:!1})},a.prototype.showMobileComponent=function(a){var b=this.getMobileComponent(a),c=this.getDesktopComponent(a);this.doesComponentExistByRef(b)||this.documentServices.mobile.hiddenComponents.show(b.id,this.getPageOfComponent(c).id)},a.prototype.getTinyMenuComp=function(){return{type:"MOBILE",id:"TINY_MENU"}},a.prototype.assignCalculateMobileHeaderStyle=function(a){this.setTinyHeaderStyle=a},a.prototype.assignIsCartAdded=function(a){this.isCartAdded=a},a.prototype.resetMobileLayout=function(){this.flags.mobileEditor?this.documentServices.mobileConversion.resetMobileLayoutOnAllPages({heuristicStrategy:"minimal"}):this.documentServices.mobileConversion.resetMobileLayoutOnAllPages({heuristicStrategy:"onboarding"})},a.prototype.resetMobileLayoutOnAllPages=function(){this.flags.debug&&"MOBILE"===this.documentServices.viewMode.get()&&this.$log.warn("resetMobileLayoutOnAllPages must not be called when editor mode is mobile"),this.resetMobileLayout(),this.setTinyHeaderStyle()},a.prototype.save=function(){var a=this;if(this.flags.mobileEditor||this.resetMobileLayoutOnAllPages(),!this.saving){var b=this.$p.defer();this.saving=b.promise,this.documentServices.save(function(){b.resolve(),a.saving=null},function(c){b.reject(c),a.saving=null})}return this.saving},a.prototype.publish=function(){var a=this.$p.defer();return this.documentServices.publish(a.resolve,a.reject),a.promise},a.prototype.getPageIdList=function(){return this.documentServices.pages.getPageIdList()},a.prototype.getPageReference=function(a){return this.documentServices.pages.getReference(a)},a.prototype.getMobilePageReference=function(a){return this.getMobileComponent(this.getPageReference(a))},a.prototype.getDesktopPageReference=function(a){return this.getDesktopComponent(this.getPageReference(a))},a.prototype.updatePageNameAndVisibility=function(a,b,c){this.updatePage(a,{title:b,hidePage:c})},a.prototype.doesPageExist=function(a){return this.documentServices.pages.doesPageExist(a)},a.prototype.addPage=function(a){return this.documentServices.pages.add(a)},a.prototype.removePage=function(a){this.documentServices.homePage.get()!==a&&this.documentServices.pages.remove(a)},a.prototype.getPageData=function(a){return this.documentServices.pages.data.get(a)},a.prototype.updatePage=function(a,b){this.documentServices.pages.data.update(a,b)},a.prototype.getHomePage=function(){return this.documentServices.homePage.get()},a.prototype.setHomePage=function(a){this.documentServices.homePage.set(a)},a.prototype.getCurrentPageId=function(){return this.documentServices.pages.getCurrentPageId()},a.prototype.getCurrentPage=function(){return this.documentServices.pages.getCurrentPage()},a.prototype.getCurrentDesktopPage=function(){return this.getDesktopComponent(this.getCurrentPage())},a.prototype.getCurrentMobilePage=function(){return this.getMobileComponent(this.getCurrentPage())},a.prototype.navigateToPage=function(a){var b=this.$p.defer();return this.documentServices.pages.navigateTo(a,function(){b.resolve(a)}),b.promise},a.prototype.setPageStyle=function(a,b){this.documentServices.pages.style.setId(a,b)},a.prototype.setHeaderStyle=function(a){var b=this.getHeader();this.documentServices.siteSegments.style.setId(b,a)},a.prototype.setFooterStyle=function(a){var b=this.getFooter();this.documentServices.siteSegments.style.setId(b,a)},a.prototype.getPagesTransition=function(){return this.documentServices&&this.documentServices.pages.transitions.get()},a.prototype.setPagesTransition=function(a){return this.documentServices.pages.transitions.set(a)},a.prototype.getPageBackground=function(a){return this.documentServices.pages.background.get(a,"desktop")},a.prototype.addComponent=function(a,b,c){return void 0===c&&(c={}),this.documentServices.components.add(a,b,c.compId,c.zIndex)},a.prototype.removeComponent=function(a){var b=a;"string"==typeof a&&(b=this.getComponentRef(a)),this.documentServices.components.remove(b)},a.prototype.getComponentData=function(a){return this.documentServices.components.data.get(a)},a.prototype.getComponentType=function(a){return this.documentServices.components.getType(a)},a.prototype.checkIfComponentType=function(a){var b,c=this;return{is:function(d){return b=b||c.getComponentType(a),b===d},isNot:function(d){return b=b||c.getComponentType(a),b!==d}}},a.prototype.doesComponentExist=function(a){var b=this.getComponentRef(a);return this.doesComponentExistByRef(b)},a.prototype.getComponentRef=function(a){return a?this.documentServices.components.get.byId(a):null},a.prototype.getDesktopComponentRef=function(a){return this.getDesktopComponent(this.getComponentRef(a))},a.prototype.getMobileComponentRef=function(a){return this.getMobileComponent(this.getComponentRef(a))},a.prototype.doesComponentExistByRef=function(a){return!!a&&this.documentServices.components.is.exist(a)},a.prototype.isComponentGroupable=function(a){return!!a&&this.documentServices.components.is.groupable(a)},a.prototype.isComponentContainer=function(a){return this.documentServices.components.is.container(a)},a.prototype.getPageOfComponent=function(a){return this.documentServices.components.getPage(a)},a.prototype.getAllComponents=function(a){return this.documentServices.components.getAllComponents(a)},a.prototype.getPagesContainer=function(){return this.documentServices.siteSegments.getPagesContainer()},a.prototype.getMobilePagesContainer=function(){return this.getMobileComponent(this.getPagesContainer())},a.prototype.getDesktopPagesContainer=function(){return this.getDesktopComponent(this.getPagesContainer())},a.prototype.getFooter=function(){return this.documentServices.siteSegments.getFooter()},a.prototype.getMobileFooter=function(){return this.getMobileComponent(this.getFooter())},a.prototype.getDesktopFooter=function(){return this.getDesktopComponent(this.getFooter())},a.prototype.getHeader=function(){return this.documentServices.siteSegments.getHeader()},a.prototype.getDesktopHeader=function(){return this.getDesktopComponent(this.getHeader())},a.prototype.getMobileHeader=function(){return this.getMobileComponent(this.getHeader())},a.prototype.getChildren=function(a){return this.documentServices.components.getChildren(a)},a.prototype.getDesktopChildren=function(a){return this.getChildren(this.getDesktopComponent(a))},a.prototype.getMobileChildren=function(a){return this.getChildren(this.getMobileComponent(a))},a.prototype.getLayout=function(a){return this.documentServices.components.layout.get(a)},a.prototype.getMobileLayout=function(a){return this.getLayout(this.getMobileComponent(a))},a.prototype.isMobileRef=function(a){return"MOBILE"===a.type},a.prototype.updateLayout=function(a,b){if(this.flags.renderedModel){var c=["width","height","x","y","scale","rotationInDegrees","fixedPosition","bounding"],d=_.pick(b,c);return this.documentServices.components.layout.update(a,d)}return this.documentServices.components.layout.update(a,b)},a.prototype.updateAndAdjustLayout=function(a,b){return this.documentServices.components.layout.updateAndAdjustLayout(a,b)},a.prototype.updateProps=function(a,b){this.documentServices.components.properties.update(a,b)},a.prototype.forkMobileProps=function(a){this.documentServices.components.properties.mobile.fork(a)},a.prototype.isMobilePropsForked=function(a){return this.doesComponentExistByRef(a)&&this.documentServices.components.properties.mobile.isForked(a)},a.prototype.getMobileFontSize=function(a){return this.documentServices.mobile.text.implicitFontSize(a)},a.prototype.serializeComponent=function(a){return a&&this.documentServices.components.serialize(a)},a.prototype.updateComponent=function(a,b){if(b.data&&this.documentServices.components.data.update(a,b.data),b.props&&this.updateProps(a,b.props),b.design&&this.documentServices.components.design.update(a,b.design),b.styleDef){var c=b.styleDef.styleId||this.createCustomStyle(b.styleDef);this.documentServices.components.style.setId(a,c)}b.layout&&this.updateLayout(a,b.layout),b.behaviors&&(this.removeAnimations(a,"bgScrub"),b.behaviors.items&&b.behaviors.items.length>0&&this.setAnimation(a,b.behaviors.items[b.behaviors.items.length-1]))},a.prototype.setLayoutDock=function(a,b){return b=b||{left:{vw:0,px:0},right:{vw:0,px:0}},this.documentServices.components.layout.setDock(a,b)},a.prototype.getContainer=function(a){return this.documentServices.components.getContainer(a)},a.prototype.setContainer=function(a,b){this.documentServices.components.setContainer(a,b)},a.prototype.moveToIndex=function(a,b){this.documentServices.components.arrangement.moveToIndex(a,b)},a.prototype.groupComponents=function(a){return this.documentServices.components.groupComponents(a)},a.prototype.getComponentStyleId=function(a){return this.documentServices.components.style.getId(a)},a.prototype.setComponentStyleId=function(a,b){return this.documentServices.components.style.setId(a,b)},a.prototype.previewSetAnimations=function(a,b){var c=this,d=this.documentServices.components.behaviors.get(a);d&&d.length>0&&d.forEach(function(d){b&&d.action!==b||c.documentServices.components.behaviors.previewAnimation(a,d)})},a.prototype.previewAllSetAnimations=function(a,b){var c=this;this.previewSetAnimations(a,b);var d=this.getChildren(a);d.length>0&&d.forEach(function(a){c.previewAllSetAnimations(a,b)})},a.prototype.previewAnimation=function(a,b){return this.documentServices.components.behaviors.previewAnimation(a,b)},a.prototype.transitionInOut=function(a,b,c){var d=this;if(!b[0]&&!a[0])return this.$p.when();var e=this.$p.defer();return this.documentServices.components.behaviors.previewTransition(b,a,{name:c.type,duration:1,params:{callbacks:{onComplete:function(){b.forEach(function(a){var b=d.previewService.getElementByCompRef(a);b&&(b.style.visibility="hidden")}),e.resolve()}}}}),e.promise},a.prototype.stopPreviewAnimation=function(a){this.documentServices.components.behaviors.stopPreviewAnimation(a)},a.prototype.removeAnimations=function(a,b){this.documentServices.components.behaviors.remove(a,void 0,b)},a.prototype.removeAllAnimations=function(a,b){var c=this;this.removeAnimations(a,b);var d=this.getChildren(a);d.length>0&&d.forEach(function(a){c.removeAllAnimations(a,b)})},a.prototype.setAnimation=function(a,b){this.isComponentAnimatable(a)&&this.documentServices.components.behaviors.update(a,b)},a.prototype.executeBehavior=function(a,b,c){documentServices.components.behaviors.execute(a,b,c)},a.prototype.setAllAnimations=function(a,b){var c=this;this.setAnimation(a,b);var d=this.getChildren(a);d.length>0&&d.forEach(function(a){c.setAllAnimations(a,b)})},a.prototype.isComponentAnimatable=function(a){return!!a&&this.documentServices.components.is.animatable(a)},a.prototype.getSiteStructure=function(){return this.documentServices.siteSegments.getSiteStructure()},a.prototype.addMenuLinkItem=function(a,b,c){return this.documentServices.mainMenu.addLinkItem(a,b,c)},a.prototype.removeMenuItem=function(a){this.documentServices.mainMenu.removeItem(a)},a.prototype.moveMenuItem=function(a,b,c){this.documentServices.mainMenu.moveItem(a,b,c)},a.prototype.isMenuItemRemovable=function(a){return this.documentServices.mainMenu.isItemRemovable(a)},a.prototype.setMenuItemLabel=function(a,b){this.documentServices.mainMenu.setItemLabel(a,b)},a.prototype.updateMenuLinkItem=function(a,b){this.documentServices.mainMenu.updateLinkItem(a,b)},a.prototype.getMenuItems=function(){return this.documentServices.mainMenu.getMenu()},a.prototype.getDsSaveErros=function(){return this.documentServices.errors.save},a.prototype.validateSeoTitle=function(a){return this.documentServices.seo.title.validate(a).success},a.prototype.validateSeoDescription=function(a){return this.documentServices.seo.description.validate(a).success},a.prototype.rangeOfWords=function(a){var b=a&&a.split(/\W+/);return!_.isUndefined(b)&&b.length>=0&&b.length<=10},a.prototype.validateSeoKeywords=function(a){return this.documentServices.seo.keywords.validate(a).success&&this.rangeOfWords(a)},a.prototype.getValidPageUriSEO=function(a,b){return this.documentServices.pages.data.pageUriSEO.getValid(a,b)},a.prototype.convertPageNameToUrl=function(a){return this.documentServices.pages.data.pageUriSEO.convertPageNameToUrl(a)},a.prototype.setSeoTitle=function(a){this.documentServices.seo.title.set(a)},a.prototype.getValidSeoTitle=function(b){return this.validateSeoTitle(b)?b:b.replace(a.SEO_VALIDATIONS_REGEX.HTML_CHARS,"").substring(0,a.SEO_VALIDATIONS.TITLE_MAX_LENGTH)},a.prototype.getValidSeoDescription=function(b){return this.validateSeoDescription(b)?b:b.replace(a.SEO_VALIDATIONS_REGEX.HTML_CHARS,"").substring(0,a.SEO_VALIDATIONS.DESCRIPTION_MAX_LENGTH)},a.prototype.getValidSeoKeywords=function(b){return this.validateSeoKeywords(b)?b:b.replace(a.SEO_VALIDATIONS_REGEX.KEYWORD_CHARS,"").substring(0,a.SEO_VALIDATIONS.KEYWORDS_MAX_LENGTH)},a.prototype.getStyleDefinitionByComp=function(a){var b=this.getComponentStyleId(a);return this.getStyleDefinition(b)},a.prototype.moveHeaderToFront=function(){var a=this.getPartContainer("header"),b=this.getArrangement();b.canMoveForward(a)&&b.moveToFront(a)},a.prototype.getStyleDefinition=function(a){return this.documentServices.theme.styles.get(a)},a.prototype.getAllFonts=function(){return this.documentServices.theme.fonts.getAll()},a.prototype.createCustomStyle=function(a){return this.documentServices.theme.styles.createItem(a)},a.prototype.updateStyle=function(a,b,c){var d=this.createStyle(a,b,c);return this.documentServices.theme.styles.update(a,d)},a.prototype.updateStyleByStyleIdAndData=function(a,b){return this.documentServices.theme.styles.update(a,b)},a.prototype.updateFonts=function(a){this.documentServices.theme.fonts.update(a)},a.prototype.updateColors=function(a){this.documentServices.theme.colors.update(a)},a.prototype.useSimpleTimeoutToDeferQueue=function(){this.documentServices&&this.documentServices.useSimpleTimeoutToDeferQueue&&this.documentServices.useSimpleTimeoutToDeferQueue()},a.prototype.useAnimationFrameToDeferQueue=function(){this.documentServices&&this.documentServices.useAnimationFrameToDeferQueue&&this.documentServices.useAnimationFrameToDeferQueue()},a.prototype.activateSantaRender=function(){this.flags.initRenderPerf&&this.documentServices.enableRenderPage()},a.prototype.setEditorToMobileMode=function(){var a=this;return this.documentServices.viewMode.set("MOBILE"),this.previewService.waitForChanges().then(function(){a.setEditorMode(!1)})},a.prototype.setEditorMode=function(a){void 0===a&&(a=!1),this.documentServices.documentMode.enableAction("screenIn",a),this.documentServices.documentMode.enableAction("load",!0),this.documentServices.documentMode.enableAction("modeChange",a),this.documentServices.documentMode.enableAction("exit",a),this.documentServices.documentMode.enableAction("bgScrub",a),this.documentServices.documentMode.enableAction("pageTransition",a),this.documentServices.documentMode.enableBgVideoAutoplay(a)},a.prototype.setEditorToDesktopMode=function(a){var b=this;return this.documentServices.viewMode.set("DESKTOP"),this.previewService.waitForChanges().then(function(){b.setEditorMode(a)})},a.prototype.updateComponentContent=function(a,b){this.documentServices.components.data.update(this.applicationParameters.isInMobileEditMode()?this.getMobileComponent(a):a,b),this.save()},a.prototype.getSiteScroll=function(){return this.documentServices.site.getScroll()},a.prototype.getArrangement=function(){return this.documentServices.components.arrangement},a.prototype.unsetLayoutDock=function(a){this.documentServices.components.layout.unDock(a)},a.prototype.getDefaultLayout=function(a,b){return this.documentServices.tpa.app.getDefaultLayout(a,b)},a.prototype.getSectionsToAutoInstallWidgetData=function(a){return this.documentServices.tpa.app.getSectionsToAutoInstallWidgetData&&this.documentServices.tpa.app.getSectionsToAutoInstallWidgetData(a)},a}();DocumentServicesMediator.SITE_CHANGES_DEBOUNCE=1e3,DocumentServicesMediator.SEO_VALIDATIONS_REGEX={HTML_CHARS:/[<>]/g,KEYWORD_CHARS:/[!#$%^&()+=\]\[}{";:\/><~]/g},DocumentServicesMediator.SEO_VALIDATIONS={TITLE_MAX_LENGTH:70,DESCRIPTION_MAX_LENGTH:160,KEYWORDS_MAX_LENGTH:250},DocumentServicesMediator.GENERAL_VALIDATIONS={PAGE_NAME_MAX_LENGTH:100,MAX_MEDIA_TITLE_LENGTH:100,MAX_MEDIA_DESCRIPTION_LENGTH:1200},angular.module("siteGeneratorStaticsCoreAppInternal").service("documentServicesMediator",DocumentServicesMediator),angular.module("siteGeneratorStaticsCoreAppInternal").factory("screenCaptureService",["$q","$timeout",function(a,b){function c(a,g,h,i,j,k){if(!h){h=document.createElement("canvas");var l=_.sum(a,function(a){return a.offsetHeight+20})-20;d={width:960*f+"px",height:l*f+"px"},angular.element(h).css(d).attr(d)}var m=a.pop(),n=g.pop();-1!==n&&(m=n),b(function(){try{j=j||{useCORS:!0,logging:!1,allowTaint:!1,whiteList:"wixstatic",onrendered:function(b){var d=m.offsetHeight;if(angular.element(b).css({width:960*f+"px",height:d*f+"px"}),h.getContext("2d").drawImage(b,0,k,960*f,d*f),k+=(d+20)*f,a.length)c(a,g,h,i,j,k);else{var l=e.convertToImage(h);angular.element(h).remove(),i.resolve(l)}}},html2canvas(angular.element(m),j)}catch(b){i.reject()}},1e3)}var d,e=function(){function a(a,b,c){var d=a.width,e=a.height;void 0===b&&(b=d),void 0===c&&(c=e);var f=document.createElement("canvas"),g=f.getContext("2d");return f.width=b,f.height=c,g.drawImage(a,0,0,d,e,0,0,b,c),f}function b(b,c,d,e){return b=a(b,d,e),b.toDataURL(c)}var c=function(){var a=document.createElement("canvas"),b=a.getContext("2d");return{canvas:!!b,imageData:!!b.getImageData,dataURL:!!a.toDataURL,btoa:!!window.btoa}}(),d=function(a,d,e,f){if(c.canvas&&c.dataURL){"string"==typeof a&&(a=document.getElementById(a));var g=b(a,f,d,e);return g}};return{convertToImage:function(a,b,c){return d(a,b,c,"png")}}}(),f=.5,g={grabMultipleElements:function(b,d){var e=a.defer();return c(b,d,void 0,e,void 0,0),e.promise},grabElement:function(c){var d=a.defer();return b(function(){try{html2canvas(angular.element(c),{useCORS:!0,logging:!1,allowTaint:!1,whiteList:"wixstatic",onrendered:function(a){d.resolve(e.convertToImage(a))}})}catch(a){d.reject()}},1e3),d.promise}};return g}]);var Segment=function(){function a(a,b,c,d,e,f,g,h,i,j,k,l,m,n,o,p,q,r,s,t,u){this.data=a,this.HeaderLayoutElement=b,this.heightMutations=c,this.solutionStatusCodes=d,this.modelTree=e,this.$log=f,this.mediaOverride=g,this.selections=h,this.$p=i,this.toasterService=j,this.componentStyles=k,this.LayoutElement=l,this.SmartLayoutElement=m,this.designKit=n,this.applicationParameters=o,this.cropFaceService=p,this.flags=q,this.errorReportService=r,this.layoutDecoration=s,
this.LayoutUtils=t,this.columnService=u,this.contentElement=a.contentElement,this.forContent=a.forContent,this.height=a.height,this.left=a.left,this.node=a.node,this.top=a.top,this.width=a.width,this.page=a.page,this.partitionIndex=a.partitionIndex,this._zigZagVersion={},this.heightMutationsArr=this.heightMutations.heightMutations,this.renderedComponents=[],this.isMobile=a.isMobile}return a.$inject=["data","HeaderLayoutElement","heightMutations","solutionStatusCodes","modelTree","$log","mediaOverride","selections","$p","toasterService","componentStyles","LayoutElement","SmartLayoutElement","designKit","applicationParameters","cropFaceService","flags","errorReportService","layoutDecoration","LayoutUtils","columnService"],a.prototype.isValidIndexArr=function(a,b){return _.isNumber(a)&&a>=0&&b>a},a.prototype.revalidateMediaOverrides=function(){var a=this;if(!this.isMobile){var b=this.getLENoError();b&&b.recurseLayouts(function(c){b.isMediaLayout(c)&&a.mediaOverride.revalidate(b,c,a)})}},a.prototype.faceDetectionAutoCrop=function(){var a=this.getLENoError(),b=a&&a.getLayoutBySubType("image"),c=a&&b&&a.getArgValue(b.argIndex)[0];if(c&&!this.node.getCropOfImage(b.argIndex,c.relativeUri,b)){var d=_.get(c,"fileInput.face"),e=d&&d.length;if(e){var f=0,g=!1,h=["TeamMember","Testimonial","Quote","Welcome"].indexOf(this.contentElement.type)>=0,i=_.some(c.fileInput.face.filter(function(a){return a.height*a.width>c.height*c.width/2})),j=this.getLE().getLayoutBySubType("image").width;return h||i?this.node.isListItem?(f=1,g=!0):1===e&&940>j?(f=1,g=!0):(f=2,g=!1):(f=2,g=!1),this.autoCrop(f,!g,!0,c)}var k=a.getLayoutSelectionStore().getImageStretch(a.containingSegment,a),l=this.node.getClosestCrop(b.argIndex,c.relativeUri,b);if(l&&l.data){var m={height:b.height,width:b.width},n={width:l.width,height:l.height};k&&(m.height+=k.top+k.bottom,m.width+=k.left+k.right,n.width+=k.left+k.right,n.height+=k.top+k.bottom);var o=this.cropFaceService.cropBasedOnAnotherCrop(m,n,l.data,c);this.$log.info("Reusing crop for - node:",this.node,"oldViewport:",n,"newViewport:",m,"closestCrop:",l.data,"newCrop:",o),this.node.setCropData(b.argIndex,c.relativeUri,b,o)}}},a.prototype.autoCrop=function(a,b,c,d){void 0===c&&(c=!1);var e,f=[];if(!this.node.isListFooter()&&!this.node.isListHeader()){var g=this.getLENoError(),h=g&&g.getLayoutBySubType("image"),i=_.get(d,"fileInput.face[0]");if(h&&i){var j=this.cropFaceService.combineFaces(_.get(d,"fileInput.face")),k=g.getLayoutSelectionStore().getImageStretch(g.containingSegment,g),l={height:h.height,width:h.width};k&&(l.height+=k.top+k.bottom,l.width+=k.left+k.right),0===a?e=this.cropFaceService.cropFaceMinAlpha(l,d,j):1===a?e=this.cropFaceService.cropFaceCustomAlpha(l,d,j,b):2===a&&(e=this.cropFaceService.cropFaceMaxAlpha(l,d,j,b));var m=!0;return this.node.setCropData(h.argIndex,d.relativeUri,h,e,m),this.flags.suggestLayoutChange&&(e.errors.length>0&&_.extend(f,e.errors),_.extend(f,this.checkForLayoutErrors(g,h,l,e,j))),c||this.reRender(),this.flags.debug&&(this.$log.info("Segment ran autoCrop on image","\nFaces found:",d.fileInput.face,"\nCombined faces:",this.cropFaceService.combineFaces(d.fileInput.face),"\nSegment:",this,"\nViewport:",l,"\nAlpha:",a,"\nCrop:",this.node.getCropOfImage(h.argIndex,d.relativeUri,h),"\nImage Layout:",h),this.$log.info("Errors: ",f)),f}}},a.prototype.alignStripImage=function(){if(this.shouldAlignImage()){var a=this.node&&this.node.contentElement,b=a&&a.getValuesByMediaType(),c=b&&b.image&&b.image[0];if(!c)return;var d=this.node.getAlignment(c.relativeUri),e=d||this.cropFaceService.getAlignmentByFacePosition(c);e&&this.setAlignment(e)}},a.prototype.checkForLayoutErrors=function(a,b,c,d,e){var f=d.width/c.width,g=this.cropFaceService.getFaceCoordinatesInCrop(d,e),h={height:g.height/f,width:g.width/f,x:g.x/f,y:g.y/f},i=[],j={x:b.absoluteLeft,y:b.absoluteTop},k=a.getLayoutSelectionStore().getImageStretch(this,a);k&&(j.x-=k.left,j.y-=k.top);var l={x:j.x+h.x,y:j.y+h.y,width:h.width,height:h.height},m=this.layoutDecoration.getOverlappingElementsInRectangle(a,l);return _.some(m,function(b){var c=a.layout[b];return"media"!==c.type&&"image"!==c.subType})&&i.push("there are elements on top of face"),i},a.prototype.getMediaOverrides=function(){var a=this.getLENoError(),b=a&&a.getMediaLayout(),c=b&&this.mediaOverride.getGallery(a,b,this);return c},a.prototype.setMediaOverrides=function(a){var b=this.getLE(),c=b&&b.getMediaLayout();a&&this.mediaOverride.setGallery(b,c,this,a)},a.prototype.getAlignment=function(){var a=this.getMediaOverrides();return this.selections.getForNode(this.node).alignment||a&&a.properties.alignType||"center"},a.prototype.setAlignment=function(a){this.selections.getForNode(this.node).alignment=a},a.prototype.updateAlignment=function(a,b){this.setAlignment(b),this.node.setAlignment(a,b,!0)},a.prototype.shouldAlignImage=function(){return this.hasStripImage()||this.hasColumnWithMediaBackground()},a.prototype.canChangeScrollType=function(){return this.hasStripImage()},a.prototype.updateScrollType=function(a){var b=this.getMediaOverrides();b&&(b.properties.scrollType=b.sourceProperties.scrollType=a,this.setMediaOverrides(b))},a.prototype.hasStripImage=function(){var a=this.getMediaOverrides();return a&&"Strip Image"===a.name},a.prototype.hasColumnWithAnyBackground=function(){var a=this;if(this.containingLG.isDirty)return!1;var b=this.containingLG.renderedColumns||this.containingLG.columns,c=_.findIndex(b,function(b){return b.segment===a&&b.currentSettings&&!!b.currentSettings.backgroundMode});return c>=0&&!!this.columnService.createColumnBackground(b[c])},a.prototype.hasColumnWithColorBackground=function(){var a=this;if(this.containingLG.isDirty)return!1;var b=this.containingLG.renderedColumns||this.containingLG.columns,c=_.findIndex(b,function(b){return b.segment===a&&b.currentSettings&&!!b.currentSettings.backgroundMode});return c>=0&&!!_.get(this.columnService.createColumnBackground(b[c]),"color")},a.prototype.hasColumnWithMediaBackground=function(a){var b=this;if(void 0===a&&(a=!1),!a&&this.containingLG.isDirty)return!1;var c=this.containingLG.renderedColumns||this.containingLG.columns,d=_.findIndex(c,function(a){return a.segment===b&&a.currentSettings&&!!a.currentSettings.backgroundMode});return d>=0&&this.columnService.hasMediaBackground(c,d,this.containingLG)},a.prototype.getLayoutDataFromPreset=function(a){return this.LayoutUtils.getLayoutDataFromPreset(a,this.width)},a.prototype.calculateSegmentStatus=function(a,b){var c=this,d={},e=this.getLayoutSelectionStore().getLESelectionArr(this.getPageDescriptor(),this,!0);e&&(e=e.slice().reverse());var f=this.getSegBrothers();_.each(f,function(a){a.contentElement.extractCeFields(a.containingLG.allContentElements)});var g=!this.prevHeight||this.prevHeight>this.height||this.contentElement.ceFieldsChanged();this.prevHeight=this.height,this.contentElement.updatePrevCeFields();var h=_.sortBy(this.optionalLayoutElements,function(a){return-_.indexOf(e,a.id)});return this.setOverrides(),_.allPromises(h,function(e){return e.cluster&&d[e.cluster]&&e.cluster!==c.clusterExpanded?(e.active=!1,!0):e.calculateLayoutElementStatus(c.contentElement,a,b,g).then(function(){return e.mutation?!1:(e.solutionStatus===c.solutionStatusCodes.pass&&e.cluster&&(d[e.cluster]?e.active=!1:(d[e.cluster]=!0,e.active=!0)),!0)})}).then(function(){return _.any(c.optionalLayoutElements,function(a){return a.isPassing()})})},a.prototype.isHeightValid=function(a){return!!this.heightMutationsArr[a]},a.prototype.cloneOptionalLayoutElements=function(a){var b=this,c=this.getLayoutSelectionStore().getSegLayoutElements(this);1!==this.containingLG.segments.length&&c&&c.length&&c[0].wantedArgs===this.contentElement.getWantedArgs()?(this.optionalLayoutElements=_.map(c[0].layoutElements,function(a){var c=a.shallowClone();return c.setLGContainer(b.containingLG),c.setSegContainer(b),Object.seal(c),c}),this.getLayoutSelectionStore().setSegLayoutElements(this,this.optionalLayoutElements)):(this.optionalLayoutElements=_.map(a,function(a){var c=new b.LayoutElement(a,a.solutionStatus,!0,a.editMode);return c.needsFirstTimeInit=!0,c.setLGContainer(b.containingLG),c.setSegContainer(b),c}),this.containingLG.segments.length>1&&this.getLayoutSelectionStore().setSegLayoutElements(this,this.optionalLayoutElements,!0))},a.prototype.changeSegmentHeight=function(a,b){var c=this;return this.containingLG.isHeader()?!1:(b||this.selectedHeightMutation!==a)&&this.isValidIndexArr(a,this.heightMutationsArr.length)?(a=a||0,this.selectedHeightMutation=a,this.height=parseInt(this.heightMutationsArr[this.selectedHeightMutation],10),_.each(this.optionalLayoutElements,function(a){a.passingHeight&&c.height>=a.passingHeight&&c.height<a.height&&a.reset()}),!0):!1},a.prototype.chooseLayoutElementOptionByIndex=function(a,b){var c=this.getLE(a,!0);if(c&&c.getSolutionStatus()===this.solutionStatusCodes.pass){var d=this.getLE(void 0,!0);d&&c.cluster&&c.cluster===d.cluster&&(d.active=!1),this.clusterExpanded!==c.cluster&&(this.clusterExpanded=-1),c.active=!0,b&&((c.structure||this.containingLG.isHeader())&&this.getLayoutSelectionStore().setPreferredLayoutData(this,c.getLayoutData()),this.getLayoutSelectionStore().setManualLESelection(this.getPageDescriptor(),this,c.id)),this.getLayoutSelectionStore().setLESelection(this.getPageDescriptor(),this,c.id)}},a.prototype.chooseLayoutElementOptionAndChangeHeight=function(a){var b=this,c=_.findIndex(this.optionalLayoutElements,{id:a}),d=this.getLENoError(c);if(d&&d.isPassing()){if(d.isValidForHeight())return this.chooseLayoutElementOptionById(a,!0),this.$p.when(!0);var e=this.containingLG.segments.indexOf(this);return this.containingLG.tryToChangeSegHeight(e,d.height).then(function(c){return c&&b.chooseLayoutElementOptionById(a,!0),c})}return this.$p.when(!1)},a.prototype.chooseLayoutElementOptionById=function(a,b){var c=_.findIndex(this.optionalLayoutElements,{id:a});return this.chooseLayoutElementOptionByIndex(c,b)},a.prototype.checkLEbyIndex=function(a){var b=this.getLE(a);if(!b)return!1;var c=this.clusterExpanded>=0?b.cluster===this.clusterExpanded:!b.cluster||b.active;return c&&b.isValidForHeight()},a.prototype.chooseNextlayoutElementOption=function(a,b){if(0!==this.optionalLayoutElements.length){var c=isNaN(this.selectedOption)?-1:this.selectedOption,d=this.optionalLayoutElements.length,e=this.optionalLayoutElements.length,f=a?1:-1;do c+=f,c=(c+e)%e,d--;while(d>0&&!this.checkLEbyIndex(c));this.checkLEbyIndex(c)?this.chooseLayoutElementOptionByIndex(c,b):this.selectedOption=0}},a.prototype.getLE=function(a,b){return void 0===a&&(a=void 0),void 0===b&&(b=!1),void 0===a&&(a=this.selectedOption),this.optionalLayoutElements&&this.optionalLayoutElements[a]?this.optionalLayoutElements[a]:void(b||this.$log.error("seg.getLE: leArr is undefined. seg type : "+this.contentElement.type))},a.prototype.getLENoError=function(a){return void 0===a&&(a=void 0),this.getLE(a,!0)},a.prototype.getLEByID=function(a){return _.find(this.optionalLayoutElements,{id:a})},a.prototype.getPageDescriptor=function(){return this.node&&this.node.crossPageConnected?"general":this.getPortfolioPageDescriptor()||this.page||this.sitePart},a.prototype.findIdentifyingNode=function(){return this.modelTree.findIdentifyingNode(this.node)},a.prototype.findIdentifyingNodeId=function(){return this.modelTree.findIdentifyingNodeId(this.node)},a.prototype.getTypeForLSSWithoutNodeIdAndPartition=function(){return this.modelTree.getTypeForLSS(this.node)},a.prototype.getTypeForLSSWithoutNodeId=function(){if(!this._typeForLSSWithoutNodeId){var a=this.getTypeForLSSWithoutNodeIdAndPartition();this._typeForLSSWithoutNodeId=a+"|"+(void 0!==this.partitionIndex?this.partitionIndex:-1)}return this._typeForLSSWithoutNodeId},a.prototype._zigZagHasChanged=function(a){return void 0===a&&(a=void 0),this.node&&this.node.zigZagVersion!==this._zigZagVersion[a]?(this._zigZagVersion[a]=this.node.zigZagVersion,!0):void 0},a.prototype.getTypeForLSSWithoutPartition=function(a){void 0===a&&(a=!1);var b=this._zigZagHasChanged(!0);if(this._typeForLSSWithoutPartition&&!a&&!b)return this._typeForLSSWithoutPartition;var c=this.getTypeForLSSWithoutNodeIdAndPartition();return c+="|"+_.last(this.findIdentifyingNodeId().split(".")),b&&this.node.zigZag&&(c+="zigzag"),a?c:(this._typeForLSSWithoutPartition=c,this._typeForLSSWithoutPartition)},a.prototype.getTypeForLSS=function(a){void 0===a&&(a=!1);var b=this._zigZagHasChanged();if(this._typeForLSS&&!a&&!b)return this._typeForLSS;var c=this.getTypeForLSSWithoutPartition(a);return c+="|"+(void 0===this.partitionIndex||this.containingLG.isLGrepeater()?-1:this.partitionIndex),a?c:(this._typeForLSS=c,this._typeForLSS)},a.prototype.getPortfolioPageDescriptor=function(){return this.containingLG.getPortfolioPageDescriptor()},a.prototype.getValidLayoutsFirstLEs=function(a){var b=this;return _.filter(this.optionalLayoutElements,function(c){var d=c.getSolutionStatus()===b.solutionStatusCodes.pass;return a?d&&b.getLayoutSelectionStore().isFavorite(c.id):d&&(c.active||!c.cluster)})},a.prototype.leIsFavorite=function(){var a=!0,b=this.getLE(void 0,a);return b?this.getLayoutSelectionStore().isFavorite(b.id):!1},a.prototype.toggleFavoriteLE=function(){var a=this.getLE(void 0,!0);if(!a)return void this.toasterService.error("No valid LE",!0);var b=a.id;this.getLayoutSelectionStore().toggleFavoriteLE(b)},a.prototype.setOverrides=function(){var a=this,b=this.getLayoutSelectionStore().getOverrideMap(),c=this.getTypeForLSSWithoutPartition();_.each(this.optionalLayoutElements,function(d){d=d.getMaster();var e=!!d.overrides&&!!d.overrides.media,f=d.getMediaLayout(),g=f&&a.mediaOverride.getOverrides(f,a,d);(g||b.style[c])&&(d.overrides=d.overrides||{}),g?(d.overrides.media=d.overrides.media||{},d.overrides.media[f.argIndex]=g,e||d.handleOverrides()):d.overrides.media&&delete d.overrides.media[f.argIndex],b.style[c]?d.overrides.style=b.style[c]:delete d.overrides.style,b.extra&&b.extra[c]?d.overrides.extra=b.extra[c]:delete d.overrides.extra})},a.prototype.inflateCluster=function(a,b){var c=this;return void 0===b&&(b=!1),this.$p.resolve().then(function(){return a!==c.clusterExpanded?c.deflateCluster():void 0}).then(function(){return _.sequencePromises(c.optionalLayoutElements,function(d){return d.cluster===a||c.isContact()?d.calculateLayoutElementStatus(c.contentElement,void 0,void 0,b):void 0})}).then(function(){return c.clusterLayouts(a).length>1&&c.clusterExpanded!==a?(c.clusterExpanded=a,c.getLayoutSelectionStore().inflateCluster(c.getPageDescriptor(),c.getTypeForLSS(),a)):void 0})},a.prototype.deflateCluster=function(){return this.clusterExpanded>=0?(this.clusterExpanded=-1,this.getLayoutSelectionStore().deflateCluster(this.getPageDescriptor(),this.getTypeForLSS())):this.$p.resolve()},a.prototype.toggleCluster=function(a){return this.clusterExpanded===a?this.deflateCluster():this.inflateCluster(a)},a.prototype.clusterLayouts=function(a){var b=this;return _(this.optionalLayoutElements).filter(function(c){return c&&c.cluster===a&&c.getSolutionStatus()===b.solutionStatusCodes.pass}).value()},a.prototype.clusterCount=function(a){var b=this;return _.filter(this.optionalLayoutElements,function(c){return c&&c.cluster===a&&c.solutionStatus!==b.solutionStatusCodes.fail}).length},a.prototype.getCompOverrides=function(a){var b=a.type,c=a.subType;if("media"===b){var d=this.mediaOverride.getOverrides(a,this,this.getLE());d&&(b=d.superType,c=d.type)}var e=c||b;"image"===e&&(e="media");var f=this.getLayoutSelectionStore().getOverride("style",this),g=a.style;return f&&f[e+this.componentStyles.getDecorationUniqueID(a)]&&(g=f[e+this.componentStyles.getDecorationUniqueID(a)]),{stylesKey:e,type:b,subType:c,styleId:g,mediaType:e,button_invert:f&&f.button_invert}},a.prototype.calculateLeComponents=function(){var a=this,b=[],c=[],d=!1,e=null;if(this.selectedOption>-1){var f=this.getLE(void 0,!0);if(!f)return;d=f.hasAlign,f.recurseLayouts(function(d){var g=a.getCompOverrides(d),h=a.componentStyles.styles[g.stylesKey];f.isMediaLayout(d)?(null===e&&(e=d),b.push(d)):h&&h.length>1&&c.push(d)})}else d=!1;return c=_(c).filter(function(a){return"structure"!==a.containerRole}).sortBy("type").value(),c.push.apply(c,b),{leComponents:c,firstMediaLayout:e,leHasVAlign:d}},a.prototype.hasStyles=function(a){var b=this.getCompOverrides(a),c=this.componentStyles.styles[b.stylesKey];return!!c&&c.length>1},a.prototype.getStyleIndex=function(a){var b=this.getCompOverrides(a),c=this.componentStyles.styles[b.stylesKey];return c?c.indexOf(b.styleId):void 0},a.prototype.changeStyle=function(a,b,c){var d=this.getCompOverrides(a);if(c)this.getLayoutSelectionStore().setOverride("style",this,c,!d[c]);else{var e=this.componentStyles.styles[d.stylesKey],f=e.indexOf(d.styleId);f=(f+e.length+(b?-1:1))%e.length,this.getLayoutSelectionStore().setOverride("style",this,d.stylesKey+this.componentStyles.getDecorationUniqueID(a),e[f])}this.getLayoutSelectionStore().markForRenderByPageAndLayoutElement(this.getPageDescriptor(),this,this.getLE().id)},a.prototype.setComponentCustomColor=function(a,b,c){this.designKit.setComponentCustomColor(this,this.getOverrideKey(a)+c,b)},a.prototype.getComponentCustomColor=function(a,b){return this.designKit.getComponentCustomColor(this,this.getOverrideKey(a)+b)},a.prototype.getOverrideKey=function(a){var b=this.getCompOverrides(a);return b.stylesKey+this.componentStyles.getDecorationUniqueID(a)},a.prototype.isSelectedLE=function(a){var b=this.getLENoError();return b&&b.id===a.id},a.prototype.getSegBrothers=function(){var a=this;return _.filter(this.containingLG.segments,function(b){return b.width===a.width&&b.getTypeForLSS()===a.getTypeForLSS()})},a.prototype.reset=function(){_(this.optionalLayoutElements).reject({solutionStatus:this.solutionStatusCodes.unknown}).each(function(a){a.reset()})},a.prototype.minPassingHeight=function(){return _(this.optionalLayoutElements).filter({solutionStatus:this.solutionStatusCodes.pass}).map("passingHeight").min()},a.prototype.getRenderedHeight=function(){return this.rendererHeight||this.height},a.prototype.getLayoutSelectionStore=function(){return this.containingLG.getLayoutSelectionStore()},a.prototype.reRender=function(){var a=this.getLayoutSelectionStore(),b=a.getCallbacksForSegment(this.page,this);return b.callback()},a.prototype.isAggregator=function(){return this.contentElement&&this.contentElement.aggregator},a.prototype.addContentElementItemToAggregator=function(a,b){if(!this.isAggregator()||!this.contentElement.ceArray)throw"Wrong use of aggregator";var c=this.contentElement.ceArray;b||(b=c.length,"ListFooter"===_.last(c).contentElementType&&b--),c.splice(b,0,a)},a.prototype.removeContentElementItemFromAggregator=function(a){if(!this.isAggregator()||!this.contentElement.ceArray||!a)throw"Wrong use of aggregator";var b=this.contentElement.ceArray;"ListHeader"===_.first(b).contentElementType&&a++,b.splice(a,1)},a.prototype.isContact=function(){return this.contentElement&&"Contact"===this.contentElement.type},a.prototype.getSafeId=function(){return this.node?this.node.id:this.sitePart},a.prototype.hasPredefinedLayout=function(a){var b=this.predefinedLayout||this.getLayoutSelectionStore().getPredefinedLayout(this);return b?a&&b.argsSignature!==a?!1:b.width===this.width:!1},a.prototype.setPredefinedLayout=function(a){this.getLayoutSelectionStore().setPredefinedLayout(this,a),this.predefinedLayout=a},a.prototype.setPredefinedOptionalLayoutElement=function(){if(this.predefinedLayout)this.optionalLayoutElements=[this.predefinedLayout];else{var a=this.getLayoutSelectionStore().getPredefinedLayout(this),b=void 0,c=this.containingLG.isHeader();c?(b=new this.HeaderLayoutElement(a.templateId,a.structureSuffix,a.argsSuffix,a.html,a.mode),b.setLGContainer(this.containingLG),b.setSegContainer(this),this.optionalLayoutElements=[b]):(b=this.containingLG.getCleanLayoutElementById(a),this.cloneOptionalLayoutElements([b])),this.predefinedLayout=this.optionalLayoutElements[0]}},a.prototype.setStripGalleryRef=function(a){this.stripGalleryRef=a},a.prototype.updateRenderTime=function(){this._renderTime=(new Date).getTime()},Object.defineProperty(a.prototype,"renderTime",{get:function(){return this._renderTime},enumerable:!0,configurable:!0}),a.prototype.addRenderedComponent=function(a,b){this.renderedComponents.push({layout:a,compRef:b})},a.prototype.getRenderedComponent=function(a){var b=_.find(this.renderedComponents,function(b){return b.layout.type===a.type&&b.layout.subType===a.subType&&b.layout.containerRole===a.containerRole});return b?b.compRef:void 0},a.prototype.clearRenderedComponents=function(){this.renderedComponents=[]},a.prototype.getRenderedComponents=function(){return this.renderedComponents},a.prototype.setMobileLg=function(a){this.mobileLg=a,a.setDesktopSegment(this)},a.prototype.getDesktopSegment=function(){return this.isMobile?this.containingLG.desktopSegment:this},a}();angular.module("siteGeneratorStaticsCoreAppInternal").factory("segmentFactory",["HeaderLayoutElement","heightMutations","solutionStatusCodes","modelTree","$log","mediaOverride","selections","$p","toasterService","componentStyles","LayoutElement","SmartLayoutElement","designKit","applicationParameters","cropFaceService","flags","errorReportService","layoutDecoration","LayoutUtils","columnService",function(a,b,c,d,e,f,g,h,i,j,k,l,m,n,o,p,q,r,s,t){return function(u){return new Segment(u,a,b,c,d,e,f,g,h,i,j,k,l,m,n,o,p,q,r,s,t)}}]),angular.module("siteGeneratorStaticsCoreAppInternal").factory("setTpaContentService",["modelTree","tpaService","$q",function(a,b,c){function d(a){var d=[];return _.forEach(a.categories,function(a){d.push(b.deleteBookingsCategory(a.id))}),c.all(d)}function e(d,e,f){var g,i=[];return f=f||a.getListNodesFromPagesByType("Service"),f=_.uniq(f,"id"),_.each(f,function(a){var c="NULL";if(a.syncWithBooking&&"none"!==a.syncWithBooking){g="group"===a.syncWithBooking,h&&h.contentEditor.dataInsertedToTpaAutomatically(a.id,a.contentElementType,a.alias,a.syncWithBooking,b.getAppIdByType("Bookings"));var d=[];_.each(a.children,function(a){switch(a.contentElementType){case"ListHeader":c=a.contentElement.values.listTitle.value;break;case"Service":if(!a.isUserHidden()){var b=a.contentElement.values,e=a.contentElement.argsMatchingPolicy;d.push({name:e.ServiceName&&b.ServiceName.value,description:e.ServiceDescription&&b.ServiceDescription.value,images:e.ServiceImage&&_.filter(b.ServiceImage.value,function(a){return"image"===a.mediaType})})}}});var e=b.createBookingCategory(c,g).then(function(a){return b.addBookingServices(a,d,g)});i.push(e)}}),c.all(i).then(function(){return b.refreshApp(e)})}function f(a){switch(a){case"Bookings":b.waitUntilBookingsIsReady().then(function(c){c&&b.getBookingBusiness().then(function(b){d(b.data).then(function(){e(b.data,a)})})})}}function g(a){b.waitUntilBookingsIsReady().then(function(c){c&&b.getBookingBusiness().then(function(b){e(b.data,"Bookings",[a])})})}var h,i={addContentToTpa:function(a){return f(a,0)},addSingleServiceToTpa:g,registerWithBiLooger:function(a){h=a}};return i}]),angular.module("siteGeneratorStaticsCoreAppInternal").factory("siteLayoutLoader",["$http","wixAngular","ContentElement","LayoutElement","LayoutGroup","layoutGroups","layoutElementsFetcher","HeaderLayoutElement","designPolicies","storyServices","$q","heightMutations","applicationParameters","$log","headerLayouts","mobileHeaderLayouts","mobileFooterLayouts","footerLayouts","ContactGenerator","modelTree","flags",function(a,b,c,d,e,f,g,h,i,j,k,l,m,n,o,p,q,r,s,t,u){function v(a,b){return a.forContent&&-1!==a.forContent.indexOf(b)||a.aggregationStrategy&&A(b)||-1!==t.getAvailableWidgetsTypes().indexOf(b)&&-1!==a.forContent.indexOf("AnyWidget")||-1!==t.getAvailableTpaTypes().indexOf(b)&&-1!==a.forContent.indexOf("AnyTpaSection")}function w(a){return v(a,"Contact")&&a.generator}function x(a){return!a.columnPartition&&_.all(a.segments,function(b){return b.width===a.segments[0].width})}var y,z={300:{header:p,footer:q},940:{header:o,footer:r}},A=_.memoize(function(a){return a.indexOf("List")>-1&&-1===c.specialListItems.indexOf(a)}),B={centeredMenuUp:4,centeredMenuDown:5,leftLogoCenteredMenuDown:6,leftLogoMenuBaseline:7,leftLogoMenuCenter:8,leftLogoMenuDown:1,leftLogoMenuUp:2},C={editMode:!1,layouts:{},layoutParseObjects:[],layoutGroups:[],loadedScenarios:[],autoGeneratedGroups:{},contactLayoutsForSize:function(){return[]},contactLayoutsForSizeHash:function(a){return a},layoutsForSize:function(){return[]},layoutsForSizeHash:function(a,b){return u.matchingPolicy&&(b=""),a+"|"+b},ensureContactLayoutElements:function(a,b,c){var d=this;c=c||this.layoutsForSize(a,b);var e=_.filter(c,w);if(0===e.length){var f=s.createContactLayouts(this.contactLayoutsForSize(a),b);angular.forEach(f,function(a){d.addToCache(a),d.layouts[a.id]=a})}},internalLayoutsForContentElementTypeAndSize:function(a,b,c,d,e){var f=this;return g.prepareLEsForFetch(c,b,f.registerLEs.bind(f)).then(function(){var g=f.layoutsForSize(c,b);"Contact"===a&&f.ensureContactLayoutElements(c,b,g);var h=g.filter(function(b){return b.sitePartFit(e)&&v(b,a)&&(void 0===d||b.cluster===d)});return _.sortByAll(h,function(a){return a.cluster||1e4},_.property("priority"))})},registerLEs:function(a,b){var c=this;a.forEach(function(a){var e=new d(d.getLayoutData(a),void 0,void 0,c.editMode);if(c.layouts[e.id])n.debug("duplicate le id : "+e.id);else{var f=w(e);f||(c.layouts[e.id]=e),b?(a.le=e,c.layoutParseObjects.push(a)):(e.isOriginalSmartHeight=!0,c.addToCache(e,f))}})},getCleanLayoutElementById:function(a){var b=e.siteLayoutLoader.layouts[a.id];return b||(b=new d(d.getLayoutData(a)),e.siteLayoutLoader.layouts[b.id]=b,e.siteLayoutLoader.addToCache(b)),b},layoutsForHeader:function(a,b,c){function d(b){return _.any(b.split("|"),function(b){return _.contains(a,b)})}var e=z[b][c];return _(e).map(function(c){if(c.required&&!d(c.required))return null;var e=a.join("#").replace(/\s/g,"_"),f=[new h(c.id,c.structure,e,c.html,c.css,b)];return c.modes&&c.modes.length&&(f=_.union(f,_.map(c.modes,function(a){if(a.required&&!d(a.required))return null;var f=a.structure||c.structure+"$"+a.css.replace(/\s/g,"_");return new h(c.id,f,e,c.html,(c.css||"")+" "+a.css,b)}))),f}).flatten().filter(function(b){return b&&b.matchWantedArgs(a)}).sortBy(function(a){return B[a.structureSuffix]||100}).value()},layoutsForContentElementTypeAndSize:function(a,b,c,d,e){var f=this;return _.sequencePromises(d||[void 0],function(d){return f.internalLayoutsForContentElementTypeAndSize(a,b,c,d,e)}).then(function(a){return _.flatten(a)})},expandGeneratorGroup:function(a,b){var c=a.segments.filter(function(a){return!!a.generator})[0];if(c){var d={};angular.copy(a,d),d.segments=d.segments.filter(function(a){return!a.generator});for(var f=d.segments.length?d.segments[0].height:0,g=c.heights,h=c.space,i=c.multiple,j=!c.generator||"h"===c.generator,k=0;k<g.length;k++){var l,n=c.top,o=c.left;l=j?(940-(i-1)*h)/i:c.width;var p=(g[k]-1)*m.gridStep+m.minHeight,q={};angular.copy(d,q);for(var r=0;i>r;r++){var s={};s.forContent=[],angular.copy(c.forContent,s.forContent),s.top=n,s.left=o,s.height=p,s.width=l,j?o=o+l+h:n=n+p+h,q.segments.push(s)}q.name=a.name+" h: "+p,q.sourceName=a.name,q.targetHeight=p+20+(f?f+20:0);var t=new e(q);b(t)}}},addToCache:function(a,b){var c=this.ensureCache(a.width,a.getArgsSignature(),b);c.push(a)},ensureCache:function(a,b,c){var d,e;if(c?(d=this.contactLayoutsForSizeHash(a),e=this.contactLayoutsForSize.cache):(d=this.layoutsForSizeHash(a,b),e=this.layoutsForSize.cache),e.has(d))return e.get(d);var f=[];return e.set(d,f),f},leIsGeneratorContact:w,initialize:function(a){var b=this;return d.prototype.cleanLayouts=this.layouts,y||(y=k.when().then(function(){if(u.mobileEditor){var a=e.createMobileLg();return u.consumerMode?(f.unshift(a),f):[a]}return f}).then(function(a){a.forEach(function(a){var c=e.getLayoutData(a);if("header"===c.sitePart&&(c.sitePart="body"),"footer"!==c.sitePart)if(c.isGenerator)b.expandGeneratorGroup(c,function(a){b.layoutGroups.push(a)});else{var d=new e(c);b.layoutGroups.push(d)}}),u.consumerMode&&(b.layoutGroups=_.filter(b.layoutGroups,x)),b.layoutGroups=b.layoutGroups.concat(e.createPartialSegmentsLG()),b.layoutGroups=b.layoutGroups.concat(_(b.layoutGroups).map(function(a){return a.segmentSignature||(a.segmentSignature=_.fill(new Array(a.segments.length),"1").join("")),!x(a)||2!==a.segmentSignature.length&&3!==a.segmentSignature.length?void 0:e.createAsymmetricSplitLG(a)}).filter().value()),b.expandGeneratorGroup({id:"headerLayoutGroup",isGenerator:!0,targetWidth:940,targetHeight:130,sitePart:"header",segments:[{forContent:["GeneralDescription"],generator:"h",heights:[2],left:0,multiple:1,space:20,top:0}]},function(a){b.headerLayoutGroup=a;var c=ob.deepClone(a);c.segments[0].width=300,c.segments[0].isMobile=!0,b.mobileHeaderLayoutGroup=c})}).then(function(){return g.init(b.registerLEs.bind(b),a,m.onlyLe)})),y}};return C.layoutsForSize=_.memoize(C.layoutsForSize,C.layoutsForSizeHash),C.contactLayoutsForSize=_.memoize(C.contactLayoutsForSize,C.contactLayoutsForSizeHash),C.internalLayoutsForContentElementTypeAndSize=_.memoize(C.internalLayoutsForContentElementTypeAndSize,function(a,b,c,d,e){var f=[a,b,c,d,e];return f.join("|")}),C.findLayoutElementIDFromLayoutElementAndWantedWidth=function(a,b,c,d){var f=a.getLayoutSelectionStore(),g=f.getPreferredLayoutData(b),h=f.calculateFallBackClusterAndStructure(b,g);return e.siteLayoutLoader.layoutsForContentElementTypeAndSize(b.contentElement.type,c.getArgsSignature(),d,void 0,"body").then(function(a){var b=f.findFirstLEofClusterWithMediaWidth(a,h,g,!1,void 0,!0);return b&&b.le})},e.setSiteLayoutLoader(C),C}]),angular.module("siteGeneratorStaticsCoreAppInternal").factory("siteModelData",["ContentElement","VerticalDefaultValues","storyServices","$log","flags",function(a,b,c,d,e){function f(a,b){if(b&&angular.isArray(b)){var c=a.split(".");2===c.length&&b[0]?b=b[0]:c.length>=3&&(b=b[c[c.length-1]]||b[0])}return b}function g(b,c){var d=-1!==a.specialListItems.indexOf(b),e=!!c&&"contentElementList"===c.getNodeType()&&!d,f=c?c.getContentElementType():"";return h(b,e,f,d)}function h(a,b,c,d){return b?c+"List":(d?c+"_":"")+a+"Single"}function i(a,b){var c={};return _.each(a.getKeys(),function(d){var e=a.getFieldValue(d);"GeneralDescription"===a.type&&b?c[d]=["MainEmail","BusinessName","CopyrightMessage"].indexOf(d)>=0:c[d]="media"===e.type||"text"===e.type&&("title"===e.subType||"longText"===e.subType)}),c}function j(c,f,g,i,j){if(e.validateContentElementFields){var k=_.keys(g.values);switch(i){case"GeneralDescription":k.push("Menu");break;case"ListFooter":k.push("ListImage")}var l=_.difference(_.keys(c[f]),k);if(l.length>0){d.warn("found illegal fields in content element: ",i," id: ",f," illegalFields: ",l),_.each(l,function(a){delete c[f][a]});var m,n,o=j.isList();o&&(n="ListFooter"!==i&&"ListHeader"!==i,m=j.contentElementType);var p=b.getDefaultsValuesByVertical("unspecified","unspecified",!1),q=h(i,n,m,-1!==a.specialListItems.indexOf(i)),r=p[q];n&&(r=r[0]);var s=_.difference(_.keys(r),_.keys(c[f]));_.each(s,function(a){c[f][a]=g.values[a],c[f][a].value=ob.deepClone(r[a])})}}}var k={},l={};return{safeId:function(a){return a.replace(/\./g,"_")},getCEForNodeOnboarding:function(b,c,d){var e=new a(b,k[c]?k[c]:l[d]?l[d][c]:void 0);return e.validate()?e:void 0},getCEForNode:function(a,b,d,e){return this.getCEForNodeStudio(a,b,c.story,e)},setCEValuesFromNode:function(a,b){var c=this;if(a.isList())_.each(a.children,function(a){c.setCEValuesFromNode(a,b)});else{var d=this.safeId(a.getId()),e=b.getContentForActiveLocale(),f=a.getContentElement();e[d]=f.values}},getDuplicateCEValues:function(b,c,d,e){var f=new a(b,void 0),g=d.getContentForActiveLocale(),h=this.safeId(c);return f.values=ob.deepClone(e.values),g[h]=f.values,f},getCEForNodeStudio:function(c,e,h,k){var l=new a(c,void 0),m=h.getContentForActiveLocale(),n=this.safeId(e);if(m&&m[n])j(m,n,l,c,k),l.values=m[n];else{m[n]=l.values;var o=b.getDefaultsValuesByVertical(h.vertical,h.subVertical,!1),p=b.getDefaultCheckBoxesValuesByVertical(h.vertical,h.subVertical,!1),q=g(c,k),r=f(e,o[q]),s=f(e,p[q]);
r&&angular.forEach(r,function(a,b){l.values[b]?l.values[b].value=ob.deepClone(a):d.warn('siteModelData.getCEForNodeStudio: property does not exists, key="'+b+'"')}),s=s?_.clone(s):i(l),l.setArgsMatchingPolicy(s)}return l},getDefaultValues:function(a,c,d){var e=b.getDefaultsValuesByVertical(c.vertical,c.subVertical,!1),h=g(a.getContentElementType(),d),i=f(a.getId(),e[h]);return i},getDefaultValuesForCeType:function(c,d,e){var f=b.getDefaultsValuesByVertical("unspecified","unspecified",!1),g=h(c,d,e,-1!==a.specialListItems.indexOf(c));return f[g]},getDefaultCheckBoxesValues:function(a,c,d,e){var h=b.getDefaultCheckBoxesValuesByVertical(c.vertical,c.subVertical,!1,e),j=g(a.getContentElementType(),d),k=f(a.getId(),h[j]);return k||(k=i(a.getContentElement(),e)),k},applyFunctionForEveryCEInAllLocales:function(a){var b=c.story.storyLocales;angular.forEach(b,function(b,c){b.contentElements&&angular.forEach(b.contentElements,function(b){a(b,c)})})}}}]),angular.module("siteGeneratorStaticsCoreAppInternal").factory("SitePartSolutions",["flags","LayoutGroup","solutionStatusCodes","layoutSelectionStoreProvider","$p","Solution","sitePartTypes",function(a,b,c,d,e,f,g){return function(b,h){function i(a){return _.map(a,function(a){return a.getUniqueIdForSolution()})}function j(a){v=i(a)}function k(a){return a.some(function(a){return a.segments.some(function(a){return a.contentElement.aggregator})})}function l(a){return a.some(function(a){return void 0!==a.columnPartition})}function m(a){var b,d,e,f=-1;return v&&a&&a.forEach(function(g,h){var i=g.solution,j=!1,m=!1;if(a[h].status!==c.fail){var n=i.lgBrothers.filter(function(a,b){return j||(j=k(a)),m||(m=l(a)),v.some(function(c){for(var d=0;d<a.length;d++)if(a[d].getUniqueIdForSolution()===c&&"fail"!==a[d].status)return g.changeChosenLg(b,d),!0})}).length;(n>f||!m&&(!j||d)&&n===f&&Math.abs(i.length-v.length)<e)&&(f=n,d=j,b=h,e=Math.abs(i.length-v.length))}}),b}function n(a,b){return a.solution.some(function(a){return a.getUniqueIdForSolution()===b})}function o(a,b){return b.every(function(b){return n(a,b)})}function p(a){return _.sequencePromises(a.solution,function(a){return a.setHeightFromLSS()})}function q(a,b,c,d,e,f,g){if(!g&&e.solution.lgBrothers&&e.solution.lgBrothers[f]&&e.solution.lgBrothers[f].length>e.nextBrotherIndex){var h=e.changeChosenLg(f,e.nextBrotherIndex);return e.nextBrotherIndex+=1,h.setHeightFromLSS(),h.calculateLayoutGroupStatus(b,c,!1,d).then(function(g){q(a,b,c,d,e,f,g)})}return g}function r(a){var b="";return a.forEach(function(a){a.segments.forEach(function(a){a.optionalLayoutElements.forEach(function(a){a.solutionStatus===c.fail&&(b+=a.name+" failed: "+a.solutionFailReason+"; ")})})}),b}function s(a,b,c){if(b===c)return a;a.isAggregator&&(b="List"+b,c="List"+c);var d=_.clone(a,!0);return _.each(d.partitions||d.layouts,function(a){var d=a&&a.selections&&a.selections.overrides;d&&_.each(d,function(a){_.each(_.keys(a),function(d){0===d.indexOf(b)&&(a[d.replace(b,c)]=a[d],delete a[d])})})}),d}this.solutions=[],this.selectedSolution=void 0,this.lockedLgs=[],this.solutionsMap={};var t=[],u=null;this.clear=function(){this.solutions.length=0,this.selectedSolution=void 0,u=null,t=[],this.solutionsMap={}},this.getPage=function(){return b},this.getPageDescriptor=function(){return b||h},this.addNodeData=function(a,b){var c=a.getContentElementType(),d={type:c,ce:a.getContentElement(),node:a,parent:b};b.isFooter()||b.isPage()||"HomePageTeaser"===c||"ListHeader"===c||"ListFooter"===c||"GeneralDescription"===c?t.push(d):b!==u?(t.push([d]),u=b):t[t.length-1].push(d)},this.getNodesData=function(){return t},this.addSolution=function(a){var b;h===g.HEADER&&(this.solutions.length=0),b=new f(a),b.containingSitePartSolutions=this,this.solutions.push(b)},this.sortSolutions=function(){this.solutions.sort(function(a,b){return b.solution.length-a.solution.length}),this.solutions.forEach(function(a,b){a.solution.solutionIndex=b})},this.describeAllSolutions=function(){var a="";return this.solutions?this.solutions.forEach(function(b){a+=b.status+": "+r(b.solution)+" //////"}):a="no solutions",a},this.getSelectedSolution=function(){var a=this.solutions[this.selectedSolution];return a?a.solution:null},this.setSelectedSolution=function(a){var b=this.solutions[this.selectedSolution];b.solution=a},this.getSolutionHeights=function(){var a=this.getSelectedSolution();return a&&a.getHeights()||[]},this.toggleLgLock=function(a){var b=this.lockedLgs.indexOf(a);-1===b?this.lockedLgs.push(a):this.lockedLgs.splice(b,1)},this.getLockedLgs=function(){return this.lockedLgs};var v;this.changeToSimilarSolution=function(){var a=this;v=this.getLayoutSelectionStore().getSolutionUniqueID(this.getPageDescriptor());var b=void 0!==this.forceSelectedSolution?this.forceSelectedSolution:m(this.solutions);return this.forceSelectedSolution=void 0,void 0!==b?this.changeSolutionTo(b).then(function(b){return b&&b.status!==c.pass?a.changeToSimilarSolution():!0}):e.when(!1)},this.changeSolutionFrom=function(a){var b=this;return e.resolve().then(function(){if(a!==b.selectedSolution){b.getLayoutSelectionStore().setSolutionSelection(b.getPageDescriptor(),b.selectedSolution);var c=b.solutions[b.selectedSolution];if(c){var d=c.solution;return j(d),b.getLayoutSelectionStore().setSolutionUniqueID(b.getPageDescriptor(),v),_.sequencePromises(d.lgBrothers,function(a){return _.sequencePromises(a,function(a){return a.setHeightFromLSS(),a.calculateLayoutGroupStatus()})}).then(function(){return c})}}})},this.changeSolutionTo=function(a){var b=this,d=this.selectedSolution;return this.selectedSolution=a,this.solutions[a]&&this.solutions[a].status!==c.pass?this.calculateSingleSolution(this.solutions[a],void 0,void 0,void 0,void 0,void 0,!0).then(function(){return b.changeSolutionFrom(d)}):e.resolve(this.changeSolutionFrom(d))},this.moveToValidSolution=function(a){var b=this;return this.changeToSimilarSolution().then(function(d){if(d)return!0;var e=b.getFilteredSolutions(),f=b.solutions.length;if(void 0!==b.selectedSolution){var g=b.selectedSolution;e=_.drop(e,g).concat(_.take(e,g))}else b.selectedSolution=-1;var h=b.selectedSolution,i=a?1:-1;return _.anyPromises(e,function(a){return h=(h+f+i)%f,a.status===c.unknown?b.cleanCalcSolution(a):a.status===c.pass}).then(function(a){return a?b.changeSolutionTo(h).then(_.constant(a)):a})})},this.solutionInFilter=function(a,b,c){if(b&&c.status!==b)return!1;var d=_.every(this.filters,function(a,b){return a&&-1!==c.filterSignature.indexOf(b)&&-1===c.filterSignature.indexOf(b+a)?!1:!0});return d&&o(c,a)},this.getFilteredSolutions=function(a,b){var c=this,d=_.union(this.lockedLgs,a);return _(this.solutions).filter(function(a){return c.solutionInFilter(d,b,a)}).take(200).value()},this.countValidSolutions=function(){return this.getFilteredSolutions(void 0,c.pass).length},this.firstValidSolution=function(){for(var a=0;a<this.solutions.length&&this.solutions[a].status!==c.pass;)a++;return a},this.cleanCalcSolution=function(a){return a.isDirty=!1,a.status=c.unknown,this.calculateSingleSolution(a)},this.cleanCalcMissingSolutions=function(){var a=this,b=this.getFilteredSolutions();return _.sequencePromises(b,function(b){return b.status===c.unknown||b.isDirty?a.cleanCalcSolution(b):void 0})},this.calculateSingleSolution=function(a,b,d,f,g,h){if(!a.solution||a.solution.length<=0)return a.status=c.fail,e.when(!1);p(a);var i=h?_.sequencePromises:_.allPromises;return i(a.solution,function(e,i){return a.nextBrotherIndex=1,e.calculateLayoutGroupStatus(d,f,!1,g).then(function(c){return g?c:q(b,d,f,g,a,i,c)}).then(function(b){return h&&(b=_.every(b)),a.status=b?c.pass:c.fail,b})})},this.calculateSitePartStatus=function(a,b,c,d){var e=this;this.allContentElements=a;var f,g=this.getFilteredSolutions();void 0!==this.selectedSolution?f=this.selectedSolution:(v=this.getLayoutSelectionStore().getSolutionUniqueID(this.getPageDescriptor()),f=m(this.solutions));var h=this.solutions[f];h&&(_.pull(g,h),g.unshift(h)),this.getPage()&&(v=this.getLayoutSelectionStore().getSolutionUniqueID(this.getPageDescriptor()));var j=!1;return d&&_.each(g,function(a){a.isDirty=!0,_.each(a.solution.lgBrothers,function(a){_.each(a,function(a){a.isDirty=!0})})}),_.sequencePromises(g,function(f){return j?void 0:(f.isDirty=!1,e.calculateSingleSolution(f,a,b,c,d).then(function(e){return d&&f===h?f.calculateAllBrothers(a,b,c,void 0,d):e}).then(function(a){return a&&(j=!0),a}))}).then(function(){_(e.solutions).collect("solution").each(function(a){_.each(a,function(a){delete a.status,a.resetSegMutation()})});var a=e.getSelectedSolution();return a?h&&_.isEqual(i(a),i(h.solution))?void 0:e.changeSolutionFrom(f).then(_.constant(!0)):e.moveToValidSolution()})},this.getLgsOfNode=function(a,b){return _.filter(a,function(a){return a.isHeader()?"GeneralDescription"===b.contentElementType:_.any(a.segments,function(a){return a.findIdentifyingNodeId()===b.id})})},this.applyLayoutPreset=function(b,c,d){function f(a,b){var c=a.id;a.isListHeader()?c+="#header":a.isListFooter()&&(c+="#footer");var d=h[c];return d&&(d[b]||_.findLast(d,function(b){return void 0===b.zigZag||b.zigZag===a.segments[0].node.zigZag}))}var g=this,h=_.reduce(c.groups,function(a,b){var c=b.id;return b.isHeader?c+="#header":b.isFooter&&(c+="#footer"),a[c]=a[c]||[],a[c].push(b),a},{});if(void 0===d){var i=this.getSelectedSolution(),j=this.getLgsOfNode(i,b),k=_.map(_.difference(i,j),function(a){return a.getUniqueIdForSolution()}),l=this.getFilteredSolutions(k),m=_.find(l,function(a){return _.all(g.getLgsOfNode(a.solution,b),function(a){return!!f(a)})});d=m.solution.solutionIndex}if(void 0!==d){var n;return n=d===this.selectedSolution?e.when():this.changeSolutionTo(d),n.then(function(){var d=g.getLgsOfNode(g.getSelectedSolution(),b),h=0;return _.sequencePromises(d,function(d){var g=f(d,d.isSpecialListItem()?0:h++);g=s(g,c.contentType,b.contentElementType);var i=e.when();return a.consumerMode&&!d.isHeader()&&(i=i.then(function(){return _.each(d.segments,function(a,b){var c=g.partitions&&g.partitions[a.partitionIndex]||g.layouts&&g.layouts[b];if(c){var e=a.getLayoutDataFromPreset(c);d.getLayoutSelectionStore().setPreferredLayoutData(a,e),delete a.wantedArgs}}),d.setOptionalLayoutElements()})),i.then(function(){return d.applyLayoutPreset(g)})}).then(function(a){return _(a).flatten().all()})})}return e.reject("Cannot find matching solution for the preset.")},this.getLayoutSelectionStore=function(){return d.getLayoutSelectionStore(this.getPageDescriptor())},this.getSolutionHeight=function(){var a=this.getSelectedSolution(),b=_.reduce(a,function(a,b){return a+b.getBoundingHeight()},0);return h===g.BODY&&(b=Math.max(b,500)),b}}}]),angular.module("siteGeneratorStaticsCoreAppInternal").factory("SmartLayoutElement",["$log","$p","SmartLayoutRuleNode","SmartLayoutRuleUtils","LayoutUtils","applicationParameters","solutionStatusCodes","callInLayout","BoxDecorationTypes",function(a,b,c,d,e,f,g,h,i){function j(a,b){t.dfs(a,function(a,c,d){-1===b(a,c,d)&&(d.cutoff=!0)})}function k(a,b,d,e,f){var g=10*(f+1);a.layoutArray.push(d);var h=new c(d,"top",g,null),i=new c(d,"bottom",g+1,e);a.smartLayoutRulesNodes[f]={top:h,bottom:i};var j=a.getLayoutSubType(d);return a.smartLayoutRulesNodesMap[j]||(a.smartLayoutRulesNodesMap[j]=[]),a.smartLayoutRulesNodesMap[j].push(a.smartLayoutRulesNodes[f]),a.isMediaType(h.component)&&(h.mediaBottomDomParent=e,d.mediaMinHeight||(d.mediaMinHeight=d.height)),l(d)&&a.alignRules.push(a.smartLayoutRulesNodes[f].bottom),i}function l(a){return a.verticalAlign||a.fixedBottom||a.horizontalAlign||a.fixedTop}function m(a){_.forEach(a,function(a){_.forEach(a.component,function(b,c){a.originalComponent[c]=b})})}function n(a,b){var c=a.getLayoutWithArgIndex(b);if(c.mediaDomParent>-1)return c;var d=a.getLayoutParent(c);return d.mediaDomParent>-1?d:void 0}function o(a,b,c){var d=a.structure[0].length;_.each(a.structure[b],function(e,f){var g=b*d+f;if(0!==a.spanHints[g].y&&0!==a.spanHints[g].x){var h=a.getLayoutWithArgIndex(e);h.top=c}})}function p(a,b){var c=_.map(a.structure[b],function(b){return a.getLayoutWithArgIndex(b)}),d=a.structure[0].length,e=_.max(_.filter(c,function(c,e){return b<a.structure.length-1?0!==a.spanHints[(b+1)*d+e].y:!0}),function(a){return a.top+a.height});return e.top+e.height}var q=f.quarterBaseLine,r=function(){};return r.prototype={layoutDiff:function(a){var b;if("Layout Element"===a.type)b=this.smartLayoutRulesNodesMap.LayoutElement.top;else{var c=_.find(this.smartLayoutRulesNodesMap[this.getLayoutSubType(a)],function(b){return b.top.component===a});c&&(b=c.top)}return b.getOffsets().height+(b.component.missingHeight||0)+(b.component.missingTop||0)+(b.component.missingBottom||0)},getColumnDiff:function(a,b){var c=this,d=0,e=this.getLayoutParent(b),f=a.getLayoutOriginalSizes(b),g=f.left,h=f.width;return _.each(e.layout,function(e){f=a.getLayoutOriginalSizes(e);var i=f.left,j=f.width;e!==b&&Math.max(i,g)<Math.min(i+j,g+h)&&(e.top>=b.top+b.height||e.top+e.height<=b.top)&&(d+=c.layoutDiff(e))}),d},checkIfDescendant:function(a,b){if(this.findNode(b))return!1;var c=!1;return j(b,function(b,d,e){a===b&&(e.cutoff=!0,c=!0)}),c},makeChild:function(a,b){b&&a&&(b.parent.children=_.without(b.parent.children,b),a.children.push(b),b.parent=a)},findOrAddNode:function(a){var b=this.findNode(a);b||this.rootNode.children.push(a)},findNode:function(a){var b=!1;return j(this.rootNode,function(c,d,e){a===c&&(e.stop=!0,b=!0)}),b},trySetRule:function(b){var c=b.parentCandidate,d=b;if(c){if(this.findNode(d)){if(this.checkIfDescendant(c,d))return b.parentCandidate=b.parent,!1;this.makeChild(c,d)}else c.children.push(d),d.parent=c;try{this.ensureForest(b.parent)}catch(e){a.debug(this),a.error("I'm my own grandpa!")}}else b.parent&&(b.parent.parent&&b.parent.parent===this.rootNode&&(this.rootNode.children=_.without(this.rootNode.children,b),b.parent.parent=void 0),b.parent.children=_.without(b.parent.children,b),b.parent=void 0,this.hangBottomOnTop());return!0},removeRule:function(a){a.parent&&(a.parent.children=_.without(a.parent.children,a),a.parent=this.rootNode,a.parentCandidate=this.rootNode,this.rootNode.children.push(a),this.hangBottomOnTop())},addRule:function(a){var b,c,d=this.smartLayoutRulesNodesMap[a.parentType],e=this.smartLayoutRulesNodesMap[a.childType];if(1===e.length)b=e[0][a.childFacet];else for(c=0;c<e.length;c++)e[c][a.childFacet].component===a.childComponent&&(b=e[c][a.childFacet]);if(1===d.length)b.parentCandidate=d[0][a.parentFacet];else for(c=0;c<d.length;c++)d[c][a.parentFacet].component===a.parentComponent&&(b.parentCandidate=d[c][a.parentFacet]);return this.trySetRule(b),b},ensureForest:function(a){a!==this.rootNode&&(a.parent?this.ensureForest(a.parent):(a.parent=this.rootNode,this.rootNode.children.push(a)))},fixComponentsAlign:function(a,b,c){angular.forEach(this.alignRules,function(d){d.componentAlignHandler(a,b,c)})},mutate:h(function(a,b,d){var e=_.findIndex(this.layoutArray,{argIndex:a}),f=this.smartLayoutRulesNodes[e];d=d||[],this.mutationCounter=0;var g;g=f.bottom.mutate(this,!1,d,b),d.unshift(g),this.fixComponentsAlign(this,!1,d);var h=_.any(d,function(a){return a.result===c.prototype.mutationResult.failure});if(h)return{result:c.prototype.mutationResult.failure,containerMutation:!1};var i=_.any(d,function(a){return a.result===c.prototype.mutationResult.success});if(!i)return{result:c.prototype.mutationResult.nop,containerMutation:!1};var j=_.any(d,function(a){return a.containerMutation});return j&&this.updateHeightFromNode(),this.generator&&this.postProcessing(),{result:c.prototype.mutationResult.success,containerMutation:j}}),updateHeightFromNode:function(){this.originalHeight||(this.originalHeight=this.height),this.height=this.smartLayoutRulesNodes[this.smartLayoutRulesNodes.length-1].top.component.height},nodesForComponent:function(a,b){return this.smartLayoutRulesNodes[a][b]},nodesForComponentDropDown:function(a){this.smartLayoutRulesNodes||this.initSmartLayoutRules();var b=[],c=this;return this.smartLayoutRulesNodes.forEach(function(d,e){e!==a&&(d.top.description=c.getLayoutSubType(d.top.component)+" top",d.bottom.description=c.getLayoutSubType(d.bottom.component)+" bottom",b.push(d.top),b.push(d.bottom))}),b},indexesForRelativeMediaDropDown:function(a){this.smartLayoutRulesNodes||this.initSmartLayoutRules();var b=[];return this.argList.forEach(function(c,d){d!==a&&"media"===c.type&&b.push(d)}),b},initAlignRules:h(function(){var a=this;this.alignRules=[],angular.forEach(this.layoutArray,function(b,c){l(b)&&a.alignRules.push(a.smartLayoutRulesNodes[c].bottom)})}),mutateByStretching:h(function(b,d,e,f){if(b>this.maxHeight)return!1;this.fakeOriginal(),d=d||[],this.mutationCounter=0;var g;try{g=this.smartLayoutRulesNodes[this.smartLayoutRulesNodes.length-1].bottom.mutate(this,!e,d,b,!0)}catch(h){return a.info("Smart exception in stretch, probably SO. failing this LE:"+this.id+" counter: "+this.mutationCounter+" exception:"+h),{result:c.prototype.mutationResult.failure,containerMutation:!1}}var i=g.result===c.prototype.mutationResult.success;return i?(this.updateHeightFromNode(),this.stretched=!0,f||(this.originalHeight=this.height,angular.forEach(this.smartLayoutRulesNodes,function(a){angular.forEach(a,function(a){angular.forEach(Object.keys(a.component),function(b){a.originalComponent[b]=a.component[b]})})})),this.fixComponentsAlign(this,!0,d),this.generator&&this.postProcessing()):this.resetMutations(this),g}),resetMutations:function(){var a=this;this.height=this.originalHeight||this.height,angular.forEach(this.smartLayoutRulesNodes,function(b){b.top.resetMutation(a,[],!0),b.bottom.resetMutation(a,[],!0)}),this.updateHeightFromNode()},initSmartLayoutRules:h(function(a){if(this.smartLayoutRulesNodes&&this.smartLayoutRulesNodes.length&&!a)return!0;var b={top:0,left:0,height:this.height,width:this.width,type:"Layout Element",isLayoutElement:!0},d=new c(b,"top",null),e=new c(b,"bottom",null);this.rootNode=new c({},"root",null),this.smartLayoutRulesNodes=[],this.smartLayoutRulesNodesMap={},this.alignRules=[];var f=this,g=0;this.layout&&(this.layoutArray=[],this.recurseLayouts(function(a,b){var c=b?f.smartLayoutRulesNodes[b.ruleNodeIndex].bottom:e;return k(f,b?b.height:f.height,a,c,g),a.ruleNodeIndex=g,g++,!1}));var h=10*(g+1);return d.id=h,e.id=h+1,this.smartLayoutRulesNodes[g]={top:d,bottom:e},this.smartLayoutRulesNodesMap.LayoutElement=[this.smartLayoutRulesNodes[g]],this.containerBottomNode=e,this.postInit(),!0}),postInit:function(){var a=this;angular.forEach(this.smartLayoutRulesNodes,function(b){if(b.bottom.component.mediaDomParent>-1&&null!==b.bottom.component.mediaDomParent){var c;a.recurseLayouts(function(a){return a.argIndex===b.bottom.component.mediaDomParent&&"media"===a.type?(c=a,!0):void 0}),c?b.bottom.domParent=a.smartLayoutRulesNodes[a.layoutArray.indexOf(c)].bottom:b.bottom.domParent=a.smartLayoutRulesNodes[b.bottom.component.mediaDomParent].bottom}})},copyTree:function(a,b){var c,d=this;return"root"===a.facet?c=this.rootNode:(c=this.smartLayoutRulesNodes[parseInt(a.id/10)-1][a.facet],c.parent=b,c.parentCandidate=b),c.children=_.map(a.children,function(a){return d.copyTree(a,c)}),c},deserializeTree:function(a){if(a&&a.length){var b=JSON.parse(a),c=this;t.map(b,function(a,b){if("root"===a.facet)return c.rootNode;var d=c.smartLayoutRulesNodes[a.arrayIndex][a.facet];return d.parent=b,d.parentCandidate=b,d})}this.hangBottomOnTop()},hangBottomOnTop:function(){angular.forEach(this.smartLayoutRulesNodes,function(a){a.bottom.parent||(a.bottom.parent=a.top,a.bottom.parentCandidate=a.top,a.top.children.push(a.bottom))})},serializeTree:function(){return JSON.stringify(this.rootNode)},fakeOriginal:h(function(){_.forEach(this.smartLayoutRulesNodes,function(a){m(a)})}),fakeOriginalToSpecificLayoutForSpecificAttribute:h(function(a,b){var c=this.smartLayoutRulesNodes[this.layoutArray.indexOf(a)];_.forEach(c,function(a){a.originalComponent[b]=a.component[b]})}),fakeOriginalToSpecificLayout:h(function(a){var b=this.smartLayoutRulesNodes[this.layoutArray.indexOf(a)];m(b)}),reset:h(function(){var a=this.getCleanLE();this.layout=ob.deepClone(a.layout),this.height=a.height;var b=a.serializeTree();this.initSmartLayoutRules(!0),this.deserializeTree(b),this.passingHeight=0,this.solutionStatus&&(this.solutionStatus=g.unknown),this.decorationTypes="",this.calculateDesignStructure()}),calculateAbsoluteLocations:function(){this.recurseLayouts(function(a,b){a.absoluteLeft=b?b.absoluteLeft+a.left:a.left,a.absoluteTop=b?b.absoluteTop+a.top:a.top})},lastBaseLine:function(a){var b=a.absoluteTop+a.height;return"button"!==a.subType&&(b+=(a.baseLineMargin||0)-(a.lineHeight||0)),b},letterHeight:function(a){return this.firstBaseLine(a)-(a.absoluteTop+(a.topMargin||0))},firstBaseLine:function(a){var b=a.absoluteTop;return"button"!==a.subType&&(b+=a.baseLineMargin||0),b},linePositionArea:function(a,b){var c=this.layoutBaselineDistance(a,b)-10;return c-this.letterHeight(a)},layoutBaselineDistance:function(a,b){var c=this.lastBaseLine(b),d=this.firstBaseLine(a);return d-c},getNeededLineOffset:function(a,b){if(this.isContact())return 0;var c=this,d=0,e=b?"absoluteTop":"top";if(a.designMargin&&(this.calculateAbsoluteLocations(),_.each(a.designMargin,function(b,f){if(f=+f,-1===f)d=Math.max(d,b-a[e]-a.baseLineMargin);else if(-2!==f){var g=c.getLayoutWithArgIndex(f),h=c.layoutBaselineDistance(a,g);d=Math.max(d,b-h)}})),(a[e]+d+(a.baseLineMargin||0))%q!==0){var f=a[e]+d+(a.baseLineMargin||0),g=Math.floor(f/q)*q,h=f-g;d>h?d-=h:d=d-h+q}return d},getMinTopByDesign:function(a){var b=this,c=0;return a.designMargin&&(this.calculateAbsoluteLocations(),_.each(a.designMargin,function(d,e){if(e=+e,-1===e)c=Math.max(c,d-a.baseLineMargin);else if(-2!==e){var f=b.getLayoutWithArgIndex(e);c=Math.max(c,f.top+f.height+d)}})),c},getFixedBottomComponentTopByBaseLine:function(a,b,c){var d=c+(a.baseLineMargin||0);if(d%q!==0){for(var e=Math.floor(d/q)*q;b>e;)e+=q;c=e-(a.baseLineMargin||0)}return c},getNeededBottomMargin:function(a){return a.designMargin&&a.designMargin[-2]?Math.max(0,a.designMargin[-2]):void 0},getArgumentLateralOptions:h(function(a,b){var c={},d=this.getArgumentGridWidth(a);if(!d)return c;var e=this.filterLayoutsWithMyStructure(b);if(!e||!e.length)return c;for(var f=0;f<e.length;f++){var g=e[f],h=g.getArgumentGridWidth(a);if(g.thatWidth=h,d>h?(!c.smaller||c.smaller.thatWidth<h)&&(c.smaller=g):h>d&&(!c.bigger||c.bigger.thatWidth>h)&&(c.bigger=g),c.bigger&&c.bigger.thatWidth===d+1&&c.smaller&&c.smaller.thatWidth===d)break}return c}),filterLayoutsWithMyStructure:function(a){var b=this;return _.filter(a,function(a){return a&&a.solutionStatus===g.pass&&a.id!==b.id&&_.isEqual(a.structure,b.structure)})},getArgumentGridWidth:function(a){return e.getArgumentGridWidthFromSignature(a,this.family)},getMediaGridWidth:function(){return e.getMediaGridWidthFromSignature(this.family)},isButtonInContainer:function(){return e.isButtonInContainerFromSignature(this.family)},EMPTY_LAYOUT:{subType:"empty",type:"empty",argIndex:-1},structureToDesignStructure:function(a,b,c){var d=this;return _.map(a,function(a){return _.map(a,function(a){var e=d.getLayoutWithArgIndex(a);if(b){for(var f=0;f<d.boxTypes.length;f++){var g=d.boxTypes[f];if(g<i.ON_MEDIA&&_.flatten(d.boxesStructure[g]).indexOf(a)>-1)return d.EMPTY_LAYOUT}var h=n(d,a);if(h)return-1===c.indexOf(h)&&c.push(h),d.EMPTY_LAYOUT}return e})})},getDesignStructure:function(){return this.designStructure||this.calculateDesignStructure(),this.designStructure},calculateDesignStructure:function(){var a=this;if(this.designStructure=[],this.structure){var b=[];this.designStructure.push(this.structureToDesignStructure(this.structure,!0,b)),this.onMediaStructure&&this.designStructure.push(this.structureToDesignStructure(this.onMediaStructure));var c=_.filter(this.boxTypes,function(a){return-1===[i.ON_MEDIA,i.FULL].indexOf(a)});angular.forEach(c,function(b){a.designStructure.push(a.structureToDesignStructure(a.boxesStructure[b]))}),_.each(b,function(b){var c=a.calcStructure(b);a.designStructure.push(a.structureToDesignStructure(c))})}},isMediaType:function(a){return"media"===a.type||"gallery"===a.type||"map"===a.type||"widget"===a.type},fakeMutateUp:function(a,b){var c=this.layoutArray.indexOf(a),d=this.smartLayoutRulesNodes[c],e=d.bottom.domParent.component,f=a.top+a.height-a.lineHeight+a.baseLineMargin,g=e.height-f,h=b-g;return h>0?h>e.top?!1:(e.top-=h,void(e.height+=h)):!0},getMappedArgList:function(){var a=this;return _.collect(this.argList,function(b){return a.getArgSignature(b)})},getMappedStructures:function(){var a=this.getMappedArgList();return{structure:_.collect(this.structure,function(b){return _.collect(b,function(b){return a[b]})}),onMediaStructure:_.collect(this.onMediaStructure,function(b){return _.collect(b,function(b){return a[b]})})}},getLayoutData:function(){var a=this.getMappedStructures();return{cluster:this.cluster,templateId:this.templateId,argsSignature:this.argsSignature,structure:a.structure,onMediaStructure:a.onMediaStructure,mediaGridWidth:12*this.getMediaGridWidth()/f.getGridUnits(this.width),isButtonInContainer:this.isButtonInContainer()}},calcStructure:function(a){var b=[],c=a.layout;if(c)for(var d=void 0!==a.onMediaIndex?this.onMediaStructure:this.structure,e=_.pluck(a.layout,"rowIndex"),f=_.pluck(a.layout,"colIndex"),g=_.min(f),h=_.min(e),i=_.max(f),j=_.max(e),k=h;j>=k;k++)for(var l=g;i>=l;l++){var m=k-h;b[m]||(b[m]=[]),b[m][l-g]=d[k][l]}else b=[[a.argIndex]];return b},postProcessing:function(){if(this.getCleanLE()){var a=this;_.each(this.layoutArray,function(b){"text"===b.type&&(b.clientRect?b.height=b.clientRect.height:b.height=a.getCleanLELayoutByArgIndex(b.argIndex).height)});var b=p(this,this.structure.length-1);_.each(this.structure,function(b,c){if(c>0){var d=p(a,c-1);o(a,c,d+20)}}),b!==this.height&&(this.height=f.getValidHeight(b)),this.fakeOriginal()}}},r}]),angular.module("siteGeneratorStaticsCoreAppInternal").factory("SmartLayoutRuleUtils",function(){var a={updateRuleTree:function(a,b,c,d,e){return a.replace(e,function(a,e){return e.length>0&&+e>=b?'"'+c+'":'+(+e+d):a})}};return a}).factory("SmartLayoutRuleNode",["applicationParameters",function(a){function b(a,b){return a.badLEs[a.id]||a.mutationCounter>100?(b.push({result:d.prototype.mutationResult.failure,containerMutation:!1}),a.badLEs[a.id]=!0,!0):!1}var c=a.quarterBaseLine,d=function(a,b,c,d){this.facet=b,this.component=a,this.originalComponent={};var e=this;"root"!==this.facet&&_.each(this.component,function(a,b){e.originalComponent[b]=a}),this.children=[],this.id=c,this.parent=void 0,this.parentCandidate=void 0,this.domParent=d,this.description=this.describe(),this.mediaBottomDomParent=void 0};return d.prototype.resetMutation=function(a,c,d){if(!b(a,c)){var e=this;if(this.component.isLayoutElement&&(this.originalComponent.height=a.height),angular.forEach(Object.keys(this.originalComponent),function(a){e.component[a]=e.originalComponent[a]}),this.mutated=!1,!d){for(var f=0;f<this.children.length;f++)this.children[f].resetMutation(a,c);this.domParent&&this.domParent.resetMutation(a,c,!0)}}},d.prototype.isStretchableMedia=function(a){if(a.isMediaType(this.component)){var b;if("top"===this.facet){for(var c=0;c<a.smartLayoutRulesNodes.length;c++)if(a.smartLayoutRulesNodes[c].top===this){b=a.smartLayoutRulesNodes[c].bottom.parentCandidate;break}}else b=this.parentCandidate;return"bottom"===b.facet&&(b.component.isLayoutElement||b.isContainerType())}return!1},d.prototype.isContainerType=function(){return"container"===this.component.type},d.prototype.describe=function(){return this.component?this.component.type+" "+this.facet:"Root"},d.prototype.allowedHeight=function(b){var c=0;return this.component.isLayoutElement?c=b.maxHeight||b.height:(c=this.component.maxHeight||(this.domParent?this.domParent.allowedHeight(b):void 0)||10*a.gridStep,c-=this.component.padding||0),c},d.prototype.getOffsets=function(){var a={top:0,bottom:0,height:0},b=this.component;if(b){var c=this.originalComponent;a.top=b.top-c.top,a.height=b.height-c.height,a.bottom=a.top+a.height}return a},d.prototype.getOffsetsBottom=function(){var a=this.component;if(a){var b=this.originalComponent;return a.top-b.top+(a.height-b.height)}return 0},d.prototype.getOffsetsHeight=function(){var a=this.component;return a?a.height-this.originalComponent.height:0},d.prototype.componentBottom=function(){return this.component.top+this.component.height},d.prototype.checkPaddingReference=function(a,b,c){if(void 0!==this.component.paddingRef){var d=a.layoutArray[this.component.paddingRef],e=d.top+d.height;if(d&&e-this.componentBottom()<0)return a.smartLayoutRulesNodes[this.component.paddingRef].bottom.mutate(a,b,c,e+(this.componentBottom()-e),!0)}return{result:this.mutationResult.nop}},d.prototype.pushDomParent=function(a,b,c){if(this.domParent){var d=0;if(this.component.padding)if(this.component.padding.toString().indexOf("%")>-1){var e=this.component.padding.slice(0,-1);d=this.domParent.component.height*e/100}else d=+this.component.padding;var f=this.componentBottom();"line"===this.component.type&&(f-=this.component.height);var g="media"===this.domParent.component.type?this.domParent.component.top+this.domParent.component.height:this.domParent.component.height;if(0>g-f-d)return this.domParent.mutate(a,b,c,f+d,!0)}return{result:this.mutationResult.nop}},d.prototype.pushMediaBottomDomParent=function(a,b,c){var d=0;if(this.component.mediaMinHeight>this.component.height?d=this.component.mediaMinHeight-this.component.height:this.componentBottom()>this.mediaBottomDomParent.component.height&&(d=this.componentBottom()-this.mediaBottomDomParent.component.height),d>0){var e=this.mediaBottomDomParent.component.height+d;return this.mediaBottomDomParent.mutate(a,b,c,e,!0)}return{result:this.mutationResult.nop}},d.prototype.componentAlignHandler=function(a,d,e){var f,g=0;this.domParent&&(g=this.domParent.getOffsetsBottom());var h=this.component;if(h.verticalAlign){if(this.domParent&&"media"===this.domParent.component.type)h.top=(this.domParent.component.height-h.height)/2+this.domParent.component.top;else if(this.domParent)h.top=(this.domParent.component.height-h.height)/2;else{var i=this.originalComponent.top;h.top=i+(g-this.getOffsetsHeight())/2}if(h.top=Math.floor(h.top),h.top<0)return!1}else if(h.fixedBottom&&this.domParent){a.calculateAbsoluteLocations();var j=+this.component.padding||0,k=(this.domParent.component.absoluteTop||this.domParent.component.top)+this.domParent.component.height;k-=j;var l=a.getMinTopByDesign(h),m=k-h.height;f=a.getFixedBottomComponentTopByBaseLine(h,l,m);var n=a.getLayoutParent(h);if(h.top=f-(n.absoluteTop||n.top||0),f+this.height>k){m<h.absoluteTop&&(h.missingTop=h.absoluteTop-m);var o=this.pushDomParent(a,d,e);if(o.result!==this.mutationResult.nop){if(a.mutationCounter++,b(a,e))return!1;this.componentAlignHandler(a,d,e)}}}else if(h.fixedTop&&this.domParent&&"media"===this.domParent.component.type){a.calculateAbsoluteLocations();var p=a.getLayoutWithArgIndex(a.calcStructure(h)[0][0]),q=Math.ceil(a.letterHeight(p)/c)*c+this.domParent.component.absoluteTop;f=q-a.firstBaseLine(p),h.top+=f}return h.horizontalAlign&&this.domParent&&"media"===this.domParent.component.type&&(h.left=(this.domParent.component.width-h.width)/2+this.domParent.component.left),!0},d.prototype.mutate=function(d,e,f,g,h,i){d.mutationCounter++;var j;if(b(d,f))return f[f.length-1];var k=this.component,l=!1;this.mutated=!1;var m;if(h){var n;k.isLayoutElement?n=a.getValidHeight(g):d.isMediaType(k)?n=g:(n=Math.max(k.height,g),this.isContainerType()&&(n=Math.ceil(n/c)*c)),n>this.allowedHeight(d)?j={result:this.mutationResult.failure,containerMutation:!1,node:this.description,reason:"container cannot grow further"}:n>k.height?(k.height=n,this.mutated=!0,j={result:this.mutationResult.success,containerMutation:!!k.isLayoutElement,node:this.description,reason:""}):j={result:this.mutationResult.nop,containerMutation:!1,node:this.description,reason:"skipping this loop"}}else if(g){var o=this.mutated?this.originalComponent.height:k.height;
if(o>=g)j={result:this.mutationResult.nop,containerMutation:!1,reason:"Within height",node:this.description};else{m=g-k.height,k.height+=m;var p=!0;if(k.threshold){for(var q,r=0;r<this.children.length;r++)if("longText"===d.getLayoutSubType(this.children[r].component)){q=this.children[r].component.height;break}q&&k.height/q<k.threshold/100&&(p=!1)}j={result:this.mutationResult.success,containerMutation:!1,node:this.description,reason:"Grow with text"},this.mutated=p}}else if(i)this.mutated=!0,j={result:this.mutationResult.success,containerMutation:!1,node:this.description,reason:"decoration dummy mutation"};else{if(!this.parent)return;if(angular.equals(this.originalComponent,this.parent.originalComponent))this.mutated=!0,j={result:this.mutationResult.nop,containerMutation:!1,node:this.description,reason:"skipping this loop"};else{var s=this.parent.getOffsets()[this.parent.facet];if("top"===this.facet){var t=k.top,u=_.filter(this.children,function(a){return a.component===k});u.length>0&&u[0].domParent===this.parent?k.top=this.originalComponent.top+s-this.getOffsetsHeight():k.top=this.originalComponent.top+s;var v=d.getNeededLineOffset(k);k.top+=v,k.missingTop=v,this.isStretchableMedia(d)&&(!k.mediaMinHeight||k.mediaMinHeight>k.height?l=!0:(k.height=k.height-(k.top-t),k.height<k.mediaMinHeight&&(l=!0)))}else if("line"===k.type||"button"===k.type)k.top=this.originalComponent.top+s,"button"===k.type&&(k.top-=k.height-this.originalComponent.height);else{if(this.isStretchableMedia(d))if(k.squareImage)k.height=k.width;else if(e)k.height=k.height+s;else{var w=s-d.getColumnDiff(d,k)-(k.missingTop||0)-(k.missingHeight||0)-(k.missingBottom||0);k.height=w+this.originalComponent.height,k.height=Math.max(k.mediaMinHeight,k.height)}else{var x=this.parent.component.top+this.parent.component.height-(k.top+k.height);x>0&&(k.height+=x)}d.isMediaType(k)&&(k.height=Math.floor(k.height/c)*c)}j={result:this.mutationResult.success,containerMutation:!1,node:this.description,reason:"move by parent"},this.mutated=!0}}if(this.mutated){for(var y=0;y<this.children.length;y++){var z=this.children[y].mutate(d,e,f);if(z.result===this.mutationResult.failure)return this.resetMutation(d,f),z}var A;A=l?this.pushMediaBottomDomParent(d,e,f):this.pushDomParent(d,e,f),this.checkPaddingReference(d,e,f),A.result!==this.mutationResult.failure?f.push({result:this.mutationResult.success,containerMutation:A.containerMutation||!1,node:this.description,reason:""}):(f.push(A),this.resetMutation(d,f)),this.componentAlignHandler(d,e,f)||(j={result:this.mutationResult.failure,containerMutation:!1,node:this.description,reason:"over the top of the container"})}return j&&f.push(j),j},d.prototype.toIndex=function(){return parseInt(this.id/10)-1},d.prototype.toJSON=function(){var a=this.id,b={id:a,arrayIndex:parseInt(a/10)-1,facet:this.facet};return b.children=this.children?this.children.map(function(a){return a.toJSON()}):void 0,b},d.prototype.mutationResult={success:"success",failure:"failure",nop:"no operation"},d}]),angular.module("siteGeneratorStaticsCoreAppInternal").factory("Solution",["solutionStatusCodes","modelTree","sitePartTypes","obMonitoring","selections",function(a,b,c,d,e){function f(c){var d=this;this.status=a.unknown,this.solution=[],this.solution.lgBrothers=[],this.aggregator=[];var e={};this.filterSignature="",c.forEach(function(a,c){if(a.length){a[0].containingSolution=d,d.solution.push(a[0]),a.length>1?(d.solution.lgBrothers[c]=_.sortBy(a,_.method("hasAggregator")),d.solution.lgBrothers[c].currentIndex=0):d.solution.lgBrothers[c]=[];var f=1===a[0].segments.length?"f":"p";a[0].segments.forEach(function(a){if(a.node&&(a.node.isList()&&(f="p"),!a.node.contentElement||!a.node.contentElement.isSpecialListItem())){var c=b.findIdentifyingNodeId(a.node)+f;e[c]||(e[c]=!0,d.filterSignature+=c)}})}})}return _.extend(f,{calculateListSpans:function(a){var f={};return _.each(a,function(e,g){if(!e.segments)return void d.error("no segments (solution.js L51)",{index:g,numberOfLGsInSolution:a.length});var h=e.segments[0],i=h.node,j=h.findIdentifyingNodeId()||"generalInfo",k=f[j];k||(k=f[j]={groups:[]},k.node=i?b.findIdentifyingNode(i):b.getGeneralInformation(),k.listNodeId=j,k.isList=k.node.isList(),i?(k.contentType=i.parentContentElementType||i.contentElementType||i.contentElement.type,k.description=i.parentContentElementType||i.isList()?i.parentContentElementType+" List":i.contentElement.type,k.sitePart="footer"===i.containerPageId?c.FOOTER:c.BODY):(k.description=k.contentType="SiteHeader",k.sitePart=c.HEADER)),k.groups.push(e)}),_.each(f,function(a){var c=_(_.map(a.groups,function(a){return a.isHeader()?"GeneralDescription":_.map(a.segments,function(a){return a.node.contentElement?a.node.contentElement.type:a.node.contentElementType})})).flatten().unique();if(a.heterogenous=c.value().length>3||c.without("ListHeader","ListFooter").value().length>1,!a.isList&&(a.groups.length>1||a.groups[0].segments.length>1)&&(a.heterogenous=!0),a.isList){var d=b.getNodeById(a.listNodeId),f=e.getForNode(d).isSlideShow;f&&(a.orientation="horizontal")}}),f}}),f.prototype={changeChosenLg:function(a,b){return this.solution[a].containingSolution=null,this.solution[a]=this.solution.lgBrothers[a][b],this.solution.lgBrothers[a][b].containingSolution=this,this.solution.lgBrothers[a].currentIndex=b,this.solution[a]},isSelectedSolution:function(){return this.containingSitePartSolutions.getSelectedSolution()===this.solution},isPreview:function(){return!!this.containingSitePartSolutions.isPreview},calculateAllBrothers:function(a,b,c,d,e){return _.sequencePromises(this.solution.lgBrothers,function(a){return _.sequencePromises(a,function(a){return a.calculateLayoutGroupStatus(b,c,d,e)})})}},f}]);var SimpleSolutionRules=function(){function a(){this.rules={1:["11","1|1"],11:["111","11|10"],111:["1111","111|100"],1111:["1111|1000"],"11|10":["11|11"],"11|11":["11|11|10"],"111|100":["111|110"],"111|110":["111|111"],"111|111":["111|111|100"],"1111|1000":["1111|1100"],"1111|1100":["1111|1110"],"1111|1110":["1111|1111"],"1111|1111":["1111|1111|1000"]},this.asymmetricRuels=_.defaults({111:["111|100"]},this.rules),this.splitRules={2:{"6:3:3":"8:4","3:6:3":"4:8","3:3:6":"4:8"},3:{"8:4":"6:3:3","4:8":"3:6:3","9:3":"6:3:3","3:9":"3:6:3"}},this.groupFailOverRules={11:"1|1",111:"11|10",1111:"111|100"}}return a.prototype.getColumnsSplit=function(a){var b=a.getColumnsData();if(b&&b.enable&&a.asymmetric){var c=b.split,d=a.getSegmentSignature();if(c&&(2===d.length||3===d.length))return _.get(this.splitRules,[d.length,c])||c}return void 0},a.prototype.divideSignature=function(a){var b="",c=a.split("|");return c.length>2&&(b=_.dropRight(c,2).join("|")+"|",a=_.drop(c,c.length-2).join("|")),{prefix:b,suffix:a}},a.prototype.oneColimnSolutionSignature=function(a){return _(a).filter(function(a){return"1"===a}).value().join("|")},a.prototype.failOverList=function(a){return this.groupFailOverRules[a]||this.oneColimnSolutionSignature(a)},a.prototype.addListItem=function(a,b){var c=this.divideSignature(a),d=b?this.asymmetricRuels:this.rules;return c.prefix+d[c.suffix][0]},a.prototype.removeListItem=function(a){var b=this.divideSignature(a),c="";return _.find(this.rules,function(a,d){return a.indexOf(b.suffix)>-1?(c+=d,!0):void 0}),b.prefix+c},a}();angular.module("siteGeneratorStaticsCoreAppInternal").service("simpleSolutionRules",SimpleSolutionRules),angular.module("siteGeneratorStaticsCoreAppInternal").factory("spinnerService",["$q","flags","obMonitoring",function(a,b,c){function d(){g.forEach(function(a){a.resolve()})}var e=[],f=[],g=[];return{disabled:!1,items:e,showAnimation:!0,setWithAnimation:function(a){var b=this.showAnimation;return this.showAnimation=a,b},isWaiting:function(){return 0!==this.items.length},isFirstTime:!1,isFatalError:!1,waitForMe:function(a){c.mark(a),b.noSpinners||this.disabled||(e.length||_.each(f,function(a){a.start()}),-1===_.indexOf(e,a)&&e.push(a))},imDone:function(a){if(c.measure(a),!this.disabled){var b=_.indexOf(e,a);b>-1&&e.splice(b,1),e.length||(_.each(f,function(a){a.stop()}),d())}},waitFor:function(a){var b=_.uniqueId("spinner");return this.waitForMe(b),(a["finally"]||a.then).call(a,this.imDone.bind(this,b))},forceStop:function(){e.length=0,_.each(f,function(a){a.stop()}),d()},forceStart:function(){_.each(f,function(a){a.start()})},register:function(a){f.push(a),e.length&&a.start()},unregister:function(a){f=_.without(f,a)},waitForStop:function(){var b=a.defer();return e.length||b.resolve(),g.push(b),a.all(g.map(function(a){return a.promise}))},disable:function(){this.disabled=!0},enable:function(){this.disabled=!1}}}]);var core;!function(a){var b=function(){function a(a,b,c,d,e){var f=this;this.$rootScope=a,this.applicationEvents=b,this.$q=c,this.$log=d,this.$timeout=e,this.user={},this.togglePreview=_.noop,this.isPreview=_.noop,this.storyDefer=this.$q.defer(),this.generateRandomOffset=function(a,b){void 0===b&&(b=101);var c=f.story?f.story.id:"0",d=a+c;Math.seedrandom(d);var e=Math.floor(Math.random()*b);return e},this.initForUser=function(a){f.userRoles=_.map(a.roles,function(a){return a.name}),f.user=a},this.debounceLayoutSolutionChanged=_.debounce(function(){f.emitLayoutSolutionChanged()},250),this.onStoryChanged=function(a,b){f.story=b,f.story&&f.storyDefer.resolve(f.story)},this.prodBaseURL="http://www.wix.com/website/generator?petri_ovr=specs.SiteGenerator:true;#!/stories/",a.storyServices=this,_.each(b,function(b,c){var d=c.charAt(0).toUpperCase()+c.slice(1),e="on"+d,g="emit"+d;f[e]=a.$on.bind(a,b),f[g]=f.createEmitMethod(b)})}return a.$inject=["$rootScope","applicationEvents","$q","$log","$timeout"],a.prototype.getPermission=function(a){if(!this.userRoles)return!1;switch(a){case"filter":return-1!==this.userRoles.indexOf("studio");case"assign":return-1!==this.userRoles.indexOf("studio");case"topMenu":return-1!==this.userRoles.indexOf("studio");default:return!0}},a.prototype.getSavedSite=function(){var a=this.story.getActiveLocale().savedSites;return a&&this.user&&a[this.user.id]},a.prototype.onDataChanged=function(a,b){b&&b.segment&&b.segment.revalidateMediaOverrides()},a.prototype.isStoryOwner=function(){return this.user.id===this.story.owner.id},a.prototype.userIsNotStudioOrStoryLocked=function(){return-1===this.userRoles.indexOf("studio")||!this.storyHasStudioRole()},a.prototype.storyHasStudioRole=function(){return this.story.createdByStudioUser},a.prototype.toggleLockStory=function(){var a=[],b=!this.storyHasStudioRole();return this.story.ACL.setRoleWriteAccess("studio",b),a.push(this.story.save()),angular.forEach(this.story.storyLocales,function(c){c.ACL.setRoleWriteAccess("studio",b),a.push(c.save())}),this.$q.all(a)},a.prototype.calculateMaxPageAndNodeId=function(a){var b=this.calculateNextPageAndNodeId(a.bft);this.nextFirstLevelNodeId=b.nextFirstLevelNodeId,this.nextPageNodeId=b.nextPageNodeId},a.prototype.calculateNextPageAndNodeId=function(a){var b=this,c=[],d=[],e=100,f=1e3,g={nextFirstLevelNodeId:e,nextPageNodeId:f};return a&&a.data&&(_.each(a.data.children,function(a){var e;"Page"===a.contentElementType?(e=a.id.split("page")[1],b.isNumeric(e)&&d.push(e)):"Footer"!==a.contentElementType&&(e=a.id.split(".")[1],b.isNumeric(e)&&c.push(e))}),g.nextFirstLevelNodeId=c.length>0?Math.max(parseInt(_.max(c),10),g.nextFirstLevelNodeId):g.nextFirstLevelNodeId,g.nextPageNodeId=d.length>0?Math.max(parseInt(_.max(d),10),g.nextPageNodeId):g.nextPageNodeId),g},a.prototype.isNumeric=function(a){return!isNaN(parseFloat(a))&&isFinite(a)},a.prototype.createEmitMethod=function(a){var b=this;return function(){for(var c=[],d=0;d<arguments.length;d++)c[d]=arguments[d];var e=[].slice.call(c);e.unshift(a),b.$timeout(function(){b.$log.debug("emitting event: "+a),b.$rootScope.$emit.apply(b.$rootScope,e)})}},a}();a.StoryServices=b,angular.module("siteGeneratorStaticsCoreAppInternal").service("storyServices",b)}(core||(core={}));var ThemeChooserService=function(){function a(a,b,c,d,e,f,g,h,i,j,k,l,m,n,o,p,q){var r=this;this.$p=a,this.$timeout=b,this.BackendTheme=c,this.storyServices=d,this.$log=e,this.flags=f,this.previewService=g,this.toasterService=h,this.DesignPolicyDefaultPlanes=i,this.themeChooserParameters=j,this.designKitParameters=k,this.dataFlags=l,this.$injector=m,this.sitePartTypes=n,this.themeChooserUtils=o,this.documentServicesMediator=p,this.spinnerService=q,this.layoutSelectionStoreProvider=null,this.regularThemes=[],this.customThemes=[],this.colorThemes=[],this.fontThemes=[],this.replacementKitsNotInUse=[],this.active={},this.initialized=!1,this.pendingRequest=[],this.isBusy=!1,this.archiveKey="archive",this.fontKey="font",this.colorKey="color",this.invertedProperty="inverted",this.FIELDS=[this.fontKey,this.colorKey],this.sortedFonts=this.themeChooserParameters.sortedFonts,this.fontsKeys=this.themeChooserParameters.fontsKeys,this.fontNames=this.themeChooserParameters.fontNames,this.headerBackgroundLssPath="siteOverrides.headerBackground",this.footerBackgroundLssPath="siteOverrides.footerBackground",this.headerStyleKey="hc1",this.footerStyleKey="fc1",this.DEFAULT_THEMES={color:"eeohehes6m_custom-1",font:{font_0:"lulo-clean",font_1:"georgia-new",font_2:"lulo-clean",font_3:"lulo-clean",font_4:"lulo-clean",font_5:"lulo-clean",font_6:"lulo-clean",font_7:"georgia-new",font_8:"lulo-clean",font_9:"georgia-new",font_10:"georgia-new"},mainKit:"all-evolution"},this.chosenFonts={},this.coloration={getkitUsedForConfigurations:function(){return r.kitForConfigurations},setActiveKitColorsAndMode:function(a,b,c){var d;if(void 0===a&&void 0===b)return r.$p.resolve();var e=r.getActiveTheme("mainKit"),f=e.kitFonts.colors;if(!e.originalKit){var g=ob.deepClone(e);e.originalKit=g}if(a){var h=!1;if(_.each(r.designKitParameters.kitColorsNames,function(b){a[b]&&"{"===a[b][0]||f[b]===a[b]||(f[b]=a[b],h=!0)}),h){var i=r.themeChooserUtils.generate6Colors(a),j={};_.each(r.designKitParameters.orderedPalette,function(a,b){j["color_"+a]=i[b],e.definition.properties["color_"+a]={type:"color",value:i[b]}}),r.documentServicesMediator.updateColors(j),r.flags.debug&&(r.$log.info("asked to set: ",a),r.$log.info("current method: ",f.currentState),r.themeChooserUtils.logColors("info","6 colors: "+i,i))}}void 0!==b&&f.currentState!==b&&(f.currentState=b,r.flags.debug&&r.$log.info("asked to change coloration mode to: ",0===b?"light":"dark"));var k=r.themeChooserUtils.getKitColors(e),l=r.themeChooserUtils.getKitColors(e.originalKit),m=!_.isEqual(k,l);if(m)d=r.themeChooserUtils.calculateKitConfiguration(f,f.currentState);else{var n=f.currentState===e.originalKit.kitFonts.colors.currentState;d=n?e.id:f.kitForToggle}r.kitForConfigurations=d===e.id?e.originalKit:r.getThemeByID(d);var o;if(r.kitForConfigurations){var p=r.themeChooserUtils.getConfigurationsData(e,r.kitForConfigurations);r.documentServicesMediator.setDocumentServicesStyles(p.styles),o=!r.flags.keepConfiguration&&p.changed,r.flags.debug&&r.$log.info("configurations from: "+d+" : "+r.kitForConfigurations.displayName)}else r.$log.error("couldn't find kit for configurations "+d),r.$log.error("are you using updated version of metaData?");var q=r.$p.defer();return o&&r.setKitConfigurationsCallback&&!c?(r.spinnerService.waitForMe("settingColoration"),r.setKitConfigurationsCallback(e),r.documentServices.waitForChangesApplied(function(){r.storyServices.reRender().then(function(){r.spinnerService.imDone("settingColoration"),q.resolve()})})):q.resolve(),r.storyServices.story&&(r.storyServices.story.selectedStyle.coloration=ob.deepClone(f),r.storyServices.story.selectedStyle.coloration.kitId=e.id),q.promise},setActiveKitColors:function(a){return r.coloration.setActiveKitColorsAndMode(a)},getActiveKitColors:function(){var a=r.getActiveTheme("mainKit");return r.themeChooserUtils.getKitColors(a)},getActiveKitDefaultColors:function(){var a=r.getActiveTheme("mainKit");return a=a.originalKit||a,r.themeChooserUtils.getKitColors(a)},getSpecificKitColors:function(a){return r.themeChooserUtils.getKitColors(a)},setActiveKitColorationMode:function(a){return r.coloration.setActiveKitColorsAndMode(void 0,a)},getActiveKitColorationMode:function(){var a=r.getActiveTheme("mainKit");return a&&a.kitFonts.colors.currentState},getActiveKitDefaultColorationMode:function(){var a=r.getActiveTheme("mainKit");return a=a.originalKit||a,a.kitFonts.colors.currentState},getSpecificKitColorationMode:function(a){return a.kitFonts.colors.currentState},getColorsForCurrentColoration:function(){var a=r.coloration.getActiveKitColorationMode()===ThemeChooser.COLORATION_METHOD_TYPE.dark?r.designKit.darkColorsSantaFormat:r.designKit.lightColorsSantaFormat;return a.map(function(a){return r.previewColors.getRGBColor(a)})}},this.previewService.registerInit(function(a){r.documentServices=a.documentServices}),_.each(this.fontsKeys,function(a,b){r.chosenFonts[a]={name:r.fontNames[b],themeName:void 0,themeId:void 0}}),this.getDefaultThemes=_.memoize(this._getDefaultThemes.bind(this))}return a.$inject=["$p","$timeout","BackendTheme","storyServices","$log","flags","previewService","toasterService","DesignPolicyDefaultPlanes","themeChooserParameters","designKitParameters","dataFlags","$injector","sitePartTypes","themeChooserUtils","documentServicesMediator","spinnerService"],a.prototype.initLss=function(){this.layoutSelectionStoreProvider=this.$injector.get("layoutSelectionStoreProvider")},Object.defineProperty(a.prototype,"previewColors",{get:function(){return this._previewColors||(this._previewColors=this.$injector.get("previewColors")),this._previewColors},enumerable:!0,configurable:!0}),Object.defineProperty(a.prototype,"designKit",{get:function(){return this._designKit||(this._designKit=this.$injector.get("designKit")),this._designKit},enumerable:!0,configurable:!0}),a.prototype._getDefaultThemes=function(a){var b,c,d,e=this;if(a){var f=_.find(this.regularThemes,{name:this.DEFAULT_THEMES.mainKit})||_.first(this.regularThemes);d=f.id}else{var g=_.find(this.regularThemes,{name:this.DEFAULT_THEMES.color})||_.first(this.regularThemes);b=g.id,c=_.transform(this.DEFAULT_THEMES.font,function(a,b,c){var d=_.find(e.regularThemes,{name:b})||_.first(e.regularThemes);return a[c]=d.id,a})}return{color:b,font:c,mainKit:d}},a.prototype._getFontPalette=function(){return this.flags.designKit?this.designKitParameters.orderedPalette:this.themeChooserParameters.PaletteColorsOrder},a.prototype._getLineHeight=function(a){var b=this.fontsKeys.indexOf(a);return this.themeChooserParameters.lineHeights[this.dp.lineHeight||0][b]},a.prototype._checkPendingRequests=function(){if(this.pendingRequest.length>0){var a=this.pendingRequest.shift();this.setThemeByID(a.themesIDs).then(function(){a.deferred.resolve()})}},a.prototype._queuePendingRequest=function(a){var b={deferred:this.$p.defer(),themesIDs:a};return this.pendingRequest.push(b),b.deferred.promise},a.prototype._hsb2rgb=function(a,b,c){var d,e,f,g,h,i,j,k;return a%=360,0===c?{r:0,g:0,b:0}:(b/=100,c/=100,a/=60,g=Math.floor(a),h=a-g,i=c*(1-b),j=c*(1-b*h),k=c*(1-b*(1-h)),0===g?(d=c,e=k,f=i):1===g?(d=j,e=c,f=i):2===g?(d=i,e=c,f=k):3===g?(d=i,e=j,f=c):4===g?(d=k,e=i,f=c):5===g&&(d=c,e=i,f=j),d=Math.round(255*d),e=Math.round(255*e),f=Math.round(255*f),{r:d,g:e,b:f})},a.prototype._rgb2hsb=function(a,b,c){var d,e,f,g,h,i;return a/=255,b/=255,c/=255,d=Math.min(Math.min(a,b),c),e=Math.max(Math.max(a,b),c),d===e?{h:0,s:0,l:100*e}:(f=a===d?b-c:b===d?c-a:a-b,g=a===d?3:b===d?5:1,h=Math.round(60*(g-f/(e-d)))%360,i=Math.round((e-d)/e*100),e=Math.round(100*e),{h:h,s:i,l:e})},a.prototype._cutHex=function(a){return"#"===a.charAt(0)?a.substring(1,7):a},a.prototype._hexToR=function(a){return parseInt(this._cutHex(a).substring(0,2),16)},a.prototype._hexToG=function(a){return parseInt(this._cutHex(a).substring(2,4),16)},a.prototype._hexToB=function(a){return parseInt(this._cutHex(a).substring(4,6),16)},a.prototype._modifyHsbOfHex=function(a,b){var c,d;return c=this.parseRGB(a),d=this._rgb2hsb(c.r,c.g,c.b),d=b(d),c=this._hsb2rgb(d.h,d.s,d.l),this.themeChooserUtils.rgbToHex(c.r,c.g,c.b)},a.prototype._generateColors=function(a,b){var c,d,e,f,g=this._hexToR(a),h=this._hexToG(a),i=this._hexToB(a),j=this._rgb2hsb(g,h,i),k=j.l,l=Math.sqrt((100-j.l)*(100-j.l)+j.s*j.s),m=Math.floor(5*k/(k+l)),n=[];for(c=0;5>c;c++)d=j.s,m>c?e=(c+1)/(m+1)*k:c===m?e=k:(e=(c-m)/(5-m)*(100-k)+k,d=j.s/(c-m+1)),f=this._hsb2rgb(j.h,d,e),n.push(this.themeChooserUtils.rgbToHex(f.r,f.g,f.b));return b||n.reverse(),n},a.prototype._saveTheme=function(a){var b=this;return a.save().then(function(){return b.toasterService.info("Theme saved",!0),a},function(c){return b.toasterService.error("Failed to save theme",!0),b.$log.error(c),a})},a.prototype._filterThemes=function(a,b){var c=this;return this.regularThemes.filter(function(d){return!d[c.archiveKey]&&d[a]&&!d[b]})},a.prototype._filterKitThemes=function(){var a=this;return this.regularThemes.filter(function(b){return a.isKit(b)})},a.prototype._isCustomTheme=function(a){return void 0!==a.Custom},a.prototype._isCustomOfGivenIdOrCurrentStory=function(a,b){return b||this.storyServices.story?(b||this.storyServices.story.id)===a.Custom:!1},a.prototype._filterThemesByType=function(a){this.flags.designKit?(this.colorThemes=this._filterKitThemes(),this.fontThemes=this.colorThemes):(this.colorThemes=this._filterThemes(this.colorKey,this.fontKey),this.fontThemes=this._filterThemes(this.fontKey,this.colorKey)),a&&this.colorThemes.unshift(a)},a.prototype._setThemeAttributes=function(a,b,c,d,e,f,g,h){a.source=b,a.definition=c,a.metaSiteId=d,a.siteId=e,a.isTemplate=f,a.kitFonts=h,a[this.invertedProperty]=g},a.prototype._isRussianLang=function(a){return"ru"===a},a.prototype._isLatinExtendedLang=function(a){return this.themeChooserParameters.LatinExtendedLanguages.indexOf(a)>-1},a.prototype._sortByDisplayName=function(a,b){return a.displayName<b.displayName?-1:a.displayName>b.displayName?1:0},a.prototype._sortByLatinExtended=function(a,b){return!a.latinExtendedFallback&&b.latinExtendedFallback?-1:a.latinExtendedFallback&&!b.latinExtendedFallback?1:0},a.prototype._sortByRussian=function(a,b){return!a.russianFallback&&b.russianFallback?-1:a.russianFallback&&!b.russianFallback?1:0},a.prototype._sortRegularThemes=function(){var a=this._isLatinExtendedLang(),b=this._isRussianLang();this.regularThemes.sort(this._sortByDisplayName),a?this.regularThemes.sort(this._sortByLatinExtended):b&&this.regularThemes.sort(this._sortByRussian)},a.prototype._getFallback=function(a,b){return a?a[b]||a.id:void 0},a.prototype._fillObjWithThemeIdForAllFonts=function(a,b){var c=this;a[this.fontKey]={},angular.forEach(this.chosenFonts,function(d,e){a[c.fontKey][e]=b})},a.prototype.getNumberOfLineHeightsOptions=function(){return this.themeChooserParameters.lineHeights.length},a.prototype.lineHeightChanged=function(){var a=_.mapValues(this.chosenFonts,"themeId");this.setThemeByID({font:a})},a.prototype.setDesignPolicy=function(a){this.dp=a},a.prototype.getDesignPolicy=function(){return this.dp},a.prototype.getFontPointer=function(a){return this.storyServices.story&&this.storyServices.story.selectedStyle.fontPointer?this.storyServices.story.selectedStyle.fontPointer[a]:this.themeChooserParameters.defaultFontColor},a.prototype.setFontPointer=function(a,b){this.storyServices.story.selectedStyle.fontPointer=this.storyServices.story.selectedStyle.fontPointer||{},this.storyServices.story.selectedStyle.fontPointer[a]=this.getIndexInPalette(b)},a.prototype.createNewTheme=function(a,b,c,d,e,f,g,h){var i=this.BackendTheme.build({});return this._setThemeAttributes(i,a,c,e,f,g,h),i.name=b,i.fontPalette=this.getFontsOrderedForPalette(i),d?(i.color=!0,i.Custom=d,this.customThemes.push(i)):this.regularThemes.push(i),i.save()},a.prototype.createOrUpdateCustomColorTheme=function(a,b){var c=this,d={};angular.copy(a.definition,d);var e=-1!==(a.displayName||a.name).indexOf("invert"),f=this.getCustomColorTheme(b),g={};return angular.copy(a.source,g),g.custom=b||this.storyServices.story.id,g.hasOwnSite=!1,f?(this._setThemeAttributes(f,g,d,a.metaSiteId,a.siteId,a.isTemplate,e,a.kitFonts),this.$p.when(f)):this.createNewTheme(g,"Custom",d,b||this.storyServices.story.id,a.metaSiteId,a.siteId,a.isTemplate,e).then(function(a){return c.colorThemes.unshift(a),a})},a.prototype.getFieldsArr=function(){return this.FIELDS},a.prototype.getArchiveKey=function(){return this.archiveKey},a.prototype.getChosenFonts=function(){return this.chosenFonts},a.prototype.getFontsFields=function(){return this.fontsKeys},a.prototype.getFontsNames=function(){return this.fontNames},a.prototype.getKitFontsCategories=function(){return this.designKitParameters.kitFontsCategories},a.prototype.getKitFontsStyle=function(){return this.designKitParameters.kitFontsStyle},a.prototype.loadSingleTheme=function(a){return this.BackendTheme.find(a)},a.prototype.initialize=function(){var a=this;return this.initPromise?this.initPromise:(this.initPromise=this.BackendTheme.search({limit:1e3,where:'{"Custom":null}'}).then(function(b){a.flags.consumerMode&&(b=b.filter(a.dataFlags.areFulfilled)),b.forEach(function(b){b.fontPalette=a.getFontsOrderedForPalette(b)});var c="kitFonts.replacingKitId";if(a.flags.consumerMode){var d=a.storyServices.story.selectedStyle,e=_.filter(b,c);_.each(e,function(e){var f,g=_.get(e,c);_.contains(d,g)?(f=_.findIndex(b,{id:e.id}),a.replacementKitsNotInUse.push(e)):f=_.findIndex(b,{id:g});var h=b.splice(f,1)[0];e.displayName=h.displayName,e.name=h.name})}a.regularThemes=b.filter(function(b){return!a._isCustomTheme(b)}),a._sortRegularThemes(),a.customThemes=b.filter(function(b){return a._isCustomTheme(b)}),a._filterThemesByType(),a.initialized=!0,a._checkPendingRequests()}),this.initPromise)},a.prototype.loadCustomTheme=function(a){var b=this;return this.initialize().then(function(){return b.BackendTheme.search({Custom:a}).then(function(c){b.flags.consumerMode&&(b.customThemes=c.filter(b.dataFlags.areFulfilled)),b.customThemes.forEach(function(a){a.fontPalette=b.getFontsOrderedForPalette(a)}),b._filterThemesByType(b.getCustomColorTheme(a))})})},a.prototype.reloadTheme=function(a){return this.BackendTheme.findOne(a.id)},a.prototype.setDocumentServices=function(a){this.documentServices=a},a.prototype.isActive=function(a,b){return this.active[b]===a},a.prototype.getActiveTheme=function(a){return this.getThemeByID(this.active[a])},a.prototype.getThemeByID=function(a){return _.find(this.regularThemes,{id:a})||_.find(this.customThemes,{id:a})||_.find(this.replacementKitsNotInUse,{id:a})||_.find(this.regularThemes,{objectId:a})||_.find(this.customThemes,{objectId:a})},a.prototype.getActiveFontTheme=function(){return this.getThemeByID(this.chosenFonts.font_0.themeId)},a.prototype.setThemeByID=function(a,b){if(!this.initialized||this.isBusy)return this._queuePendingRequest(a);var c,d={},e=a[this.colorKey];return e&&(c=this.getThemeByID(e),this.flags.designKit&&!this.isKit(c)&&(c=_.find(this.colorThemes,{name:"all-delight"})),c&&(d[this.colorKey]=c,this.flags.designKit&&c.kitFonts&&(c.configurations&&(a.color&&a.font&&a.color===a.font&&(this.themeChooserUtils.resetKit(this.getActiveTheme("mainKit")),this.themeChooserUtils.resetKit(c),this.kitForConfigurations=void 0),this.setKitConfigurationsCallback&&this.setKitConfigurationsCallback(c)),void 0===c.kitFonts.lineHeight||b||a.color!==a.font||(this.dp.lineHeight=c.kitFonts.lineHeight,this.dp.formula="dp"+c.kitFonts.lineHeight,this.DesignPolicyDefaultPlanes.setCurrentFormula(this.dp.formula))))),a[this.fontKey]&&("object"!=typeof a[this.fontKey]&&this._fillObjWithThemeIdForAllFonts(a,a[this.fontKey]),d[this.fontKey]=this.getFontMapToThemes(a[this.fontKey])),this.setTheme(d)},a.prototype.setAllFontsFromOneTheme=function(a){var b={};return this._fillObjWithThemeIdForAllFonts(b,a),this.setThemeByID(b)},a.prototype.getFontMapToThemes=function(a){var b=this,c={};return angular.forEach(this.chosenFonts,function(d,e){if(a[e]){var f=b.getThemeByID(a[e]);f&&(c[e]=f)}}),c},a.prototype.getStylesFallbackForLocale=function(a,b){var c,d=this,e={themeFonts:{}};return this._isLatinExtendedLang(b)||this._isRussianLang(b)?this.fontsKeys.forEach(function(f){c=d.getThemeByID(a.themeFonts[f]),e.themeFonts[f]=d._getFallback(c,d._isLatinExtendedLang(b)?"latinExtendedFallback":"russianFallback")}):this.fontsKeys.forEach(function(b){e.themeFonts[b]=a.themeFonts[b]}),e},a.prototype.setColorTheme=function(a){var b={};return b[this.colorKey]=a,this.setTheme(b)},a.prototype.getBgColorFromLss=function(a){var b=this[a+"BackgroundLssPath"],c=_.get(this.getLss(),b),d=c&&this.designKitParameters[c];return d?"color_"+d:void 0},a.prototype.updateSitePartBg=function(b){this.updateBg(this[b+"StyleKey"],b,a.styleKeys.background,this.getBgColorFromLss(b))},a.prototype.toggleHeaderTransparent=function(b){this.updateBg(this.headerStyleKey,this.sitePartTypes.HEADER,a.styleKeys.opacity,b?"0":"1")},a.prototype.updateHeaderBg=function(){this.updateSitePartBg(this.sitePartTypes.HEADER)},a.prototype.updateFooterBg=function(){this.updateSitePartBg(this.sitePartTypes.FOOTER)},a.prototype.getHeaderBg=function(){return this.getSitePartBg(this.sitePartTypes.HEADER)},a.prototype.getSitePartBg=function(a){var b=this.getThemeByID(this.active[this.colorKey]),c=b.definition.styles,d=c[this[a+"StyleKey"]],e=_.get(d,this.getPartBackgroundPath());return this.previewColors.getRGBColor(e)},a.prototype.getPartBackgroundPath=function(){return a.PROPERTIES_PREFIX+a.styleKeys.background[0]},a.prototype.updateBg=function(a,b,c,d){var e=this;if(this.flags.debugHeaderFooterColoration||this.flags.mergedHeader){var f=this.getThemeByID(this.active[this.colorKey]);if(f){var g=f.definition.styles,h=g[a];this.updateBackgroundStyle(h,c,d),this.documentServicesMediator.updateStyle(a,h.properties,h.skin),this.previewService.waitForChanges().then(function(){e.storyServices.reRender(b)})}}},a.prototype._overrideStyles=function(a){a.mg1&&a.mg1.properties&&(a.mg1.properties["alpha-bgHover"]="0.3")},a.prototype.isHeaderShouldBeTransparent=function(){return this.mergedHeaderService||(this.mergedHeaderService=this.$injector.get("mergedHeaderService")),this.mergedHeaderService.isHeaderShouldBeTransparent()},a.prototype.setTheme=function(b){var c=this;this.isBusy=!0;var d=this.flags.designKit&&b.font&&b.font.font_0===b.color;if(b.font){var e={};angular.forEach(b.font,function(a,b){var d=a.definition.properties[b];if(d){var f=d.value;f=f.replace(/[0-9,.]*em/,c._getLineHeight(b));var g=c.getFontPointer(b);void 0!==g&&(f=f.replace(/color_\d*/,"color_"+g)),e[b]=f}else c.$log.error("Failed to set font")}),this.documentServicesMediator.updateFonts(e)}if(b.color){var f=b.color.definition,g={};if(_.each(f.properties,function(a,b){"color"===a.type&&(g[b]=a.value)}),this.documentServicesMediator.updateColors(g),this.flags.debugHeaderFooterColoration){var h=this.getBgColorFromLss(this.sitePartTypes.HEADER),i=this.getBgColorFromLss(this.sitePartTypes.FOOTER);this.updateBackgroundStyle(f.styles[this.headerStyleKey],a.styleKeys.background,h),this.updateBackgroundStyle(f.styles[this.footerStyleKey],a.styleKeys.background,i)}this.flags.mergedHeader&&this.isHeaderShouldBeTransparent()&&this.updateBackgroundStyle(f.styles[this.headerStyleKey],a.styleKeys.opacity,"0"),this._overrideStyles(f.styles),this.documentServicesMediator.setDocumentServicesStyles(f.styles)}b.font&&angular.forEach(b.font,function(a,b){c.chosenFonts[b]&&(c.chosenFonts[b].themeId=a.id,c.chosenFonts[b].themeName=a.displayName||a.name)}),this.active.color=b.color?b.color.id:this.active.color;var j=this.$p.when();return b.font&&(this.flags.consumerMode?(this.storyServices.resetCache(),j=this.storyServices.setUpCacheByKit()):this.storyServices.emitClearAllCaches()),j.then(function(){if(d&&(c.active.mainKit=b.color.id),!c.initialization)if(c.flags.designKit){if(c.flags.consumerMode)return b.font?c.storyServices.onNodeChangedClearCacheSynchronous():c.storyServices.reRender();c.storyServices.emitNodeChangedClearCache()}else b.font?c.storyServices.emitNodeChanged():c.storyServices.emitLayoutSolutionChanged()}).then(function(){c.isBusy=!1,c._checkPendingRequests()})},a.prototype.getLss=function(){
return this.layoutSelectionStoreProvider||this.initLss(),this.layoutSelectionStoreProvider.getLayoutSelectionStore()},a.prototype.updateStyle=function(b,c,d){var e=Array.isArray(c)?c:[c];e.forEach(function(c){return _.set(b,""+a.PROPERTIES_PREFIX+c,d)})},a.prototype.updateBackgroundStyle=function(a,b,c){c&&this.updateStyle(a,b,c)},a.prototype.getRegularThemes=function(){return this.regularThemes},a.prototype.getColorThemes=function(){return this.colorThemes},a.prototype.getFontThemes=function(){return this.fontThemes},a.prototype.getCustomThemes=function(){return this.customThemes},a.prototype.getCustomColorTheme=function(a){var b=this;return this.customThemes.filter(function(c){return b._isCustomOfGivenIdOrCurrentStory(c,a)})[0]},a.prototype.getColorFromActiveColorTheme=function(a){if(this.active.color&&void 0!==a){var b=this.getThemeByID(this.active.color);if(b){var c=b.definition.properties;return this.themeChooserUtils.colorStyle(c[a].value)}}return"#032340"},a.prototype.getFontColor=function(a){var b,c=this.chosenFonts[a].themeId,d=/\{(.*)\}/,e=this.getThemeByID(c);if(e){var f=e.definition.properties;if(f[a]){var g=this.getFontPointer(a);if(g)return"color_"+g;var h=f[a];if(h)return h=h.value,b=h.match(d),b[1]}}},a.prototype.getFontsOrderedForPalette=function(a){var b,c,d=this,e=a.definition.properties,f=/\{(.*)\}/,g=[];return this.fontsKeys.forEach(function(a){b=e[a],b&&(b=b.value,c=b.match(f),g.push({title:d.chosenFonts[a].name,style:b.replace(" "+c[0],""),color:c[1]}))}),g},a.prototype.getMainColorsOrderedForPalette=function(a){var b=this.flags.designKit?this.designKitParameters.orderedPalette:this.themeChooserParameters.mainColorsOrder;return this.themeChooserUtils.colorsOrderedByIndexArr(a,b)},a.prototype.getThemeProperties=function(a){return a.definition.properties},a.prototype.setThemeProperties=function(a,b){a.definition.properties=b},a.prototype.getSelectedMainColorsOrderedForPalette=function(){var a=this.getThemeByID(this.active[this.colorKey]);return a?this.getMainColorsOrderedForPalette(a):void 0},a.prototype.getColorsOrderedForPalette=function(a){return this.themeChooserUtils.colorsOrderedByIndexArr(a,this._getFontPalette())},a.prototype.getColorByIndexInPalette=function(a,b){return this.themeChooserUtils.colorByIndexInPalette(a,this._getFontPalette()[b])},a.prototype.getActiveColorsOrderedForPalette=function(){var a=this.getThemeByID(this.active[this.colorKey]);return a?this.getColorsOrderedForPalette(a):void 0},a.prototype.getActiveColorByIndexInPalette=function(a){var b=this.getThemeByID(this.active[this.colorKey]);return b?this.themeChooserUtils.colorByIndexInPalette(b,a):void 0},a.prototype.setCustomMainColor=function(a,b,c){for(var d=a.definition.properties,e=this._generateColors(c,a[this.invertedProperty]),f=this.themeChooserParameters.mainColorsOrder[b],g=f-2,h=0;5>h;h++)d["color_"+g].value=e[h],g++;this.callDebounceSetThemeByID({color:a.id})},a.prototype.setCustomColor=function(a,b,c){var d=a.definition.properties;d["color_"+this.getIndexInPalette(b)].value=c,this.callDebounceSetThemeByID({color:a.id})},a.prototype.registerReimportCallback=function(a){this.themeReimportCallback=a},a.prototype.registerDesignKitSetConfigurationsCallback=function(a){this.setKitConfigurationsCallback=a},a.prototype.updateThemeIfCustom=function(){if(this.storyServices.story&&this.themeReimportCallback){var a=this.getCustomColorTheme(this.storyServices.story.id);a&&this.themeReimportCallback(a)}},a.prototype.parseRGB=function(a){return{r:this._hexToR(a),g:this._hexToG(a),b:this._hexToB(a)}},a.prototype.rgb2hsb=function(a){var b=this._rgb2hsb(a.r,a.g,a.b);return{h:b.h,s:b.s,b:b.l}},a.prototype.hsb2rgb=function(a){return this._hsb2rgb(a.h,a.s,a.b)},a.prototype.increaseBrightness=function(a){return this._modifyHsbOfHex(a,function(a){return a.l+=10,a.l>100&&(a.l=100),a})},a.prototype.invertColorsOfCustomTheme=function(a){function b(a,b,c){e=a["color_"+b].value,a["color_"+b].value=a["color_"+c].value,a["color_"+c].value=e}var c,d,e,f,g=a.definition.properties;for(f=0;5>f;f++)c=this.getIndexInPalette(f),d=this.getIndexInPalette(f+20),b(g,c,d);for(f=5;10>f;f++)c=this.getIndexInPalette(f),d=this.getIndexInPalette(f+10),b(g,c,d);b(g,1,2),this.callDebounceSetThemeByID({color:a.id}),a[this.invertedProperty]=!a[this.invertedProperty]},a.prototype.getIndexInPalette=function(a){return this._getFontPalette()[a]},a.prototype.callDebounceSetThemeByID=function(a){this.debounceSetThemeByID||(this.debounceSetThemeByID=_.debounce(this.setThemeByID.bind(this),this.themeChooserParameters.debounceInterval)),this.debounceSetThemeByID(a)},a.prototype.saveTheme=function(a){return this._saveTheme(a)},a.prototype.getLineHeight=function(a){return this._getLineHeight(a)},a.prototype.getFontStyle=function(a){return this.getSpecificKitFontStyle(this.getActiveFontTheme(),a)},a.prototype.getSpecificKitFontStyle=function(a,b){var c=this.fontsKeys.indexOf(b);return a.fontPalette[c].style},a.prototype.getFontOrder=function(a){return this.sortedFonts[this.chosenFonts[a].name]},a.prototype.isButtonStyleTransparent=function(a){var b=this.documentServicesMediator.getStyleDefinition(a);return b&&"wysiwyg.viewer.skins.button.TextOnlyButtonSkin"===b.skin},a.prototype.isKit=function(a){return a&&!a[this.archiveKey]&&a[this.colorKey]&&a[this.fontKey]},a.prototype.getTransformedDsFonts=function(){var a=this,b=this.documentServicesMediator.getAllFonts();return _.transform(b,function(b,c,d){var e=c.match(/(\d+)px/)[1];return b[d]={name:d,size:e,definition:c,description:a.chosenFonts[d]&&a.chosenFonts[d].name},b})},a.prototype.getFontSize=function(a){if(-1===a.indexOf("font_"))return a.match(/(\d+)px/)[1];var b=this.chosenFonts[a].themeId,c=this.getThemeByID(b),d=c.definition.properties[a].value,e=d.match(/(\d+)px/)[1];return e},a.prototype.serializeSelctions=function(a,b){if("themeFonts"===a){var c=this.storyServices.story.getActiveLocale().styles;c[a]=b}else{var d=this.storyServices.story.selectedStyle||{};d[a]=b,this.storyServices.story.selectedStyle=d}},a.prototype.serializeMainKitSelection=function(a){this.serializeSelctions("mainKit",a)},a.prototype.serializeFontKitSelection=function(a){this.serializeSelctions("fontKit",a)},a.prototype.serializeColorKitSelection=function(a){this.serializeSelctions("colorKit",a)},a.prototype.serializeOneFontSelection=function(a,b){var c=this.storyServices.story.getActiveLocale().styles;c.themeFonts=c.themeFonts||{},c.themeFonts[a]=b},a.prototype.setStoryStyles=function(a,b){var c,d,e=this,f={};if(this.flags.designKit){d=a.selectedStyle&&ob.deepClone(a.selectedStyle)||{};var g=this.getDefaultThemes(!0).mainKit;c=d.mainKit&&this.getThemeByID(d.mainKit)?d.mainKit:g,f.font=d.fontKit&&this.getThemeByID(d.fontKit)?d.fontKit:c,f.color=d.colorKit&&this.getThemeByID(d.colorKit)?d.colorKit:c}else{var h=a.getActiveLocale().styles;f.font=h.themeFonts||this.getDefaultThemes().font,f.color=a.selectedStyle&&a.selectedStyle.themeColors||this.getDefaultThemes().color,h.themeFonts||(h.themeFonts=f.font)}return this.initialization=!b,this.dp.formula&&this.DesignPolicyDefaultPlanes.setCurrentFormula(this.dp.formula),this.setThemeByID(f,void 0!==this.dp.formula).then(function(){var a;return e.active.mainKit=c,d.coloration&&c===d.coloration.kitId&&(a=e.coloration.setActiveKitColorsAndMode(d.coloration,d.coloration.currentState,e.initialization)),e.initialization=!1,a})},a}();ThemeChooserService.styleKeys={background:["bg","bgctr","brd"],opacity:["alpha-bg","alpha-bgctr","alpha-brd"]},ThemeChooserService.PROPERTIES_PREFIX="properties.",angular.module("siteGeneratorStaticsCoreAppInternal").service("themeChooser",ThemeChooserService);var ThemeChooser;!function(a){var b;!function(a){a[a.light=0]="light",a[a.dark=1]="dark"}(b=a.COLORATION_METHOD_TYPE||(a.COLORATION_METHOD_TYPE={}));var c;!function(a){a[a.three=0]="three",a[a.four=1]="four",a[a.fiveOrSix=2]="fiveOrSix"}(c||(c={}));var d;!function(a){a.BLACK="#181818",a.WHITE="#ffffff"}(d=a.COLORS||(a.COLORS={}));var e=function(){function a(a,b,d,e,f){this.chroma=a,this.designKitParameters=b,this.storyServices=d,this.flags=e,this.$log=f,this.KIT_CONFIGURATION_DELIMITER="|",this.BRIGHTNESS={DARK:"dark",LIGHT:"light",DCOCL:"dcocl",DCOCD:"dcocd",LCOCL:"lcocl",LCOCD:"lcocd"},this.LIGHTNESS={FOR_LIGHT_COLOR:.76,FOR_DARK_COLOR:.24,TINT_STEP:.2,TINT_MIN:.15,TINT_MAX:.9},this.kitConfigurations=(g={},g[this.BRIGHTNESS.DCOCL]="5682ae70a81c70310001c64c",g[this.BRIGHTNESS.DCOCD]="5682a826a81c70310001c611",g[this.BRIGHTNESS.LCOCL]="5869222c7f055d1f00e42a28",g[this.BRIGHTNESS.LCOCD]="5868d4eb6764341f00cac0c6",g),this.KIT_CONFIGURATIONS=[{numOfColors:c.three,mainColor:"dark",colorationMethod:"dark",kitId:"5697e4d67bfbe94400385a70"},{numOfColors:c.three,mainColor:"dark",colorationMethod:"light",kitId:"583ffdad07e80f1f00131c04"},{numOfColors:c.three,mainColor:"light",colorationMethod:"dark",kitId:"5682768ac18e9c32001b393e"},{numOfColors:c.three,mainColor:"light",colorationMethod:"light",kitId:"583ff2ab19f0982000529dac"},{numOfColors:c.four,mainColor:"dark",secondaryColor:"light",colorationMethod:"dark",kitId:"585b9f9138645f2000226554"},{numOfColors:c.four,mainColor:"dark",secondaryColor:"light",colorationMethod:"light",kitId:"585bac2689837620000bb230"},{numOfColors:c.four,mainColor:"light",secondaryColor:"dark",colorationMethod:"dark",kitId:"583da350bccb132000f494e0"},{numOfColors:c.four,mainColor:"light",secondaryColor:"dark",colorationMethod:"light",kitId:"585b759e76bb99200039768d"},{numOfColors:c.four,mainColor:"light",secondaryColor:"light",colorationMethod:"dark",kitId:"56a9cb909abbe1240060883c"},{numOfColors:c.four,mainColor:"light",secondaryColor:"light",colorationMethod:"light",kitId:"585b8ea476bb99200039768e"},{numOfColors:c.four,mainColor:"dark",secondaryColor:"dark",colorationMethod:"dark",kitId:"583ea6e5e0b8462000b2094e"},{numOfColors:c.four,mainColor:"dark",secondaryColor:"dark",colorationMethod:"light",kitId:"585bae0a0db4e42000a4d5af"},{numOfColors:c.fiveOrSix,mainColor:"light",secondaryColor:"dark",colorationMethod:"light",kitId:"585fac6a41d27e20005b9b5e"},{numOfColors:c.fiveOrSix,mainColor:"light",secondaryColor:"dark",colorationMethod:"dark",kitId:"585fb8e641d27e20005b9b63"},{numOfColors:c.fiveOrSix,mainColor:"dark",secondaryColor:"light",colorationMethod:"light",kitId:"56e964357ab3fc3700a1197f"},{numOfColors:c.fiveOrSix,mainColor:"dark",secondaryColor:"light",colorationMethod:"dark",kitId:"584d5fbdc8e7512000dad50f"},{numOfColors:c.fiveOrSix,mainColor:"light",secondaryColor:"light",colorationMethod:"light",kitId:"587b3a36c587ef1400686bc5"},{numOfColors:c.fiveOrSix,mainColor:"light",secondaryColor:"light",colorationMethod:"dark",kitId:"587b7e7dc25b1014009cba44"},{numOfColors:c.fiveOrSix,mainColor:"dark",secondaryColor:"dark",colorationMethod:"dark",kitId:"587b9783c587ef1400686bca"},{numOfColors:c.fiveOrSix,mainColor:"dark",secondaryColor:"dark",colorationMethod:"light",kitId:"587babe4c25b1014009cba49"}],this.COLOR_ON_COLOR_CONTRAST_THRESHOLD=7.5,this.VERY_DARK_THRESHOLD=.1,this.VERY_LIGHT_THRESHOLD=.96,this.generateKitConfigurations();var g}return a.$inject=["chroma","designKitParameters","storyServices","flags","$log"],a.prototype.generateKitConfigurations=function(){var a=this,b=this.KIT_CONFIGURATIONS.reduce(function(b,c){return b[""+c.numOfColors+a.KIT_CONFIGURATION_DELIMITER+c.mainColor+a.KIT_CONFIGURATION_DELIMITER+(c.secondaryColor||"")+a.KIT_CONFIGURATION_DELIMITER+c.colorationMethod]=c.kitId,b},{});angular.extend(this.kitConfigurations,b)},a.prototype.isColorOnColor=function(a){return 4===this.getNumOfColors(a)&&this.isColorOnColorContrastingEnough(a.mainColor,a.secondaryColor)},a.prototype.getColorOnColorConfiguration=function(a,c,d){return this.isDarkColor(a,d)?c===b.light?this.kitConfigurations[this.BRIGHTNESS.DCOCL]:this.kitConfigurations[this.BRIGHTNESS.DCOCD]:c===b.light?this.kitConfigurations[this.BRIGHTNESS.LCOCL]:this.kitConfigurations[this.BRIGHTNESS.LCOCD]},a.prototype.calculateKitConfiguration=function(a,d){var e=this.getNumOfColors(a),f=b[d],g=3===e?c.three:4===e?c.four:c.fiveOrSix;if(this.isColorOnColor(a))return this.getColorOnColorConfiguration(a.mainColor,d,a);var h=this.getBrightness(a.mainColor,a),i=a.secondaryColor?this.getBrightness(a.secondaryColor,a):"",j=""+g+this.KIT_CONFIGURATION_DELIMITER+h+this.KIT_CONFIGURATION_DELIMITER+i+this.KIT_CONFIGURATION_DELIMITER+f;return this.kitConfigurations[j]},a.prototype.getNumOfColors=function(a){return null!=a.fourthColor?6:null!=a.thirdColor?5:null!=a.secondaryColor?4:3},a.prototype.getKitColors=function(a){var b=this,c=a.kitFonts.colors,d={};return _.each(this.designKitParameters.kitColorsNames,function(e){var f=c[e];f&&(d[e]="#"===f.charAt(0)?f:b.colorByIndexInPalette(a,f.match(/\d+/)[0]))}),d},a.prototype.colorByIndexInPalette=function(a,b){var c=a.definition.properties,d=c["color_"+b].value;return this.colorStyle(d)},a.prototype.colorsOrderedByIndexArr=function(a,b){var c,d=this,e=a.definition.properties,f=[];return b.forEach(function(a){c=e["color_"+a].value,f.push(d.colorStyle(c))}),f},a.prototype.colorStyle=function(a){if("#"===a[0])return a;var b=a.split(",");return this.rgbToHex(parseInt(b[0],10),parseInt(b[1],10),parseInt(b[2],10))},a.prototype.rgbToHex=function(a,b,c){return"#"+((1<<24)+(a<<16)+(b<<8)+c).toString(16).substr(1)},a.prototype.generate6Colors=function(a){var b,c=this.getNumOfColors(a);return 3===c?b=this.generate6ColorsFrom3(a):4===c?b=this.generate6ColorsFrom4(a):5===c?b=this.generate6ColorsFrom5(a):6===c&&(b=this.generate6ColorsFrom6(a)),[b.l1,b.l2,b.l3,b.d1,b.d2,b.d3]},a.prototype.getConfigurationsData=function(a,b){var c=!1;_.isEqual(a.configurations,b.configurations)||(a.configurations=b.configurations,c=!0);var d=["listConfiguration","confPattern","headerAndFooter","plainMenu","stripMenu"];return _.each(d,function(d){_.isEqual(a.kitFonts[d],b.kitFonts[d])||(a.kitFonts[d]=b.kitFonts[d],c=!0)}),{changed:c,styles:_.pick(b.definition.styles,["hc1","hc2","hc3","fc1","fc2","fc3"])}},a.prototype.resetKit=function(a){a&&a.originalKit&&(delete this.storyServices.story.selectedStyle.coloration,a.definition=a.originalKit.definition,a.kitFonts=a.originalKit.kitFonts,a.configurations=a.originalKit.configurations,delete a.originalKit)},a.prototype.generate6ColorsFrom3=function(a){var b=a.mainColor,c=a.white,d=a.black,e={l1:c,l2:c,l3:c,d1:d,d2:d,d3:d};return this.isDarkColor(b,a)?e.d3=b:e.l3=b,e},a.prototype.generate6ColorsFrom4=function(a){var b=a.mainColor,c=a.secondaryColor,d=a.white,e=a.black,f={l1:d,l2:d,l3:d,d1:e,d2:e,d3:e};return this.isDarkColor(b,a)?f.d3=b:f.l3=b,this.isDarkColor(c,a)?f.d2=c:f.l2=c,angular.extend(f,this.changeColorsIfVeryDarkOrVeryLight(b)),f},a.prototype.generate6ColorsFrom5=function(a){var b=a.mainColor,c=a.secondaryColor,d=a.thirdColor,e=a.white,f=a.black,g={l1:e,l2:e,l3:e,d1:f,d2:f,d3:f};return this.isDarkColor(b,a)?(g.d3=b,this.isDarkColor(c,a)?(g.d2=c,g.l3=g.l2=d):(g.l2=c,this.isDarkColor(d,a)?(g.d2=d,g.l3=c):(g.l3=d,g.d2=b))):(g.l3=b,this.isLightColor(c,a)?(g.l2=c,g.d3=g.d2=d):(g.d2=c,this.isLightColor(d,a)?(g.l2=d,g.d3=c):(g.d3=d,g.l2=b))),g},a.prototype.generate6ColorsFrom6=function(a){var b,c=a.mainColor,d=a.secondaryColor,e=a.thirdColor,f=a.fourthColor,g=a.white,h=a.black,i={l1:g,l2:g,l3:g,d1:h,d2:h,d3:h};return this.isDarkColor(c,a)?(i.d3=c,this.isLightColor(f,a)?(i.l3=f,b=e):(i.l3=e,b=f)):(i.l3=c,this.isDarkColor(f,a)?(i.d3=f,b=e):(i.d3=e,b=f)),this.isDarkColor(d,a)?(i.d2=d,i.l2=b):(i.l2=d,i.d2=b),i},a.prototype.isLightColor=function(a,b){return this.getBrightness(a,b)===this.BRIGHTNESS.LIGHT},a.prototype.isDarkColor=function(a,b){return this.getBrightness(a,b)===this.BRIGHTNESS.DARK},a.prototype.getBrightness=function(a,b){return this.chroma.contrast(a,b.black)>this.chroma.contrast(a,b.white)?this.BRIGHTNESS.LIGHT:this.BRIGHTNESS.DARK},a.prototype.tintColor=function(a){var b=this.chroma(a).hsl(),c=b[0],d=b[1],e=b[2];return e>this.LIGHTNESS.TINT_MAX-this.LIGHTNESS.TINT_STEP?a:(e+=this.LIGHTNESS.TINT_STEP,this.chroma.hsl(c,d,e).hex())},a.prototype.shadeColor=function(a){var b=this.chroma(a).hsl(),c=b[0],d=b[1],e=b[2];return e<this.LIGHTNESS.TINT_MIN+this.LIGHTNESS.TINT_STEP?a:(e-=this.LIGHTNESS.TINT_STEP,this.chroma.hsl(c,d,e).hex())},a.prototype.toLightColor=function(a,b){if(this.isLightColor(a,b))return a;var c=this.bisectLightDarkThreshold({dark:a},b),d=c.light;c.dark;return d},a.prototype.toDarkColor=function(a,b){if(this.isDarkColor(a,b))return a;var c=this.bisectLightDarkThreshold({light:a},b),d=(c.light,c.dark);return d},a.prototype.bisectLightDarkThreshold=function(a,b){var c=this.chroma;if(c(b.black).hsl()[2]>c(b.white).hsl()[2]){var d=this.bisectLightDarkThreshold(a,{black:b.white,white:b.black});return{light:d.dark,dark:d.light}}var e,f,g,h,i,j,k=function(a){return!!a.light};for(k(a)?(i=a.light,n=c(i).hsl(),e=n[0],f=n[1],g=n[2],h=0,j=c.hsl(e,f,h).hex()):(j=a.dark,o=c(j).hsl(),e=o[0],f=o[1],h=o[2],g=1,i=c.hsl(e,f,g).hex());g-h>.01;){var l=(h+g)/2,m=c.hsl(e,f,l).hex();this.isDarkColor(m,b)?(p=c(m).hsl(),h=p[2],j=m):(q=c(m).hsl(),g=q[2],i=m)}return{light:i,dark:j};var n,o,p,q},a.prototype.isColorOnColorContrastingEnough=function(a,b){return this.chroma.contrast(a,b)>this.COLOR_ON_COLOR_CONTRAST_THRESHOLD},a.prototype.changeColorsIfVeryDarkOrVeryLight=function(a){var b=this.chroma(a),c=b.hsl(),d=c[2];return d<this.VERY_DARK_THRESHOLD?{d1:a,d3:b.brighten(.5).hex()}:d>this.VERY_LIGHT_THRESHOLD?{l1:a,l3:b.darken(.5).hex()}:{}},a.prototype.logColors=function(a,b,c){var d=_.fill(new Array(c.length),"%c  ").join(""),e=c.map(function(a){return"background-color: "+a+"; font-size: 20px; border: solid #e0e3e5; border-width: 1px 0;"});e[0]+=" border-left-width: 1px;",e[e.length-1]+=" border-right-width: 1px;",(f=this.$log[a]).call.apply(f,[this.$log,b+" "+d].concat(e));var f},a}();a.Utils=e,angular.module("siteGeneratorStaticsCoreAppInternal").service("themeChooserUtils",e)}(ThemeChooser||(ThemeChooser={}));var core;!function(a){var b=function(){function a(){this.fonts={font_3:48,font_4:40,font_5:32,font_6:28,font_2:24,font_0:20,font_7:18,font_8:15,font_9:14,font_10:12,font_1:12}}return a.prototype.getFontSize=function(a){return this.fonts[a]},a}();a.MobileFonts=b,angular.module("siteGeneratorStaticsCoreAppInternal").service("mobileFonts",b)}(core||(core={})),angular.module("siteGeneratorStaticsCoreAppInternal").factory("titleProvider",["titles","verticals",function(a,b){function c(a){return a?(a=a.split(".").splice(-1)[0],_.humanize(a)):"missing title"}var d={initialized:!1,titles:{},titleForContext:function(a,b){var d=this.titles[this.keyFromContext(b)];return d&&d[a]||(d=this.titles[b.vertical]),d&&d[a]||(d=this.titles[this.verticalType(b)]),d&&d[a]?d[a]:c(a)},keyFromContext:function(a){var b=_.filter([a.vertical,a.subVertical,a.type]).join(".");return b=b||a.type},addTitleSet:function(a){if(!a)return!1;var b=this.keyFromContext(a),c={};return b&&b.length&&a.titles?this.titles[b]?!1:(_.extend(c,a.titles),void(this.titles[b]=c)):!1},verticalType:function(a){var c=_.find(b,{id:a.vertical});if(c&&c.subVerticals){var d=_.find(c.subVerticals,{id:a.subVertical});return d&&d.type}},initTitles:function(){this.initialized||(a.forEach(function(a){d.addTitleSet(a)}),d.initialized=!0)}};return d.initTitles(),d}]),angular.module("siteGeneratorStaticsCoreAppInternal").service("toasterService",["$rootScope","$window","$log","flags",function(a,b,c,d){function e(e,g,j,k,l){var m,n;if(_.isObject(j))m=j.message,n=j.callback;else{if(!_.isString(j))throw"message arg in toaster should be string or object";m=j}if(void 0===l&&_.isBoolean(k)&&(l=k,k=void 0),"debug"===g){if(!d.debugMode)return;g="warning",void 0===k&&(k="Debug")}if(!b.__karma__){var o=["|"+g.toUpperCase()+"|"];void 0!==k&&o.push(k+","),o.push(m),c.info(o.join(" "))}var p=0;l&&(p=h[g]||0);var q;e&&(i[e]=i[e]||[],i[e][g]=i[e][g]||[],q=i[e][g],q.splice(0,0,m)),q&&q.length>1?q.restartTimeout&&q.restartTimeout():f.pop({type:g,title:k,body:e?"views/toast.html":m,timeout:p,bodyOutputType:q||e?"template":"",messages:q||[m],callback:n,index:0}),_.defer(function(){a.$apply()})}var f={pop:_.noop},g=["info","success","error","warning","wait","debug"],h=_.reduce(g,function(a,b){return a[b]=5e3,a},{}),i={};_.extend(this,{setToaster:function(a){f=a},group:function(a){return _.transform(g,function(b,c){return a?(b[a]=b[a]||{},b[a][c]=e.bind(void 0,a,c)):b[c]=e.bind(void 0,a,c),b})}}),_.extend(this,this.group()),_.extend(this,this.group("consumer"))}]);var TpaService=function(){function a(a,b,c,d,e,f,g,h,i,j,k,l,m){var n=this;this.flags=a,this.$window=b,this.toasterService=c,this.applicationParameters=d,this.$p=e,this.addBlogService=f,this.$http=g,this.bookingService=h,this.previewService=i,this.$timeout=j,this.dashboardSdk=k,this.documentServicesMediator=l,this.tpaTypes=m,this.invertColor=function(a,b,c){return a},this.styles={},this.duringAdditionOfTpa=!1,this.tpaTypeToTemplateIdMap={},this.cartLayout={height:23,width:27},this.widgetIds={},this.tpaPageIds={},this.tpaObjects={},this.tpaManagementIFrameCallbacks={},this.tpaManagerOpeners={};var o=this.tpaTypes.Stores+"_Shopping_Cart_Widget",p=this.tpaTypes.ProGallery+"_Widget",q=this.tpaTypes.Stores+"_Grid_Gallery_Widget",r=this.tpaTypes.BandsInTown+"_Widget",s=this.tpaTypes.Blog+"_Single_Post_Widget";this.widgetIds[this.tpaTypes.Hotels+"_Search_Bar_Widget"]="135aae78-42c9-63b5-d09a-77233cebc1c4",this.widgetIds[this.tpaTypes.Stores+"_Product_Widget"]="13a94f09-2766-3c40-4a32-8edb5acdd8bc",this.widgetIds[this.tpaTypes.Stores+"_Product_specific_Widget"]="13ec3e79-e668-cc0c-2d48-e99d53a213dd",this.widgetIds[q]="13afb094-84f9-739f-44fd-78d036adb028",this.widgetIds[this.tpaTypes.Stores+"_Slider_Gallery_Widget"]="139a41fd-0b1d-975f-6f67-e8cbdf8ccc82",this.widgetIds[this.tpaTypes.Stores+"_Thank_You_Widget"]="1380bbb4-8df0-fd38-a235-88821cf3f8a4",this.widgetIds[this.tpaTypes.Stores+"_Shopping_Cart_Widget"]="1380bbab-4da3-36b0-efb4-2e0599971d14",this.widgetIds[this.tpaTypes.Bookings+"_Widget"]="14756c3d-f10a-45fc-4df1-808f22aabe80",this.widgetIds[this.tpaTypes.Music+"_Widget"]="13bb5dc2-a098-5a74-502b-6bac84e80b23",this.widgetIds[r]="1405f006-9eda-ce95-96c3-403f44d9e58a",this.widgetIds[p]="142bb34d-3439-576a-7118-683e690a1e0d",this.widgetIds[this.tpaTypes.GetSubscribers+"_Widget"]="1375babd-6f2b-87ed-ff19-5778602c8b86",this.widgetIds[s]=s,this.widgetIds[this.tpaTypes.Blog+"_Post_Gallery"]=this.tpaTypes.Blog+"_Post_Gallery",this.tpaPageIds[this.tpaTypes.Stores]="product_gallery",this.tpaPageIds[this.tpaTypes.Stores+"_Product_Widget"]="product_page",this.tpaPageIds[this.tpaTypes.Stores+"_Thank_You_Widget"]="thank_you_page",this.tpaPageIds[o]="shopping_cart",this.tpaPageIds[this.tpaTypes.Bookings]="scheduler",this.tpaPageIds[this.tpaTypes.PhotoAlbums]="client_showcase",this.tpaPageIds[this.tpaTypes.RestaurantsMenus]="restaurants_menus",this.tpaPageIds[this.tpaTypes.Blog]="79f391eb-7dfc-4adf-be6e-64434c4838d9",this.tpaPageIds[s]="7326bfbb-4b10-4a8e-84c1-73f776051e10",this.typesThatChangeHeight=[this.tpaTypes.Stores,this.tpaTypes.Bookings,o,q,r],a.renderedModel||this.typesThatChangeHeight.push(p),angular.forEach(this.applicationParameters.tpaTypes,function(a){n.tpaObjects[a.type]={}}),this.previewService.registerInit(function(a){n.ds=a.documentServices}),this._addTpaManagementMessageHandlers(),this.documentServicesMediator.assignIsCartAdded(this.hasShoppingCart.bind(this))}return a.$inject=["flags","$window","toasterService","applicationParameters","$p","addBlogService","$http","bookingService","previewService","$timeout","dashboardSdk","documentServicesMediator","tpaTypes"],a.prototype._setTpaObj=function(a,b,c,d){a.page=b,a.compId=c,d=d||this.documentServicesMediator.getComponentRef(a.compId),d&&(a.comp=d)},a.prototype._isTpaAdded=function(a){if(a&&a.page){if(-1!==this.documentServicesMediator.getPageIdList().indexOf(a.page))return!0;delete a.page}},a.prototype._getAppId=function(a){var b;return this.flags.tpaQA&&(b=this.applicationParameters.tpaTypes[a]&&this.applicationParameters.tpaTypes[a].qaAppId),b||this.applicationParameters.tpaTypes[a]&&this.applicationParameters.tpaTypes[a].appId},a.prototype._updateTpaTopLeft=function(a,b,c){if(a){var d={};"number"==typeof b&&(d.y=b),"number"==typeof c&&(d.x=c),this.ds.components.is.rendered(a)&&this.updateLayout(a,d)}},a.prototype._saveCartComp=function(){this.cartComp=this._getCompByTypeAndWidgetId(this.tpaTypes.Stores,"1380bbc4-1485-9d44-4616-92e36b1ead6b")},a.prototype._updateCartLayout=function(){this._saveCartComp(),this.updateLayout(this.cartComp,this.cartLayout)},a.prototype.getClientSpecByAppId=function(a){return this._getClientSpecMapOfApp(a)},a.prototype._getClientSpecMapOfApp=function(a){return this.ds.tpa.app.getData(a)},a.prototype.getApplicationIdByCompRef=function(a){return this._getApplicationId(a)},a.prototype._getApplicationId=function(a){var b=a&&this.ds.components.serialize(a);if(b){var c=b.data,d=c.applicationId;return d}},a.prototype._createNewStyle=function(a){return a.styleType="custom",this.documentServicesMediator.createCustomStyle(a)},a.prototype._updateStyleOfComp=function(a,b){this.documentServicesMediator.setComponentStyleId(a,this._createNewStyle(b))},a.prototype._addTpa=function(a,b,c,d){var e=this;this.tpaTypeToTemplateIdMap[a]&&this.$window.console.log("adding "+a+" with template id: "+this.tpaTypeToTemplateIdMap[a]);var f=this.tpaObjects[a];if(this._isTpaAdded(f))return void this.toasterService.info(a+" exist already",!0);if(d&&(c=c||this.styles[d.id]),a!==this.tpaTypes.Blog){var g={sourceTemplateId:this.tpaTypeToTemplateIdMap[a],widgetId:void 0,callback:function(d){if(c&&c.data&&c.data.style){var g=c.data.style;e.flags.invertTpaPalette&&(g=e._createInvertedStyle(g,c));var h=e.documentServicesMediator.getComponentRef(d.sectionId);e._updateStyleOfComp(h,g)}var i,j=e.documentServicesMediator.getComponentRef(d.sectionId),k=e._getApplicationId(j);if(e.flags.useExtraPagesListFromDs&&(i=e.documentServicesMediator.getSectionsToAutoInstallWidgetData(k)),!i){var l=e._getClientSpecMapOfApp(k);i=_(l.widgets).filter(function(a){return!_.isNull(a.appPage)&&!_.isUndefined(a.appPage)}).sortBy("appPage.order").value()}e._setTpaObj(f,d.page.id,d.sectionId),b(i),a===e.tpaTypes.Stores&&e._updateCartLayout(),e.duringAdditionOfTpa=!1,e.deffered&&(e.deffered.resolve(),e.deffered=void 0)}};this.duringAdditionOfTpa=!0,this.ds.tpa.section.add(this._getAppId(a),g)}else{var h=c&&c.data&&c.data.blogStructure||this.addBlogService.getBlogDefaults();this.ds.wixapps.classics.blog&&this.ds.wixapps.classics.blog.addBlog?this.ds.wixapps.classics.blog.addBlog(this.tpaTypeToTemplateIdMap[a],this._getStripWithComponents(h.feed),this._getStripWithComponents(h.singlePost),function(a){e.previewService.waitForChanges().then(function(){var c=e.documentServicesMediator.getComponentRef(a),d=e.documentServicesMediator.getChildren(c),g=1===d.length&&d[0];b([{appPage:{name:"Blog"}},{appPage:{name:"Single post"},widgetId:e.tpaTypes.Blog+"_Single_Post_Widget"}]),e._setTpaObj(f,a,void 0,g)})}):this.toasterService.info("waiting for blog API",!0)}},a.prototype._getStripWithComponents=function(a){var b=this._getStripDefinition();return b.components=a,b.layout.height=this._getBottomChildEnd(a),[b]},a.prototype._getStripDefinition=function(){return{type:"Container",skin:"wysiwyg.viewer.skins.stripContainer.DefaultStripContainer",layout:{width:1040,height:0,x:0,y:0,scale:1,rotationInDegrees:0,anchors:[],fixedPosition:!1},componentType:"wysiwyg.viewer.components.StripContainer",components:[],data:{type:"StripContainer"},style:"strc1",design:{type:"MediaContainerDesignData",background:{type:"BackgroundMedia",color:"{color_11}",colorOpacity:1,alignType:"center",fittingType:"fill",scrollType:"none",colorOverlay:"",colorOverlayOpacity:0}}}},a.prototype._getBottomChildEnd=function(a){return a.reduce(function(a,b){var c=b.layout;return Math.max(a,c.y+c.height)},0)},a.prototype._addAppPartWidget=function(a,b,c,d){var e=c&&c.data||this.addBlogService.getPostGalleryDefault(),f=this.getBlogAppId();if(!f)return this.toasterService.info("No blog ",!0),this.$p.when();e.compSerialization.data.appInnerID=f,e.compSerialization.layout=b;var g=this.documentServicesMediator.addComponent(a,e.compSerialization);return d.widgetRef=g,this.$p.when(g)},a.prototype._addWidget=function(a,b,c,d,e){if(-1!==this.applicationParameters.appPartTypes.indexOf(a))return this._addAppPartWidget(b,c,d,e);var f={sourceTemplateId:this.tpaTypeToTemplateIdMap[a],widgetId:this.widgetIds[a],showOnAllPages:!1},g=this.getNaiveType(a)===this.tpaTypes.ProGallery&&_.get(e,"widgetRef.id");g&&(f.optionalCustomId=g);var h=this._getAppId(a)||this._getAppId(this.getNaiveType(a));return e.widgetRef=this.documentServicesMediator.tpa.addWidget(b.id,h,f),this.updateLayout(e.widgetRef,c),d&&d.data&&d.data.style&&this._updateStyle(e,this.flags.invertTpaPalette,d),this.previewService.waitForChanges()},a.prototype._getBookingsInstance=function(){var a=this.ds.tpa.app.getDataByAppDefId(this._getAppId(this.tpaTypes.Bookings));return a&&a.instance},a.prototype._getCompByTypeAndWidgetId=function(a,b){if(a=this.getNaiveType(a),a!==this.tpaTypes.Blog){var c=this.ds.tpa.app.getAllCompsByApplicationId(this._getApplicationId(this.getCompRef(a))),d=_.find(c,{widgetId:b});return d?this.documentServicesMediator.getComponentRef(d.id):void 0}},a.prototype.getBlogAppId=function(){var a=this.ds.tpa.app.getDataByAppDefId("61f33d50-3002-4882-ae86-d319c1a249ab");return a&&a.applicationId},a.prototype._getBlogContainerRef=function(){var a=this.getCompRef(this.tpaTypes.Blog);return a&&"wysiwyg.viewer.components.StripColumnsContainer"===this.documentServicesMediator.getComponentType(a)&&(a=this.documentServicesMediator.getChildren(a)[0]),a},a.prototype._createInvertedStyle=function(a,b){var c=this;return a=ob.deepClone(a),Object.keys(a.style.propertiesSource).filter(function(b){return"theme"===a.style.propertiesSource[b]}).filter(function(b){return a.style.properties[b].match(/^color_\d+$/)}).map(function(d){return{key:d,value:c.invertColor("{"+a.style.properties[d]+"}",d,b)}}).forEach(function(b){return a.style.properties[b.key]=b.value.substr(1,b.value.length-2)}),a},a.prototype._adjustStyles=function(a,b){a===this.tpaTypes.ProGallery+"_Widget"&&(b.style.properties.param_boolean_isInAdi="true")},a.prototype._updateStyle=function(a,b,c,d){var e,f,g=this,h=this.$p.when();c=c||this.styles[a.id];var i=c.data,j=i&&i.data;if(f=i&&(i.style||i.blogStructure||i.compSerialization)){if(a.contentElementType===this.tpaTypes.Blog)this.ds.wixapps.classics.blog.replaceBlogPages(f.feed,this._getStripWithComponents(f.singlePost),this._getBlogContainerRef());else if(i.isAppPart){var k=this.documentServicesMediator.getLayout(a.widgetRef),l=this.ds.components.getContainer(a.widgetRef);k.height=i.originalHeight||k.height;var m=a.widgetRef;h=this._addWidget(a.contentElementType,l,k,c,a).then(function(a){return g.documentServicesMediator.removeComponent(m),a})}else{b&&(f=this._createInvertedStyle(f,c));var n=a.contentElementType;this._adjustStyles(n,f),this._getAppId(n)?e=this.getCompRef(n):this.widgetIds[n]&&a.widgetRef&&(e=a.widgetRef),e||this.toasterService.info("trying to update tpa style but no comp",!0),j&&_.forEach(j,function(b,c){g.ds.tpa.data.set(e,c,b,void 0,function(){a.contentElementType===g.tpaTypes.GetSubscribers+"_Widget"&&g.ds.tpa.change.trigger.settingsUpdated(g._getApplicationId(e),e.id,b)})}),this._updateStyleOfComp(e,f)}a.contentElementType===this.tpaTypes.Bookings&&this.refreshApp(this.tpaTypes.Bookings),this.styles[a.id]=c}a.dockToWidget&&"ProGallery_Widget"===a.contentElementType&&(a.dockToWidget.fullWidth?this.documentServicesMediator.setLayoutDock(a.widgetRef,a.dockToWidget&&a.dockToWidget.margins):this._undockProGalleryWidget(a.widgetRef)),d&&h.then(function(){g.previewService.waitForChanges().then(d)})},a.prototype._undockProGalleryWidget=function(a){this.documentServicesMediator.unsetLayoutDock(a);var b=this.widgetIds[this.tpaTypes.ProGallery+"_Widget"],c=this._getAppId(this.tpaTypes.ProGallery),d=this.documentServicesMediator.getDefaultLayout(c,b);
this.updateLayout(a,d)},a.prototype._addTpaManagementMessageHandlers=function(){var a=this;this.dashboardSdk.closeWindow=function(){_.each(a.tpaManagementIFrameCallbacks.closeWindow,function(a){return a()})}},a.prototype._refreshApp=function(a){if(a===this.tpaTypes.Blog)this.ds.wixapps.classics.reloadApp("blog");else{var b=this.ds.tpa.app.getDataByAppDefId(this._getAppId(a));if(b){var c=b.applicationId,d=this.ds.tpa.app.getRenderedReactCompsByApplicationId(c);this.ds.tpa.app.refreshApp(d)}}},a.prototype._getAppIdForBI=function(a){if(a===this.tpaTypes.Blog)return"61f33d50-3002-4882-ae86-d319c1a249ab";var b=this.applicationParameters.tpaTypes[a];return b.appId},a.prototype._isBlogComp=function(a){var b=this.documentServicesMediator.getComponentData(a);return b&&"4de5abc5-6da2-4f97-acc3-94bb74285072"===b.appPartName},a.prototype._compContainsBlog=function(a){var b=this;return a&&(this._isBlogComp(a)||_.some(this.documentServicesMediator.getChildren(a),function(a){return b._compContainsBlog(a)}))},a.prototype._makeSureStyleIsValid=function(a,b){(b.style&&_.isString(b.style)&&!this.documentServicesMediator.getStyleDefinition(b.style)||!b.style)&&(delete b.style,this.styles[a.id].data.style&&(b.style=this._createNewStyle(this.styles[a.id].data.style)))},a.prototype.registerTpaManagementCallback=function(a,b){this.tpaManagementIFrameCallbacks[a]=this.tpaManagementIFrameCallbacks[a]||[],this.tpaManagementIFrameCallbacks[a].push(b)},a.prototype.deRegisterTpaManagementCallback=function(a,b){if(this.tpaManagementIFrameCallbacks[a]){var c=this.tpaManagementIFrameCallbacks[a].indexOf(b);c>-1&&this.tpaManagementIFrameCallbacks[a].splice(c,1)}},a.prototype.registerTpaOpener=function(a,b){a&&a.length&&_.isFunction(b)&&(this.tpaManagerOpeners[a]=this.tpaManagerOpeners[a]||b)},a.prototype.addTpa=function(a,b,c,d){this._addTpa(a,b,c,d)},a.prototype.getTpaPreset=function(a){return a&&this.styles[a.id]},a.prototype.addTpaWidget=function(a,b,c,d,e){return d=d||this.getTpaPreset(e),this._addWidget(a,b,c,d,e)},a.prototype.getNaiveType=function(a){return a?a.split("_")[0]:""},a.prototype.changeTpaTop=function(a,b){var c=this.tpaObjects[a];c&&this._updateTpaTopLeft(c.comp,b)},a.prototype.getContainingStripRef=function(a){if(a.widgetRef){var b=this.ds.components.getContainer(a.widgetRef);if(/.StripContainer$/.test(this.documentServicesMediator.getComponentType(b)))return b;if(/\.components\.Column$/.test(this.documentServicesMediator.getComponentType(b)))return this.ds.components.getContainer(b)}return null},a.prototype.shouldRenderInStrip=function(a){if(a&&a.isTpaWidget){var b=a.widgetRef&&this.documentServicesMediator.doesComponentExistByRef(a.widgetRef);return b?this.getContainingStripRef(a):!0}return!1},a.prototype.hasShoppingCart=function(){return this.isTpaAdded("Stores")||(this.cartComp=void 0),!!this.cartComp},a.prototype.getShoppingCartId=function(){return this.isTpaAdded("Stores")||(this.cartComp=void 0),this.cartComp},a.prototype.updateCartPosition=function(a,b,c,d){var e=this;return this.cartComp?(this.ds.components.setContainer(this.cartComp,c),this._updateTpaTopLeft(this.cartComp,a,b),this.$timeout(function(){e._updateCartLayout()},1500),d&&this.documentServicesMediator.setComponentStyleId(this.cartComp,d),!0):!1},a.prototype.addBookingService=function(a,b){return this.bookingService.addService(this._getBookingsInstance(),a,b)},a.prototype.addBookingServices=function(a,b,c){return this.bookingService.addServices(this._getBookingsInstance(),a,b,c)},a.prototype.deleteBookingsCategory=function(a){return this.bookingService.deleteCategory(this._getBookingsInstance(),a)},a.prototype.createBookingCategory=function(a,b){return this.bookingService.createCategory(this._getBookingsInstance(),a,b).then(function(a){return a.data.id})},a.prototype.getBookingBusiness=function(){return this.bookingService.getBusiness(this._getBookingsInstance())},a.prototype.waitUntilBookingsIsReady=function(a,b){var c=this,d=this._getBookingsInstance();return d?(a=a||0,b=b||this.$p.defer(),this.bookingService.isAppReady(d).then(function(e){if(e.data.ready)return void b.resolve(!0);if(0===a)try{c.bookingService.wakeAppHack(d)}catch(f){c.$window.console.log("couldnt kick booking app e:"+f)}5>a?c.$timeout(function(){c.waitUntilBookingsIsReady(a+1,b)},2e3):b.resolve(!1)}),b.promise):this.$p.when(!1)},a.prototype.refreshApp=function(a){return this._refreshApp(a)},a.prototype.setComp=function(a,b,c){this._setTpaObj(this.tpaObjects[a],b,void 0,c),a===this.tpaTypes.Stores&&this._saveCartComp()},a.prototype.getCompRef=function(a){return this.tpaObjects[a].comp},a.prototype.isCurrentPageIsBlog=function(a){return a=a&&a.id||this.documentServicesMediator.getCurrentPageId(),this.ds&&this.ds.wixapps.classics.isBlogPage(a)},a.prototype.isCurrentPageIsBlogSinglePost=function(a){return a=a&&a.id||this.documentServicesMediator.getCurrentPageId(),this.ds&&this.ds.wixapps.classics.blog.isSinglePost(a)},a.prototype.getBlogPageIds=function(){var a=this;return _.filter(this.documentServicesMediator.getPageIdList(),function(b){return a.isCurrentPageIsBlog(a.documentServicesMediator.getComponentRef(b))})},a.prototype.getBlogFeedHeight=function(a){var b=this._getBlogContainerRef();if(b){a&&(b.type="MOBILE");var c=this.ds.components.serialize(b);return c.components?this._getBottomChildEnd(c.components):c.layout.height}},a.prototype.getTypeByWidgetId=function(a){return _.invert(this.widgetIds)[a]},a.prototype.getTypeByAppId=function(a){var b=_.find(this.applicationParameters.tpaTypes,{appId:a});return b&&b.type},a.prototype.isTpaAdded=function(a){var b=this.tpaObjects[a];return this._isTpaAdded(b)},a.prototype.getPageIdByTpaType=function(a){if(this.isTpaAdded(a)){var b=this.tpaObjects[a];return b.page}},a.prototype.getSectionsAdded=function(){var a=[];return _.each(this.tpaObjects,function(b,c){b&&b.page&&a.push(c)}),a},a.prototype.setPreset=function(a,b){this.styles[b.id]=a},a.prototype.getChosenPresetId=function(a){return this.styles[a.id]&&this.styles[a.id].id},a.prototype.updateStyle=function(a,b,c){this._updateStyle(a,this.flags.invertTpaPalette,b,c)},a.prototype.managementPanelClosed=function(a){this.refreshApp(a)},a.prototype.getEditWidgetUrl=function(a){var b,c,d,e,f;if(this.getNaiveType(a.contentElementType)!==this.tpaTypes.Blog&&(a.isTpa?(b=this.getCompRef(a.contentElementType),e=this._getApplicationId(b),d=this.ds.tpa.app.getMainSectionWidgetDataFromApplicationId(e)):a.isTpaWidget&&(b=a.widgetRef,c=this.widgetIds[a.contentElementType],e=this._getApplicationId(b),f=this._getClientSpecMapOfApp(e),d=_.get(f,["widgets",c])),b&&d&&(c||a.isTpa))){var g=d.settings.onboardingUrl;if(!g)return;var h=-1!==g.indexOf("?")?"&":"?";return f=f||this._getClientSpecMapOfApp(e),g+=h+"origCompId="+b.id,g+="&locale=en",g+="&compId=tpaSettings",g+="&endpointType=settings",g+="&instance="+f.instance,g+="&fullwidth="+(_.get(a,"dockToWidget.fullWidth")?"1":"0"),g+="&viewMode=editor"}},a.prototype.updateLayout=function(a,b){this.documentServicesMediator.updateLayout(a,b)},a.prototype.setTpaTypeToTemplateIdMap=function(a){this.tpaTypeToTemplateIdMap=a||this.tpaTypeToTemplateIdMap},a.prototype.getTpaTypeToTemplateIdMap=function(){return ob.deepClone(this.tpaTypeToTemplateIdMap)},a.prototype.getCompByTypeAndWidgetId=function(a,b){return this._getCompByTypeAndWidgetId(a,b)},a.prototype.sectionDeleted=function(a){a===this.tpaTypes.Stores&&this.cartComp&&(this.cartComp=void 0)},a.prototype.setHeightOfPreset=function(a,b){this.styles[a.id]&&this.styles[a.id].data&&(this.styles[a.id].data.currentHeight=b)},a.prototype.getHeightOfPreset=function(a){return this.styles[a.id]&&this.styles[a.id].data?this.styles[a.id].data.currentHeight||this.styles[a.id].data.originalHeight:void 0},a.prototype.serializeToReAdd=function(a){var b=this.ds.components.serialize(a.widgetRef);a.serializedWidget=b},a.prototype.restoreFromSerialized=function(a,b,c){b.serializedWidget&&b.widgetRef.id&&(this.$window.proGalleryToUse&&this.$window.proGalleryToUse[b.id]&&(b.widgetRef=this.$window.proGalleryToUse[b.id]),this._makeSureStyleIsValid(b,b.serializedWidget),this.documentServicesMediator.addComponent(a,b.serializedWidget,{compId:b.widgetRef.id}),this.updateLayout(b.widgetRef,c))},a.prototype.cloneStyle=function(a,b){this.styles[b.id]=this.styles[a.id]},a.prototype.serialize=function(){return this.styles},a.prototype.deserialize=function(a){this.styles=a||this.styles},a.prototype.getAppId=function(a){var b=this.getNaiveType(a.contentElementType);return a.isTpa||b===this.tpaTypes.Blog?this._getAppIdForBI(b):a.isTpaWidget?this.widgetIds[a.contentElementType]:""},a.prototype.getAppIdByType=function(a){return this._getAppIdForBI(a)},a.prototype.getAppIdByPageNode=function(a){return a.tpaSection?this._getAppIdForBI(a.tpaSection):""},a.prototype.getInstanceId=function(a){if(!a)return null;var b,c=this.getNaiveType(a.contentElementType);if("Blog"===c)b=this.getBlogAppId();else{var d=a&&this.getCompRef(c)||a&&a.widgetRef;b=d&&this._getApplicationId(d)}var e=b&&this._getClientSpecMapOfApp(b);return e&&(e.instanceId||e.datastoreId)},a.prototype.hasSection=function(a){return this.applicationParameters.tpaTypes[a]&&this.applicationParameters.tpaTypes[a].hasSection},a.prototype.ensureCanEnsurePages=function(){return this.duringAdditionOfTpa?(this.deffered=this.deffered||this.$p.defer(),this.deffered.promise):this.$p.when()},a.prototype.openManageForApp=function(a,b){var c=this._getClientSpecMapOfApp(a),d=c&&c.appDefinitionId,e=d&&this.getTypeByAppId(d);this.tpaManagerOpeners[e]&&this.tpaManagerOpeners[e](b)},a.prototype.isDynamicHeightComp=function(a){return-1!==this.typesThatChangeHeight.indexOf(a)},a.prototype.findBlogStripInPage=function(a){var b=this,c=this.documentServicesMediator.getComponentRef(a);if(c){var d=this.documentServicesMediator.getChildren(c);return _.find(d,function(a){return b._compContainsBlog(a)})}},a.prototype.isProGallerySectionPage=function(a){var b=this.ds.tpa.section.getPageData(a);return b&&b.appData&&this.getAppIdByType("ProGallery")===b.appData.appDefinitionId},a.prototype.getSectionRefByPageId=function(a){return this.ds.tpa.section.getSectionRefByPageId(a)},a.prototype.getTpaPageId=function(a){var b=a.tpaExtraPage||a.tpaSection;return b&&this.tpaPageIds[b]},a}();angular.module("siteGeneratorStaticsCoreAppInternal").service("tpaService",TpaService);var TpaUrlBuilder=function(){function a(a,b,c,d,e){this.flags=a,this.tpaService=b,this.tpaTypes=c,this.documentServicesMediator=d,this.applicationParameters=e}return a.$inject=["flags","tpaService","tpaTypes","documentServicesMediator","applicationParameters"],a.prototype.getManagementUrl=function(a,b,c){var d=this.tpaService.getNaiveType(a),e=this.tpaService.getCompRef(d)||b&&b.widgetRef,f=d===this.tpaTypes.Blog?this.tpaService.getBlogAppId():e&&this.tpaService.getApplicationIdByCompRef(e),g=f&&this.tpaService.getClientSpecByAppId(f),h=this.getManagementBaseUrl(d,g);if(!h)return null;var i={};return d===this.tpaTypes.Blog?i=this.getBlogManagementParams(g,c):(i.compId=e?e.id:"",i.origin=c,i.instance=g.instance,i.viewMode=i.naiveType===this.tpaTypes.ProGallery?"onboarding":"editor",this.flags.businessManagerPhase3&&d===this.tpaTypes.Stores&&(i.appDefId=this.tpaService.getAppIdByType(d))),this.buildUrl(h,i)},a.prototype.getManagementBaseUrl=function(a,b){switch(a){case this.tpaTypes.Blog:return"http://editor.wix.com/wix-blog/";case this.tpaTypes.ProGallery:return"http://progallery.wix.com/photos.html";case this.tpaTypes.Stores:if(this.flags.businessManagerPhase3)return this.applicationParameters.clientTopology.businessManagerBaseUrl+"/external"}return b&&b.dashboardUrl},a.prototype.getBlogManagementParams=function(a,b){return{lang:"en",storeId:a.datastoreId,metaSiteId:this.documentServicesMediator.getMetaSiteId(),siteId:this.documentServicesMediator.getSiteId(),origin:"ob",referralInfo:"adi",biOrigin:b}},a.prototype.buildUrl=function(a,b){var c=_.keys(b).map(function(a){return a+"="+b[a]});return a+"?"+c.join("&")},a}();angular.module("siteGeneratorStaticsCoreAppInternal").service("tpaUrlBuilder",TpaUrlBuilder);var TpaTypes=function(){function a(a){this.applicationParameters=a}return a.$inject=["applicationParameters"],a.prototype.getTpaType=function(a){return this.applicationParameters.tpaTypes[a].type},Object.defineProperty(a.prototype,"Hotels",{get:function(){return this.getTpaType("Hotels")},enumerable:!0,configurable:!0}),Object.defineProperty(a.prototype,"Stores",{get:function(){return this.getTpaType("Stores")},enumerable:!0,configurable:!0}),Object.defineProperty(a.prototype,"Bookings",{get:function(){return this.getTpaType("Bookings")},enumerable:!0,configurable:!0}),Object.defineProperty(a.prototype,"PhotoAlbums",{get:function(){return this.getTpaType("PhotoAlbums")},enumerable:!0,configurable:!0}),Object.defineProperty(a.prototype,"Music",{get:function(){return this.getTpaType("Music")},enumerable:!0,configurable:!0}),Object.defineProperty(a.prototype,"BandsInTown",{get:function(){return this.getTpaType("BandsInTown")},enumerable:!0,configurable:!0}),Object.defineProperty(a.prototype,"ProGallery",{get:function(){return this.getTpaType("ProGallery")},enumerable:!0,configurable:!0}),Object.defineProperty(a.prototype,"Blog",{get:function(){return this.getTpaType("Blog")},enumerable:!0,configurable:!0}),Object.defineProperty(a.prototype,"RestaurantsMenus",{get:function(){return this.getTpaType("RestaurantsMenus")},enumerable:!0,configurable:!0}),Object.defineProperty(a.prototype,"GetSubscribers",{get:function(){return this.getTpaType("GetSubscribers")},enumerable:!0,configurable:!0}),a}();angular.module("siteGeneratorStaticsCoreAppInternal").service("tpaTypes",TpaTypes),angular.module("siteGeneratorStaticsCoreAppInternal").factory("TreeNode",["nodeFilterTypes","flags",function(a,b){function c(a,b){return a.zigZag!==b?(a.zigZagVersion=a.zigZagVersion||0,a.zigZagVersion+=1,a.zigZag=b,!0):void 0}function d(a){var b=!1;return a.forEach(function(a){b=c(a,!1)||b}),b}function e(a,b,c,d){switch(c.type){case"media":c.value&&c.value.length||(c.value=ob.deepClone(d)||[{fileName:"Cloudy Fog",relativeUri:"d8b91ec474404d93a7be5aefff9abd54.jpg",width:4928,height:3264,Title:"",Description:"",Link:{},mediaType:"image"}]),b.emptyHiddenMedia(),b.fillValuesByMediaType();break;case"text":c.value=d||_.humanize(a);break;case"button":c.value=ob.deepClone(d)||{callToAction:"Click Me",targetUrl:"",media:[]};break;case"subscribe":c.value=ob.deepClone(d)||{titleLabel:a,sendButtonLabel:"",emailPlaceHolder:"",namePlaceHolder:""};break;default:c.value=ob.deepClone(d)}}function f(c,d){this.contentElement=null,this.nodeDescription=c,this.contentElementType=c.contentElementType,this.alias=c.alias,this.asymmetric=c.asymmetric,this.metadata=_.clone(c.metadata),this.syncWithBooking=c.syncWithBooking,this.preferredMedia=c.preferredMedia,this.id=d,this.isTpa=c.isTpa,this.isTpaWidget=c.isTpaWidget,this.tpaExtraPage=c.tpaExtraPage,this.widgetRef=c.widgetRef,this.containerPageId=c.containerPageId,this.userHidden=c.userHidden||!1,this.argsMatchingPolicy=c.argsMatchingPolicy||{},this.mobileArgsPolicy=c.mobileArgsPolicy||{},this.referenceFields=c.referenceFields||{},this.mobileReferenceFields=c.mobileReferenceFields||{},this.hiddenMedia=c.hiddenMedia||{image:{},video:{},audio:{}},this.bgObj=c.bgObj,this.pageStyle=c.pageStyle,this.strip=c.strip,this.topLine=c.topLine,this.bottomLine=c.bottomLine,this.portfolioList=c.portfolioList,this.portfolioId=c.portfolioId,this.subType=c.subType,this.hidePage=c.hidePage,this.matchingPolicy=c.matchingPolicy||"Loose",this.children=c.children||[],this.zigZag=c.zigZag||!1,this.zigZagVersion=c.zigZagVersion,this.zigZagPattern=c.zigZagPattern,this.zigZagState=c.zigZagState,this.dockToWidget=c.dockToWidget,this.tpaSection=c.tpaSection,this.anchor=c.anchor,this.crop=c.crop,this.alignment=c.alignment,this.crossPageConnected=c.crossPageConnected,this.backgroundHasFaces=c.backgroundHasFaces,void 0===this.crossPageConnected&&this.canCrossPageConnect()&&(this.crossPageConnected=!0),this.isListItem=!1,c.layoutFilter?b.mobileEditor&&c.layoutFilter===a.PART?this.layoutFilter=a.FULL:this.layoutFilter=c.layoutFilter:this.isList()&&"ListHeader"!==this.contentElementType&&"ListFooter"!==this.contentElementType?this.layoutFilter=b.mobileEditor?a.FULL:a.PART:this.layoutFilter=a.FULL,this.mediaType=c.mediaType,this.source=c.source;var e=this;Object.defineProperty(this,"displayName",{get:function(){return e.getDisplayName()},set:function(a){return e.setDisplayName(a)}})}var g=[function(a){return a%2===1},function(a){return a/2%2>=1}];return f.prototype={isTpaNode:function(){return this.isTpa||this.isTpaWidget},isTpaMultiSection:function(){return this.widgetRef&&0===this.widgetRef.id.indexOf("TPAMultiSection_")||"Blog_Single_Post_Widget"===this.contentElementType},getCropKey:function(a,b){return a+"|"+b.width+"|"+b.height},getCropOfImage:function(a,b,c){var d=this.getCropKey(b,c),e=this.crop&&this.crop[a]&&this.crop[a][d];if(!e){var f=this.crop&&_.reduce(this.crop,function(a,b){return _.defaults(a,b),a},{});e=f&&f[d]}if(e)return e;if(this.autoCrop){if(this.autoCrop[a])return this.autoCrop[a][d];if(1===_.keys(this.autoCrop))return _.values(this.autoCrop)[0][d]}},getClosestCrop:function(a,b,c){var d,e=this.getCropKey(b,c),f=this.crop&&_.reduce(this.crop,function(a,b){return _.defaults(a,b),a},{});if(f){var g=f[e];if(!g){var h=200,i=_(Object.keys(f)).map(function(a){var d=a.split("|"),e=d[0];if(e===b){var g,i=Number.parseInt(d[1]),j=Number.parseInt(d[2]);return i===c.width?g=Math.abs(j-c.height):j===c.height&&(g=Math.abs(i-c.width)),g&&h>g?{width:i,height:j,data:f[a],rank:g}:void 0}}).filter().sortBy("rank").value();i.length&&(d=i[0])}return d}},hasCrops:function(a){return this.crop&&this.crop[a]||this.autoCrop&&this.autoCrop[a]},setAutoCropData:function(a,b,c,d,e){e=e||1,this.autoCrop=this.autoCrop||[],this.autoCrop[a]=this.autoCrop[a]||{};var f=this.getCropKey(b,c);this.autoCrop[a][f]={x:d.x*e,y:d.y*e,height:d.h*e,width:d.w*e}},setCropData:function(a,c,d,e,f){this.crop=this.crop||[],this.crop[a]=this.crop[a]||{};var g=this.getCropKey(c,d);this.crop[a][g]&&f||(b.resetCrops&&!f&&(this.crop[a]={}),this.crop[a][g]={x:e.x,y:e.y,height:e.h||e.height,width:e.w||e.width})},setAlignment:function(a,b,c){this.alignment=this.alignment||{},(!this.alignment[a]||c)&&(this.alignment[a]=b)},getAlignment:function(a){return this.alignment=this.alignment||{},this.alignment[a]},originalLists:{},canCrossPageConnect:function(){return"PageHeader"===this.contentElementType},isCrossPageConnected:function(){return this.crossPageConnected},copyStateFrom:function(a){this.argsMatchingPolicy=_.clone(a.argsMatchingPolicy,!0),this.mobileArgsPolicy=_.clone(a.mobileArgsPolicy,!0),this.hiddenMedia=_.clone(a.hiddenMedia,!0),this.crop=_.clone(a.crop,!0),this.userHidden=a.userHidden,this.isList()&&_.each(this.children,function(b,c){b.copyStateFrom(a.children[c])},this)},moveChildBefore:function(a,b){a!==b&&(this.children.splice(this.children.indexOf(a),1),b?this.children.splice(this.children.indexOf(b),0,a):this.children.push(a))},isList:function(){return"contentElementList"===this.getNodeType()},duplicate:function(a){var b=_.extend({},this.nodeDescription,this);b.referenceFields=_.clone(this.referenceFields),b.argsMatchingPolicy=_.clone(this.argsMatchingPolicy,!0),b.mobileArgsPolicy=_.clone(this.mobileArgsPolicy,!0),b.hiddenMedia=_.clone(this.hiddenMedia,!0);var c=new f(b,this.id);return a||(c.children=_.collect(this.children,function(a){return a.duplicate()})),c},getMetadatum:function(a){return this.metadata?this.metadata[a]:void 0},setMetadatum:function(a,b){this.metadata=this.metadata||{},this.metadata[a]=b},deleteMetadatum:function(a){this.metadata&&delete this.metadata[a]},makePageNode:function(a,b,c){return new f({displayName:a,type:"page",subType:c,contentElementType:"Page",children:[]},b)},makeFooterNode:function(){return new f({displayName:"Footer Data",type:"footer",contentElementType:"Footer",children:[]},"footer")},makePortfolioClusterNode:function(a,b){return new f({displayName:a,type:"portfolio",contentElementType:"Portfolio",children:[]},b)},getId:function(){return this.id},setId:function(a){this.id=a;var b=0;angular.forEach(this.children,function(c){c.id=a+"."+b,b++})},setContainerPageId:function(a){this.containerPageId=a},getContainerPageId:function(){return this.containerPageId},getArgsMatchingPolicy:function(){return this.argsMatchingPolicy},getMobileArgsPolicy:function(){return this.mobileArgsPolicy},getReferenceFields:function(){return this.referenceFields},getMobileReferenceFields:function(){return this.mobileReferenceFields},getHiddenMedia:function(){return this.hiddenMedia},toString:function(){return"<<< node id: "+this.getId()+(this.contentElement?" val: "+this.contentElement.toString():"")+" >>>"},getListVisibleAndRegularNodes:function(){return this.children.filter(function(a){return!a.contentElement.isSpecialListItem()&&!a.userHidden})},setZigZagState:function(a,b){return this.isList()?(this.zigZagPattern=b,this.zigZagState=a,this.updateZigZagState()):void 0},updateZigZagState:function(){if(this.isList()){var a=this.getListVisibleAndRegularNodes(),b=d(a);if(this.zigZagState)for(var e=0;e<a.length;e+=1)g[this.zigZagPattern](e)&&c(a[e],this.zigZagState);return b||this.zigZagState}},toJSON:function(){var a={id:this.getId(),alias:this.alias,asymmetric:this.asymmetric,displayName:this.getDisplayName(),metadata:this.metadata,userHidden:this.isUserHidden(),contentElementType:this.getContentElementType(),type:this.getNodeType(),containerPageId:this.getContainerPageId(),argsMatchingPolicy:this.getArgsMatchingPolicy(),mobileArgsPolicy:this.getMobileArgsPolicy(),referenceFields:this.getReferenceFields(),mobileReferenceFields:this.getMobileReferenceFields(),hiddenMedia:this.getHiddenMedia(),crossPageConnected:this.isCrossPageConnected(),nextFirstLevelNodeId:this.nextFirstLevelNodeId,nextPageNodeId:this.nextPageNodeId,bgObj:this.bgObj,pageStyle:this.pageStyle,strip:this.strip,topLine:this.topLine,bottomLine:this.bottomLine,portfolioList:this.portfolioList,portfolioId:this.portfolioId,subType:this.subType,hidePage:this.hidePage,matchingPolicy:this.matchingPolicy,zigZag:this.zigZag,zigZagVersion:this.zigZagVersion,zigZagPattern:this.zigZagPattern,zigZagState:this.zigZagState,dockToWidget:this.dockToWidget,tpaSection:this.tpaSection,anchor:ob.deepClone(this.anchor),crop:this.crop,alignment:this.alignment,isTpa:this.isTpa,isTpaWidget:this.isTpaWidget,tpaExtraPage:this.tpaExtraPage,widgetRef:this.widgetRef,layoutFilter:this.layoutFilter,syncWithBooking:this.syncWithBooking,preferredMedia:this.preferredMedia,mediaType:this.mediaType,source:this.source,backgroundHasFaces:this.backgroundHasFaces};return this.children&&(a.children=this.children.map(function(a){return a.toJSON()})),0===_(a.hiddenMedia).map(_.keys).flatten().value().length&&delete a.hiddenMedia,a=_.pick(a,function(a){return void 0!==a}),a.anchor&&(delete a.anchor.comp,delete a.anchor.linkObj,delete a.anchor.menuId),a},addChild:function(a,b){void 0!==b?this.children.splice(b,0,a):this.children.length&&"ListFooter"===this.children[this.children.length-1].getContentElementType()?this.children.splice(-1,0,a):this.children.push(a)},isUserHidden:function(){return!!this.userHidden},setUserHidden:function(a){this.userHidden=!!a},toggleUserHidden:function(){this.userHidden=!this.userHidden},populate:function(a,b){b&&"contentElementList"===b.getNodeType()&&this.getContentElementType()===b.getContentElementType()?(a.getArgsMatchingPolicy()&&0===_.keys(b.getArgsMatchingPolicy()).length&&(b.argsMatchingPolicy=a.getArgsMatchingPolicy()),this.argsMatchingPolicy=b.argsMatchingPolicy,a.mobileArgsPolicy&&_.keys(0===b.mobileArgsPolicy.length)&&(b.mobileArgsPolicy=a.mobileArgsPolicy),this.mobileArgsPolicy=b.mobileArgsPolicy):a.getArgsMatchingPolicy()&&(this.argsMatchingPolicy=a.getArgsMatchingPolicy(),this.mobileArgsPolicy=a&&a.mobileArgsPolicy||{}),this.contentElement=a,this.hasContentElement()&&("GeneralDescription"===this.contentElement.type&&(this.contentElement.values.Menu||(this.contentElement.values.Menu={signature:"menu",subType:"menu",type:"menu",value:!0}),void 0===this.argsMatchingPolicy.Menu&&(this.argsMatchingPolicy.Menu=!b.isFooter())),this.contentElement.setHiddenMedia(this.hiddenMedia),this.contentElement.setArgsMatchingPolicy(this.argsMatchingPolicy),this.contentElement.setMobileArgsPolicy(this.mobileArgsPolicy),this.contentElement.setReferenceFields(this.referenceFields),this.contentElement.setMobileReferenceFields(this.mobileReferenceFields),this.contentElement.fillValuesByMediaType()),b&&"contentElementList"===b.getNodeType()&&(this.isListItem=!0,b.getContentElementType()!==this.getContentElementType()&&(this.parentContentElementType=b.getContentElementType()))},shouldPopulate:function(){return!("contentElement"!==this.getNodeType()&&"page"!==this.getNodeType()&&"portfolio"!==this.getNodeType()||!this.getContentElementType())},hasContentElement:function(){return!(!this.shouldPopulate()||!this.contentElement)},getContentElementType:function(){return this.contentElementType},getSpecificContentElementType:function(){return"GeneralDescription"!==this.contentElementType?this.contentElementType:"footer"===this.containerPageId?"Footer":"Header"},getContentElement:function(){return this.contentElement},getContentElementTitle:function(){return"contentElement"===this.getNodeType()&&this.contentElement?this.contentElement.getFieldValueByType("text","title",!0)||"":""},getDisplayName:function(){var a=this.getContentElement();if(!a||!a.values||!a.values.displayName)return this.displayNameTemp||this.id;var b=a.values.displayName.value;return!b&&this.nodeDescription.displayName&&(this.setDisplayName(this.nodeDescription.displayName),b=this.getContentElement().values.displayName.value),b||this.id},setDisplayName:function(a){var b=this.getContentElement();b&&b.values&&b.values.displayName&&(b.values.displayName.value=a)},getNodeType:function(){return this.nodeDescription.type},getSubType:function(){return this.nodeDescription.subType},hasPortfolioCluster:function(){return this.portfolioList},isPage:function(a){return(!a||this.nodeDescription.id===a)&&"page"===this.nodeDescription.type},isFooter:function(){return"footer"===this.id},isListHeader:function(){return"ListHeader"===this.getContentElementType()},isListFooter:function(){return"ListFooter"===this.getContentElementType()},isUniqueNode:function(){return 1===this.nodeDescription.cardinality||!1},isHiddenNode:function(){return 0===this.nodeDescription.cardinality||!1},register:function(a){this.hasContentElement()&&this.getContentElement().register(this),this.isOriginalNode(a)&&"contentElementList"===this.getNodeType()&&(f.prototype.originalLists[this.id]=this)},unRegister:function(){this.hasContentElement()&&this.getContentElement().unRegister(this)},getDependencies:function(){if("contentElementList"===this.getNodeType()){var a=[];return this.children.forEach(function(b){a=a.concat(b.getContentElement().getDependencies())}),a}var b=this.getContentElement();return b?b.getDependencies().slice():[]},isOriginalNode:function(a){if(!a.data.children||!a.data.children.length)return!1;for(var b=0;b<a.data.children.length;b++){if(a.data.children[b]===this)return!0;if("contentElementList"===a.data.children[b].getNodeType())for(var c=0;c<a.data.children[b].children.length;c++)if(a.data.children[b].children[c]===this)return!0}return!1},canAddChildren:function(){return"contentElementList"===this.getNodeType()||"page"===this.getNodeType()},hasVisibleChildren:function(){return _.any(this.children,function(a){return!a.isUserHidden()})},hasVisibleFields:function(){return _.any(this.getContentElement().getKeys(),function(a){return!!this.getArgsMatchingPolicy()[a]},this)||_.any(this.getReferenceFields())},hasVisibleMediaField:function(){var a=this;return!!_.find(this.getContentElement().values,function(b,c){return"media"===b.type&&a.getArgsMatchingPolicy()[c]})},getVisibleFieldsKeys:function(){var a=this.getContentElement().getKeys(),b=[];return _.each(a,function(a){this.getArgsMatchingPolicy()[a]&&b.push(a)},this),_.each(this.getReferenceFields(),function(a,c){a&&b.push(c)}),b},updateReferenceFieldVisibility:function(a,b,c,d,f){var g=b.isEmptyField(c);g&&this.getReferenceFields()[a]&&(d?e(a,b,c,f):this.getReferenceFields()[a]=!1)},updateFieldVisibility:function(a,b,c,d){var f=this.getContentElement(),g=f.getFieldValue(a),h=f.isEmptyField(g);h&&this.getArgsMatchingPolicy()[a]?b?e(a,f,g,c):this.getArgsMatchingPolicy()[a]=!1:h||this.getArgsMatchingPolicy()[a]||d&&(this.getArgsMatchingPolicy()[a]=!0)},extraContent:function(){var a=[],b=this;return angular.forEach(f.prototype.originalLists[this.id].children,function(c){var d=!1;angular.forEach(b.children,function(a){c.getContentElement().values===a.getContentElement().values&&(d=!0)}),d||a.push({label:c.getContentElementType()+": "+c.getContentElementTitle(),node:c})}),a},validateFilters:function(){return!0}},f}]),angular.module("siteGeneratorStaticsCoreAppInternal").factory("urlStateKeeper",["$rootScope","$location","$window","heightMutations","applicationParameters","designPolicyService","flags",function(a,b,c,d,e,f,g){function h(){function d(a,b){f[a]&&b(f[a])}var f={};_.each(b.search(),function(a,b){("true"===a||"false"===a)&&(a="true"===a),f[b]=g[b]=a}),["$stateChangeSuccess","$stateChangeError"].forEach(function(c){a.$on(c,function(){angular.forEach(f,function(a,c){b.search(c,a)})})}),d("cropFacePadding",function(a){!isNaN(a)&&1>a&&(g.cropFacePadding=Number(a))}),d("cropTopMargin",function(a){!isNaN(a)&&1>a&&(g.cropTopMargin=Number(a))}),d("debug",function(){g.debugMode=a.debugMode=!0}),g.scaleFactor=1,d("scaleFactor",function(a){g.scaleFactor=a?+a:1,g.scaleFactor=_.max([_.min([2,g.scaleFactor]),.1])}),g.extraWide=0,d("extraWide",function(a){g.extraWide=a||0}),d("debugSanta",function(a){a===!0&&(a="documentServices"),g.debugSanta=a}),d("autoCrop",function(a){a=Number.parseInt(a),g.autoCrop=Number.isNaN(a)?3:a}),d("e2e",function(){g.e2eMode=a.e2eMode=!0,c.onbeforeunload=null}),d("loose",function(){g.matchingPolicy="Loose"}),d("deepLink",function(a){g.deepLink=a}),d("baseline",function(a){e.quarterBaseLine=a||1}),d("onlyLe",function(a){e.onlyLe=a.split(",")}),d("noSpinners",function(){g.noSpinners=!0}),f.reimport&&(g.reimport=!0);var h=b.search();angular.element(c).on("hashchange",function(){var a=b.search();a.lang&&a.lang===h.lang&&!_.isEqual(a,h)&&c.location.reload()})}return h.prototype.getFlag=function(a){return b.search()[a]},new h}]),angular.module("siteGeneratorStaticsCoreAppInternal").service("userDialogService",["$q",function(a){var b,c;_.extend(this,{setLoginDialogApi:function(a){b=a,c&&c.resolve(b.login())},login:function(){return b?b.login():(c||(c=a.defer()),c.promise)}})}]);var __awaiter=this&&this.__awaiter||function(a,b,c,d){return new(c||(c=Promise))(function(e,f){function g(a){try{i(d.next(a))}catch(b){f(b)}}function h(a){try{i(d["throw"](a))}catch(b){f(b)}}function i(a){a.done?e(a.value):new c(function(b){b(a.value)}).then(g,h)}i((d=d.apply(a,b||[])).next())})},__generator=this&&this.__generator||function(a,b){function c(a){return function(b){return d([a,b])}}function d(c){if(e)throw new TypeError("Generator is already executing.");for(;i;)try{if(e=1,f&&(g=f[2&c[0]?"return":c[0]?"throw":"next"])&&!(g=g.call(f,c[1])).done)return g;switch(f=0,g&&(c=[0,g.value]),c[0]){case 0:case 1:g=c;break;case 4:return i.label++,{value:c[1],done:!1};case 5:i.label++,f=c[1],c=[0];continue;case 7:c=i.ops.pop(),i.trys.pop();continue;default:if(g=i.trys,!(g=g.length>0&&g[g.length-1])&&(6===c[0]||2===c[0])){i=0;continue}if(3===c[0]&&(!g||c[1]>g[0]&&c[1]<g[3])){i.label=c[1];break}if(6===c[0]&&i.label<g[1]){i.label=g[1],g=c;break}if(g&&i.label<g[2]){i.label=g[2],i.ops.push(c);break}g[2]&&i.ops.pop(),i.trys.pop();continue}c=b.call(a,i)}catch(d){c=[6,d],f=0}finally{e=g=0}if(5&c[0])throw c[1];return{value:c[0]?c[1]:void 0,done:!0}}var e,f,g,h,i={label:0,sent:function(){if(1&g[0])throw g[1];
return g[1]},trys:[],ops:[]};return h={next:c(0),"throw":c(1),"return":c(2)},"function"==typeof Symbol&&(h[Symbol.iterator]=function(){return this}),h},core;!function(a){var b=function(){function a(a){this.$http=a}return a.$inject=["$http"],a.prototype.getUserDetails=function(){return __awaiter(this,void 0,void 0,function(){var a;return __generator(this,function(b){switch(b.label){case 0:return[4,this.$http.get("/_api/wix-html-login-webapp/user/getUserDetails")];case 1:return a=b.sent(),[2,a.data]}})})},a}();a.UserDetailsService=b}(core||(core={})),angular.module("siteGeneratorStaticsCoreAppInternal").service("userDetailsService",core.UserDetailsService),angular.module("siteGeneratorStaticsCoreAppInternal").factory("VerticalDefaultValues",["$p","$log","BackendVerticalDefaultValue",function(a,b,c){function d(a,c,d,e,f){j||b.error("Defaults manager not initialized"),f=!!f;var g={};return k[d][f]&&k[d][f][a]&&k[d][f][a][c]?g=k[d][f][a][c][e]:k[d][f]&&k[d][f].unspecified&&k[d][f].unspecified.unspecified&&(g=k[d][f].unspecified.unspecified[e]),g}function e(a,b){return c.search({Vertical:a,SubVertical:b}).then(function(a){angular.forEach(a,function(a){g(a)})})}function f(a,b){return m[a]=m[a]||{},m[a][b]=!0,e(a,b)}function g(a){var b=a.footer;b=!!b;var c=a.Vertical,d=a.SubVertical,e=a.MediaCollection;k[e][b]=k[e][b]||{},k[e][b][c]=k[e][b][c]||{},k[e][b][c][d]=a,["ValuesData","CheckBoxesValues","SelectionValues","FontOverrides"].forEach(function(b){var c=a[b];_.isString(c)&&(a[b]=JSON.parse(c||"{}"))})}function h(a,b,c,d,e,f){return a.footer=f,a.Vertical=b,a.SubVertical=c,a.ValuesData=d.valuesData,a.CheckBoxesValues=d.checkBoxesValues,a.MediaCollection=e,a.SelectionValues=d.selectionValues,a.FontOverrides=d.fontOverrides,a.save()}var i,j=!1,k={"false":{},"true":{}},l="unspecified",m={};return{init:function(b,c){if(i)return i;var d=[],e=a.defer();return d.push(f(b,c)),(b!==l||c!==l)&&d.push(f(l,l)),a.all(d).then(function(){j=!0,e.resolve()}),i=e.promise},getDefaultMediaByContentElementType:function(a,b,c){var d=this.getDefaultsValuesByVertical(a,b,!0),e=[];return"All"===c?e=_(d).values().flatten().pluck("media").flatten().value():d[c]&&(e=Array.isArray(d[c])?_(d[c]).pluck("media").flatten().filter().value():d[c].media),e},getDefaultsValuesByVertical:function(a,b,c,e){return d(a,b,c,"ValuesData",e)},getDefaultCheckBoxesValuesByVertical:function(a,b,c,e){return d(a,b,c,"CheckBoxesValues",e)},getDefaultSelectionValuesByVertical:function(a,b,c,e){return d(a,b,c,"SelectionValues",e)},getDefaultFontOverridesByVertical:function(a,b,c,e){return d(a,b,c,"FontOverrides",e)},setDefaultsValuesByVertical:function(a,d,e,f,i){j||b.error("Defaults manager not initialized");var l;return l=k[f][i]&&k[f][i][a]&&k[f][i][a][d]?k[f][i][a][d]:c.build({}),h(l,a,d,e,f,i).then(function(a){g(a)})},loadVerticalSubVertical:function(b,c){return m[b]&&m[b][c]?a.when():f(b,c)}}}]);var VisualValidation=function(){function a(a,b,c,d,e,f,g,h,i,j,k,l,m,n,o,p){this.$log=a,this.obMonitoring=b,this.visualValidationContainer=c,this.componentAttributesBuilder=d,this.visualValidationRenderer=e,this.themeChooser=f,this.$p=g,this.$window=h,this.fontLoader=i,this.previewService=j,this.$timeout=k,this.storyServices=l,this.validationCache=m,this.componentStyles=n,this.richTextService=o,this.flags=p,this.validators={},this.baselineMargins={},this.styles={},this.masterButtonLayouts={height:10,left:0,top:0,type:"button",width:520,subType:"button"},this.masterTextLayouts={componentClass:"wysiwyg.viewer.components.WRichText",height:51,left:0,skinClass:"wysiwyg.viewer.skins.WRichTextNewSkin",style:"txtNew",top:0,type:"text",width:620},l.onClearAllCaches(this.resetCache.bind(this)),l.resetCache=this.resetCache.bind(this),l.setUpCacheByKit=this.setUpCacheByKit.bind(this)}return a.$inject=["$log","obMonitoring","visualValidationContainer","componentAttributesBuilder","visualValidationRenderer","themeChooser","$p","$window","fontLoader","previewService","$timeout","storyServices","validationCache","componentStyles","richTextService","flags"],a.prototype.setProps=function(a,b){_.each(a,function(a,c){b.style[c]=a}),b.children.length&&this.setProps(a,b.children[0])},a.prototype.getComputedStyleCssText=function(a){var b=this.$window.getComputedStyle(a),c=b.cssText;if(c)return c;c="";for(var d=0;d<b.length;d++)c+=b[d]+": "+b.getPropertyValue(b[d])+"; ";return c},a.prototype.copyElement=function(a,b){var c=this,d=!1;a.parentNode||(d=!0,this.visualValidationContainer.$element.get(0).appendChild(a));var e=this.getComputedStyleCssText(a);b&&(e+=b);var f=this.$window.document.createElement(a.tagName);return angular.element(f).attr("style",e),_.each(a.children,function(a){f.appendChild(c.copyElement(a,b))}),d&&a.parentNode.removeChild(a),f},a.prototype.measure=function(a,b,c,d){var e=a.div,f=this.innerChild(e),g=angular.element(f);this.setProps(c,e),g.html(b),this.visualValidationContainer.$element.get(0).appendChild(e);var h=a.div.offsetHeight,i=(d?a.div:a.div.children[0]).scrollWidth,j=Math.ceil(h/a.lineHeight);return this.visualValidationContainer.$element.get(0).removeChild(e),g.html(""),{width:i,height:h,lines:j,lineHeight:a.lineHeight,lineMargin:a.lineMargin}},a.prototype.measureBaselineMargin=function(a,b){var c=angular.element(b),d=c.css("font")||c[0].style.font;if(!this.baselineMargins[d]){var e=angular.element(a),f=e.css("height"),g=angular.element('<div class="font-baseline"></div>'),h=c.css("line-height");g.css("height",h),e.css("height",h);var i=angular.element("<span>T</span>")[0];g.append(i),c.append(g);var j=i.offsetTop+i.offsetHeight;g.append('<span class="fixer"></span>');var k=i.offsetTop+i.offsetHeight-j,l=a.offsetHeight-k,m=parseInt(c.css("font-size"),10);this.baselineMargins[d]={baselineMargin:l,fontFamily:c.css("font-family"),fontSize:m,topMargin:i.offsetHeight-m},e.css("height",f),g.remove()}return this.baselineMargins[d]},a.prototype.getStyleProps=function(a,b,c,d){var e=this.componentAttributesBuilder.createAttributes(a,"",c,b),f={font:e.layout.font,style:e.styleId,skin:e.skin,margin:e.layout.margin||0,caps:d&&d.isCapsLock()||"",isMobile:"text"===a.type&&!!(b&&b.isMobile()||a.isMobile)};return f},a.prototype.getShapeSVG=function(a,b,c){var d=this;return c=c||0,this.visualValidationRenderer.buildComponentForValidation(a,[b]).then(function(e){return d.previewService.waitForChanges().then(function(){var f,g=d.previewService.getElementByCompRef(e),h=g&&g.getElementsByTagName("svg")[0],i=h&&h.getBoundingClientRect(),j=i&&i.width&&i.height;return j||c>=2?(j||d.$log.error("failed to measure shape "+JSON.stringify(b)),f={width:i&&i.width||60,height:i&&i.height||60,html:g.innerHTML}):f=d.$timeout(function(){return d.getShapeSVG(a,b,++c)},500),d.previewService.remove(e),f})})},a.prototype.buildElClone=function(a,b,c){return this.buildElClones([{layout:a,overrides:b&&b.overrides,value:"x",le:b,props:c}]).then(function(a){return a[0]})},a.prototype.buildElClones=function(a){var b=this;return this.visualValidationRenderer.buildComponentsForValidation(a).then(function(c){return b.previewService.waitForChanges().then(function(){var d=[],e=[];_.each(c,function(c,f){var g,h,i,j=a[f],k=j.layout,l=b.previewService.getElementByCompRef(c);if(l&&(l=l.children[0],g=b.innerChild(l),("button"===k.type||"line"===k.type)&&(l=g.parentElement),"text"===k.type&&b.flags.dsValidationContainerOptim&&(i="line-height:"+b.themeChooser.getLineHeight("font_"+k.font)+";"),h=b.copyElement(l,i),g)){var m=b.$window.getComputedStyle(g),n=m.fontFamily.split(",")[0];n&&n.replace&&(n=n.replace(/\'/g,""),n=n.replace(/\"/g,"")),e.push(n)}d.push(h),b.visualValidationRenderer.onAfterUseComponent(j,c)});var f=_.chain(e).unique().map(function(a){return b.fontLoader.loadFont(a)}).value();return b.$p.all(f).then(function(){return d})})})},a.prototype.createValidator=function(a,b,c){var d=this.innerChild(c);this.visualValidationContainer.$element.get(0).appendChild(c);var e=this.fixedLineHeight(c,d,a.type),f=this.measureBaselineMargin(c,d),g={type:a.type,div:c,lineHeight:e,lineMargin:f.baselineMargin,fontFamily:f.fontFamily,fontSize:f.fontSize,topMargin:f.topMargin,key:b};this.setValidator(b,g),this.visualValidationContainer.$element.get(0).removeChild(c)},a.prototype.shouldUseValidator=function(a,b){return this.flags.renderedModel?!(b.isMediaType(a)||"social"===a.type||"form"===a.type):!(b.isMediaType(a)||"social"===a.type)},a.prototype.getOrBuildValidator=function(a,b){var c=this;if(b&&!this.shouldUseValidator(a,b))return this.$p.when({lineHeight:0,lineMargin:0,topMargin:0});var d="text"===a.type,e=b&&b.getFormatting(a,!0),f=b&&b.overrides,g=this.getStyleProps(a,b,f,e),h=this.getValidator(g,d);return h?this.$p.when(h):this.buildElClone(a,b,g).then(function(b){return c.createValidator(a,g,b),c.getValidator(g,d)})},a.prototype.ensureValidatorsForPreview=function(){var a=this,b=[];b.push(_.map(this.componentStyles.styles.line,function(b){var c={height:2,left:0,top:0,type:"line",width:520,style:b},d={style:{line:b}},e=a.getStyleProps(c,void 0,d,void 0);return{layout:c,overrides:d,value:"x",props:e}})),b.push(_.map(this.componentStyles.styles.container,function(b){var c={height:200,left:0,top:0,type:"container",containerRole:"decorative",width:520,style:b},d={style:{container:b}},e=a.getStyleProps(c,void 0,d,void 0);return{layout:c,overrides:d,value:"x",props:e}}));var c={height:200,left:0,top:0,type:"container",containerRole:"structure",width:520,style:"c100"},d={style:{container:"c100"}},e=this.getStyleProps(c,void 0,d,void 0);return b.push({layout:c,overrides:d,value:"x",props:e}),b=_(b).flatten().filter(function(b){return!a.getValidator(b.props,!1)}).value(),this.buildElClones(b).then(function(c){_.each(c,function(c,d){var e=b[d].layout;a.createValidator(e,b[d].props,c)})})},a.prototype.setUpCacheByKit=function(){var a=this;this.obMonitoring.mark({name:"setUpCacheByKit"});var b=this.themeChooser.getActiveFontTheme(),c=_.chain(b.kitFonts).map(function(a,b){if(a.font){var c="BTN"===b?"button":"text",d=[];return"button"===c&&d.push({type:c,font:a.font}),"text"===c&&d.push({type:c,font:a.font}),d}}).filter().flatten().unique(function(a){return _.map(a).join("|")}).value(),d=_.chain(c).map(function(b){var c;return"button"===b.type?_.map(a.componentStyles.styles.button,function(d){return _.map([0,20,25],function(e){var f=_.extend({margin:e,style:d,font:b.font.replace("font_","")},a.masterButtonLayouts),g={style:{button:d}};return c=a.getStyleProps(f,void 0,g,void 0),{layout:f,overrides:g,value:"x",props:c}})}):_.map(a.flags.mobileEditor?[!0,!1]:[!1],function(d){var e=_.extend({font:b.font.replace("font_",""),isMobile:d},a.masterTextLayouts);return c=a.getStyleProps(e,void 0,void 0,void 0),{layout:e,value:"x",props:c}})}).flattenDeep().value();return this.buildElClones(d).then(function(b){_.each(b,function(b,c){var e=d[c].layout;a.createValidator(e,d[c].props,b)}),a.obMonitoring.measure({name:"setUpCacheByKit"})})},a.prototype.getThemeFonts=function(a,b){var c=this,d={};return _.allPromises(a||["0","1","2","3","4","5","6","7","8","9","10"],function(a){var e=_.extend({font:a,isMobile:b},c.masterTextLayouts),f="font_"+a;return c.getOrBuildValidator(e).then(function(a){return d[f]={fontSize:a.fontSize,lineHeight:a.lineHeight,lineMargin:a.lineMargin,css:a.css},!0})}).then(_.constant(d))},a.prototype.validateButton=function(a,b){var c=this.measure(a,_.htmlEncode(b),{width:"auto",whiteSpace:"nowrap"});return c.lineMargin=15,c},a.prototype.validateForm=function(a,b){return this.flags.renderedModel?void 0:this.measure(a,"validation error",{maxWidth:b+"px",width:"auto",height:"auto",position:"relative",wordWrap:"normal"})},a.prototype.validate=function(a,b,c){var d=this,e=c.getLayoutValue(a,b);return this.getOrBuildValidator(a,c).then(function(f){if("button"===a.type)return d.validateButton(f,e);if("form"!==a.type||d.flags.renderedModel){var g=d.richTextService.isRichText(b)?d.richTextService.unMarkRichText(e):d.richTextService.transformForEditor(e,c.getFormatting(a,!0)),h={maxWidth:a.width+"px",width:"auto",height:"auto"};return c.ignoreUglyRules()?h.wordWrap="break-word":h.wordWrap="normal",d.measure(f,g,h,!0)}return d.validateForm(f,a.width)})},a.prototype.innerChild=function(a){for(;a.children.length&&"BR"!==_.last(a.children).nodeName;)a=_.last(a.children);return a},a.prototype.fixedLineHeight=function(a,b,c){var d=angular.element(a),e=angular.element(b);e.css("height","auto"),"text"===c&&e.css("display","block");var f=e.html(),g=d.parent();e.html("X");var h=e.height();return e.css("line-height",h+"px"),e.html(f),g.length?g.append(a):d.remove(),parseFloat(h)},a.prototype.getValidator=function(a,b){return this.validators[this.getValidatorKey(a,b)]},a.prototype.getValidatorKey=function(a,b){return b?this.makeClassName(a.font,a.caps,a.isMobile):this.visualValidationRenderer.getComponentId(a)},a.prototype.makeClassName=function(a,b,c){return"adi"+(c&&"-mobile"||"")+"-text-validator-font-"+a+(b&&"Caps"||"")},a.prototype.setValidator=function(a,b){var c=this;"text"!==b.type?this.validators[this.visualValidationRenderer.getComponentId(a)]=b:_.each([!0,!1],function(d){var e=c.makeClassName(a.font,d,a.isMobile);if(!c.validators[e]){var f=angular.element("<style></style>").attr("id",e),g=_.map(["p","h1","h2","h3","h4","h5","h6","li"],function(a){return"."+e+" "+a}).join(",\n"),h="font_"+a.font,i=c.themeChooser.getFontStyle(h),j=c.themeChooser.getLineHeight(h),k=c.getComputedStyleCssText(b.div)+";max-width:none;width:auto;height:auto;font:"+i+";font-size:"+b.fontSize+"px;line-height:"+j+";text-transform:"+(d&&"uppercase"||"none")+";";f.html("\n"+g+" {\n"+k+"word-wrap:inherit;\n}"),angular.element("head").append(f),c.styles[e]=f;var l=angular.element('<div class="adi-text-validator"></div>').addClass(e).attr("style",k);c.validators[e]=_.assign(_.clone(b),{div:l[0],css:k})}})},a.prototype.resetCache=function(){this.validators={},this.baselineMargins={},_.each(this.styles,function(a){a.remove()}),this.styles={},this.validationCache.resetCache()},a}();angular.module("siteGeneratorStaticsCoreAppInternal").service("visualValidation",VisualValidation),function(){function a(a){function c(){var a=new b.Source(b.sources.PRIVATE,{});return a}function d(a){var b=_.map(a,e);return b}function e(a){var b=c(),d=_.assign({},g,a);return b.item.uploadByUrl(d)}function f(){throw a.error("wixMediaPlatformSDK not loading"),"wixMediaPlatformSDK not loading"}var g={name:"Untitled",tags:["_imported"],mediaType:"picture"};return{uploadPrivateImage:b?e:f,uploadPrivateImages:b?d:f}}a.$inject=["$log"];var b=window.wixmp;angular.module("siteGeneratorStaticsCoreAppInternal").factory("wixMediaPlatform",a)}(),function(){function a(a,b,c,d){function e(a){p=a}function f(b,c){c=c||_.values(o);var d={searchParams:b,platforms:c,esi:p};return a.post(n.PLATFORM_SEARCH,d).then(function(a){return a.data})}function g(b,c){_.isEmpty(c)&&(c=_.values(o));var d={searchParams:b,platforms:c};return a.post(n.PLATFORM_SEARCH,d).then(h)}function h(a){var b=[{providerResultsKey:"unified_search",platform:"unified"},{providerResultsKey:"factual_search",platform:o.FACTUAL},{providerResultsKey:"googleplus_search",platform:o.GOOGLE_PLUS},{providerResultsKey:"googleplaces_search",platform:o.GOOGLE_PLACES},{providerResultsKey:"yelp_search",platform:o.YELP},{providerResultsKey:"youtube_search",platform:o.YOUTUBE},{providerResultsKey:"facebook_search",platform:o.FACEBOOK}];a=a.data;var c=_.reduce(b,function(b,c){var d=_.map(a[c.providerResultsKey],function(a){var b={platform:c.platform};return _.assign({},a,b)});return b.concat(d)},[]);return c}function i(b){var c={urls:b,requestOrigin:"onboarding"};return a.post(n.GET_BUSINESS_INFO,c).then(j)}function j(a){var b={TITLE:"platforms.0.general_info.site_title",DESCRIPTION:"platforms.0.general_info.short_description",URL:"platforms.0.contact_details.website",LOGO:"platforms.0.general_info.logo",COVER:"platforms.0.general_info.cover_photo",PHOTO_ALBUMS:"platforms.0.photos_albums"},c="http://web.vmc3.com/projects/bufs/branch/coastguard/logos/NoLogo.jpg",d="",e=[{fieldName:"Name",type:"text",value:_.get(a.data,b.TITLE)},{fieldName:"Description",type:"text",value:_.get(a.data,b.DESCRIPTION)},{fieldName:"Url",type:"link",value:_.get(a.data,b.URL)},{fieldName:"Logo",type:"logo",value:_.get(a.data,b.LOGO)},{fieldName:"Cover",type:"img",value:_.get(a.data,b.COVER)},{fieldName:"Photos",type:"images",value:_.get(a.data,b.PHOTO_ALBUMS)}];return e=_.map(e,function(a){return _.includes(["logo","img"],a.type)?_.defaults(a,{value:c}):_.defaults(a,{value:d})})}function k(a){var c={tags:["_imported","_site_builder"],mediaType:"picture"},d=_.map(a,function(a){return _.assign({},c,{url:a})}),e=b.uploadPrivateImages(d);return Promise.all(e)}function l(b,c,d){var e={businessQuery:b,urls:c,requestOrigin:"onboarding",searchId:d,esi:p};return a.post(n.GET_BUSINESS_INFO,e).then(function(a){var b=_.find(a.data.platforms,function(a){return"unified_fields"===a.platform_name});return b})}function m(b){if(b.urls){var d=b.urls.some(function(a){return q.test(a)});if(d)return a.post(n.UPDATE_SITE_SOURCES,b)}return c.when()}var n={PLATFORM_SEARCH:"/_api/any2wix-server/platformsearch",GET_BUSINESS_INFO:"/_api/any2wix-server/analyzeplatforms",UPDATE_SITE_SOURCES:"/_api/any2wix-server/savesitesources"},o={FACTUAL:"factual",FACEBOOK:"facebook",GOOGLE_PLACES:"google_places",YELP:"yelp"};d.introTestNoFactual&&delete o.FACTUAL;var p,q=/^https:\/\/maps\.googleapis\.com\/maps\/api\/place\/details\/json/;return{PLATFORMS:o,searchBusiness:f,setSessionId:e,searchBusinessFlatten:g,analyzeBusinessByUrls:i,saveBusinessImagesToWixMedia:k,getExtendedBusinessData:l,sendSiteSources:m}}a.$inject=["$http","wixMediaPlatform","$q","flags"],angular.module("siteGeneratorStaticsCoreAppInternal").factory("wixWizIntegration",a)}(),angular.module("siteGeneratorStaticsCoreAppInternal").factory("colorThiefService",["mediaGallery","$p",function(a,b){function c(a,b){return+a.getStripImageArgIndex()===b.argIndex}function d(a,b){return b?a+j+b.top+j+b.left+j+b.width+j+b.height:a+j+"full"}function e(a,b){h[a]=b}function f(a,b){var c=a.relativeUri,d=b.width,e=b.height;return"http://static.wixstatic.com/media/"+c+"/v1/fill/w_"+d+",h_"+e+"/"+c}function g(a,b,c,e){var f=d(a,e);if(!i[f]){var g=new ColorThief;if(!h[a]||!h[a].width)return;if(e){if(h[a].width<b){var j=h[a].width/b;e.width*=j,e.left*=j}if(h[a].height<c){var k=h[a].height/c;e.top*=k,e.height*=k}}var l=g.getPalette(h[a],5,void 0,e);i[f]=l&&l[0]||[255,255,255]}return i[f]}var h={},i={},j="|";return{cacheImage:function(a,c){var d=a.getLayoutBySubType("image"),g=f(c,d);if(h[g])return h[g].then?h[g]:b.when();var i=b.defer(),j=new Image;return j.crossOrigin="anonymous",j.onload=function(){e(g,j),i.resolve()},j.onerror=function(){i.resolve()},j.src=g+"?t="+(new Date).getTime(),h[g]=i.promise,i.promise},getColorOfImageBehindText:function(a,b,d){var e=b.getLayoutWithArgIndex(d.onMediaIndex),h=b.getLayoutParent(d);if(h){var i;c(b,e)||(i={top:h.top+d.top-e.top,left:h.left+d.left-e.left,width:d.width,height:d.height});var j=f(a,e,i);return g(j,e.width,e.height,i)}},getColorOfStripImage:function(a,b){var c=a.getLayoutBySubType("image"),d=f(b,c);return g(d)},isColorDark:function(a){var b=(299*a[0]+587*a[1]+114*a[2])/1e3;return 128>b}}}]);var core;!function(a){var b=function(){function b(a,b,c,d,e,f,g,h,i,j,k,l,m,n,o,p,q,r,s,t,u,v,w,x,y,z,A,B,C){var D=this;this.modelTree=a,this.menuService=b,this.$location=c,this.$p=d,this.$log=e,this.themeChooser=f,this.pagesManager=g,this.renderer=h,this.previewService=i,this.documentServicesMediator=j,this.layoutSolver=k,this.stories=l,this.layoutSelectionStoreProvider=m,this.defaultsService=n,this.storyServices=o,this.spinnerService=p,this.toasterService=q,this.VerticalDefaultValues=r,this.siteLayoutLoader=s,this.userService=t,this.designPolicies=u,this.visualValidationRenderer=v,this.designPolicyService=w,this.wizardCallbacksService=x,this.flags=y,this.applicationEvents=z,this.tpaService=A,this.richTextLinks=B,this.obMonitoring=C,this.storyNameValidator=function(a){return D.previewService.isSiteNameValid(a)},this.siteWasPublished=function(){return!D.previewService.isFirstSave()},this.isFixedHeader=function(){return D.layoutSelectionStoreProvider.getLayoutSelectionStore().getFixedHeader()},this.saveStory=function(){return D.wizardCallbacksService.saveStory()},this.dsPublish=function(){return D.documentServicesMediator.publish().then(function(){return D.flags.sendPublishToServer?D.wizardCallbacksService.publishStory():void 0})},this.registerWithSaveCustomeTheme=function(a){return D.wizardCallbacksService.saveCustomeTheme=a},this.initAfterWaitForChanges=function(a,b){return D.flags.newBIInitEvents||D.obMonitoring.mark({name:"coreLoadingWizardServiceCoreInitializeAfterWait",init:!0}),D.initStoryStyles(a).then(function(){return b?void 0:D.flags.consumerMode?D.initNodeChanged():void D.storyServices.emitNodeChangedClearCache()}).then(function(){return D.spinnerService.imDone("wizard service"),D.flags.newBIInitEvents||D.obMonitoring.measure({name:"coreLoadingWizardServiceCoreInitializeAfterWait",init:!0}),a})},this.initModelTree=function(a){return D.modelTree.initFromStory(a).then(function(b){if(b)D.layoutSelectionStoreProvider.getLayoutSelectionStore().fontOverridesManager.fontOverrides=D.VerticalDefaultValues.getDefaultFontOverridesByVertical(D.storyServices.story.vertical,D.storyServices.story.subVertical,!1);else{D.modelTree.traverse(function(a){a.layoutFilter=a.layoutFilter||D.layoutSelectionStoreProvider.getLayoutSelectionStore().nodeFilterFromNode(a)}),D.storyServices.routeSelectedPage&&(a.selectedPage=D.storyServices.routeSelectedPage);var c=D.modelTree.getPageNodeById(a.selectedPage);if(!c){var d=D.modelTree.getPagesNodes();a.selectedPage=d.length?d[0].getId():null}}})},this.initDesignPolicy=function(){return D.designPolicies.getAll().then(function(a){D.flags.designKit&&(D.layoutSelectionStoreProvider.getLayoutSelectionStore().designPolicy=D.layoutSelectionStoreProvider.getLayoutSelectionStore().designPolicy||{},D.layoutSelectionStoreProvider.getLayoutSelectionStore().designPolicy.id="linear");var b=D.layoutSelectionStoreProvider.getLayoutSelectionStore().designPolicy&&D.layoutSelectionStoreProvider.getLayoutSelectionStore().designPolicy.id;D.designPolicyService.designPolicy=_.find(a,{id:b})||_.first(a);var c=D.layoutSelectionStoreProvider.getLayoutSelectionStore().designPolicy;D.themeChooser.setDesignPolicy(c)})},o.onChangingPage(x.changePageCB),o.onLocaleChanged(function(){a.switchLocale(),_.each(a.getPagesNodes(),function(a){return g.updatePageNameAndVisibility(a)})})}return b.$inject=["modelTree","menuService","$location","$p","$log","themeChooser","pagesManager","renderer","previewService","documentServicesMediator","layoutSolver","stories","layoutSelectionStoreProvider","defaultsService","storyServices","spinnerService","toasterService","VerticalDefaultValues","siteLayoutLoader","userService","designPolicies","visualValidationRenderer","designPolicyService","wizardCallbacksService","flags","applicationEvents","tpaService","richTextLinks","obMonitoring"],b.prototype.loadLayouts=function(b){var c=this;return this.obMonitoring.mark({name:this.flags.newBIInitEvents?a.BIWizardServiceInitSteps.LoadLayouts:"coreLoadingLoadLayouts",parent:a.BIWizardServiceInitSteps.Init,init:!0}),this.siteLayoutLoader.initialize(!1).then(function(){b.scenarioId=c.siteLayoutLoader.loadedScenarios.join(","),c.obMonitoring.measure({name:c.flags.newBIInitEvents?a.BIWizardServiceInitSteps.LoadLayouts:"coreLoadingLoadLayouts",parent:a.BIWizardServiceInitSteps.Init,init:!0})})},b.prototype.initStoryStyles=function(b){var c=this;return this.obMonitoring.mark({name:this.flags.newBIInitEvents?a.BIWizardServiceInitBSteps.SetStyles:"coreLoadingWizardServiceSetStoryStyles",parent:a.BIWizardServiceInitBSteps.Init,init:!0}),this.themeChooser.setStoryStyles(b).then(function(){return c.obMonitoring.measure({name:c.flags.newBIInitEvents?a.BIWizardServiceInitBSteps.SetStyles:"coreLoadingWizardServiceSetStoryStyles",parent:a.BIWizardServiceInitBSteps.Init,init:!0}),c.documentServicesMediator.siteChanges.flush()})},b.prototype.initNodeChanged=function(){var b=this;return this.obMonitoring.mark({name:this.flags.newBIInitEvents?a.BIWizardServiceInitBSteps.NodeChanged:"coreLoadingNodeChange",parent:a.BIWizardServiceInitBSteps.Init,init:!0}),this.layoutSolver.onNodeChanged().then(function(){b.obMonitoring.measure({name:b.flags.newBIInitEvents?a.BIWizardServiceInitBSteps.NodeChanged:"coreLoadingNodeChange",parent:a.BIWizardServiceInitBSteps.Init,init:!0})})},b.prototype.init=function(a,b,c){var d=this;this.spinnerService.waitForMe("wizard service"),this.flags.newBIInitEvents||this.obMonitoring.mark({name:"coreLoadingWizardServiceCoreInitialize",init:!0});var e=this.flags.consumerMode?this.$p.when(a):this.stories.get(a),f=e.then(function(a){return d.loadLayouts(a)}),g=e.then(function(a){return d.loadStory(b,a)}),h=g.then(function(a){return d.loadPreview(a)}),i=g.then(function(a){return d.initThemeChooser()}),j=this.initLayoutSolver(),k=this.wizardCallbacksService.customPromise(a),l=this.$p.all([e,f,h,i,k,j]);return l.then(function(){return d.initBackwardCompatibility()}).then(function(){return d.initChangeStory()}).then(function(){return d.setFixedHeader(),d.flags.newBIInitEvents||d.obMonitoring.measure({name:"coreLoadingWizardServiceCoreInitialize",init:!0}),d.storyServices.story})},b.prototype.initForStudio=function(a,b){var c=this;return this.init(a,b).then(function(a){return c.initAfterWaitForChanges(a,!1)})},b.prototype.reloadStory=function(){var a=this.storyServices.story.id,b=this.storyServices.story.activeLocale;return this.init(a,b)},b.prototype.initChangeStory=function(){var b=this;return this.obMonitoring.mark({name:this.flags.newBIInitEvents?a.BIWizardServiceInitSteps.ChangeStory:"coreLoadingWizardServiceChangeStory",parent:a.BIWizardServiceInitSteps.Init,init:!0}),this.pagesManager.changeStory().then(function(){b.obMonitoring.measure({name:b.flags.newBIInitEvents?a.BIWizardServiceInitSteps.ChangeStory:"coreLoadingWizardServiceChangeStory",parent:a.BIWizardServiceInitSteps.Init,init:!0}),b.menuService.initialize()})},b.prototype.initLayoutSolver=function(){var b=this;return this.obMonitoring.mark({name:this.flags.newBIInitEvents?a.BIWizardServiceInitSteps.InitLayoutSolver:"coreLoadingLoadLayoutSolver",parent:a.BIWizardServiceInitSteps.Init,init:!0}),this.layoutSolver.initialize().then(function(){return b.obMonitoring.measure({name:b.flags.newBIInitEvents?a.BIWizardServiceInitSteps.InitLayoutSolver:"coreLoadingLoadLayoutSolver",parent:a.BIWizardServiceInitSteps.Init,init:!0})})},b.prototype.initThemeChooser=function(){var b=this;return this.obMonitoring.mark({name:this.flags.newBIInitEvents?a.BIWizardServiceInitSteps.InitThemeChooser:"coreLoadingLoadThemChooser",parent:a.BIWizardServiceInitSteps.Init,init:!0}),this.themeChooser.initialize().then(function(){b.obMonitoring.measure({name:b.flags.newBIInitEvents?a.BIWizardServiceInitSteps.InitThemeChooser:"coreLoadingLoadThemChooser",parent:a.BIWizardServiceInitSteps.Init,init:!0})})},b.prototype.initBackwardCompatibility=function(){var b=this;return this.flags.newBIInitEvents&&this.obMonitoring.mark({name:a.BIWizardServiceInitSteps.BackwardCompatibility,parent:a.BIWizardServiceInitSteps.Init,init:!0}),this.backwardCompatibility().then(function(){b.flags.newBIInitEvents&&b.obMonitoring.measure({name:a.BIWizardServiceInitSteps.BackwardCompatibility,parent:a.BIWizardServiceInitSteps.Init,init:!0})})},b.prototype.loadPreview=function(b){var c=this;return this.obMonitoring.mark({name:this.flags.newBIInitEvents?a.BIWizardServiceInitSteps.LoadPreview:"coreLoadingWizardServiceLoadPreview",parent:a.BIWizardServiceInitSteps.Init,init:!0}),this.userService.getCurrentUser().then(function(d){var e,f=b.getActiveLocale().savedSites,g=d.id,h=f&&f[g],i=h&&h.siteId,j=h&&h.metaSiteId;return e=j?c.wizardCallbacksService.getMetaSiteDetails(j).then(function(){return c.loadStoryUrl(i,j)})["catch"](function(){return delete f[g],c.loadStoryUrl()}):c.loadStoryUrl(),e.then(function(){return c.obMonitoring.measure({name:c.flags.newBIInitEvents?a.BIWizardServiceInitSteps.LoadPreview:"coreLoadingWizardServiceLoadPreview",parent:a.BIWizardServiceInitSteps.Init,init:!0})})})},b.prototype.loadStoryUrl=function(b,c){var d=this;return this.obMonitoring.mark({name:this.flags.newBIInitEvents?a.BIWizardServiceInitSteps.LoadStoryUrl:"coreLoadingLoadIframe",parent:a.BIWizardServiceInitSteps.LoadPreview,init:!0}),this.previewService.loadStoryUrl(b,c).then(function(){d.obMonitoring.measure({name:d.flags.newBIInitEvents?a.BIWizardServiceInitSteps.LoadStoryUrl:"coreLoadingLoadIframe",parent:a.BIWizardServiceInitSteps.LoadPreview,init:!0})})},b.prototype.loadStory=function(a,b){var c=this;return this.storyServices.story=b,this.defaultsService.init(this.storyServices.story.vertical,this.storyServices.story.subVertical).then(function(){return c.stories.loadStoryLocales(b)}).then(function(){return a&&(b.activeLocale=a),c.wizardCallbacksService.togglePreview()&&c.storyServices.togglePreview(!0),c.layoutSelectionStoreProvider.getLayoutSelectionStore().deserialize(b.getActiveLocale().layoutSelections),c.initModelTree(b)}).then(function(){b.mainMenu?c.menuService.deserialize(b.mainMenu):c.menuService.reset()}).then(function(){c.richTextLinks.setData(b.richTextLinks||{})}).then(function(){return c.initDesignPolicy()}).then(_.constant(b))},b.prototype.saveStoryWithVisualEffects=function(){var a=this;this.spinnerService.waitForMe("saveStory"),this.saveStory().then(function(){a.toasterService.info("Saved",!0),a.spinnerService.imDone("saveStory")},function(){a.toasterService.error("Error saving story",!0),a.spinnerService.imDone("saveStory")})},b.prototype.publishConsumerStory=function(){var a=this;return this.spinnerService.waitForMe("publishConsumerStory"),this.publishStory().then(function(){return a.dsPublish()})["finally"](function(){return a.spinnerService.imDone("publishConsumerStory")})},b.prototype.publishStory=function(a,b,c){var d=this;this.storyServices.nodesRefMap={};var e;return e=c?this.$p.when():this.flags.mobileEditor?this.storyServices.calculateAndRenderDesktopAndMobilePages("all",!!b):this.storyServices.calculateAndRenderAllPages(b),e.then(function(){var c,e=!d.previewService.isFirstSave()&&d.previewService.getSiteId(),f=d.storyServices.getSavedSite();return f&&(c=f.siteId),(e||c)&&e!==c?d.$p.reject("Something's up with the site ids. Something bad."):(d.visualValidationRenderer.onBeforeSave(b),e?d.rePublishStory():d.firstPublishStory(a))}).then(function(){return d.saveStory()}).then(function(){return!d.flags.consumerMode&&b?d.storyServices.reRender():void 0})},b.prototype.firstPublishStory=function(a){var b=this,c=this.previewService.setSiteName(a);return c?this.$p.reject(c):this.userService.getCurrentUser().then(function(a){return b.dsSave().then(function(){var c=b.storyServices.story.getActiveLocale();c.savedSites=c.savedSites||{},c.savedSites[a.id]={nodesRefMap:b.storyServices.nodesRefMap,pagesMap:b.pagesManager.getNameToPageMap()},c.savedSites[a.id].siteId=b.previewService.getSiteId(),c.savedSites[a.id].metaSiteId=b.previewService.getMetaSiteId()})})},b.prototype.rePublishStory=function(){var a=this;return this.dsSave().then(function(){return a.userService.getCurrentUser()}).then(function(b){var c=a.storyServices.story.getActiveLocale();c.savedSites[b.id].nodesRefMap=a.storyServices.nodesRefMap,c.savedSites[b.id].pagesMap=a.pagesManager.getNameToPageMap()})},b.prototype.dsSave=function(){var a=this;return this.flags.consumerMode&&this.wizardCallbacksService.onDsSaveStart(),this.documentServicesMediator.save()["catch"](function(b){return a.wizardCallbacksService.onDsSaveError(b)})},b.prototype.setActiveLocale=function(a){var b=this,c=this.storyServices.story;c.storyLocales[a].id&&(this.spinnerService.forceStart(),c.getActiveLocale().layoutSelections=this.layoutSelectionStoreProvider.getLayoutSelectionStore().serialize(),c.getActiveLocale().save().then(function(){
b.toasterService.info("Locale "+c.activeLocale+" has been saved",!0),b.$location.search("lang",a),c.activeLocale=a,b.layoutSelectionStoreProvider.getLayoutSelectionStore().deserialize(c.getActiveLocale().layoutSelections),b.themeChooser.setThemeByID({font:c.getActiveLocale().styles.themeFonts}),b.storyServices.emitLocaleChanged()}))},b.prototype.onReferenceFieldChanged=function(a,b,c,d){var e=this,f=[];if(c||d){var g=c?angular.equals(a.getVisibleFieldsKeys(),[b]):!a.hasVisibleFields();this.modelTree.updateReferenceFieldsVisibility(a,b,c),f=this.modelTree.updateNodeVisibility(a,void 0,g)}var h=b.split("."),i=h[0],j=h[1];if(this.modelTree.traverse(function(c,d){c!==a&&"contentElement"===c.getNodeType()&&("GeneralDescription"===c.getContentElementType()||d.isPage()||d.isFooter())&&c.contentElement.getReferenceFields()[b]&&e.modelTree.updateReferenceFieldsVisibility(c,b),"contentElement"===c.getNodeType()&&(d.isPage()||d.isFooter())&&c.getContentElementType()===i&&e.modelTree.updateFieldsVisibility(c,d,j)}),f&&f.length)this.storyServices.emitNodeChanged(a,f,"userHidden");else{if(this.flags.consumerMode)return this.layoutSolver.handleValueChange(a.getContentElement(),"reference",!0,!1,i);this.storyServices.emitReferenceFieldChanged(a)}return this.$p.when()},b.prototype.onFieldChanged=function(a,b,c,d,e,f){var g=this;this.onInnerFieldChanged(a,b,c,d,e,f,function(a,b,c,d,e,f){switch(a){case g.applicationEvents.nodeChanged:g.storyServices.emitNodeChanged(b,c,"userHidden");break;case g.applicationEvents.blurChanged:g.storyServices.emitBlurChanged(b.getContentElement(),d,e);break;case g.applicationEvents.valueChanged:g.storyServices.emitValueChanged(b.getContentElement(),d,e,f)}return g.$p.when()})},b.prototype.onSynchronousFieldChanged=function(a,b,c,d,e,f){var g=this;return this.onInnerFieldChanged(a,b,c,d,e,f,function(a,b,c,d,e,f){switch(a){case g.applicationEvents.nodeChanged:return g.$log.error("we should never get here!!! (onSynchronousFieldChanged with nodeChanged)"),g.layoutSolver.onNodeChanged(null,b,c,"userHidden");case g.applicationEvents.blurChanged:return g.layoutSolver.handleValueChange(b.getContentElement(),d,e,!0);case g.applicationEvents.valueChanged:return e?g.layoutSolver.handleMaskChange(b.getContentElement(),d):g.layoutSolver.handleValueChange(b.getContentElement(),d,!1,f)}})},b.prototype.onInnerFieldChanged=function(a,b,c,d,e,f,g){var h=this,i=[],j=a.getArgsMatchingPolicy()[b];if(d||e||f){var k=f&&(e||"media"===f.type)&&a.getContentElement().isEmptyField(f),l=d?angular.equals(a.getVisibleFieldsKeys(),[b]):!a.hasVisibleFields();this.modelTree.updateFieldsVisibility(a,c,b,d,k),i=this.modelTree.updateNodeVisibility(a,c,l)}var m=a.getArgsMatchingPolicy()[b];d=d||j!==m;var n=this.modelTree.updateLayoutFilter(a,c,b);if(n&&(i=c&&c.isList()?c.children:[a]),this.modelTree.isReferenceField(a.getContentElementType(),b)){var o=a.getContentElementType()+"."+b;this.modelTree.traverse(function(b,c){b!==a&&"contentElement"===b.getNodeType()&&("GeneralDescription"===b.getContentElementType()||c.isPage()||c.isFooter())&&b.contentElement.getReferenceFields()[o]&&h.modelTree.updateReferenceFieldsVisibility(b,o)})}if(d&&!m){var p=a.getContentElement().getDependencies();_.each(p,function(c){if(c!==a&&("GeneralDescription"===c.getContentElementType()||c.containerPageId)){var d=c.isListItem?h.modelTree.findIdentifyingNode(c):void 0;h.modelTree.updateFieldsVisibility(c,d,b),h.modelTree.updateNodeVisibility(c,d)}})}return i&&i.length?g(this.applicationEvents.nodeChanged,a||c,i).then(function(){return a.getContentElement()&&a.getContentElement().isGateField(b)?h.onGateFieldChanged(a,b,c,g):void 0}):a.getContentElement()&&a.getContentElement().isGateField(b)?this.onGateFieldChanged(a,b,c,g):e?g(this.applicationEvents.blurChanged,a,null,b,d).then(function(){return a.getContentElement()&&a.getContentElement().isDependentField(b)&&d?h.onGateDependentMaskChanged(a,a.getContentElement().values[b].dependent,g):void 0}):d||a.getArgsMatchingPolicy()[b]?g(this.applicationEvents.valueChanged,a,null,b,d,e).then(function(){return a.getContentElement()&&a.getContentElement().isDependentField(b)&&d?h.onGateDependentMaskChanged(a,a.getContentElement().values[b].dependent,g):void 0}):void 0},b.prototype.onGateDependentMaskChanged=function(a,b,c){var d=a.getContentElement().values[b].dependencies,e=_.filter(a.getArgsMatchingPolicy(),function(a,b){return d.indexOf(b)>-1&&a});return 0===e.length?(a.getArgsMatchingPolicy()[b]=!1,this.onInnerFieldChanged(a,b,a,!0,!1,null,c)):this.$p.when()},b.prototype.onGateFieldChanged=function(a,b,c,d){var e=this,f=a.getContentElement(),g=[];return angular.forEach(f.getFieldValue(b).dependencies,function(f){a.getArgsMatchingPolicy()[f]!==a.getArgsMatchingPolicy()[b]&&(a.getArgsMatchingPolicy()[f]=a.getArgsMatchingPolicy()[b],g.push(e.onInnerFieldChanged(a,f,c,!0,!1,null,d)))}),g.length>0?this.$p.all(g):this.$p.when()},b.prototype.findFirstPassLE=function(a,b){var c=this,d=function(e){if(e===a.length)return c.$p.when();var f=a[e];return c.layoutSelectionStoreProvider.getLayoutSelectionStore().checkIfAllListLEWithStatusPass(b,f.id).then(function(a){return a?f:d(e+1)})},e=0;return d(e)},b.prototype.zigZagAutoMirror=function(a){var b=this,c=a.getListVisibleAndRegularNodes(),d=_.find(c,function(a){return!a.zigZag}),e=this.getSegmentByNode(d,d.containerPageId),f=e.getLE();if(f&&f.isOptionForMirror()){var g=_.find(c,function(a){return a.zigZag}),h=this.getSegmentByNode(g,g.containerPageId),i=_.filter(h.optionalLayoutElements,function(a){return a.isOptionForMirror()&&f.isMirror(a)});this.findFirstPassLE(i,h).then(function(a){a?(h.chooseLayoutElementOptionById(a.id,!0),b.storyServices.emitDataChanged(h)):b.toasterService.info("Couldn't find mirror for chosen LE",!0)})}else this.toasterService.info("Chosen LE cant be mirror",!0)},b.prototype.getLayoutFeaturesForNode=function(a){var b=[];a.asymmetric&&b.push("columnsPhase2");var c=this.pagesManager.getCurrentPageName(),d=this.getSegmentByNode(a,c),e=d.getLENoError(),f=e.getColumns();return f.length>1&&(b.push("columns"),f[0].isVirtual&&b.push("virtualColumns")),b},b.prototype.getSegmentByNode=function(a,b){var c;if("header"===b){var d=this.layoutSolver.getSelectedSolution("header");c=d&&d[0].segments[0]||void 0}else{var e="footer"===b?"footer":"body";_.find(this.layoutSolver.getSelectedSolution(e,b),function(b){return _.find(b.segments,function(b){return""+b.node.id==""+a.id?(c=b,!0):void 0})})}return c},b.prototype.setFixedHeader=function(a){return void 0===a?a=this.isFixedHeader():this.layoutSelectionStoreProvider.getLayoutSelectionStore().setFixedHeader(a),this.previewService.setFixedHeader(a),this.previewService.waitForChanges()},b.prototype.backwardCompatibility=function(){var a=this,b=this.$p.when();if(this.flags.consumerMode){var c=this.modelTree.getPagesNodes(),d=_.find(c,{tpaSection:"Blog"});if(d){var e=this.storyServices.getSavedSite().pagesMap,f=e[d.id];if(f&&!this.tpaService.findBlogStripInPage(f)){var g=_.find(c,{tpaExtraPage:"Blog_Single_Post_Widget"}),h=e[g.id];if(this.documentServicesMediator.getHomePage()===f){var i=_.filter(this.documentServicesMediator.getPageIdList(),function(a){return a!==f&&a!==h});if(0===i.length){var j=this.documentServicesMediator.addPage("blank");i.push(j.id),b=this.previewService.waitForChanges()}b=b.then(function(){var b=i[0];return a.documentServicesMediator.setHomePage(b),a.documentServicesMediator.navigateToPage(b)}).then(function(){return a.previewService.waitForChanges()})}b=b.then(function(){return _.each(a.documentServicesMediator.getPageIdList(),function(b){a.documentServicesMediator.updatePage(b,{pageUriSEO:""})}),a.documentServicesMediator.doesPageExist(f)&&a.documentServicesMediator.removePage(f),delete e[d.id],a.documentServicesMediator.doesPageExist(h)&&a.documentServicesMediator.removePage(h),delete e[g.id],a.previewService.waitForChanges()})}}}return b},b}();angular.module("siteGeneratorStaticsCoreAppInternal").service("wizardService",b)}(core||(core={}));var core;!function(a){var b=function(){function a(){this.getTimestamp="object"==typeof performance&&"function"==typeof performance.now?function(){return performance.now()}:function(){return Date.now()}}return a.prototype.reset=function(a){void 0===a&&(a=null),this.startBITimestamp=a?a:this.getTimestamp(),this.prevLoadTimestamp=this.startBITimestamp},Object.defineProperty(a.prototype,"sample",{get:function(){var a=this.getTimestamp(),b=void 0===this.prevLoadTimestamp?-1:Math.round(a-this.prevLoadTimestamp);return this.prevLoadTimestamp=a,b},enumerable:!0,configurable:!0}),Object.defineProperty(a.prototype,"total",{get:function(){return void 0===this.startBITimestamp?-1:Math.round(this.getTimestamp()-this.startBITimestamp)},enumerable:!0,configurable:!0}),a}();a.InitStopwatch=b,angular.module("siteGeneratorStaticsCoreAppInternal").service("initStopwatch",b)}(core||(core={})),angular.module("siteGeneratorStaticsCoreAppInternal").service("nodeManipulationService",["layoutSelectionStoreProvider","wizardService","pagesManager","menuService","tpaService","setTpaContentService","defaultsService","layoutSolver","storyServices","sitePartTypes","richTextService","$p",function(a,b,c,d,e,f,g,h,i,j,k,l){function m(b,c,d){var e=a.getLayoutSelectionStore().getSolutionUniqueID(b.id);if(e){var f=[];e.forEach(function(a){_.each(d,function(b,c){var d=c+"#",e=b+"#";-1!==a.indexOf(d)&&(a=a.replace(d,e))}),f.push(a)}),a.getLayoutSelectionStore().setSolutionUniqueID(c.id,f)}var g=a.getLayoutSelectionStore().getSolutionLGs(b.id);if(g){var h=_.reduce(g,function(a,b,c){var e=d[c];return e&&(a[e]=ob.deepClone(b)),a},{});a.getLayoutSelectionStore().setSolutionLGs(c.id,h)}}function n(a,f){_.each(a,function(a){var c=a.pageNode;c.children[0].userHidden=!0,d.addLinkToPage(c,f);var h=c.tpaExtraPage;if(h){var i=_.find(b.modelTree.getAvailableWidgetsNodes(),{contentElementType:h}),j=b.modelTree.addNewNode(i,c);j.widgetRef=e.getCompByTypeAndWidgetId(h,a.widgetId),p(j),"Blog"!==e.getNaiveType(i.contentElementType)&&g.getAllLayoutPresets(!1,i.contentElementType).then(function(a){a&&a.length&&e.updateStyle(j,a[0])})}}),a.forEach(function(a){c.togglePageVisibility(a.pageNode)})}function o(a,f,g,h){a=a||b.modelTree.addPageToTree(f?f[0].appPage.name:g||"Untitled"),a.needsRename=1,_.extend(a,h);var i=_(f).slice(1).map(function(a){var c=b.modelTree.addPageToTree(a.appPage.name);return c.tpaExtraPage=e.getTypeByWidgetId(a.widgetId),{pageNode:c,widgetId:a.widgetId,extraPage:a.extraPage||a.widgetId}}).value();return c.ensurePages().then(function(){return d.addLinkToPage(a),i&&i.length&&n(i,a.id),l.when(a)})}function p(a){angular.forEach(a.contentElement.values,function(b){b.value=a.contentElementType}),a.argsMatchingPolicy[a.contentElementType]=!0,a.userHidden=!1}function q(c,d){var e=b.modelTree.duplicateNode(c,d),f="footer"===d.id?j.FOOTER:j.BODY,g=h.getPartSolutions(f,d.id,!1),i=g.getLgsOfNode(g.getSelectedSolution(),c),k=a.getLayoutSelectionStore().clone(),l=a.getKeyMap(i),m={};m[c.getId()]=e.getId(),_.each(c.children,function(a,b){m[a.getId()]=e.children[b].getId()});var n=a.getMergedKeyMap(l,m);return a.mergeLayoutSelectionStoreFromPresetPreview(k,d.id,d.id,n,l,!0),e}return{duplicateNode:function(a,c,d){var e;e=a.isListItem?b.modelTree.duplicateListItem(a,c):q(a,c),d(e)},duplicatePage:function(c,d){var e=b.modelTree.duplicatePage(c);o(e).then(function(b){var e=a.getNodesMap(c,b),f=a.getLayoutSelectionStore().clone(),g=h.getSelectedSolution(j.BODY,c.id),i=a.getKeyMap(g),k=a.getMergedKeyMap(i,e);a.mergeLayoutSelectionStoreFromPresetPreview(f,c.getId(),b.getId(),k,i,!0),m(c,b,e),d(b)})},moveNodeToPage:function(a,c,f){d.removeLinkToNode(a);var g=_.findIndex(c.children,{id:a.id});return g>-1?(b.modelTree.setContainerPageId(a,f.getId()),c.children.splice(g,1),f.children.push(a),a.widgetRef&&e.serializeToReAdd(a),!0):void 0},reassignSolutionSectionToPage:function(a,b,c){var d=c.getId();_.each(a,function(a){a.setPage(d)})},deleteNode:function(c,e,f,g){if(d.removeLinkToNode(c),f){var h=b.getSegmentByNode(c,e);h&&(1===h.containingLG.segments.length?a.getLayoutSelectionStore().cleanLGData(h.containingLG):a.getLayoutSelectionStore().cleanSegmentData(h))}var i=b.modelTree.deleteConfirmed(c,f||c.isListItem);if(c.isListItem){var j=b.modelTree.findIdentifyingNode(c);j.updateZigZagState()}g&&g(i)},canMove:function(a,c,d){var e=b.modelTree.getPageNodeById(c);if(e&&e.children){var f=_.filter(e.children,{userHidden:!1}),g=f.length,h=_.findIndex(f,{id:a}),i=h+(d?1:-1);return-1!==h&&g>i&&i>-1}},moveNode:function(a,c,d,e){var f=b.modelTree.getPageNodeById(c);if(f&&f.children){var g=_.filter(f.children,{userHidden:!1}),h=g.length,i=_.findIndex(g,{id:a}),j=i+(d?1:-1);if(-1===i||j===h||-1===j)e(-1);else{i=_.findIndex(f.children,{id:a}),j=_.findIndex(f.children,{id:g[j].id});var k=f.children[j];f.children[j]=f.children[i],f.children[i]=k;var l=k.id;e(l)}}},insertNodeAfter:function(a,c,d){var e=b.modelTree.getPageNodeById(a),f=_.findIndex(e.children,function(a){return a.getId()===c}),g=e.children.splice(f,1)[0],h=_.findIndex(e.children,function(a){return a.getId()===d});e.children.splice(h+1,0,g)},deletePage:function(a,b,c,d){var e=a.getId();this.deletePageById(e,b,c,d)},deletePageById:function(d,f,g,j){var k=h.getSelectedSolution(f,d);k&&k.forEach(function(b){a.getLayoutSelectionStore().cleanLGData(b)}),a.getLayoutSelectionStore().cleanPageData(d);var l=b.modelTree.removePageFromTree(d);i.story.selectedPage===d&&g(b.modelTree.getPagesList()[0]),l.pageNode&&l.pageNode.tpaSection&&e.sectionDeleted(l.pageNode.tpaSection),c.removePage(d).then(function(){j(l)})},toggleVisibility:function(a,c,e){b.modelTree.toggleNodeVisibility(a,c),b.modelTree.findIdentifyingNode(a).updateZigZagState(),a.isUserHidden()&&d.removeLinkToNode(a),e()},addTpa:function(a,c,d){var h=this;return d?void e.addTpa(a.contentElementType,function(g){o(void 0,g,void 0,{tpaSection:a.contentElementType}).then(function(g){g.children[0].userHidden=!0;var h=b.modelTree.addNewNode(a,g);e.setPreset(d,h),h.contentElement.values.Title.value=h.contentElementType,h.argsMatchingPolicy.Title=!0,h.userHidden=!1,f.addContentToTpa(h.contentElementType);var i=_.filter(b.modelTree.getPagesNodes(),function(a){return a.tpaExtraPage&&0===a.tpaExtraPage.indexOf(h.contentElementType)})||[];i.unshift(g),c(i)})},d):void g.getPresetsForNode(a,a.contentElementType,!0).then(function(b){h.addTpa(a,c,b[0])})},addNodeToList:function(a){var c=b.modelTree.addChildToNode(a);return a.updateZigZagState(),c},nodeIndexAndStatus:function(a,b){var c;if(a&&a.isList()&&b){var d=a.children.indexOf(b);if(d>-1){var e="ListHeader"===a.children[0].contentElementType&&!a.children[0].isUserHidden();c={index:d,indexInVisibleItems:_(a.children).filter(function(a){return a===b||!a.isUserHidden()}).indexOf(b),shown:!b.isUserHidden()},c.indexInVisibleItemsIgnoringHeader=c.indexInVisibleItems-(e?1:0)}}return c},toggleNodeInlist:function(a,c){b.modelTree.toggleNodeVisibility(c,a),a.updateZigZagState()},moveListItem:function(a,b,c){a.children&&a.children.length&&("ListHeader"===a.children[0].contentElementType&&(b++,c++),a.children[b]&&a.children[c]&&a.children.splice(c,0,a.children.splice(b,1)[0]),a.updateZigZagState())},addExistingContentElement:function(a,c,d){var e=b.modelTree.addExistingNode(a,c);return d(e),l.when(e)},copyContentElementValues:function(a,b){a&&b&&_.each(a.values,function(a,c){b.values[c]=ob.deepClone(a)})},makePageFromNode:function(a){var d=b.modelTree.addNodeToTree(a),e=a.contentElement.getFieldValueByType("text","title",!0)||a.contentElementType;return k.isRichText(e)&&(e=k.unMarkRichText(e),e=k.resetFormatting(e)),e=e.substr(0,100),this.copyContentElementValues(a.contentElement,d.contentElement),c.addPage(e).then(function(a){return b.modelTree.addExistingNode(d,a)})},addNewContentElement:function(a,c,d,f,i,k){!c&&a.children.length&&(a=a.children[0]);var l=_.findIndex(d.children,function(a){return a.getId()===k});-1===l&&(l=0);var m=l+1,n=b.modelTree.addNewNode(a,d,m);return n.isTpaWidget&&(p(n),e.setPreset(i,n)),g.getPresetsForNode(n).then(function(a){var b=_.first(a);if(b&&b.data&&!b.data.isTpa){var c="footer"===d.id?j.FOOTER:j.BODY;return h.applyLayoutPreset(c,d.id,n,b.data,!0).then(_.constant(n))}return f(n),n})}}}]);var SolutionManager=function(){function a(a,b,c,d,e,f){this.flags=a,this.mediaOverride=b,this.designKit=c,this.columnService=d,this.applicationParameters=e,this.sectionBackgroundService=f,this.headerSpacing=60}return a.$inject=["flags","mediaOverride","designKit","columnService","applicationParameters","sectionBackgroundService"],a.prototype.hasStripOnLE=function(a){var b=a.segments&&a.segments[0]&&a.segments[0].getLENoError();return b&&this.mediaOverride.isStripType(b)},a.prototype.stripEnabled=function(a){return a&&a.strip&&a.strip.enable},a.isTpa=function(a){return a.segments[0]&&a.segments[0].node&&a.segments[0].node.isTpa},a.isTpaWidget=function(a){return a.segments[0]&&a.segments[0].node&&a.segments[0].node.isTpaWidget},a.isTpaNode=function(a){return a&&a.segments[0]&&a.segments[0].node&&a.segments[0].node.isTpaNode()},a.getMaxHeightLg=function(a){return a&&a.sort(function(a,b){return b.targetHeight-a.targetHeight}).find(function(a){return"ListHeader"!==a.contentType&&"ListFooter"!==a.contentType})},a.prototype.calculateColumns=function(b){return!a.isTpaWidget(b)&&this.columnService.createColumns(b.getLayoutSelectionStore(),b)},a.prototype.addStripsToMobileColumns=function(a){a.isMobile()&&this.columnService.addStripPaddingToRegularMobileColumns(a)},a.prototype.getAndNormalizeLgDataArray=function(a,b){var c=this,d=[];return angular.forEach(b,function(e,f){var g=e.getLgData();if(c.flags.designKit&&"body"===a&&(c.hasStripOnLE(e)?g.strip.enable=!1:c.stripEnabled(g)||("space"===g.bottomLine.line&&(g.bottomLine.line="line",g.bottomLine.enable=!1),"space"===g.topLine.line&&(g.topLine.line="line",g.topLine.enable=!1),g.strip.paddingBottom=80,g.strip.paddingTop=80,g.strip.color=g.strip.color||"{color_11}",g.strip.scrollType="scroll",g.strip.bgPosition="center",g.strip.fittingType="fill",g.strip.enable=!0,g.strip.style="strc1",g.strip.url="none"),g.strip.marginBottom=0,g.strip.marginTop=0),"body"===a){var h=b[f-1];if(h&&h.segments[0]&&e&&e.segments[0]&&h.segments[0].getTypeForLSSWithoutNodeIdAndPartition()===e.segments[0].getTypeForLSSWithoutNodeIdAndPartition()&&h.segments[0].findIdentifyingNodeId()===e.segments[0].findIdentifyingNodeId()){if(e.odd=!h.odd,c.flags.newColumns&&e.columns){var i=_.map(e.columns,function(a){return a.width}).reverse();_.each(e.columns,function(a,b){return a.width=i[b]})}}else e.odd=!1;c.flags.newColumns||(e.columns=c.calculateColumns(e))}if(c.flags.designKit&&g.menuStrip&&g.menuStrip.enable&&(g.menuStrip.color="footer"===a?c.designKit.getColorOfCopyStrip():c.designKit.getColorOfStripMenu()),c.flags.sectionBackground&&"body"===a){var j=e.segments[0].node;c.sectionBackgroundService.applyBackgroundToStripData(j,g.strip,e)}d.push(g)}),this.flags.designKit&&(this.designKit.manageStripsPadding(b,d,a),_.forEach(d,function(b){b.strip.enable="body"===a})),_.each(b,function(a){c.addStripsToMobileColumns(a)}),d},a.prototype.isLGHasStrip=function(a,b){return b<a.length&&this.stripEnabled(a[b])||void 0},a.prototype.isLGsFromTheSameList=function(a,b){return a.findIdentifyingNodeId()===b.findIdentifyingNodeId()},a.prototype.isStripsShouldCombine=function(a,b,c,d){if(c.isMobile()){var e=c.getDesktopLG(),f=d.getDesktopLG();if(e&&f)return this.isStripsShouldCombine(e.getLgData().strip,f.getLgData().strip,e,f)}return this.flags.designKit&&!this.isLGsFromTheSameList(c,d)?!1:b&&b.enable?this.flags.sectionBackground?a.mediaType===b.mediaType&&_.eq(a.mediaItems||a.color,b.mediaItems||b.color):(a.url=a.url||"none",b.url=b.url||"none",a.url===b.url&&a.color===b.color):!1},a.prototype.mergeDecorativeStrips=function(a,b,c,d,e){for(var f=this,g=0,h=_.map(a,function(a,c){return f.isLGHasStrip(b,c)}),i=0;i<b.length;i++)if(void 0!==h[i]){var j=b[i],k=i;for(d[k]=j.strip,e[k]=1;i+1<b.length&&this.isStripsShouldCombine(j.strip,b[i+1].strip,a[i],a[i+1]);)e[k]++,i++,h[i]=k}if(b.forEach(function(a){a&&a.strip&&(a.strip.disableBottomMargin=!1,a.strip.disableTopMargin=!1)}),a&&a.length>0){var l=b[a.length-1];this.stripEnabled(l)&&(l.strip.disableBottomMargin=!0)}if(a){if(a[0]&&!a[0].isHeader()){var m=!_.isEmpty(b[0])&&(this.stripEnabled(b[0])||b[0].topLine.enable);m||(g+=this.headerSpacing)}for(var n=0;n<a.length;n++){var o=e[n],p=n+(o||1);if((o||c[n])&&(e[p]||a[p]&&c[p])&&(o&&(b[n+o-1].strip.disableBottomMargin=!0),e[p]&&(b[p].strip.disableTopMargin=!0)),o>1)for(var q=n;n+o>q;q++)q!==n&&(b[q].strip.disableTopMargin=!0),q!==n+o-1&&(b[q].strip.disableBottomMargin=!0)}}return g},a.prototype.preparePresetPreviewForRender=function(a,b){var c=this;b.stripData=[],b.stripSizes=[];var d=_.map(b.solution,function(a){return c.hasStripOnLE(a)});b.lgDataArray=this.getAndNormalizeLgDataArray(a,b.solution),this.mergeDecorativeStrips(b.solution,b.lgDataArray,d,b.stripData,b.stripSizes)},a}();angular.module("siteGeneratorStaticsCoreAppInternal").service("solutionManager",SolutionManager);var SimpleSolutionManager=function(){function a(a,b,c,d,e,f,g,h,i,j,k,l,m,n,o,p,q){this.$p=a,this.$log=b,this.simpleSolutionRules=c,this.defaultsService=d,this.layoutSolver=e,this.solutionStatusCodes=f,this.LayoutGroup=g,this.storyServices=h,this.designKit=i,this.sitePartTypes=j,this.siteLayoutLoader=k,this.modelTree=l,this.layoutSelectionStoreProvider=m,this.PresetMediaType=n,this.tpaService=o,this.obMonitoring=p,this.flags=q,this.Animation={Type:{NO_TRANSITION:"NoTransition",SLIDE_VERTICAL:"SlideVertical",SLIDE_HORIZONTAL:"SlideHorizontal",CROSS_FADE:"CrossFade",OUT_IN:"OutIn"},Direction:{NORMAL:"NORMAL",REVERSE:"REVERSE"}},this.ready=!1,this.layoutGroupsFromSignatures={},this.jokerData={argsSignature:"b#lt#m#s#t",cluster:2,isButtonInContainer:!1,mediaGridWidth:12,onMediaStructure:[],structure:[["m"],["t"],["s"],["lt"],["b"]]},this.contactJokerData={argsSignature:"Social.SocialButtons#a#e#f#fo#lt#m#mp#p#t",cluster:2,isButtonInContainer:!1,mediaGridWidth:12,onMediaStructure:[],structure:[["t"],["lt"],["mp"],["a"],["e"],["p"],["f"],["Social.SocialButtons"],["fo"],["m"]]}}return a.$inject=["$p","$log","simpleSolutionRules","defaultsService","layoutSolver","solutionStatusCodes","LayoutGroup","storyServices","designKit","sitePartTypes","siteLayoutLoader","modelTree","layoutSelectionStoreProvider","PresetMediaType","tpaService","obMonitoring","flags"],a.prototype.getSectionMap=function(a){var b=this.layoutSolver.getPartSolutions(this.sitePartTypes.BODY,a,!1);return b&&b.sectionMap||{}},a.prototype.init=function(){var a=this;return this.ready?this.$p.when():this.siteLayoutLoader.initialize(!1).then(function(){_.each(a.siteLayoutLoader.layoutGroups,function(b){if(!b.segments[0].isMobile){var c=b.getSegmentSignature();a.layoutGroupsFromSignatures[c]=a.layoutGroupsFromSignatures[c]||[],a.layoutGroupsFromSignatures[c].push(b)}}),a.layoutSolver.setConsumerMode(),a.ready=!0})},a.prototype.getLgBySignatureAndId=function(a,b,c){void 0===c&&(c=void 0);var d;if(this.layoutGroupsFromSignatures[a]&&(c?d=_.find(this.layoutGroupsFromSignatures[a],{id:c}):(b&&(d=_.find(this.layoutGroupsFromSignatures[a],{asymmetric:!0})),d=d||this.layoutGroupsFromSignatures[a][0])),!d)throw"now such lg";var e=new this.LayoutGroup;return angular.copy(d,e),e},a.prototype.successSection=function(a){var b=this;return _.all(a,function(a){return a.status===b.solutionStatusCodes.pass})},a.prototype.failedFullLGInSection=function(a){var b=this;return _.filter(a,function(a){return a.status===b.solutionStatusCodes.fail&&"1"===a.getSegmentSignature()})},a.prototype.getJokerData=function(a){return"Contact"===a?this.contactJokerData:this.jokerData},a.prototype.createJokerSection=function(a){var b=this;return this.init().then(function(){var c=b.getLgBySignatureAndId("1",!1),d=c.segments[0];return d.node=a,d.contentElement=a.contentElement,c.setPage(a.containerPageId),c.setLgData(b.modelTree.getAllVisibleContentElements()),b.resetLayoutToJoker(c),[c]})},a.prototype.createSingleSegementLg=function(a,b,c,d,e){var f=this.getLgBySignatureAndId(b,!1,c),g=f.segments[0];return g.node=a,g.contentElement=a.contentElement,f.setPage(d),f.setLgData(e),f},a.prototype.addLgToSection=function(a,b,c){var d=_.find(a,function(a){return!a.isListHeader()}),e=this.createSingleSegementLg(b,"1",d.id,d.page,d.allContentElements);_.assign(e.getLgData(),ob.deepClone(d.getLgData()));var f=void 0!==c?c:_.last(a).isListFooter()?a.length-1:a.length;return a.splice(f,0,e),f},a.prototype.groupAndSegmentFromSection=function(a,b){var c=b.sectionSig,d=c.split("|")[0].length,e=Math.floor(a/d);b.holdHeader&&e++;var f=a%d;return{groupIndex:e,segmentIndex:f}},a.prototype.toSectionSignature=function(a){var b={holdHeader:void 0,holdFooter:void 0,sectionSig:void 0};return b.sectionSig=_(a).map(function(a){return a.isListHeader()||a.isListFooter()?void(a.isListHeader()?b.holdHeader=a:b.holdFooter=a):a.getSegmentSignature()}).filter().join("|"),b},a.prototype.isAsymmetricSection=function(a){return this.modelTree.findIdentifyingNode(a[0].segments[0].node).asymmetric},a.prototype.handleContentRelatedFailure=function(a){var b=this,c=this.isAsymmetricSection(a),d=this.toSectionSignature(a),e=this.simpleSolutionRules.failOverList(d.sectionSig),f=_(e.split("|").map(function(a){return b.getLgBySignatureAndId(a,c)})).value();return{section:_.filter(_.flatten([d.holdHeader,f,d.holdFooter])),holdHeader:d.holdHeader?1:0,holdFooter:d.holdFooter?1:0}},a.prototype._reorderItems=function(a,b,c){var d=this,e=a.slice(0);if(_.all(e,function(a){return 1===a.segments.length})){var f=this.toSectionSignature(e),g=this.groupAndSegmentFromSection(b,f),h=this.groupAndSegmentFromSection(c,f),i=e.splice(g.groupIndex,1)[0];e.splice(h.groupIndex,0,i);for(var j=Math.min(g.groupIndex,h.groupIndex);j<e.length;j++)e[j].isDirty=!0}else{var k=1;b>c&&(k=-1);var l=k>0?_.range(b,c):_.range(c+1,b+1).reverse();l.forEach(function(a){var b=a,c=a+k;d.reorderItemsInner(e,_.min([b,c]),_.max([b,c]))})}return e},a.prototype.reorderItemsInner=function(a,b,c){var d=this.toSectionSignature(a),e=this.groupAndSegmentFromSection(b,d),f=this.groupAndSegmentFromSection(c,d),g=e.groupIndex===f.groupIndex,h=a[e.groupIndex],i=a[f.groupIndex],j=h.segments.splice(e.segmentIndex,1)[0],k=i.segments.splice(f.segmentIndex-(g?1:0),1,j)[0],l=j.left;return j.left=k.left,k.left=l,h.segments.splice(e.segmentIndex,0,k),g?h.resetForRecalc():(this.updateLGContainerForSegment(j,i),this.updateLGContainerForSegment(k,h),h.resetForRecalc(),i.resetForRecalc()),a},a.prototype.updateLGContainerForSegment=function(a,b){a.containingLG=b,_.each(a.optionalLayoutElements,function(a){a.setLGContainer(b)})},a.prototype.addItemToSection=function(a){var b=this,c=this.isAsymmetricSection(a),d=this.toSectionSignature(a),e=this.simpleSolutionRules.addListItem(d.sectionSig,c),f=_(e.split("|").map(function(e,f){var g=f+(d.holdHeader?1:0);return"1"!==e&&a[g]&&a[g].getSegmentSignature()===e?a[g]:b.getLgBySignatureAndId(e,c)})).value();return{section:_.filter(_.flatten([d.holdHeader,f,d.holdFooter])),holdHeader:d.holdHeader?1:0,holdFooter:d.holdFooter?1:0}},a.prototype.removeItemFromSection=function(a){var b=this,c=this.isAsymmetricSection(a),d=this.toSectionSignature(a),e=this.simpleSolutionRules.removeListItem(d.sectionSig),f=_(e.split("|").map(function(e,f){var g=f+(d.holdHeader?1:0);return"1"!==e&&a[g]&&a[g].getSegmentSignature()===e?a[g]:b.getLgBySignatureAndId(e,c)})).value();return{section:_.filter(_.flatten([d.holdHeader,f,d.holdFooter])),holdHeader:d.holdHeader?1:0,holdFooter:d.holdFooter?1:0}},a.prototype.prepareSolution=function(a,b,c,d,e){var f=this;void 0===d&&(d=void 0),void 0===e&&(e=void 0);var g=this.modelTree.getAllVisibleContentElements(),h=[],i=[];_.each(b,function(a){_.each(a.segments,function(a){a.node&&a.node.contentElement&&(h.push(a.node.contentElement),i.push(a.node))})}),d&&(-1===d?(h.splice(e,1),i.splice(e,1)):(e=isNaN(e)?i.length:e,h.splice(e,0,d.contentElement),i.splice(e,0,d)));var j=0,k=_.map(c,function(c,d){if(b.indexOf(c)>-1){var e=c.getUniqueIdForSolution(!1,!1);return _.each(c.segments,function(a){a.contentElement=h[j],a.node=i[j],j++}),e!==c.getUniqueIdForSolution(!0,!0)&&c.resetForRecalc(),c}var k=f.layoutSolver.prepareLg(c,j,h,i,a,g),l=b[d];return l||(l=_.last(b)),l&&k.getLayoutSelectionStore().copyLgRelatedData(a,l.getUniqueIdForSolution(),k.getUniqueIdForSolution()),k.getLayoutSelectionStore().deleteSegmentsByLg(k),j+=c.segments.length,k});return k},a.prototype.getPageSolution=function(a){var b=this;return this.init().then(function(){var c=b.layoutSolver.getPartSolutions(b.sitePartTypes.BODY,a,!0),d=c.getSelectedSolution();return d||(b.layoutSolver.createSimplePageSolution(c,b.modelTree.getAllVisibleContentElements()),d=c.getSelectedSolution()),d})},a.prototype.getSectionSolution=function(a,b){return this.getSectionMap(a)[b]},a.prototype.getNodeSelectedLg=function(a,b){var c,d=this.getSectionSolution(a.containerPageId,a.id);if(d)switch(b){case"header":c=d[0];break;case"list":c=_.filter(d,function(a){return a.isOnlyListItem()})[0];break;default:c=d[0]}return c},a.prototype.setPageSolution=function(a,b){var c=this.layoutSolver.getPartSolutions(this.sitePartTypes.BODY,a,!0);c.setSelectedSolution(b);var d=_.reduce(this.getSectionMap(a),function(a,b,c){return a[c]=_.map(b,function(a){return{id:a.id,ceType:a.segments&&a.segments[0]&&a.segments[0].node.getContentElementType()}}),a},{});return c.getLayoutSelectionStore().setSolutionLGs(a,d),this.layoutSolver.updateLgsMapFromSolution(b,a),b},a.prototype.removeListSpecialItemFromSolutionLGs=function(a,b,c){var d=this.layoutSelectionStoreProvider.getLayoutSelectionStore(),e=d.getSolutionLGs(a),f=e[b];f&&(f=_.filter(f,function(a){return a.ceType!==c}),e[b]=f,d.setSolutionLGs(a,e))},a.prototype.removeSectionFromSolutionLGs=function(a,b){var c=this.layoutSelectionStoreProvider.getLayoutSelectionStore(),d=c.getSolutionLGs(a);delete d[b],c.setSolutionLGs(a,d)},a.prototype.ensureHeaderAndFooterVisibility=function(){var a=this;return _.sequencePromises(["header","footer"],function(b){return a.ensureHeaderOrFooterVisibility(b)}).then(function(a){return _.any(a)})},a.prototype.ensureHeaderOrFooterVisibility=function(a){var b,c=this;if(b="header"===a?this.modelTree.getGeneralInformation():this.modelTree.getFooterInformation(),b.userHidden||!b.hasVisibleFields()){var d="BusinessName";return b.userHidden=!1,b.argsMatchingPolicy[d]=!0,this.modelTree.updateFieldsVisibility(b,null,d,!0),this.layoutSolver.handleValueChange(b.contentElement,d).then(function(){return c.detectAndHandleHeaderOrFooterFailure(a)}).then(function(){return!0})}return!1},a.prototype.detectAndHandleHeaderOrFooterFailure=function(a){var b,c,d=this,e=this.layoutSolver.getSelectedSolution(a);return this.successSection(e)?this.$p.when():("header"===a?(b=this.modelTree.getGeneralInformation(),c="SiteHeader"):b=this.modelTree.getFooterInformation(),this.defaultsService.getPresetsForNode(b,c).then(function(c){var e=c.slice(),f=d.flags.noRandomForAutomationTests?0:d.storyServices.generateRandomOffset(a,e.length),g=e.splice(0,f);return e=e.concat(g),_.whilePromises(function(a){return!(a&&a[0]||!e.length)},function(){var a=e.shift();return a&&a.data?d.layoutSolver.createLayoutPresetPreviewSolutions([a],b):void 0})}).then(function(c){var f=c&&c[0];if(f)return d.layoutSolver.applyLayoutPreset(a,void 0,b,f.preset.data);var g=e[0];return g.segments[0].chooseNextlayoutElementOption(1),g.ensureHeightMatchesContent().then(function(){g.status=d.solutionStatusCodes.pass})}))},a.prototype.setSolutionDirty=function(a){_.each(a,function(a){a.setAsDirty()})},a.prototype.resetLayoutToJoker=function(a){a.setAsDirty(),a.resetLayoutPaddings(),a.isMobile()||a.setColumnsData({}),a.getLayoutSelectionStore().setPreferredLayoutData(a.segments[0],this.getJokerData(a.segments[0].node.contentElementType)),a.getLayoutSelectionStore().setOverride("media",a.segments[0],"allowedMediaOverrides",this.PresetMediaType.IMAGE);
},a.prototype.detectAndHandleSolutionFailure=function(a,b,c,d){var e=this;if("header"===b||"footer"===b)return this.detectAndHandleHeaderOrFooterFailure(b);if(!d){var f=this.getSectionMap(a);d=f[b]}return this.init().then(function(){if(e.successSection(d))return e.layoutSolver.listPostProcessing(d).then(function(f){return f?void 0:e.detectAndHandleSolutionFailure(a,b,c,d)});var f=e.failedFullLGInSection(d);if(f.length>0){var g=_.uniq(_.map(f,function(a){return a.segments[0].node.contentElementType}));return _.forEach(d,function(a){g.indexOf(a.segments[0].node.contentElementType)>-1&&e.resetLayoutToJoker(a)}),_.sequencePromises(d,function(a){return a.calculateLayoutGroupStatus(c||a.segments[0].contentElement)}).then(function(c){var f=e.modelTree.getNodeById(b);return _.all(c)?(e.obMonitoring.mark({name:"failoverReArrangeLayout",data:{nodeId:b,sectionType:f.getContentElementType(),sectionAlias:f.alias}}),e.replaceSectionOnPage(a,b,d,!1,void 0,!0)):(e.obMonitoring.mark({name:"failToFitLayoutCanTFindAProperLayout",data:{nodeId:b,sectionType:f.getContentElementType(),sectionAlias:f.alias,reason:""}}),void e.$log.error("cannot solve section of node "+b))})}var h,i=e.handleContentRelatedFailure(d);h=i.section;var j=e.prepareSolution(a,d.slice(0+i.holdHeader,d.length-i.holdFooter),h.slice(0+i.holdHeader,h.length-i.holdFooter));return _.sequencePromises(j,function(a,b){return h[b+i.holdHeader]=a,a.calculateLayoutGroupStatus(c||a.segments[0].contentElement)}).then(function(f){if(!_.all(f))return e.detectAndHandleSolutionFailure(a,b,c,h);if(d[i.holdHeader].getSegmentSignature().length>1&&"1"===h[i.holdHeader].getSegmentSignature()){var g=d[i.holdHeader].getColumnsData(),j=void 0;g&&g.enable&&"image"===g.singleColumnProps[0].backgroundMode&&(j=ob.deepClone(g),j.singleColumnProps=[{alignment:50,backgroundMode:"image"}]),h[i.holdHeader].setColumnsData(j)}var k=e.modelTree.getNodeById(b);return e.obMonitoring.mark({name:"failoverReArrangeSolution",data:{nodeId:b,sectionType:k.getContentElementType(),sectionAlias:k.alias}}),e.replaceSectionOnPage(a,b,h,!1,void 0,!0)})})},a.prototype.reorderItems=function(a,b,c,d){var e=this,f=this.getSectionMap(a),g=f[b];return this.init().then(function(){var f=e._reorderItems(g,c,d);return e.replaceSectionOnPage(a,b,f,!1)})},a.prototype.addListItem=function(a,b,c,d){var e=this,f=this.getSectionMap(a),g=f[b];return this.init().then(function(){var f,h=g[0].isListHeader()?1:0;if(g[h]&&"1"===g[h].getSegmentSignature())return g[h].segments[0].isAggregator()?(g[h].segments[0].addContentElementItemToAggregator(c.contentElement,d),f=g):(f=g.slice(0),void 0!==d&&(d+=h),e.addLgToSection(f,c,d)),e.replaceSectionOnPage(a,b,f,!0,c.contentElement,!0);var i=e.addItemToSection(g);f=i.section;var j=e.prepareSolution(a,g.slice(0+i.holdHeader,g.length-i.holdFooter),f.slice(0+i.holdHeader,f.length-i.holdFooter),c,d);return _.sequencePromises(j,function(a,b){return f[b+i.holdHeader]=a,a.calculateLayoutGroupStatus(c.contentElement)}).then(function(d){return _.all(d)?e.replaceSectionOnPage(a,b,f,!1,void 0,!0):e.detectAndHandleSolutionFailure(a,b,c.contentElement,f)})})},a.prototype.removeListItem=function(a,b,c,d){var e=this,f=this.getSectionMap(a),g=f[b];return this.init().then(function(){var f,h=g[0].isListHeader()?1:0;if(g[h]&&"1"===g[h].getSegmentSignature())return g[h].segments[0].isAggregator()?(g[h].segments[0].removeContentElementItemFromAggregator(d),f=g):(f=g.slice(0),f.splice(d+h,1)),e.replaceSectionOnPage(a,b,f,!0);var i=e.removeItemFromSection(g);f=i.section;var j=e.prepareSolution(a,g.slice(0+i.holdHeader,g.length-i.holdFooter),f.slice(0+i.holdHeader,f.length-i.holdFooter),-1,d);return _.sequencePromises(j,function(a,b){return f[b+i.holdHeader]=a,a.calculateLayoutGroupStatus(c.contentElement)}).then(function(d){return _.all(d)?e.replaceSectionOnPage(a,b,f,!1,void 0,!0):e.detectAndHandleSolutionFailure(a,b,c.contentElement,f)})})},a.prototype.addListSpecialItem=function(a,b,c){var d=this,e=this.getSectionMap(a),f=e[b];return this.init().then(function(){var e=_.clone(f),g=d.createSingleSegementLg(c,"1",void 0,a,d.modelTree.getAllVisibleContentElements()),h="ListHeader"===c.contentElementType?0:e.length;return e.splice(h,0,g),g.calculateLayoutGroupStatus(c.contentElement).then(function(f){return f?d.replaceSectionOnPage(a,b,e,!1,void 0,!0):d.detectAndHandleSolutionFailure(a,b,c.contentElement,e)})})},a.prototype.removeListSpecialItem=function(a,b,c){var d=this,e=this.getSectionMap(a),f=e[b];return this.init().then(function(){var e=_.findIndex(f,function(a){return a.segments[0].node.getId()===c});if(e>-1){var g=_.clone(f);return g.splice(e,1),d.replaceSectionOnPage(a,b,g)}return d.$p.when()})},a.prototype.duplicateSectionForPreview=function(a,b){var c=this,d=a.containerPageId,e=this.getSectionSolution(d,a.getId()),f=this.modelTree.duplicateNodeForLayoutPresetPreview(a,b),g=this.layoutSelectionStoreProvider.cloneLayoutSelectionStoreForPresetPreview(b,d),h=this.layoutSolver.createSectionByCopy(b,e,f);return _.sequencePromises(h,function(a){return a.setAsDirty(),a.calculateLayoutGroupStatus(void 0)["catch"](function(){return c.$p.when(!1)})}).then(function(){return{node:a,solution:h,previewNode:f,lss:g,dummyPageId:b}})},a.prototype.duplicateSection=function(a,b,c){var d=this;return this.init().then(function(){var e=d.getSectionMap(a),f=e[b.id],g=d.layoutSolver.createSectionByCopy(a,f,c);return{newSection:g,sourceSection:f}})},a.prototype.addSectionToPage=function(a,b,c,d,e,f,g){var h=this,i=c.slice(0),j=e?_.sequencePromises(i,function(a){return a.setAsDirty(),a.calculateLayoutGroupStatus(f)["catch"](function(){return h.$p.when(!1)})}):this.$p.when();return j.then(function(){return h.getPageSolution(a)}).then(function(c){var e=_.clone(c);c=_.clone(c);var f,j,k=h.getSectionMap(a),l=0;if(c.length){if(d){var m=k[d];if(!m)throw"illegal insert after argument";f=_.last(m),l=c.indexOf(f)+1,j=c[l]}c.splice(l,0,i),c=_.flatten(c)}else c.push.apply(c,i);g&&h.designKit.setConfigurationForSection(i,f,j,!0),k[b]=i;var n={newSolution:c,oldSolution:e,startIndex:l,newLength:i.length,length:0};return h.setPageSolution(a,c),n})},a.prototype.removeSectionOnPage=function(a,b){var c=this,d=this.getSectionMap(a);return this.getPageSolution(a).then(function(e){var f=_.clone(e),g=0,h=d[b];h&&(g=e.indexOf(_.first(h)),e.splice(g,h.length)),delete d[b];var i={oldSolution:f,newSolution:e,startIndex:g,length:h.length,newLength:0};return _.each(h,function(a){a.getLayoutSelectionStore().deleteSegmentsByLg(a)}),c.setPageSolution(a,e),i})},a.prototype.replaceSectionOnPage=function(a,b,c,d,e,f){var g=this;void 0===d&&(d=!1),void 0===e&&(e=void 0),void 0===f&&(f=!1);var h=c.slice(0);return _.sequencePromises(c,function(a){return d&&a.setAsDirty(),a.calculateLayoutGroupStatus(e)["catch"](function(){return g.$p.when(!1)})}).then(function(){return g.getPageSolution(a)}).then(function(c){var d,e,i=_.clone(c),j=g.getSectionMap(a),k=j[b];return k&&(d=c.indexOf(_.first(k)),e=k.length,c.splice(d,k.length),f&&g.designKit.setSpecificConfigurationForSection(h,k,!0,void 0),_.each(_.difference(k,h),function(a){a.getLayoutSelectionStore().deleteSegmentsByLg(a)})),j[b]=h,c.splice(d,0,h),c=_.flatten(c),g.setPageSolution(a,c),{newSolution:c,oldSolution:i,startIndex:d,length:e,newLength:h.length}})},a.prototype.swapAdjacentSectionsOnPage=function(a,b,c){var d=this;return this.getPageSolution(a).then(function(e){var f,g,h=_.clone(e),i=d.getSectionMap(a),j=i[b],k=i[c];return j&&(f=e.indexOf(_.first(j)),g=j.length+k.length,e=e.slice(0,f).concat(k).concat(j).concat(e.slice(f+g)),e=_.flatten(e),d.setPageSolution(a,e)),{newSolution:e,oldSolution:h,startIndex:f,length:g,newLength:g}})},a.prototype.moveSectionOnPage=function(a,b,c){var d=this;return this.getPageSolution(a).then(function(e){var f,g,h=_.clone(e),i=d.getSectionMap(a),j=i[b],k=0;if(j){if(f=e.indexOf(_.first(j)),g=j.length,e.splice(f,g),c){var l=i[c];l&&(k=e.indexOf(_.first(l))+l.length)}k=Math.min(k,e.length),e.splice(k,0,j),e=_.flatten(e),d.setPageSolution(a,e)}return{newSolution:e,oldSolution:h,oldIndex:f,newIndex:k,length:g}})},a}();angular.module("siteGeneratorStaticsCoreAppInternal").service("simpleSolutionManager",SimpleSolutionManager);var core;!function(a){var b=function(){function a(a,b,c,d,e,f,g,h,i,j,k,l){this.$log=a,this.sitePartTypes=b,this.layoutSolver=c,this.siteLayoutLoader=d,this.solutionStatusCodes=e,this.simpleSolutionManager=f,this.layoutSelectionStoreProvider=g,this.modelTree=h,this.defaultsService=i,this.storyServices=j,this.PresetMediaType=k,this.$p=l}return a.$inject=["$log","sitePartTypes","layoutSolver","siteLayoutLoader","solutionStatusCodes","simpleSolutionManager","layoutSelectionStoreProvider","modelTree","defaultsService","storyServices","PresetMediaType","$p"],a.prototype.registerWithOnPartCalculatedCallback=function(a){this.onPartCalculatedCallback=a},a.prototype.createMobileLg=function(a,b){var c;c=b.containingLG.isHeader()?this.siteLayoutLoader.mobileHeaderLayoutGroup:this.siteLayoutLoader.layoutGroups.find(function(a){return a.isMobile()});var d=this.layoutSolver.prepareLg(c,0,[b.contentElement],[b.node],b.getPageDescriptor(),b.containingLG.allContentElements);return b.setMobileLg(d),a===this.sitePartTypes.HEADER&&(d.segments[0].node=void 0),d},a.prototype.addListItem=function(a,b,c){var d=this.siteLayoutLoader.layoutGroups.find(function(a){return a.isMobile()}),e=this.layoutSolver.prepareLg(d,0,[b.contentElement],[b],b.containerPageId,this.modelTree.getAllVisibleContentElements()),f=c||0;"ListHeader"===b.contentElementType?f=0:"ListFooter"===b.contentElementType?f=a.length:a[0].isListHeader()&&f++,a.splice(f,0,e)},a.prototype.removeListItem=function(a,b){var c=a[0].isListHeader()?1:0;a.splice(b+c,1)},a.prototype.setMobileSolution=function(a,b){var c=_.flatten(_.map(a,"segments"));_.each(b,function(a,b){c[b].setMobileLg(a)})},a.prototype.getMobileSolution=function(a){return _(a).map(function(a){return a.segments}).flatten().map(function(a){return a.mobileLg}).filter().value()},a.prototype.getMobileSitePartSolution=function(a,b){var c=this.layoutSolver.getSelectedSolution(a,b);return this.getMobileSolution(c)},a.prototype.renderPage=function(a){var b=this;return this.$p.when().then(function(){return b.storyServices.renderMobileSolution(b.sitePartTypes.HEADER,void 0,b.getMobileSitePartSolution(b.sitePartTypes.HEADER))}).then(function(){return b.storyServices.renderMobileSolution(b.sitePartTypes.BODY,a,b.getMobileSitePartSolution(b.sitePartTypes.BODY,a))}).then(function(){return b.storyServices.renderMobileSolution(b.sitePartTypes.FOOTER,void 0,b.getMobileSitePartSolution(b.sitePartTypes.FOOTER))})},a.prototype.calculatePage=function(a,b){return void 0===b&&(b=!1),this.$p.all([this.calculatePart(this.sitePartTypes.BODY,a,b),this.calculatePart(this.sitePartTypes.HEADER,void 0,b),this.calculatePart(this.sitePartTypes.FOOTER,void 0,b)])},a.prototype.calculatePart=function(a,b,c){var d=this;void 0===c&&(c=!1);var e=this.layoutSolver.getSelectedSolution(a,b),f=this.getMobileSolution(e);return _.sequencePromises(f,function(a){return c&&(a.isDirty=!0),a.calculateLayoutGroupStatus()}).then(function(){return d.onPartCalculatedCallback?d.onPartCalculatedCallback(a,b):void 0})},a.prototype.adjustAndValidateMobileHeaderSolution=function(a,b){var c=a[0];if(c.status===this.solutionStatusCodes.pass){var d=b[0].segments[0].getLE(),e=_.find(d.layout,function(a){return"line"===a.type}),f=c.segments[0].getLE(),g=_.find(f.layout,function(a){return"line"===a.type});e?g.componentProperties=ob.deepClone(e.componentProperties):_.remove(f.layout,function(a){return a===g});var h=_.map(d.getLayoutsInMenuStripArea(),function(a){return a.subType}),i=_.filter(f.layout,function(a){return _.contains(h,a.subType)});_.isEmpty(i)?(delete f.menuStripTop,delete f.menuStripBottom):(f.menuStripTop=_(i).map(function(a){return a.top}).min(),f.menuStripBottom=_(i).map(function(a){return a.top+a.height}).max());var j=_.map(f.getLayoutsInMenuStripArea(),function(a){return a.subType});return h.length===j.length}return!1},a.prototype.imageStylesFit=function(a,b){var c=a.getLE(),d=b.getLE(),e=_.get(c,"overrides.style.media"),f=_.get(d,"overrides.style.media"),g=d.getMediaType(),h=d.containingSegment.getMediaOverrides(),i=h&&"Image"===h.name&&g===this.PresetMediaType.IMAGE;return i&&e&&e!==f?!1:!0},a.prototype.mediaTypeFit=function(a,b){var c=a.getLE(),d=c.getMediaLayout(),e=b.getLE().getMediaType();return d&&d.squareImage&&e===this.PresetMediaType.COAST2COAST?!1:!d||e===this.PresetMediaType.SHAPE===c.isShapeLayout(d)},a.prototype.decorationFit=function(a,b){var c=a.getLE(),d=b.getLE();return d.getAllDecorativeContainersLayout().length>=c.getAllDecorativeContainersLayout().length},a.prototype.getArrayOfSegments=function(a){return _(a).map("segments").flatten().value()},a.prototype.isMobileSolutionFitsDesktopSolution=function(a,b,c){var d=this;if(a===this.sitePartTypes.HEADER)return this.adjustAndValidateMobileHeaderSolution(b,c);var e=this.getArrayOfSegments(b),f=this.getArrayOfSegments(c),g=_.all(e,function(a,b){var c=f[b];return d.decorationFit(a,c)&&d.imageStylesFit(a,c)&&d.mediaTypeFit(a,c)});return g},a.prototype.isMobilePresetFitsDesktopSolution=function(a,b){return!0},a.prototype.detectAndHandleMobileSolutionFailure=function(a,b,c,d){var e,f=this,g=this.getMobileSolution(d);return this.simpleSolutionManager.successSection(g)&&this.isMobileSolutionFitsDesktopSolution(a,g,d)?this.$p.when():(a===this.sitePartTypes.HEADER&&(e="SiteHeader"),this.defaultsService.getPresetsForNode(c,e,!1,!0).then(function(b){var e=_.filter(b,function(a){return f.isMobilePresetFitsDesktopSolution(a,d)}),g=f.storyServices.generateRandomOffset(a,e.length),h=e.splice(0,g);return e=e.concat(h),_.whilePromises(function(a){return!(a&&a[0]||!e.length)},function(){var b=e.shift();return b&&b.data?f.layoutSolver.createLayoutPresetPreviewSolutions([b],c).then(function(b){return b&&b[0]&&!f.isMobileSolutionFitsDesktopSolution(a,b[0].solution,d)?void 0:b}):void 0})}).then(function(a){var c=a&&a[0];if(!c)return _.sequencePromises(g,function(a){return a.isHeader()?(a.segments[0].chooseNextlayoutElementOption(1),a.ensureHeightMatchesContent().then(function(){a.status=f.solutionStatusCodes.pass})):(f.simpleSolutionManager.resetLayoutToJoker(a),a.calculateLayoutGroupStatus())});var e=_.flatten(_.map(d,"segments"));_.each(c.solution,function(a,b){var c=a.getLgData(),d=e[b],f=_.get(d.containingLG.getLgData(),["strip","color"]);f&&_.set(c,["strip","color"],f)}),f.layoutSelectionStoreProvider.mergeLayoutSelectionStoreFromPresetPreview(c.lss,c.dummyPageId,b,f.layoutSelectionStoreProvider.getKeyMap(c.solution,c.previewNode),void 0,!1,!0),f.setMobileSolution(d,c.solution)}).then(function(){_.each(g,function(a){var b=a.getDesktopLG(),c=a.getLgData(),d=b.getLgData();_.defaults(c,d),c.strip.color=d.strip.color})}))},a}();a.MobileSolutionManager=b,angular.module("siteGeneratorStaticsCoreAppInternal").service("mobileSolutionManager",b)}(core||(core={}));var core;!function(a){var b=function(){function a(){}return a}();b.Init="init wizard service",b.LoadLayouts="load layouts",b.LoadPreview="load preview",b.LoadStoryUrl="load story url",b.InitThemeChooser="init theme chooser",b.InitLayoutSolver="init layout solver",b.BackwardCompatibility="backward compatibility",b.ChangeStory="change story",a.BIWizardServiceInitSteps=b;var c=function(){function a(){}return a}();c.Init="init core B",c.SetStyles="set styles",c.NodeChanged="node changed",a.BIWizardServiceInitBSteps=c;var d=function(){function a(){}return a.prototype.warning=function(a,b){},a.prototype.error=function(a,b){},a.prototype.mark=function(a){},a.prototype.measure=function(a){},a}();a.ObMonitoring=d,angular.module("siteGeneratorStaticsCoreAppInternal").service("obMonitoring",d)}(core||(core={})),angular.module("siteGeneratorStaticsCoreAppInternal").directive("visualValidation",["visualValidation","visualValidationContainer",function(a,b){return{restrict:"AE",link:function(a,c){b.init(c),c.html("")}}}]).service("visualValidationContainer",function(){_.assign(this,{$element:void 0,init:function(a){this.$element=a},$headerLayoutSolver:void 0,initHeaderLayoutSolver:function(a){this.$headerLayoutSolver=a}})}),angular.module("siteGeneratorStaticsCoreAppInternal").directive("cropperController",["$window","cropFaceService","flags","obMonitoring",function(a,b,c,d){return{restrict:"E",scope:{node:"=",imgdata:"=",viewport:"=",crop:"=",isclosed:"=",oncropclose:"=",bindoutsideclick:"=",autoclose:"="},templateUrl:"views/cropper-controls.html",controller:["$scope","$element",function(e,f){e.flags=c,e.currentImageIndex=0,e.crop=e.crop||[];var g=a.Cropper.create(e.imgdata[e.currentImageIndex],e.viewport,e.crop[e.currentImageIndex]),h=g.cropper,i={};e.zoom=h.getZoom(),e.type="p5a",e.changeImg=function(a){if(e.currentImageIndex!==a){e.crop[e.currentImageIndex]=g.cropper.getUnadjustedCropData(),g.cropper.setImgData(e.imgdata[a]);var b=e.crop[a];b&&g.cropper.setUnadjustedCrop(b.x,b.y,b.w,b.h),g.update(!0),e.currentImageIndex=a}},e.$watch("crop",function(){var a=e.crop&&e.crop[e.currentImageIndex];a&&g.cropper.setUnadjustedCrop(a.x,a.y,a.w,a.h),g.update(!0)},!0),e.$watch("imgdata",function(){g.cropper.setImgData(e.imgdata[e.currentImageIndex]),g.update(!0)},!0),e.$watch("viewport",function(){g.cropper.setViewport(e.viewport,!1),g.update(!0)},!0),e.$watch("isclosed",function(){e.isclosed?f.empty():f.append(g.$root)}),e.$on("$destroy",function(){g.destroy(),g=null,h=null}),g.onUpdate=function(){e.$applyAsync(function(){e.zoom=Math.round(100*g.cropper.getZoom())})};var j,k=_.debounce(function(a){j=a,d.mark({name:"imageCropZoomInZoomOut",data:{nodeId:e.node.getId(),sectionType:e.node.contentElementType,sectionAlias:e.node.alias,zoomType:j>a?"zoom out":"zoom in"}})},300),l=function(a){void 0===j&&(j=100*g.cropper.getZoom()),k(a)};e.setZoomValue=function(a){var b=a instanceof jQuery.Event,c=b?+a.target.value:+a;isNaN(c)||g&&(i=g.cropper.getCropData(),g.cropper.setCrop(i.x,i.y,i.w,i.h),l(c),g.cropper.setZoom(c/100),g.update())},e.closeCropper=function(a){e.autoclose&&f.empty(),e.crop[e.currentImageIndex]=g.cropper.getUnadjustedCropData(),e.oncropclose(a?"ok":"cancel",e.crop),a?(d.measure({name:"imageCropSuccess",data:{nodeId:e.node.getId(),sectionType:e.node.contentElementType,sectionAlias:e.node.alias}}),e.$parent.consumerBiLogger.contentEditor.imageCropSave(e.node.id,e.node.alias,e.node.contentElementType)):d.measure({name:"imageCropCancel",data:{nodeId:e.node.getId(),sectionType:e.node.contentElementType,sectionAlias:e.node.alias}})},e.bindoutsideclick(e.closeCropper.bind(!0)),e.smartCrop=function(){g.cropper.setSmartCrop(g.update)},e.faceCrop=function(c,d){var f=e.imgdata[e.currentImageIndex];e.lastFaceCrop&&e.lastFaceCrop.imgIndex===e.currentImageIndex?e.lastFaceCrop.faceIndex=(e.lastFaceCrop.faceIndex+1)%f.fileInput.face.length:e.lastFaceCrop={imgIndex:e.currentImageIndex,faceIndex:0};var h=f.fileInput.face[e.lastFaceCrop.faceIndex];a.console.log("------------------------------------------------"),a.console.log("Face crop: ",f.fileInput),a.console.log("ViewPort: ",e.viewport),a.console.log("Image: ",f),0===c?h=b.cropFaceMinAlpha(e.viewport,f,h):1===c?h=b.cropFaceCustomAlpha(e.viewport,f,h,d):2===c&&(h=b.cropFaceMaxAlpha(e.viewport,f,h,d)),g.cropper.setUnadjustedCrop(h.x,h.y,h.width,h.height),g.update()},e.facesCrop=function(){var a=e.imgdata[e.currentImageIndex],c=b.combineFaces(a.fileInput.face),d=!0;c=b.cropFaceMaxAlpha(e.viewport,a,c,d),g.cropper.setUnadjustedCrop(c.x,c.y,c.width,c.height),g.update()}}],link:function(b,c){var d,e,f=12,g=0,h=c.find(".cropper-tool-controls"),i=function(){if(h){var c=function(){return b.viewport.top>a.innerHeight-b.viewport.top-b.viewport.height};d=b.viewport.left-g,e=b.flags.updatedCropper||c()?b.viewport.top-h.height()-f:b.viewport.top+b.viewport.height+f,h.css({top:e,left:d})}};i()}}}]),angular.module("siteGeneratorStaticsCoreAppInternal").directive("tpaPreview",["$compile","previewService","$timeout","flags","designKit",function(a,b,c,d,e){return{restrict:"E",scope:{tpaPreset:"=",onClick:"&"},link:function(f,g){function h(a){a&&a.data&&a.data.html&&(a.data.html=a.data.html.replace(/<img[^>]*?display: none[^>]*>/g,""))}function i(a){return e.invertColor("{"+a+"}").slice(1,-1)}function j(a){if(0!==a.indexOf("style")){if(l[a]){var b=l[a];return d.invertTpaPalette&&(b=i(b)),m.theme.colors.get(b)}return o[a]?"font: "+m.theme.fonts.get(o[a]).replace(/{.*}/,"").trim()+";":a}}var k={};h(f.tpaPreset);var l={"white/black":"color_1","black/white":"color_2","primery-1":"color_3","primery-2":"color_4","primery-3":"color_5","color-1":"color_11","color-2":"color_12","color-3":"color_13","color-4":"color_14","color-5":"color_15","color-6":"color_16","color-7":"color_17","color-8":"color_18","color-9":"color_19","color-10":"color_20","color-11":"color_21","color-12":"color_22","color-13":"color_23","color-14":"color_24","color-15":"color_25","color-16":"color_26","color-17":"color_27","color-18":"color_28","color-19":"color_29","color-20":"color_30","color-21":"color_31","color-22":"color_32","color-23":"color_33","color-24":"color_34","color-25":"color_35"},m=b.getDocumentServices();if(f.tpaPreset.data.presetImageUrl)return void g.append("<img src="+f.tpaPreset.data.presetImageUrl+"><img>");if(m.tpa.style.mapWixParamsToCssValues){var n=f.tpaPreset.data.style.style.properties;d.invertTpaPalette&&(n=ob.deepClone(n),_.each(n,function(a,b){0===a.indexOf("color")&&(n[b]=i(a))})),m.tpa.style.mapWixParamsToCssValues(n,function(a){k=a})}var o=_.invert(m.tpa.style.getNameToFontsKeyMap()),p=angular.element(f.tpaPreset.data.html),q=angular.element('<a ng-click="onClick()"></a>'),r=f.tpaPreset.data.originalWidth,s=f.tpaPreset.data.originalHeight,t=240,u=t/r;u=u>=1?1:u,p.css({transform:"scale("+u+")","transform-origin":"top left",width:r-1+"px",height:s+"px"}),q.css({position:"absolute",width:"100%",top:"0px",left:"0px","z-index":"1"}),g.css({display:"block",position:"relative","background-color":d.invertTpaPalette?m.theme.colors.get("color_15"):m.theme.colors.get("color_11")});var v=a(q)(f);g.append(v),g.append(p),c(function(){var a=g.height()*u+20;g.css("height",a),g.css("padding-top",10),g.css("overflow","hidden"),q.css("height",a),p.css("width",r)},0);var w=f.tpaPreset.data.css.replace(/@font-face\{.*?\}/gm,""),x=angular.element("<style>").html(w),y=a(x)(f);g.prepend(y),f.getParamValue=function(a){for(var b,c,d=0;d<a.length;d++){if(b=a[d],k[b])return k[b];if(c=j(b),void 0!==c)return c}}}}}]);var ObMonitoring=core.ObMonitoring,HealthCheck=function(){function a(a,b,c,d,e,f,g){this.obMonitoring=a,this.$log=b,this.storyServices=c,this.richTextService=d,this.flags=e,this.$p=f,this.layoutSelectionStoreProvider=g,this.defualtGallery={superType:"gallery",sourceProperties:{imageScaling:"crop",imageScalingCropOption:"4:3",thumbnailAspectRatio:{horizontal:4,vertical:3}},name:"Strip Showcase",type:"StripShowcase",properties:{arrowMode:!1,autoplay:!0,cropAndFitStage:"crop",imageMargin:5,imageScale:"4:3",showThumbnails:!0,thumbsMargin:5,thumbsScale:"4:3"}}}return a.$inject=["obMonitoring","$log","storyServices","richTextService","flags","$p","layoutSelectionStoreProvider"],a.prototype.validateAndSave=function(){var a=this;if(this.flags.fixVariationData){var b=this.layoutSelectionStoreProvider.getLayoutSelectionStore().variations,c=[];if(_.each(b,function(a,b){Array.isArray(a)&&c.push({key:b,value:a})}),_.each(c,function(a){delete b[a.key]}),c.length>0)return this.storyServices.story.save().then(function(){return b=a.layoutSelectionStoreProvider.getLayoutSelectionStore().variations,_.each(c,function(a){b[a.key]={},_.forEach(a.value,function(c,d){c&&(b[a.key][d]=c)})}),a.storyServices.story.save()})}return this.$p.when()},a.prototype.validateAndFix=function(a){var b=this,c=_.get(a.blob,["bft","data","children"]),d=_.filter(c,function(a){return"Page"===a.contentElementType}),e=_.get(a.blob,["locale","contentElements"]);this.fixLog={};var f=this.getDuplicateIds(c);if(!_.isEmpty(f)){this.reportWarning("story has duplicate nodeId",a.storyId.metaSiteId),this.$log.warn("found duplicate ids");var g=this.storyServices.calculateNextPageAndNodeId(a.blob.bft);this.$log.warn("calculated next ids: "+JSON.stringify(g)),_.each(f,function(c,d){b.fixNodeIdDuplication(a,d,c,g)}),this.$log.warn("update next in bft ids: "+JSON.stringify(g)),a.blob.bft.data.nextFirstLevelNodeId=g.nextFirstLevelNodeId,a.blob.bft.data.nextPageNodeId=g.nextPageNodeId}if(this.removeIllegalChildren(c,a.storyId.metaSiteId),this.flags.removeUnusedContentElements){var h=this.getUnusedContentElements(e,c);_.isEmpty(h)||(this.reportWarning("story has unused content elements",a.storyId.metaSiteId),_.each(h,function(a){var c=b.safeId(a);b.$log.warn("remove content of: "+c),delete e[c]}))}this.scanMediaValues(c,e,a),this.removeAggregatorLayouts(a,d),this.scanPages(a,c,e,d),this.flags.changeFullWidthCollageToSlideShow&&this.changeGalleryIfTextOnIt(a),this.moveSiteDesignProperties(a),this.removeUnusedMenuAnchors(c,d,a)},a.prototype.getContactsInPage=function(a){return _.filter(a.children,function(a){return"Contact"===a.contentElementType})},a.prototype.changeGalleryIfTextOnIt=function(a){var b=this,c=_.get(a,["blob","locale","layoutSelections","overrides","media"]),d=_.get(a,["blob","locale","layoutSelections","pages"]);_.each(d,function(a){_.each(a,function(a,d){if(a.manualLE&&a.manualLE.indexOf("#o")>-1){var e=d.split("|"),f=c[e[0]+"|"+e[1]];f&&f._preferred&&_.each(f._preferred,function(a,c){"Fullwidth Collage"===a.name&&(f._preferred[c]=b.defualtGallery)})}})})},a.prototype.removeNodes=function(a,b,c,d){var e=this;_.each(c,function(c){if(e.$log.warn("remove "+c.contentElementType+" node: "+c.id+" from page "+b.id),b.children.splice(b.children.indexOf(c),1),d){var f=_.findIndex(a,function(a){return a.id===c.id});f>-1&&a.splice(f,1)}})},a.prototype.scanPages=function(a,b,c,d){var e,f=this,g=_.filter(b,function(a){return"Contact"===a.contentElementType});if(g&&(e=g[0],g.length>1))for(var h=1;h<g.length;h++)this.reportWarning("story has more than one contact master node",a.storyId.metaSiteId),this.$log.warn("remove contact master node: "+g[h].id),b.splice(b.indexOf(g[h]),1);_.each(d,function(a){var d=_.filter(a.children,function(a){return!!a.widgetRef});d.length>0&&(d=_.groupBy(d,function(a){return a.widgetRef.id}),_.each(d,function(c){c.length>1&&f.removeNodes(b,a,c.slice(0,1),!0)}));var g=f.getContactsInPage(a);if(e&&(f.removeNodes(b,a,_.filter(g,function(a){return a.id!==e.id})),g=f.getContactsInPage(a)),g.length>1&&f.removeNodes(b,a,g.slice(0,1)),f.flags.removeDuplicateSectionsInPage){var h=_.filter(_.groupBy(a.children,function(a){return a.id}),function(a){return a.length>1});_.each(h,function(c){f.removeNodes(b,a,c.slice(1))})}a.alias=a.alias&&f.normalizePageName(a.alias),a.displayName=a.displayName&&f.normalizePageName(a.displayName);var i=c[a.id];i&&i.displayName&&(i.displayName.value=f.normalizePageName(i.displayName.value))})},a.prototype.normalizePageName=function(a){return a=this.richTextService.toPlainText(a),a.substr(0,100)},a.prototype.moveSiteDesignProperties=function(a){var b=_.get(a,["blob","locale","layoutSelections"]);void 0===b.siteOverrides&&(this.$log.warn("creating siteOverrides and moving site design pars there"),b.siteOverrides={},_.each(["siteAnimation","siteFontAdditionalSize","siteScrollType"],function(a){void 0!==b[a]&&(b.siteOverrides[a]=b[a]),delete b[a]}))},a.prototype.removeAggregatorLayouts=function(a,b){var c=_.get(a,["blob","locale","layoutSelections","pages"]);c&&_.each(b,function(a){var b=c[a.id];_.each(b,function(a){a&&a.LE&&(a.LE=_.map(a.LE,function(a){return a.replace("#ag","")}),a.manualLE&&(a.manualLE=a.manualLE.replace("#ag","")))})})},a.prototype.removeUnusedMenuAnchors=function(a,b,c){var d=this;if(_.isString(c.blob.mainMenu)&&(c.blob.mainMenu=JSON.parse(c.blob.mainMenu)),a&&a.length>0&&c.blob.mainMenu.length>0){var e=c.blob.mainMenu.length;c.blob.mainMenu=c.blob.mainMenu.filter(function(a){if(a.page)return!0;for(var c,e=0;e<b.length;e++)if(c=_.find(b[e].children,function(b){return b.id===a.id}))return!0;return c||d.$log.warn("removed unused menu anchor",a.name,"for node",a.id,"in page",a.pageId),!1}),e>c.blob.mainMenu.length&&this.reportWarning("story has unused menu anchors",c.storyId.metaSiteId)}},a.prototype.scanMediaValues=function(a,b,c){var d=this;_.each(b,function(b,e){_.each(b,function(b){if("media"===b.type){_.each(b.value,function(a){a.Title&&a.Title.length>DocumentServicesMediator.GENERAL_VALIDATIONS.MAX_MEDIA_TITLE_LENGTH&&(a.Title=a.Title.substr(0,DocumentServicesMediator.GENERAL_VALIDATIONS.MAX_MEDIA_TITLE_LENGTH)),a.Description&&a.Description.length>DocumentServicesMediator.GENERAL_VALIDATIONS.MAX_MEDIA_DESCRIPTION_LENGTH&&(a.Description=a.Description.substr(0,DocumentServicesMediator.GENERAL_VALIDATIONS.MAX_MEDIA_DESCRIPTION_LENGTH))});var f=b.value.length;if(b.value=_.uniq(b.value,function(a){return(a.relativeUri||a.videoUrl)+a.mediaType}),b.value.length<f){d.reportWarning("story has duplicate media values",c.storyId.metaSiteId);var g,h=e.replace(/\_/g,"."),i=[];_.each(a,function(a){"Page"===a.contentElementType&&_.each(a.children,function(b){b.id===h&&(g=b.alias||b.contentElementType,i.push(a.alias)),_.each(b.children,function(b){b.id===h&&(g=b.alias||b.contentElementType,i.push(a.alias))})})}),d.$log.warn("removed duplicate media values in content element",g,"in pages",i)}_.each(b.value,function(a){"extVideo"===a.mediaType&&"string"==typeof a.videoUrl&&(a.videoUrl=a.videoUrl.trim())})}})})},a.prototype.removeIllegalChildren=function(a,b){var c=this;_.each(a,function(a){if("Page"===a.contentElementType||"footer"===a.contentElementType)c.removeIllegalChildren(a.children,b);else if(a.children.length>0){if("contentElementList"===a.type){var d=a.id+".",e=_.filter(a.children,function(a){return!a.id.startsWith(d)}),f=_.findIndex(a.children,function(a){return"ListFooter"===a.contentElementType});if(f>-1&&f<a.children.length-1){for(var g=f+1;g<a.children.length;g++)e.push(a.children[g]);e=_.uniq(e)}e.length>0&&(c.reportWarning("story has illegal list items",b),c.$log.warn("found illegal list items in list",a.alias||a.contentElementType,a.id),_.each(e,function(b){c.$log.warn("remove illegal list item: "+b.id),a.children.splice(a.children.indexOf(b),1)}))}else c.$log.warn("single node has children",a.alias||a.contentElementType,a.id),c.reportWarning("story has single node with children",b);c.removeIllegalChildren(a.children,b)}})},a.prototype.setId=function(a,b){a.id=b,_.each(a.children,function(a,c){a.id=b+"."+c})},a.prototype.safeId=function(a){return a.replace(/\./g,"_")},a.prototype.fixNodeIdDuplication=function(a,b,c,d){var e=this;if("Page"===c[0].contentElementType){_.isString(a.blob.mainMenu)&&(a.blob.mainMenu=JSON.parse(a.blob.mainMenu));for(var f=1;f<c.length;f++){var g=c[f],h=a.blob.bft.data.children.indexOf(g);a.blob.bft.data.children.splice(h,1);var i=_.findIndex(a.blob.mainMenu,function(a){return!(a.page===!0&&a.id===b)});a.blob.mainMenu.splice(i,1),this.$log.warn("remove duplicate page: "+g.id+" page name: "+g.displayName)}}else{_.each(a.blob.bft.data.children,function(c){if("Page"===c.contentElementType){var d=0;c.children=_.filter(c.children,function(f,g){if(f.id===b){e.$log.warn("remove node ceType:"+(f.alias||f.contentElementType)+", id:"+f.id+", index:"+g+", pageId:"+c.id+", pageName: "+c.displayName);var h=_.get(a.blob.locale.layoutSelections,["pages",c.id,"solutionLGs"]);return h&&delete h[f.id],_.isString(a.blob.mainMenu)&&(a.blob.mainMenu=JSON.parse(a.blob.mainMenu)),a.blob.mainMenu=_.filter(a.blob.mainMenu,function(a){return!(a.pageId===c.id&&a.id===b)}),e.fixLog.removedNodes=e.fixLog.removedNodes||[],e.fixLog.removedNodes.unshift({alias:f.alias,ceType:f.contentElementType,index:g-d,pageId:c.id,pageName:c.displayName}),d++,!1}return!0})}}),_.each(c,function(b){var c=a.blob.bft.data.id+"."+ ++d.nextFirstLevelNodeId;e.$log.warn("change id of master node "+(b.alias||b.contentElementType)+" from "+b.id+" to "+c),
e.setId(b,c)});var j=this.safeId(b);_.each(_.keys(a.blob.locale.contentElements),function(b){(b===j||b.startsWith(j+"_"))&&(e.$log.warn("remove content of "+b),delete a.blob.locale.contentElements[b])})}},a.prototype.getPageNodesAndLGs=function(a){return _(a.blob.bft.data.children).filter(function(a){return"Page"===a.contentElementType}).map(function(b){return{children:_.filter(b.children,function(a){return!a.userHidden}),solutionLGs:a.blob.locale.layoutSelections.pages[b.id].solutionLGs}}).value()},a.prototype.getDuplicateIds=function(a){var b=_.chain(a).groupBy(function(a){return a.id}).pick(function(a){return a.length>1}).value();return b},a.prototype.getProblematicIds=function(a){var b=a.blob.bft.data.children,c=_.chain(b).filter(function(a){return a.id.indexOf("NaN")>=0}).uniq().value(),d=b.filter(function(a){return a.id.indexOf("NaN")<0}),e=_.chain(d).groupBy(function(a){return a.id}).filter(function(a){return a.length>=2}).flatten().value();return{nans:c,dups:e}},a.prototype.removeNode=function(a,b){var c=a.blob.bft.data.children,d=c.reduce(function(a,c){return c.id!==b.id&&(c.children=c.children.filter(function(a){return a.id!==b.id}),a.push(c)),a},[]),e=a.blob.locale.contentElements,f=b.id.replace(".","_"),g=Object.keys(e).filter(function(a){return 0!==a.indexOf(f)}).reduce(function(a,b){return a[b]=e[b],a},{});a.blob.locale.contentElements=g;var h=a.blob.locale.savedSites.undefined.pagesMap;return delete h[b.id],a.blob.bft.data.children=d,a},a.prototype.deepFilterObject=function(a,b){var c=this;return null===a||Array.isArray(a)||"object"!=typeof a?a:Object.keys(a).reduce(function(d,e){return e.indexOf(b)<0&&(d[e]=c.deepFilterObject(a[e],b)),d},{})},a.prototype.reportWarning=function(a,b){this.obMonitoring.warning("HealthCheck: "+a,{metaSiteId:b})},a.prototype.getUnusedContentElements=function(a,b){if(b){var c,d=_.map(b,"id"),e=[];return _.each(a,function(a,b){var d=b.split("_");2===d.length&&"header"!==d[1]&&(c=b.replace(/\_/g,"."),e.push(c))}),_.difference(e,d)}},a}();angular.module("siteGeneratorStaticsCoreAppInternal").service("healthCheck",HealthCheck);var core;!function(a){var b=function(){function a(a,b,c,d,e,f,g,h,i,j,k,l){this.designKit=a,this.designKitParameters=b,this.previewColors=c,this.storyServices=d,this.simpleSolutionManager=e,this.selections=f,this.modelTree=g,this.mediaGallery=h,this.PresetMediaType=i,this.flags=j,this.cropFaceService=k,this.patternService=l}return a.$inject=["designKit","designKitParameters","previewColors","storyServices","simpleSolutionManager","selections","modelTree","mediaGallery","PresetMediaType","flags","cropFaceService","patternService"],a.prototype.getUniqueConfigurationsOfActiveKit=function(){var a=this;return _.uniq(this.designKit.getConfigurationsOfActiveKit(),function(b){return a.previewColors.getRGBColor(a.designKitParameters[b.display])})},a.prototype.getBackgroundOptions=function(a,b){void 0===b&&(b="body"),a.isList()&&(a="header"===b?this.modelTree.getListHeader(a):this.modelTree.getListFooter(a));var c=a.contentElement.getValuesByMediaType();return{video:c.video,bgImage:c.bgImage,color:_.map(this.getUniqueConfigurationsOfActiveKit(),function(a){return{mediaType:"color",confId:a.id,color:a.display}}),pattern:this.patternService.getPatternOptions(-1)}},a.prototype.getBackground=function(a,b,c){if(void 0===b&&(b="body"),a.isList()){var d=this.getBackgroundInternal(this.modelTree.getListFooter(a),c);if("header"===b){var e=this.modelTree.getListHeader(a);if(e.isUserHidden())return;var f=this.getBackgroundInternal(e,c);if(this.compareBackgrounds(d,f))return;return f}return d}return this.getBackgroundInternal(a,c)},a.prototype.getBackgroundInternal=function(a,b){var c=ob.deepClone(this.getBackgroundSelection(a))||{mediaType:"color"},d=this.modelTree.findIdentifyingNode(a),e=b||this.simpleSolutionManager.getSectionSolution(d.containerPageId,d.id),f=this.designKit.getConfigurationOfLg(a.isListHeader()?_.first(e):_.last(e));return"color"===c.mediaType?(c.confId=f.id,c.color=f.display):c.backgroundColor={mediaType:"color",confId:f.id,color:f.display},"pattern"===c.mediaType&&(c.thumbRatio=this.patternService.getPatternRatio(c)),c},a.prototype.setBackground=function(a,b,c,d){if(void 0===c&&(c="body"),a.isList()){var e=this.modelTree.getListHeader(a);"header"===c?e.isUserHidden()||this.setBackgroundInternal(this.modelTree.getListHeader(a),b||this.getBackground(a,"body",d),c,d):(e.isUserHidden()||this.getBackground(a,"header",d)||this.setBackgroundInternal(e,b,c,d),this.setBackgroundInternal(this.modelTree.getListFooter(a),b,c,d))}else this.setBackgroundInternal(a,b,c)},a.prototype.setBackgroundInternal=function(a,b,c,d){var e=this;void 0===c&&(c="body");var f={mediaType:b.mediaType},g="color"===b.mediaType?b:b.backgroundColor;if(g&&g.confId>-1){var h=this.modelTree.findIdentifyingNode(a),i=d||this.simpleSolutionManager.getSectionSolution(h.containerPageId,h.id);a.isListHeader()?i=_.slice(i,0,1):a.isListFooter()&&(i=_.filter(i,function(a){return!a.isListHeader()})),this.designKit.setSpecificConfigurationForSectionByConfId(i,g.confId,void 0,!0)}if("color"!==b.mediaType&&("gallery"===b.mediaType?(f.galleryType=b.galleryType,f.mediaIds=b.mediaIds&&_.map(b.mediaIds)||_.map(b.mediaItems,function(a){return e.mediaGallery.getItemId(a)})):f.mediaId=b.mediaId||this.mediaGallery.getItemId(b)),this.selections.getForNodeByType(a).background=f,"bgImage"===f.mediaType){var j=a.getAlignment(b.relativeUri)||this.cropFaceService.getAlignmentByFacePosition(b);j&&this.setBackgroundAlignment(a,j,c),this.flags.sectionBackground&&this.setBackgroundHasFacesProperty(b,a)}},a.prototype.setBackgroundHasFacesProperty=function(a,b){var c=[].concat(_.get(a,"fileInput.face"));b.backgroundHasFaces=c.every(function(a){return a})&&c.length>0},a.prototype.setBackgroundAndUpdateViewer=function(a,b,c){return void 0===c&&(c="body"),this.setBackground(a,b,c),this.updateViewer(a)},a.prototype.getBackgroundAlignment=function(a,b){return void 0===b&&(b="body"),a.isList()&&(a="header"===b?this.modelTree.getListHeader(a):this.modelTree.getListFooter(a)),this.selections.getForNodeByType(a).backgroundAlignment||"center"},a.prototype.setBackgroundAlignment=function(a,b,c){var d=this;void 0===c&&(c="body"),a.isList()&&(a="header"===c?this.modelTree.getListHeader(a):this.modelTree.getListFooter(a));var e=this.getBackgroundSelection(a).mediaId,f=a.contentElement.getMediaField(),g=f&&_.find(f.value,function(a){return d.mediaGallery.getItemId(a)===e});a.setAlignment(g.relativeUri,b,!0),this.selections.getForNodeByType(a).backgroundAlignment=b},a.prototype.updateViewer=function(a){var b=this,c=a.containerPageId,d=a.id,e=this.simpleSolutionManager.getSectionSolution(c,d);return this.simpleSolutionManager.replaceSectionOnPage(c,d,e).then(function(a){return b.storyServices.renderAnimated(a)})},a.prototype.isLayoutCoverBackground=function(a){if(!a)return!1;var b=a.segments[0].getLE();if(b){var c=_.find(b.argList,function(a){return"media"===a.type});if(c){var d=a.getLayoutSelectionStore().getOverride("media",a.segments[0],"allowedMediaOverrides");return 1===a.segments.length?d===this.PresetMediaType.COAST2COAST&&b.structure&&1===b.structure.length&&1===b.structure[0].length:d===this.PresetMediaType.COLUMNBG}}},a.prototype.isBackgroundHidden=function(a){var b=a.containerPageId,c=a.id,d=this.simpleSolutionManager.getSectionSolution(b,c);return a.isList()?{bg:this.isLayoutCoverBackground(_.find(d,function(a){return!a.isListHeader()})),headerBg:this.isLayoutCoverBackground(_.find(d,function(a){return a.isListHeader()}))}:this.isLayoutCoverBackground(d[0])},a.prototype.resetBackgroundToStripData=function(a){delete a.mediaRef,delete a.posterImageRef,delete a.qualities,delete a.mediaType,delete a.mediaItems,delete a.fileBaseUrl,delete a.url,delete a.duration,delete a.width,delete a.height,delete a.fittingType,delete a.alignType},a.prototype.getBackgroundSelection=function(a){return this.selections.getForNodeByType(a).background},a.prototype.compareBackgrounds=function(a,b){return _.eq(_.omit(a,"backgroundColor"),_.omit(b,"backgroundColor"))},a.prototype.extractBackgroundData=function(a,b,c){var d=this,e={};b&&this.resetBackgroundToStripData(b);var f=this.getBackgroundSelection(a);if(a.isListItem){var g=this.modelTree.findIdentifyingNode(a),h=this.modelTree.getListFooter(g),i=this.getBackgroundSelection(h);(!a.isListHeader()||this.compareBackgrounds(f,i))&&(a=h,f=i)}if(f&&"color"!==f.mediaType){var j=a.contentElement,k=j.getMediaField();if("gallery"===f.mediaType){e.mediaType=f.mediaType,e.galleryType=f.galleryType,e.galleryProps=f.galleryProps;var l=_.groupBy(k&&k.value,function(a){return d.mediaGallery.getItemId(a)});e.mediaItems=_.compact(_.map(f.mediaIds,function(a){return _.first(l[a])}))}else if("pattern"===f.mediaType){e.mediaType=f.mediaType;var m=this.patternService.getPatternItem(f,c);e.mediaItems=[m],b&&(e.opacity=this.patternService.getPatternOpacity(c,b.color,m.size))}else{var n=f.mediaId,o=k&&_.find(k.value,function(a){return d.mediaGallery.getItemId(a)===n});o&&(e.mediaType=f.mediaType,e.mediaItems=[o],"bgImage"===f.mediaType&&(e.alignType=this.selections.getForNodeByType(a).backgroundAlignment||"center"))}}return e},a.prototype.applyBackgroundToStripData=function(a,b,c){Object.assign(b,this.extractBackgroundData(a,b,c))},a.prototype.hasBackgroundOfTypes=function(a,b){var c=this.getBackground(a),d=this.getBackground(a,"header");return _.contains(b,c.mediaType)||d&&_.contains(b,d.mediaType)},a.prototype.hasScrollableBackground=function(a){return this.hasBackgroundOfTypes(a,["bgImage","video"])},a}();a.SectionBackgroundService=b}(core||(core={})),angular.module("siteGeneratorStaticsCoreAppInternal").service("sectionBackgroundService",core.SectionBackgroundService);var core;!function(a){var b=function(){function a(a,b,c,d,e){this.Solution=a,this.layoutSolver=b,this.sectionBackgroundService=c,this.designKit=d,this.storyServices=e}return a.$inject=["Solution","layoutSolver","sectionBackgroundService","designKit","storyServices"],a.prototype.getSectionBg=function(a){var b={bg:this.sectionBackgroundService.getBackground(a.node,"body",a.groups)};return a.isList&&(b.headerBg=this.sectionBackgroundService.getBackground(a.node,"header",a.groups)),b},a.prototype.resetToDefaultBackground=function(){var a=this,b=this.layoutSolver.siteSolutions.body;return _.each(b,function(b){var c=b.getSelectedSolution(),d=a.Solution.calculateListSpans(c);_.each(d,function(b){var c=a.getSectionBg(b);a.designKit.setSpecificConfigurationForSection(b.groups,b.groups,void 0,c)})}),this.storyServices.reRender()},a.prototype.getDefaultBackgroundConfForSection=function(a,b,c){var d;if(b)d=this.designKit.getBgDefaultColorConfIdForSection(a.groups,{headerBg:c}).confIdForFirstLG;else if(a.isList){var e=this.sectionBackgroundService.getBackground(a.node,"header",a.groups),f=this.designKit.getBgDefaultColorConfIdForSection(a.groups,{headerBg:e,bg:c});d=f.confIdForSecondLG||f.confIdForFirstLG}else d=this.designKit.getBgDefaultColorConfIdForSection(a.groups,{bg:c}).confIdForFirstLG;return d},a}();a.DefaultBackground=b}(core||(core={})),angular.module("siteGeneratorStaticsCoreAppInternal").service("defaultBackground",core.DefaultBackground);var core;!function(a){var b=function(){function a(a,b,c,d,e,f,g,h,i,j,k,l,m,n,o){this.flags=a,this.selections=b,this.sectionBackgroundService=c,this.modelTree=d,this.layoutSolver=e,this.storyServices=f,this.documentServicesMediator=g,this.themeChooser=h,this.previewColors=i,this.designKit=j,this.pagesManager=k,this.PresetMediaType=l,this.layoutSelectionStoreProvider=m,this.simpleSolutionManager=n,this.mediaOverride=o}return a.$inject=["flags","selections","sectionBackgroundService","modelTree","layoutSolver","storyServices","documentServicesMediator","themeChooser","previewColors","designKit","pagesManager","PresetMediaType","layoutSelectionStoreProvider","simpleSolutionManager","mediaOverride"],Object.defineProperty(a.prototype,"selectedPage",{get:function(){return this.modelTree.getNodeById(this.storyServices.story.selectedPage)},enumerable:!0,configurable:!0}),a.prototype.firstSectionIndex=function(a){void 0===a&&(a=this.selectedPage);var b="PageHeader"===a.children[0].contentElementType?1:0;return b},a.prototype.toggleHeaderTransparent=function(a){this.themeChooser.toggleHeaderTransparent(a)},a.prototype.firstSectionIsNotTpa=function(a){return!a.isTpaWidget},a.prototype.firstSectionHasMediaBg=function(a){var b=this.sectionBackgroundService.getBackground(a);return _(["bgImage","video","gallery"]).includes(_.get(b,"mediaType"))},a.prototype.findSegment=function(a){var b=this.simpleSolutionManager.getSectionSolution(a.containerPageId,this.modelTree.findIdentifyingNodeId(a)),c=_(b).collect("segments").flatten().find(function(b){return b.node.getId()===a.getId()});return c},a.prototype.getActiveMedia=function(a){var b=this.findSegment(a);if(!b)return null;var c=b.getLE(),d=c.getMediaLayout();return c&&d&&this.mediaOverride.getGallery(c,d,b)},a.prototype.firstSectionHasMediaC2C=function(a){var b=this.getActiveMedia(a);if("Strip Image"!==b.name)return!1;var c=this.layoutSelectionStoreProvider.getLayoutSelectionStore(a.containerPageId).getOverrideByNode("media",a,"allowedMediaOverrides");return c===this.PresetMediaType.COAST2COAST},a.prototype.firstSectionIsNotList=function(a){return!a.isList()},a.prototype.pageBgDifferentThan=function(a,b){return _.get(b,"bgObj.color")!==a},a.prototype.colorationModeIsDark=function(){return this.themeChooser.coloration.getActiveKitColorationMode()===ThemeChooser.COLORATION_METHOD_TYPE.dark},a.prototype.toggleHeaderMerge=function(a){void 0===a&&(a=this.selectedPage),this.isHeaderMerged(a)?this.setHeaderMerged(!1,!0,a):this.isHeaderMergeable(a)&&this.setHeaderMerged(!0,!0,a)},a.prototype.setHeaderMerged=function(a,b,c){return void 0===c&&(c=this.selectedPage),this.selections.getForNode(c).isMerged=a,this.toggleHeaderTransparent(a),this.storyServices.reRender("body")},a.prototype.isHeaderMerged=function(a){return void 0===a&&(a=this.selectedPage),!!this.selections.getForNode(a).isMerged},a.prototype.isHeaderMergeable=function(a){if(void 0===a&&(a=this.selectedPage),_.get(a,"children.length")){var b=this.firstSectionIndex(a),c=a.children[b];return c&&this.firstSectionIsNotTpa(c)&&this.firstSectionIsNotList(c)&&(this.firstSectionHasMediaBg(c)||this.firstSectionHasMediaC2C(c))&&this.colorationModeIsDark()}},a.prototype.shouldMergeHeader=function(a){return this.flags.mergedHeader?!!_.get(a,"children[0].from.le.isHeader")&&!_.get(a,"children[0].from.le.containingLG.page"):!1},a.prototype.moveHeaderAndStylePage=function(a){if(this.isHeaderShouldBeTransparent()){this.documentServicesMediator.moveHeaderToFront();var b=this.designKit.getD1Color(),c=this.modelTree.getNodeById(a);c&&this.pageBgDifferentThan(b,c)&&this.pagesManager.setPageBackground({color:b},[c])}},a.prototype.isHeaderShouldBeTransparent=function(){var a=this,b=this.modelTree.getPagesList(),c=b.find(function(b){var c=a.modelTree.getNodeById(b),d=a.selections.getForNode(c);return d.isMerged});return!!c},a.prototype.stretchFirstSection=function(a){if(a){var b=this.modelTree.getNodeById(a.from.lgs[0].page),c=this.layoutSolver.getPartSolutions("header",b),d=c.getSolutionHeight();if(this.isHeaderMerged(b)){if(!this.isHeaderMergeable(b))return;a.compDef.layout.height+=d,a.compDef.layout.y-=d}}},a}();a.MergedHeaderService=b}(core||(core={})),angular.module("siteGeneratorStaticsCoreAppInternal").service("mergedHeaderService",core.MergedHeaderService);var core;!function(a){var b=function(){function b(a,b,c){this.chroma=a,this.designKit=b,this.previewColors=c,this.totalWeight=0}return b.$inject=["chroma","designKit","previewColors"],b.prototype.readability=function(a,b){return chroma.contrast(a,b)},b.prototype.lightness=function(a){return chroma(a).hsl()[2]},b.prototype.getLgReadabilityScore=function(a,b){var c=this,d=this.previewColors.getRGBColor(b),e=this.designKit.getBoxColorOfSegment(a);if(e){var f=this.readability(d,e);return{readabilityScore:f,source:"box"}}var g,h=this.designKit.getTextColorsOfSegment(a);return _.each(h,function(a){var b=c.previewColors.getRGBColor(a),e=c.readability(d,b);g=void 0===g?e:Math.min(g,e)}),{readabilityScore:g,source:"text"}},b.prototype.getPatternRelativeUriForTiny=function(a,b){return a?b.dark:b.light},b.prototype.isLightColor=function(a){switch(a[0]){case"L":return!0;case"D":return!1;default:return!this.designKit.isDarkColor(a)}},b.prototype.getPatternRelativeUri=function(b,c,d){if(b.isMobile())return d.light;var e=this.isLightColor(c);if(d.size&&d.size===a.PATTERN_SIZE.TINY)return this.getPatternRelativeUriForTiny(e,d);var f=this.lightness(this.previewColors.getRGBColor(c));return e&&f>a.LIGHTNESS_HIGH_THRESHOLD?d.dark:e&&f<=a.LIGHTNESS_HIGH_THRESHOLD?d.light:!e&&f<a.LIGHTNESS_LOW_THRESHOLD?d.light:!e&&f>=a.LIGHTNESS_LOW_THRESHOLD?d.dark:""},b.prototype.getPatternOpacity=function(b,c,d){if(b.isMobile())return a.OPACITY;var e=this.getLgReadabilityScore(b,c),f=e.readabilityScore,g=e.source,h="box"===g?.1:0,i=this.isLightColor(c);if(d&&d===a.PATTERN_SIZE.TINY)return i?a.OPACITY_FOR_TINY.LIGHT+h:a.OPACITY_FOR_TINY.DARK+h;var j=this.lightness(this.previewColors.getRGBColor(c));return i&&j>a.LIGHTNESS_HIGH_THRESHOLD?a.OPACITY+h:i&&j<=a.LIGHTNESS_HIGH_THRESHOLD?f/a.READABLE_CONTRAST*a.OPACITY_MULTIPLAYER+h:!i&&j<a.LIGHTNESS_LOW_THRESHOLD?a.OPACITY+h:!i&&j>=a.LIGHTNESS_LOW_THRESHOLD?f/a.READABLE_CONTRAST*a.OPACITY_MULTIPLAYER+h:1},b.prototype.getPatternData=function(b){return a.PatternData[b]||_.map(a.PatternData)[0]},b.prototype.getPatternItem=function(a,b){var c=b.getLgData().strip.color,d=this.getPatternData(a.mediaId);return{mediaType:"pattern",size:d.size,relativeUri:this.getPatternRelativeUri(b,c,d)+"."+d.filetype,width:d.width,height:d.height}},b.prototype.getPattern=function(a,b){var c=a.backgroundColor.color,d=this.getPatternData(a.mediaId);return this.getPatternRelativeUri(b,c,d)+"."+d.filetype},b.prototype.getPatternRatio=function(a){return this.getPatternData(a.mediaId).thumb_ratio},b.prototype._getPatternOptions=function(){var b=0;return this.patternOptions||(this.patternOptions=_.map(a.PatternData,function(a,b){return{mediaType:"pattern",mediaId:b,weight:a.weight,thumbRatio:a.thumb_ratio}}),this.patternOptions.sort(function(a,b){return a.weight<b.weight?1:-1}),_.each(this.patternOptions,function(a){b+=a.weight,a.runningWeight=b}),this.totalWeight=_.sum(a.PatternData,"weight")),this.patternOptions},b.prototype.getPatternOptions=function(a,b){var c=this;void 0===a&&(a=10),void 0===b&&(b=!0);var d=this._getPatternOptions(),e=d.length;if(a=-1===a?e:Math.min(a,e),!b)return d.slice(0,a-1);var f=new Set,g=100;for(Math.seedrandom(Date.now());f.size<a&&g-->0;){var h=_.find(d,function(a){return a.runningWeight>Math.floor(Math.random()*c.totalWeight)&&!f.has(a)});f.add(h)}var i=[];return f.forEach(function(a){return i.push(a)}),i},b}();a.PatternService=b,angular.module("siteGeneratorStaticsCoreAppInternal").service("patternService",a.PatternService)}(core||(core={}));var core;!function(a){a.CONTRAST_MULTIPLAYER=.8,a.CONTRAST_DIVIDER=10,a.BG_IMAGE_OPACITY_LOW=50;var b=function(){function b(a,b,c,d){this.designKit=a,this.previewColors=b,this.flags=c,this.patternService=d}return b.$inject=["designKit","previewColors","flags","patternService"],b.prototype.readability=function(a,b){return chroma.contrast(a,b)},b.prototype.getTextColorWithLowestReadability=function(a,b){var c,d,e=this;return _.each(b,function(b){var f=e.previewColors.getRGBColor(b),g=e.readability(a,f);(void 0===c||c>g)&&(c=g,d=f)}),d},b.prototype.getBackgroundImageOpacity=function(b,c){c=this.previewColors.getRGBColor(c);var d=this.designKit.getTextColorsWithoutDecorativeBoxInSegment(b);if(d.length){var e=this.getTextColorWithLowestReadability(c,d),f=this.readability(c,e),g=Math.tanh(f/a.CONTRAST_DIVIDER)*a.CONTRAST_MULTIPLAYER;return this.flags.debug&&(b.opacityDebugData={textColor:e,bgColor:c,contrastRatio:f,opacity:g}),g}return this.flags.debug&&(b.opacityDebugData={opacity:1,msg:"no text directly on media"}),1},b.prototype.getBackgroundOpacity=function(a,b,c,d){if(this.flags.sectionBackground)switch(c){case"pattern":return this.patternService.getPatternOpacity(a,b,d[0].size);case"bgImage":return this.getBackgroundImageOpacity(a,b);default:return 1}return 1},b}();a.BackgroundMediaOpacity=b,angular.module("siteGeneratorStaticsCoreAppInternal").service("backgroundMediaOpacity",b)}(core||(core={}));var core;!function(a){a.READABLE_CONTRAST=15.5,a.LIGHTNESS_HIGH_THRESHOLD=.92,a.LIGHTNESS_LOW_THRESHOLD=.12,a.OPACITY=.15,a.OPACITY_FOR_TINY={LIGHT:.4,DARK:.3},a.OPACITY_MULTIPLAYER=.8,a.PATTERN_SIZE={TINY:"tiny",REGULAR:"regular"},a.PatternData={AirbrushSpeckles:{light:"16cdd19d6e504f0aac1e4eb579c8fd58",dark:"ff9e37c8a5564a6a8baa27edf1f34815",width:500,height:500,size:"tiny",weight:30,thumb_ratio:100,filetype:"png"},AntMaze:{dark:"cac45032f0b8440292974cfe96713923",light:"25d14454a0ad4905bc9b342b9b25725c",width:500,height:500,size:"regular",weight:30,thumb_ratio:100,filetype:"png"},BacteriaColony:{dark:"dbae6d3dcd36473391d69714efb88605",light:"e1ca8acf6d7e4478952f2970d60154fb",width:500,height:500,size:"regular",weight:30,thumb_ratio:100,filetype:"png"},BigLeaves:{dark:"33c23ce6a83d478daf681661da3c52ef",light:"d8a614e3fee44fa2bb4907c4e30d7b20",width:300,height:300,size:"regular",weight:30,thumb_ratio:100,filetype:"png"},BotanicalVariety:{dark:"8192f1414cec4ff4ba951ae6815534d3",light:"c109777d1f364e5f82787f07f5b6be2d",width:500,height:500,size:"regular",weight:1,thumb_ratio:50,filetype:"png"},BrancheswithLeaves:{dark:"61743a71d5594d6b87a116decbe5aaaa",light:"efa947a113b648c098ddc0faf82937f3",width:300,height:300,size:"regular",weight:1,thumb_ratio:50,filetype:"png"},BrushStrokes:{dark:"7b0c171472f14024806674bae469b637",light:"3fb76ea519964f198e72750b9e6956fd",width:500,height:500,size:"regular",weight:1,thumb_ratio:50,filetype:"png"},Bushes:{dark:"43f49f72ca074b26bcea4f5673200a4a",light:"c947e8ac4bd4469694cec60512868454",width:500,height:500,size:"regular",weight:1,thumb_ratio:50,filetype:"png"},Camo:{dark:"666efdff135742cc9a079180a6ef9e3b",light:"c95cf910587b48ea98965bb186540f92",width:200,height:200,size:"regular",weight:30,thumb_ratio:50,filetype:"png"},ChevronSquiggles:{dark:"3d0a8d8d59fd46d081b5823b6e4e3ebf",light:"6ffb24eada13464691dcb3d2a6b0fb82",width:200,height:200,size:"regular",weight:30,thumb_ratio:50,filetype:"png"},ClamShells:{dark:"65b91d5c1fb54dba8bc34f0767da1182",light:"5c7e60d48c1948aab8c946777d56cd15",width:500,height:500,size:"regular",weight:1,thumb_ratio:50,filetype:"png"},ComputerSymbols:{light:"1477f9415b984dedbb9d6b6ff6e8d10f",dark:"e7960e276c3347198eb2fbb3f695ea89",width:300,height:300,size:"tiny",weight:1,thumb_ratio:80,filetype:"png"},Constellations:{light:"a3a2e0c8030e4210ba0d71c6b3460a3c",dark:"6a15ba4b06124e0b9364bf892fd772a7",width:300,height:300,size:"tiny",weight:1,thumb_ratio:70,filetype:"png"},DiagonalHyphenatedLines:{light:"819948fb23d24a1ba047c7378b36693c",dark:"10a2af23890a4399a62064fb91fc13ac",width:37,height:37,size:"tiny",weight:100,thumb_ratio:10,filetype:"png"},DiagonalMorse:{dark:"c6aba316d2db463db2bf4d03de668ff6",light:"9f21dcc1c88b477ea2e2602c5333c290",width:500,height:500,size:"regular",weight:30,thumb_ratio:100,filetype:"png"},DiagonalTrapezoids:{dark:"f5bb149e904f482b9154f6fde2c3c5d9",light:"3c2a9856c69145578ea82260443f7ce8",width:200,height:200,size:"regular",weight:30,thumb_ratio:50,filetype:"png"},DiamondChevronStripes:{dark:"9481e659b7684d52a97c6b64993d1757",light:"5d4dbd2a768d4f3db06b5c090eaf343c",width:200,height:200,size:"regular",weight:30,thumb_ratio:40,filetype:"png"},DiamondLines:{dark:"6c4dd6fbad3b44ffb30afb60e8fe7e63",light:"9aeb0e82276540389e420a083a609a5d",width:200,height:200,size:"regular",weight:30,thumb_ratio:60,filetype:"png"},DinerIcons:{light:"0890fbc796154e549cc1a21b9598bcdf",dark:"7f75006f24714161afb65d78a6be2d97",width:300,height:300,size:"tiny",weight:1,thumb_ratio:50,filetype:"png"},Feathers:{light:"23b7e378f92142ecaaac6539fa9c4708",dark:"6859f82036e94bb1869bec0153a118cc",width:500,height:500,size:"tiny",weight:1,thumb_ratio:50,filetype:"png"},Fish:{light:"640274ae1dfe402f9948168dfc9e3cf1",dark:"6a906ea286f44cd4b06c02a51e548900",width:500,height:500,size:"tiny",weight:1,thumb_ratio:50,filetype:"png"},FiveThinHorizontalLines:{light:"0510d5a6b6d2436d8ffad11d3c8833fd",dark:"adaac71d4c744fcbb608909ec0a1e511",width:37,height:37,size:"tiny",weight:100,thumb_ratio:20,filetype:"png"},Flowers:{light:"8a61486d8d404fa7ac1d7b480512539c",dark:"fddf84053dde4a1e8d3021bd75407fc8",width:200,height:200,size:"tiny",weight:1,thumb_ratio:60,filetype:"png"},FoodIcons:{light:"c937410d76d849ac8e584fd8a6a147ee",dark:"c1fb7d17553040eeb2948516c1c8429f",width:300,height:300,size:"tiny",weight:1,thumb_ratio:60,filetype:"png"},GeometricShapes:{dark:"7cc2902a568044ecb3cc2fde0d86f780",light:"d9358e22a51e4ca881aa37f2d9392280",width:300,height:300,size:"regular",weight:30,thumb_ratio:50,filetype:"png"},Grass:{light:"d1bd6bf31b1148ffb6a3e57077934da9",dark:"b444b9a2e0d9425aa8f7c3cf320018b6",width:200,height:200,size:"tiny",weight:1,thumb_ratio:60,filetype:"png"},HandwritingPattern:{dark:"78c244359be84cfe85c75883b8243e85",light:"a7df5c39d56f4f3282a76c5fd8cf842c",width:200,height:200,size:"regular",weight:30,thumb_ratio:50,filetype:"png"},HorizantalWaves:{dark:"e4c6239cc28e489bbaf6d4f90d7ade01",light:"310ca90caf4c40589dc42c02277e85fd",width:200,height:200,size:"regular",weight:30,thumb_ratio:60,filetype:"png"},JigsawBlocks:{dark:"065dbd20e6b74fddb72a2ac0a3eba0be",light:"f6874393fc9a441ab8df17168a09250b",width:200,height:200,size:"regular",weight:30,thumb_ratio:50,filetype:"png"},LeafCollection:{dark:"ca6eda0e3b5c46d0b98f4090e00eaf43",light:"daca4c7786bb4ce083a3e832c7a16a34",width:450,height:450,size:"regular",weight:1,thumb_ratio:100,filetype:"png"},Lightning:{dark:"a3d74f72235a48119702bd7d9dae1c86",light:"7069b8919d3949aa823835f31a3595bc",width:500,height:500,size:"regular",weight:1,thumb_ratio:60,filetype:"png"},LineArrows:{light:"7c87c4655525435ca6cc9008f14e7e55",dark:"f610d9d0dc26477997f84794b154afd2",width:50,height:50,size:"tiny",weight:1,thumb_ratio:20,filetype:"png"},LinesandCurves:{dark:"150078840b4f45058c616637e6bd6a52",light:"5682b70d50e74d27b57d4194fe9921d6",width:500,height:500,size:"regular",weight:30,thumb_ratio:40,filetype:"png"},Medicine:{dark:"ea9e18a8c9b0417d81d00f0caddf356f",light:"d521ed6af8bf4606aaebd0be58e3c523",width:300,height:300,size:"regular",weight:1,thumb_ratio:50,filetype:"png"},MediumSizePlusSign:{light:"937b35b329704f688f35a23109854817",dark:"5b2695c0647748a3bb34610bf493bcb8",width:140,height:140,size:"tiny",weight:100,thumb_ratio:25,filetype:"png"},MediumSquarewithThickDiagonalStripes:{dark:"c40f682a2f394c598a014281dbbb6c54",light:"25aab7d09aa24c64aa6ef6745e627b0a",width:300,height:300,size:"regular",weight:100,thumb_ratio:25,filetype:"png"},MusicShapes:{dark:"d9161e7577424f0f8d99c7b81745f9db",light:"8a7b481feda2425680906c407c1a4976",width:300,height:300,size:"regular",weight:1,thumb_ratio:60,filetype:"png"},OverlappingLeaves:{dark:"739cd0f2c2a44e3e89567ce5a515958a",light:"340147302425473cabb92189835a1055",width:250,height:250,size:"regular",weight:30,thumb_ratio:100,filetype:"png"},OverlappingSquarePattern:{dark:"5e8344fcb015434a9a90674c010c6ff5",light:"4e2ce568d1a14414b06892238336277f",width:200,height:200,size:"regular",weight:30,thumb_ratio:50,filetype:"png"},PaintStrokes:{dark:"52d7580b42354ac6b3915bbc75a8a3d0",light:"1a8f8932295343489a0dd5ae1bec2e57",width:500,height:500,size:"regular",weight:1,thumb_ratio:100,filetype:"png"},PalmLeaves:{dark:"10c258b56d654fb0b6cd7b94a877a177",light:"bf96e0f8167e4212962fc409e8c92142",width:500,height:500,size:"regular",weight:30,thumb_ratio:70,filetype:"png"},PlusinGrid:{light:"19a1723ab440414fb3210c96f6c28b36",dark:"96500720ed0d4cc69084b48db4a7a3a1",width:200,height:200,size:"tiny",weight:30,thumb_ratio:40,filetype:"png"},PoppyLeaves:{light:"edc5488fa14e407f9ead1728031de9ae",dark:"867d95b7155e4e39bff605f5db4a3978",width:300,height:300,size:"tiny",weight:1,thumb_ratio:50,filetype:"png"},Quadrilaterals:{dark:"9e1cf0f5336947b894e576470b25c139",light:"5c2837f42d804f9fa4282a61f6640249",width:200,height:200,size:"regular",weight:30,thumb_ratio:50,filetype:"png"},SaleIcons:{light:"2b32170aa24849b0baadd990099888fc",dark:"8afaca931d4c4f64b2a6e5144064ebb7",width:300,height:300,size:"tiny",weight:1,thumb_ratio:50,filetype:"png"},ScatteredAirbrushSpeckles:{light:"9cea5beaf7854e23b09f75cdbc696d39",dark:"bd12ef0ca4a94ec0bf1d614721fd3749",width:500,height:500,size:"tiny",weight:30,thumb_ratio:100,filetype:"png"},SheetMusic:{light:"892c0d368c54475d9c9f71cc8b4af7d5",dark:"f14dd2e3181e406d9714d40021c4bf3e",width:300,height:300,size:"tiny",weight:1,thumb_ratio:50,filetype:"png"},ShoppingIcons:{light:"dc41e3c8f27f49b3879d39af6c780395",dark:"d7e645744e0d42fe8b8440e522b25668",width:300,height:300,size:"tiny",weight:1,thumb_ratio:50,filetype:"png"},ShortThickLines:{dark:"7093b40766b7440cab84722122d9a98d",light:"64d3664ae6ff45a199b86fa2a7b6d91b",width:300,height:300,size:"regular",weight:30,thumb_ratio:50,filetype:"png"},ShrivelledLeaves:{dark:"5efb09205a964c8fb81a90a2f1027d34",light:"34b338782cf94207ac0454d37c61ef28",width:500,height:500,size:"regular",weight:1,thumb_ratio:50,filetype:"png"},SmallFilledCircle:{light:"89343f89dd1e466e870bd42d32752527",dark:"bb2dd7fdf7814713a71f99c210901444",width:70,height:70,size:"tiny",weight:100,thumb_ratio:25,filetype:"png"},SmallSquarewithDiagonalSectionMissing:{dark:"cfa36c4979704a7889acc7c6fd03fc1a",light:"ccae67c1dabe45f1bda0a9476392e7a8",width:37,height:37,size:"regular",weight:100,thumb_ratio:10,filetype:"png"},SmallSquarewithThickDiagonalStripes:{light:"d159698cf4d34a00aaf940dfea24c601",dark:"4ae95d91ce0946faa2eb61fc1a9cb5b9",width:37,height:37,size:"tiny",weight:100,thumb_ratio:10,filetype:"png"},SpaceShips:{dark:"902aa8746afb4be79be634b0f479bc4f",light:"637fe95eab3647399fdf110098df5a9d",width:500,height:500,size:"regular",weight:1,thumb_ratio:70,filetype:"png"},Spackle:{dark:"1f68aa12500c4102ad50b56af7b152c6",light:"bb8521deec7b4835839a21a2f13bfed8",width:500,height:500,size:"tiny",weight:30,thumb_ratio:150,filetype:"png"},StarPuzzle:{dark:"7d4a29951a0a453f9d2d5f2ff942c2af",light:"8375b64109524f50a04c9cfc58a12ab7",width:396,height:343,size:"regular",weight:30,thumb_ratio:100,filetype:"png"},SwirlPattern:{dark:"46f22704d22f4e72986afccbdb365c98",light:"a07f0daea7874cdab32b5796f8994f3e",width:206,height:119,size:"regular",weight:30,thumb_ratio:50,filetype:"png"},ThickSquiggles:{dark:"89fdc47c9add4ae99ad4565c1bd783b0",light:"20bc6ca309814c85a23f8aab3839f800",width:258,height:224,size:"regular",weight:30,thumb_ratio:100,filetype:"png"},ThinZebraStripes:{light:"aba3e00534e34a8ba0e21580f432a0d9",dark:"584270bfe3d44ddba897c5e17b066b2c",width:500,height:500,size:"tiny",weight:30,thumb_ratio:100,filetype:"png"},TireTrackPattern:{dark:"394bfb4887a84386b0b545dc9a0dbd14",light:"8f6b255f704a44fa95bb05631ff03417",width:200,height:200,size:"regular",weight:30,thumb_ratio:60,filetype:"png"},TwigPattern:{dark:"974491534521474f8c218e5b6452720f",light:"9f5633ac8f694ca19dbc11a85e4d9f17",width:200,height:200,size:"regular",weight:30,thumb_ratio:50,filetype:"png"},TwoSmallDiagonalLines:{light:"80b57a8652494f4ea16cf4dbfb3cb00b",dark:"e536c8f6a93b4e46855aa2ac66398f94",width:37,height:37,size:"tiny",weight:100,thumb_ratio:25,filetype:"png"},VariousShapePattern:{light:"0dbdff15100b48e68e651132e5316af4",dark:"fdc33d7e6b5e42ac8a83ba33c5d349a6",width:300,height:300,size:"tiny",weight:30,thumb_ratio:50,filetype:"png"},WavePattern:{dark:"91367935efd846cd8833ef05e3bb2436",light:"7aa991baf5c845859a20bf433f3d98ee",width:200,height:200,size:"regular",weight:30,thumb_ratio:50,filetype:"png"}},angular.module("siteGeneratorStaticsCoreAppInternal").constant("PatternData",a.PatternData)}(core||(core={}));var core;!function(a){var b=function(){function a(a,b){this.modelTree=a,this.sitePartTypes=b}return a.$inject=["modelTree","sitePartTypes"],
a.prototype.getOverridableSections=function(){var a=this,b=this.modelTree.getPagesNodes(!0),c=_.map(b,function(b){return _.map(b.children,function(b){return{node:b,sitePart:a.sitePartTypes.BODY}})}),d=_.flatten(c);return d.push({node:this.modelTree.getGeneralInformation(),sitePart:this.sitePartTypes.HEADER}),d.push({node:this.modelTree.getFooterInformation(),sitePart:this.sitePartTypes.FOOTER}),d},a}();a.SectionDesignOverrideService=b}(core||(core={})),angular.module("siteGeneratorStaticsCoreAppInternal").service("sectionDesignOverrideService",core.SectionDesignOverrideService);var RichTextService=function(){function a(a,b,c,d,e,f,g,h){this.RichTextTags=a,this.themeChooser=b,this.LayoutElementFormatting=c,this.richTextLinks=d,this.modelTree=e,this.pagesManager=f,this.flags=g,this.$p=h,this.HTML_MARK_CHAR_1=String.fromCharCode(65535),this.HTML_MARK_CHAR_2=String.fromCharCode(65534)}return a.$inject=["RichTextTags","themeChooser","LayoutElementFormatting","richTextLinks","modelTree","pagesManager","flags","$p"],a.prototype.initForRender=function(){var a=this;if(!this.initPromise){var b=this.$p.defer();this.flags.consumerMode?richtext.createOfflineCommandInstance(function(c){a.offlineEditor=c,b.resolve()}):b.resolve(),this.initPromise=b.promise}return this.initPromise},a.prototype.getEditorLinksManager=function(){var a=this;return{convertExternalLinkToLinkRef:function(b){return a.addLink({isPageRef:!1,targetUrl:b})},convertLinkRefToLinkRef:function(b){var c=a.richTextLinks.getLink(b);if(c){if("AnchorLink"===_.get(c,["link","type"])){var d=a.modelTree.findById(c.link.nodeId,c.link.targetPage);d&&a.pagesManager.addAnchorLink(d)}return a.addLink(ob.deepClone(c))}},convertLinkRefToAttributes:function(a){return{adilinkid:a}},convertAttributesToLinkRef:function(a){return a.adilinkid}}},a.prototype.addLink=function(a){return this.richTextLinks.addLink(a)},a.prototype.getLink=function(a){return this.richTextLinks.getLink(a)},a.prototype.removeLink=function(a){this.richTextLinks.removeLink(a)},a.prototype.markRichText=function(a){return a&&this.HTML_MARK_CHAR_1+this.HTML_MARK_CHAR_2+a},a.prototype.unMarkRichText=function(a){return a&&a.substring(2)},a.prototype.isRichText=function(a){return a&&a[0]===this.HTML_MARK_CHAR_1&&a[1]===this.HTML_MARK_CHAR_2},a.prototype.resetFormatting=function(a){return _.extractPlainText(a)},a.prototype.toPlainText=function(a){return this.isRichText(a)?(a=this.unMarkRichText(a),this.resetFormatting(a)):a},a.prototype.isEmpty=function(b){return!b||!a.hasContentDetectionRegex.test(b)},a.prototype.parseAndReplaceLinks=function(b,c){var d=this;return a.dataQueryRegex.test(b)?b.replace(a.dataQueryRegex,function(a,b){var e=d.richTextLinks.getLink(b);if(e){var f=d.richTextLinks.generateLinkId();return c[f]=e,'dataquery="#'+f+'"'}return""}):b},a.prototype.tryToExtractPlainText=function(a,b){var c,d=[];b.isItalic()&&d.push("font-style:italic"),b.isBold()&&d.push("font-weight:bold"),b.isUnderline()&&d.push("text-decoration:underline");var e=new RegExp('^(\\s*<(p|h1|h2|h3|h4|h5|h6)[^>]*>(\\s*<span style="('+d.join("|")+');?">){'+d.length+"}(?!&nbsp;)([^<]*)(</span>\\s*){"+d.length+"}</(p|h1|h2|h3|h4|h5|h6)>)+$","gi");return e.test(a)&&(c=_.extractPlainText(a)),c},a.prototype.transformForEditor=function(a,b){a=a||"";var c;return b&&(c=new this.LayoutElementFormatting,c.setBold(b.isBold()),c.setItalic(b.isItalic()),c.setUnderline(b.isUnderline())),_.map(a.split("\n"),function(a){var b=_.htmlEncode(a)||"&nbsp;";return c&&(b=c.format(b)),'<p class="font_7">'+b+"</p>"}).join("\n")},a.prototype.transformForViewer=function(a,b,c,d,e,f){var g="font_"+b,h=this.RichTextTags[b]||"p",i={formatBlock:{tag:h,"class":g,shouldRetainThemesAndStyles:!0},lineHeight:this.themeChooser.getLineHeight(g)};switch(c){case"left":i.justifyleft=!0;break;case"center":i.justifycenter=!0;break;case"right":i.justifyright=!0}if(d&&(i.bidirtl=!0),e){var j=e.getColor();j&&(i.foreColor="#"===j[0]?j:"color_"+j);var k=e.getBGColor();k&&(i.backColor="#"===k[0]?k:"backcolor_"+k),e.isCapsLock()&&(i.toUpperCase=!0)}var l=this.parseAndReplaceLinks(this.unMarkRichText(a),f);angular.element(document.body).injector().get("focusKeeper").setIsIgnoringBlurOnActiveEditor(!0);var m=this.offlineEditor.execOfflineCommands(l,i);return angular.element(document.body).injector().get("focusKeeper").setIsIgnoringBlurOnActiveEditor(!1),m},a.prototype.setAccessibilityHTag=function(a,b){return a.replace(/^<(?:[^\s]+)/,"<"+b).replace(/<\/(?:[^\s]+)>$/,"</"+b+">")},a}();RichTextService.dataQueryRegex=/adilinkid="(.*?)"/g,RichTextService.hasContentDetectionRegex=/>[^<]*[^<\s\n\u200b-\u200d\uFEFF]/,angular.module("siteGeneratorStaticsCoreAppInternal").service("richTextService",RichTextService);var RichTextLinks=function(){function a(){this._data={}}return a.prototype.generateLinkId=function(){return"adi_link_"+Math.floor(4294967296*(1+Math.random())).toString(16).substring(1)},a.prototype.getData=function(){return this._data},a.prototype.setData=function(a){this._data=a},a.prototype.addLink=function(a){var b=this.generateLinkId();return this._data[b]=a,b},a.prototype.getLink=function(a){return this._data[a]},a.prototype.removeLink=function(a){delete this._data[a]},a}();angular.module("siteGeneratorStaticsCoreAppInternal").service("richTextLinks",RichTextLinks);var CoreDebug=function(){function a(a,b,c,d,e,f,g,h,i,j,k,l,m,n,o,p,q,r,s,t,u,v){var w=this;this.$window=a,this.layoutSolver=b,this.sitePartTypes=c,this.healthCheck=d,this.richTextService=e,this.visualValidation=f,this.storyServices=g,this.layoutSelectionStoreProvider=h,this.modelTree=i,this.LayoutGroup=j,this.sectionBackgroundService=k,this.sizeRuleValidators=l,this.mediaOverride=m,this.simpleSolutionManager=n,this.themeChooser=o,this.renderedModelApi=p,this.modelLookup=q,this.flags=r,this.wizardService=s,this.documentServicesMediator=t,this.mobileSolutionManager=u,this.designKit=v,this.renderedModel={body:function(){return w.renderedModelApi.get()},header:function(){return w.renderedModelApi.get(w.sitePartTypes.HEADER)},footer:function(){return w.renderedModelApi.get(w.sitePartTypes.FOOTER)},mobileBody:function(){return w.renderedModelApi.get(w.sitePartTypes.BODY,w.storyServices.story.selectedPage,!0)},mobileHeader:function(){return w.renderedModelApi.get(w.sitePartTypes.HEADER,w.storyServices.story.selectedPage,!0)},mobileFooter:function(){return w.renderedModelApi.get(w.sitePartTypes.FOOTER,w.storyServices.story.selectedPage,!0)},automation:function(){var a=function(a,b){var c=_.find(a,{ceType:b});return c||(c={ceType:b,children:[]},a.push(c)),c},b=w.renderedModelApi.get(),c=[];return _.chain(b.children).filter(function(a){return a.from.lgs}).each(function(b){var d=b.from.lgs[0].segments[0].node.identifyingNode.contentElementType,e=a(c,d),f=w.modelLookup.flatten(b).filter(function(a){return a.from.layout}).map(function(a){return{id:a.compRef.id,type:a.from.layout.type,subType:a.from.layout.subType,nodeId:a.from.le.containingSegment.node.id,ceType:a.from.le.containingSegment.node.contentElementType}});(g=e.children).push.apply(g,f);var g}).value(),c}},this.eds={setId:function(a){this.id=a},getCompById:function(a){return a=a||this.id,"object"==typeof a?a:documentServices.components.get.byId(a)},getPages:function(){return documentServices.pages.getPageIdList()},getLayoutById:function(a){var b=this.getCompById(a);return documentServices.components.layout.get(b)},setLayoutById:function(a,b){var c=this.getCompById(a);return documentServices.components.layout.update(c,b)},getData:function(a){var b=this.getCompById(a);return documentServices.components.data.get(b)},getStyleByCompId:function(a){var b=this.getCompById(a),c=documentServices.components.style.getId(b);return documentServices.theme.styles.get(c)},serializeById:function(a){var b=this.getCompById(a);return documentServices.components.serialize(b)},isExistById:function(a){var b=this.getCompById(a);return documentServices.components.is.exist(b)},printTpaPages:function(){_.each(this.getPages(),function(a){var b=documentServices.tpa.section.getPageData(a);b.hasSection&&console.log(a+" "+b.title+" : has tpa section of type "+b.appData.appDefinitionName)})},getCurrentPage:function(){return documentServices.pages.getCurrentPage()},getCurrentPageSerialized:function(){return this.serializeById(this.getCurrentPage().id)},getCurrentPageChildren:function(){return documentServices.components.getChildren(this.getCurrentPage())},getChildrenOfComp:function(a){var b=this.getCompById(a);return documentServices.components.getChildren(b)},removeComponentById:function(a){var b=this.getCompById(a);"DESKTOP"===b.type?documentServices.components.remove(b):documentServices.mobile.hiddenComponents.hide(b,{updateLayout:!1})},showMobileComponent:function(a){var b=this.getCompById(a);"MOBILE"===b.type&&documentServices.mobile.hiddenComponents.show(b.id,documentServices.components.getPage({id:b.id,type:"DESKTOP"}).id)},getContainerById:function(a){var b=this.getCompById(a);return documentServices.components.getContainer(b)},printHeaderChildren:function(){this.printChildren(this.getHeader())},printFooterChildren:function(){this.printChildren(this.getFooter())},printChildren:function(a){function b(a){var b=["wysiwyg.viewer.components.","mobile.core.components.","wysiwyg.common.components.anchor.viewer."],c=documentServices.components.getType(a);return _.each(b,function(a){c=c.replace(a,"")}),c=c.replace("wysiwyg.viewer.components.","")}function c(a){var b=documentServices.components.layout.get(a);return"x: "+b.x+"  y: "+b.y+"  h: "+b.height+"  w: "+b.width}function d(a,e){console.log("  ".repeat(e),e,": ",a.id,"		",b(a),"		",c(a));var f=documentServices.components.getChildren(a);_.each(f,function(a){d(a,e+1)})}a||(a=this.getCurrentPage()),d(a,0)},getHeader:function(){return documentServices.siteSegments.getHeader()},getFooter:function(){return documentServices.siteSegments.getFooter()},getPagesContainer:function(){return documentServices.siteSegments.getPagesContainer()},serializeHeader:function(){return this.serializeById(this.getHeader())},serializeFooter:function(){return this.serializeById(this.getFooter())},serializeAllSiteSegments:function(){var a=this.serializeHeader(),b=this.serializePagesConatiner(),c=this.serializeFooter();return console.log("\n      header:\n        y: "+a.layout.y+"\n        height: "+a.layout.height+"\n\n      pagesContainer y should be : "+(a.layout.y+a.layout.height)+"      \n      pagesContainer:\n        y: "+b.layout.y+"\n        height: "+b.layout.height+"\n\n      footer y should be : "+(b.layout.y+b.layout.height)+"\n      footer:\n        y: "+c.layout.y+"\n        height: "+c.layout.height+"\n      "),{header:a,pagesConatiner:b,footer:c}},serializePagesConatiner:function(){return this.serializeById(this.getPagesContainer())},serializeCurrentPage:function(){return this.serializeById(this.getCurrentPage())},switchToDesktop:function(){documentServices.viewMode.set("DESKTOP")},switchToMobile:function(){documentServices.viewMode.set("MOBILE")},resetMobile:function(){documentServices.mobileConversion.resetMobileLayoutOnAllPages({heuristicStrategy:"minimal"})}},this.solution={getHeader:function(){return w.layoutSolver.getSelectedSolution(w.sitePartTypes.HEADER)},getHeaderLE:function(){return w.solution.getHeader()[0].segments[0].getLE()},getFooter:function(){return w.layoutSolver.getSelectedSolution(w.sitePartTypes.FOOTER)},getBody:function(){return w.layoutSolver.getSelectedSolution(w.sitePartTypes.BODY,w.storyServices.story.selectedPage)},getMobileBody:function(){return w.mobileSolutionManager.getMobileSitePartSolution(w.sitePartTypes.BODY,w.storyServices.story.selectedPage)},getMobileHeader:function(){return w.mobileSolutionManager.getMobileSitePartSolution(w.sitePartTypes.HEADER)},getMobileHeaderLE:function(){return w.solution.getMobileHeader()[0].segments[0].getLE()},getMobileFooter:function(){return w.mobileSolutionManager.getMobileSitePartSolution(w.sitePartTypes.FOOTER)}},this.getSantaDupComponent=function(){return _.filter(w.$window.documentServices.components.getAllComponents().map(function(a){return a.id}),function(a,b,c){return _.includes(c,a,b+1)})},this.siteLayoutLoader=j.siteLayoutLoader}return a.$inject=["$window","layoutSolver","sitePartTypes","healthCheck","richTextService","visualValidation","storyServices","layoutSelectionStoreProvider","modelTree","LayoutGroup","sectionBackgroundService","sizeRuleValidators","mediaOverride","simpleSolutionManager","themeChooser","renderedModelApi","modelLookup","flags","wizardService","documentServicesMediator","mobileSolutionManager","designKit"],a.prototype.getCurrentPageNodes=function(){var a=this.modelTree.getPageNodeById(this.storyServices.story.selectedPage);return _.filter(a.children,function(a){return!a.userHidden})},a.prototype.getLayoutSelectionStore=function(){return this.layoutSelectionStoreProvider.getLayoutSelectionStore()},a.prototype.getProblematicIds=function(a){return this.healthCheck.getProblematicIds(a)},a.prototype.removeNode=function(a,b){this.healthCheck.removeNode(a,b)},a.prototype.mapProGalleryWidgetRefs=function(a){var b=this,c=_.get(a.blob,["bft","data","children"]),d=_.filter(c,function(a){return"Page"===a.contentElementType});return this.flags.mapProGallery&&(this.$window.proGalleryMap={},_.each(d,function(a){var c=_.filter(a.children,{contentElementType:"ProGallery_Widget"});c.length&&_.each(c,function(a){b.$window.proGalleryMap[a.id]=a.widgetRef})})),this.$window.proGalleryMap},a.prototype.dsSave=function(){this.wizardService.publishStory()},a.prototype.getAllTpaWidgetNodes=function(){var a=[];return this.modelTree.traverse(function(b,c){b.isTpaWidget&&b.containerPageId&&!b.isTpaMultiSection()&&a.push(b)}),a},a.prototype.getDocumentServicesMediator=function(){return this.documentServicesMediator},a}();angular.module("siteGeneratorAppCoreDebug",["siteGeneratorStaticsCoreAppInternal"]).service("coreDebug",CoreDebug).run(["coreDebug","$window",function(a,b){b.coreDebug=a}]);var ErrorReportService=function(){function a(){this.errors={}}return a.prototype.formatErrorKey=function(a,b,c){return a+"-"+b+"-"+c},a.prototype.hasError=function(a,b,c){return this.errors&&this.errors[this.formatErrorKey(a,b,c)]?!0:!1},a.prototype.getError=function(a,b,c){return this.errors[this.formatErrorKey(a,b,c)]},a.prototype.reportError=function(a,b,c,d){this.errors[this.formatErrorKey(a,b,c)]=d},a.prototype.clearError=function(a,b,c){delete this.errors[this.formatErrorKey(a,b,c)]},a}();angular.module("siteGeneratorStaticsCoreAppInternal").service("errorReportService",ErrorReportService),angular.module("siteGeneratorStaticsCoreAppInternal").service("chroma",function(){return chroma});var LogoColorService=function(){function a(a,b,c,d){this.$window=a,this.$log=b,this.flags=c,this.chroma=d,this.LogoColorExtraction=new this.$window.LogoColorExtraction}return a.$inject=["$window","$log","flags","chroma"],a.getResizedWixImageURL=function(b){var c=b.relativeUri,d=b.width,e=b.height,f=a.getDesiredImageDimensions(d,e);return"//static.wixstatic.com/media/"+c+"/v1/fill/w_"+f.width+",h_"+f.height+"/"+c},a.prototype.loadImageFromURL=function(a){var b=new Image;return new Promise(function(c,d){$(b).on("load",function(){c(b)}),b.crossOrigin="anonymous",b.src=a})},a.getDesiredImageDimensions=function(a,b){var c=Math.min(this.CANVAS_DIMENSION,a);return{height:Math.round(b*(c/a)),width:c}},a.prototype.resizeImage=function(b){var c=a.getDesiredImageDimensions(b.width,b.height);this.flags.debug&&this.$log.info("Logo color: resizing image to ",c),b.height=c.height,b.width=c.width},a.prototype.colorsFromImage=function(a){var b=document.createElement("canvas");document.body.appendChild(b),b.width=a.width,b.height=a.height,b.getContext("2d").drawImage(a,0,0,a.width,a.height);var c=this.chroma(ThemeChooser.COLORS.BLACK).rgb(),d=this.chroma(ThemeChooser.COLORS.WHITE).rgb(),e=this.LogoColorExtraction.computePalette(b,c,d);return document.body.removeChild(b),e},a.prototype.mapPaletteToColoration=function(a){var b=this,c=a.map(function(a){return b.rgbToHex(a)});return{colors:{black:c[1],white:c[2],mainColor:c[3],secondaryColor:c[4],thirdColor:c[5],fourthColor:c[6]},mode:_.isEqual(a[0],[128,128,128,1])?null:_.isEqual(a[0],a[1])?ThemeChooser.COLORATION_METHOD_TYPE.dark:ThemeChooser.COLORATION_METHOD_TYPE.light}},a.prototype.extractLogoColors=function(a){var b=a.contentElement.getFieldValue("Logo"),c=b.value[0];return this.extractLogoColorsFromWixImage(c)},a.prototype.extractLogoColorsFromWixImage=function(b,c){var d=this;return this.loadImageFromURL(a.getResizedWixImageURL(b)).then(function(a){return c&&c(),d.handleImage(a)})},a.prototype.extractLogoColorsFromURL=function(a){var b=this;return this.loadImageFromURL(a).then(function(a){return b.handleImage(a)})},a.prototype.handleImage=function(a){var b=this;this.resizeImage(a);var c=this.colorsFromImage(a);this.flags.debug&&this.$log.info("Logo color: palette generated ",c.map(function(a){return b.rgbToHex(a)}));var d=this.mapPaletteToColoration(c);return d},a.prototype.rgbToHex=function(a){return this.LogoColorExtraction.rgb2hex(a)},a}();LogoColorService.CANVAS_DIMENSION=400,angular.module("siteGeneratorStaticsCoreAppInternal").service("logoColorService",LogoColorService),angular.module("siteGeneratorStaticsCoreAppInternal").directive("layoutPresetPreview",layoutPresetPreview);try{angular.module("siteGeneratorStaticsCorePreload")}catch(e){angular.module("siteGeneratorStaticsCorePreload",[])}angular.module("siteGeneratorStaticsCorePreload").run(["$templateCache",function(a){a.put("views/preset-preview/preset-preview.html","<div class='preset-preview-outer-wrapper' ng-style='{width: $ctrl.wrapWidth, height: $ctrl.wrapHeight}' preset-id='{{$ctrl.presetPreview.preset.id}}'>\n<div class='preset-preview-inner-wrapper' ng-style='{transform: &#39;matrix(&#39; + $ctrl.effectiveScale + &#39;, 0, 0, &#39; + $ctrl.effectiveScale + &#39;, 0, 0)&#39;}'>\n<single-preset-preview ng-if='!$ctrl.isMulti()' on-after-render='$ctrl.afterRenderHandler()' on-before-render='$ctrl.beforeRenderHandler()' preset-preview='$ctrl.presetPreview' preview-position='$ctrl.previewPosition' static='$ctrl.static'></single-preset-preview>\n<multi-preset-preview flags='$ctrl.flags' ng-if='$ctrl.isMulti()' on-after-render='$ctrl.afterRenderHandler()' on-before-render='$ctrl.beforeRenderHandler()' preset-preview-array='$ctrl.presetPreview' preview-position='$ctrl.previewPosition' static='$ctrl.static'></multi-preset-preview>\n</div>\n</div>\n")}]);try{angular.module("siteGeneratorStaticsCorePreload")}catch(e){angular.module("siteGeneratorStaticsCorePreload",[])}angular.module("siteGeneratorStaticsCorePreload").run(["$templateCache",function(a){a.put("views/preset-preview/multi-preset-preview.html","<single-preset-preview ng-repeat='presetPreview in $ctrl.presetPreviewArray' on-after-render='$ctrl.afterRenderHandler()' on-before-render='$ctrl.beforeRenderHandler()' preset-preview='presetPreview' preview-position='$ctrl.previewPosition' static='$ctrl.static'></single-preset-preview>\n")}]);var preset;!function(a){var b=224;a.PresetsTransforms={mergeHeader:function(a){var b=a.eq(0),c=a.eq(1),d=c.find(".strip-preview"),e=d.find("> .media-bg");if(e.length>0){b.css({zIndex:10,position:"relative",background:"none"});var f=b.height();d.css({marginTop:-f,paddingTop:f});var g=e.height(),h=f+g;e.height(h);var i=e.css("background-image");i=i.replace(new RegExp("([,/]h_)"+g+"([,/])"),"$1"+h+"$2"),e.css("background-image",i)}},limitLastPresetHeight:function(a){var c=a.last().find(".strip-preview");c.length>0&&c.css({maxHeight:b,boxSizing:"content-box"})}},angular.module("siteGeneratorStaticsCoreAppInternal").constant("presetsTranforms",a.PresetsTransforms)}(preset||(preset={}));var preset;!function(a){var b=.675,c=function(){function a(a,b){this.applicationParameters=a,this.$element=b}return a.$inject=["applicationParameters","$element"],a.prototype.beforeRenderHandler=function(){this.calculateEffectiveScale(),this.onBeforeRender&&this.onBeforeRender()},a.prototype.afterRenderHandler=function(){this.calculateWrapperSize()},a.prototype.isMulti=function(){return _.isArray(this.presetPreview)},a.prototype.calculateEffectiveScale=function(){void 0===this.scale&&(this.scale=1),this.effectiveScale=this.applicationParameters.isInMobileEditMode()?b:this.scale},a.prototype.calculateWrapperSize=function(){var a=this.$element.find(".preset-preview-inner-wrapper");this.wrapWidth=this.effectiveScale*a.width(),this.wrapHeight=this.effectiveScale*a.height()},a}();angular.module("siteGeneratorStaticsCoreAppInternal").component("presetPreview",{templateUrl:"views/preset-preview/preset-preview.html",controller:c,bindings:{presetPreview:"<",scale:"<?",onBeforeRender:"&?",previewPosition:"<?","static":"<?",flags:"<?"}})}(preset||(preset={}));var preset;!function(a){var b={0:"flex-start",50:"center",100:"flex-end"},c=1200,d=function(){function a(a,b,c,d,e,f,g,h,i,j,k,l,m,n){this.$scope=a,this.$element=b,this.$p=c,this.getLayoutPreview=d,this.getVideoBgPreview=e,this.mediaGallery=f,this.previewColors=g,this.modelTree=h,this.designKit=i,this.flags=j,this.$log=k,this.applicationParameters=l,this.columnService=m,this.backgroundMediaOpacity=n,this.PAGE_WIDTH=this.applicationParameters.isInMobileEditMode()?this.applicationParameters.mobilePageWidth:this.applicationParameters.desktopPageWidth,this.getImageStretch=function(a){return a.variationsMap&&a.variationsMap.media&&a.variationsMap.media.imageStretch}}return a.$inject=["$scope","$element","$p","getLayoutPreview","getVideoBgPreview","mediaGallery","previewColors","modelTree","designKit","flags","$log","applicationParameters","columnService","backgroundMediaOpacity"],a.prototype.$onInit=function(){var a=this;this.$scope.$watch(function(){return a.presetPreview},function(b){if(b){if(!b.solution)return void a.$log.error("preset with no solution");a.reRender(b)}}),this["static"]||this.$scope.$watch(function(){return a.previewPosition},function(b,c){c!==b&&a.reRender(a.presetPreview)})},a.prototype.getLayoutBoundary=function(a,b){var c=a.width,d=a.left,e=a.top,f=a.rendererHeight||a.height;if(b.isMediaType(a)){var g=this.getImageStretch(b);g&&(e-=g.top,d-=g.left,c+=g.left+g.right,f+=g.top+g.bottom)}else if("line"===a.type){var h=b.getLineWidthAndLeftPosition(a);c=h.width,d=h.left}return{width:c,height:f,top:e,left:d}},a.prototype.renderLEPreview=function(a,b,c,d,e){var f=this;a.containingSegment.contentElement.fillValuesByMediaType();var g=this.$p.when();b.forEach(function(b){var h=f.getLayoutBoundary(b,a),i=angular.element('<div class="layout-preview"></div>').css(h);g=g["finally"](function(){return f.getLayoutPreview(b,a,d,h).then(function(a){a?(a.is(".strip-media-layout-preview")&&(i.parents(".column-preview").length||i.css("left",0),isNaN(e)||a.css("marginLeft",-e-b.left)),a.addClass(b.type+"-layout-preview").prependTo(i)):(i.css("background-color","blue"),i.text(b.type))})}),b.layout&&f.renderLEPreview(a,b.layout,i,d,e),i.appendTo(c)})},a.prototype.getPageBgColor=function(a){var b;if("footer"===a.containerPageId)b=this.previewColors.getRGBColor(this.flags.designKit&&this.designKit.getFooterBg()||1);else if("GeneralDescription"===a.contentElementType)b=this.previewColors.getRGBColor(this.flags.designKit&&this.designKit.getHeaderBg()||1);else{var c=this.modelTree.getPageNodeById(a.containerPageId);b=this.previewColors.getRGBColor(c&&c.bgObj&&c.bgObj.color||1)}return b},a.prototype.stripBackgroundThumbnail=function(a,b,c){var d=a.posterImageRef||a;return this.mediaGallery.itemToThumbnailUrl({mediaType:d.type.toLowerCase(),relativeUri:d.uri},b,c)},a.prototype.calculateStripHeight=function(a,b,c,d){return _.sum(_.range(d),function(d){var e=b[c+d],f=e.strip||{},g=a[c+d].getRenderedHeight(),h=f.paddingTop||0,i=f.paddingBottom||0;return g+h+i})},a.prototype.renderMediaBackground=function(a,b,c,d,e,f){"video"===b.mediaType?a.prepend(this.getVideoBgPreview(b,c,d)):angular.element('<div class="media-bg"></div>').css({width:c,height:d,opacity:f||1,"background-image":"url("+this.mediaGallery.itemToThumbnailUrl(b,c,d,{alignment:e})+")"}).addClass(b.mediaType+"-bg").prependTo(a)},a.prototype.reRender=function(a){if(a){if(!a.solution)return void this.$log.error("preset with no solution");this.onBeforeRender&&this.onBeforeRender(),this.render(a),this.onAfterRender&&this.onAfterRender()}},a.prototype.render=function(a){var d=this,e=a.solution,f=a.node,g=a.lgDataArray,h=$("<div></div>");h.css({width:c,height:"auto","background-color":this.getPageBgColor(f)});var i;_.each(e,function(c,f){var j=g[f],k=j.strip||{},l=j.menuStrip||{},m=c.getRenderedHeight(),n=j.topLine&&j.topLine.enable&&"space"===j.topLine.line&&j.topLine.space||0,o=j.bottomLine&&j.bottomLine.enable&&"space"===j.bottomLine.line&&j.bottomLine.space||0,p=k.paddingTop||0,q=k.paddingBottom||0;d.applicationParameters.isInMobileEditMode()&&h.addClass("layout-preset-preview-mobile"),a.stripSizes[f]&&(i=angular.element('<div class="strip-preview"></div>').appendTo(h),d.applicationParameters.isInMobileEditMode()&&i.addClass("strip-preview-mobile"),k.enable&&(i.css("background-color",d.previewColors.getRGBColor(k.color||"color_18")),k.mediaRef?i.css("background-image","url("+d.stripBackgroundThumbnail(k.mediaRef,h.width(),d.calculateStripHeight(e,g,f,a.stripSizes[f]))+")"):k.mediaItems&&d.flags.sectionBackground&&d.renderMediaBackground(i,k.mediaItems[0],h.width(),d.calculateStripHeight(e,g,f,a.stripSizes[f]),k.alignType,d.backgroundMediaOpacity.getBackgroundOpacity(c,k.color,k.mediaType,k.mediaItems))));var r=angular.element('<div class="lg-container"></div>').appendTo(i||h);if(r.css({paddingTop:Math.max(p,0)+n,paddingBottom:Math.max(q,0)+o}),d.applicationParameters.isInMobileEditMode()&&r.addClass("lg-container-mobile"),l.enable){var s=l.paddingTop||0,t=l.paddingBottom||0,u=c.segments[0].getLENoError(),v=_.find(u.layout,function(a){return"menu"===a.type||"copyrightMSG"===a.subType});if(v){var w=void 0,x=void 0;if(c.isMobile()&&c.isSiteHeader()?(w=u.menuStripTop,x=u.menuStripBottom-u.menuStripTop):(w=v.top-s,x=s+t+v.height),!isNaN(w)&&!isNaN(x)){var y=angular.element('<div class="menu-strip-preview"></div>').appendTo(r).css({height:x,marginTop:Math.max(p,0)+n+w});y.css("background-color",d.previewColors.getRGBColor(l.color||"color_18")),l.mediaRef&&y.css("background-image","url("+d.stripBackgroundThumbnail(l.mediaRef,h.width(),x)+")")}}}var z=angular.element('<div class="lg-preview"></div>').appendTo(r).height(m),A=c.columns;if(A&&!A[0].isMobile){var B=d.columnService.getColumnsContainerProps(A),C=B.siteMargin||0,D=void 0;z.addClass("lg-columns-preview"),B.fullWidth?(z.addClass("lg-columns-full-width-preview"),z.css({paddingLeft:C,paddingRight:C}),D=h.width()-2*C):(z.width(d.PAGE_WIDTH),D=d.PAGE_WIDTH);var E=B.columnsMargin,F=B.frameMargin,G=(D-E*(A.length-1)-2*F)/d.columnService.totalStructureColumns;A.forEach(function(a,c){var e=d.columnService.getAlignment(A,c),f=Math.floor(G*a.width),g=angular.element('<div class="column-container-preview"></div>').height(m).css("width",f).css("flex","0 0 auto").css("justify-content",b[e]).appendTo(z),i=d.columnService.calculateColumnWidth(A,c),j=angular.element('<div class="column-preview"></div>').height(m).width(i).appendTo(g),k=a.segment&&a.segment.getLENoError();if(k){g.attr("le-id",k.id);var l=a.isVirtual?a.layout:k.layout,n=d.columnService.createColumnBackground(a);n&&(n.media?(l=_.filter(l,function(a){return"media"!==a.type}),d.renderMediaBackground(g,n.media,f,m)):n.color&&g.css("background-color",d.previewColors.getRGBColor(n.color)));var o=void 0;if(a.isVirtual&&1===A.length){var p=B.fullWidth?C:(h.width()-d.PAGE_WIDTH)/2;o=p+(h.width()-2*p-i)*e/100}d.renderLEPreview(k,d.columnService.adjustLayoutForColumns(k,l,A,c),j,h,o)}})}else c.segments.forEach(function(a){var b=angular.element('<div class="segment-preview"></div>').width(a.width).height(a.height).css("left",a.left);b.appendTo(z);var c=a.getLENoError();c&&(b.attr("le-id",c.id),d.renderLEPreview(c,c.layout,b,h))})}),this.$element.empty(),this.$element.append(h)},a}();angular.module("siteGeneratorStaticsCoreAppInternal").component("singlePresetPreview",{controller:d,bindings:{presetPreview:"<",onBeforeRender:"&?",onAfterRender:"&?",previewPosition:"<?","static":"<?"}})}(preset||(preset={}));var preset;!function(a){var b=function(){function a(a,b,c){this.$timeout=a,this.$element=b,this.presetsTranforms=c,this.isAfterRenderScheduled=!1}return a.$inject=["$timeout","$element","presetsTranforms"],a.prototype.beforeRenderHandler=function(){this.onBeforeRender&&this.onBeforeRender()},a.prototype.afterRenderHandler=function(){var a=this;this.isAfterRenderScheduled||(this.isAfterRenderScheduled=!0,this.$timeout(function(){return a.doAfterRender()}))},a.prototype.doAfterRender=function(){this.isAfterRenderScheduled=!1,this.executeTransforms(),this.onAfterRender&&this.onAfterRender()},a.prototype.executeTransforms=function(){var a=this;if(this.flags){var b=this.$element.find("single-preset-preview > *");this.flags.filter(function(b){return!!a.presetsTranforms[b]}).forEach(function(c){return a.presetsTranforms[c](b)})}},a}();angular.module("siteGeneratorStaticsCoreAppInternal").component("multiPresetPreview",{templateUrl:"views/preset-preview/multi-preset-preview.html",controller:b,bindings:{presetPreviewArray:"<",onBeforeRender:"&?",onAfterRender:"&?",previewPosition:"<?","static":"<?",flags:"<?"}})}(preset||(preset={})),angular.module("siteGeneratorCommon",["siteGeneratorStaticsConsumerTranslations","siteGeneratorStaticsPreload","siteGeneratorAppCore","commonControlsApp","organizeMediaDialog","onboardingServerJsApiApp","siteGeneratorStaticsMetadataApp","wixAngular","wixAngularStorage","fedops","LocalStorageModule","cgNotify"]),angular.module("siteGeneratorContentManagerInternal",[]),angular.module("siteGeneratorLocationManagerInternal",[]),angular.module("siteGeneratorStaticsBackdropInternal",[]),angular.module("siteGeneratorTourManagerInternal",[]),angular.module("siteGeneratorBuilderInternal",[]),angular.module("siteGeneratorIntroInternal",["siteGeneratorAppCore"]),angular.module("siteGeneratorEditorInternal",[]),angular.module("siteGeneratorPresetInternal",[]),angular.module("siteGeneratorStaticsConsumerAppInternal",["siteGeneratorCommon","siteGeneratorContentManagerInternal","siteGeneratorLocationManagerInternal","siteGeneratorStaticsBackdropInternal","siteGeneratorTourManagerInternal","siteGeneratorBuilderInternal","siteGeneratorIntroInternal","siteGeneratorEditorInternal","siteGeneratorPresetInternal"]),angular.module("siteGeneratorStaticsConsumerAppConfig",["siteGeneratorStaticsConsumerAppInternal","siteGeneratorIntroInternal","ui.router"]),angular.module("siteGeneratorStaticsConsumerDebug",[]),angular.module("siteGeneratorStaticsConsumerApp",["siteGeneratorStaticsConsumerAppConfig","exceptionOverwrite","ui.router","google.places","ui.tree","xeditable","720kb.socialshare","ngAnimate","ngMessages","ngMaterial","dndLists","cgNotify","wix.common.bi","color.picker"]).controller("AppCtrl",["$scope","assistantManager","flags",function(a,b,c){var d=this;a.$on("$stateChangeSuccess",function(a,b){var c=b.url.split("/").filter(function(a){return""!==a});c.length>0&&(d.state=c[0])}),a.$watch(function(){return b.isInActiveTask()},function(a){return d.isAssistantOn=a}),this.flags=c}]);var CONSUMER_DIALOGS={ADD_SECTION_HELP:"add-section-help",ADD_PAGE_HELP:"add-page-help",BUSINESS_CARD_HELP:"business-card-help",AFTER_PAGE_ADD:"popup-after-page-add",AFTER_PAGE_ADD_HELP:"popup-after-page-add-help",AFTER_PAGE_ADD_FIRST_TIME:"popup-page-add-first-time",SECTION_REPLACE_HELP:"section-replace-help",SECTION_COLORS_HELP:"section-colors-help",SECTION_ANIMATIONS_HELP:"section-animations-help",SECTION_BACKGROUNDS_HELP:"section-background-help",SECTION_FONT_HELP:"section-font-help",CONFIRM_DELETE_LIST_ITEM:"confirm-delete-list-item",LIST_PANEL_HELP:"list-panel-help",MEDIA_SETTINGS_PANEL_HELP:"media-settings-panel-help",SHOW_HIDE_NODE:"show-hide-node-popup",SINGLE_PANEL_HELP:"single-panel-help",
SOCIAL_PANEL_HELP:"social-panel-help",LIST_SPAN_TOOLS_DELETE:"list-span-tools-delete",LIST_SPAN_TOOLS_DELETE_HELP:"list-span-tools-delete-help",MOVE_SECTION:"move-section",MOVE_SECTION_HELP:"move-section-help",DELETE_SECTION:"delete-section",DELETE_SECTION_HELP:"delete-section-help",DESIGN_PANEL_HELP:"design-panel-help",COLORATION_PANEL_HELP:"coloration-panel-help",ANIMATION_PANEL_HELP:"animation-panel-help",PAGES_PANEL_HELP:"pages-panel-help",PAGE_DELETE_CONFIRM:"confirm-page-delete",TPA_PAGE_DELETE_CONFIRM:"tpa-confirm-page-delete",SEO_PANEL_HELP:"seo-panel-help",GOTO_EDITOR:"goto-editor",PUBLISH_CHOOSE_DOMAIN_HELP:"publish-choose-domain-help",PUBLISH_CONGRATS_HELP:"publish-congrats-help",PUBLISH_CONNECT_DOMAIN_HELP:"publish-connect-domain-help",FAKEBROWSER_CONNECT_DOMAIN_HELP:"fakebrowser-connect-domain-help",TOPBAR_CONNECT_DOMAIN_HELP:"topbar-connect-domain-help",BUSINESS_DETAILS:"business-details",PUBLISH_FAILED:"publish-failed",HOME_HELP:"home-help",TPA_HELP:"tpa-help",TPA_AFTER_UPDATE:"tpa-after-update",LINK_DETAILS_HELP:"link-details-help",SESSION_EXPIRED:"session-expired",CONFLICTING_CHANGES:"conflicting-changes",SITE_NOT_MANAGED_BY_OB:"site-not-managed-by-ob",FIELD_VISIBILITY_SHOW_HIDE:"field-visibility-show-hide",TIME_TO_PUBLISH:"time-to-publish",AUTOSAVE:"autosave",SAVE_VALIDATION_ERROR:"save-failure",STORY_ARCHIVED:"story-archived",DS_SAVE_PUBLISH_DISABLED_ON_SERVER:"ds-save-publish-disabled-on-server",PALETTE_COLOR:"choose-color",MENU_TOOLTIP_HELP:"menu-tooltip-help",FONT_PANEL_HELP:"font-panel-help",LINK_PHONE_HELP:"help.link.phone",DEBUG_MAP_STYLE:"map-style",WELCOME_TO_MOBILE_EDITOR_EXISTING:"welcome-to-mobile-editor-existing",WELCOME_TO_MOBILE_EDITOR_NEW:"welcome-to-mobile-editor-new",AFFECTS_ONLY_MOBILE_EDITOR:"affects-only-mobile-editor"};angular.module("siteGeneratorStaticsConsumerAppInternal").constant("CONSUMER_DIALOGS",CONSUMER_DIALOGS);var config;!function(a){angular.module("siteGeneratorCommon").config(["wixBiLoggerProvider",function(a){var b=function(a){return a.getMetaSiteId()};b.$inject=["consumerBiLoggerHelpers"],a.setConfig({adapter:"onboarding",defaultEventArgs:{msid:b}})}])}(config||(config={}));var config;!function(a){angular.module("siteGeneratorCommon").config(["$logProvider","flagsProvider","wixAngularTopologyProvider","fedopsLoggerProvider","localStorageServiceProvider","applicationParameters","tpaAppInstanceHolder","clientTopology","sdkConfigProvider",function(a,b,c,d,e,f,g,h,i){f.clientTopology=h,c.setStaticsUrl(h.staticsUrl),d.setAppName("site-generator-statics-consumer"),a.debugEnabled(-1!==window.location.href.indexOf("debug")),e.setPrefix("ob"),i.registerAppDefIdGetter(function(){return f.getCurrentlyManaged()}),i.registerAppInstanceIdGetter(function(){return g.getCurrentlyManagedInstance.bind(g)}),b.designKit=!0,b.consumerMode=!0,h.production||b.silentBI===!1||(b.silentBI=!0),b.autoCrop=3}]),angular.module("siteGeneratorStaticsConsumerAppConfig").config(["$compileProvider","$logProvider","experimentManagerProvider","nrNgClientProvider","flagsProvider","clientTopology","CCSvgIconServiceProvider",function(a,b,c,d,e,f,g){g.setSpritePrefix(""),0===location.hash.indexOf("#!/builder")&&d.reportFinishedEnabled(!1);var h=void 0!==f.experiments,i=h?Object.keys(f.experiments):[];h&&(d.tag("experiments",i.filter(function(a){return"false"!==f.experiments[a]}).sort().join(" ")),c.setExperiments(f.experiments)),f.production&&(a.debugInfoEnabled(!1),b.debugEnabled(!1)),i.forEach(function(a){var b=c.getExperimentValue(a),d=a.split("."),f=d[d.length-1];void 0===b||"false"===b||b===!1?e[f]=!1:"true"===b||b===!0?e[f]=!0:e[f]=b});var j=window.location.href.split("?")[1]||"";j.split("&").map(function(a){var b=a.split("="),c=b[0],d=b[1];void 0===d&&(d=!0),("true"===d||"false"===d)&&(d="true"===d),e[c]=d}),e.moveToEditorText||(e.moveToEditorText="go"),e.dataFlags=c.isExperimentEnabled("specs.ob.dataFlags")}]).run(["contentElements",function(a){return a.load()}]).run(["clientTopology","flags","cmsApi","jsApiManager","wixWizIntegration","CcDialogBuilder","ccTooltipManager","experimentManager","applicationState",function(a,b,c,d,e,f,g,h,i){b.contentVersionId&&c.setContentVersionId(b.contentVersionId),a.esi&&(d.setEditorSessionId(a.esi),e.setSessionId(a.esi)),h.loadExperiment("specs.siteRevisions.separateRevisionsForEditorAndAdi",!1),h.loadExperiment("specs.wos.businessManagerPhase3",!1).then(function(a){return b.businessManagerPhase3="true"===a||a===!0}),f.setIsSilentCallback(i.isSilent),f.setIsHelpDraggableCallback(function(){return b.dragHelpPopup}),g.setIsSilentCallback(i.isSilent)}])}(config||(config={}));var intro;!function(a){a.INTRO_STATES={INTRO:"intro",INTRO_CATEGORY_SEARCH:"intro.category-search",INTRO_BLOCKED_CATEGORY:"intro.blocked-category",INTRO_BUSINESS_TYPE:"intro.business-type",INTRO_SERVICES_OFFER:"intro.service-offer",INTRO_BUSINESS_NAME:"intro.business-name",INTRO_BUSINESS_LOCATION:"intro.business-location",INTRO_SEARCH_CONFIRM:"intro.search-confirm",INTRO_SELECT_USER:"intro.select-user",INTRO_EDIT_USER:"intro.edit-user"}}(intro||(intro={}));var builder;!function(a){a.BUILDER_STATES={BUILDER:"builder",BUILDER_STORY:"builder.story",BUILDER_STORY_PREVIEW:"builder.story.preview",BUILDER_ADD_SECTION:"builder.story.add",BUILDER_ADD_PAGE:"builder.story.add-page",BUILDER_EDIT:"builder.story.edit",BUILDER_MEDIA_SETTINGS:"builder.story.edit.media-settings",BUILDER_DESIGN:"builder.story.design",BUILDER_DESIGN_KITS:"builder.story.design.kits",BUILDER_DESIGN_KIT:"builder.story.design.kit",BUILDER_DESIGN_KIT_COLORATION:"builder.story.design.coloration",BUILDER_DESIGN_KIT_COLORATION_ADVANCED:"builder.story.design.advancedpaletteediting",BUILDER_DESIGN_KIT_FONTS_NEW:"builder.story.design.fonts",BUILDER_DESIGN_KIT_ANIMATIONS:"builder.story.design.animations",BUILDER_SECTION_DESIGN_ANIMATIONS:"builder.story.section-animations",BUILDER_SECTION_DESIGN_BACKGROUND:"builder.story.section-background",BUILDER_SECTION_DESIGN_COLORS:"builder.story.section-colors",BUILDER_SECTION_DESIGN_FONTS:"builder.story.section-fonts",BUILDER_SWITCH_PRESET:"builder.story.switch-preset",BUILDER_PAGES:"builder.story.pages",BUILDER_SELECTED_PAGE:"builder.story.page",BUILDER_PAGES_SEO:"builder.story.pages.seo"}}(builder||(builder={}));var playground;!function(a){a.PLAYGROUND_STATES={CC_PLAYGROUND:"playground",BACKDROP_PLAYGROUND:"backdrop",LOGO_COLOR_PLAYGROUND:"logo-color-playground",ANALYSIS_PLAYGROUND:"analysis"}}(playground||(playground={}));var __assign=this&&this.__assign||Object.assign||function(a){for(var b,c=1,d=arguments.length;d>c;c++){b=arguments[c];for(var e in b)Object.prototype.hasOwnProperty.call(b,e)&&(a[e]=b[e])}return a},config;!function(a){a.STATES=__assign({},intro.INTRO_STATES,builder.BUILDER_STATES,playground.PLAYGROUND_STATES),a.STATE_PARAMS_KEY={MODEL:"model",GEO_SEARCH:"geosearch"},a.STATE_PARAMS_VALUES={MODEL_NOT_FOUND:"not-found",MODEL_FOUND_EST:"found-est",MODEL_FOUND:"found",GEO_SEARCH_FIRST_TIME:"first-time",GEO_SEARCH_NOT_FOUND:"not-found",GEO_SEARCH_EST_FAILED:"est-failed"},a.BACKGROUND_PANEL_MODE={HEADER_MODE:"header",LIST_MODE:"list"},angular.module("siteGeneratorStaticsConsumerAppInternal").config(["previewScaleProvider",function(a){function b(a,b){return.55*a/Viewer.ViewerDesktopBaseSize}a.range({viewport:[1280,Number.POSITIVE_INFINITY],stage:[1280,Number.POSITIVE_INFINITY],scale:function(a,c){return Math.min(1,b(a,c))}}).range({viewport:[0,Number.POSITIVE_INFINITY],stage:[300,1280],scale:function(a,c){var d=(c-300)/Viewer.ViewerDesktopBaseSize;return Math.min(d,b(a,c))}})}]),angular.module("siteGeneratorStaticsConsumerAppConfig").config(["$stateProvider","$urlRouterProvider","$locationProvider","flagsProvider",function(b,c,d,e){var f=317,g=function(a){return a.initDropTarget()};g.$inject=["dropTargetCalculator"];var h=function(){setTimeout(function(){$("#preview-content").offset({left:f})},4e3)},i=function(a,b){a.setScaleFactor(PreviewScale.MaxScaleFactor),(-1!==navigator.userAgent.indexOf("MSIE")||navigator.appVersion.indexOf("Trident/")>0)&&h()};i.$inject=["previewScale","flags"];var j=function(a,b){a.setScaleFactor(PreviewScale.MaxScaleFactor)};j.$inject=["previewScale","flags"];var k=function(a,b){a.unlockDropTarget(),a.clearDropTarget(),a.listSpanManager.clearPlaceholder(),b.reset(!0)};k.$inject=["overlayManager","previewScale"];var l=function(a){a.clearContentFocus()};l.$inject=["applicationState"];var m=function(a,b){b.resetFocus(a.contentId)};m.$inject=["$stateParams","contentElementFieldManager"];var n=function(a){a.init()};n.$inject=["revisionReloader"];var o=function(a){a.reset()};o.$inject=["revisionReloader"];var p=function(a){a.showBackdrop=!0};p.$inject=["overlayManager"];var q=function(a){a.showBackdrop=!1};q.$inject=["overlayManager"];var r=b.state(a.STATES.INTRO,{url:"/"+a.STATES.INTRO,template:"<intro></intro>"});Object.keys(a.STATES).map(function(b){return a.STATES[b]}).filter(function(b){return 0===b.indexOf(a.STATES.INTRO+".")}).forEach(function(a){var b=a.replace(".","-");r=r.state(a,{url:"/"+a.replace("intro.",""),template:"<"+b+"></"+b+">",resolve:{hideContent:["introStep",function(a){return a.hideContent()}]}})}),r.state(a.STATES.BUILDER,{url:"/builder?silent&industryId&structureId&businessName",params:{silent:{value:"false",squash:!0}},template:e.initDuringIntro?void 0:"<builder></builder>",views:e.initDuringIntro?{"builder-panel":{template:'<div ui-view=""></div>'}}:void 0,data:{}}).state(a.STATES.BUILDER_STORY,{url:"/story/{storyId}",template:"<story-container></story-container>",mobile:!0,onEnter:l}).state(a.STATES.BUILDER_STORY_PREVIEW,{url:"/preview",template:"<story-container></story-container>",mobile:!0,onEnter:n,onExit:o}).state(a.STATES.BUILDER_ADD_SECTION,{url:"/add",template:"<add-section></add-section>",data:{panelWidth:builder.PreviewList.PreviewListWidth+174},onEnter:g,onExit:k}).state(a.STATES.BUILDER_ADD_PAGE,{url:"/add-page",template:'<add-section data-page-mode="1"></add-section>',data:{panelWidth:builder.PreviewList.PreviewListWidth+174}}).state(a.STATES.BUILDER_PAGES,{url:"/pages",template:"<pages-panel></pages-panel>",data:{panelWidth:300},onEnter:l}).state(a.STATES.BUILDER_SELECTED_PAGE,{url:"/page/{pageId}",template:"<pages-panel></pages-panel>",mobile:!0,data:{panelWidth:300}}).state(a.STATES.BUILDER_PAGES_SEO,{url:"/seo/{pageId}",template:"<seo-panel></seo-panel>",data:{panelWidth:300},onEnter:p,onExit:q}).state(a.STATES.BUILDER_EDIT,{url:"/edit/{contentId}/{childId}",template:"<builder-edit></builder-edit>",mobile:!0,data:{panelWidth:f},onEnter:i,onExit:m}).state(a.STATES.BUILDER_MEDIA_SETTINGS,{url:"/edit/{contentId}/{childId}",template:"<builder-edit></builder-edit>",mobile:!0,data:{panelWidth:f},onEnter:i}).state(a.STATES.BUILDER_SWITCH_PRESET,{url:"/switch-preset/{contentId}",template:"<switch-preset></switch-preset>",data:{panelWidth:builder.PreviewList.PreviewListWidth,mobilePanelWidth:builder.PreviewList.MobilePreviewListWidth},mobile:!0}).state(a.STATES.BUILDER_DESIGN,{url:"/design","abstract":!0,template:"<ui-view/>",onExit:j,data:{panelWidth:300}}).state(a.STATES.BUILDER_DESIGN_KITS,{url:"/kits",template:"<design-panel></design-panel>",data:{panelWidth:300}}).state(a.STATES.BUILDER_DESIGN_KIT,{url:"/kit",template:"<design-panel-kit></design-panel-kit>",data:{panelWidth:300}}).state(a.STATES.BUILDER_DESIGN_KIT_COLORATION,{url:"/coloration",template:"<coloration-panel></coloration-panel>"}).state(a.STATES.BUILDER_DESIGN_KIT_COLORATION_ADVANCED,{url:"/advanced",template:"<advanced-palette-editing></advanced-palette-editing>"}).state(a.STATES.BUILDER_DESIGN_KIT_FONTS_NEW,{url:"/fonts/",template:"<font-panel></font-panel>",data:{panelWidth:300}}).state(a.STATES.BUILDER_DESIGN_KIT_ANIMATIONS,{url:"/animations",template:"<animation-panel></animation-panel>",data:{panelWidth:300}}).state(a.STATES.BUILDER_SECTION_DESIGN_ANIMATIONS,{url:"/section-animations/{contentId}",template:"<section-animation-panel></section-animation-panel>",data:{panelWidth:360}}).state(a.STATES.BUILDER_SECTION_DESIGN_BACKGROUND,{url:"/section-backgrounds/{contentId}/{mode}",template:"<section-background-panel></section-background-panel>",data:{panelWidth:360}}).state(a.STATES.BUILDER_SECTION_DESIGN_FONTS,{url:"/section-font/{contentId}",template:"<section-font-panel></section-font-panel>",data:{panelWidth:360}}).state(a.STATES.BUILDER_SECTION_DESIGN_COLORS,{url:"/section-color/{contentId}",template:"<switch-color></switch-color>",data:{panelWidth:builder.PreviewList.PreviewListWidth}}).state("image-search-debug",{url:"/image-search-debug",template:"<image-search-debug>"}).state("server-side-test",{url:"/server-side-test",template:"<server-side-test>"}).state("tester",{url:"/tester",template:"<tester>"}).state(a.STATES.CC_PLAYGROUND,{url:"/playground?panel",params:{panel:{value:"all",squash:!0}},template:'<cc-playground visible-panel-label="{{panel}}" cc-scrollbar class="cc-playground"></cc-playground>',controller:["$scope","$stateParams",function(a,b){return a.panel=b.panel}]}).state(a.STATES.BACKDROP_PLAYGROUND,{url:"/backdrop",template:"<backdrop-playground></backdrop-playground>"}).state(a.STATES.LOGO_COLOR_PLAYGROUND,{url:"/logo-color-playground",template:"<logo-color-playground></logo-color-playground>"}).state(a.STATES.ANALYSIS_PLAYGROUND,{url:"/analysis",template:"<analysis-playground></analysis-playground>"}),d.hashPrefix("!"),c.otherwise("/"+a.STATES.INTRO)}])}(config||(config={}));var AppMain=function(){function a(b,c,d,e,f){var g=this;this.$rootScope=b,this.$window=c,this.preloaderService=d,this.flags=e,this.applicationState=f,this.isBuilder=this.isState(config.STATES.BUILDER),this.isIntro=this.isState(config.STATES.INTRO),b.$on("$stateChangeStart",function(a,b,c,d){return g.onStateChangeStart(a,b,c,d)}),a.bodyFlags.forEach(function(a){e[a]&&g.setBodyAttr(a,e[a])})}return a.$inject=["$rootScope","$window","preloaderService","flags","applicationState"],a.prototype.setBodyAttr=function(a,b){this.$window.document.body.setAttribute("data-experiment-"+_.kebabCase(a),b)},a.prototype.isState=function(a){return function(b,c){return void 0===c&&(c=!1),c?b.name===a:0===b.name.indexOf(a)}},a.prototype.onStateChangeStart=function(a,b,c,d){var e=this,f=this.isIntro(d)&&this.isIntro(b,!0),g=!this.isIntro(d)&&this.isIntro(b,!0),h=this.isBuilder(d)&&!c.storyId,i=this.isState(config.STATES.BUILDER_STORY_PREVIEW)(d)&&this.flags.previewRevision;!g&&(f||h||i)?a.preventDefault():this.isBuilder(d)&&this.isIntro(b)&&(this.$window.onbeforeunload=null,this.$window.setTimeout(function(){return e.$window.location.reload(!0)}))},a}();AppMain.bodyFlags=["onStageIndications","popover","textualSectionMenu","newElasticSearchEndpoint","showThatsMeWithoutHover","pagesDropDownNewDesign","mergedHeader"],angular.module("siteGeneratorStaticsConsumerAppInternal").component("appMain",{templateUrl:"views/main.html",controller:AppMain,transclude:!0});var BuilderEdit=function(){function a(a){this.$stateParams=a,this.contentId=this.$stateParams.contentId,this.childId=this.$stateParams.childId}return a.$inject=["$stateParams"],a}();angular.module("siteGeneratorStaticsConsumerAppInternal").component("builderEdit",{templateUrl:"views/builder-edit.html",controller:BuilderEdit});var ListEnterEnd=function(){function a(a){this.$timeout=a}return a.$inject=["$timeout"],a.prototype.link=function(a,b,c){if(a.$last){var d=_.get(a.$parent,c.listEnterEnd);if(d){var e=b.css(["transitionDuration","transitionDelay","animationDuration","animationDelay","animationIterationCount"]),f=this.cssTimeToMilliseconds(e.transitionDuration)+this.cssTimeToMilliseconds(e.transitionDelay),g=this.cssTimeToMilliseconds(e.animationDuration)*parseInt(e.animationIterationCount,10)+this.cssTimeToMilliseconds(e.animationDelay);g>f?this.listenToOwnEventOnce(b,"animationend",d,g):this.listenToOwnEventOnce(b,"transitionend",d,f)}}},a.prototype.cssTimeToMilliseconds=function(a){return Math.floor(parseFloat(a)*(a.endsWith("ms")?1:1e3))},a.prototype.listenToOwnEventOnce=function(b,c,d,e){var f=_.once(d),g=function(a){var d=a.target===b[0];d?f():b.one(c,g)};b.one(c,g),this.$timeout(f,e+a.TIMEOUT_DELTA)},a}();ListEnterEnd.TIMEOUT_DELTA=500,angular.module("siteGeneratorCommon").directive("listEnterEnd",["$timeout",function(a){return new ListEnterEnd(a)}]);var UrlParser=function(){function a(){}return a.prototype.queryParams=function(){var a={},b=window.location.href.split("?").filter(function(a,b){return 0!==b}),c=_.flatten(_.map(b,function(a){return a.split("#")[0].split("&")}));return c.forEach(function(b){var c=b.split("=");a[c[0]]=c[1]}),a},a.prototype.getQueryStringValueByKey=function(a){var b=this.queryParams();return b.hasOwnProperty(a)?b[a]:""},a}();angular.module("siteGeneratorCommon").service("urlParser",UrlParser);var helpers;!function(a){var b=function(){function a(a,b,c,d,e){void 0===e&&(e=".cc-panel-body"),this.$timeout=a,this.$element=b,this.selectedSelector=c,this.popupSelector=d,this.panelBodySelector=e}return Object.defineProperty(a.prototype,"panelBody",{get:function(){if(!this._panelBody){var a=this.$element.find(this.panelBodySelector);a.length&&(this._panelBody=a)}return this._panelBody},enumerable:!0,configurable:!0}),a.prototype.scrollToExposePopup=function(){var a=this;this.$timeout(function(){var b=a.$element.find(a.selectedSelector);a._popup=a.$element.find(a.popupSelector);var c=a._popup[0].scrollHeight,d=a.panelBody.scrollTop()+a.panelBody.height(),e=b.position().top+b.outerHeight(!0)+c,f=Math.min(0,d-e);e>a.panelBody[0].scrollHeight&&(a.paddingAdded=!0,a.panelBody.css("padding-bottom",c)),a.panelBody.animate({scrollTop:"-="+f})})},a.prototype.reset=function(){this.paddingAdded&&(this.paddingAdded=!1,this.panelBody.css("padding-bottom",0).animate({scrollTop:this.panelBody[0].scrollHeight-this.panelBody.height()-this._popup[0].scrollHeight}))},a}();a.PopupScroller=b}(helpers||(helpers={})),angular.module("siteGeneratorIntroInternal").factory("fullStoryLoader",function(){return wixFullstoryLoader});var MonitoringSteps=function(){function a(){var a=this;this.steps=[],this.toString=function(){return a.steps.map(function(a){return a.name}).join(" => ")},this.getTimestamp="object"==typeof performance&&"function"==typeof performance.now?function(){return performance.now()}:function(){return Date.now()}}return a.prototype["with"]=function(a){this.steps.push({name:a,start:this.getTimestamp()})},a.prototype.without=function(a){var b=this.lastIndexOf(a);b>=0&&this.steps.splice(b,1)},a.prototype.durationOf=function(a){var b=this.lastIndexOf(a);return b>=0?Math.round(this.getTimestamp()-this.steps[b].start):-1},a.prototype.clear=function(){this.steps=[]},a.prototype.lastIndexOf=function(a){for(var b=this.steps.length-1;b>=0;b--)if(this.steps[b].name===a)return b;return-1},a}(),__assign=this&&this.__assign||Object.assign||function(a){for(var b,c=1,d=arguments.length;d>c;c++){b=arguments[c];for(var e in b)Object.prototype.hasOwnProperty.call(b,e)&&(a[e]=b[e])}return a},MonitoringBI=function(){function a(a,b){var c=this;this.consumerBiLogger=a,this.flags=b,this.handlers=__assign({},this.flags.newBIInitEvents?{}:{coreLoadingWizardServiceCoreInitializeAfterWait:{},coreLoadingLoadLayouts:{end:function(){return c.consumerBiLogger.builder.coreLoadingLoadLayoutsComplete()}},coreLoadingWizardServiceSetStoryStyles:{start:function(){return c.consumerBiLogger.builder.coreLoadingWizardServiceSetStoryStyles()}},coreLoadingNodeChange:{start:function(){return c.consumerBiLogger.builder.coreLoadingNodeChangeStart()},end:function(){return c.consumerBiLogger.builder.coreLoadingNodeChangeComplete()}},coreLoadingWizardServiceCoreInitialize:{start:function(){return c.consumerBiLogger.builder.coreLoadingWizardServiceCoreInitializeStart()}},coreLoadingLoadThemChooser:{end:function(){return c.consumerBiLogger.builder.coreLoadingLoadThemChooserComplete()}},coreLoadingLoadLayoutSolver:{end:function(){return c.consumerBiLogger.builder.coreLoadingLoadLayoutSolverComplete()}},coreLoadingWizardServiceChangeStory:{start:function(){return c.consumerBiLogger.builder.coreLoadingWizardServiceChangeStory()},end:function(){return c.consumerBiLogger.builder.coreLoadingWizardServiceMenuServiceInitialize()}},coreLoadingWizardServiceLoadPreview:{start:function(){return c.consumerBiLogger.builder.coreLoadingWizardServiceLoadPreview()}},coreLoadingLoadIframe:{start:function(){return c.consumerBiLogger.builder.coreLoadingLoadIframeStart()},end:function(){return c.consumerBiLogger.builder.coreLoadingLoadIframeComplete()}}},{failToFitLayoutCanTFindAProperLayout:{start:function(a){var b=a.nodeId,d=a.sectionType,e=a.sectionAlias,f=a.reason;return c.consumerBiLogger.contentEditor.failToFitLayoutCanTFindAProperLayout(b,d,e,f)}},failoverReArrangeLayout:{start:function(a){var b=a.nodeId,d=a.sectionType,e=a.sectionAlias;return c.consumerBiLogger.contentEditor.failoverReArrangeLayout(b,d,e)}},failoverReArrangeSolution:{start:function(a){var b=a.nodeId,d=a.sectionType,e=a.sectionAlias;return c.consumerBiLogger.contentEditor.failoverReArrangeSolution(b,d,e)}},imageCropZoomInZoomOut:{start:function(a){var b=a.nodeId,d=a.sectionType,e=a.sectionAlias,f=a.zoomType;return c.consumerBiLogger.contentEditor.imageCropZoomInZoomOut(b,d,e,f)}},imageCropSuccess:{end:function(a,b){var d=b.nodeId,e=b.sectionType,f=b.sectionAlias;return c.consumerBiLogger.contentEditor.imageCropSuccess(d,e,f)}},imageCropCancel:{end:function(a,b){var d=b.nodeId,e=b.sectionType,f=b.sectionAlias;return c.consumerBiLogger.contentEditor.imageCropCancel(d,e,f)}}})}return a.prototype.mark=function(a,b){var c=this.handlers[a];c&&"function"==typeof c.start&&c.start(b)},a.prototype.measure=function(a,b,c){var d=this.handlers[a];d&&"function"==typeof d.end&&d.end(b,c)},a}(),__assign=this&&this.__assign||Object.assign||function(a){for(var b,c=1,d=arguments.length;d>c;c++){b=arguments[c];for(var e in b)Object.prototype.hasOwnProperty.call(b,e)&&(a[e]=b[e])}return a},ConsumerMonitoring=function(){function a(a,b,c,d,e,f,g,h){var i=this;this.performance=a,this.$window=b,this.flags=c,this.storyServices=d,this.nrNgClient=e,this.obFedops=f,this.consumerBiLogger=g,this.consumerBiLoggerHelpers=h,this.steps=new MonitoringSteps,this.bi=new MonitoringBI(this.consumerBiLogger,this.flags),this.userFlags="",this.reportErrors=!0,this.errorSlidingWindowTime=10,this.errorSlidingWindowNumber=50,this.errorsSlidingWindow=helpers.aFixedLengthQueue(this.errorSlidingWindowNumber),this.error=function(a,b){return i.detailedError(a,"",new Error(a),b)},this.warning=function(a,b){return i.detailedWarning(a,"",b)},this.onErrorHandler=function(a,b,c,d,e){return i.detailedError(a,"",e)},this.canUsePerformance=function(a){return"function"==typeof a.mark&&"function"==typeof a.measure&&(i.flags.debugMode===!0||i.flags.newBIInitEvents)},this.doIfPerformance=function(a){return i.safeDoIfGet(function(){return i.performance},i.canUsePerformance,a)},this.doIfFedops=function(a){return function(b){return i.safeDoIfGet(function(){return i.obFedops.interactions[a]},function(a){return a},b)}},this.doIfDuration=function(a){return function(b){return i.safeDoIfGet(function(){return i.steps.durationOf(a)},function(a){return a>=0},b)}};var j=_.get(this.storyServices,"story.flags","");j&&(this.userFlags=JSON.stringify(j)),this.logLoadingErrors(),b.onerror=this.onErrorHandler}return a.$inject=["performance","$window","flags","storyServices","nrNgClient","obFedops","consumerBiLogger","consumerBiLoggerHelpers"],a.prototype.detailedWarning=function(a,b,c){void 0===c&&(c={});var d=this.steps.toString();this.steps.clear(),this.consumerBiLogger.err(BIErrorCodes.GeneralWarning,this.biError(a,b,null,d,c)),this.nrNgClient.addPageAction("warning",this.relicError(a,b,null,d,c))},a.prototype.detailedError=function(a,b,c,d){void 0===d&&(d={});var e=(new Date).getTime();this.errorsSlidingWindow.push(e),this.reportErrors&&(this.errorsSlidingWindow.length()===this.errorSlidingWindowNumber&&e-this.errorsSlidingWindow.peek()<1e3*this.errorSlidingWindowTime?(this.reportErrors=!1,this.reportExcessiveErrors("Stopped reporting error BI due to excessive errors","Error burst",null,d)):this.reportDetailedError(a,b,c,d))},a.prototype.reportExcessiveErrors=function(a,b,c,d){void 0===d&&(d={});var e=this.steps.toString();this.steps.clear(),this.consumerBiLogger.err(BIErrorCodes.ExcessiveErrors,this.biError(a,b,c,e,d)),this.nrNgClient.addPageAction("error",this.relicError(a,b,c,e,d))},a.prototype.reportDetailedError=function(a,b,c,d){void 0===d&&(d={});var e=this.steps.toString();this.steps.clear(),this.consumerBiLogger.err(BIErrorCodes.GeneralError,this.biError(a,b,c,e,d)),this.nrNgClient.addPageAction("error",this.relicError(a,b,c,e,d))},a.prototype.mark=function(a){if(this.steps["with"](a.name),a.init)if(this.flags.newBIInitEvents){var b=a.parent?a.parent:a.name,c=a.parent?a.name:"";this.consumerBiLogger.builder.loadingPhaseInInitStart(b,c),this.flags.debug&&console.log("%c>> "+b+"::"+c+" %c"+this.consumerBiLoggerHelpers.getLoadTime()+"ms","color:#0066ff","color:#00cc00")}else this.bi.mark(a.name,a.data);this.markDuration(a)},a.prototype.measure=function(a){var b=this.measureDuration(a);if(a.init)if(this.flags.newBIInitEvents){var c=a.parent?a.parent:a.name,d=a.parent?a.name:"";this.consumerBiLogger.builder.loadingPhaseInInitComplete(b,c,d),this.flags.debug&&console.log("%c<< "+c+"::"+d+" %c"+b+"ms %c"+this.consumerBiLoggerHelpers.getLoadTime()+"ms","color:#8c1aff","color:#e68a00","color:#00cc00")}else this.bi.measure(a.name,b,a.data);return this.steps.without(a.name),b},a.prototype.logLoadingErrors=function(){var a=this,b=this.$window.onerror;b&&Array.isArray(b.errors)&&b.errors.forEach(function(b){return a.onErrorHandler.apply(null,b)})},a.prototype.relicError=function(a,b,c,d,e){return __assign({message:a,cause:b,stack:c?c.stack:"",steps:d,flags:this.userFlags},e)},a.prototype.biError=function(a,b,c,d,e){return["message: "+a,"cause: "+b,"stack: "+(c?c.stack:""),"flags: "+this.userFlags,"steps: "+d,"extra: "+(e?JSON.stringify(e):"")].join("\n------\n")},a.prototype.safeDoIfGet=function(a,b,c){var d=a();if(b(d))try{c(d)}catch(e){}},a.prototype.markDuration=function(a){this.doIfPerformance(function(b){return b.mark("start-"+a.name)}),this.doIfFedops(a.name)(function(b){return b.started(a.name)}),this.nrNgClient.addPageAction("mark",__assign({step:a.name},a.data))},a.prototype.measureDuration=function(a){var b=-1,c=-1;this.doIfPerformance(function(c){var d=["start-"+a.name,"end-"+a.name];c.mark("end-"+a.name),c.measure.apply(c,[a.name].concat(d)),c.clearMarks.apply(c,d);var e=c.getEntriesByName(a.name,"measure");b=Math.round(e.pop().duration)}),this.doIfFedops(a.name)(function(b){return b.ended(a.name)}),this.doIfDuration(a.name)(function(a){return c=a});var d=-1!==b?b:c;return-1!==d&&this.nrNgClient.addPageAction("measure",__assign({step:a.name,duration:d},a.data)),d},a}();angular.module("siteGeneratorStaticsConsumerAppInternal").service("obMonitoring",ConsumerMonitoring).service("performance",function(){return window.performance}).run(["obMonitoring",function(a){}]);var ObFedops=function(){function a(a){var b=this;this.fedopsLogger=a,this.interactions={init:{started:function(){b.fedopsLogger.interactionStarted("init")},ended:function(){b.fedopsLogger.interactionEnded("init")}},addSection:{started:function(){b.fedopsLogger.interactionStarted("add-section")},ended:function(){b.fedopsLogger.interactionEnded("add-section")}},changeDesignKit:{started:function(){b.fedopsLogger.interactionStarted("change-design-kit")},ended:function(){b.fedopsLogger.interactionEnded("change-design-kit")}}}}return a.$inject=["fedopsLogger"],a}();angular.module("siteGeneratorStaticsConsumerAppInternal").service("obFedops",ObFedops),angular.module("siteGeneratorStaticsConsumerAppInternal").filter("trustUrl",["$sce",function(a){return function(b){return a.trustAsResourceUrl(b)}}]);var BusinessCardEditable=function(){function a(b,c,d,e,f,g,h,i,j){this.$scope=b,this.logoManager=c,this.socialLinkManager=d,this.consumerBiLogger=e,this.applicationParameters=f,this.validation=g,this.$translate=h,this.flags=i,this.osUtils=j,this.prepareData();var k={persistence:new intro.IntroLogoPersistence(this.data.media),onFieldChanged:this.onFieldChanged.bind(this),usePlaceholderOnDelete:!0};this.logoManager.setContext(k),null==a.logoManagerInstance&&(a.logoManagerInstance=this.logoManager),this.handleProblemsInWebsiteAddress()}return a.$inject=["$scope","logoManager","socialLinkManager","consumerBiLogger","applicationParameters","validation","$translate","flags","osUtils"],a.getBusinessCardDataModel=function(b){return{logo:a.logoManagerInstance.getMediaUrl(),businessName:b.name,email:b.contactDetails.email||"",fullAddress:b.contactDetails.address?b.contactDetails.address.fullAddress:"",phone:b.contactDetails.phone||"",fax:b.contactDetails.fax||"",website:b.contactDetails.website||"",socialLinks:_.clone(b.socialLinks,!0)}},a.prototype.$postLink=function(){a.initializedBusinessCardValues=a.getBusinessCardDataModel(this.data)},a.prototype.prepareData=function(){this.view=this.$scope.view||"intro",this.data.contactDetails=this.data.contactDetails||{},this.data.socialLinks=this.data.socialLinks||[],this.data.media=this.data.media||{},this.normalizeAddress()},a.prototype.normalizeAddress=function(){this.data.contactDetails.address=this.data.contactDetails.address||{};var a=this.data.contactDetails.address.fullAddress;this.data.contactDetails.address.fullAddress=_.isString(a)?a.trim():""},a.prototype.getOrigin=function(){return this.view},a.prototype.showWebsiteAddressError=function(){this.isWebsiteAddressValid=!1},a.prototype.hideWebsiteAddressError=function(){this.isWebsiteAddressValid=!0},a.prototype.handleProblemsInWebsiteAddress=function(){var a=this.validation.isWebsite(this.data.contactDetails.website);a?this.hideWebsiteAddressError():this.showWebsiteAddressError()},a.prototype.addEmptySocialLink=function(){var a={platform:"",url:""};this.data.socialLinks.push(a),this.osUtils.isIE||(this.focusedSocial=a)},a.prototype.deleteSocialLink=function(a){var b=this.data.socialLinks.indexOf(a);b>=0&&this.data.socialLinks.splice(b,1),this.onFieldChanged(a.platform,"social",a.url,"")},a.prototype.onSocialChanged=function(a){a.platform=this.socialLinkManager.getPlatformNameByUrl(a.url)},a.prototype.enableAddSocialLink=function(){var b=this.flags.introWebsiteAddressField?a.maxLinksForWebsiteAddressFlag:this.applicationParameters.maxSocialLinks;return(this.data.socialLinks||[]).length<b},a.prototype.isLinkInvalid=function(a){return!a.platform&&a.url},a.prototype.onFieldChanged=function(a,b,c,d,e){if(d!==c){var f=d?d.length:0,g="edit";g=d?g:"remove",g=c?g:"add",this.consumerBiLogger.intro.infoCardAddEditRemoveInfo(a,b,f,g,this.view,e||null)}},a.prototype.blurEventTargetOnEnter=function(a){("Enter"===a.key||13===a.which)&&a.target.blur()},a.prototype.$onDestroy=function(){a.logoManagerInstance.cleanUp(),a.logoManagerInstance.doneWithThisContext()},a}();BusinessCardEditable.maxLinksForWebsiteAddressFlag=6,BusinessCardEditable.logoManagerInstance=null,BusinessCardEditable.fieldToIntroManagerPath={logo:"media.logos[0].url",businessName:"name",email:"contactDetails.email",fullAddress:"contactDetails.address.fullAddress",phone:"contactDetails.phone",fax:"contactDetails.fax",website:"contactDetails.website",socialLinks:"socialLinks"},angular.module("siteGeneratorCommon").component("businessCardEditable",{controller:BusinessCardEditable,templateUrl:"views/business-card/business-card-editable.html",bindings:{data:"=",view:"@?"}});var FileUploadSelect=function(){function a(a,b,c){this.$element=a,this.$scope=b,this.$timeout=c}return a.$inject=["$element","$scope","$timeout"],a.prototype.$postLink=function(){var a=this,b=this.$element.find("input");b.on("change",function(b){var c=b.target.files[0];c&&a.$timeout(function(){a.onSelect({$file:c}),b.target.value=null},0,!1)})},a}();angular.module("siteGeneratorCommon").component("fileUploadSelect",{bindings:{onSelect:"&"},templateUrl:"views/common/file-upload-select.html",controller:FileUploadSelect
});var LogoCEWStep;!function(a){a[a.SHOULD_I_EXTRACT_STEP=3e3]="SHOULD_I_EXTRACT_STEP",a[a.CREATING_PALETTE_STEP=3100]="CREATING_PALETTE_STEP",a[a.SHOULD_I_SAVE_STEP=3200]="SHOULD_I_SAVE_STEP"}(LogoCEWStep||(LogoCEWStep={}));var LogoColorExtractionWizard=function(){function a(a,b,c,d,e){this.logoManager=a,this.consumerBiLogger=b,this.$log=c,this.$timeout=d,this.$scope=e,this.allSteps=[LogoCEWStep.SHOULD_I_EXTRACT_STEP,LogoCEWStep.CREATING_PALETTE_STEP,LogoCEWStep.SHOULD_I_SAVE_STEP],this.stepButtonWasClicked=[],this.logoWasChanged=!1,this.processingNewLogo=!1,"undefined"==typeof this.autoStartPreparePalette&&(this.autoStartPreparePalette=!0);var f={persistence:this.logoPersistence,onFieldChanged:this.onLogoChanged.bind(this),usePlaceholderOnDelete:!1};this.logoManager.setContext(f),this.textsPrefix=this.context+".logoExtraction",this.currentStep=_.isUndefined(this.firstStep)?LogoCEWStep.SHOULD_I_EXTRACT_STEP:this.firstStep()}return a.$inject=["logoManager","consumerBiLogger","$log","$timeout","$scope"],a.prototype.$postLink=function(){this.currentStep===LogoCEWStep.CREATING_PALETTE_STEP?(this.refreshPalettePromise(),this.showPaletteCreation()):this.autoStartPreparePalette&&this.refreshPalettePromise()},a.prototype.refreshPalettePromise=function(){this.palettePromise=this.getPreparePalettePromise({logoOrigin:this.logoOrigin()})},a.prototype.getContent=function(a){return this.textsPrefix+".step"+a+".content"},a.prototype.getTitle=function(a){return this.textsPrefix+".step"+a+".title"},a.prototype.getSecondaryButtonText=function(a){return this.textsPrefix+".step"+a+".skip"},a.prototype.getPrimaryButtonText=function(a){return this.textsPrefix+".step"+a+".button"},a.prototype.setCurrentStep=function(a){this.stepButtonWasClicked[a]=!1,this.currentStep=a},a.prototype.showStepTexts=function(a){return a===this.currentStep&&!this.aboutToReplaceLogo()},a.prototype.showStep=function(a){return a===this.currentStep},a.prototype.aboutToReplaceLogo=function(){return this.currentStep===LogoCEWStep.SHOULD_I_SAVE_STEP&&(this.processingNewLogo||this.logoManager.uploadingLogo)},a.prototype.showPrimaryButton=function(a){return a===this.currentStep&&a!==LogoCEWStep.CREATING_PALETTE_STEP&&!this.aboutToReplaceLogo()},a.prototype.showSecondaryButton=function(a){return a===this.currentStep&&a!==LogoCEWStep.CREATING_PALETTE_STEP&&!this.aboutToReplaceLogo()},a.prototype.showPalettePreview=function(){return this.currentStep!==LogoCEWStep.SHOULD_I_EXTRACT_STEP&&!this.aboutToReplaceLogo()&&this.colorsAsHex},a.prototype.showWrappingCircle=function(){return this.currentStep===LogoCEWStep.CREATING_PALETTE_STEP},a.prototype.inShouldISaveStep=function(){return this.currentStep===LogoCEWStep.SHOULD_I_SAVE_STEP},a.prototype.enableEdit=function(){return this.enableReplaceLogo&&(this.currentStep===LogoCEWStep.SHOULD_I_EXTRACT_STEP||this.currentStep===LogoCEWStep.SHOULD_I_SAVE_STEP&&!this.processingNewLogo)},a.prototype.getFadeClass=function(a){return a===LogoCEWStep.CREATING_PALETTE_STEP?"fade-up":"fade-down"},a.prototype.getButtonClasses=function(a){switch(this.context){case"tour":return["a05-forward-button","tour-button"];case"builder":return["-medium",a?"p9-primary":"p9b-text-button"]}},a.prototype.clickSecondaryButton=function(a){this.stepButtonWasClicked[a]=!0,this.onSkipClick({logoExtractorStep:a}),this.updateModel(),this.onDone({logoColoration:null})},a.prototype.clickPrimaryButton=function(a){var b=this;switch(this.stepButtonWasClicked[a]=!0,this.palettePromise||this.refreshPalettePromise(),a){case LogoCEWStep.SHOULD_I_EXTRACT_STEP:this.onCreatePaletteClick({logoExtractorStep:a}),this.showPaletteCreation();break;case LogoCEWStep.SHOULD_I_SAVE_STEP:this.palettePromise.then(function(a){b.onSavePaletteClick({logoColoration:a}),b.updateModel(),b.onDone({logoColoration:a})})}},a.prototype.onLogoChanged=function(a,b,c,d,e){var f=this;if(d!==c){var g=d?d.length:0,h="edit";h=d?h:"remove",h=c?h:"add",this.consumerBiLogger.intro.infoCardAddEditRemoveInfo(a,b,g,h,this.logoClickOrigin(),e||null),this.$scope.$apply(function(){f.logoWasChanged=!0,f.processingNewLogo=!0,f.colorsAsHex=void 0}),this.refreshPalettePromise(),this.currentStep!==LogoCEWStep.SHOULD_I_EXTRACT_STEP&&this.showPaletteCreation()}},a.prototype.doneShowingPalettePreview=function(){this.currentStep=LogoCEWStep.SHOULD_I_SAVE_STEP,this.processingNewLogo=!1},a.prototype.showPaletteCreation=function(){var a=this;this.palettePromise.then(function(b){a.$timeout(function(){a.currentStep=LogoCEWStep.CREATING_PALETTE_STEP,a.colorsAsHex=void 0}),a.$timeout(function(){var c=b.colors;a.colorsAsHex=_.uniq([c.mainColor,c.secondaryColor,c.thirdColor,c.fourthColor,c.white,c.black].filter(function(a){return!!a}))})})["catch"](function(b){a.$log.error("Failed while getting palette from logo.",b)})},a.prototype.updateModel=function(){this.updateLogoInModel&&this.logoWasChanged&&this.updateLogoInModel()},a.prototype.logoOrigin=function(){return this.logoWasChanged?BIOrigins.WelcomeTour:BIOrigins.InfoCard},a.prototype.logoClickOrigin=function(){return this.currentStep===LogoCEWStep.SHOULD_I_EXTRACT_STEP?"welcomeTour-before-extraction":"welcomeTour-after-extraction"},a.prototype.$onDestroy=function(){this.logoManager.doneWithThisContext()},a}();LogoColorExtractionWizard.view="logoCEW",angular.module("siteGeneratorStaticsConsumerAppInternal").component("logoColorExtractionWizard",{templateUrl:"views/common/logo-color-extraction-wizard.html",controller:LogoColorExtractionWizard,bindings:{context:"@",firstStep:"&?",logoPersistence:"=",getPreparePalettePromise:"&",enableReplaceLogo:"=",autoStartPreparePalette:"<",updateLogoInModel:"&?",onSkipClick:"&",onCreatePaletteClick:"&",onSavePaletteClick:"&",onDone:"&"}});var ColorCircle=function(){function a(){}return a}();angular.module("siteGeneratorStaticsConsumerAppInternal").component("colorCircle",{templateUrl:"views/common/color-circle.html",controller:ColorCircle,bindings:{color:"=",number:"="}});var PalettePreview=function(){function a(a,b){var c=this;this.$timeout=a,this.$scope=b,this.timeBeforeFirstPause=600,this.timePerColorMs=700,this.$scope.$watch("$ctrl.colors",function(){c.colors&&(c.diminished=!1,c.$timeout(function(){c.diminished=!0,c.onDone()},c.timeBeforeFirstPause+c.colors.length*c.timePerColorMs))})}return a.$inject=["$timeout","$scope"],a.prototype.previewCursorClass=function(){return this.colors?"palette-preview-cursor-"+this.colors.length+"-colors":""},a}();angular.module("siteGeneratorStaticsConsumerAppInternal").component("palettePreview",{templateUrl:"views/common/palette-preview.html",controller:PalettePreview,bindings:{colors:"=",onDone:"&"}});var HiddenBackground=function(){function a(a,b,c,d,e){this.contentElementFieldManager=a,this.applicationState=b,this.$state=c,this.sectionBackgroundManager=d,this.nodeFetcher=e,this.init()}return a.$inject=["contentElementFieldManager","applicationState","$state","sectionBackgroundManager","nodeFetcher"],a.prototype.init=function(){this.node=this.nodeFetcher.getCurrentActiveNode()},Object.defineProperty(a.prototype,"showElement",{get:function(){return this.sectionBackgroundManager.isBackgroundHidden()},enumerable:!0,configurable:!0}),Object.defineProperty(a.prototype,"shouldShowHideLink",{get:function(){if(this.node){var a=this.contentElementFieldManager.getNodeFields(this.node.contentElement,this.node),b=a.filter(function(a){return a.active});return 1!==b.length}},enumerable:!0,configurable:!0}),a.prototype.replaceDesignClick=function(){this.applicationState.goToSwitchPresetMode(this.$state.name)},a.prototype.hideMediaClick=function(){this.sectionBackgroundManager.hideMedia()},a}();angular.module("siteGeneratorStaticsConsumerAppInternal").component("hiddenBackground",{templateUrl:"views/common/hidden-background.html",controller:HiddenBackground});var FieldTrack=function(){function a(){this.require="ngModel",this.scope={fieldTrack:"&"}}return a.prototype.link=function(a,b,c,d){var e=this;["input","textarea"].forEach(function(c){var f=b[0].tagName.toLowerCase()===c?b:b.find(c);f.on("focus",function(){return e.onFocus(d)}),f.on("blur",function(){return e.onBlur(d,a.fieldTrack)})})},a.prototype.onFocus=function(a){this.lastKnownValue=a.$viewValue},a.prototype.onBlur=function(a,b){var c=a.$viewValue;c!==this.lastKnownValue&&b({$old:this.lastKnownValue,$value:c}),this.lastKnownValue=c},a}();angular.module("siteGeneratorCommon").directive("fieldTrack",function(){return new FieldTrack}),angular.module("siteGeneratorCommon").component("preloaderCompleted",{templateUrl:"views/animations/preloader-completed.html"});var EmptyController=function(){function a(){}return a}();angular.module("siteGeneratorCommon").component("preloaderPublishCompleted",{templateUrl:"views/animations/preloader-publish-completed.html",bindings:{inProgress:"=",completed:"=",inverted:"="},controller:EmptyController});var builder;!function(a){var b=function(){function a(a,b){this.top=a,this.height=b}return a.prototype.getBottom=function(){return this.top+this.height},a.prototype.scale=function(b){return new a(this.top*b,this.height*b)},a}();a.OverlayLayout=b}(builder||(builder={}));var ListSpanManager=function(){function a(a,b,c,d,e,f,g){this.solutionSantaMediator=a,this.$q=b,this.renderedModelMobileAdapter=c,this.documentServicesMediator=d,this.previewScale=e,this.isMobileEditMode=f,this.sitePartTypes=g,this.listSpans=[],this.getMinPartHeight={}}return a.prototype.equals=function(a,b){return a&&b&&a.sitePart===b.sitePart&&a.node.id===b.node.id},a.prototype.setSitePartListSpans=function(a,b,c){void 0===c&&(c=function(){return 0}),this.getMinPartHeight[a]=c,this.listSpans=_.reject(this.listSpans,{sitePart:a}).concat(b)},a.prototype.getByNodeId=function(a,b){void 0===b&&(b=this.sitePartTypes.BODY);var c=_.find(this.listSpans,function(c){return 0===a.indexOf(c.node.id)&&c.sitePart===b});return _.clone(c)},a.prototype.getAll=function(){return this.listSpans},a.prototype.getAllInBody=function(){return this.getAllInSitePart(this.sitePartTypes.BODY)},a.prototype.getAllInHeader=function(){return this.getAllInSitePart(this.sitePartTypes.HEADER)},a.prototype.getAllInFooter=function(){return this.getAllInSitePart(this.sitePartTypes.FOOTER)},a.prototype.isBodyEmpty=function(){return _.isEmpty(this.getAllInBody())},a.prototype.getAllInSitePart=function(a){return _.filter(this.listSpans,{sitePart:a})},a.prototype.getLgForCalcWith=function(a){return"horizontal"===a.orientation?_.find(a.groups,function(a){return"ListFooter"===a.contentType})||SolutionManager.getMaxHeightLg(a.groups):a.groups&&_.last(a.groups)},a.prototype.getFirstLayout=function(a){return"horizontal"===a.orientation?a.groups&&_.find(a.groups,function(a){return"ListHeader"===a.contentType})||SolutionManager.getMaxHeightLg(a.groups):a.groups&&_.first(a.groups)},a.prototype.getListSpanLayout=function(a){var b=this.getFirstLayout(a),c=this.getLgForCalcWith(a);if(b){var d=this.calcLayoutGroupLayout(b).top,e=this.calcLayoutGroupLayout(c),f=e.top+e.height-d;return new builder.OverlayLayout(d,f)}return new builder.OverlayLayout(0,0)},a.prototype.getNodeTopRelativeToListSpan=function(a,b){var c=_.find(b.groups,function(b){return _.find(b.segments,function(b){return b.node&&b.node.id===a})});if(c){var d=c.getBoundingTop(),e=this.getListSpanLayout(b).top;return d-e}return 0},a.prototype.getListSpanAbsoluteLayout=function(a){var b=this.getListSpanLayout(a),c=b.height,d=b.top;switch(a.sitePart){case this.sitePartTypes.BODY:d+=this.getHeaderHeight();break;case this.sitePartTypes.FOOTER:d+=this.getHeaderHeight()+this.getBodyHeight()}return new builder.OverlayLayout(d,c)},a.prototype.moveListSpanBelowNodeId=function(a,b){var c=this.getByNodeId(a),d=this.getAllInSitePart(c.sitePart),e=_.findIndex(d,function(b){var c=b.node.id;return a===c}),f=_.findIndex(d,function(a){var c=a.node.id;return b===c}),g=e>f?f+1:f;return d.splice(g,0,d.splice(e,1)[0]),this.setSitePartListSpans(c.sitePart,d),this.rerenderFromIndex(Math.min(g,e))},a.prototype.rerenderFromIndex=function(a){void 0===a&&(a=0);var b=this.getAllInSitePart(this.sitePartTypes.BODY),c=this.getAllInSitePart(this.sitePartTypes.FOOTER),d=0;if(a>0){var e=b[a-1],f=this.getListSpanLayout(e),g=f.top,h=f.height;d=g+h}var i=b.slice(a),j=this.rerenderListSpans(i,d),k=this.rerenderListSpans(c,0);return this.$q.all([j,k])},a.prototype.setListSpanTop=function(a,b){var c=this.getListSpanLayout(a).top,d=b-c;return this.solutionSantaMediator.moveLayoutGroupArrayByOffset(a.groups,d)},a.prototype.moveListSpanByOffset=function(a,b){return this.solutionSantaMediator.moveLayoutGroupArrayByOffset(a.groups,b)},a.prototype.toggleListSpanVisibility=function(a,b){return this.solutionSantaMediator.setLayoutGroupsVisibility(a.groups,b)},a.prototype.moveListSpansByOffset=function(a,b){var c=this;return a.map(function(a){return c.moveListSpanByOffset(a,b)})},a.prototype.setPlaceholder=function(a,b){this.solutionSantaMediator.setPlaceholder(a,b)},a.prototype.clearPlaceholder=function(){this.solutionSantaMediator.clearPlaceholder()},a.prototype.calcLayoutGroupLayout=function(a){var b=a.getBoundingTop(),c=a.getBoundingHeight();return new builder.OverlayLayout(b,c)},a.prototype.getLayoutGroupAbsoluteLayout=function(a){var b=this.calcLayoutGroupLayout(a),c=b.height,d=b.top;switch(a.sitePart){case this.sitePartTypes.BODY:d+=this.getHeaderHeight();break;case this.sitePartTypes.HEADER:"footer"===a.page&&(d+=this.getHeaderHeight()+this.getBodyHeight())}return new builder.OverlayLayout(d,c)},a.prototype.isInViewport=function(a,b){var c=this.documentServicesMediator.getSiteScroll().y,d=c+$(Overlay.ViewportSelector).height();return d>=a&&b>=c},a.prototype.getLayoutGroupsInViewport=function(){var a=this,b=this.previewScale.getScale(),c=this.getAll();return _(c).map("groups").flatten(!0).filter(function(c){var d=a.getLayoutGroupAbsoluteLayout(c).scale(b),e=d.height,f=d.top;return a.isInViewport(f,f+e)}).value()},a.prototype.getHeaderHeight=function(){return this.getSitePartHeight(this.sitePartTypes.HEADER)},a.prototype.getBodyHeight=function(){return this.getSitePartHeight(this.sitePartTypes.BODY)},a.prototype.getListSpanHeightByNodeId=function(a){return this.getListSpanAbsoluteLayout(this.getByNodeId(a)).height},a.prototype.getSegmentByNodeId=function(a,b){var c=this.getByNodeId(a,b);if(c)return _(c.groups).map("segments").flatten().value().find(function(b){return b.node.id===a})},a.prototype.getSitePartHeight=function(a){var b=this,c=_(this.listSpans).filter({sitePart:a}).sum(function(a){return b.getListSpanLayout(a).height}),d=this.getMinPartHeight[a]&&this.getMinPartHeight[a]()||0;return Math.max(c,d)},a.prototype.rerenderListSpans=function(a,b){var c=this;void 0===b&&(b=0);var d=b,e=a.map(function(a){var b=c.getListSpanLayout(a).height,e=c.setListSpanTop(a,d);return d+=b,e});return this.$q.all(e)},a}();ListSpanManager.MinBodyHeight=505;var utils;!function(a){function b(a){var c=!1;return{then:function(d,e,f){return b(a.then(d&&function(a){return!c&&d(a)},e&&function(a){return!c&&e(a)},f&&function(a){return!c&&f(a)}))},"catch":function(d){return b(a["catch"](d&&function(a){return!c&&d(a)}))},"finally":function(d){return b(a["finally"](d&&function(){return!c&&d()}))},stop:function(){c=!0}}}a.stoppable=b}(utils||(utils={}));var BaseDropDown=function(){function a(a){this.timeout=a,this.showDropdown=!1}return a.prototype.showDropDown=function(){this.showDropdown=!0},a.prototype.hideDropDown=function(){this.showDropdown=!1},a.prototype.isShowDropDown=function(){return this.showDropdown},a.prototype.isDropdownClicked=function(a,b){for(var c=0;c<b.length;c++)if(0!==$(a).closest(b[c]).length)return!0;return!1},a.prototype.onDropdownClose=function(){document.body.onclick=null},a.prototype.closeWhenClickOutside=function(a,b){var c=this;document.body.onclick=function(d){var e=d.target;if(e){var f=c.isDropdownClicked(e,a);f||(c.timeout(function(){b?b():c.hideDropDown()}),c.onDropdownClose())}}},a}();angular.module("siteGeneratorStaticsConsumerAppInternal").directive("adjustToScale",["previewScale",function(a){return{restrict:"A",scope:!1,link:function(b,c,d){function e(a){var b=d.baseHeight||c.height(),e=d.baseWidth||c.width(),f=b*a,g=e*a;c.css({width:g,height:f})}b.$watch(function(){return a.getScale()},function(a){return e(a)})}}}]);var DesignPanel=function(){function a(a,b,c,d,e,f,g,h,i,j,k,l,m,n,o,p,q){var r=this;this.initService=a,this.applicationState=b,this.themeChooser=c,this.CcDialogBuilder=d,this.contentManager=e,this.designKitManager=f,this.consumerBiLogger=g,this.obMonitoring=h,this.storyServices=i,this.$element=j,this.flags=k,this.$translate=l,this.$timeout=m,this.assistantManager=n,this.previewScale=o,this.kitUtils=p,this.$scope=q,this.unsettingKitIsInView=!1,this.unsettingKitId="",this.settingKitId="",this.shouldShowMenu=!1,a.loaded().then(function(){return e.initialize(i.story)}).then(function(){return c.initialize()}).then(function(){return r.kitUtils.calculateKits()}).then(function(a){r.colorThemeKits=a,o.setScaleFactor(PreviewScale.MinScaleFactor)})}return a.$inject=["initService","applicationState","themeChooser","CcDialogBuilder","contentManager","designKitManager","consumerBiLogger","obMonitoring","storyServices","$element","flags","$translate","$timeout","assistantManager","previewScale","kitUtils","$scope"],a.prototype.scrollInsideContainer=function(a,b,c){a.animate({scrollTop:b},c)},a.prototype.scrollToSelectedKit=function(a){var b=this;this.assistantManager.getCustomTaskData("scrollToSelectedKit")!==!1&&this.$timeout(function(){var c=b.$element.find(".cc-panel-body"),d=Math.max(0,b.$element.find(".kit-option.selected")[0].offsetTop-12),e="animated"===a?1e3:0;b.scrollInsideContainer(c,d,e)},250)},a.prototype.closeDesignPanel=function(){var a=this;this.$scope.$applyAsync(function(){a.applicationState.goToBuilder(),a.consumerBiLogger.siteDesign.designWindowWasClosed("design")})},a.prototype.openDesignPanelHelp=function(){this.CcDialogBuilder.showSupportIframe(this.$translate("help.design.menu"),CONSUMER_DIALOGS.DESIGN_PANEL_HELP)},a.prototype.setKit=function(a,b){var c=this;this.obMonitoring.mark({name:"changeDesignKit"}),this.unsettingKitIsInView=this.isSelectedInView(),this.unsettingKitId=this.themeChooser.getActiveTheme("mainKit").id,this.settingKitId=a.id,this.consumerBiLogger.siteDesign.clickOnDesiredDesign(this.unsettingKitId,b,"click on design",this.settingKitId),this.designKitManager.setActiveMainKit(this.settingKitId).then(function(){c.consumerBiLogger.siteDesign.designChangeSuccess(c.unsettingKitId,b,"click on design",c.settingKitId)})["finally"](function(){c.$timeout(function(){c.unsettingKitId="",c.settingKitId=""},10),c.$timeout(function(){return c.scrollToSelectedKit("animated")},300),c.obMonitoring.measure({name:"changeDesignKit"})})},a.prototype.isSelectedInView=function(){var a=!1,b=this.$element.find("cc-panel-frame .cc-scrollbar"),c=this.$element.find(".selected.kit-option"),d=b.scrollTop(),e=d+b.outerHeight(),f=c.position();if(f){var g=c.position().top,h=g+c.outerHeight();a=h>d&&e>g}return a},a.prototype.customizeKit=function(){this.applicationState.goToDesignKitMode(),this.consumerBiLogger.siteDesign.customizeDesignPanelIsLoaded()},a.prototype.isActiveKit=function(a){return this.settingKitId===a.id?!1:this.unsettingKitId===a.id?!0:this.themeChooser.getActiveTheme("mainKit")===a},a.prototype.getKitDisplayColor=function(a){return this.themeChooser.getColorByIndexInPalette(a,2)},Object.defineProperty(a.prototype,"isMenuVisible",{get:function(){if(this.assistantManager.isInActiveTask()){var a=this.assistantManager.getCustomTaskData("showSiteDesignMenu");if(void 0!==a)return a}return this.shouldShowMenu},enumerable:!0,configurable:!0}),a.prototype.showSiteDesignMenu=function(){this.shouldShowMenu=!0},a.prototype.hideSiteDesignMenu=function(){this.shouldShowMenu=!1},a}();angular.module("siteGeneratorStaticsConsumerAppInternal").component("designPanel",{templateUrl:"views/design/design-panel.html",controller:DesignPanel});var DesignPanelKit=function(){function a(a,b,c,d,e,f,g,h,i,j,k,l,m,n,o,p){var q=this;this.flags=a,this.$scope=b,this.$translate=c,this.previewScale=d,this.applicationState=e,this.consumerBiLogger=f,this.CcDialogBuilder=g,this.colorationUtils=h,this.fontCustomizationService=i,this.undoRedo=j,this.designKitManager=k,this.animationUtils=l,this.animationKit=m,this.backgroundScrollService=n,this.pagesManager=o,this.fontUtils=p,h.initialize().then(function(){q.kitColors=q.designKitManager.getPaletteColors(),q.selectedFontData=q.designKitManager.getActiveFontThemeAsThumbnail(),q.isLoaded=!0,q.kit=q.designKitManager.getActiveTheme(),q.$scope.$watch(function(){return q.designKitManager.getActiveTheme()},function(a){return q.kit=a}),q.$scope.$watch(function(){return q.designKitManager.getActiveFontTheme()},function(a){return q.selectedFontData=q.designKitManager.getActiveFontThemeAsThumbnail()}),q.$scope.$watch(function(){return q.designKitManager.getPaletteColors()},function(a){return q.kitColors=a})})}return a.$inject=["flags","$scope","$translate","previewScale","applicationState","consumerBiLogger","CcDialogBuilder","colorationUtils","fontCustomizationService","undoRedo","designKitManager","animationUtils","animationKit","backgroundScrollService","pagesManager","fontUtils"],a.prototype.getKitName=function(){return this.kit&&this.kit.displayName||""},a.prototype.close=function(){var a=this;this.$scope.$applyAsync(function(){a.previewScale.setScaleFactor(PreviewScale.MaxScaleFactor),a.applicationState.goToBuilder(),a.consumerBiLogger.siteDesign.designWindowWasClosed("customize")})},a.prototype.onHelp=function(){this.CcDialogBuilder.showSupportIframe(this.$translate("help.design.panel-kit"),CONSUMER_DIALOGS.DESIGN_PANEL_HELP)},a.prototype.backToDesign=function(){this.applicationState.goToDesignMode(),this.consumerBiLogger.siteDesign.designPanelIsLoaded("back from customize")},a.prototype.goToFontsPanel=function(){this.applicationState.goToFontsPanel(BIOrigins.DesignPanel)},a.prototype.goToAnimationPanel=function(){this.applicationState.goToAnimationPanel(BIOrigins.DesignPanel)},a.prototype.getActiveAnimation=function(){return this.animationUtils.getActivePatternLabelForSite()},a.prototype.openNewColorationPanel=function(){return this.consumerBiLogger.siteDesign.customizeDesignColorPaletteMode(BIOrigins.DesignPanel),this.applicationState.goToColorationPanel()},a.prototype.is6ColorsPalette=function(){return 6===this.colorationUtils.numOfColors(this.kitColors)},a.prototype.kitHasOverrides=function(){return this.kit?this.designKitManager.isKitOveridden():!1},a.prototype.onReset=function(){var a=this;this.consumerBiLogger.siteDesign.clickOnResetDesign(!1),this.designKitManager.setActiveMainKit(this.kit.id).then(function(){a.consumerBiLogger.siteDesign.resetDesignSuccess(!1),a.selectedFontData=a.designKitManager.getActiveFontThemeAsThumbnail(),a.kitColors=a.designKitManager.getActiveKitDefaultColors()})},a}();angular.module("siteGeneratorStaticsConsumerAppInternal").component("designPanelKit",{templateUrl:"views/design/design-panel-kit.html",controller:DesignPanelKit});var ColorationPanel=function(){function a(a,b,c,d,e,f,g,h,i,j,k,l,m,n){var o=this;this.$translate=a,this.applicationState=b,this.CcDialogBuilder=c,this.colorationUtils=d,this.modelTree=e,this.mediaOverrideManager=f,this.CONSUMER_DIALOGS=g,this.consumerDialogs=h,this.$scope=i,this.consumerBiLogger=j,this.previewScale=k,this.undoRedo=l,this.logoHandler=m,this.flags=n,this.isScrolling=!1,this.isReadyToBeDisplayed=!1,this.dialogOnShowing=function(){o.showBackdrop=!0,$(document.body).addClass(coloration.PALETTE_DIALOG_OPEN_CLASS)},this.onColorSelected=function(){o.colorationUtils.removePalettes()},this.onPaletteListGenerated=function(){o.showLoader=!1,o.showBackdrop=!1,o.scrollToSelectedPalette()},d.initialize().then(function(){o.$scope.$watch(function(){return o.colorationUtils.getMainColor()},function(a){return o.mainColor=a}),k.setScaleFactor(PreviewScale.MinScaleFactor),o.isReadyToBeDisplayed=!0,o.extractLogoColorsIfNeeded()})}return a.$inject=["$translate","applicationState","CcDialogBuilder","colorationUtils","modelTree","mediaOverrideManager","CONSUMER_DIALOGS","consumerDialogs","$scope","consumerBiLogger","previewScale","undoRedo","logoHandler","flags"],a.prototype.$onInit=function(){this.applicationState.isSilent()||this.colorationUtils.willLoadPalettes()&&this.showLoadingAnimation()},a.prototype.extractLogoColorsIfNeeded=function(){var a=this,b=this.modelTree.getGeneralInformation(),c=b.getArgsMatchingPolicy().Logo&&this.mediaOverrideManager.getCurrentSelectedMediaPreviewType(b)===cc.MediaPreviewType.Clipart;if(c&&!this.colorationUtils.getLogoPalette()){var d=b.contentElement.getFieldValue("Logo"),e=d.value[0];this.logoHandler.lazyGetLogoColorationPromise(e).then(function(b){return a.colorationUtils.setLogoColors(b)})}},a.prototype.showLoadingAnimation=function(){this.showBackdrop=!0,this.showLoader=!0},a.prototype.backToDesignKit=function(){return this.flags.siteDesignKitMenu?void this.applicationState.goToDesignMode():void this.applicationState.goToDesignKitMode()},a.prototype.openHelp=function(){this.CcDialogBuilder.showSupportIframe(this.$translate("help.design.coloration"),this.CONSUMER_DIALOGS.COLORATION_PANEL_HELP)},a.prototype.closePanel=function(){var a=this;this.$scope.$applyAsync(function(){a.previewScale.setScaleFactor(PreviewScale.MaxScaleFactor),a.applicationState.goToBuilder()})},a.prototype.changeMainColor=function(a){this.consumerBiLogger.siteDesign.customizeDesignColorPaletteModeChangeColorMainClick(),this.openChangeColorDialog(a,coloration.ePaletteColorPickerStates.mainColor)},a.prototype.goToAdvancedPaletteEditing=function(){var a=this;this.consumerBiLogger.siteDesign.customizeDesignColorPaletteModeAdvancedEditingColorClick(),this.applicationState.goToAdvancedPaletteEditing().then(function(){return a.consumerBiLogger.siteDesign.customizeDesignColorPaletteModeAdvancedEditingColorClickSuccess()})},a.prototype.scrollToSelectedPalette=function(){var a=this;if(!this.isScrolling){var b=$("coloration-panel .cc-panel-body"),c=b.find("palette-list kit-palette.-selected"),d=b.find(".palettes-header-spacer"),e=$("coloration-panel .p18-panel-footer");if(0!==c.length){var f=c.outerHeight(!0),g=d.outerHeight(!0)||0,h=c.offset().top;if(h+f>e.offset().top){var i=h-(b.offset().top+g)-f;this.isScrolling=!0,b.animate({scrollTop:i},1e3,function(){return a.isScrolling=!1})}}}},a.prototype.openChangeColorDialog=function(a,b){var c=this;return this.consumerDialogs.showDialog(ConsumerDialogTypes.PALETTE_COLOR_DIALOG_POPUP,this.dialogOnShowing,null,{color:a,colorType:b,onColorSelected:this.onColorSelected}).then(function(a){return a?(c.showLoader=!0,c.consumerBiLogger.siteDesign.customizeDesignColorPaletteModeColorSelect(!1,a.origin),c.colorationUtils.switchMainColor(a.color).then(function(){c.undoRedo.captureOperation(!1,!0),c.consumerBiLogger.siteDesign.customizeDesignColorPaletteModeColorSelectSuccess(!1,a.origin)})):void c.onPaletteListGenerated()})["catch"](function(){return c.onPaletteListGenerated()})},a.prototype.getLogoColors=function(){return this.colorationUtils.getLogoPalette().colors},a.prototype.selectLogoPalette=function(){var a=this;if(!this.isLogoPaletteSelected()){var b=Date.now(),c=this.colorationUtils.getLogoPalette().numOfColors,d=this.colorationUtils.getNumPalettes();this.consumerBiLogger.siteDesign.clickOnDesiredPaletteFromCustomizePallete(c,d,"logo",-1,"customize-palette-panel"),this.colorationUtils.useLogoColors().then(function(){var e=Date.now()-b;a.consumerBiLogger.siteDesign.clickOnDesiredPaletteFromCustomizePalleteSuccess(e,c,d,"logo",-1,"customize-palette-panel"),a.undoRedo.captureOperation(!1,!0)})}},a.prototype.isLogoPaletteAvailable=function(){return!!this.colorationUtils.getLogoPalette()},a.prototype.isLogoPaletteSelected=function(){return this.colorationUtils.getActivePaletteIndex()===coloration.LOGO_PALETTE_INDEX},a}();angular.module("siteGeneratorStaticsConsumerAppInternal").component("colorationPanel",{templateUrl:"views/design/coloration-panel.html",controller:ColorationPanel});var ColorationPanelOverlay=function(){function a(){}return a}();angular.module("siteGeneratorStaticsConsumerAppInternal").component("colorationPanelOverlay",{templateUrl:"views/design/coloration-panel-overlay.html",controller:ColorationPanelOverlay,bindings:{showBackdrop:"<",showLoader:"<",loaderText:"@"}});var __assign=this&&this.__assign||Object.assign||function(a){for(var b,c=1,d=arguments.length;d>c;c++){b=arguments[c];for(var e in b)Object.prototype.hasOwnProperty.call(b,e)&&(a[e]=b[e])}return a},AdvancedPaletteEditing=function(){function a(a,b,c,d,e,f,g,h,i,j,k){var l=this;this.applicationState=a,this.colorationUtils=b,this.$q=c,this.$timeout=d,this.flags=e,this.consumerDialogs=f,this.$window=g,this.consumerBiLogger=h,this.$scope=i,this.previewScale=j,this.undoRedo=k,this.ARROW_BUTTON_CLASS="arrow-down",this.colorsHaveBeenChanged=!1,this.showLoader=!1,this.colorsStateEnum=coloration.ePaletteColorPickerStates,this.dialogOnShowing=function(a,b,c){$(document.body).addClass(coloration.PALETTE_DIALOG_OPEN_CLASS);var d=$(a.currentTarget),e=c.find("md-dialog");l.$timeout(function(){e.css(l.getDialogCoords(d,e)),l.$timeout(function(){e.addClass("visible")})},500)},this.dialogOnRemoving=function(){$(document.body).removeClass(coloration.PALETTE_DIALOG_OPEN_CLASS)},b.initialize().then(function(){l.originalColoration=b.getCurrentState(),i.$watch(function(){return b.getActivePalette().colors},function(a){l.colors=__assign({},a),l.checkReadability()}),j.setScaleFactor(PreviewScale.MinScaleFactor)})}return a.$inject=["applicationState","colorationUtils","$q","$timeout","flags","consumerDialogs","$window","consumerBiLogger","$scope","previewScale","undoRedo"],a.prototype.closePanel=function(){var a=this;this.$scope.$applyAsync(function(){a.previewScale.setScaleFactor(PreviewScale.MaxScaleFactor),a.applicationState.goToBuilder(!0)})},a.prototype.backToColoration=function(){this.applicationState.goToColorationPanel()},a.prototype.changeColorsByHex=function(){var a=this;this.consumerBiLogger.siteDesign.customizeDesignColorPaletteModeColorSelect(!0,"hex"),this.changeColors().then(function(){return a.consumerBiLogger.siteDesign.customizeDesignColorPaletteModeColorSelectSuccess(!0,"hex")})},a.prototype.changeColors=function(){var a=this;return this.$timeout(function(){a.colorsHaveBeenChanged=!0;var b=a.colorationUtils.setCustomColors(a.colors);return a.checkReadability(),a.undoRedo.captureOperation(!1,!0),b})},a.prototype.getDialogCoords=function(a,b){var c=a.offset(),d=a.outerHeight(!0)/2,e=b.outerHeight(!0),f=48,g=6,h=f+g,i=6,j={top:c.top+d-h,left:c.left+a.width()+g+i};return j.top+e>this.$window.innerHeight&&(j.top=c.top-e+d+h,b.addClass(this.ARROW_BUTTON_CLASS)),j},a.prototype.openColorPicker=function(a,b,c){var d=this,e={color:b,colorType:c,state:ePaletteColorDialogStates.ADVANCED,$event:a,layout:"left right"};this.consumerDialogs.showDialog(ConsumerDialogTypes.PALETTE_COLOR_DIALOG_POPUP,this.dialogOnShowing,null,e).then(function(a){a&&(d.colors[coloration.ePaletteColorPickerStates[c]]=a.color,d.consumerBiLogger.siteDesign.customizeDesignColorPaletteModeColorSelect(!0,a.origin),d.changeColors().then(function(){return d.consumerBiLogger.siteDesign.customizeDesignColorPaletteModeColorSelectSuccess(!0,a.origin)}))})},a.prototype.resetColors=function(){var a=this;this.consumerBiLogger.siteDesign.clickOnResetDesign(!0),this.$timeout(function(){a.colorationUtils.restoreState(a.originalColoration).then(function(){return a.consumerBiLogger.siteDesign.resetDesignSuccess(!0)}),a.colors=__assign({},a.colorationUtils.getActivePalette().colors),a.checkReadability(),a.colorsHaveBeenChanged=!1,a.undoRedo.captureOperation(!1,!0)})},a.prototype.shouldShowReset=function(){return this.colorsHaveBeenChanged},a.prototype.checkReadability=function(){var a=this.areColorsReadable;this.areColorsReadable=this.colorationUtils.areColorsReadable(this.colors),a&&!this.areColorsReadable&&this.consumerBiLogger.siteDesign.customizeDesignAdvancedColorsAreHardToReadDisplayed();
},a.prototype.fixColors=function(){var a=this;this.consumerBiLogger.siteDesign.customizeDesignAdvancedUserClicksFixColors(),this.showLoader=!0,this.$q.all([this.$timeout(1e3),this.$q.resolve().then(function(){return a.colors=a.colorationUtils.makeColorsReadable(a.colors),a.changeColors()})]).then(function(){return a.showLoader=!1}).then(function(){return a.areColorsReadable&&a.consumerBiLogger.siteDesign.customizeDesignAdvancedFixColorsSuccess()})},a}();angular.module("siteGeneratorStaticsConsumerAppInternal").component("advancedPaletteEditing",{templateUrl:"views/design/advanced-palette-editing.html",controller:AdvancedPaletteEditing});var PaletteColor=function(){function a(a){var b=this;this.editableColor={value:this.color},a.$watch(function(){return b.color},function(a,c){a!==c&&(b.editableColor.value=a)})}return a.$inject=["$scope"],a.prototype.colorChange=function(a){"#"===a[0]&&"#"===a[1]&&(this.editableColor.value=a.slice(1,a.length),this.setColor())},a.prototype.selectColorText=function(a){var b=a.target,c=0;"#"===b.value[0]&&(c=1),b.setSelectionRange(c,b.value.length)},a.prototype.setColor=function(){this.color!==this.editableColor.value&&(this.isColorValid(this.editableColor.value)&&("#"!==this.editableColor.value[0]&&(this.editableColor.value="#"+this.editableColor.value),this.color=this.editableColor.value,this.onTextChange({color:this.color})),this.editableColor.value=this.color)},a.prototype.isColorValid=function(a){return/^#?[0-9A-F]{6}$/i.test(a)},a}();angular.module("siteGeneratorStaticsConsumerAppInternal").component("paletteColor",{templateUrl:"views/design/palette-color.html",controller:PaletteColor,bindings:{label:"@",color:"=",onIconClick:"&",onTextChange:"&"}});var PaletteList=function(){function a(a,b,c,d){var e=this;this.$scope=a,this.colorationUtils=b,this.consumerBiLogger=c,this.undoRedo=d,this.palettes=[],this.customPalette=null,this.isCustomSelected=!1,this.selectedIndex=-1,this.onListAnimationEnd=function(){e.onAnimationEnd&&(e.onAnimationEnd(),e.$scope.$$phase||e.$scope.$apply())},b.initialize().then(function(){e.showAnimation=b.willLoadPalettes(),a.$watch(function(){return b.getPalettes()},function(a,b){a!==b&&(e.showAnimation=!0),e.palettes=a}),a.$watch(function(){return b.getCustomPalette()},function(a){return e.customPalette=a}),a.$watch(function(){return b.getActivePaletteIndex()},function(a){e.selectedIndex=a,e.isCustomSelected=a===coloration.CUSTOM_PALETTE_INDEX})})}return a.$inject=["$scope","colorationUtils","consumerBiLogger","undoRedo"],a.prototype.select=function(a){var b=this;if(a!==this.selectedIndex){var c=this.palettes[a],d=this.customPalette?1:0,e=this.colorationUtils.getNumPalettes(),f=Date.now();this.consumerBiLogger.siteDesign.clickOnDesiredPaletteFromCustomizePallete(c.numOfColors,e,c.creator,d+a,BIOrigins.ColorationPanel),this.colorationUtils.setActivePaletteIndex(a).then(function(){return b.consumerBiLogger.siteDesign.clickOnDesiredPaletteFromCustomizePalleteSuccess(Date.now()-f,c.numOfColors,e,c.creator,d+a,BIOrigins.ColorationPanel)}),this.undoRedo.captureOperation(!1,!0)}},a.prototype.selectCustom=function(){var a=this;if(!this.isCustomSelected){var b=this.colorationUtils.getNumPalettes(),c=Date.now();this.consumerBiLogger.siteDesign.clickOnDesiredPaletteFromCustomizePallete(this.customPalette.numOfColors,b,this.customPalette.creator,0,BIOrigins.ColorationPanel),this.colorationUtils.setActivePaletteIndex(coloration.CUSTOM_PALETTE_INDEX).then(function(){return a.consumerBiLogger.siteDesign.clickOnDesiredPaletteFromCustomizePalleteSuccess(Date.now()-c,a.customPalette.numOfColors,b,a.customPalette.creator,0,BIOrigins.ColorationPanel)}),this.undoRedo.captureOperation(!1,!0)}},a}();angular.module("siteGeneratorStaticsConsumerAppInternal").component("paletteList",{templateUrl:"views/design/palette-list.html",controller:PaletteList,bindings:{onAnimationEnd:"&"}});var KitPalette=function(){function a(a){var b=this;this.$scope=a,a.$watch(function(){return b.kitColors},function(a){var c=a?[a.mainColor,a.secondaryColor,a.thirdColor,a.fourthColor,a.white,a.black]:[];b.colors=c.filter(function(a){return null!=a})})}return a.$inject=["$scope"],a}();angular.module("siteGeneratorStaticsConsumerAppInternal").component("kitPalette",{templateUrl:"views/design/kit-palette.html",controller:KitPalette,bindings:{kitColors:"<",isSelectable:"<",isSelected:"<"}});var HexInput=function(){function a(a){var b=this;this.editableColor={value:this.color},a.$watch(function(){return b.color},function(a,c){a!==c&&(b.editableColor.value=a)})}return a.$inject=["$scope"],a.prototype.colorChange=function(a){"#"===a[0]&&"#"===a[1]&&(this.editableColor.value=a.slice(1,a.length),this.setColor()),this.onTextChanging&&this.onTextChanging({color:a})},a.prototype.selectColorText=function(a){var b=a.target,c=0;"#"===b.value[0]&&(c=1),b.setSelectionRange(c,b.value.length)},a.prototype.setColor=function(){this.color!==this.editableColor.value&&(a.isColorValid(this.editableColor.value)?("#"!==this.editableColor.value[0]&&(this.editableColor.value="#"+this.editableColor.value),this.color=this.editableColor.value,this.onTextChange({color:this.color})):this.onTextFixed&&this.onTextFixed({color:this.color}),this.editableColor.value=this.color)},a.isColorValid=function(a){return/^#?[0-9A-F]{6}$/i.test(a)},a}();angular.module("siteGeneratorStaticsConsumerAppInternal").component("hexInput",{templateUrl:"views/design/hex-input.html",controller:HexInput,bindings:{color:"=",onTextChange:"&",onTextChanging:"&?",onTextFixed:"&?"}});var PaletteColorPicker=function(){function a(){}return a.prototype.colorClick=function(a){this.selectedColor=a.color,this.onColorSelected&&this.onColorSelected({selection:a})},a.prototype.placeholderClick=function(){this.onPlaceholderClick&&this.onPlaceholderClick()},a.prototype.isSelected=function(a){return this.selectedColor&&a.color&&this.selectedColor.toUpperCase()===a.color.toUpperCase()},a}();angular.module("siteGeneratorStaticsConsumerAppInternal").component("paletteColorPicker",{templateUrl:"views/design/palette-color-picker.html",controller:PaletteColorPicker,bindings:{showAddColor:"<",colors:"<",onColorSelected:"&",selectedColor:"<",onPlaceholderClick:"&?",colorsSize:"@"}});var ColorationModeSelector=function(){function a(a,b,c,d,e,f){var g=this;this.undoRedo=a,this.$scope=b,this.$translate=c,this.colorationUtils=d,this.consumerBiLogger=e,this.flags=f,this.value=0,d.initialize().then(function(){g.$scope.$watch(function(){return d.getColorationMode()},function(a){return g.value=a})}),this.populateDropdownItems()}return a.$inject=["undoRedo","$scope","$translate","colorationUtils","consumerBiLogger","flags"],a.prototype.populateDropdownItems=function(){this.dropdownItems=[{label:this.$translate("design.coloration.coloration-mode-selector.dropdown.light-mode"),value:coloration.ColorationMode.light},{label:this.$translate("design.coloration.coloration-mode-selector.dropdown.dark-mode"),value:coloration.ColorationMode.dark}]},Object.defineProperty(a.prototype,"dropdownValue",{get:function(){var a=this;return this.dropdownItems.find(function(b){return b.value===a.value})},set:function(a){},enumerable:!0,configurable:!0}),a.prototype.onDropdownSelectionChange=function(a){var b=this;this.consumerBiLogger.siteDesign.customizeDesignChangeDarkLightMode(),this.colorationUtils.setColorationMode(a.value).then(function(){return b.consumerBiLogger.siteDesign.customizeDesignChangeDarkLightModeSuccess()}),this.undoRedo.captureOperation(!1,!0)},a}();angular.module("siteGeneratorStaticsConsumerAppInternal").component("colorationModeSelector",{templateUrl:"views/design/coloration-mode-selector.html",controller:ColorationModeSelector});var PaletteColorDialog=function(){function a(a,b,c,d,e,f,g,h,i,j){var k=this;this.$scope=a,this.$mdDialog=b,this.chroma=c,this.colorationUtils=d,this.$filter=e,this.colorType=g,this.selectedColor=f,this.showReturnButton=!1,this.state=h,this.layout=i,this.onColorSelected=j,this.$scope.$on("$stateChangeStart",function(){k.$mdDialog.destroy()}),d.initialize().then(function(){return k.colors=k.getColors()})}return a.$inject=["$scope","$mdDialog","chroma","colorationUtils","$filter","color","colorType","state","layout","onColorSelected"],a.prototype.getColors=function(){var a=this,b=this.colorationUtils.getIndustryMainColors().sort(function(b,c){var d=a.chroma(b).hsl()[2]-a.chroma(c).hsl()[2];return isNaN(d)?-1:d}).map(function(a){return{color:a,origin:"suggestion"}}),c=this.colorationUtils.getRecentColors().filter(function(a){return!b.find(function(b){return b.color===a})}).slice(0,4).reverse().map(function(a){return{color:a,origin:"user created"}}),d=b.concat(c);return d.find(function(b){return b.color===a.selectedColor})||(d.splice(b.length-1,1),d.unshift({color:this.selectedColor,origin:"user created"})),d},Object.defineProperty(a.prototype,"colorTypeName",{get:function(){switch(this.colorType){case coloration.ePaletteColorPickerStates.mainColor:return"main";case coloration.ePaletteColorPickerStates.secondaryColor:return"secondary";case coloration.ePaletteColorPickerStates.thirdColor:return"third";case coloration.ePaletteColorPickerStates.fourthColor:return"fourth";case coloration.ePaletteColorPickerStates.white:return"light";case coloration.ePaletteColorPickerStates.black:return"dark"}},enumerable:!0,configurable:!0}),a.prototype.getParagraph=function(){if(angular.isUndefined(this._paragraph)){var a=void 0;switch(this.colorType){case coloration.ePaletteColorPickerStates.white:a=this.$filter("translate")("design.coloration.generic.light"),this._paragraph=this.$filter("translate")("design.coloration.palettecolordialog.paragrpah",{colorType:a});break;case coloration.ePaletteColorPickerStates.black:a=this.$filter("translate")("design.coloration.generic.dark"),this._paragraph=this.$filter("translate")("design.coloration.palettecolordialog.paragrpah",{colorType:a});break;default:this._paragraph=""}}return this._paragraph},a.prototype.isAdvancedMode=function(){return this.state===ePaletteColorDialogStates.ADVANCED},a.prototype.onReturn=function(){this.state=ePaletteColorDialogStates.NORMAL,this.showReturnButton=!1},a.prototype.onClose=function(){this.$mdDialog.hide()},a.prototype.colorSelected=function(a){this.onColorSelected(),this.$mdDialog.hide(a),this.selectedColor=a.color,this.isAdvancedMode()&&this.colorationUtils.addColorToRecent(a.color)},a.prototype.placeholderClick=function(){this.state=ePaletteColorDialogStates.ADVANCED,this.showReturnButton=!0},a}(),ePaletteColorDialogStates;!function(a){a[a.NORMAL=0]="NORMAL",a[a.ADVANCED=1]="ADVANCED"}(ePaletteColorDialogStates||(ePaletteColorDialogStates={}));var AdvancedColorPicker=function(){function a(a,b,c,d){var e=this;this.$timeout=a,this.$element=b,this.$scope=c,this.$q=d,this.hexIsValid=!0,this.eventAPI={onChange:function(a,b,c){return e.colorPickerChange()}},this.options={alpha:!1,format:"hex",inline:!0},this.init()}return a.$inject=["$timeout","$element","$scope","$q"],a.prototype.init=function(){var a=this;this.hueHandle=this.$element.find("[data-handle]"),this.hue=this.$element.find("[data-hue]"),this.handleTransitionIfInDialog(),this.$timeout(function(){a.originalHue=a.api.getElement().find(".color-picker-hue"),a.$timeout(function(){a.updateOriginalColorpickerHue().then(function(){a.inTransition||(a.loaded=!0)})})}),$(document).off("mousemove.consumer").on("mousemove.consumer",function(b){return a.changeHue(b)}),$(document).off("mouseup.consumer").on("mouseup.consumer",function(b){return a.changedHue()})},a.prototype.handleTransitionIfInDialog=function(){var a=this;this.$timeout(function(){a.updateOriginalColorpickerHue().then(function(){a.loaded=!0})})},a.prototype.updateOriginalColorpickerHue=function(){var a=this,b=this.$q.defer();return this.api.getScope().AngularColorPickerController.huePosUpdate(),this.$timeout(function(){a.placeHueHandler(),b.resolve()}),b.promise},Object.defineProperty(a.prototype,"hueContainerLeft",{get:function(){return this.hue.offset().left},enumerable:!0,configurable:!0}),a.prototype.changeHue=function(a){var b=this;if("mousedown"===a.type&&a.target===this.hue[0])this.changingHue=!0;else if(!this.changingHue)return;0!==a.which&&(this.$timeout(function(){b.originalHue.triggerHandler({type:"click",pageY:b.calculatePageY(a)})}),this.hueHandle.css("left",this.getOffsetLeft(a)),this.colorOrigin="colorpicker")},a.prototype.changedHue=function(){this.changingHue=!1},a.prototype.placeHueHandler=function(){this.hueHandle.css({left:this.getOriginalHuePosition()})},a.prototype.calculatePageY=function(a){var b=this.getOffsetLeft(a),c=b/this.$element.width(),d=this.originalHue.height()*c,e=this.originalHue.offset().top+d;return e},a.prototype.getOriginalHuePosition=function(){var a=this.originalHue.find(".color-picker-slider").position().top/this.originalHue.height(),b=this.hue.width()*a;return b},a.prototype.getOffsetLeft=function(a){var b=Math.max(a.pageX-this.hueContainerLeft,0),c=Math.min(b,this.hue.width());return c},a.prototype.textChange=function(a){var b=this;this.$timeout(function(){b.placeHueHandler()},50)},a.prototype.onTextFixed=function(){var a=this;this.$timeout(function(){a.hexIsValid=!0},100)},a.prototype.textChanging=function(a){this.hexIsValid=HexInput.isColorValid(a),this.colorOrigin="hex"},a.prototype.colorPickerChange=function(){this.colorOrigin="colorpicker"},a.prototype.confirmClick=function(){this.hexIsValid&&this.onColorSelected({selection:{color:this.selectedColor,origin:this.colorOrigin}})},a.prototype.cancelClick=function(){this.onCancel&&this.onCancel()},a}();angular.module("siteGeneratorStaticsConsumerAppInternal").component("advancedColorPicker",{templateUrl:"views/design/advanced-color-picker.html",controller:AdvancedColorPicker,bindings:{selectedColor:"<",onColorSelected:"&",onCancel:"&?"}});var KitThumbnail=function(){function a(a,b,c){this.themeChooser=a,this.getKitName=b,this.flags=c,this.ePaletteColorPickerStates=coloration.ePaletteColorPickerStates,a.initialize()}return a.$inject=["themeChooser","getKitName","flags"],a.prototype.getColorAccordingToPalette=function(b,c){if(void 0!==c){var d=this.themeChooser.coloration.getSpecificKitColors(this.kit);return d[coloration.ePaletteColorPickerStates[c]]}var e=this.overrideColorsPalette||this.themeChooser.getColorsOrderedForPalette(this.kit),f=a.colorLookup.indexOf(b);return e[f]||"#ffffff"},a.prototype.getBoxColor=function(a){var b=this.themeChooser.coloration.getSpecificKitColors(this.kit);return 1===this.themeChooser.coloration.getSpecificKitColorationMode(this.kit)?b.black:b.white},a.prototype.getTextColor=function(a){var b=this.themeChooser.coloration.getSpecificKitColors(this.kit);return 0===this.themeChooser.coloration.getSpecificKitColorationMode(this.kit)?b.black:b.white},a.prototype.getTextClass=function(){var a=this.getKitName(this.kit);return a=this.ensureThumbnailExists(a),a+"-text"},a.prototype.getFontFaceOfKit=function(){var a=this.overrideFontPalette||this.kit.fontPalette,b=a[0].style;return _.last(b.split(" "))},a.prototype.getDisplayName=function(){var a=this.kit.displayName;return a||this.getKitName(this.kit)},a.prototype.thumbnailTemplate=function(){var a;return this.themeChooser.getActiveTheme("color")===this.kit&&(a=this.getKitName(this.themeChooser.coloration.getkitUsedForConfigurations())),a=a||this.getKitName(this.kit),a=this.ensureThumbnailExists(a),"views/design/kits/"+a+"-kit.html"},a.prototype.ensureThumbnailExists=function(b){return-1===a.implementedThumbnails.indexOf(b)&&(b="merlot"),b},a}();KitThumbnail.implementedThumbnails=["agile","evolution","horizon","black-ice","bold","skyscraper","sophisticated","cadenza","chic","classic","hi-rise","delight","upbeat","elegant","vogue","bouquet","rosewater","deep-forest","fresh","indulge","playground","midnight","maison","breeze","minimal","bounce","clean","merlot","serene","spark","fuse","intensity","soho","unplugged","sugar","vintage","smart","jet-black","timeless","rustic","innovative","charming","fun","funky","sincere","army","royal","dynamic","tender","organic","pure"],KitThumbnail.colorLookup=["L1","L2","L3","D1","D2","D3"],angular.module("siteGeneratorStaticsConsumerAppInternal").component("kitThumbnail",{templateUrl:"views/design/kit-thumbnail.html",controller:KitThumbnail,bindings:{kit:"<",overrideColorsPalette:"<",overrideFontPalette:"<"}});var FontThumbnail=function(){function a(b){var c=this;this.colorationUtils=b,this.hasBackground="undefined"==typeof this.hasBackground?!0:!1,this.isSelectable="undefined"==typeof this.isSelectable?!0:this.isSelectable,this.colorationUtils.initialize().then(function(){var b=c.colorationUtils.getMainColor();c.bgColor=c._addOverlay(b,a.overlayColor,a.overlayAlpha)})}return a.$inject=["colorationUtils"],a.prototype.scaleFontSize=function(b){return b*(1+a.fontSizeScaleStep*(this.fontScale||0))},a.prototype.getNameFontStyle=function(){var a=this.scaleFontSize(this.fontData.name.size);return{font:this.fontData.name.font,"font-size":a+"px"}},a.prototype.getDescriptionFontStyle=function(){var a=this.scaleFontSize(this.fontData.description.size);return{font:this.fontData.description.font,"font-size":a+"px"}},a.prototype.getThumbnailStyle=function(){return{"background-color":this.hasBackground?this.bgColor:""}},a.prototype._addOverlay=function(a,b,c){var d=chroma(a).rgb(),e=chroma(b).rgb();return chroma(_.map([0,1,2],function(a){return c*e[a]+(1-c)*d[a]})).hex()},a}();FontThumbnail.fontSizeScaleStep=.05,FontThumbnail.overlayColor="#eff1f2",FontThumbnail.overlayAlpha=.9,angular.module("siteGeneratorStaticsConsumerAppInternal").component("fontThumbnail",{templateUrl:"views/design/font/font-thumbnail.html",controller:FontThumbnail,bindings:{fontData:"<",isSelected:"<",hasBackground:"<",onClick:"&",fontScale:"<",isSelectable:"<",largeBg:"<"}});var FontSizeSlider=function(){function a(a,b){this.$translate=a,this.$scope=b,this.maxFontSize=FontCustomizationService.maxDeltaHeight,this.minFontSize=-FontCustomizationService.maxDeltaHeight}return a.$inject=["$translate","$scope"],a.prototype.$onInit=function(){var a=this;this.$scope.$watch("$ctrl.value",function(b,c){a.setSizeLabel()},!0)},a.prototype.setFontSize=function(){this.onSetValue({value:this.value})},a.prototype.onFontSizeChange=function(a){this.onPreviewValue&&this.onPreviewValue({value:a})},a.prototype.setSizeLabel=function(){this.sizeLabel=this.$translate(a.labels[this.value])},a}();FontSizeSlider.labels={"-3":"design.fonts.font-size-.-3","-2":"design.fonts.font-size-.-2","-1":"design.fonts.font-size-.-1",0:"design.fonts.font-size-.0",1:"design.fonts.font-size-.1",2:"design.fonts.font-size-.2",3:"design.fonts.font-size-.3"},angular.module("siteGeneratorStaticsConsumerAppInternal").component("fontSizeSlider",{templateUrl:"views/design/font/font-size-slider.html",controller:FontSizeSlider,bindings:{value:"=",onSetValue:"&",onPreviewValue:"&?"}});var AnimationPanel=function(){function a(a,b,c,d,e,f,g,h,i,j,k,l,m,n,o,p){var q=this;this.$scope=a,this.animationKit=b,this.animationUtils=c,this.previewScale=d,this.previewService=e,this.applicationState=f,this.undoRedo=g,this.pagesManager=h,this.consumerBiLogger=i,this.backgroundScrollService=j,this.flags=k,this.modelTree=l,this.layoutSolver=m,this.CcDialogBuilder=n,this.$translate=o,this.storyServices=p,this.askOverrideAnimationPatternSections=!1,this.askOverrideScrollTypeSections=!1,this.pagesTransitionNames=this.pagesManager.getPagesTransitionNames(),this.scrollTypeOptions=this.backgroundScrollService.getOptions(),this.animationPatterns=this.animationKit.getPatternsOptions(),this.$scope.$watch(function(){return q.getActiveAnimationPattern()},function(a){return q.activeAnimationPattern=a}),this.$scope.$watch(function(){return q.pagesManager.getPagesTransition()},function(a){return q.activePagesTransition=a}),this.$scope.$watch(function(){return q.getActiveScrollType()},function(a){return q.activeScrollType=a}),d.setScaleFactor(PreviewScale.MinScaleFactor)}return a.$inject=["$scope","animationKit","animationUtils","previewScale","previewService","applicationState","undoRedo","pagesManager","consumerBiLogger","backgroundScrollService","flags","modelTree","layoutSolver","CcDialogBuilder","$translate","storyServices"],a.prototype.getActiveAnimationPattern=function(){return _.find(this.animationPatterns,{id:this.animationUtils.getActivePatternForSite()})},a.prototype.closePanel=function(){var a=this;this.$scope.$applyAsync(function(){a.previewScale.setScaleFactor(PreviewScale.MaxScaleFactor),a.applicationState.goToBuilder()})},a.prototype.onHelp=function(){this.CcDialogBuilder.showSupportIframe(this.$translate("help.design.animations"),CONSUMER_DIALOGS.ANIMATION_PANEL_HELP)},a.prototype.backToDesignKit=function(){return this.flags.siteDesignKitMenu?void this.applicationState.goToDesignMode():void this.applicationState.goToDesignKitMode()},a.prototype.setAnimationPattern=function(a){var b=this;this.consumerBiLogger.siteDesign.changeAnimationClick(a.label),this.animationUtils.setSiteAnimationPattern(a.id).then(function(){b.askOverrideAnimationPatternSections=!b.animationUtils.doSiteAndSectionPatternsMatch(),b.askOverrideAnimationPatternSections&&b.consumerBiLogger.siteDesign.customizeDesignOverrideSectionDesignDisplayed("element animation"),b.undoRedo.captureOperation(!1,!0),b.consumerBiLogger.siteDesign.changeAnimationSuccess(a.label)})},a.prototype.previewAnimationPattern=function(a){this.animationUtils.previewPattern(a.id)},a.prototype.setPagesTransition=function(a){var b=this.pagesManager.getPagesTransition();this.pagesManager.setPagesTransition(a),this.undoRedo.captureOperation(!1,!0),this.consumerBiLogger.pagesManager.transitionBetweenPagesUpdated(a,b)},a.prototype.getActiveScrollType=function(){return this.backgroundScrollService.getActiveScrollTypeData()},a.prototype.refreshScrollType=function(){var a=this;return this.flags.renderedModel?(_.each(this.modelTree.getPagesNodes(),function(b){b!==a.storyServices.selectedPage&&(b.dirty=!0)}),this.storyServices.reRender()):(_.each(this.modelTree.getPagesNodes(),function(b){var c=a.layoutSolver.getPartSolutions("body",b.id);if(c){var d=c.getSelectedSolution();_.each(d,function(b){a.backgroundScrollService.reApplyScrollTypeForLg(b)})}}),this.previewService.waitForChanges())},a.prototype.setScrollType=function(a){var b=this,c=this.backgroundScrollService.getLabel(a);this.consumerBiLogger.siteDesign.customizeDesignChangeScrollAnimationClick(a,c),this.backgroundScrollService.setSiteOverride(a),this.refreshScrollType().then(function(){b.askOverrideScrollTypeSections=!b.backgroundScrollService.doSiteAndSectionMatch(),b.askOverrideScrollTypeSections&&b.consumerBiLogger.siteDesign.customizeDesignOverrideSectionDesignDisplayed("scroll animation"),b.undoRedo.captureOperation(!1,!0),b.consumerBiLogger.siteDesign.customizeDesignChangeScrollAnimationSuccess(a,c)})},a.prototype.overrideAnimationPatternOnSections=function(){var a=this;return this.consumerBiLogger.siteDesign.customizeDesignOverrideSectionDesignClickApply("element animation"),this.animationUtils.forceSitePattern().then(function(){a.consumerBiLogger.siteDesign.customizeDesignOverrideSectionDesignApplySuccess("element animation"),a.undoRedo.captureOperation(!1,!0)})},a.prototype.overrideScrollTypeOnSections=function(){var a=this;return this.consumerBiLogger.siteDesign.customizeDesignOverrideSectionDesignClickApply("scroll animation"),this.backgroundScrollService.clearOverridableSections(),this.refreshScrollType().then(function(){a.consumerBiLogger.siteDesign.customizeDesignOverrideSectionDesignApplySuccess("scroll animation")})},a}();angular.module("siteGeneratorStaticsConsumerAppInternal").component("animationPanel",{templateUrl:"views/design/animation-panel.html",controller:AnimationPanel});var FontPanel=function(){function a(a,b,c,d,e,f,g,h,i,j,k,l,m,n,o,p,q,r,s,t,u,v){var w=this;this.$scope=a,this.$q=b,this.$translate=c,this.$element=d,this.$timeout=e,this.CcDialogBuilder=f,this.themeChooser=g,this.initService=h,this.spinnerService=i,this.fontCustomizationService=j,this.applicationState=k,this.previewScale=l,this.previewService=m,this.undoRedo=n,this.pagesManager=o,this.consumerBiLogger=p,this.consumerBiLoggerHelpers=q,this.flags=r,this.modelTree=s,this.storyServices=t,this.fontUtils=u,this.assistantManager=v,this.askOverrideFontSizeSections=!1,this.kitChangeInProgress=!1,h.loaded().then(function(){return w.themeChooser.initialize()}).then(function(){return w.loaded()})}return a.$inject=["$scope","$q","$translate","$element","$timeout","CcDialogBuilder","themeChooser","initService","spinnerService","fontCustomizationService","applicationState","previewScale","previewService","undoRedo","pagesManager","consumerBiLogger","consumerBiLoggerHelpers","flags","modelTree","storyServices","fontUtils","assistantManager"],a.prototype.loaded=function(){var a=this;this.previewScale.setScaleFactor(PreviewScale.MinScaleFactor),this.ready=!0;var b=this.themeChooser.getColorThemes();this.fontOptions=b.map(function(b){return a.fontUtils.convertFontDataToThumbnail(b)}),this.$scope.$watch(function(){return a.getSelectedFontKitIndex()},function(b){return a.setSelectedFontKitIndex(b)}),this.$scope.$watch(function(){return a.getSelectedFontSize()},function(b){return a.selectedFontSize=b})},a.prototype.setSelectedFontKitIndex=function(a){var b=this,c=void 0===this.selectedFontIndex;this.selectedFontIndex=a,this.selectedFont=this.fontOptions[this.selectedFontIndex],c||this.spinnerService.waitForStop().then(function(){b.scrollToSelectedFont("animated")})},a.prototype.getSelectedFontKitIndex=function(){return this.kitChangeInProgress?this.selectedFontIndex:_.findIndex(this.fontOptions,{id:this.themeChooser.getActiveFontTheme().id})},a.prototype.getSelectedFontSize=function(){return this.fontCustomizationService.getFontSizeAllSite()||0},a.prototype.closePanel=function(){var a=this;this.$scope.$applyAsync(function(){a.previewScale.setScaleFactor(PreviewScale.MaxScaleFactor),a.applicationState.goToBuilder()})},a.prototype.showHelp=function(){this.CcDialogBuilder.showSupportIframe(this.$translate("help.design.fonts"),CONSUMER_DIALOGS.FONT_PANEL_HELP)},a.prototype.backToDesignKit=function(){return this.flags.siteDesignKitMenu?void this.applicationState.goToDesignMode():void this.applicationState.goToDesignKitMode()},a.prototype.setFontKit=function(a,b){var c=this;this.isSelectedKit(a)||(this.askOverrideFontSizeSections=!1,this.kitChangeInProgress=!0,this.consumerBiLogger.siteDesign.clickOnDesiredColorFontSet("font set",a.id,b,this.fontOptions.length),this.fontCustomizationService.resetFontSize(),this.spinnerService.waitForMe("setFontKit"),this.themeChooser.setAllFontsFromOneTheme(a.id).then(function(){c.themeChooser.serializeFontKitSelection(a.id),c.undoRedo.captureOperation(!1,!0);var d=c.consumerBiLoggerHelpers.getEditMode();return c.consumerBiLogger.siteDesign.colorFontSetChangeSuccess(d,"font set",a.id,b,c.fontOptions.length),c.previewService.waitForChanges()})["finally"](function(){c.kitChangeInProgress=!1,c.spinnerService.imDone("setFontKit")}))},a.prototype.setFontSize=function(a){var b=this;this.consumerBiLogger.siteDesign.changeFontSizeClick(a.toString(),this.selectedFont.id),this.spinnerService.waitForMe("setFontSize"),this.fontCustomizationService.setFontSizeAllSite(a),this.fontUtils.updateView().then(function(){return b.askOverrideFontSizeSections=!b.fontCustomizationService.doSiteAndSectionMatch(),b.askOverrideFontSizeSections&&b.consumerBiLogger.siteDesign.customizeDesignOverrideSectionDesignDisplayed("font"),b.undoRedo.captureOperation(!1,!0),b.consumerBiLogger.siteDesign.changeFontSizeSuccess(a.toString(),b.selectedFont.id),b.previewService.waitForChanges()})["finally"](function(){b.spinnerService.imDone("setFontSize")})},a.prototype.overrideFontSizeOnSections=function(){var a=this;this.spinnerService.waitForMe("overrideSectionFontSize"),this.consumerBiLogger.siteDesign.customizeDesignOverrideSectionDesignClickApply("font"),this.fontCustomizationService.clearOverridableSections(),this.fontUtils.updateView().then(function(){return a.consumerBiLogger.siteDesign.customizeDesignOverrideSectionDesignApplySuccess("font"),a.previewService.waitForChanges()})["finally"](function(){a.spinnerService.imDone("overrideSectionFontSize")})},a.prototype.isSelectedKit=function(a){return a===this.selectedFont},a.prototype.getFontScale=function(a){return this.isSelectedKit(a)?this.selectedFontSize:void 0},a.prototype.doAnimatedVerticalScroll=function(a){var b=this,c=a.calculateScroll,d=a.childToScrollTo,e=a.scrollableContainer,f=a.duration,g=a.timeout;return this.$q(function(a){b.$timeout(function(){e.animate({scrollTop:c(d[0].offsetTop)},f,function(){a()})},g)})},a.prototype.scrollToSelectedFont=function(a){var b=this;return this.assistantManager.getCustomTaskData("scrollToSelectedFont")!==!1&&this.$timeout(function(){return b.doAnimatedVerticalScroll({childToScrollTo:b.$element.find(".font-item").eq(b.selectedFontIndex),scrollableContainer:b.$element.find(".cc-panel-body"),calculateScroll:function(a){return Math.max(0,a-12)},duration:"animated"===a?1e3:0,timeout:"animated"===a?300:0})}),this.$q.when()},a}();angular.module("siteGeneratorStaticsConsumerAppInternal").component("fontPanel",{templateUrl:"views/design/font-panel.html",controller:FontPanel});var SectionAnimationPanel=function(){function a(a,b,c,d,e,f,g,h,i,j,k,l,m,n,o,p,q,r,s){var t=this;this.$scope=a,this.$q=b,this.animationKit=c,this.animationUtils=d,this.previewService=e,this.applicationState=f,this.undoRedo=g,this.consumerBiLogger=h,this.backgroundScrollService=i,this.flags=j,this.overlayManager=k,this.initService=l,this.CcDialogBuilder=m,this.$translate=n,this.previewScale=o,this.sectionPanelManager=p,this.simpleSolutionManager=q,this.sectionBackgroundService=r,this.storyServices=s,this.scrollTypeChangeable=!1,l.loaded().then(function(){t.load()})}return a.$inject=["$scope","$q","animationKit","animationUtils","previewService","applicationState","undoRedo","consumerBiLogger","backgroundScrollService","flags","overlayManager","initService","CcDialogBuilder","$translate","previewScale","sectionPanelManager","simpleSolutionManager","sectionBackgroundService","storyServices"],a.prototype.load=function(){var a=this;return this.scrollTypeOptions=this.backgroundScrollService.getOptions(),this.animationPatterns=this.animationKit.getPatternsOptions(),this.setSelectedNode(),this.node?(this.$scope.$watch(function(){return a.getActiveAnimationPattern()},function(b){return a.activeAnimationPattern=b}),this.$scope.$watch(function(){return a.getActiveScrollType()},function(b){return a.activeScrollType=b}),void(this.scrollTypeChangeable=this.canChangeScrollType())):void this.applicationState.goToBuilder()},a.prototype.setSelectedNode=function(){var a=this.applicationState.getContentFocus().nodeId,b=this.sectionPanelManager.getSectionFromContentId(a);this.node=b.node,this.sitePart=b.sitePart},a.prototype.goToAnimationPanel=function(){this.applicationState.goToAnimationPanel(BIOrigins.SectionAnimationPanel)},a.prototype.getActiveAnimationPattern=function(){return _.find(this.animationPatterns,{id:this.animationUtils.getActivePatternForSection(this.node,this.sitePart)})},a.prototype.closePanel=function(){var a=this;this.$scope.$applyAsync(function(){a.applicationState.goToBuilder(!0),a.previewScale.setScaleFactor(PreviewScale.MaxScaleFactor)})},a.prototype.back=function(){this.applicationState.goToSwitchPresetMode("animation-back")},a.prototype.showSectionAnimationHelp=function(){this.CcDialogBuilder.showSupportIframe(this.$translate("help.section.animations"),CONSUMER_DIALOGS.SECTION_ANIMATIONS_HELP)},a.prototype.setAnimationPattern=function(a){var b=this;this.consumerBiLogger.sectionDesign.changeElementAnimationClick(this.node.alias,this.node.getContentElementType(),a.label),this.animationUtils.setSectionAnimationPattern(this.node,this.sitePart,a.id).then(function(){b.undoRedo.captureOperation(!1,!0),b.consumerBiLogger.sectionDesign.changeElementAnimationSuccess(b.node.alias,b.node.getContentElementType(),a.label);
})},a.prototype.previewAnimationPattern=function(a){this.animationUtils.previewPatternForLgs(this.lgs,a.id)},a.prototype.canChangeScrollType=function(){var a=!1;return this.flags.sectionBackground&&(a=a||this.sectionBackgroundService.hasScrollableBackground(this.node)),a=a||_.some(this.lgs,function(a){return a.canChangeScrollType()}),this.flags.sectionBackground?a&&!this.node.backgroundHasFaces:a},a.prototype.getActiveScrollType=function(){return _.find(this.scrollTypeOptions,{value:this.backgroundScrollService.getActiveScrollType(this.node)||this.backgroundScrollService.SCROLL_TYPE.NONE})},a.prototype.refreshScrollType=function(){var a=this;return this.flags.renderedModel?this.storyServices.reRender():(_.each(this.lgs,function(b){a.backgroundScrollService.reApplyScrollTypeForLg(b)}),this.previewService.waitForChanges())},a.prototype.setScrollType=function(a){var b=this,c=this.backgroundScrollService.getLabel(a);this.consumerBiLogger.sectionDesign.changeScrollAnimationClick(this.node.alias,this.node.getContentElementType(),c,a),this.backgroundScrollService.setSectionOverrideWithInheritance(this.node,a),this.$q.when().then(function(){return b.flags.sectionBackground?b.sectionBackgroundService.updateViewer(b.node):void 0}).then(function(){return b.refreshScrollType()}).then(function(){b.undoRedo.captureOperation(!1,!0),b.consumerBiLogger.sectionDesign.changeScrollAnimationSuccess(b.node.alias,b.node.getContentElementType(),c,a)})},Object.defineProperty(a.prototype,"lgs",{get:function(){return this.simpleSolutionManager.getSectionSolution(this.node.containerPageId,this.node.id)},enumerable:!0,configurable:!0}),a}();angular.module("siteGeneratorStaticsConsumerAppInternal").component("sectionAnimationPanel",{templateUrl:"views/design/section-animation-panel.html",controller:SectionAnimationPanel});var SectionBackgroundPanel=function(){function a(a,b,c,d,e,f,g,h,i,j,k,l,m,n,o){this.$scope=a,this.$q=b,this.$translate=c,this.$element=d,this.$timeout=e,this.sectionBackgroundManager=f,this.initService=g,this.previewScale=h,this.applicationState=i,this.assistantManager=j,this.mediaGalleryAdapter=k,this.mediaGallery=l,this.CcDialogBuilder=m,this.consumerBiLogger=n,this.flags=o,this.mediaTypes=cc.MediaPreviewType,this.initialized=!1,this.showBackground=!1,this.init()}return a.$inject=["$scope","$q","$translate","$element","$timeout","sectionBackgroundManager","initService","previewScale","applicationState","assistantManager","mediaGalleryAdapter","mediaGallery","CcDialogBuilder","consumerBiLogger","flags"],Object.defineProperty(a.prototype,"automationAttribute",{get:function(){var b=this.sectionBackgroundManager.mode;return a.AUTOMATION_LABELS[b.toUpperCase()]},enumerable:!0,configurable:!0}),Object.defineProperty(a.prototype,"isHeaderMode",{get:function(){return"header"===this.sectionBackgroundManager.mode},enumerable:!0,configurable:!0}),Object.defineProperty(a.prototype,"shouldShowParagraph",{get:function(){return!this.shouldShowHiddenParts&&!this.sectionBackgroundManager.isBackgroundHidden()},enumerable:!0,configurable:!0}),Object.defineProperty(a.prototype,"shouldShowHiddenParts",{get:function(){return this.isHeaderMode&&!this.showBackground},enumerable:!0,configurable:!0}),Object.defineProperty(a.prototype,"shouldShowBackdrop",{get:function(){return this.shouldShowHiddenParts||this.displaySettingsPopup},enumerable:!0,configurable:!0}),Object.defineProperty(a.prototype,"shouldShowBackground",{get:function(){return this.initialized&&!!this.selectedBackground},enumerable:!0,configurable:!0}),Object.defineProperty(a.prototype,"label",{get:function(){var a=this.sectionBackgroundManager.mode;switch(a){case"header":return this.$translate("builder.section-background.panel-headline-text-header");case"list":default:return this.$translate("builder.section-background.panel-headline-text")}},enumerable:!0,configurable:!0}),Object.defineProperty(a.prototype,"selectedBackground",{get:function(){return this.backgrounds.find(function(a){return a.isSelected})},enumerable:!0,configurable:!0}),Object.defineProperty(a.prototype,"firstImage",{get:function(){return this.backgrounds.find(function(a){return"bgImage"===a.data.type})},enumerable:!0,configurable:!0}),Object.defineProperty(a.prototype,"paragraphTextKey",{get:function(){return"header"!==this.sectionBackgroundManager.mode?"builder.section-background.panel-paragraph-text":"builder.section-background.panel-paragraph-text-header-mode"},enumerable:!0,configurable:!0}),a.prototype.showSettings=function(a){return a.isSelected&&_(["bgImage","gallery","pattern"]).includes(a.data.type)},a.prototype.getCategoryLabelPrefix=function(a){return"builder.section-background.categories."+a},a.prototype.getCategoryTooltipPrefix=function(a){return"section_background_categories_"+a},a.prototype.getSettingsButtonText=function(a){switch(a){case"bgImage":return"builder.section-background.image-settings";case"gallery":return"builder.section-background.gallery-settings";case"pattern":return"builder.section-background.pattern-settings"}},a.prototype.getSettingsButtonIcon=function(a){switch(a){case"bgImage":case"gallery":return"settings";case"pattern":return"color"}},a.prototype.selectBackground=function(a){var b=this;if(!a.isSelected)return this.$q(function(c){var d=b.backgrounds.find(function(a){return a.isSelected}),e=d?d.data.type:void 0;b.unSelectSelected(d),a.isSelected=!0,b.waitForAnimation(e).then(function(){b.scrollToSelectedBackground("animated").then(function(){b.sectionBackgroundManager.setBackground(a.org),c()})})})},a.prototype.waitForAnimation=function(a){var b=this;return this.$q(function(c){a&&_(["bgImage","gallery","pattern"]).contains(a)?b.$timeout(function(){c()},300):c()})},a.prototype.goToListModeClick=function(){this.applicationState.goToSectionListBackgroundPanel()},a.prototype.onShowBackgroundToggleValueChange=function(a){var b,c=this,d=this.sectionBackgroundManager.getParamsToBI().concat([a?"show":"hide"]),e=d[0],f=d[1],g=d[2];this.consumerBiLogger.sectionDesign.showHideListHeaderBackgroundClick(e,f,g),a?(b=this.lastBackground?this.lastBackground:this.firstImage||this.backgrounds[0],this.sectionBackgroundManager.toggleOnFirstField()):this.lastBackground=this.selectedBackground,this.$timeout(function(){c.$q(function(d){a?(b.isSelected=!1,c.selectBackground(b).then(d)):c.sectionBackgroundManager.setBackground(void 0).then(d)}).then(function(){c.consumerBiLogger.sectionDesign.showHideListHeaderBackgroundSuccess(e,f,g)})},300)},a.prototype.settingsButtonClick=function(a){var b=this;switch(a.data.type){case"bgImage":if(this.displaySettingsPopup=!this.displaySettingsPopup,this.displaySettingsPopup?this.popupScroller.scrollToExposePopup():this.popupScroller.reset(),this.displaySettingsPopup){var c=this.sectionBackgroundManager.getParamsToBI(),d=c[0],e=c[1],f=this.applicationState.getBackgroundModeForBi();this.consumerBiLogger.sectionDesign.openBackgroundImageSettings(f,e,d)}break;case"gallery":var g=angular.copy(a.org).mediaItems.map(function(a){return a.active=!0,a.mediaType="image",a});this.sectionBackgroundManager.openGalleryOrganizer(g).then(function(c){_.isEqual(c.org.mediaItems,a.org.mediaItems)||b.$timeout(function(){a=$.extend(a,b.sectionBackgroundManager.convertOrgToBackgroundObject({mediaType:a.data.type,galleryType:a.org.galleryType,mediaItems:c.org.mediaItems},!0)),b.sectionBackgroundManager.setBackground(a.org)})});break;case"pattern":this.applicationState.goToSectionColorPanel(BIOrigins.SectionBackgroundPanel)}},a.prototype.backgroundSettingsClose=function(){this.displaySettingsPopup=!1,this.popupScroller.reset()},a.prototype.closePanel=function(){var a=this;this.$scope.$applyAsync(function(){a.previewScale.setScaleFactor(PreviewScale.MaxScaleFactor),a.applicationState.goToBuilder(!0)})},a.prototype.goToPrevState=function(){this.applicationState.goBack()},a.prototype.uploadMedia=function(a){var b=this,c=this.sectionBackgroundManager.getParamsToBI(),d=c[0],e=c[1],f=this.sectionBackgroundManager.convertMediaPreviewTypeToBi(a),g=this.applicationState.getBackgroundModeForBi();this.consumerBiLogger.sectionDesign.uploadBackgroundClick(f,g,e,d),this.sectionBackgroundManager.uploadBackground(a).then(function(a){if(!_.isEmpty(a)){var c=b.mediaGallery.getItemId(a.org),d=c&&_.find(b.backgrounds,function(a){return b.mediaGallery.getItemId(a.org)===c});c&&d?a=d:b.flags.simpleBackgroundsOrder?b.replaceFirstBackgroundInCategory(a):b.backgrounds.unshift(a),b.selectBackground(a)}})},a.prototype.replaceFirstBackgroundInCategory=function(a){var b=this,c=this.sectionBackgroundManager.getCategory(a),d=this.backgrounds.findIndex(function(a){return c===b.sectionBackgroundManager.getCategory(a)}),e=this.backgrounds[d];a.label=e.label,delete e.label,this.backgrounds.splice(d,0,a)},a.prototype.onHelp=function(){this.CcDialogBuilder.showSupportIframe(this.$translate("help.section.backgrounds"),CONSUMER_DIALOGS.SECTION_BACKGROUNDS_HELP)},a.prototype.init=function(){var a=this;this.popupScroller=new helpers.PopupScroller(this.$timeout,this.$element,".-selected","section-background-settings"),this.initService.loaded().then(function(){a.backgrounds=[],a.allBackgrounds=a.sectionBackgroundManager.calculateBackgrounds(),a.addBackgrounds(a.getInitialBackgrounds()),a.initialized=!0,a.showBackground=a.shouldShowBackground,a.flags.simpleBackgroundsOrder&&(a.shouldShowHiddenParts||a.scrollToSelectedBackground("immediate")),a.$timeout(function(){a.bindScrollEvent()})})},a.prototype.getInitialBackgrounds=function(){if(this.flags.simpleBackgroundsOrder){var b=this.allBackgrounds.findIndex(function(a){return"pattern"===a.data.type})+a.MINIMUM_PATTERNS;return b}return a.ADD_BACKGROUNS_START},a.prototype.addBackgrounds=function(b){void 0===b&&(b=a.ADD_BACKGROUNS_STEP);var c=this.backgrounds.length,d=c+b;(e=this.backgrounds).push.apply(e,this.allBackgrounds.slice(c,d));var e},a.prototype.bindScrollEvent=function(){var b=this;this.$element.find(".cc-panel-body").scroll(function(c){var d=c.target,e=d.scrollTop,f=d.scrollHeight,g=d.clientHeight,h=e+g,i=f-h,j=b.allBackgrounds.length>b.backgrounds.length;j&&i<a.INFINITE_SCROLL_THRESHOLD&&b.$scope.$apply(function(){return b.addBackgrounds()})})},a.prototype.unSelectSelected=function(a){a||(a=this.backgrounds.find(function(a){return a.isSelected})),a&&(a.isSelected=!1)},a.prototype.doAnimatedVerticalScroll=function(a){var b=a.calculateScroll,c=a.childToScrollTo,d=a.scrollableContainer,e=a.duration;return this.$q(function(a){d.animate({scrollTop:b(c[0].offsetTop)},e,function(){a()})})},a.prototype.scrollToSelectedBackground=function(a){var b=this;return this.assistantManager.getCustomTaskData("scrollToSelectedBackground")!==!1?this.$q(function(c){b.$timeout(function(){var d=b.$element.find(".-selected"),e=!d.hasClass("-with-label");b.doAnimatedVerticalScroll({childToScrollTo:d,scrollableContainer:b.$element.find(".cc-panel-body"),calculateScroll:function(a){return Math.max(0,a-(e?12:0))},duration:"animated"===a?1e3:0}).then(c)},100)}):this.$q.when()},a}();SectionBackgroundPanel.ADD_BACKGROUNS_START=12,SectionBackgroundPanel.ADD_BACKGROUNS_STEP=5,SectionBackgroundPanel.MINIMUM_PATTERNS=5,SectionBackgroundPanel.AUTOMATION_LABELS={HEADER:"section_list_header_bg_panel",LIST:"section_list_bg_panel",NONE:"section_bg_panel‎"},SectionBackgroundPanel.INFINITE_SCROLL_THRESHOLD=400,angular.module("siteGeneratorStaticsConsumerAppInternal").component("sectionBackgroundPanel",{templateUrl:"views/design/section-background-panel.html",controller:SectionBackgroundPanel});var SectionBackgroundUpload=function(){function a(a){this.flags=a,this.mediaTypes=cc.MediaPreviewType,this.displayUploadPopup=!1}return a.$inject=["flags"],a.prototype.showUploadPopup=function(){this.displayUploadPopup=!0},a.prototype.hideUploadPopup=function(){this.displayUploadPopup=!1},a.prototype.handleClick=function(a){this.displayUploadPopup=!1,this.onClick&&this.onClick({mediaType:a})},a}();angular.module("siteGeneratorStaticsConsumerAppInternal").component("sectionBackgroundUpload",{templateUrl:"views/design/section-background-upload.html",controller:SectionBackgroundUpload,bindings:{onClick:"&"}});var SectionBackgroundSettingsImage=function(){function a(a,b,c,d,e,f){this.sectionBackgroundManager=a,this.undoRedo=b,this.backgroundScrollService=c,this.nodeFetcher=d,this.applicationState=e,this.consumerBiLogger=f,this.options=[{iconClass:"PositionTop",label:"Top",key:"top"},{iconClass:"PositionCenter",label:"Center",key:"center"},{iconClass:"PositionBottom",label:"Bottom",key:"bottom"}],this.initScrollType(),this.activeAligmentOption=this.sectionBackgroundManager.selectedAligment()}return a.$inject=["sectionBackgroundManager","undoRedo","backgroundScrollService","nodeFetcher","applicationState","consumerBiLogger"],a.prototype.initScrollType=function(){var a=this.nodeFetcher.getCurrentActiveNode();if(a){var b=this.backgroundScrollService.getActiveScrollType(a);this.shouldShowParallaxParagraph=_([this.backgroundScrollService.SCROLL_TYPE.PARALLAX,this.backgroundScrollService.SCROLL_TYPE.PARALLAX_ZOOM]).contains(b)}},a.prototype.setAligmentOption=function(a){var b=this.sectionBackgroundManager.getParamsToBI(),c=b[0],d=b[1];this.consumerBiLogger.sectionDesign.changeBackgroundImagePositionClick(this.sectionBackgroundManager.mode,a.key,d,c),this.activeAligmentOption=a.key,this.sectionBackgroundManager.setAligmentOption(a.key),this.consumerBiLogger.sectionDesign.changeBackgroundImagePositionSuccess(this.sectionBackgroundManager.mode,a.key,d,c),this.undoRedo.captureOperation()},a.prototype.goToPreview=function(){this.applicationState.goToPreview()},a}();angular.module("siteGeneratorStaticsConsumerAppInternal").component("sectionBackgroundSettingsImage",{templateUrl:"views/design/section-background-options/section-background-settings-image.html",controller:SectionBackgroundSettingsImage});var __extends=this&&this.__extends||function(){var a=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(a,b){a.__proto__=b}||function(a,b){for(var c in b)b.hasOwnProperty(c)&&(a[c]=b[c])};return function(b,c){function d(){this.constructor=b}a(b,c),b.prototype=null===c?Object.create(c):(d.prototype=c.prototype,new d)}}(),SectionBackgroundSettings=function(a){function b(b,c,d,e,f,g,h,i,j){var k=a.call(this,g)||this;if(k.flags=b,k.$translate=c,k.sectionBackgroundService=d,k.nodeFetcher=e,k.sectionBackgroundManager=f,k.$timeout=g,k.backgroundScrollService=h,k.applicationState=i,k.undoRedo=j,k.isImage()&&k.flags.imagePositionsAsRectangles){var l=k.nodeFetcher.getCurrentNode(),m=k.sectionBackgroundService.getBackgroundAlignment(l,k.sectionBackgroundManager.bgPart);k.selectedPositionIndex=ImagePositions.invertedPosToDetails[m],k.initScrollType(),k.closeWhenClickOutside([".background-settings",".settings-btn"],k.onClose)}return k}return __extends(b,a),b.$inject=["flags","$translate","sectionBackgroundService","nodeFetcher","sectionBackgroundManager","$timeout","backgroundScrollService","applicationState","undoRedo"],b.prototype.positionClicked=function(a){this.selectedPositionIndex=a.index;var b=ImagePositions.posToDetails[a.index];this.sectionBackgroundManager.setAligmentOption(b),this.undoRedo.captureOperation()},b.prototype.initScrollType=function(){var a=this.nodeFetcher.getCurrentNode();if(a){var b=this.backgroundScrollService.getActiveScrollType(a);this.shouldShowParallaxParagraph=_([this.backgroundScrollService.SCROLL_TYPE.PARALLAX,this.backgroundScrollService.SCROLL_TYPE.PARALLAX_ZOOM]).contains(b)}},b.prototype.goToPreview=function(){this.applicationState.goToPreview(!0)},b.prototype.getHeaderTitle=function(){return this.$translate("builder.section-background.background-settings.image.lower-title")},b.prototype.getHeaderBody=function(){return this.$translate("builder.section-background.background-settings.image.body")},b.prototype.getFooterTextForParallax=function(){return this.$translate("builder.section-background.background-settings.image.parallax-paragraph")},b.prototype.isImage=function(){return"bgImage"===this.type},b.prototype.$onDestroy=function(){this.isImage()&&this.flags.imagePositionsAsRectangles&&this.onDropdownClose()},b}(BaseDropDown);angular.module("siteGeneratorStaticsConsumerAppInternal").component("sectionBackgroundSettings",{templateUrl:"views/design/section-background-options/section-background-settings.html",controller:SectionBackgroundSettings,bindings:{type:"<",onClose:"&"}});var SectionAlignmentManager=function(){function a(a,b,c){var d=this;this.layoutSolver=a,this.layoutSelectionStoreProvider=b,this.overlayManager=c,this._hasVerticalAlignment=!1,this.alignSection=function(a,b){(!b||d._hasVerticalAlignment)&&d._targetSection.groups.forEach(function(c){c.segments.filter(function(a){return a.node}).filter(function(a){return["ListHeader","ListFooter"].indexOf(a.contentElement.type)<0}).forEach(function(c){var e=c.getLE();if(b)d.setVPosition(e,a);else{d._horizontalAlignment=a;var f=Object.keys(c.node.contentElement.values).map(function(a){return c.node.contentElement.values[a]}).filter(function(a){return["text","button"].indexOf(a.type)>=0||"media"===a.type&&"image"===a.subType}).map(function(a){return a.subType});f.forEach(function(b){return d.alignVariations(e.variationsMap,b,a)});var g=_.find(e.layoutArray,function(a){return"social"===a.type});g&&(e.variationsMap.social={hPosition:a,size:g.width});var h=_.find(e.layoutArray,function(a){return"label"===a.subType});h&&(e.variationsMap.label={hPosition:a,align:a})}d.persistDesign(c,e)})})},this.calcHorizontalAlignment=function(){if(d._targetSection){var a=_(d._targetSection.groups).map(function(a){return a.segments.filter(function(a){return a.node}).filter(function(a){return["ListHeader","ListFooter"].indexOf(a.contentElement.type)<0})}).flatten().value()[0],b=a.getLE();if(b&&b.variationsMap){var c=b.variationsMap.title||b.variationsMap.subTitle||b.variationsMap.longText;d._horizontalAlignment=c.align||c.hPosition}d._horizontalAlignment=d._horizontalAlignment||"left"}},this.calcHasVerticalPositions=function(){d._targetSection&&(d._hasVerticalAlignment=_.any(d._targetSection.groups,function(a){return _.any(a.segments.filter(function(a){return a.node}).filter(function(a){return["ListHeader","ListFooter"].indexOf(a.contentElement.type)<0}),function(a){var b=a.getLE();return b&&b.variationsMap&&_.values(b.variationsMap).filter(function(a){return a.vPosition}).length>0})}))}}return a.$inject=["layoutSolver","layoutSelectionStoreProvider","overlayManager"],a.prototype.setTargetSection=function(a){this._targetSection=this.overlayManager.listSpanManager.getByNodeId(a.id),this.calcHasVerticalPositions(),this.calcHorizontalAlignment()},a.prototype.setVPosition=function(a,b){var c=a.getAllContainersLayout();c.forEach(function(c){return a.updateSelectedVariationsMap(c,b-1,"vPosition")})},a.prototype.alignVariations=function(a,b,c){return"image"===b&&(b="media"),a[b]||(a[b]={}),"button"!==b&&(a[b].align=c),a[b].hPosition=c,a},a.prototype.persistDesign=function(a,b){var c=b.variationsMap;if(c&&_.keys(c).length){var d=this.layoutSelectionStoreProvider.getLayoutSelectionStore();d.setVariations(a,b.cluster,c);var e=d.getPreferredLayoutData(a);e&&d.setVariations(a,e.cluster,c)}},a}(),SectionFontPanel=function(){function a(a,b,c,d,e,f,g,h,i,j,k,l,m,n){var o=this;this.$scope=a,this.$translate=b,this.CcDialogBuilder=c,this.themeChooser=d,this.initService=e,this.fontCustomizationService=f,this.applicationState=g,this.previewScale=h,this.undoRedo=i,this.consumerBiLogger=j,this.nodeFetcher=k,this.flags=l,this.fontUtils=m,this.sectionAlignmentManager=n,this.isAlignmentSelected=function(a){return a===o.sectionAlignmentManager._horizontalAlignment},e.loaded().then(function(){return o.loaded()})}return a.$inject=["$scope","$translate","CcDialogBuilder","themeChooser","initService","fontCustomizationService","applicationState","previewScale","undoRedo","consumerBiLogger","nodeFetcher","flags","fontUtils","sectionAlignmentManager"],Object.defineProperty(a.prototype,"isAlignmentFeature",{get:function(){return this.flags.sectionAlignment},enumerable:!0,configurable:!0}),Object.defineProperty(a.prototype,"isPositionFeature",{get:function(){return this.flags.debugSectionPosition},enumerable:!0,configurable:!0}),Object.defineProperty(a.prototype,"panelTitle",{get:function(){var a=this.flags.sectionAlignment?"design.fonts.section-panel-title-alignment":"design.fonts.section-panel-title";return this.$translate(a)},enumerable:!0,configurable:!0}),Object.defineProperty(a.prototype,"panelDescription",{get:function(){var a=this.flags.sectionAlignment?"design.fonts.section-tip-alignment":"design.fonts.section-tip";return this.$translate(a)},enumerable:!0,configurable:!0}),Object.defineProperty(a.prototype,"showVerticalPositionControls",{get:function(){return this.isAlignmentFeature&&this.sectionAlignmentManager._hasVerticalAlignment},enumerable:!0,configurable:!0}),Object.defineProperty(a.prototype,"buttonRows",{get:function(){return[["↖","↑","↗"],["←","☀","→"],["↙","↓","↘"]]},enumerable:!0,configurable:!0}),Object.defineProperty(a.prototype,"buttonStyle",{get:function(){return{display:"inline-block",width:"20px",height:"20px","text-align":"center",cursor:"pointer"}},enumerable:!0,configurable:!0}),a.prototype.alignSection=function(a,b){var c=this;void 0===b&&(b=!1),this.consumerBiLogger.sectionDesign.changeTextAlignmentClick(a,this.node.alias,this.node.getContentElementType(),""),this.sectionAlignmentManager.alignSection(a,b),this.fontUtils.updateNodeView(this.node).then(function(){c.undoRedo.captureOperation(!1,!0),c.consumerBiLogger.sectionDesign.changeTextAlignmentSuccess(a,c.node.alias,c.node.getContentElementType(),"")})},a.prototype.loaded=function(){var a=this;return this.themeChooser.initialize().then(function(){a.ready=!0,a.themeChooserInitialized()}),this.setSectionNode(),this.node?void 0:void this.applicationState.goToBuilder()},a.prototype.setSectionNode=function(){var a=this.nodeFetcher.getCurrentNodeResult();this.node=a&&a.node,this.sitePart=a&&a.sitePart,this.sectionAlignmentManager.setTargetSection(this.node)},a.prototype.themeChooserInitialized=function(){var a=this,b=this.themeChooser.getColorThemes();this.selectedFont=this.fontUtils.convertFontDataToThumbnail(_.find(b,{id:this.themeChooser.getActiveFontTheme().id}),!0),this.$scope.$watch(function(){return a.getSelectedFontSize()},function(b){return a.selectedFontSize=b})},a.prototype.closePanel=function(){var a=this;this.$scope.$applyAsync(function(){a.previewScale.setScaleFactor(PreviewScale.MaxScaleFactor),a.applicationState.goToBuilder(!0)})},a.prototype.showHelp=function(){this.CcDialogBuilder.showSupportIframe(this.$translate("help.section.font"),CONSUMER_DIALOGS.SECTION_FONT_HELP)},a.prototype.backToSectionDesign=function(){this.applicationState.goToSwitchPresetMode("font-back")},a.prototype.goToFontsPanel=function(){this.applicationState.goToFontsPanel(BIOrigins.SectionFontPanel)},a.prototype.getSelectedFontSize=function(){return this.fontCustomizationService.getSectionOverride(this.node)||0},a.prototype.setFontSize=function(a){var b=this;return this.consumerBiLogger.sectionDesign.changeFontSizeClick(this.node.getContentElementType(),this.node.alias,a.toString(),this.selectedFont.id),this.fontCustomizationService.setFontSize(this.node,a),this.fontUtils.updateNodeView(this.node).then(function(){b.undoRedo.captureOperation(!1,!0),b.consumerBiLogger.sectionDesign.changeFontSizeSuccess(b.node.alias,b.node.getContentElementType(),a.toString(),b.selectedFont.id)})},a}();angular.module("siteGeneratorStaticsConsumerAppInternal").component("sectionFontPanel",{templateUrl:"views/design/section-font-panel.html",controller:SectionFontPanel}).service("sectionAlignmentManager",SectionAlignmentManager);var BodySectionDesignMenu=function(){function a(a,b,c){this.applicationState=a,this.flags=b,this.$translate=c,this.showBackground=!0,this.listBackgroundOptions=!1}return a.$inject=["applicationState","flags","$translate"],a.prototype.$postLink=function(){if(this.isListNode=this.item.node.isList(),this.isListNode){var a=this.item.node.children.find(function(a){return a.isListHeader()});this.listBackgroundOptions=a&&a.hasVisibleFields()}},Object.defineProperty(a.prototype,"fontPanelTitle",{get:function(){var a=this.flags.sectionAlignment?"builder.section-design.menu.font-alignment":"builder.section-design.menu.font";return this.$translate(a)},enumerable:!0,configurable:!0}),a.prototype.handleOptionClicked=function(){this.onOptionClicked&&this.onOptionClicked()},a.prototype.openBackgroundPanel=function(){this.applicationState.goToSectionBackgroundPanel(BIOrigins.SectionPanel),this.handleOptionClicked()},a.prototype.openHeaderBackgroundPanel=function(){this.applicationState.goToSectionHeaderBackgroundPanel(BIOrigins.SectionPanel),this.handleOptionClicked()},a.prototype.openListBackgroundPanel=function(){this.applicationState.goToSectionListBackgroundPanel(BIOrigins.SectionPanel),this.handleOptionClicked()},a.prototype.openColorPanel=function(){this.applicationState.goToSectionColorPanel(BIOrigins.SectionPanel),this.handleOptionClicked()},a.prototype.openFontPanel=function(){this.applicationState.goToSectionFontPanel(),this.handleOptionClicked()},a.prototype.openAnimationPanel=function(){this.applicationState.goToSectionAnimationPanel(),this.handleOptionClicked()},a}();angular.module("siteGeneratorStaticsConsumerAppInternal").component("bodySectionDesignMenu",{templateUrl:"views/design/section-design/body-section-design-menu.html",controller:BodySectionDesignMenu,bindings:{item:"<",onOptionClicked:"&"}});var HeaderDesignMenu=function(){function a(){}return a}();angular.module("siteGeneratorStaticsConsumerAppInternal").component("headerDesignMenu",{templateUrl:"views/design/section-design/header-design-menu.html",controller:HeaderDesignMenu,bindings:{item:"<"}});var SectionDesignMenu=function(){function a(a,b){var c=this;a(function(){var a=b.find('[data-hook="section-design-menu"]');c.isAllMenuVisible=window.innerHeight-a.offset().top>a[0].clientHeight})}return a.$inject=["$timeout","$element"],a.prototype.isHeaderNode=function(){return"GeneralDescription"===this.item.node.contentElementType&&"footer"!==this.item.node.containerPageId},a.prototype.$postLink=function(){this.isHeader=this.isHeaderNode()},a.prototype.notReady=function(){return void 0===this.isAllMenuVisible},a}();angular.module("siteGeneratorStaticsConsumerAppInternal").component("sectionDesignMenu",{templateUrl:"views/design/section-design/section-design-menu.html",controller:SectionDesignMenu,bindings:{item:"<",onOptionClicked:"&"}});var SectionDesignMenuDeprecated=function(){function a(a,b,c,d,e){var f=this;this.applicationState=a,this.flags=b,this.$element=c,this.$translate=d,this.$timeout=e,this.showBackground=!0,this.listBackgroundOptions=!1,this.$timeout(function(){var a=f.$element.find('[data-hook="section-design-menu"]');f.isAllMenuVisible=window.innerHeight-a.offset().top>a[0].clientHeight})}return a.$inject=["applicationState","flags","$element","$translate","$timeout"],a.prototype.isHeaderNode=function(){return"GeneralDescription"===this.item.node.contentElementType&&"footer"!==this.item.node.containerPageId},a.prototype.$postLink=function(){if(this.isHeader=this.isHeaderNode(),this.isHeader)return void(this.showBackground=!1);if(this.isListNode=this.item.node.isList(),this.isListNode){var a=this.item.node.children.find(function(a){return a.isListHeader()});this.listBackgroundOptions=a&&a.hasVisibleFields()}},Object.defineProperty(a.prototype,"fontPanelTitle",{get:function(){var a=this.flags.sectionAlignment?"builder.section-design.menu.font-alignment":"builder.section-design.menu.font";return this.$translate(a)},enumerable:!0,configurable:!0}),a.prototype.notReady=function(){return void 0===this.isAllMenuVisible},a.prototype.handleOptionClicked=function(){this.onOptionClicked&&this.onOptionClicked()},a.prototype.openBackgroundPanel=function(){this.applicationState.goToSectionBackgroundPanel(BIOrigins.SectionPanel),this.handleOptionClicked()},a.prototype.openHeaderBackgroundPanel=function(){this.applicationState.goToSectionHeaderBackgroundPanel(BIOrigins.SectionPanel),this.handleOptionClicked()},a.prototype.openListBackgroundPanel=function(){this.applicationState.goToSectionListBackgroundPanel(BIOrigins.SectionPanel),this.handleOptionClicked()},a.prototype.openColorPanel=function(){this.applicationState.goToSectionColorPanel(BIOrigins.SectionPanel),this.handleOptionClicked()},a.prototype.openFontPanel=function(){this.applicationState.goToSectionFontPanel(),this.handleOptionClicked()},a.prototype.openAnimationPanel=function(){this.applicationState.goToSectionAnimationPanel(),this.handleOptionClicked()},a}();angular.module("siteGeneratorStaticsConsumerAppInternal").component("sectionDesignMenuDeprecated",{templateUrl:"views/design/section-design/section-design-menu.html",controller:SectionDesignMenuDeprecated,bindings:{item:"<",onOptionClicked:"&"}});var HeaderBackground=function(){function a(a,b,c,d,e){this.themeChooser=a,this.undoRedo=b,this.headerPresetUtils=c,this.consumerBiLogger=d,this.consumerBiLoggerHelpers=e,this.init()}return a.$inject=["themeChooser","undoRedo","headerPresetUtils","consumerBiLogger","consumerBiLoggerHelpers"],a.prototype.init=function(){this.colors=this.headerPresetUtils.getHeaderAvailableBackgroundColors(),this.colors.length>1&&(this.current=this.themeChooser.getHeaderBg()),this.shouldShowHeaderBackground=this.colors.length>1},a.prototype.onColorSelected=function(a){var b=a.color,c=this.consumerBiLoggerHelpers.getSectionTypeAndAlias(),d=c[0],e=c[1],f=0===this.themeChooser.coloration.getActiveKitColorationMode()?"L":"D",g=this.colors.findIndex(function(a){return a.color===b});this.consumerBiLogger.sectionDesign.changeColorClick(e,d),this.headerPresetUtils.setHeaderBg(""+f+(g+1)),this.undoRedo.captureOperation(!1,!0),this.consumerBiLogger.sectionDesign.changeColorSuccess(e,d)},a}();angular.module("siteGeneratorStaticsConsumerAppInternal").component("headerBackground",{templateUrl:"views/design/header-design/header-background.html",controller:HeaderBackground});var HeaderType=function(){function a(a,b,c,d){this.undoRedo=a,this.consumerBiLogger=b,this.wizardService=c,this.mergedHeaderService=d,this.isFixed=c.isFixedHeader(),this.isTransparent=d.isHeaderMerged()}return a.$inject=["undoRedo","consumerBiLogger","wizardService","mergedHeaderService"],Object.defineProperty(a.prototype,"isSolid",{get:function(){return!this.isFixed&&!this.isTransparent},enumerable:!0,configurable:!0}),a.prototype.setSolid=function(){this.setHeaderProperties(!1,!1,"solid")},a.prototype.setTransparent=function(){this.setHeaderProperties(!1,!0,"transparent")},a.prototype.setFixed=function(){this.setHeaderProperties(!0,!1,"freeze")},a.prototype.setHeaderProperties=function(a,b,c){var d=this;if(this.isFixed!==a||this.isTransparent!==b){this.consumerBiLogger.sectionDesign.changeHeaderTransparencyStart("user",c);var e=[];this.isFixed!==a&&e.push(this.wizardService.setFixedHeader(a)),this.isTransparent!==b&&e.push(this.mergedHeaderService.setHeaderMerged(b,!0)),this.isFixed=a,this.isTransparent=b,this.undoRedo.captureOperation(),Promise.all(e).then(function(){return d.consumerBiLogger.sectionDesign.changeHeaderTransparencySuccess("user",c)})}},a}();angular.module("siteGeneratorStaticsConsumerAppInternal").component("headerType",{templateUrl:"views/design/header-design/header-type.html",controller:HeaderType});var SiteDesignMenu=function(){function a(a,b,c,d,e,f,g,h,i){var j=this;this.applicationState=a,this.flags=b,this.$scope=c,this.$element=d,this.$timeout=e,this.undoRedo=f,this.designKitManager=g,this.consumerBiLogger=h,this.colorationUtils=i,this.$timeout(function(){var a=j.$element.find('[data-hook="site-design-menu"]');j.isAllMenuVisible=window.innerHeight-a.offset().top>a[0].clientHeight}),i.initialize().then(function(){j.kit=j.designKitManager.getActiveTheme(),j.$scope.$watch(function(){return j.designKitManager.getActiveTheme()},function(a){return j.kit=a;
})})}return a.$inject=["applicationState","flags","$scope","$element","$timeout","undoRedo","designKitManager","consumerBiLogger","colorationUtils"],a.prototype.notReady=function(){return void 0===this.isAllMenuVisible},a.prototype.handleOptionClicked=function(){this.onOptionClicked&&this.onOptionClicked()},a.prototype.openColorPanel=function(){this.applicationState.goToColorationPanel(),this.handleOptionClicked()},a.prototype.openFontPanel=function(){this.applicationState.goToFontsPanel(BIOrigins.DesignPanel),this.handleOptionClicked()},a.prototype.openAnimationPanel=function(){this.applicationState.goToAnimationPanel(BIOrigins.DesignPanel),this.handleOptionClicked()},a.prototype.onReset=function(){var a=this;this.consumerBiLogger.siteDesign.clickOnResetDesign(!1),this.designKitManager.setActiveMainKit(this.kit.id).then(function(){a.consumerBiLogger.siteDesign.resetDesignSuccess(!1)})},a.prototype.kitHasOverrides=function(){return this.kit?(_.isUndefined(this.isReset)&&(this.isReset=this.designKitManager.isKitOveridden()),this.isReset):!1},a}();angular.module("siteGeneratorStaticsConsumerAppInternal").component("siteDesignMenu",{templateUrl:"views/design/site-design-menu.html",controller:SiteDesignMenu,bindings:{onOptionClicked:"&"}});var SectionOverrideWarning=function(){function a(a,b,c,d){this.$scope=a,this.$compile=b,this.$translate=c,this.$q=d,this.STEPS={INITIAL:"initial",CONFIRMED:"confirmed"},this.step=this.STEPS.INITIAL}return a.$inject=["$scope","$compile","$translate","$q"],a.prototype.overrideSections=function(){var a=this;this.$q.when().then(function(){return a.onOverrideSections()}).then(function(){a.step=a.STEPS.CONFIRMED})},a.prototype.showOverrideQuery=function(){return this.step===this.STEPS.INITIAL},a.prototype.showSuccess=function(){return this.step===this.STEPS.CONFIRMED},a}();angular.module("siteGeneratorStaticsConsumerAppInternal").component("sectionOverrideWarning",{templateUrl:"views/design/section-override-warning.html",controller:SectionOverrideWarning,bindings:{onOverrideSections:"&",show:"=",overrideMessage:"=",divider:"="}});var EnterToTab=function(){function a(a){this.experimentManager=a}return a.prototype.link=function(a,b){b.bind("keydown keypress",function(a){if(13===a.which){a.preventDefault();var b=$(this).parents("form:eq(0),body").find("input, textarea, select"),c=b.index(this);c>-1&&c+1<b.length&&b.eq(c+1).focus()}})},a}();angular.module("siteGeneratorCommon").directive("enterToTab",["experimentManager",function(a){return new EnterToTab(a)}]),angular.module("siteGeneratorStaticsConsumerAppInternal").config(["$provide",function(a){a.decorator("CcDialogBuilder",["$delegate","consumerBiLogger",function(a,b){function c(a,c){b.dialogs.approveChanges(null,null,null,a,c,null)}function d(a){b.dialogs.cancel(null,null,null,a,null)}function e(a){b.dialogs.show(null,null,null,a,null)}var f=a.show;return a.show=function(b){var g=f.apply(a,arguments);return b.customBi?g:(e(b.biDialogName),g.then(function(a){var d=b.biDialogTargetName;a&&(d=a.biDialogTargetName),c(b.biDialogName,d)},function(){d(b.biDialogName)}),g)},a}])}]),angular.module("exceptionOverwrite",[]).factory("$exceptionHandler",["$log","$injector",function(a,b){return function(c,d){a.error(c,d);var e=b.get("obMonitoring");e&&e.error(c.message,c)}}]);var InitBI=function(){function a(a,b,c){var d=this;this.flags=a,this.obMonitoring=b,this.consumerBiLogger=c,this.isNewSite=!1,this.reportStart=function(a){_.set(a,"data.isNewSite",d.isNewSite),d.obMonitoring.mark(a)},this.reportEnd=function(a){_.set(a,"data.isNewSite",d.isNewSite),d.obMonitoring.measure(a)},this.flags.silentBI&&this.consumerBiLogger.pauseBI()}return a.$inject=["flags","obMonitoring","consumerBiLogger"],a.prototype.reportError=function(a,b){this.obMonitoring.error("init flow error: "+JSON.stringify(a),{isNewSite:b})},a.prototype.startReportingInterval=function(a){var b=this;this.loadingBiInterval=setInterval(function(){b.consumerBiLogger.builder.stillLoadingSite(a?"new":"existing",5)},5e3)},a.prototype.stopReportingInterval=function(){clearInterval(this.loadingBiInterval)},a}();angular.module("siteGeneratorStaticsConsumerAppInternal").service("initBI",InitBI);var InitSetup=function(){function a(a,b,c,d,e,f,g,h,i,j,k,l,m,n,o,p,q,r,s){this.consumerBiLogger=a,this.consumerDialogs=b,this.mediaFrame=c,this.jsApiManager=d,this.$location=e,this.$translate=f,this.layoutSolver=g,this.mobileSolutionManager=h,this.sectionManager=i,this.mobileSectionManager=j,this.setTpaContentService=k,this.flags=l,this.$window=m,this.initStopwatch=n,this.initBI=o,this.initDebugPerformance=p,this.spinnerService=q,this.preloaderService=r,this.fullStoryLoader=s}return a.$inject=["consumerBiLogger","consumerDialogs","mediaFrame","jsApiManager","$location","$translate","layoutSolver","mobileSolutionManager","sectionManager","mobileSectionManager","setTpaContentService","flags","$window","initStopwatch","initBI","initDebugPerformance","spinnerService","preloaderService","fullStoryLoader"],a.prototype.setup=function(a){this.flags.normalizeLoadTime&&!a?this.initStopwatch.reset(this.$window.loadStartTime):this.initStopwatch.reset(),this.flags.debugPerformance&&this.initDebugPerformance.start(),a||this.initFullStory(),this.$window.name="ADI",this.initBI.startReportingInterval(a),this.handleServerErrors(),this.mediaFrame.warmup({vision:["face"]}),this.layoutSolver.registerWithOnPageCalculatedCallback(this.sectionManager.onPageCalculated.bind(this.sectionManager)),this.mobileSolutionManager.registerWithOnPartCalculatedCallback(this.mobileSectionManager.onPartCalculated.bind(this.mobileSectionManager)),this.setTpaContentService.registerWithBiLooger(this.consumerBiLogger)},a.prototype.initFullStory=function(){var a=this,b={label:"site-generator-statics-consumer",spec:"specs.ob.FullStory",onReady:function(b){return a.consumerBiLogger.intro.fullStoryStarted(b)}};this.fullStoryLoader(b)},a.prototype.preventRestartOnHandledErrors=function(a){a&&(a.handledEvent=!0)},a.prototype.showFatalErrorDialog=function(a){this.$window.onbeforeunload=null,this.spinnerService.isFirstTime=!1,this.spinnerService.isFatalError=!0,this.spinnerService.disable(),this.preloaderService.stop(),this.consumerDialogs.showDialog(a)},a.prototype.redirectToDashboard=function(){this.$window.onbeforeunload=null,this.$window.location.replace(this.$translate("url.dashboard"))},a.prototype.handleServerErrors=function(){var a=this;this.jsApiManager.onSessionExpired(function(b){a.preventRestartOnHandledErrors(b),a.showFatalErrorDialog(ConsumerDialogTypes.SESSION_EXPIRED_POPUP)}),this.jsApiManager.onConflictingChanges(function(b){a.preventRestartOnHandledErrors(b),a.showFatalErrorDialog(ConsumerDialogTypes.STORY_CONFLICTING_CHANGES_POPUP)}),this.jsApiManager.onSiteNotManagedByOB(function(b){a.preventRestartOnHandledErrors(b),a.flags.redirectToDashboard?a.redirectToDashboard():a.showFatalErrorDialog(ConsumerDialogTypes.SITE_NOT_MANAGED_BY_OB_POPUP)}),this.flags.redirectToDashboard&&this.jsApiManager.onStoryArchived(function(b){a.preventRestartOnHandledErrors(b),a.redirectToDashboard()})},a}();angular.module("siteGeneratorStaticsConsumerAppInternal").service("initSetup",InitSetup);var InitSiteData=function(){function a(a,b,c,d,e,f,g,h,i,j,k,l,m,n,o,p,q,r,s,t){this.applicationParameters=a,this.introModelTree=b,this.storyServices=c,this.contentSource=d,this.sectionManager=e,this.layoutSolver=f,this.undoRedo=g,this.wizardService=h,this.introManager=i,this.$q=j,this.flags=k,this.introMediaUploader=l,this.$window=m,this.tpaService=n,this.$interval=o,this.silentPageBuilder=p,this.consumerBiLogger=q,this.$timeout=r,this.initTPA=s,this.initBI=t,this.isInInitNewSiteData=!1,this.isLoadedDefer=this.$q.defer()}return a.$inject=["applicationParameters","introModelTree","storyServices","contentSource","sectionManager","layoutSolver","undoRedo","wizardService","introManager","$q","flags","introMediaUploader","$window","tpaService","$interval","silentPageBuilder","consumerBiLogger","$timeout","initTPA","initBI"],a.prototype.loaded=function(){return this.isLoadedDefer.promise},a.prototype.updateIntroDataByUserValues=function(a){var b=this,c=_.map(_.filter(this.introManager.data.socialLinks,function(a){return a.constForWixWiz&&a.url}),function(a){return a.url}),d=_.find(a,function(a){return"contactDetails.website"===a});(_.any(c)||d)&&(this.introManager.data.urls=_.map(this.introManager.data.socialLinks,function(a){return a.url}),d&&this.introManager.data.urls.push(this.introManager.data.contactDetails.website),this.extendedUserDataPromise=Promise.any([this.introManager.getExtendedUserByPathsToNotUpdate(this.introManager.data)]).then(function(c){b.isInInitNewSiteData?(b.introManager.data.media=_.cloneDeep(c.dataModel.media),b.introMediaUploader.upload(b.storyName)):b.introManager.updateDataByModelAndUserValuesPaths(c.dataModel,a)}))},a.prototype.init=function(a,b){return a?this.initNewSiteData(b):this.isLoadedDefer.resolve(),this.isLoadedDefer.promise},a.prototype.waitBeforeContinue=function(){return this.flags.introWebsiteAddressField?Promise.any([this.extendedUserDataPromise,this.$timeout(2e3)]):this.$q.when()},a.prototype.initNewSiteData=function(a){var b=this;return this.flags.newBIInitEvents||this.consumerBiLogger.builder.firstTimeInitDataUploadMediaFromIntro(),this.initBI.reportStart({name:BIInitSteps.InitSiteData,init:!0}),this.waitBeforeContinue().then(function(){b.isInInitNewSiteData=!0,b.storyName=a,b.introMediaUploader.upload(a).then(function(){return b.generateInitialContent()}).then(function(){return b.undoRedo.captureInitialState(),b.sendBIForRecommendedTPAs(),b.provisionTPAs()}).then(function(){return b.flags.noTour||b.$window.adiRunningOnServer?b.silentPageBuilder.constructAnyHomePage():b.$q.when()}).then(function(){return b.initialSave()}).then(function(){return b.render()}).then(function(){return b.fullSave()}).then(function(){b.initBI.reportEnd({name:BIInitSteps.InitSiteData,init:!0}),b.isLoadedDefer.resolve()})})},a.prototype.generateInitialContent=function(){var a=this;return!this.flags.newBIInitEvents&&this.consumerBiLogger.builder.firstTimeInitDataGenerateInitialContent(),this.initBI.reportStart({name:BIInitSteps.GenerateInitialContent,parent:BIInitSteps.InitSiteData,init:!0}),this.introModelTree.generateAll().then(function(){a.initBI.reportEnd({name:BIInitSteps.GenerateInitialContent,parent:BIInitSteps.InitSiteData,init:!0})})},a.prototype.initialSave=function(){var a=this;return!this.flags.newBIInitEvents&&this.consumerBiLogger.builder.firstTimeInitDataSaveStory(),this.initBI.reportStart({name:BIInitSteps.InitialSave,parent:BIInitSteps.InitSiteData,init:!0}),this.storyServices.story.save().then(function(){a.initBI.reportEnd({name:BIInitSteps.InitialSave,parent:BIInitSteps.InitSiteData,init:!0})})},a.prototype.fullSave=function(){var a=this,b=this.tpaService.isTpaAdded(this.applicationParameters.tpaTypes.Blog.type)||this.tpaService.isTpaAdded(this.applicationParameters.tpaTypes.Bookings.type)||this.tpaService.isTpaAdded(this.applicationParameters.tpaTypes.Stores.type),c=b?"DS":"ADI";!this.flags.newBIInitEvents&&this.consumerBiLogger.builder.firstTimeInitDataSaveDsIfTpaSaveLocalOtherwise(c),this.initBI.reportStart({name:b?BIInitSteps.DocumentServicesSave:BIInitSteps.FullSave,parent:BIInitSteps.InitSiteData,init:!0});var d=b?this.wizardService.publishStory(void 0,void 0,!0):this.storyServices.story.save();return d.then(function(){a.initBI.reportEnd({name:b?BIInitSteps.DocumentServicesSave:BIInitSteps.FullSave,parent:BIInitSteps.InitSiteData,init:!0})})},a.prototype.render=function(){var a=this;return!this.flags.newBIInitEvents&&this.consumerBiLogger.builder.firstTimeInitDataLayoutSolverRender(),this.initBI.reportStart({name:BIInitSteps.LayoutSolverRender,parent:BIInitSteps.InitSiteData,init:!0}),this.layoutSolver.onNodeChanged().then(function(){return a.initBI.reportEnd({name:BIInitSteps.LayoutSolverRender,parent:BIInitSteps.InitSiteData,init:!0})})},a.prototype.provisionTPAs=function(){var a=this;return this.initBI.reportStart({name:BIInitSteps.ProvisionTPAs,parent:BIInitSteps.InitSiteData,init:!0}),this.initTPA.fromSelectedOffers().then(function(){a.initBI.reportEnd({name:BIInitSteps.ProvisionTPAs,parent:BIInitSteps.InitSiteData,init:!0})})},a.prototype.sendBIForRecommendedTPAs=function(){this.contentSource.suggestedSections().suggestions.filter(this.isSectionRecommended).filter(this.isSectionTPA.bind(this)).map(this.sectionToTpaType.bind(this)).forEach(this.reportTPAType.bind(this))},a.prototype.isSectionRecommended=function(a){return a.isRecommendedForPage},a.prototype.isSectionTPA=function(a){var b=_.first(this.sectionManager.prepareDrafts(a,[]));return a.ceType.indexOf("_Widget")>-1||b&&b.isTpaNode&&b.isTpaNode()},a.prototype.sectionToTpaType=function(a){return this.applicationParameters.tpaTypes[a.ceType.split("_")[0]||""]},a.prototype.reportTPAType=function(a){if(a){var b=a.type,c=a.appId;this.consumerBiLogger.sectionManagement.planToAddTpaInWelcomeTour("recommended",c,b)}},a}();angular.module("siteGeneratorStaticsConsumerAppInternal").service("initSiteData",InitSiteData);var InitContent=function(){function a(a,b,c,d,e){this.contentManager=a,this.introManager=b,this.flags=c,this.tpaService=d,this.initBI=e}return a.$inject=["contentManager","introManager","flags","tpaService","initBI"],a.prototype.fromStory=function(a){a.selectedOffers=a.selectedOffers||[],a.privateMediaFolderId=a.privateMediaFolderId||"",a.popupConfigurations=a.popupConfigurations||{},this.flags.introWebsiteAddressField&&(a.websiteUrl=a.websiteUrl||""),this.flags.storeTourStateInStory&&(a.tourState=a.tourState||{});var b={industryId:a.industryId,structureId:a.structureId};return this.fromContentId(b)},a.prototype.fromContentId=function(a){var b=this;return this.contentManager.initialize(a).then(function(){return b.setTpaTemplateIds()})},Object.defineProperty(a.prototype,"hasIntroData",{get:function(){var a=this.introManager.data;return a&&a.category&&null!==a.category.industryId&&null!==a.category.structureId},enumerable:!0,configurable:!0}),a.prototype.setTpaTemplateIds=function(){this.tpaService.setTpaTypeToTemplateIdMap(this.contentManager.getTpaMetaSiteIds())},a}();angular.module("siteGeneratorStaticsConsumerAppInternal").service("initContent",InitContent);var InitTPA=function(){function a(a,b,c,d,e,f,g,h,i,j,k,l,m){this.$q=a,this.flags=b,this.applicationParameters=c,this.pagesManager=d,this.modelTree=e,this.storyServices=f,this.sectionManager=g,this.nodeManipulationService=h,this.previewService=i,this.tpaService=j,this.assistantUtils=k,this.consumerBiLogger=l,this.initBI=m}return a.$inject=["$q","flags","applicationParameters","pagesManager","modelTree","storyServices","sectionManager","nodeManipulationService","previewService","tpaService","assistantUtils","consumerBiLogger","initBI"],a.prototype.fromSelectedOffers=function(){var a=this;return this.flags.newBIInitEvents||this.consumerBiLogger.builder.firstTimeInitDataProvisionTpas(),_.sequencePromises(this.storyServices.story.selectedOffers,function(b){var c=a.applicationParameters.tpaTypes[b.type||""];b.checked&&a.reportTPAAddition(c);var d=c&&c.type,e=b.checked||a.isStoreAutoProvision(d)||a.isBlogAutoProvision(d);return(a.isStoreAutoProvision(d)||a.isBlogAutoProvision(d))&&(b.autoProvisioned=!0),e&&a.shouldProvisionTPA(d)?a.previewService.waitForChanges().then(function(){return a.handleTpaNode(d)}):a.$q.when(!0)})},a.prototype.reportTPAAddition=function(b){var c=b.type,d="Blog"===c?a.BLOG_APP_ID:b.appId;this.consumerBiLogger.sectionManagement.planToAddTpaInWelcomeTour("intro",d,c)},a.prototype.shouldProvisionTPA=function(a){return a&&!this.tpaService.isTpaAdded(a)&&a!==this.applicationParameters.tpaTypes.GetSubscribers.type},a.prototype.handleTpaNode=function(a){var b=this,c=_.find(this.modelTree.getTpaNodes(),{contentElementType:a}),d=this.tpaService.getAppId(c);return this.consumerBiLogger.builder.firstTimeCreateTpa(d),this.sectionManager.addTpa(c,void 0,{}).then(function(c){var e=_.find(c.children,{contentElementType:a}),f=b.tpaService.getInstanceId(e);return d&&f&&(b.consumerBiLogger.provisioning.tpaIntent(f,d,"AUTO_ADD_APP","ADI"),d===b.applicationParameters.tpaTypes.Bookings.appId&&b.flags.shouldReportAppEngagement&&b.consumerBiLogger.provisioning.tpaAppEngagement(f,d,"FREE")),b.isBlogAutoProvision(a)?b.handleBlogTPA(c):void 0})},a.prototype.handleBlogTPA=function(b){this.consumerBiLogger.sectionManagement.planToAddTpaInWelcomeTour("intro",a.BLOG_APP_ID,"blogHP");var c=this.modelTree.homePageId;this.storyServices.story.selectedPage=b.id;var d=this.pagesManager.getPageIdByName(b.id);this.previewService.getDocumentServices().homePage.set(d),this.modelTree.homePageId=b.id;var e=this.$q.defer();return this.nodeManipulationService.deletePageById(c,"body",_.noop,function(){return e.resolve()}),e.promise},a.prototype.isBlogAutoProvision=function(a){return a===this.applicationParameters.tpaTypes.Blog.type&&this.assistantUtils.shouldAutoProvisionTPAOfType("Blog")},a.prototype.isStoreAutoProvision=function(a){return a===this.applicationParameters.tpaTypes.Stores.type&&this.assistantUtils.shouldAutoProvisionTPAOfType("Stores")},a}();InitTPA.BLOG_APP_ID="61f33d50-3002-4882-ae86-d319c1a249ab",angular.module("siteGeneratorStaticsConsumerAppInternal").service("initTPA",InitTPA);var InitNewStory=function(){function a(a,b,c,d,e,f,g,h,i,j,k,l,m,n,o,p,q,r,s,t,u,v,w){this.$q=a,this.Story=b,this.metaDataService=c,this.applicationState=d,this.modelTree=e,this.storyServices=f,this.wizardService=g,this.flags=h,this.siteNameApi=i,this.metaSiteApi=j,this.introManager=k,this.contentManager=l,this.$location=m,this.themeChooser=n,this.spinnerService=o,this.consumerBiLogger=p,this.consumerBiLoggerHelpers=q,this.initBI=r,this.initStopwatch=s,this.initContent=t,this.animationKit=u,this.backgroundScrollService=v,this.pagesManager=w}return a.$inject=["$q","Story","metaDataService","applicationState","modelTree","storyServices","wizardService","flags","siteNameApi","metaSiteApi","introManager","contentManager","$location","themeChooser","spinnerService","consumerBiLogger","consumerBiLoggerHelpers","initBI","initStopwatch","initContent","animationKit","backgroundScrollService","pagesManager"],a.prototype.createStoryInternal=function(a){var b=this;if(void 0===a&&(a=!1),this.setDefaultBIValues(),this.introManager.data=this.introManager.data?this.introManager.data:this.getFallbackIntroData(),!this.introManager.data.name)throw"no business name? no service! come back one year!";return this.flags.newBIInitEvents||this.consumerBiLogger.builder.firstTimeCreatestoryGetUniqueName(),this.getUniqueName().then(function(c){return b.saveNewStory(c,a)}).then(function(a){return b.handleStoryCreated(a)}).then(function(){return b.loadMetadataAndContent()}).then(function(){return b.setMainKit()}).then(function(){return b.initCore()}).then(function(){return b.initStoryData()}).then(function(){return b.setSiteProperties()}).then(function(){return b.backgroundScrollService.setDefaultScrollType()}).then(function(){return b.pagesManager.setDefaultPagesTransition()}).then(function(){return b.newStoryName})},a.prototype.createStory=function(a){return a||(this.spinnerService.isFirstTime=!0),this.createStoryInternal(a)},a.prototype.getUniqueName=function(){var a=this;return this.initBI.reportStart({name:BICreateStorySteps.GetUniqueName,parent:BIInitSteps.InitStory,init:!0}),this.siteNameApi.getUniqueName(this.introManager.data.name).then(function(b){return a.initBI.reportEnd({name:BICreateStorySteps.GetUniqueName,parent:BIInitSteps.InitStory,init:!0}),b})},a.prototype.initCore=function(){var a=this;return this.flags.newBIInitEvents||this.consumerBiLogger.builder.firstTimeCreatestoryWizardserviceInitA(),this.initBI.reportStart({name:BICreateStorySteps.InitCoreA,parent:BIInitSteps.InitStory,init:!0}),this.wizardService.init(this.storyServices.story,void 0,!0).then(function(){return a.initBI.reportEnd({name:BICreateStorySteps.InitCoreA,parent:BIInitSteps.InitStory,init:!0})})},a.prototype.setDefaultBIValues=function(){this.initContent.hasIntroData&&(this.consumerBiLoggerHelpers.setDefaultValue("industryId",this.introManager.data.category.industryId),this.consumerBiLoggerHelpers.setDefaultValue("structureId",this.introManager.data.category.structureId))},a.prototype.setSiteProperties=function(){var a=this;return this.introManager.data?(this.flags.newBIInitEvents||this.consumerBiLogger.builder.firstTimeCreatestorySetSiteProperties(),this.initBI.reportStart({name:BICreateStorySteps.SetSiteProperties,parent:BIInitSteps.InitStory,init:!0}),this.metaSiteApi.setSiteProperties(this.storyServices.metaSiteId,this.introManager.siteProperties).then(function(){a.initBI.reportEnd({name:BICreateStorySteps.SetSiteProperties,parent:BIInitSteps.InitStory,init:!0})})["catch"](function(b){var c=b.stack?b.stack:b;a.consumerBiLogger.err(BIErrorCodes.InitSetPropertiesFailed,"failed to set site properties: "+c+" \n "+JSON.stringify(a.introManager.siteProperties))})):void 0},a.prototype.initStoryData=function(){var a=this.storyServices.story.getActiveLocale();a.savedSites.undefined.pagesMap={},a.savedSites.undefined.nodesRefMap={},this.modelTree.getPagesNodes()[0].alias="Home"},a.prototype.saveNewStory=function(a,b){var c=this;return void 0===b&&(b=!1),this.flags.newBIInitEvents||this.consumerBiLogger.builder.firstTimeCreatestorySaveNewStory(),this.initBI.reportStart({name:BICreateStorySteps.SaveNewStory,parent:BIInitSteps.InitStory,init:!0}),this.newStoryName=a,this.Story.create().save("website",b).then(function(a){return c.initBI.reportEnd({name:BICreateStorySteps.SaveNewStory,parent:BIInitSteps.InitStory,init:!0}),a})},a.prototype.handleStoryCreated=function(a){this.storyServices.calculateMaxPageAndNodeId(a),this.storyServices.story=a},a.prototype.setMainKit=function(){var a=this.contentManager.getKitIds();a&&a.length>0&&(this.flags.newBIInitEvents||this.consumerBiLogger.builder.firstTimeCreatestorySetMainKit(),this.initBI.reportStart({name:BICreateStorySteps.SetMainKit,parent:BIInitSteps.InitStory,init:!0}),this.themeChooser.serializeMainKitSelection(a[0]),this.initBI.reportEnd({name:BICreateStorySteps.SetMainKit,parent:BIInitSteps.InitStory,init:!0}))},a.prototype.loadMetadataAndContent=function(){return this.flags.newBIInitEvents||this.consumerBiLogger.builder.firstTimeCreatestoryGetMetadataInitContent(),this.$q.all([this.getMetadata(),this.initContentFromStory()])},a.prototype.initContentFromStory=function(){var a=this;return this.initBI.reportStart({name:BICreateStorySteps.InitContent,parent:BIInitSteps.InitStory,init:!0}),this.initContent.fromStory(this.storyServices.story).then(function(){a.flags.newBIInitEvents||a.consumerBiLogger.builder.firstTimeCreatestoryInitContentCompleted(),a.initBI.reportEnd({name:BICreateStorySteps.InitContent,parent:BIInitSteps.InitStory,init:!0})})},a.prototype.getMetadata=function(){var a=this;return this.initBI.reportStart({name:BICreateStorySteps.GetMetadata,parent:BIInitSteps.InitStory,init:!0}),this.metaDataService.getMetadata(this.storyServices.story.id,this.applicationState.setStoryMetadata.bind(this.applicationState)).then(function(){a.flags.newBIInitEvents||a.consumerBiLogger.builder.firstTimeCreatestoryGetMetadataCompleted(),a.initBI.reportEnd({name:BICreateStorySteps.GetMetadata,parent:BIInitSteps.InitStory,init:!0})})},a.prototype.getFallbackIntroData=function(){var a=this.$location.search();return{name:_.has(a,"businessName")?a.businessName:"Missing Name Inc",category:{industryId:_.has(a,"industryId")?a.industryId:"e79e5765052b89b579c9a4c2",structureId:_.has(a,"structureId")?a.structureId:"40dc538a8a6c3e2dae342922"}}},a}();angular.module("siteGeneratorStaticsConsumerAppInternal").service("initNewStory",InitNewStory);var InitExistingStory=function(){function a(a,b,c,d,e,f,g,h,i,j,k,l,m,n,o,p){this.Story=a,this.metaDataService=b,this.applicationState=c,this.applicationParameters=d,this.modelTree=e,this.storyServices=f,this.pagesManager=g,this.tpaService=h,this.wizardService=i,this.flags=j,this.undoRedo=k,this.consumerBiLogger=l,this.consumerBiLoggerHelpers=m,this.initStopwatch=n,this.initContent=o,this.initBI=p}return a.$inject=["Story","metaDataService","applicationState","applicationParameters","modelTree","storyServices","pagesManager","tpaService","wizardService","flags","undoRedo","consumerBiLogger","consumerBiLoggerHelpers","initStopwatch","initContent","initBI"],a.prototype.fromId=function(a,b){var c=this;return this.setDefaultBIValues(a),this.loadStoryMetadata(a,b).then(function(){return c.loadStory(a)}).then(function(a){return c.initWizardService(a,b)}).then(function(){c.backwardCompatibility(),c.undoRedo.captureInitialState(),c.handleDeepLink()})},a.prototype.setDefaultBIValues=function(a){var b=a.split(/:/);this.consumerBiLoggerHelpers.setDefaultValue("instanceId",b[0]),this.consumerBiLoggerHelpers.setDefaultValue("metaSiteId",b[1]),this.consumerBiLoggerHelpers.setDefaultValue("industryId",null),this.consumerBiLoggerHelpers.setDefaultValue("structureId",null)},a.prototype.loadStoryMetadata=function(a,b){var c=this;return this.flags.newBIInitEvents||b||this.consumerBiLogger.builder.existingSiteLoadstoryGetMetadata(),this.initBI.reportStart({name:BILoadStorySteps.GetMetadata,parent:BIInitSteps.InitStory,init:!0}),this.metaDataService.getMetadata(a,function(a){return c.applicationState.setStoryMetadata(a)}).then(function(){return c.initBI.reportEnd({name:BILoadStorySteps.GetMetadata,parent:BIInitSteps.InitStory,init:!0})})},a.prototype.loadStory=function(a){var b=this;return this.flags.newBIInitEvents||this.consumerBiLogger.builder.existingSiteLoadstoryLoadStory(),this.initBI.reportStart({name:BILoadStorySteps.FetchStory,parent:BIInitSteps.InitStory,init:!0}),this.Story.find(a).then(function(a){return b.initBI.reportEnd({name:BILoadStorySteps.FetchStory,parent:BIInitSteps.InitStory,init:!0}),b.storyServices.calculateMaxPageAndNodeId(a),a})},a.prototype.initWizardService=function(a,b){var c=this;return this.flags.newBIInitEvents||b||this.consumerBiLogger.builder.existingSiteLoadstoryWizardserviceInitA(),this.initBI.reportStart({name:BILoadStorySteps.InitCoreA,parent:BIInitSteps.InitStory,init:!0}),this.wizardService.init(a).then(function(){return c.initBI.reportEnd({name:BILoadStorySteps.InitCoreA,parent:BIInitSteps.InitStory,init:!0})})},a.prototype.backwardCompatibility=function(){this.flags.newBIInitEvents||this.consumerBiLogger.builder.existingSiteLoadstoryBackwardCompatibility(),this.initBI.reportStart({name:BILoadStorySteps.BackwardCompatibility,parent:BIInitSteps.InitStory,init:!0});var a=this.modelTree.getPagesNodes();_.find(a,{alias:void 0})&&_.each(a,function(a){a.alias=_.get(a,["contentElement","values","pageTitleSEO","value"])}),this.patchIndustryIds(),this.initBI.reportEnd({name:BILoadStorySteps.BackwardCompatibility,parent:BIInitSteps.InitStory,init:!0})},a.prototype.patchIndustryIds=function(){var a=this,b=[{oldId:"b0a520919b99728bae200018",newId:"c4e29ccec1b3103f4caa52f0"},{oldId:"3a6327d9c3946eefcfe6d513",newId:"a16519bdf44907db3cd5a989"},{oldId:"f19b3125657d6a267d2c47d8",newId:"88b56978690cff09a18247c1"},{oldId:"190a5ffad4f67ad6e22ad08d",newId:"f540e5a65f637e7cd869f5b9"}],c=_.find(b,function(b){return b.oldId===a.storyServices.story.industryId});c&&(this.storyServices.story.industryId=c.newId)},a.prototype.handleDeepLink=function(){if(this.flags.deepLink&&this.tpaService){this.flags.newBIInitEvents||this.consumerBiLogger.builder.existingSiteLoadstoryHandleDeepLink(),this.initBI.reportStart({name:BILoadStorySteps.DeepLink,parent:BIInitSteps.InitStory,init:!0});var a=this.applicationParameters.tpaTypes[this.flags.deepLink];if(a&&this.tpaService.isTpaAdded(a.type)){var b=this.pagesManager.getPageNodeIdBySantaPageId(this.tpaService.getPageIdByTpaType(a.type));b&&(this.storyServices.story.selectedPage=b,this.pagesManager.goToPage(b))}this.initBI.reportEnd({name:BILoadStorySteps.DeepLink,parent:BIInitSteps.InitStory,init:!0})}},a}();angular.module("siteGeneratorStaticsConsumerAppInternal").service("initExistingStory",InitExistingStory);var InitService=function(){function a(a,b,c,d,e,f,g,h,i,j,k,l,m,n,o,p,q,r,s,t,u,v,w,x,y,z,A,B,C,D,E,F,G,H,I,J,K,L,M,N,O,P,Q,R,S,T,U,V,W){var X=this;this.consumerMenu=a,this.applicationParameters=b,this.metaDataService=c,this.applicationState=d,this.storyServices=e,this.$stateParams=f,this.$state=g,this.wizardService=h,this.wizardCallbacksService=i,this.renderSiteChanges=j,this.flags=k,this.undoRedo=l,this.$q=m,this.$document=n,this.$location=o,this.previewService=p,this.tpaPostMessageService=q,this.consumerBiLogger=r,this.consumerBiLoggerHelpers=s,this.saleService=t,this.initStopwatch=u,this.initContent=v,this.initBI=w,this.initSetup=x,this.initSiteData=y,this.initNewStory=z,this.initExistingStory=A,this.initDebugPerformance=B,this.introManager=C,this.wixWizIntegration=D,this.BackendStory=E,this.assistantManager=F,this.assistantUtils=G,this.assistantTaskFetcher=H,this.$log=I,this.$timeout=J,this.sectionManager=K,this.documentServicesMediator=L,this.$window=M,this.spinnerService=N,this.preloaderService=O,this.renderer=P,this.mobileRenderer=Q,this.renderedModelApi=R,this.mobileRenderedModelApi=S,this.modelSiteChanges=T,this.publishService=U,this.healthCheck=W,this.spinnerWasDisabled=!1,this.onIntroStepChanged=function(a,b,c,d){if("next"===c)if("before"===d)switch(a.name){case intro.INTRO_STATES.INTRO_EDIT_USER:X.flags.introWebsiteAddressField&&X.initSiteData.updateIntroDataByUserValues(a.userValues)}else if("after"===d)switch(a.name){case intro.INTRO_STATES.INTRO_CATEGORY_SEARCH:case intro.INTRO_STATES.INTRO_BUSINESS_TYPE:("content"===X.flags.initDuringIntro||"preview"===X.flags.initDuringIntro)&&X.initContent.fromContentId(a.category);break;case intro.INTRO_STATES.INTRO_BUSINESS_NAME:if("preview"===X.flags.initDuringIntro){var e=X.introManager.getStoryId();X.executeWithoutSpinner(function(){return X.getStory(e,!0)})}}},(k.initDuringIntro||k.introWebsiteAddressField)&&(this.stopListenToIntro=V.listenStepChange(this.onIntroStepChanged)),this.loadedDeferred=m.defer(),this.loadedPromise=this.loadedDeferred.promise}return a.$inject=["consumerMenu","applicationParameters","metaDataService","applicationState","storyServices","$stateParams","$state","wizardService","wizardCallbacksService","renderSiteChanges","flags","undoRedo","$q","$document","$location","previewService","tpaPostMessageService","consumerBiLogger","consumerBiLoggerHelpers","saleService","initStopwatch","initContent","initBI","initSetup","initSiteData","initNewStory","initExistingStory","initDebugPerformance","introManager","wixWizIntegration","BackendStory","assistantManager","assistantUtils","assistantTaskFetcher","$log","$timeout","sectionManager","documentServicesMediator","$window","spinnerService","preloaderService","renderer","mobileRenderer","renderedModelApi","mobileRenderedModelApi","modelSiteChanges","publishService","introEventsEmitter","healthCheck"],a.prototype.loaded=function(){return"preview"===this.flags.initDuringIntro?this.loadedPromise:this.init()},a.prototype.init=function(){var a=this;if(this.initPromise)return this.initPromise;this.spinnerWasDisabled&&this.spinnerService.enable();var b=this.flags.silentMode,c=this.$stateParams.storyId;return this.initBI.reportStart({name:"init"}),this.preInit(c),this.initPromise=this.getStory(c,!1).then(function(){return a.ensureStoryIdParam()}).then(function(){return a.maybeStartAssistant()}).then(function(){return a.initCoreWaitForChanges()}).then(function(){return a.initSupportMode()}).then(function(){return a.initSiteData.init(a.isNewSite,a.newStoryName)}).then(function(){return a.tpaPostMessageService.init(a.previewService.getDocumentServices())}).then(function(){return a.asyncLoadCampaign()}).then(function(){return a.listenToRenderChanges()}).then(function(){return a.applicationState.init()}).then(function(){return a.fastGetMetadataForLoadedStory(c)}).then(function(){return a.sendSiteSourcesToWixWiz()}).then(function(){return c&&a.sectionManager.recalculatePagesWithRemovedNodes();
}).then(function(){return a.consumerMenu.calcMenuAnchors()}).then(function(){return a.handleLoadingDone("true")}).then(function(){return a.adiOnServer(null)},function(b){return a.adiOnServer(b)})["catch"](function(b){return a.$log.error(b.stack),a.handleLoadingError(b),a.handleLoadingDone("false"),a.$q.reject("init failed")}).then(function(){a.initBI.reportEnd({name:"init"}),a.flags.silentMode=b,a.stopPreloader(),a.loadedDeferred.resolve(),"preview"===a.flags.initDuringIntro&&a.storyServices.story.isDraft&&(a.storyServices.story.markCreated(),a.storyServices.story.isDraft=!1),a.flags.openAssistantMenuForExistingSites&&!a.isNewSite&&a.assistantManager.openMenu()}),this.initPromise},a.prototype.isBuilderValidState=function(){var a=this.$location.search();return this.$stateParams.storyId||this.initContent.hasIntroData||_.has(a,"industryId")&&_.has(a,"structureId")},a.prototype.preInit=function(a){this.isNewSite=!a,this.initBI.isNewSite=this.isNewSite,this.consumerBiLoggerHelpers.setDefaultValue("isNewSite",this.isNewSite?"true":"false"),this.isNewSite?this.consumerBiLogger.builder.firstTimeStart("intro"):this.flags.normalizeLoadTime||this.consumerBiLogger.builder.existingSiteStart("home"),this.initSetup.setup(this.isNewSite),this.searchUrls=this.introManager.data&&this.introManager.data.searchUrls,this.isNewSite||this.startPreloader()},a.prototype.startPreloader=function(){this.flags.newPreloader&&(this.preloaderService.start(),this.spinnerService.disable())},a.prototype.stopPreloader=function(){this.flags.newPreloader&&(this.spinnerService.enable(),this.preloaderService.stop())},a.prototype.maybeStartAssistant=function(){return this.flags.emptyPage?(this.assistantManager.setDockStatus(builders.AssistantDockStatus.Stopped),$("builder").addClass("-without-overlay"),void this.assistantManager.openMenu()):(this.flags.silentMode=!0,void this.initAssistant())},a.prototype.initCoreWaitForChanges=function(){var a=this;return this.flags.newBIInitEvents||(this.isNewSite?this.consumerBiLogger.builder.firstTimeWizardserviceInitBFinalizeCoreInit():this.consumerBiLogger.builder.existingSiteWizardserviceInitBFinializeCoreInit()),this.initBI.reportStart({name:BIInitSteps.InitCoreB,init:!0}),this.wizardService.initAfterWaitForChanges(this.storyServices.story,this.isNewSite).then(function(){return a.initBI.reportEnd({name:BIInitSteps.InitCoreB,init:!0})})},a.prototype.asyncLoadCampaign=function(){var a=this;this.flags.newBIInitEvents||(this.isNewSite?this.consumerBiLogger.builder.firstTimeLoadCampaignLoadCampaignDataAsync():this.consumerBiLogger.builder.existingSiteLoadCampaignLoadCampaignDataAsync()),this.initBI.reportStart({name:BIInitSteps.LoadCampaign,init:!0}),this.saleService.loadCampaign().then(function(){a.flags.newBIInitEvents||(a.isNewSite?a.consumerBiLogger.builder.firstTimeLoadCampaignLoadCampaignDataComplete():a.consumerBiLogger.builder.existingSiteLoadCampaignLoadCampaignDataComplete()),a.initBI.reportEnd({name:BIInitSteps.LoadCampaign,init:!0})})},a.prototype.listenToRenderChanges=function(){var a=this;return this.flags.newBIInitEvents||(this.isNewSite?this.consumerBiLogger.builder.firstTimeRenderSiteDataListenToSantaChanges():this.consumerBiLogger.builder.existingSiteRenderSiteDataListenToSantaChanges()),this.initBI.reportStart({name:BIInitSteps.ListenToSiteChanges,init:!0}),(this.flags.renderedModel?this.modelSiteChanges.activate():this.renderSiteChanges.activate().then(function(b){b&&a.renderer.updateHeightIfChanged()})).then(function(){return a.initBI.reportEnd({name:BIInitSteps.ListenToSiteChanges,init:!0})})},a.prototype.initSupportMode=function(){this.applicationState.isSupportStaffEditing(!0)&&this.undoRedo.setSupportMode()},a.prototype.fastGetMetadataForLoadedStory=function(a){var b=this;a&&this.metaDataService.getMetadata(a,this.applicationState.setStoryMetadata.bind(this.applicationState)).then(function(){return!b.flags.newBIInitEvents&&b.consumerBiLogger.builder.existingSiteInitContent(),b.initBI.reportStart({name:BIInitSteps.InitContent,init:!0}),b.initContent.fromStory(b.storyServices.story)}).then(function(){b.initBI.reportEnd({name:BIInitSteps.InitContent,init:!0})})},a.prototype.getStory=function(a,b){var c=this;return this.storyPromise?this.storyPromise:(this.initBI.reportStart({name:BIInitSteps.InitStory,init:!0}),this.storyPromise=a?this.initExistingStory.fromId(a,b):this.initNewStory.createStory(b).then(function(a){c.newStoryName=a;var b=c.storyServices.story.id;c.introManager.setStoryId(b)}),this.storyPromise=this.storyPromise.then(function(){return c.initBI.reportEnd({name:BIInitSteps.InitStory,init:!0})}),this.storyPromise)},a.prototype.ensureStoryIdParam=function(){!this.$stateParams.storyId&&this.storyServices.story.id&&this.$state.go(config.STATES.BUILDER_STORY,{storyId:this.storyServices.story.id})},a.prototype.adiOnServer=function(a){if(this.$window.adiRunningOnServer&&this.$window.adiRunningOnServer.initialized(a),a)throw a},a.prototype.handleLoadingDone=function(a){this.initBI.stopReportingInterval(),this.reportLoadingComplete(a),this.documentServicesMediator.useAnimationFrameToDeferQueue(),a&&this.healthCheck.validateAndSave()},a.prototype.reportLoadingComplete=function(a){var b=this.$window.measureTimeInTab;this.isNewSite?this.consumerBiLogger.builder.firstTimeComplete(a,b.end()):this.consumerBiLogger.builder.existingSiteComplete(a,b.end()),this.flags.performanceTest&&this.consumerBiLogger.automation.loadTestCompleted(this.flags.performanceTest),this.flags.debugPerformance&&this.initDebugPerformance.end()},a.prototype.handleLoadingError=function(a){a.handledEvent||(this.consumerBiLogger.builder.loadingError(a&&a.stack?a.stack:JSON.stringify(a)),this.initBI.reportError(a,this.isNewSite),this.wizardCallbacksService.errorLoadingStory(a))},a.prototype.sendSiteSourcesToWixWiz=function(){var a=this;if(this.isNewSite){!this.flags.newBIInitEvents&&this.consumerBiLogger.builder.firstTimeSendSiteSourcesSendSiteSourcesInfoToWixwizAsync(),this.initBI.reportStart({name:BIInitSteps.SendSourcesToWixWiz,init:!0});var b=this.BackendStory.parseId(this.storyServices.story.id),c=b.instanceId,d=b.metaSiteId;this.wixWizIntegration.sendSiteSources({siteid:c,metasiteid:d,urls:this.searchUrls}).then(function(){a.initBI.reportEnd({name:BIInitSteps.SendSourcesToWixWiz,init:!0}),!a.flags.newBIInitEvents&&a.consumerBiLogger.builder.firstTimeSendSiteSourcesSendSiteSourcesInfoToWixwizComplete()})}},a.prototype.isPreviewMode=function(){return this.applicationState.isPreviewDisplay()},a.prototype.initAssistant=function(){if(this.isNewSite){this.consumerBiLogger.builder.firstTimeAssistantInitAssistant(),this.assistantManager.setDockStatus(builders.AssistantDockStatus.Stopped),this.assistantUtils.convertLocalStorageToursToTasks();var a=this.assistantTaskFetcher.getTask("welcomeTask");return this.$timeout(function(){$("builder").addClass("-without-overlay")},2e3),this.assistantManager.startTask(a)}this.assistantTaskFetcher.applySavedTasks(this.assistantUtils.getTaskDataFromStorage()),this.flags.newBIInitEvents||this.consumerBiLogger.builder.existingSiteAssistantInitAssistant(),this.isPreviewMode()?this.assistantManager.setDockStatus(builders.AssistantDockStatus.Hidden):this.assistantManager.setDockStatus(builders.AssistantDockStatus.Stopped),$("builder").addClass("-without-overlay")},a.prototype.executeWithoutSpinner=function(a){var b=this;return this.spinnerService.disable(),this.spinnerWasDisabled=!0,this.$q.resolve().then(function(){return a()}).then(function(a){return b.spinnerService.enable(),b.spinnerWasDisabled=!1,a})},a}();angular.module("siteGeneratorStaticsConsumerAppInternal").service("initService",InitService);var InitDebugPerformance=function(){function a(a){this.$window=a,this.$window.ADIPerformance=null}return a.$inject=["$window"],a.prototype.start=function(){this.$window.ADIPerformance={start:Date.now(),end:0,total:0},this.sendMessage("init-perf-start")},a.prototype.end=function(){if(!this.$window.ADIPerformance)throw"start was never called";this.$window.ADIPerformance.end=Date.now(),this.$window.ADIPerformance.total=this.$window.ADIPerformance.end-this.$window.ADIPerformance.start,this.sendMessage("init-perf-end")},a.prototype.report=function(){console.log("=== ADI performance report ==="),console.log("start: "+this.$window.ADIPerformance.start),console.log("end: "+this.$window.ADIPerformance.end),console.log("time: "+this.$window.ADIPerformance.total+"ms")},a.prototype.sendMessage=function(a){this.$window.postMessage({name:a,data:this.$window.ADIPerformance},"*")},a}();angular.module("siteGeneratorStaticsConsumerAppInternal").service("initDebugPerformance",InitDebugPerformance);var SilentPageBuilder=function(){function a(a,b,c,d,e,f,g,h,i,j,k,l,m,n,o,p,q){this.flags=a,this.$q=b,this.previewService=c,this.menuService=d,this.pagesManager=e,this.modelTree=f,this.spinnerService=g,this.consumerMenu=h,this.layoutSolver=i,this.applicationState=j,this.storyServices=k,this.undoRedo=l,this.assistantUtils=m,this.contentSource=n,this.contentManager=o,this.wizContentManager=p,this.sectionManager=q}return a.$inject=["flags","$q","previewService","menuService","pagesManager","modelTree","spinnerService","consumerMenu","layoutSolver","applicationState","storyServices","undoRedo","assistantUtils","contentSource","contentManager","wizContentManager","sectionManager"],a.prototype.constructAnyPage=function(a){var b=this;if(!this.flags.addAllPageMode||!a)return this.$q.when();var c=this.modelTree.getPageNodeById(a);return this.spinnerService.setWithAnimation(!1),this.spinnerService.waitForMe("silentWholePage"),this.previewService.waitForChanges().then(function(){return b.sectionManager.makeSectionsInGeneralPage(c)}).then(function(){return b.consumerMenu.calcMenuAnchors()}).then(function(){return b.layoutSolver.onNodeChanged()}).then(function(){return b.undoRedo.captureOperation()}).then(function(){return b.spinnerService.imDone("silentWholePage")})},a.prototype.constructAnyHomePage=function(){var a=this;return this.flags.emptyPage?this.$q.when():(this.applicationState.setPrettyPageMode(ePrettyPageRulesMode.ruleOnNoCaching),this.spinnerService.setWithAnimation(!1),this.previewService.waitForChanges().then(function(){var b=a.modelTree.getPageNodeById(a.storyServices.story.selectedPage),c=null;if(a.assistantUtils.shouldAutoProvisionTPAOfType("Blog")){if(a.pagesManager.renamePage(b.id,"Home"),a.menuService.menuItems.length>1){var d=a.menuService.menuItems.splice(a.menuService.menuItems.length-1,1)[0];a.menuService.menuItems.splice(0,0,d),a.menuService.refresh()}c=_.find(b.children,{contentElementType:"Blog"})}return a.spinnerService.waitForMe("silentHomePage"),a.flags.wiz2adiHomePage&&a.contentSource.useProvider(a.wizContentManager),a.sectionManager.makeSectionsInPage(b,c)}).then(function(){return a.consumerMenu.calcMenuAnchors()}).then(function(){return a.layoutSolver.onNodeChanged()}).then(function(){return a.undoRedo.captureOperation()}).then(function(){a.spinnerService.imDone("silentHomePage"),a.applicationState.setPrettyPageMode(ePrettyPageRulesMode.rulesOff),a.contentSource.useProvider(a.contentManager)}))},a}();angular.module("siteGeneratorStaticsConsumerAppInternal").service("silentPageBuilder",SilentPageBuilder);var intro;!function(a){a.photographerStructureIds=["fa28a6f03dbe530a8a8c6fcc","c280f2565940817f4edc48fe","70d8036f281d1ce612272b6a","cba925039ed9d3d360590d31","f1b75b7b719f5ed5b5bdc41f","fc57b1629c4ff302fb03e79c","228113fd238f42db1cf7160a","c5c1f3c63915119ed5c7feff","4c41f36c745880e6e42c5838","b5ab898f0afbfec00845808e","54004a861a39c4a3eb57d114","6faf46a50ee4aa0fff4e1135","02b40f8270007a792c300561","481a36b3eeb98dbfc2f904a6","94d4b55ce16bd162b833e148","88337e3560e889b475d492a7","0f04c68cffed335f82caabfa","3278ba04c3340b40d058ed5f","f764b4a56aca6b9f42c3ec3a","0fdf8f7c1fd0fb710ecb8826","320bc14e388b60c6ab499242","9b888a944e35417b0916e075","be6f1d8dc988d56f886ed440","137221e480f86fbd3c80436a","afee35922f1083c84a62b114","87de0335f09ebc252139974c","7d9f2f2d93d10adfb06b97f8","0d9c96444715ddf86b7dae9c"],a.businessNameTitleByStructureId={b0a520919b99728bae200018:"intro.business-name.label-blog-website","25cee88a72dcbb6573f2d4b4":"intro.business-name.label-band",ab472419552a627ae17a6248:"intro.business-name.label-band","78dd91ce2f03d612f7d21d67":"intro.business-name.label-business","56457787d0958454ae07ba9d":"intro.business-name.label-business",ef0e83f2dd3e5f2de57ed162:"intro.business-name.label-business","02c27dfb52b10a2442c8b9db":"intro.business-name.label-choir","4dafcb6d45599002d5ca8c73":"intro.business-name.label-business",bd3e888b9611b0defe9346f5:"intro.business-name.label-band",ca997711954ac38e4c80b6cb:"intro.business-name.label-stagename","548727a6f23ccfaa7480dab6":"intro.business-name.label-business",e34f3d3221e0000ef9c482be:"intro.business-name.label-business",ddcf01985bb895180fddde3b:"intro.business-name.label-business",e7c71df1ba825a34be9150a7:"intro.business-name.label-business","082f23d3239e001fa382569e":"intro.business-name.label-artist-or-band",fc78cd8fe36ec98750f48598:"intro.business-name.label-artist-or-band","17117225096faf1aeb06cf43":"intro.business-name.label-artist-or-band","85ce4978795e86d267591938":"intro.business-name.label-artist-or-band","0d5622380c498d071bbef24d":"intro.business-name.label-artist",e5dda168311d4b74264a0c24:"intro.business-name.label-band2",f5feb80464366af988623685:"intro.business-name.label-business",a28c5e5ea1945e5fa4ca1728:"intro.business-name.label-business",ede0e37e9de8c82c420ad0b5:"intro.business-name.label-business","2722ab4c0feb9fa6fdcc1c6b":"intro.business-name.label-business","7bd6f744207891da991c722b":"intro.business-name.label-business",e5aec35bbc5fc88b438724cf:"intro.business-name.label-business",fa6f57e9df0b2c3dfa39cce9:"intro.business-name.label-business","0d9c96444715ddf86b7dae9c":"intro.business-name.label-business","6796cebe34d21cca1400d748":"intro.business-name.label-business","21c70c386045175cb342045a":"intro.business-name.label-business",e67d552f50a50029ed406a50:"intro.business-name.label-business","494592c679c0d50b9d48a03e":"intro.business-name.label-business",a8c41ae5ef3d8694abd189b1:"intro.business-name.label-business","7de435a5405481f73e84a8cd":"intro.business-name.label-fullname"},a.preSuggestionsByVertical={business:["Consulting Firm","Non-Profit Organization","Coaching Professional","Cleaning Service","Marketing Agency"],Stores:["Online Clothing Store","Online Jewelry Store","Online Home Goods Store","Online Health Food Store","Online Hair Extensions Store"],"portfolio-cv":["Portfolio","Artist","Actor","Resume","CV"],photography:["Event Photographer","Photography Portfolio","Fashion Photography Studio","Photographer","Photography Studio"],music:["DJ","Recording Studio","Musician","Rock Band","Hip Hop Artist"],"health-wellness":["Make-Up Artist","Massage Therapist","Salon","Skin Care Clinic","Nutritionist"],Blog:["Fashion Blog","News Blog","Blogger","Health Blog","Business Blog"],other:["Non Profit Organization","School","Charity","Author","Blogger"],design:["Graphic Designer","Artist","Portfolio","Architecture Firm","Design Studio"]},a.preSuggestionsByVerticalByFlag={},a.DEFAULT_PRE_SUGGESTIONS=["Travel Agency","Elementary School","Real Estate Agency","Online Sporting Goods Store","Make-up Artist"],a.DEFAULT_CATEGORY={industryId:"9e0d43c23f82998a6ac269b5",structureId:"e51e11f3597e0c565deb792f",term:"Local Business"},a.GENERAL_CATEGORIES={General:[a.DEFAULT_CATEGORY,{industryId:"087d714d5f85b09c65b51e28",structureId:"073bd83d054dcff87fa0ef50",term:"Online Store"},{industryId:"e79e5765052b89b579c9a4c2",structureId:"40dc538a8a6c3e2dae342922",term:"Other"}],Blog:[{term:"General Blog",industryId:"904e7e089b4bda2f8f8846e6",structureId:"b0a520919b99728bae200018"}],"portfolio-cv":[{term:"Portfolio & CV",industryId:"c4e29ccec1b3103f4caa52f0",structureId:"3a6327d9c3946eefcfe6d513"}],design:[{term:"Design Business",industryId:"a16519bdf44907db3cd5a989",structureId:"f19b3125657d6a267d2c47d8"}],music:[{term:"Music Business",industryId:"88b56978690cff09a18247c1",structureId:"df2149e0b7ea38029c3b9640"}],photography:[{term:"Photographer",industryId:"f540e5a65f637e7cd869f5b9",structureId:"be6f1d8dc988d56f886ed440"}],"health-wellness":[{term:"Beauty Business",industryId:"2425027cb83cba8b1ce84a4f",structureId:"190a5ffad4f67ad6e22ad08d"}]},a.generalCategoriesByFlag={},a.EMPTY_BUSINESS_NAME="BUSINESS NAME";var b;!function(a){a[a.Sunday=0]="Sunday",a[a.Monday=1]="Monday",a[a.Tuesday=2]="Tuesday",a[a.Wednesday=3]="Wednesday",a[a.Thursday=4]="Thursday",a[a.Friday=5]="Friday",a[a.Saturday=6]="Saturday",a[a.SundayLastDayOfWeek=7]="SundayLastDayOfWeek"}(b=a.WeekDay||(a.WeekDay={})),angular.module("siteGeneratorStaticsConsumerAppInternal").constant("introAnimationData",function(){var b=(c={},c[a.INTRO_STATES.INTRO_CATEGORY_SEARCH]={contentHeight:325},c[a.INTRO_STATES.INTRO_BLOCKED_CATEGORY]={contentHeight:274},c[a.INTRO_STATES.INTRO_BUSINESS_TYPE]={contentHeight:360},c[a.INTRO_STATES.INTRO_SERVICES_OFFER]={contentHeight:334},c[a.INTRO_STATES.INTRO_BUSINESS_NAME]={contentHeight:90},c[a.INTRO_STATES.INTRO_BUSINESS_LOCATION]={contentHeight:260},c[a.INTRO_STATES.INTRO_SEARCH_CONFIRM]={contentHeight:320},c);return b;var c}())}(intro||(intro={}));var intro;!function(a){var b=function(){function b(a,b){this.socialLinkManager=a,this.flags=b}return b.$inject=["socialLinkManager","flags"],b.prototype.parseExtendedData=function(a){if(!a)return{};var b={name:_.get(a.general_info,"site_title.value"),generalInfo:this.parseGeneralInfo(a.general_info),contactDetails:this.parseContactDetails(a.contact_details),socialLinks:this.parseSocialLinks(a),reviews:this.parseReviews(a.reviews),media:{logos:this.parseLogos(_.get(a,"general_info.logos")),cover:{description:"",url:_.get(a,"general_info.cover_photo.value")},photos:this.parsePhotos(a)}};return b},b.prototype.parseLogos=function(a){return a?a.map(function(a){return{description:"",url:a.value}}):[]},b.prototype.parseContactDetails=function(a){return a?{email:_.get(a,"email.value"),phone:_.get(a,"phone.value"),fax:_.get(a,"fax.value"),website:_.get(a,"website.value"),address:this.parseBusinessAddress(a.address),openingHours:this.parseOpeningHours(a.open_hours_new)}:{}},b.prototype.parseGeneralInfo=function(a){return{shortDescription:_.get(a,"short_description.value"),longDescription:_.get(a,"long_description.value"),missionStatement:_.get(a,"mission.value"),products:_.get(a,"products.value"),generalInfo:_.get(a,"general_info.value"),companyOverview:_.get(a,"company_overview.value"),bio:_.get(a,"bio.value"),publicTransport:_.get(a,"public_transport.value"),dateFounded:this.parseStartInfo(_.get(a,"start_info")),categories:this.parseCategories(_.get(a,"category"),_.get(a,"sub_category")),parking:this.parseParking(_.get(a,"parking"))}},b.prototype.parseStartInfo=function(a){if(!a||!a.value)return null;var b=a.value.date;return b?b.year&&b.month&&b.day?new Date(b.year,b.month-1,b.day):b.year&&b.month?new Date(b.year,b.month-1):b.year?new Date(b.year):null:null},b.prototype.filterCategories=function(a){var b=["community","local business","company","automotive","commercial & industrial","shopping/retail","point of interest","points of interest","food","establishment","social"];return _.uniq(_.filter(a,function(a){return!_.contains(b,a.toLowerCase())}))},b.prototype.extractCategories=function(a){return a&&a.value?a.source&&a.source.toLowerCase().startsWith("yelp")?[]:a.value.split(",").map(function(a){return a.trim()}):[]},b.prototype.parseParking=function(a){return a&&a.value?{lot:a.value.lot>0,street:a.value.street>0,valet:a.value.valet>0}:null},b.prototype.parseCategories=function(a,b){var c=this.extractCategories(a),d=b&&b.value?_.map(b.value,function(a){return _.get(a,"name")}):[];return c=_.map(c.concat(d),this.normalizeCategory),_.take(this.filterCategories(c),3)},b.prototype.normalizeCategory=function(a){return _.capitalize(a.replace(/_/g," "))},b.prototype.parseReviews=function(a){var b=Array.isArray(a)?a[0]:a;return b&&b.value?_.map(b.value,function(a){return{author:a.author_name,photoUrl:a.author_photo,message:a.text,datetime:new Date(a.time),rating:a.rating}}).filter(function(a){return a.rating>=4}):[]},b.prototype.parseBusinessAddress=function(a){return a?{fullAddress:_.get(a,"full_addr"),country:_.get(a,"country"),city:_.get(a,"city"),zipcode:_.get(a,"zipcode"),state:_.get(a,"state"),street:_.get(a,"street"),location:a.lat&&a.lng?{lat:a.lat,lng:a.lng}:null}:null},b.prototype.parseOpeningHours=function(a){var b=this;return a&&a.value&&a.value.days?_.map(a.value.days,function(a){var c=b.parseWeekDay(a.day),d=b.parseHour(a.from_hour),e=b.parseHour(a.to_hour);return{day:c,from:d,to:e}}):[]},b.prototype.parseHour=function(a){if(!a)return null;var b=a.trim().split(":"),c=b[0],d=b[1];return{hour:parseInt(c,10),minute:parseInt(d,10)}},b.prototype.parseWeekDay=function(b){if(!b)return null;switch(b=b.trim(),b.toLowerCase()){case"sun":return a.WeekDay.Sunday;case"mon":return a.WeekDay.Monday;case"tue":return a.WeekDay.Tuesday;case"wed":case"wen":return a.WeekDay.Wednesday;case"thu":return a.WeekDay.Thursday;case"fri":return a.WeekDay.Friday;case"sat":return a.WeekDay.Saturday}},b.prototype.parseSocialLinks=function(a){var b=a.social_links?angular.copy(a.social_links):[],c=_.get(a,"official_website_data.social_links",[]);return b=b.concat(c),this.extractSocialLinks(b)},b.prototype.extractSocialLinks=function(a){var b=this,c=new Set;return _.reduce(a,function(a,d){if(d.url){var e=b.socialLinkManager.getPlatformNameByUrl(d.url);e&&!c.has(e)&&(a.push({platform:e,url:d.url}),c.add(e))}else console.error("got social "+JSON.stringify(d)+" without a link field!");return a},[])},b.prototype.parsePhotos=function(a){var b=this.parseFacebookPhotos(a.photos_albums),c=this.parseWebsitePhotos(_.get(a,"official_website_data.photos"));return b.concat(c)},b.prototype.parseWebsitePhotos=function(a){return a&&0!==a.length?_.map(a,function(a){return{source:b.PhotoSourceWebsite,url:a.photo_url,description:a.description}}):[]},b.prototype.parseFacebookPhotos=function(a){if(!a||0===a.length)return[];var c=[];return _.forEach(a,function(a){_.forEach(a.value,function(a){c=c.concat(_.map(a.photos,function(a){return{source:b.PhotoSourceFacebook,url:a.photo_url,description:a.description}}))})}),c},b}();b.PhotoSourceFacebook="facebook",b.PhotoSourceWebsite="website",a.WixWizDataParser=b,angular.module("siteGeneratorIntroInternal").service("wixWizDataParser",b)}(intro||(intro={}));var intro;!function(a){var b=function(){function a(a,b,c,d,e){this.wixWizIntegration=a,this.wixWizDataParser=b,this.$q=c,this.mediaGalleryAdapter=d,this.consumerBiLogger=e}return a.$inject=["wixWizIntegration","wixWizDataParser","$q","mediaGalleryAdapter","consumerBiLogger"],a.prototype.toSearchQuery=function(a){var b={name:a.name,email:a.contactDetails?a.contactDetails.email:"",phone:a.contactDetails?a.contactDetails.phone:"",category:a.category};return a.indifferentLocation?b.no_address=!0:a.ipBasedLocation||(b.address=a.userLocation),b},a.prototype.fromSearchResult=function(a){return{name:a.text,contactDetails:{phone:a.phone,email:a.email,fax:a.fax,address:{fullAddress:a.address?a.address.full_addr:""}},socialLinks:[{platform:SocialLinkManager.PLATFORM_FACEBOOK,url:a.facebook},{platform:SocialLinkManager.PLATFORM_GOOGLE_PLUS,url:a.googleplus},{platform:SocialLinkManager.PLATFORM_TWITTER,url:a.twitter},{platform:SocialLinkManager.PLATFORM_YELP,url:a.yelp}],media:{logos:[{description:"",url:a.image}]},urls:a.urls,nameSimilarityRank:+a.name_similarity_rank,distance:+a.distance}},a.prototype.search=function(a){var b=this,c=this.toSearchQuery(a);return this.wixWizIntegration.searchBusiness(c).then(function(a){return{results:a.unified_search.map(function(a){return b.fromSearchResult(a)}),searchId:a.searchId}})},a.prototype.searchResult=function(a,b){var c=this;return this.wixWizIntegration.getExtendedBusinessData(a.name,a.urls,b).then(function(a){return c.wixWizDataParser.parseExtendedData(a)})},a.prototype.uploadMedia=function(a){var b=this,c=[];return a.media?(a.media.logos&&a.media.logos.length&&a.media.logos.filter(function(a){return!!a.url&&!a.localFile}).forEach(function(a){c.push(a.url)}),a.media.cover&&a.media.cover.url&&c.push(a.media.cover.url),this.wixWizIntegration.saveBusinessImagesToWixMedia(c).then(function(c){return b.updateMedia(c,a)},function(a){var d=a&&a.status,e=a&&a.data&&a.data.message;return b.consumerBiLogger.warn(BIErrorCodes.UploadImagesFailed,"saveBusinessImagesToWixMedia returned #"+d+" - "+e+": "+c.join(",")),b.$q.when({})})):this.$q.when({})},a.prototype.updateMedia=function(a,b){var c=_.map(a,MediaGalleryAdapter.convertToMediaObject),d=0;return b.media.logos&&b.media.logos.length&&b.media.logos.filter(function(a){return!!a.url&&!a.localFile}).forEach(function(a){a.data=c[d],a.data.mediaType="clipart",d++}),b.media.cover&&b.media.cover.url&&(b.media.cover.data=c[d],d++),b},a}();a.WixWizDataManager=b,angular.module("siteGeneratorIntroInternal").service("wixWizDataManager",b)}(intro||(intro={}));var intro;!function(a){var b=function(){function b(a,b,c,d,e,f,g,h,i){this.$rootScope=a,this.applicationParameters=b,this.localStorageService=c,this.wixWizDataManager=d,this.flags=e,this.validation=f,this.introDataManipulation=g,this.userDetailsService=h,this.spinnerService=i,this.isWixWizError=!1,this.prepareGeneralCategories(),this.preparePreSuggestionsByVertical()}return b.$inject=["$rootScope","applicationParameters","localStorageService","wixWizDataManager","flags","validation","introDataManipulation","userDetailsService","spinnerService"],b.prototype.prepareDataForBuilder=function(){this.data.name||(this.data.name=a.EMPTY_BUSINESS_NAME),this.validation.isWebsite(this.data.contactDetails.website)||(this.data.contactDetails.website=""),this.data.category||(this.data.category=_.clone(a.DEFAULT_CATEGORY)),this.data.socialLinks&&(this.data.socialLinks=this.data.socialLinks.filter(function(a){return!!a.url}))},b.prototype.prepareGeneralCategories=function(){var b=this;this.generalCategories=ob.deepClone(a.GENERAL_CATEGORIES),_.each(a.generalCategoriesByFlag,function(a,c){b.flags[c]&&_.assign(b.generalCategories,ob.deepClone(a))})},b.prototype.preparePreSuggestionsByVertical=function(){var b=this;this.preSuggestionsByVertical=ob.deepClone(a.preSuggestionsByVertical),_.each(a.preSuggestionsByVerticalByFlag,function(a,c){b.flags[c]&&_.assign(b.preSuggestionsByVertical,ob.deepClone(a))})},b.prototype.init=function(a){var b=this;this.vertical=a;var c=_.filter(this.applicationParameters.tpaTypes,function(a){var c=a.sectionUnderFlag;return a.inConsumer===!0&&(!c||b.flags[c])});this.data={name:"",socialLinks:[],serviceOffer:_.map(Object.keys(c),function(a){return{type:c[a].type,checked:!1}}),lastSearchedTerm:"",validCategory:!1};var d=this.localStorageService.get("introData");d&&angular.extend(this.data,d),this.introDataWatch||(this.introDataWatch=this.$rootScope.$watch(function(){return b.data},function(){b.localStorageService.set("introData",b.data)},!0))},b.prototype.reset=function(){this.data={},this.localStorageService.remove("introData"),this.introDataWatch&&(this.introDataWatch(),this.introDataWatch=null)},b.prototype.getStoryId=function(){return this.data.storyId},b.prototype.setStoryId=function(a){this.data.storyId=a},Object.defineProperty(b.prototype,"siteProperties",{get:function(){return{email:this.data.contactDetails&&this.data.contactDetails.email?this.data.contactDetails.email:"",logo:this.data.media&&this.data.media.logos[0]&&this.data.media.logos[0].data?this.data.media.logos[0].data.relativeUri:"",name:this.data.name?this.data.name:"",address:{street:this.data.contactDetails&&this.data.contactDetails.address&&this.data.contactDetails.address.street?this.data.contactDetails.address.street:"",city:this.data.contactDetails&&this.data.contactDetails.address&&this.data.contactDetails.address.city?this.data.contactDetails.address.city:"",state:this.data.contactDetails&&this.data.contactDetails.address&&this.data.contactDetails.address.state?this.data.contactDetails.address.state:"",country:this.data.contactDetails&&this.data.contactDetails.address&&this.data.contactDetails.address.country?this.data.contactDetails.address.country:"",zip:this.data.contactDetails&&this.data.contactDetails.address&&this.data.contactDetails.address.zipcode?this.data.contactDetails.address.zipcode:""}}},enumerable:!0,configurable:!0}),Object.defineProperty(b.prototype,"logoDimensions",{get:function(){return{width:_.get(this.data,"media.logos[0].data.width",0),height:_.get(this.data,"media.logos[0].data.height",0)}},enumerable:!0,configurable:!0}),b.prototype.addressShouldBecomeMultiline=function(a){if(a.formatted_address.length<=25)return!1;var b=["street_number","route","locality"],c=Array.prototype.concat.apply([],a.address_components.map(function(a){return a.types}));return _.difference(b,c).length>0?!1:a.address_components&&a.address_components.length>1},b.prototype.formatMultiLineAddress=function(a){var b={num:"street_number",street:"route",city:"locality",state:"administrative_area_level_2",country:"country",zip:"postal_code"},c=["num"," ","street","\n","city",", ","state"," ","zip","\n","country"],d=_.map(c,function(c){if("\n, ".indexOf(c)>-1)return c;var d=_.find(a,function(a){return a.types.indexOf(b[c])>-1}),e="country"===c?"long_name":"short_name";return d?d[e]:" "});return"United States"===d[c.indexOf("country")]?d[c.indexOf("country")]="USA":d[c.indexOf("state")]="",d.join("")},b.prototype.cleanAddress=function(a){var b=a.split("\n"),c=b.filter(function(a){return""!==a.replace(/,/g,"").trim()}),d=c.map(function(a){return a.trim().replace(/\s+/g," ")});return d.join("\n")},b.prototype.setAddress=function(a){var b={};a&&(b.location={lat:a.geometry.location.lat,lng:a.geometry.location.lng},this.addressShouldBecomeMultiline(a)?b.fullAddress=this.formatMultiLineAddress(a.address_components):b.fullAddress=a.formatted_address,b.fullAddress=this.cleanAddress(b.fullAddress)),this.data.contactDetails||(this.data.contactDetails={}),this.data.contactDetails.address=b},b.prototype.merge=function(a){_.assign(this.data,a)},b.prototype.mergeSearchResult=function(a){_.assign(this.data,this.data.searchResults[a])},b.prototype.searchUsers=function(a){var b=this;void 0===a&&(a=!0),this.startWixWizAction(a);var c=this.wixWizDataManager.search(this.data).then(function(a){b.data.searchResults=a.results,b.wixWizSearchId=a.searchId});return this.handleWixWizResponse(c,!0)},b.prototype.getExtendedUserByPathsToNotUpdate=function(a){return this.wixWizDataManager.searchResult(a,this.wixWizSearchId).then(function(b){var c=_.assign({},b,{searchUrls:a.urls});return{dataModel:c}})},b.prototype.getExtendedUser=function(a,b){var c=this;void 0===b&&(b=!0),this.startWixWizAction(b);var d=this.wixWizDataManager.searchResult(a,this.wixWizSearchId).then(function(b){return _.assign(c.data,b,{searchUrls:a.urls}),!c.data.contactDetails.email&&c.flags.takeEmailFromProfileIfNotFound?c.userDetailsService.getUserDetails().then(function(a){c.data.contactDetails.email=a.email}):void 0});return this.handleWixWizResponse(d)},b.prototype.updateDataByModelAndUserValuesPaths=function(a,b){var c=this.introDataManipulation.getUserValuesFromIntroData(this.data,b);_.assign(this.data,a),this.introDataManipulation.restoreUserValues(this.data,c)},Object.defineProperty(b.prototype,"hasAddress",{get:function(){return this.data.userLocation&&"object"==typeof this.data.userLocation},enumerable:!0,configurable:!0}),b.prototype.getCategoryNoError=function(){return this.data.category?this.data.category:_.clone(a.DEFAULT_CATEGORY)},b.prototype.getLod=function(){if(!this.hasAddress)return null;var a,b=this.data.userLocation;if(b&&b.address_components.length>0){var c=b.address_components[0].types[0];"locality"===c||"premise"===c?a="city":"street_number"===c?a="streetNum":c.indexOf("administrative_area_level")>=0?a="state":"country"===c?a="country":"route"===c&&(a="street")}return a},b.prototype.startWixWizAction=function(a){a&&this.spinnerService.forceStart(),
this.isWixWizError=!1},b.prototype.handleWixWizResponse=function(a,b){var c=this;return void 0===b&&(b=!1),a["catch"](function(){b&&(c.data.searchResults=[]),c.isWixWizError=!0})["finally"](function(){return c.spinnerService.forceStop()})},b}();a.IntroManager=b,angular.module("siteGeneratorIntroInternal").service("introManager",b)}(intro||(intro={}));var intro;!function(a){var b=function(){function b(a,c,d,e,f,g,h,i,j,k,l,m){var n=this;this.$state=c,this.$q=d,this.$log=e,this.introAnimationData=f,this.IntroAnimationElement=g,this.introWindow=h,this.introAnimationAdapter=i,this.introEventsEmitter=j,this.introManager=k,this.introDataManipulation=l,this.$window=m,this.disposable={},this.isFirstTime=function(){return!n.lastAction},this.next=this.stateAction("next"),this.skip=this.stateAction("skip"),this.back=this.stateAction("back"),this.wait=function(){return n.hideContent().then(function(){return n.playAnimation("wait")})},this.showContent=function(){return n.contentElement?n.contentElement.show():n.$q.when()},this.onResize=_.debounce(function(){var a=n.$state.current.name;if(n.introAnimationData[a]){var b=n.introWindow.getAnimationBoxDimensions(n.currentContentHeight);n.$q.all([n.hideContent(),n.introAnimationAdapter.resize(b)]).then(function(){n.backdropBoxPosition=b,n.contentBoxPosition=n.introWindow.getContentPosition(n.backdropBoxPosition,n.currentContentHeight),n.showContent(),angular.element(n.$window).trigger("resize")})}},b.RESIZE_DEBOUNCE),this.beforeStateChangeWatcher=a.$on("$stateChangeStart",function(a,b,c,d){return n.beforeStateChanged(a,b.name,d.name)}),this.afterStateChangeWatcher=a.$on("$stateChangeSuccess",function(a,b,c,d){return n.afterStateChanged(b.name,d.name)}),this.introWindow.on("resize",this.onResize)}return b.$inject=["$rootScope","$state","$q","$log","introAnimationData","IntroAnimationElement","introWindow","introAnimationAdapter","introEventsEmitter","introManager","introDataManipulation","$window"],b.prototype.init=function(a,b,c){var d=this;this.contentElement=this.IntroAnimationElement(b),this.animationElement=this.IntroAnimationElement(a),this.loadingElement=this.IntroAnimationElement(c);var e=this.$state.current.name;return this.introAnimationData[e]&&(this.currentContentHeight=this.introAnimationData[e].contentHeight,this.backdropBoxPosition=this.introWindow.getAnimationBoxDimensions(this.currentContentHeight),this.contentBoxPosition=this.introWindow.getContentPosition(this.backdropBoxPosition,this.currentContentHeight)),this.introAnimationAdapter.init(a,this.backdropBoxPosition).then(function(){return d.showContent()})},b.prototype.dispose=function(){this.beforeStateChangeWatcher&&this.beforeStateChangeWatcher(),this.afterStateChangeWatcher&&this.afterStateChangeWatcher(),this.disposable=null,this.contentElement=null,this.animationElement=null,this.introWindow.off("resize",this.onResize),this.introAnimationAdapter.dispose()},b.prototype.stateAction=function(b){var c=this;return function(d){c.lastAction=b,d!==a.INTRO_FINISHED&&c.$state.go(d)}},b.prototype.hideContent=function(a){if(!this.contentElement||this.contentElement.hidden)return this.$q.when();var b=[this.contentElement.hide()];return a&&b.push(this.animationElement.hide()),this.$q.all(b)},b.prototype.showBackdrop=function(){return this.backdropBoxPosition=this.introWindow.getAnimationBoxDimensions(this.currentContentHeight),this.introAnimationAdapter.play("next",this.backdropBoxPosition)},b.prototype.scale=function(a){return this.currentContentHeight=a,this.backdropBoxPosition=this.introWindow.getAnimationBoxDimensions(this.currentContentHeight),this.contentBoxPosition=this.introWindow.getContentPosition(this.backdropBoxPosition,this.currentContentHeight),this.introAnimationAdapter.scale(this.backdropBoxPosition)},b.prototype.isIntroState=function(b){return b&&b.startsWith(a.INTRO_STATES.INTRO)},b.prototype.beforeStateChanged=function(b,c,d){this.isIntroState(d)&&(this.isIntroState(c)?this.notifyStateChanged(d,c,"before"):this.notifyStateChanged(d,a.INTRO_FINISHED,"before"))},b.prototype.afterStateChanged=function(b,c){var d=this;if(this.isIntroState(c))if(this.isIntroState(b)){this.introAnimationData[b]&&"function"==typeof this.introAnimationData[b].onEnter&&this.introAnimationData[b].onEnter(c);var e=void 0;this.introAnimationData[b]?(this.currentContentHeight=this.introAnimationData[b].contentHeight,e=this.playAnimation(this.guessAnimation(b,c),b)):(this.currentContentHeight=null,e=this.playAnimation("blank")),e.then(function(){return d.showContent()}).then(function(){return d.notifyStateChanged(c,b,"after")})}else this.notifyStateChanged(c,a.INTRO_FINISHED,"after")},b.prototype.notifyStateChanged=function(b,c,d){var e,f=this.introManager.data,g=this.lastAction;switch(b){case a.INTRO_STATES.INTRO:break;case a.INTRO_STATES.INTRO_CATEGORY_SEARCH:case a.INTRO_STATES.INTRO_BUSINESS_TYPE:e={name:b,category:f.category};break;case a.INTRO_STATES.INTRO_BLOCKED_CATEGORY:break;case a.INTRO_STATES.INTRO_SERVICES_OFFER:break;case a.INTRO_STATES.INTRO_BUSINESS_NAME:e={name:b,businessName:f.name};break;case a.INTRO_STATES.INTRO_BUSINESS_LOCATION:e={name:b,hasAddress:this.introManager.hasAddress,userLocation:f.userLocation,ipBasedLocation:f.ipBasedLocation,indifferentLocation:f.indifferentLocation};break;case a.INTRO_STATES.INTRO_SEARCH_CONFIRM:break;case a.INTRO_STATES.INTRO_SELECT_USER:break;case a.INTRO_STATES.INTRO_EDIT_USER:e={name:b,userValues:this.introDataManipulation.getUserValuesOfBusinessData(this.introManager.data)};break;default:this.$log.error('Intro: state changed from unknown state: "'+b+'"')}e&&this.introEventsEmitter.notifyStepChange(e,c,g,d)},b.prototype.guessAnimation=function(a,b){var c=Object.keys(this.introAnimationData);return!this.introAnimationData[b]||c.indexOf(a)<c.indexOf(b)?"back":"back"===this.lastAction?"next":this.lastAction?this.lastAction:"next"},b.prototype.playAnimation=function(a,b){return b?(this.backdropBoxPosition=this.introWindow.getAnimationBoxDimensions(this.currentContentHeight),this.contentBoxPosition=this.introWindow.getContentPosition(this.backdropBoxPosition,this.currentContentHeight)):(this.backdropBoxPosition=null,this.contentBoxPosition=null),this.introAnimationAdapter.play(a,this.backdropBoxPosition)},b}();b.RESIZE_DEBOUNCE=500,a.IntroStep=b,angular.module("siteGeneratorIntroInternal").service("introStep",b)}(intro||(intro={}));var intro;!function(a){var b=function(){function a(a,b,c){this.$q=a,this.flags=b,this.backdropAnimations=c,this.lastAnimating=a.when()}return a.$inject=["$q","flags","backdropAnimations"],a.prototype.init=function(a,b){return this.flags.debugMode?this.$q.when():this.backdropAnimations.init(a[0],b)},a.prototype.play=function(a,b){return void 0===a&&(a="next"),this.lastAnimating=this.flags.debugMode?this.$q.when():this.backdropAnimations.play(a,b),this.lastAnimating},a.prototype.wait=function(){return this.play("wait")},a.prototype.resize=function(a){var b=this;return this.lastAnimating.then(function(){return b.backdropAnimations.resize(a)})},a.prototype.scale=function(a){return this.backdropAnimations.scale(a)},a.prototype.dispose=function(){this.backdropAnimations.dispose()},a}();a.IntroAnimationAdapter=b,angular.module("siteGeneratorIntroInternal").service("introAnimationAdapter",b)}(intro||(intro={}));var intro;!function(a){var b=function(){function a(a,b,c){this.$q=a,this.$timeout=b,this.element=c,this.hidden=!1}return a.$inject=["$q","$timeout","element"],a.prototype.hide=function(){var a=this;this.element.css("opacity",0);var b=this.$q.defer();return this.$timeout(function(){a.hidden=!0,b.resolve()},500),b.promise},a.prototype.show=function(){return this.element.css("opacity",1),this.hidden=!1,this.$q.when()},a}();a.IntroAnimationElement=b,angular.module("siteGeneratorIntroInternal").factory("IntroAnimationElement",["$q","$timeout",function(a,c){return function(d){return new b(a,c,d)}}])}(intro||(intro={}));var intro;!function(a){a.INTRO_FINISHED="intro.finished";var b=function(){function a(){var a=this;this.stepChangeListeners=[],this.notifyStepChange=function(b,c,d,e){a.stepChangeListeners.map(function(a){return a(b,c,d,e)})}}return a.prototype.listenStepChange=function(a){var b=this,c=this.stepChangeListeners.push(a)-1;return function(){b.stepChangeListeners[c]=function(){return void 0}}},a}();a.IntroEventsEmitter=b,angular.module("siteGeneratorIntroInternal").service("introEventsEmitter",b)}(intro||(intro={}));var intro;!function(a){var b=function(){function a(a){this.mediaObj=a}return a.prototype.init=function(){this.mediaObj.displayLogo=!0,this.mediaObj.logos=this.mediaObj.logos||[],this.mediaObj.logos[0]=this.mediaObj.logos[0]||{}},a.prototype.getLogoURL=function(){return this.mediaObj.logos[0].url},a.prototype.setLogo=function(a){this.mediaObj.displayLogo=!0;var b={source:"facebook",url:a.serverResponse.data.originalUrl,localFile:a.serverResponse,data:null,description:""};this.mediaObj.logos[0]=b,b.data=MediaGalleryAdapter.convertToMediaObject(b.localFile),b.data.mediaType="clipart"},a.prototype.hideLogo=function(){this.mediaObj.displayLogo=!1},a.prototype.isLogoVisible=function(){return this.mediaObj.displayLogo},a.prototype.cleanUp=function(){for(;this.mediaObj&&this.mediaObj.logos[0]&&!this.mediaObj.logos[0].url;)this.mediaObj.logos.shift()},a}();a.IntroLogoPersistence=b}(intro||(intro={}));var intro;!function(a){var b=function(){function b(a,b,c,d){this.mediaApi=a,this.introManager=b,this.$q=c,this.storyServices=d}return b.$inject=["mediaApi","introManager","$q","storyServices"],b.prototype.upload=function(c){var d=this;if(!this.introManager.data.media||!this.introManager.data.media.photos||0===this.introManager.data.media.photos.length)return this.$q.when();var e=[],f=[];_.forEach(this.introManager.data.media.photos,function(b){b.source===a.WixWizDataParser.PhotoSourceFacebook?e.push(b.url):b.source===a.WixWizDataParser.PhotoSourceWebsite&&f.push(b.url)});var g=b.MaxImagesToUpload/2,h=b.MaxImagesToUpload/2;e.length<f.length?(g=Math.min(e.length,g),h=b.MaxImagesToUpload-g):(h=Math.min(f.length,h),g=b.MaxImagesToUpload-h);var i={name:c,urls:_.take(e,g).concat(_.take(f,h))};return this.mediaApi.upload([i]).then(function(a){d.storyServices.story.privateMediaFolderId=a&&a.folders&&a.folders.length>0?a.folders[0].id:""})},b}();b.MaxImagesToUpload=100,a.IntroMediaUploader=b,angular.module("siteGeneratorIntroInternal").service("introMediaUploader",b)}(intro||(intro={}));var intro;!function(a){var b=function(){function b(a,b){var c=this;this.socialLinkManager=a,this.flags=b,this.createSocialButtons=function(a){return _.filter(a,function(a){return a.url}).map(function(a){var b=a.platform?a.platform:c.socialLinkManager.invalidPlatformName,d=c.socialLinkManager.getPlatformByName(b);return{platform:a.platform,Title:a.platform,mediaType:"icon",width:200,height:200,relativeUri:d.lightRelativeUri,Link:{targetUrl:c.makeValidURL(a.url)}}})}}return b.$inject=["socialLinkManager","flags"],b.prototype.makeValidURL=function(a){return a.startsWith("http")||(a="http://"+a),a},b.prototype.createMediaItem=function(a){return{fileName:"Two Flamingos",relativeUri:"0d5a8583187a44688b918f91298eba80.jpg",width:1920,height:1280,Title:"Two Flamingos",Description:"",Link:{},mediaType:"image"}},b.prototype.isValidContactDescription=function(a,b){if(!b)return!1;var c=b,d=c.parking&&(c.parking.lot||c.parking.street||c.parking.valet),e=!!c.publicTransport;return d||e},b.prototype.formatContactDescription=function(a){var b="";return a.parking&&(a.parking.lot||a.parking.street||a.parking.valet)&&(b+=this.formatParking(a.parking)),a.publicTransport&&(b+=this.formatPublicTransport(a.publicTransport)),b},b.prototype.formatPublicTransport=function(a){return"To reach us via public transit: "+a},b.prototype.formatParking=function(a){var b="Should you be arriving by car, we offer ",c=_.sum(_.values(a),function(a){return a?1:0}),d=0;return a.valet&&(b+=this.addSentencePart("valet parking",0===d,2===c),c--,d++),a.lot&&(b+=this.addSentencePart("a parking lot with parking for our customers",0===d,2===c),c--,d++),a.street&&(b+=this.addSentencePart("street parking",0===d,2===c)),b+"."},b.prototype.addSentencePart=function(a,b,c){return b?a:(c?", ":" and ")+a},b.prototype.formatCategories=function(a){return a?a.join(" · "):null},b.prototype.isValidOpeningHours=function(a,b){return b&&0!==b.length?_.any(b,function(a){return a&&a.day&&a.from&&a.to}):!1},b.prototype.formatOpeningHours=function(b){var c=this;if(!b)return null;b=b.map(function(b){return b.day===a.WeekDay.Sunday&&(b.day=a.WeekDay.SundayLastDayOfWeek),b});var d=_.groupBy(b,"day");return Object.keys(d).map(function(a){var b=d[a],e=b.map(function(a){if(!a||!a.from||!a.to)return null;var b=c.formatHour(a.from),d=c.formatHour(a.to);return b+" - "+d}).filter(function(a){return!!a}).join(", ");return c.formatDay(parseInt(a,10))+": "+e}).join("\n")},b.prototype.formatHour=function(a){var b=a.hour>12?(a.hour-12).toString():a.hour.toString(),c=0===a.minute?"00":a.minute;return b+=":"+c,b+(a.hour>12?"pm":"am")},b.prototype.formatDay=function(b){switch(b){case a.WeekDay.Monday:return"Mon";case a.WeekDay.Tuesday:return"Tue";case a.WeekDay.Wednesday:return"Wed";case a.WeekDay.Thursday:return"Thu";case a.WeekDay.Friday:return"Fri";case a.WeekDay.Saturday:return"Sat";case a.WeekDay.Sunday:return"Sun";case a.WeekDay.SundayLastDayOfWeek:return"Sun"}},b.prototype.formatYear=function(a){return a&&a.getFullYear?a.getFullYear().toString():""},b.prototype.formatCopyrightMessage=function(a){var b=(new Date).getFullYear();return"©"+b+" by "+a+". Proudly created with Wix.com"},b.prototype.formatReview=function(a){if(!a)return a;var c=_.words(a);return c.length>b.MaxReviewWords?c.splice(0,b.MaxReviewWords)+"...":a},b.prototype.formatSocialLinks=function(a){var b=[];return a&&(b=a.map(function(a){return{platform:a.platform,url:a.Link.targetUrl}})),b},b}();b.MaxReviewWords=150,a.IntroDataFormatter=b,angular.module("siteGeneratorIntroInternal").service("introDataFormatter",b)}(intro||(intro={}));var intro;!function(a){var b=function(){function a(){}return a.prototype.getUserValuesFromIntroData=function(a,b){return _.map(b,function(b){return"socialLinks"===b?{path:b,value:_.cloneDeep(_.filter(a.socialLinks,function(a){return a.constForWixWiz===!0}))}:{path:b,value:_.get(a,b)}})},a.prototype.isNewPlatform=function(a,b){return!_.find(a,function(a){return a.platform===b})},a.prototype.restoreUserValues=function(a,b){var c=this;_.each(b,function(b,d){"socialLinks"===b.path?_.each(b.value,function(b){c.isNewPlatform(a.socialLinks,b.platform)?a.socialLinks.push(_.cloneDeep(b)):_.map(a.socialLinks,function(a){return a.platform===b.platform&&(a.url=b.url),a})}):_.set(a,b.path,b.value)})},a.prototype.getFieldsToNotOverride=function(a,b,c){var d=this.getDiffBetweenTwoObjects(b,c),e=d.socialLinks;this.markSocialLinksToNotOverride(a,e);var f=_.map(d,function(a,b){return BusinessCardEditable.fieldToIntroManagerPath[b]});return f.push(BusinessCardEditable.fieldToIntroManagerPath.businessName),f},a.prototype.getDiffBetweenTwoObjects=function(a,b){function c(a,b){return _.transform(a,function(a,d,e){_.isEqual(d,b[e])||(a[e]=_.isObject(d)&&_.isObject(b[e])?c(d,b[e]):d)})}return c(a,b)},a.prototype.getUserValuesOfBusinessData=function(a){var b=BusinessCardEditable.getBusinessCardDataModel(a),c=BusinessCardEditable.initializedBusinessCardValues,d=this.getFieldsToNotOverride(a,b,c);return d},a.prototype.markSocialLinksToNotOverride=function(a,b){var c=a.socialLinks;_.each(b,function(a){a&&_.each(c,function(b){b.url===a.url&&(b.constForWixWiz=!0)})})},a}();a.IntroDataManipulation=b,angular.module("siteGeneratorIntroInternal").service("introDataManipulation",b)}(intro||(intro={}));var intro;!function(a){var b=function(){function a(a,b){this.socialLinkManager=a,this.introDataFormatter=b,this.contentElementValueIntroMap=[{type:"GeneralDescription",mappings:[{key:"MainEmail",value:"contactDetails.email",maxLength:999,validation:function(a,b){return!!b}},{key:"BusinessName",value:"name"},{key:"BusinessType",value:"category.term",maxLength:50,forceMatchingPolicy:!1},{key:"BusinessTagline",value:"generalInfo.categories",validation:function(a,b){return b&&b.length>0},transform:this.introDataFormatter.formatCategories},{key:"BusinessTagline",value:"generalInfo.shortDescription",validation:function(a,b){return!a&&b&&b.length<=55}},{key:"BusinessTagline",value:"generalInfo.missionStatement",validation:function(a,b){return!a&&b&&b.length<=55}},{key:"Logo",value:"media.logos",defaultValue:[ContentDefaults.clipart,ContentDefaults.shape],transform:function(a){var b=a&&a.filter(function(a){return a.data});return b&&b.length>0?b.map(function(a){return a.data}).concat([ContentDefaults.shape]):[ContentDefaults.clipart,ContentDefaults.shape]},transformBack:function(a){return a.map(function(a){return{data:a,description:"",url:"https://static.wixstatic.com/media/"+a.relativeUri+"_srz_p_200_200_75_22_0.50_1.20_0.00_jpg_srz"}})}},{key:"CopyrightMessage",value:"name",transform:this.introDataFormatter.formatCopyrightMessage,forceMatchingPolicy:!1},{key:"YearFounded",value:"generalInfo.dateFounded",validation:function(a,b){return b},transform:this.introDataFormatter.formatYear,forceMatchingPolicy:!1}]},{type:"Contact",mappings:[{key:"address for google map",value:"contactDetails.address.fullAddress"},{key:"address for display",value:"contactDetails.address.fullAddress"},{key:"phone number",value:"contactDetails.phone",forceMatchingPolicy:!0},{key:"email",value:"contactDetails.email",maxLength:999,validation:function(a,b){return!!b}},{key:"fax",value:"contactDetails.fax",validation:function(a,b){return!!b}},{key:"Street",value:"contactDetails.address.street",forceMatchingPolicy:!1},{key:"City",value:"contactDetails.address.city",forceMatchingPolicy:!1},{key:"State",value:"contactDetails.address.state",forceMatchingPolicy:!1},{key:"Country",value:"contactDetails.address.country",forceMatchingPolicy:!1},{key:"ZipCode",value:"contactDetails.address.zipcode",forceMatchingPolicy:!1},{key:"Contact description",value:"generalInfo",validation:this.introDataFormatter.isValidContactDescription.bind(this.introDataFormatter),transform:this.introDataFormatter.formatContactDescription.bind(this.introDataFormatter)}]},{type:"Social",mappings:[{key:"SocialTitle",value:"name",maxLength:25},{key:"SocialButtons",value:"socialLinks",forceMatchingPolicy:!0,transform:this.introDataFormatter.createSocialButtons,transformBack:this.introDataFormatter.formatSocialLinks}]},{type:"Homepage_about",mappings:[{key:"AboutBody",value:"generalInfo.longDescription",validation:function(a,b){return b&&b.length<=400}},{key:"AboutBody",value:"generalInfo.companyOverview",validation:function(a,b){return!a&&b&&b.length<=400}},{key:"AboutBody",value:"generalInfo.generalInfo",validation:function(a,b){return!a&&b&&b.length<=400}},{key:"AboutBody",value:"generalInfo.bio",validation:function(a,b){return!a&&b&&b.length<=400}}]},{type:"Inner_about",mappings:[{key:"AboutBody",value:"generalInfo.longDescription",validation:function(a,b){return b&&b.length>400}},{key:"AboutBody",value:"generalInfo.companyOverview",validation:function(a,b){return!a&&b&&b.length>400}},{key:"AboutBody",value:"generalInfo.generalInfo",validation:function(a,b){return!a&&b&&b.length>400}},{key:"AboutBody",value:"generalInfo.bio",validation:function(a,b){return!a&&b&&b.length>400}}]},{type:"OpeningHours",mappings:[{key:"OpeningHoursDescription",value:"contactDetails.openingHours",validation:this.introDataFormatter.isValidOpeningHours.bind(this.introDataFormatter),transform:this.introDataFormatter.formatOpeningHours.bind(this.introDataFormatter),forceMatchingPolicy:!1}]},{type:"Welcome",mappings:[{key:"WelcomeBody",value:"generalInfo.shortDescription",validation:function(a,b){return b&&b.length>=56}},{key:"WelcomeMedia",value:"media.cover.data",validation:function(a,b){return b},array:!0,append:!0}]},{type:"Testimonial",mappings:[{key:"CustomerName",value:"reviews[0].author",validation:function(a,b){return b&&b.length>0}},{key:"CustomerQuote",value:"reviews[0].message",validation:function(a,b){return b&&b.length>0},transform:this.introDataFormatter.formatReview}]}]}return a.$inject=["socialLinkManager","introDataFormatter"],a.prototype.enrichIntroData=function(a,b){var c=this,d=b.type,e=_.find(this.contentElementValueIntroMap,function(a){return a.type===d});e&&_.forEach(e.mappings,function(d){var e=_.pick(b.values,d.key);if(e&&e[d.key])if(d.array)_.set(a,d.value,e[d.key].value[0]);else{var f=e[d.key].value;_.set(a,d.value,d.transformBack?d.transformBack.call(c,f):f)}})},a.prototype.enrichContentElement=function(a,b,c){var d=this,e=a.type,f=_.find(this.contentElementValueIntroMap,function(a){return a.type===e}),g=!1;return _.forEach(f.mappings,function(e){var f=_.pick(a.values,e.key),h=_.get(b,e.value);d.enrichFieldValue(f,h,e)&&(c||("undefined"==typeof e.forceMatchingPolicy?a.getArgsMatchingPolicy()[e.key]=!!f[e.key].value:e.forceMatchingPolicy&&(a.getArgsMatchingPolicy()[e.key]=!0)),g=!0)}),a.valuesByMediaType=void 0,g},a.prototype.enrichFieldValue=function(a,b,c){if(!a||!_.has(a,c.key)||!a[c.key])return!1;if(c.validation&&!c.validation(a[c.key].value,b))return!1;if((!b||0===b.length)&&c.defaultValue)return a[c.key].value=c.defaultValue,!0;if(b&&c.maxLength&&(b=b.substring(0,c.maxLength)),b&&c.transform&&(b=c.transform.bind(this,b)()),c.array){var d=b?[b]:[];if(c.append){var e=a[c.key].value||[];a[c.key].value=e.concat(d)}else if(c.prepend){var e=a[c.key].value||[];a[c.key].value=d.concat(e)}else a[c.key].value=d}else a[c.key].value=b;return!0},a}();a.IntroContentElementGenerator=b,angular.module("siteGeneratorIntroInternal").service("introContentElementGenerator",b)}(intro||(intro={}));var intro;!function(a){var b=function(){function a(a,b,c,d,e,f,g,h,i){this.introManager=a,this.modelTree=b,this.wixWizDataManager=c,this.introContentElementGenerator=d,this.$q=e,this.contentManager=f,this.contentSource=g,this.mediaGallery=h,this.nodeManipulationService=i,this.isLoadedDefer=this.$q.defer(),this.updateLogoPromise=this.$q.when()}return a.$inject=["introManager","modelTree","wixWizDataManager","introContentElementGenerator","$q","contentManager","contentSource","mediaGallery","nodeManipulationService"],a.prototype.loaded=function(){return this.$q.all([this.isLoadedDefer.promise,this.updateLogoPromise])},a.prototype.generateAll=function(){var a=this;return this.prepareLogoData().then(function(){return a.createNodes()}).then(function(){return a.isLoadedDefer.resolve()})},a.prototype.prepareLogoData=function(){return this.prepareLogoDataPromise||(this.prepareLogoDataPromise=this.wixWizDataManager.uploadMedia(this.introManager.data)),this.prepareLogoDataPromise},a.prototype.createNodes=function(){this.generateBaseNode("Social");var a=this.generateStaticContentBasedNode("GeneralDescription");this.contentManager.buildContentMap();var b=this.generateStaticContentBasedNode("Contact");this.contentManager.buildContentMap(),this.generateContentBasedNode("OpeningHours"),this.generateContentBasedNode("Homepage_about",3),this.generateContentBasedNode("Inner_about",3),this.generateContentBasedNode("Welcome",3),this.generateTestimonialNodeList(),this.updateHeaderFieldsVisiblity(a),this.updateContactFieldsVisiblity(b),this.updateFooterFieldsVisibility()},a.prototype.updateLogo=function(){var a=this;return this.updateLogoPromise=this.isLoadedDefer.promise.then(function(){var b=a.generateStaticContentBasedNode("GeneralDescription",!1);a.updateHeaderFieldsVisiblity(b)}),this.updateLogoPromise},a.prototype.generateBaseNode=function(a){var b=this.getNodeByType(a);return this.setupNode(b)},a.prototype.generateContentBasedNode=function(b,c){var d=this;return void 0===c&&(c=1),_.range(c).map(function(c){var e=d.getNodeByType(b,!1,!0);return e.source=a.WixWixSource,d.setupNode(e,!0,1,!0,c)})},a.prototype.generateStaticContentBasedNode=function(a,b){void 0===b&&(b=!0);var c=this.getNodeByType(a);return this.setupNode(c,b,2,!1)},a.prototype.generateTestimonialNodeList=function(){var b=this;if(this.introManager.data.reviews&&0!==this.introManager.data.reviews.length){var c=this.introManager.data.reviews,d=ob.deepClone(c),e=this.getNodeByType("Testimonial",!0);return e.source=a.WixWixSource,_.filter(e.children,function(a){return"Testimonial"===a.getContentElementType()}).forEach(function(a,d){b.setupNode(a,!0,1,!1,d),c.splice(0,1)}),this.introManager.data.reviews=d,e}},a.prototype.setupNode=function(a,b,c,d,e){void 0===b&&(b=!1),void 0===c&&(c=0),void 0===d&&(d=!1),void 0===e&&(e=0);var f=a.getContentElement();if(b){var g=a.getContentElementType(),h=this.contentManager.getAliasForType(g),i=this.prepareCEDrafts(h,g,e);i&&i.length>0&&this.overrideCEValues(f,i[0])}var j=ob.deepClone(f.values),k=this.introContentElementGenerator.enrichContentElement(f,this.introManager.data);if(d&&(!k||!this.didContentElementChange(j,f.values)))return this.nodeManipulationService.deleteNode(a,void 0,!0),null;var l=a.getArgsMatchingPolicy();switch(c){case 1:_.keys(l).forEach(function(a){return delete l[a]});break;case 2:_.keys(l).forEach(function(a){"Contact map title"!==a&&(l[a]=!0)})}return this.modelTree.updateFieldsVisibility(a,null,null,!0,1===c),a},a.prototype.prepareCEDrafts=function(a,b,c){var d={rawSectionBrief:{id:a,ceType:b,cardinality:1}};return this.contentSource.prepareDrafts(d,1,c)},a.prototype.overrideCEValues=function(a,b){_.keys(a.values).forEach(function(c){_.has(b.values,c)&&(a.values[c].value=b.values[c].value)})},a.prototype.updateContactFieldsVisiblity=function(a){var b=a.getContentElement();b&&_.has(b,"values.Contact description")&&(b.values["Contact description"].name="Contact description");var c=a.getReferenceFields();c["Social.SocialButtons"]=!0,this.modelTree.updateReferenceFieldsVisibility(a,"Social.SocialButtons",!0),a.argsMatchingPolicy["address for display"]=!0,this.modelTree.updateFieldsVisibility(a,null,"address for display",!0),a.argsMatchingPolicy["address for google map"]=!0,this.modelTree.updateFieldsVisibility(a,null,"address for google map",!0),this.modelTree.updateFieldsVisibility(a)},a.prototype.updateHeaderFieldsVisiblity=function(a){var b=a.getReferenceFields();b["Social.SocialButtons"]=!0,this.modelTree.updateReferenceFieldsVisibility(a,"Social.SocialButtons",!0),b["Contact.phone number"]=!0,this.modelTree.updateReferenceFieldsVisibility(a,"Contact.phone number",!0),a.argsMatchingPolicy.BusinessTagline=this.isBusinessTagLineExists(),a.argsMatchingPolicy.Logo=this.isLogoExists(),this.hideHeaderMedia(a),this.modelTree.updateFieldsVisibility(a)},a.prototype.updateFooterFieldsVisibility=function(){var a=_.find(this.modelTree.footerNode&&this.modelTree.footerNode.children,{contentElementType:"GeneralDescription"});if(a){var b=a.getReferenceFields();a.argsMatchingPolicy.CopyrightMessage=!0,this.modelTree.updateFieldsVisibility(a,null,"CopyrightMessage",!0),a.argsMatchingPolicy.BusinessName=!1,this.modelTree.updateFieldsVisibility(a,null,"BusinessName",!1),a.argsMatchingPolicy.MainEmail=this.isEmailExists(),this.modelTree.updateFieldsVisibility(a,null,"MainEmail",!1),b["Contact.phone number"]=this.isPhoneExists(),this.modelTree.updateReferenceFieldsVisibility(a,"Contact.phone number",!1),b["Contact.fax"]=this.isFaxExists(),this.modelTree.updateReferenceFieldsVisibility(a,"Contact.fax",!1),b["Social.SocialButtons"]=!0,this.modelTree.updateReferenceFieldsVisibility(a,"Social.SocialButtons",!0),b["Contact.address for display"]=this.isAddressExists(),this.modelTree.updateReferenceFieldsVisibility(a,"Contact.address for display",!1),this.modelTree.updateFieldsVisibility(a)}},a.prototype.hideHeaderMedia=function(a){var b=this;a.hiddenMedia?a.hiddenMedia.shape||(a.hiddenMedia.shape={}):a.hiddenMedia={},_.forEach(a.contentElement.values.Logo.value,function(c){"shape"===c.mediaType&&(a.hiddenMedia.shape[b.mediaGallery.getItemId(c)]=!0)}),a.contentElement.fillValuesByMediaType()},a.prototype.createNodeByType=function(a,b){void 0===b&&(b=!1);var c=this.modelTree.getAvailableNodes(),d=_.find(c,{contentElementType:a});return b?d:_.first(d&&d.children)||d},a.prototype.getNodeByType=function(a,b,c){void 0===b&&(b=!1),void 0===c&&(c=!1);var d=_.find(this.modelTree.data.children,{contentElementType:a});if(c||!d){var e=this.createNodeByType(a,b);return this.modelTree.addNodeToTree(e)}return d},a.prototype.didContentElementChange=function(a,b){return a!==b},a.prototype.isSocialLinksExists=function(){var a=!1;return _.isArray(this.introManager.data.socialLinks)&&this.introManager.data.socialLinks.forEach(function(b){return _.isEmpty(b.url)?void 0:(a=!0,!1)}),a},a.prototype.isLogoExists=function(){return!!_.get(this.introManager,"data.media.logos[0].url")&&!!_.get(this.introManager,"data.media.displayLogo")},a.prototype.isBusinessTagLineExists=function(){return _.get(this.introManager.data,"generalInfo.categories.length")>0},a.prototype.isEmailExists=function(){return!!_.get(this.introManager,"data.contactDetails.email")},a.prototype.isPhoneExists=function(){return!!_.get(this.introManager,"data.contactDetails.phone")},a.prototype.isFaxExists=function(){return!!_.get(this.introManager,"data.contactDetails.fax")},a.prototype.isAddressExists=function(){return!!_.get(this.introManager,"data.contactDetails.address.fullAddress")},a}();b.WixWixSource="social",a.IntroModelTree=b,angular.module("siteGeneratorIntroInternal").service("introModelTree",b)}(intro||(intro={}));var intro;!function(a){var b=function(){function a(a){var b=this;this.$window=a,this.on=function(a,c){return b.$window.addEventListener(a,c)},this.off=function(a,c){return b.$window.removeEventListener(a,c)},this.trigger=function(a){return angular.element(b.$window).trigger(a)}}return a.$inject=["$window"],a.prototype.back=function(){this.$window.history.go(-1)},a.prototype.getWindowDimensions=function(){var a=this.$window.innerWidth,b=this.$window.innerHeight;return{windowWidth:a,windowHeight:b}},a.prototype.getAnimationBoxDimensions=function(b){var c=this.getWindowDimensions(),d=c.windowWidth,e=c.windowHeight,f=714,g=806,h=Math.floor(.42*d);h=Math.max(h,f),h=Math.min(h,g);var i=a.CONTENT_WIDTH,j=Math.floor(.7*(h-i)+b),k=Math.floor((e-j)/2),l=Math.floor((d-h)/2);return{y:k,x:l,width:h,height:j}},a.prototype.getContentPosition=function(b,c){var d=this.getWindowDimensions(),e=d.windowWidth,f=d.windowHeight,g=a.CONTENT_WIDTH,h=Math.floor((e-g)/2),i=Math.floor((f-c)/2),j=(b.width-g)/2;return{x:h,y:i,spacing:j}},a}();b.CONTENT_WIDTH=522,a.IntroWindow=b,angular.module("siteGeneratorIntroInternal").service("introWindow",b)}(intro||(intro={}));var intro;!function(a){var b=function(){function a(){}return a.prototype.isMatchSelectable=function(a){return a&&!a.isTitle},a.prototype.onMatchesChange=function(a,b,c){a.$watch(function(){return b.matches},function(a,b){a!==b&&c(a)})},a.prototype.onKeyDown=function(a,b){var c=a.keydown;a.keydown=function(d){c.apply(a,[d]),b(d)}},a}();a.IntroMdBase=b}(intro||(intro={}));var __extends=this&&this.__extends||function(){var a=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(a,b){a.__proto__=b}||function(a,b){for(var c in b)b.hasOwnProperty(c)&&(a[c]=b[c])};return function(b,c){function d(){this.constructor=b}a(b,c),b.prototype=null===c?Object.create(c):(d.prototype=c.prototype,new d)}}(),intro;!function(a){var b=9,c=function(a){function c(b){var c=a.call(this)||this;return c.$timeout=b,c.restrict="A",c.require="mdAutocomplete",c}return __extends(c,a),c.prototype.link=function(a,b,c,d){var e=this;this.$timeout(function(){return e.initPlaceholder(d,b,c)}),this.onMatchesChange(a,d,function(b){e.updatePlaceholder(a,d,b[0]||null)}),this.onKeyDown(d,function(b){e.onPlaceholderKeydown(a,d,b.keyCode)})},c.prototype.initPlaceholder=function(a,b,d){var e=this,f=angular.element('<input class="'+c.MD_PLACEHOLDER_CLASS+" "+d.introMdPlaceholder+'" tabindex="-1" />')[0];f.style.opacity="0";var g=b[0].querySelector("input");g.parentNode.insertBefore(f,g.nextSibling),g.addEventListener("keyup",function(){
f.value.indexOf(g.value)<0&&(f.value="")});var h=a.select;a.select=function(b){h.apply(a,[b]),f.value=""},this.updatePlaceholder=function(a,b,c){if(e.isMatchSelectable(c)){var h=g.value,i=d.mdItemText?a.$eval(d.mdItemText,(j={},j[b.itemName]=c,j)):c;f.value=e.getPlaceholderText(h,i),f.style.opacity="1"}else f.value="";var j}},c.prototype.getPlaceholderText=function(a,b){var c=b.toLowerCase().indexOf(a.replace(/^\s+/,"").toLowerCase()),d=c+a.replace(/^\s+/,"").length;return a+(c>=0?b.substr(d):"")},c.prototype.onPlaceholderKeydown=function(a,c,d){if(d===b){var e=c.scope.searchText,f=c.matches[0];e&&this.isMatchSelectable(f)&&c.select(0)}},c}(a.IntroMdBase);c.MD_PLACEHOLDER_CLASS="intro-md-placeholder",angular.module("siteGeneratorStaticsConsumerAppInternal").directive("introMdPlaceholder",["$timeout",function(a){return new c(a)}])}(intro||(intro={}));var intro;!function(a){var b=function(){function a(){this.restrict="A"}return a.prototype.handleMouseEvents=function(a){return!1},a.prototype.unhandleMouseEvents=function(a){a.off("mouseenter.intro"),a.off("mouseleave.intro")},a.prototype.link=function(b,c,d){var e=this,f=!1;d.$observe(a.MD_ITEM_DISABLED,function(b){if(b||f){for(var d=c[0];d&&"li"!==d.tagName.toLowerCase();)d=d.parentElement;var g=angular.element(d);b?(g.addClass(a.MD_ITEM_DISABLED_CLASS),e.handleMouseEvents(g),f=!0):(g.removeClass(a.MD_ITEM_DISABLED_CLASS),e.unhandleMouseEvents(g),f=!1)}})},a}();b.MD_ITEM_DISABLED="introMdItemDisabled",b.MD_ITEM_DISABLED_CLASS="intro-md-item-disabled",angular.module("siteGeneratorStaticsConsumerAppInternal").directive("introMdItemDisabled",function(){return new b})}(intro||(intro={}));var __extends=this&&this.__extends||function(){var a=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(a,b){a.__proto__=b}||function(a,b){for(var c in b)b.hasOwnProperty(c)&&(a[c]=b[c])};return function(b,c){function d(){this.constructor=b}a(b,c),b.prototype=null===c?Object.create(c):(d.prototype=c.prototype,new d)}}(),intro;!function(a){var b=13,c=38,d=40,e=function(e){function f(b,c,d,f,g){var h=e.call(this)||this;return h.flags=b,h.introWindow=c,h.introStep=d,h.$timeout=f,h.$mdUtil=g,h.restrict="A",h.require="mdAutocomplete",h.isLoaded=!0,h.onResize=_.debounce(function(){return h.toggleVisibility(!1)},a.IntroStep.RESIZE_DEBOUNCE),h}return __extends(f,e),f.$inject=["flags","introWindow","introStep","$timeout","$mdUtil"],f.prototype.removeDropMask=function(){this._disableScrollAround=this.$mdUtil.disableScrollAround,this.$mdUtil.disableScrollAround=angular.noop},f.prototype.onDestroy=function(){this.$mdUtil.disableScrollAround=this._disableScrollAround,this.introWindow.off("resize",this.onResize)},f.prototype.toggleVisibility=function(a){var b=this,c=angular.element(f.CLASS_SUGGESTIONS);c[0]&&(a&&this.isLoaded?this.$timeout(function(){c[0].style.opacity="1",b.introWindow.trigger("resize")},0,!1):c[0].style.opacity="0")},f.prototype.updateAutoCompleteHiddenState=function(a,b,c,d){a.$eval(c.mdListHiddenChanged,{$hidden:b}),c.hiddenOverride&&(d.hidden=0===d.matches.length?!0:a.$eval(c.hiddenOverride))},f.prototype.link=function(a,e,g,h){var i=this;this.removeDropMask(),this.introWindow.on("resize",this.onResize),a.$watch(function(){return i.introStep.contentBoxPosition},function(){return i.toggleVisibility(!0)}),a.$on("$destroy",function(){return i.onDestroy()}),a.$watch(function(){return h.hidden},function(b){i.updateAutoCompleteHiddenState(a,b,g,h)}),a.$watch(function(){return a.$ctrl.isTitleHovered},function(a,b){$(f.CLASS_SUGGESTIONS_UL).toggleClass("onRelatedResult",a)});var j=angular.element(f.CLASS_SUGGESTIONS);j.addClass(f.CLASS_SCROLLER),this.$timeout(function(){h.matches=i.introStep.disposable.categoriesMatches||[],i.updateAutoCompleteHiddenState(a,0===h.matches.length,g,h)},500);var k=this.flags.newElasticSearchEndpoint?{minScrollbarLength:43}:{};j.perfectScrollbar(k),g.introMdOnSelect&&a.$watch(function(){return h.scope.selectedItem},function(b,c){null!==b&&c!==b&&i.handleMdOnSelect(h,b,a,g)}),g.introMdLoaded&&(this.isLoaded=!1,this.$timeout(function(){return a.$watch(g.introMdLoaded,function(a){i.isLoaded=a,i.toggleVisibility(a)})})),this.onMatchesChange(a,h,function(b){var c=h.scope.searchText;a.$eval(g.mdSearchChanged,{$term:c,$matches:b}),i.introStep.disposable.categoriesMatches=b,i.$timeout(function(){h.index=-1,j.scrollTop(0),j.perfectScrollbar("update")})}),this.onKeyDown(h,function(a){switch(a.keyCode){case b:i.onEnterKeyDown(a,h);break;case c:case d:i.onArrowKeyDown(h,a,j)}})},f.prototype.handleMdOnSelect=function(a,b,c,d){var e=c.$eval(d.mdItemText,(f={},f[a.itemName]=b,f));this.$timeout(function(){var b=c.$eval(d.introMdOnSelect,{$term:e});b&&b.then(function(b){return a.matches=b})});var f},f.prototype.onArrowKeyDown=function(a,b,d){var e=a.index;e>=0&&(this.isMatchSelectable(a.matches[e])||(a.index=e+(b.keyCode===c?-1:1)),_.each(a.matches,function(a){a.isExactMatch=!1}),this.fixTheScroll(d,a.index))},f.prototype.onEnterKeyDown=function(a,b){var c=b.index;0>c||(a.preventDefault(),this.isMatchSelectable(b.matches[c])?b.scope.selectedItem&&b.select(c):b.select(0))},f.prototype.fixTheScroll=function(a,b){},f}(a.IntroMdBase);e.CLASS_SUGGESTIONS_UL=".md-autocomplete-suggestions",e.CLASS_SUGGESTIONS=".md-virtual-repeat-scroller",e.CLASS_SCROLLER="intro-md-aucotomplete-scroller",angular.module("siteGeneratorStaticsConsumerAppInternal").directive("introMdAutocomplete",["flags","introWindow","introStep","$timeout","$mdUtil",function(a,b,c,d,f){return new e(a,b,c,d,f)}])}(intro||(intro={}));var intro;!function(a){var b=function(){function a(){this.require="ngModel"}return a.prototype.link=function(a,b,c,d){"textarea"===b[0].tagName.toLowerCase()&&b.on("keydown paste",function(a){})},a}();a.IntroAddressFormatter=b,angular.module("siteGeneratorIntroInternal").directive("introAddressFormatter",function(){return new b})}(intro||(intro={}));var intro;!function(a){var b=function(){function a(a){this.introStep=a}return Object.defineProperty(a.prototype,"contentPosition",{get:function(){return this.introStep.contentBoxPosition?{top:this.introStep.contentBoxPosition.y,left:this.introStep.contentBoxPosition.x}:null},enumerable:!0,configurable:!0}),Object.defineProperty(a.prototype,"backButtonStyle",{get:function(){return this.introStep.contentBoxPosition?{"margin-right":this.introStep.contentBoxPosition.spacing}:null},enumerable:!0,configurable:!0}),Object.defineProperty(a.prototype,"nextButtonStyle",{get:function(){return this.introStep.contentBoxPosition?{"margin-left":this.introStep.contentBoxPosition.spacing}:null},enumerable:!0,configurable:!0}),Object.defineProperty(a.prototype,"boxTipStyle",{get:function(){return this.introStep.backdropBoxPosition?{top:this.introStep.backdropBoxPosition.y+this.introStep.backdropBoxPosition.height,left:this.introStep.backdropBoxPosition.x,width:this.introStep.backdropBoxPosition.width}:null},enumerable:!0,configurable:!0}),Object.defineProperty(a.prototype,"loaded",{get:function(){return this.introStep.contentElement?!this.introStep.contentElement.hidden:!1},enumerable:!0,configurable:!0}),a}();a.IntroQuestionsBase=b}(intro||(intro={}));var intro;!function(a){var b=function(){function a(a,b,c,d,e,f,g,h,i,j,k,l){if(this.$element=a,this.$state=b,this.$window=c,this.introStep=d,this.urlParser=e,this.applicationState=f,this.flags=j,this.introManager=k,this.initService=l,this.verticalQueryMap={"online-store":"Stores",blog:"Blog",booking:"Bookings"},this.introManager.init(this.getVertical()),j.newElasticSearchEndpoint&&(i[config.STATES.INTRO_SERVICES_OFFER].contentHeight=295,i[config.STATES.INTRO_SEARCH_CONFIRM].contentHeight=180,k.data.category||(i[config.STATES.INTRO_CATEGORY_SEARCH].contentHeight=325)),b.current.name===config.STATES.INTRO){var m=j.newElasticSearchEndpoint?config.STATES.INTRO_CATEGORY_SEARCH:config.STATES.INTRO_BUSINESS_TYPE;b.go(m)}var n={label:"site-generator-statics-consumer",spec:"specs.ob.FullStory",onReady:function(a){return g.intro.fullStoryStarted(a)}};h(n),this.registerKeyDown()}return a.$inject=["$element","$state","$window","introStep","urlParser","applicationState","consumerBiLogger","fullStoryLoader","introAnimationData","flags","introManager","initService"],a.prototype.getVertical=function(){var a,b=this.urlParser.queryParams();return b.vertical&&(a=this.verticalQueryMap[b.vertical]||b.vertical),a},a.prototype.registerKeyDown=function(){function a(){c.introManager.data.category=c.introManager.data.category||{};var a=c.introManager.data.category.structureId=c.introManager.data.category.structureId||"40dc538a8a6c3e2dae342922",b=c.introManager.data.category.industryId=c.introManager.data.category.industryId||"e79e5765052b89b579c9a4c2";c.introManager.data.name=c.introManager.data.name||"quickStory",c.applicationState.goToBuilderDeepLink(a,b,"quickStory")}var b=this,c=this;this.keyDownHandler=_.debounce(function(c){if((c.metaKey||c.ctrlKey)&&c.shiftKey&&c.altKey){var d=String.fromCharCode(c.keyCode);("M"===d||"J"===d)&&(b.flags.emptyPage=b.flags.emptyPage||"J"===d,c.preventDefault(),a())}},500),angular.element(this.$window).keydown(this.keyDownHandler)},a.prototype.$postLink=function(){var a=this.$element.find('[data-hook="animation-backdrop"]'),b=this.$element.find('[data-hook="animation-content"]'),c=this.$element.find('[data-hook="loading"]');this.introStep.init(a,b,c)},a.prototype.$onDestroy=function(){angular.element(this.$window).unbind("keydown",this.keyDownHandler),this.introStep.dispose()},a}();a.Intro=b,angular.module("siteGeneratorIntroInternal").component("intro",{controller:b,templateUrl:"views/intro/intro.html"})}(intro||(intro={}));var intro;!function(a){var b=function(){function a(a){this.introStep=a}return a.$inject=["introStep"],Object.defineProperty(a.prototype,"backStyle",{get:function(){return this.introStep.contentBoxPosition?{"margin-right":this.introStep.contentBoxPosition.spacing}:null},enumerable:!0,configurable:!0}),Object.defineProperty(a.prototype,"nextStyle",{get:function(){return this.introStep.contentBoxPosition?{"margin-left":this.introStep.contentBoxPosition.spacing}:null},enumerable:!0,configurable:!0}),a.prototype.onBack=function(){this.back&&this.back()},a.prototype.onNext=function(){this.next&&this.next()},a}();angular.module("siteGeneratorIntroInternal").component("introBoxButtons",{controller:b,templateUrl:"views/intro/intro-box-buttons.html",bindings:{next:"&?",back:"&?",focusNext:"=?",isNextDisabled:"=?"}})}(intro||(intro={}));var __extends=this&&this.__extends||function(){var a=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(a,b){a.__proto__=b}||function(a,b){for(var c in b)b.hasOwnProperty(c)&&(a[c]=b[c])};return function(b,c){function d(){this.constructor=b}a(b,c),b.prototype=null===c?Object.create(c):(d.prototype=c.prototype,new d)}}(),intro;!function(a){var b=function(b){function c(a,d,e,f,g,h,i,j,k,l,m){var n=b.call(this,a)||this;return n.$q=d,n.$timeout=e,n.$translate=f,n.introAnimationData=g,n.introWindow=h,n.applicationParameters=i,n.consumerBiLogger=j,n.introManager=k,n.flags=l,n.cmsApi=m,n.lastSearchedCategories=[],n.relatedResultsTitle={isTitle:!0,term:""},n.examplesTitle=n.$translate("intro.business-type.examples-label"),n.searchTerm="",n.searchChanged=!1,n.lastShowGenericPopUpState=!1,n.isTitleHovered=!1,n.isValidTerm=function(){return!n.searchTerm||"string"==typeof n.searchTerm&&n.cmsApi.sanitize(n.searchTerm).length>0},n.inSearch=function(){return!n.result&&n.lastSearchedTerm&&n.isValidTerm()},n.isEmptySearch=function(){return n.inSearch()&&0===n.lastSearchedCategories.length},n.shouldShowGenericPopover=function(){return n.inSearch()&&(0===n.lastSearchedCategories.length||n.lastSearchedCategories[0]===n.relatedResultsTitle)},n.isListLoaded=function(){return n.showResults},n.preSuggestionsByVertical=n.introManager.preSuggestionsByVertical,c.introCategoryCounter++,n.defaultCategories=n.introManager.generalCategories.General,n.introManager.vertical&&n.introManager.generalCategories[n.introManager.vertical]&&(n.defaultCategories=[].concat(n.introManager.generalCategories[n.introManager.vertical],n.defaultCategories)),n.relatedResultsTitle.term=n.$translate(c.RELATED_RESULTS_TITLE),n.validCategory=n.introManager.data.validCategory,l.introClearSearchedTextInReload&&1===c.introCategoryCounter&&(n.result=null,n.validCategory=!1,n.lastSearchedTerm="",n.searchTerm=""),n.result&&(n.result.term=n.introManager.data.lastSearchedTerm,n.selected=n.result,n.searchTerm=n.result.term,n.lastSearchedTerm=n.result.term),n}return __extends(c,b),c.$inject=["introStep","$q","$timeout","$translate","introAnimationData","introWindow","applicationParameters","consumerBiLogger","introManager","flags","cmsApi"],c.prototype.getPreSuggestionsByVertical=function(){var a=this.vertical,b=this.preSuggestionsByVertical[a];return b||c.DEFAULT_PRE_SUGGESTIONS},c.prototype.isSameCategory=function(a,b){return a.industryId===b.industryId&&a.structureId===b.structureId},c.prototype.isValidCategory=function(){var b=_.clone(a.DEFAULT_CATEGORY);return!this.searchTerm||this.result&&(!this.isSameCategory(this.result,b)||this.result.term===b.term)},c.prototype.$onInit=function(){this.consumerBiLogger.intro.pageView(config.STATES.INTRO_CATEGORY_SEARCH,null)},Object.defineProperty(c.prototype,"vertical",{get:function(){return this.introManager.vertical},enumerable:!0,configurable:!0}),Object.defineProperty(c.prototype,"result",{get:function(){return this.introManager.data.category},set:function(a){this.introManager.data.category=a},enumerable:!0,configurable:!0}),Object.defineProperty(c.prototype,"genericPopoverPosition",{get:function(){if(!this.introStep.backdropBoxPosition)return null;var b=this.introWindow.getWindowDimensions().windowHeight,c=this.introStep.backdropBoxPosition.y+this.introStep.backdropBoxPosition.height,d=this.introStep.contentBoxPosition.x+a.IntroWindow.CONTENT_WIDTH,e=b-c+12,f=d+58;return{bottom:e,left:f}},enumerable:!0,configurable:!0}),c.prototype.onExampleClick=function(a){var b=a.target.textContent;this.introManager.data.selectionSource="example list",this.consumerBiLogger.intro.businessTypeWasSelected("category",b,this.lastSearchedTerm,0,this.introManager.data.selectionSource),this.searchTerm=b,angular.element("[name=businessTypeInput]").focus()},c.prototype.getVerticalTranslation=function(a){if(!this.vertical)return this.$translate(a);var b=a+"-"+this.vertical,c=this.$translate(b);return c&&c!==b?c:this.$translate(a)},c.prototype.next=function(){if(this.result){var a=this.result.block?config.STATES.INTRO_BLOCKED_CATEGORY:config.STATES.INTRO_SERVICES_OFFER;this.introManager.data.lastSearchedTerm=this.result.term,this.introManager.data.validCategory=!0,this.consumerBiLogger.intro.selectBusinessTypePageNavigationClick(a,this.result.term,this.lastSearchedTerm,this.introManager.data.selectionSource,"next",this.result.structureId,this.result.industryId),this.prepareToProceed(),this.showResults=!1,this.introStep.next(a)}},c.prototype.skip=function(){var b=config.STATES.INTRO_SERVICES_OFFER,c=_.clone(a.DEFAULT_CATEGORY);this.introManager.data.validCategory=this.isValidCategory(),this.result=c,this.introManager.data.lastSearchedTerm=this.searchTerm||this.result.term,this.consumerBiLogger.intro.selectBusinessTypePageNavigationClick(b,this.result.term,this.lastSearchedTerm,this.introManager.data.selectionSource,"skip",this.result.structureId,this.result.industryId),this.prepareToProceed(),this.introStep.skip(b)},c.prototype.onSelectFromEmptyList=function(a,b){this.introManager.data.selectionSource="no matches list",this.result=a,this.consumerBiLogger.intro.businessTypeWasSelected("category",a.term,this.lastSearchedTerm,b,this.introManager.data.selectionSource),this.next()},c.prototype.getHighlightText=function(a){return a.isTitle?"":this.searchTerm.replace(/&/g,"&amp;")},c.prototype.onSearchChanged=function(a,b){this.lastSearchedTerm!==a&&this.consumerBiLogger.intro.businessTypeTypingClientEvent(a,b.length);var d=_.findIndex(b,function(a){return a.isTitle}),e=d>=0?b.slice(0,d):b,f=a.replace(/[-+\/.;()'&]/gi,""),g=_.findIndex(e,function(a){return a.term&&a.term.toLowerCase()===f.toLowerCase()});g>=0?(b[g].isExactMatch=!0,this.result=e[g]):this.result&&this.getDisplayText(this.result)!==a&&(this.result=null),this.searchChanged&&(this.introManager.data.validCategory=!!this.result,this.validCategory=this.introManager.data.validCategory),this.searchChanged=!0,this.lastShowGenericPopUpState=!!this.shouldShowGenericPopover(),this.lastSearchedCategories=b,this.isResetTerm(a,b)?(this.lastSearchedTerm="",this.result=null,this.searchTerm=""):this.lastSearchedTerm=a,c.isFirstSearchOnchange=!1;var h=!!this.shouldShowGenericPopover();h&&!this.lastShowGenericPopUpState&&this.consumerBiLogger.intro.genericCategoryDialogIsShown(a),""!==a?this.showResults=!0:this.validCategory=!1},c.prototype.isResetTerm=function(b,d){var e=_.clone(a.DEFAULT_CATEGORY);return this.flags.introClearSearchedTextInReload&&c.isFirstSearchOnchange&&1===c.introCategoryCounter&&0===d.length&&""!==b&&b!==e.term},c.prototype.itemClicked=function(a,b){b&&a.stopPropagation()},c.prototype.onSelectedFromList=function(a){var b=this;if(this.introManager.data.selectionSource="category list",this.selected){var c=this.lastSearchedCategories.indexOf(this.selected);this.selected.prefix?(this.searchTerm=this.selected.prefix+" ",this.consumerBiLogger.intro.businessTypeWasSelected("group",this.selected.term,this.lastSearchedTerm,c,this.introManager.data.selectionSource)):(this.result=this.selected,this.consumerBiLogger.intro.businessTypeWasSelected("category",this.selected.term,this.lastSearchedTerm,c,this.introManager.data.selectionSource)),this.validCategory=!!this.result}return this.lastSearchedTerm.toLowerCase()!==a.toLowerCase()?this.search(a).then(function(c){return c.filter(function(c){return b.getDisplayText(c)!==a})}):void this.next()},c.prototype.search=function(a,b,d){var e=this;void 0===a&&(a=this.searchTerm),void 0===b&&(b=200),void 0===d&&(d=200);var f=this.cmsApi.elasticSearch(a,b,d).then(function(a){var b=a.results.slice(0,c.RESULTS_LIMIT);if(b.length<c.RESULTS_THRESHOLD&&a.relatedResults.length>0){var d=a.relatedResults.map(function(a){return a.isRelated=!0,a});return b.concat([e.relatedResultsTitle],d)}return b});return f},c.prototype.getDisplayText=function(a){return a.prefix?a.prefix+"...":a.term},c.prototype.relatedResultsEnter=function(a){this.isTitleHovered=!!a},c.prototype.relatedResultsLeave=function(){this.isTitleHovered=!1},c.prototype.prepareToProceed=function(){this.result=this.result?this.getThinResult(this.result):_.clone(a.DEFAULT_CATEGORY),this.updateServiceOffers(this.result)},c.prototype.getThinResult=function(a){return{industryId:a.industryId,structureId:a.structureId,term:a.term,block:a.block,redirectUrl:a.redirectUrl}},c.prototype.updateServiceOffers=function(a){var b;b=this.getServiceByType(this.introManager.vertical),b&&(b.checked=!0);var c=_.find(this.applicationParameters.tpaTypes,function(b){return _.contains(b.structureIds,a.structureId)});c&&(b=this.getServiceByType(c.type),b&&(b.checked=!1))},c.prototype.getServiceByType=function(a){return _.find(this.introManager.data.serviceOffer,{type:a})},c}(a.IntroQuestionsBase);b.RELATED_RESULTS_TITLE="intro.business-type.related-results-label",b.RESULTS_THRESHOLD=7,b.RESULTS_LIMIT=200,b.introCategoryCounter=0,b.isFirstSearchOnchange=!0,b.DEFAULT_PRE_SUGGESTIONS=a.DEFAULT_PRE_SUGGESTIONS,a.IntroCategorySearch=b,angular.module("siteGeneratorIntroInternal").component("introCategorySearch",{controller:b,templateUrl:"views/intro/intro-category-search.html"})}(intro||(intro={}));var intro;!function(a){var b=function(){function a(a,b,c){this.$q=a,this.$timeout=b,this.scaling=!1,this.showButtons=!0,this.showResults=!c}return a.prototype.startScale=function(){var a=this.$q.defer();return this.showResults=!1,this.showButtons=!1,this.scaling=!0,this.$timeout(function(){return a.resolve()}),a.promise},a.prototype.endScale=function(){this.showResults=!0,this.showButtons=!0,this.scaling=!1},a}();a.IntroVisualIndications=b}(intro||(intro={}));var __extends=this&&this.__extends||function(){var a=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(a,b){a.__proto__=b}||function(a,b){for(var c in b)b.hasOwnProperty(c)&&(a[c]=b[c])};return function(b,c){function d(){this.constructor=b}a(b,c),b.prototype=null===c?Object.create(c):(d.prototype=c.prototype,new d)}}(),intro;!function(a){var b=function(a){function b(b,c,d){var e=a.call(this,b)||this;return e.introManager=c,e.consumerBiLogger=d,e.selected=c.data.category,e}return __extends(b,a),b.$inject=["introStep","introManager","consumerBiLogger"],b.prototype.$onInit=function(){this.consumerBiLogger.intro.pageView(config.STATES.INTRO_BLOCKED_CATEGORY,null)},Object.defineProperty(b.prototype,"blockedRedirectUrl",{get:function(){return this.selected.redirectUrl},enumerable:!0,configurable:!0}),Object.defineProperty(b.prototype,"backStyle",{get:function(){return this.introStep.contentBoxPosition?{"margin-right":this.introStep.contentBoxPosition.spacing}:null},enumerable:!0,configurable:!0}),Object.defineProperty(b.prototype,"nextStyle",{get:function(){return this.introStep.contentBoxPosition?{"margin-left":this.introStep.contentBoxPosition.spacing}:null},enumerable:!0,configurable:!0}),b.prototype.onNext=function(){this.consumerBiLogger.intro.selectBusinessTypePageNavigationClick("pro editor",this.selected.term,this.selected.term,this.introManager.data.selectionSource,"escape",this.selected.structureId,this.selected.industryId)},b.prototype.back=function(){this.introStep.back(config.STATES.INTRO_CATEGORY_SEARCH)},b}(a.IntroQuestionsBase);angular.module("siteGeneratorIntroInternal").component("introBlockedCategory",{controller:b,templateUrl:"views/intro/intro-blocked-category.html"})}(intro||(intro={}));var __extends=this&&this.__extends||function(){var a=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(a,b){a.__proto__=b}||function(a,b){for(var c in b)b.hasOwnProperty(c)&&(a[c]=b[c])};return function(b,c){function d(){this.constructor=b}a(b,c),b.prototype=null===c?Object.create(c):(d.prototype=c.prototype,new d)}}(),intro;!function(a){var b=function(b){function c(a,c,d,e,f,g,h,i){var j=b.call(this,g)||this;return j.consumerBiLogger=a,j.applicationParameters=c,j.introManager=d,j.$q=e,j.flags=f,j.cmsApi=h,j.$translate=i,j.inputDebounceRate=500,j.isEmptySearch=!1,j.isInvalidSearch=!1,j.aboutToSearch=!1,j.lastSearchedCategories=[],j._searchTerm="",j.lastShouldShowBlock=!1,j.inputDebounceRate=100,j.result&&(j.selected=j.result,j._searchTerm=j.result.term,j.lastSearchedTerm=j.result.term),j.defaultCategories=j.introManager.generalCategories.General,j.preSuggestionsByVertical=j.introManager.preSuggestionsByVertical,j}return __extends(c,b),c.$inject=["consumerBiLogger","applicationParameters","introManager","$q","flags","introStep","cmsApi","$translate"],c.prototype.$onInit=function(){this.consumerBiLogger.intro.pageView(config.STATES.INTRO_BUSINESS_TYPE,null)},Object.defineProperty(c.prototype,"result",{get:function(){return this.introManager.data.category},set:function(a){this.introManager.data.category=a},enumerable:!0,configurable:!0}),Object.defineProperty(c.prototype,"searchTerm",{get:function(){return this._searchTerm},set:function(a){"string"==typeof a&&(this.isInvalidSearch=this.cmsApi.sanitize(a)!==a,this.aboutToSearch=!1),this.aboutToSearch=!0,this._searchTerm=a,this.escapedSearchTerm=a.replace(/&/g,"&amp;")},enumerable:!0,configurable:!0}),c.prototype.getLabelByVertical=function(){var a=this.introManager.vertical,b=c.DEFAULT_LABEL+"-"+a,d=this.$translate(b);return d===b&&(d=this.$translate(c.DEFAULT_LABEL)),d},c.prototype.getPreSuggestionsByVertical=function(){var a=this.introManager.vertical,b=this.preSuggestionsByVertical[a];return b||c.DEFAULT_PRE_SUGGESTIONS},c.prototype.isResultValid=function(){return this.result&&!this.result.block},c.prototype.search=function(a){return this.isEmptySearch=!1,this.aboutToSearch=!1,this.isInvalidSearch?this.$q.when([]):this.cmsApi.suggest(a)},c.prototype.onSearchChanged=function(a,b){this.lastSearchedTerm!==a&&this.consumerBiLogger.intro.businessTypeTypingClientEvent(a,b.length),this.isEmptySearch=0===b.length;var c=_.findIndex(b,function(b){return b.term&&b.term.toLowerCase()===a.toLowerCase()});c>=0?this.result=b[c]:this.result=null,this.lastSearchedCategories=b,this.lastSearchedTerm=a},c.prototype.getCategoryDisplayText=function(a){var b="";return a&&(b=a.type===c.TYPE_GROUP?a.prefix+c.GROUP_SUFFIX:a.term),b},c.prototype.onSelectFromPreSuggestion=function(a,b){this.introManager.data.selectionSource="example list",this.consumerBiLogger.intro.businessTypeWasSelected("category",a,this.lastSearchedTerm,b,this.introManager.data.selectionSource),this.searchTerm=a,this.focusInput()},c.prototype.onSelectedFromList=function(){if(this.introManager.data.selectionSource="category list",this.selected){var a=this.lastSearchedCategories.indexOf(this.selected);this.selected.type===c.TYPE_GROUP?(this.searchTerm=this.selected.prefix+" ",this.consumerBiLogger.intro.businessTypeWasSelected("group",this.selected.term,this.lastSearchedTerm,a,this.introManager.data.selectionSource)):(this.result=this.selected,this.consumerBiLogger.intro.businessTypeWasSelected("category",this.selected.term,this.lastSearchedTerm,a,this.introManager.data.selectionSource))}},c.prototype.onSelectFromEmptyList=function(a,b){this.introManager.data.selectionSource="no matches list",this.result=a,this.consumerBiLogger.intro.businessTypeWasSelected("category",a.term,this.lastSearchedTerm,b,this.introManager.data.selectionSource),this.next()},c.prototype.shouldShowBlock=function(){return this.selected?(!this.lastShouldShowBlock&&this.selected.block&&this.consumerBiLogger.intro.businessTypeNotSupported(this.selected.term,this.lastSearchedTerm),this.lastShouldShowBlock=this.selected.block,this.searchTerm&&this.selected.block):(this.lastShouldShowBlock=!1,!1)},c.prototype.showShowEmptyMessage=function(){return this.searchTerm&&this.isEmptySearch&&!this.isInvalidSearch&&!this.aboutToSearch},c.prototype.shouldShowBlockOnEmpty=function(){return this.treatEmptyAsBlocked&&this.showShowEmptyMessage()},Object.defineProperty(c.prototype,"treatEmptyAsBlocked",{get:function(){return!1},enumerable:!0,configurable:!0}),Object.defineProperty(c.prototype,"blockedRedirectUrl",{get:function(){return this.selected?this.selected.redirectUrl:this.$translate("intro.business-type.default-redirect-url",{searchTerm:this.searchTerm})},enumerable:!0,configurable:!0}),c.prototype.onBlockClicked=function(){var a=this.selected?this.selected.term:this.searchTerm,b=this.selected?this.selected.structureId:null,c=this.selected?this.selected.industryId:null;this.consumerBiLogger.intro.selectBusinessTypePageNavigationClick("pro editor",a,this.lastSearchedTerm,this.introManager.data.selectionSource,"escape",b,c)},c.prototype.next=function(){if(this.isResultValid()){var a=config.STATES.INTRO_SERVICES_OFFER;this.consumerBiLogger.intro.selectBusinessTypePageNavigationClick(a,this.result.term,this.lastSearchedTerm,this.introManager.data.selectionSource,"next",this.result.structureId,this.result.industryId),this.prepareToProceed(),this.introStep.next(a)}},c.prototype.skip=function(){var b=config.STATES.INTRO_SERVICES_OFFER;this.result=_.clone(a.DEFAULT_CATEGORY),this.consumerBiLogger.intro.selectBusinessTypePageNavigationClick(b,this.result.term,this.lastSearchedTerm,this.introManager.data.selectionSource,"skip",this.result.structureId,this.result.industryId),this.prepareToProceed(),this.introStep.skip(b)},c.prototype.prepareToProceed=function(){this.result=this.result?this.getThinResult(this.result):_.clone(a.DEFAULT_CATEGORY),this.updateServiceOffers(this.result)},c.prototype.getThinResult=function(a){return{industryId:a.industryId,structureId:a.structureId,term:a.term}},c.prototype.updateServiceOffers=function(a){var b;b=this.getServiceByType(this.introManager.vertical),b&&(b.checked=!0);var c=_.find(this.applicationParameters.tpaTypes,function(b){return _.contains(b.structureIds,a.structureId)});c&&(b=this.getServiceByType(c.type),b&&(b.checked=!1))},c.prototype.getServiceByType=function(a){return _.find(this.introManager.data.serviceOffer,{type:a})},c.prototype.focusInput=function(){angular.element("[name=businessTypeInput]").focus()},c}(a.IntroQuestionsBase);b.TYPE_GROUP="group",b.GROUP_SUFFIX="...",b.DEFAULT_LABEL="intro.business-type.label",b.DEFAULT_PRE_SUGGESTIONS=a.DEFAULT_PRE_SUGGESTIONS,angular.module("siteGeneratorIntroInternal").component("introBusinessType",{controller:b,templateUrl:"views/intro/intro-business-type.html"})}(intro||(intro={}));var __extends=this&&this.__extends||function(){var a=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(a,b){a.__proto__=b}||function(a,b){for(var c in b)b.hasOwnProperty(c)&&(a[c]=b[c])};return function(b,c){function d(){this.constructor=b}a(b,c),b.prototype=null===c?Object.create(c):(d.prototype=c.prototype,new d)}}(),intro;!function(a){var b=function(b){function c(c,d,e,f,g){var h=b.call(this,c)||this;if(h.flags=d,h.consumerBiLogger=e,h.applicationParameters=f,h.introManager=g,h.photographerStrctureIds=a.photographerStructureIds,h.storesSelectedState=function(){return h.serviceSelectedState(h.applicationParameters.tpaTypes.Stores.type)},h.bookingsSelectedState=function(){return h.serviceSelectedState(h.applicationParameters.tpaTypes.Bookings.type)},h.getSubscribersSelectedState=function(){return h.serviceSelectedState(h.applicationParameters.tpaTypes.GetSubscribers.type)},h.blogSelectedState=function(){return h.serviceSelectedState(h.applicationParameters.tpaTypes.Blog.type)},h.introManager.data.category||(h.introManager.data.category=_.clone(a.DEFAULT_CATEGORY)),h.isPhotographyRelatedStructure()){var i=h.offers.find(function(a){return a.type===h.applicationParameters.tpaTypes.Stores.type});i.checked=!1}return h}return __extends(c,b),c.$inject=["introStep","flags","consumerBiLogger","applicationParameters","introManager"],c.prototype.$onInit=function(){this.consumerBiLogger.intro.pageView(config.STATES.INTRO_SERVICES_OFFER,null)},c.prototype.onOfferChanged=function(){this.consumerBiLogger.intro.servicesSelected(this.storesSelectedState(),this.bookingsSelectedState(),this.getSubscribersSelectedState(),this.blogSelectedState())},c.prototype.isPhotographyRelatedStructure=function(){var a=this.introManager.data.category.structureId;return this.photographerStrctureIds.indexOf(a)>-1},c.prototype.shouldShowOffer=function(a){if(this.isPhotographyRelatedStructure()&&a===this.applicationParameters.tpaTypes.Stores.type)return!1;var b=this.introManager.data.category.structureId,c=_.find(this.applicationParameters.tpaTypes,{type:a});return a!==this.introManager.vertical&&!_.contains(c.structureIds,b)},Object.defineProperty(c.prototype,"offers",{get:function(){return this.introManager.data.serviceOffer},enumerable:!0,configurable:!0}),c.prototype.next=function(){this.consumerBiLogger.intro.selectServicesPageNavigationClick(config.STATES.INTRO_BUSINESS_NAME,"next",this.storesSelectedState(),this.bookingsSelectedState(),this.getSubscribersSelectedState(),this.blogSelectedState()),this.introStep.next(config.STATES.INTRO_BUSINESS_NAME)},c.prototype.skip=function(){this.consumerBiLogger.intro.selectServicesPageNavigationClick(config.STATES.INTRO_BUSINESS_NAME,"skip",this.storesSelectedState(),this.bookingsSelectedState(),this.getSubscribersSelectedState(),this.blogSelectedState()),this.introStep.skip(config.STATES.INTRO_BUSINESS_NAME)},c.prototype.back=function(){var a=this.flags.newElasticSearchEndpoint?config.STATES.INTRO_CATEGORY_SEARCH:config.STATES.INTRO_BUSINESS_TYPE;this.consumerBiLogger.intro.selectServicesPageNavigationClick(a,"back",this.storesSelectedState(),this.bookingsSelectedState(),this.getSubscribersSelectedState(),this.blogSelectedState()),this.introStep.back(a)},c.prototype.serviceSelectedState=function(a){var b=_.find(this.offers,function(b){
return b.type===a});return this.shouldShowOffer(a)?b.checked.toString():"true (default)"},c}(a.IntroQuestionsBase);angular.module("siteGeneratorIntroInternal").component("introServiceOffer",{controller:b,templateUrl:"views/intro/intro-service-offer.html"})}(intro||(intro={}));var __extends=this&&this.__extends||function(){var a=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(a,b){a.__proto__=b}||function(a,b){for(var c in b)b.hasOwnProperty(c)&&(a[c]=b[c])};return function(b,c){function d(){this.constructor=b}a(b,c),b.prototype=null===c?Object.create(c):(d.prototype=c.prototype,new d)}}(),intro;!function(a){var b=function(b){function c(c,d,e,f,g){var h=b.call(this,c)||this;return h.flags=d,h.consumerBiLogger=e,h.introManager=f,h.$translate=g,h.businessNameTitleByStructureId=a.businessNameTitleByStructureId,h}return __extends(c,b),c.$inject=["introStep","flags","consumerBiLogger","introManager","$translate"],c.prototype.$onInit=function(){this.consumerBiLogger.intro.pageView(config.STATES.INTRO_BUSINESS_NAME,null)},Object.defineProperty(c.prototype,"name",{get:function(){return this.introManager.data.name},set:function(a){this.introManager.data.name=a},enumerable:!0,configurable:!0}),c.prototype.next=function(){this.name&&(this.consumerBiLogger.intro.typeBusinessNamePageNavigationClick(config.STATES.INTRO_BUSINESS_LOCATION,"next",this.name),this.name||(this.name=a.EMPTY_BUSINESS_NAME),this.introStep.next(config.STATES.INTRO_BUSINESS_LOCATION))},c.prototype.back=function(){this.consumerBiLogger.intro.typeBusinessNamePageNavigationClick(config.STATES.INTRO_SERVICES_OFFER,"back",this.name),this.introStep.back(config.STATES.INTRO_SERVICES_OFFER)},c.prototype.getBusinessNameTitle=function(){var a=this.introManager.getCategoryNoError(),b=this.businessNameTitleByStructureId[a.structureId],d=this.$translate(b);return d===b&&(d=this.$translate(this.flags.newElasticSearchEndpoint?c.DEFAULT_BUSINESS_NAME_TITLE:c.DEFAULT_BUSINESS_NAME_TITLE_OLD)),d},c}(a.IntroQuestionsBase);b.DEFAULT_BUSINESS_NAME_TITLE_OLD="intro.business-name.input-label-old",b.DEFAULT_BUSINESS_NAME_TITLE="intro.business-name.input-label",angular.module("siteGeneratorIntroInternal").component("introBusinessName",{controller:b,templateUrl:"views/intro/intro-business-name.html"})}(intro||(intro={}));var __extends=this&&this.__extends||function(){var a=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(a,b){a.__proto__=b}||function(a,b){for(var c in b)b.hasOwnProperty(c)&&(a[c]=b[c])};return function(b,c){function d(){this.constructor=b}a(b,c),b.prototype=null===c?Object.create(c):(d.prototype=c.prototype,new d)}}(),intro;!function(a){var b=function(a){function b(b,c,d,e,f,g,h){var i=a.call(this,b)||this;return i.$translate=c,i.experimentManager=d,i.consumerBiLogger=e,i.introManager=f,i.osUtils=g,i.flags=h,i.hidePlaceholder=!1,i.isValid=function(){return i.introManager.hasAddress},i}return __extends(b,a),b.$inject=["introStep","$translate","experimentManager","consumerBiLogger","introManager","osUtils","flags"],b.prototype.$onInit=function(){this.consumerBiLogger.intro.pageView(config.STATES.INTRO_BUSINESS_LOCATION,null)},Object.defineProperty(b.prototype,"address",{get:function(){return this.introManager.data.userLocation},set:function(a){this.introManager.data.userLocation=a},enumerable:!0,configurable:!0}),Object.defineProperty(b.prototype,"placeholder",{get:function(){return this.hidePlaceholder?"":this.$translate("intro.business-location.input-placeholder")},enumerable:!0,configurable:!0}),b.prototype.skip=function(){this.address=null,this.introManager.data.ipBasedLocation=!1,this.introManager.data.indifferentLocation=!1;var a=this.introManager.data.indifferentLocation?config.STATES.INTRO_SEARCH_CONFIRM:config.STATES.INTRO_EDIT_USER;delete this.introManager.data.searchResults,this.consumerBiLogger.intro.typeBusinessLocationPageNavigationClick(a,"skip",null),this.introStep.next(a)},b.prototype.next=function(){this.isValid()&&(this.introManager.data.ipBasedLocation=!1,this.introManager.data.indifferentLocation=!1,this.consumerBiLogger.intro.typeBusinessLocationPageNavigationClick(config.STATES.INTRO_SEARCH_CONFIRM,"next",this.address.formatted_address),this.introStep.next(config.STATES.INTRO_SEARCH_CONFIRM))},b.prototype.back=function(){this.consumerBiLogger.intro.typeBusinessLocationPageNavigationClick(config.STATES.INTRO_BUSINESS_NAME,"back",null),this.introStep.back(config.STATES.INTRO_BUSINESS_NAME)},b}(a.IntroQuestionsBase);angular.module("siteGeneratorIntroInternal").component("introBusinessLocation",{controller:b,templateUrl:"views/intro/intro-business-location.html"})}(intro||(intro={}));var __extends=this&&this.__extends||function(){var a=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(a,b){a.__proto__=b}||function(a,b){for(var c in b)b.hasOwnProperty(c)&&(a[c]=b[c])};return function(b,c){function d(){this.constructor=b}a(b,c),b.prototype=null===c?Object.create(c):(d.prototype=c.prototype,new d)}}(),intro;!function(a){var b=function(a){function b(b,c,d,e,f){var g=a.call(this,b)||this;return g.flags=c,g.consumerBiLogger=d,g.$q=e,g.introManager=f,g}return __extends(b,a),b.$inject=["introStep","flags","consumerBiLogger","$q","introManager"],b.prototype.$onInit=function(){this.consumerBiLogger.intro.pageView(config.STATES.INTRO_SEARCH_CONFIRM,null)},Object.defineProperty(b.prototype,"isNewElasticSearch",{get:function(){return this.flags.newElasticSearchEndpoint},enumerable:!0,configurable:!0}),Object.defineProperty(b.prototype,"businessName",{get:function(){return this.introManager.data.name},enumerable:!0,configurable:!0}),b.prototype.skip=function(){this.consumerBiLogger.intro.approveSearchInformationPageNavigationClick(config.STATES.INTRO_EDIT_USER,"skip",this.introManager.data.name),this.introStep.wait(),this.introManager.setAddress(this.introManager.data.userLocation),this.introStep.skip(config.STATES.INTRO_EDIT_USER)},b.prototype.next=function(){var a=this;this.consumerBiLogger.intro.approveSearchInformationPageNavigationClick(config.STATES.INTRO_SELECT_USER,"next",this.introManager.data.name);var b=!1,c=this.introStep.wait(),d=this.introManager.searchUsers(!1);c.then(function(){b||a.introStep.loadingElement.show()}),this.$q.all([c,d])["finally"](function(){b=!0,a.introStep.loadingElement.hide(),a.introStep.next(config.STATES.INTRO_SELECT_USER)})},b.prototype.back=function(){delete this.introManager.data.searchResults,this.consumerBiLogger.intro.approveSearchInformationPageNavigationClick(config.STATES.INTRO_BUSINESS_LOCATION,"back",this.introManager.data.name),this.introStep.back(config.STATES.INTRO_BUSINESS_LOCATION)},b}(a.IntroQuestionsBase);angular.module("siteGeneratorIntroInternal").component("introSearchConfirm",{controller:b,templateUrl:"views/intro/intro-search-confirm.html"})}(intro||(intro={}));var intro;!function(a){var b=function(){function a(a,b,c,d,e,f){var g=this;this.introStep=a,this.$element=b,this.introManager=c,this.experimentManager=d,this.flags=e,this.consumerBiLogger=f,this.title=this.getTitle(),this.resultsText=this.getResultsText(),this.name=this.introManager.data.name,this.address=this.introManager.data.userLocation,this.scrollable=this.$element.find('[data-hook="scroll-container"]'),this.locationInput=this.$element.find('[data-hook="business-location-input"]');var h=this.$element.find('[data-hook="back-to-top"]');this.scrollable.on("scroll",_.throttle(function(){return requestAnimationFrame(function(){return g.updateScrollTopVisibility(h)})},1e3)),this.updateScrollTopVisibility(h)}return a.$inject=["introStep","$element","introManager","experimentManager","flags","consumerBiLogger"],a.prototype.updateScrollTopVisibility=function(a){var b=this.locationInput.offset().top+this.locationInput.outerHeight()<0;b?a.fadeIn(400):a.fadeOut(400)},a.prototype.$onInit=function(){this.consumerBiLogger.intro.pageView(config.STATES.INTRO_SELECT_USER,this.results.length)},a.prototype.getResultsText=function(){var a;return a=this.introManager.isWixWizError?"intro.select-user.results-error":0===this.results.length?"intro.select-user.results-none":"intro.select-user.results-"+(this.results.length>1?"multiple":"single")},a.prototype.getResultsLength=function(){return this.results.length>0?this.results.length:""},a.prototype.onGoToTopClicked=function(){this.consumerBiLogger.intro.wixwizSearchResultsGoToTopOfPageClick(this.results.length,null),this.goToTop()},a.prototype.goToTop=function(){this.scrollable.animate({scrollTop:0})},a.prototype.getTitle=function(){var a="intro.select-user.title";return this.introManager.isWixWizError?a="intro.select-user.title-error":0===this.results.length&&(a="intro.select-user.title-no-results"),a},Object.defineProperty(a.prototype,"subtitle",{get:function(){return this.introManager.isWixWizError?"error":0===this.results.length?"noresults":"someresults"},enumerable:!0,configurable:!0}),Object.defineProperty(a.prototype,"results",{get:function(){return this.introManager.data.searchResults||[]},enumerable:!0,configurable:!0}),a.prototype.search=function(){var a=this;this.introManager.data.indifferentLocation=!this.address,this.introManager.data.name=this.name,this.introManager.data.userLocation=this.address,this.consumerBiLogger.intro.clickOnSearchButtonInSelectUserPage(this.name,this.introManager.data.userLocation.formatted_address),this.introManager.searchUsers()["finally"](function(){a.title=a.getTitle(),a.resultsText=a.getResultsText()})},a.prototype.next=function(a){var b=this;this.consumerBiLogger.intro.selectInfoCardPageNavigationClick(config.STATES.INTRO_SEARCH_CONFIRM,"next",this.results.length,null,this.results.indexOf(a),a.nameSimilarityRank,a.distance),this.introManager.getExtendedUser(a)["finally"](function(){_.get(b.introManager.data,"contactDetails.address.fullAddress")||b.introManager.setAddress(b.introManager.data.userLocation),b.introStep.next(config.STATES.INTRO_EDIT_USER)})},a.prototype.skip=function(){this.consumerBiLogger.intro.selectInfoCardPageNavigationClick(config.STATES.INTRO_SEARCH_CONFIRM,"skip",this.results.length,null,null,null,null),this.introManager.setAddress(this.introManager.data.userLocation),this.introStep.skip(config.STATES.INTRO_EDIT_USER)},a.prototype.back=function(){this.consumerBiLogger.intro.selectInfoCardPageNavigationClick(config.STATES.INTRO_SEARCH_CONFIRM,"back",this.results.length,null,null,null,null),this.introStep.back(config.STATES.INTRO_SEARCH_CONFIRM)},a}();angular.module("siteGeneratorIntroInternal").component("introSelectUser",{templateUrl:"views/intro/intro-select-user.html",controller:b,bindings:{}}),angular.module("siteGeneratorIntroInternal").directive("introScrollbar",["osUtils",function(a){return{restrict:"A",compile:function(b,c){return a.isIE&&b[0].removeAttribute("cc-scrollbar"),null}}}])}(intro||(intro={}));var intro;!function(a){var b=function(){function b(a,b,c,d,e){this.applicationState=a,this.introManager=b,this.introStep=c,this.logoManager=d,this.consumerBiLogger=e}return b.$inject=["applicationState","introManager","introStep","logoManager","consumerBiLogger"],b.prototype.$onInit=function(){this.consumerBiLogger.intro.pageView(config.STATES.INTRO_EDIT_USER,null)},Object.defineProperty(b.prototype,"introData",{get:function(){return this.introManager.data},enumerable:!0,configurable:!0}),b.prototype.next=function(){var b=this;if(this.consumerBiLogger.intro.editInfoCardPageNavigationClick(config.STATES.BUILDER,"next"),!this.introManager.data)throw"intro manager did not initialized.";this.introStep.hideContent(!0).then(function(){b.introManager.prepareDataForBuilder(),b.introStep.next(a.INTRO_FINISHED),b.applicationState.goToBuilder()})},b.prototype.back=function(){var b=a.INTRO_STATES.INTRO_SELECT_USER;this.introManager.data.userLocation?this.introManager.data.searchResults||(b=a.INTRO_STATES.INTRO_SEARCH_CONFIRM):b=a.INTRO_STATES.INTRO_BUSINESS_LOCATION,this.consumerBiLogger.intro.editInfoCardPageNavigationClick(b,"back"),this.introStep.back(b)},b}();angular.module("siteGeneratorIntroInternal").component("introEditUser",{templateUrl:"views/intro/intro-edit-user.html",controller:b,bindings:{}})}(intro||(intro={}));var intro;!function(a){var b=function(){function a(a,b){this.$parse=a,this.clientTopology=b,this.logoUrl=this.getLogoPlaceholder()}return a.$inject=["$parse","clientTopology"],a.prototype.getLogoPlaceholder=function(){var a=this.$parse("media.logos[0].url")(this.data);if(!a){var b=Math.floor(4*Math.random())+2;a=this.clientTopology.staticsUrl+"/images/intro/logo-placeholder"+b+".png"}return a},a}();angular.module("siteGeneratorIntroInternal").component("businessCardStatic",{controller:b,templateUrl:"views/intro/business-card-static.html",bindings:{data:"="}})}(intro||(intro={}));var intro;!function(a){var b=function(){function a(a,b){var c=this;a.$watch(function(){return c.logoUrl},function(a){b.find("image").attr("xlink:href",a)})}return a.$inject=["$scope","$element"],a}();angular.module("siteGeneratorIntroInternal").component("businessCardHeader",{controller:b,templateUrl:"views/intro/business-card-header.html",bindings:{logoUrl:"="}})}(intro||(intro={}));var intro;!function(a){var b=function(){function a(a,b,c,d){this.mediaGalleryAdapter=a,this.previewUrls=b,this.consumerBiLogger=c,this.$element=d}return a.$inject=["mediaGalleryAdapter","previewUrls","consumerBiLogger","$element"],a.prototype.openMediaManager=function(){var a=this;this.mediaGalleryAdapter.selectLogo().then(function(b){var c=a.previewUrls.getImageThumbnailUrl(b[0].relativeUri,b[0].mediaType);a.onEdit({$url:c,$data:b[0]})})},a.prototype.logoIsPlaceholder=function(){return this.url&&this.url.indexOf("/logo-placeholder")>=0},a.prototype.clickOnInputFile=function(){this.inputFileElm||(this.inputFileElm=this.$element.find('[data-hook="file-upload"]')),this.consumerBiLogger.intro.clickOnReplaceLogoIntroWelcometourBuilder(this.origin.startsWith("welcome")?"welcome":"no-tour",this.origin),this.inputFileElm.click()},a}();angular.module("siteGeneratorIntroInternal").component("businessCardLogo",{controller:b,templateUrl:"views/intro/business-card-logo.html",bindings:{url:"=",origin:"=",enableEdit:"=?",justReplaceButton:"=?",onDelete:"&",onEdit:"&",useMediaManager:"=?",showWrappingCircle:"=?",isUploading:"=",uploadError:"="}})}(intro||(intro={}));var BackdropAnimationsCanvasUtils=function(){function a(){}return a.prototype.createSprite=function(a){var b=this,c=[];return a.forEach(function(a){switch(a.type){case"circle":_.isUndefined(a.radius)&&console.error("Circle definition missing radius",a),c.push(b.createSpriteCircle(a));break;case"rect":(_.isUndefined(a.width)||_.isUndefined(a.height))&&console.error("Rectangle definition missing width or height",a),c.push(b.createSpriteRect(a))}}),c},a.prototype.drawCircle=function(a,b,c,d,e,f,g){if(void 0===e&&(e="#fff"),void 0===g&&(g=0),a.save(),f){var h=f.from,i=h[0],j=h[1],k=f.to,l=k[0],m=k[1],n=a.createLinearGradient(i,j,l,m);_.forEach(f.stops,function(a){return n.addColorStop(a[0],a[1])}),a.fillStyle=n}else a.fillStyle=e;g&&(a.shadowColor=e,a.shadowBlur=g,a.shadowOffsetX=0,a.shadowOffsetY=0),a.beginPath(),a.arc(c,d,b,0,2*Math.PI),a.fill(),a.closePath(),a.restore()},a.prototype.drawRect=function(a,b,c,d,e,f,g,h){if(void 0===f&&(f="#fff"),void 0===h&&(h=0),a.save(),g){var i=g.from,j=i[0],k=i[1],l=g.to,m=l[0],n=l[1],o=a.createLinearGradient(j,k,m,n);_.forEach(g.stops,function(a){return o.addColorStop(a[0],a[1])}),a.fillStyle=o}else a.fillStyle=f;h&&(a.shadowColor=f,a.shadowBlur=h,a.shadowOffsetX=0,a.shadowOffsetY=0),a.beginPath(),a.rect(d,e,b,c),a.fill(),a.closePath(),a.restore()},a.prototype.createSpriteCircle=function(a){var b=a.name,c=a.group,d=a.type,e=a.radius,f=a.color,g=a.gradient,h=a.blur,i=document.createElement("canvas"),j=i.getContext("2d");return i.width=i.height=2*(e+h),this.drawCircle(j,e,i.width/2,i.height/2,f,g),h&&StackBlur.canvasRGBA(j.canvas,0,0,i.width,i.height,h),{name:b,group:c,type:d,src:i}},a.prototype.createSpriteRect=function(a){var b=a.name,c=a.group,d=a.type,e=a.width,f=a.height,g=a.color,h=a.gradient,i=a.blur,j=document.createElement("canvas"),k=j.getContext("2d");return j.width=2*(e+i),j.height=2*(f+i),this.drawRect(k,e,f,i,i,g,h),i&&StackBlur.canvasRGBA(k.canvas,0,0,j.width,j.height,i),{name:b,group:c,type:d,src:j}},a.prototype.createShadowSprite=function(a,b,c){var d=document.createElement("canvas").getContext("2d"),e=a.height/5,f=a.width,g=b*Math.PI/180,h=e*g;d.canvas.width=f+h+c,d.canvas.height=e+c;var i=this.drawTrapezoid("rgba(27,105,154)",f,e,0,e,h,c),j=this.drawTrapezoid("rgba(27,105,154)",f,e,e/1.68,e-10,h,.75*c);return d.globalAlpha=.06,d.drawImage(i,0,0),d.drawImage(j,0,0),{canvas:d.canvas,width:d.canvas.width,height:d.canvas.height,delta:h}},a.prototype.drawTrapezoid=function(a,b,c,d,e,f,g){var h=document.createElement("canvas").getContext("2d");return h.canvas.width=b+f+g,h.canvas.height=c+g,h.save(),h.translate(g/2,g/2),h.fillStyle=a,h.beginPath(),h.moveTo(f,d),h.lineTo(b,d),h.lineTo(b+f,e),h.lineTo(0,e),h.closePath(),h.fill(),h.restore(),g&&StackBlur.canvasRGBA(h.canvas,0,0,h.canvas.width,h.canvas.height,g),h.canvas},a}();angular.module("siteGeneratorStaticsBackdropInternal").service("backdropAnimationsCanvasUtils",BackdropAnimationsCanvasUtils);var BackdropAnimationsConfig=function(){function a(){this.bg={color:"#67a0bd",gradient:"linear-gradient(to bottom, #6ea2c8 0%, #93c8d9 17%, #93c8d9 26%, #629bb7 58%, #4c7e9e 74%, #487697 80%, #446786 92%)"},this.options={firstTime:{duration:.75},idle:{duration:.6,minDuration:5,maxDuration:10,heightPercentage:.85,offset:{x:10,y:5},mouseOffset:{starIdle4:5,starIdle3:3,starIdle2:1.4,starIdle1:1},amount:{starIdle1:20,starIdle2:7,starIdle3:4,starIdle4:2}},slide:{duration:1,repeat:0},blank:{duration:1.4},wait:{duration:4,notify:2,durationOffset:{star1:2.4,star2:2,star3:1.7,star4:1.4,star5:1.1,line1:2.3,line2:1.9,line3:1},amount:{star1:20,star2:10,star3:7,star4:2,star5:1,line1:2,line2:1,line3:1},distance:3},next:{show:{duration:1},hide:{duration:.8}},back:{show:{duration:.2},hide:{duration:.3}},resize:{hide:{duration:.3},show:{duration:.3}},scale:{duration:.5}},this.spriteData=[{name:"starIdle1",group:"stars",type:"rect",width:4,height:4,color:"rgba(255,255,255,0.15)",blur:0},{name:"starIdle2",group:"stars",type:"rect",width:8,height:8,color:"rgba(255,255,255,0.2)",blur:1},{name:"starIdle3",group:"stars",type:"rect",width:15,height:15,color:"rgba(255,255,255,0.3)",blur:2},{name:"starIdle4",group:"stars",type:"rect",width:30,height:30,color:"rgba(255,255,255,0.2)",blur:1},{name:"star1",group:"stars",type:"rect",width:4,height:4,color:"rgba(255,255,255,0.4)",blur:0},{name:"star2",group:"stars",type:"rect",width:8,height:8,color:"rgba(255,255,255,0.3)",blur:1},{name:"star3",group:"stars",type:"rect",width:15,height:15,color:"rgba(255,255,255,0.5)",blur:1},{name:"star4",group:"stars",type:"rect",width:30,height:30,color:"rgba(255,255,255,0.3)",blur:5},{name:"star5",group:"stars",type:"rect",width:80,height:80,color:"rgba(255,255,255,0.2)",blur:20},{name:"line1",group:"lines",type:"rect",width:200,height:2,gradient:{from:[0,0],to:[200,0],stops:[[0,"rgba(255,255,255,0.3)"],[1,"rgba(255,255,255, 0)"]]},blur:0},{name:"line2",group:"lines",type:"rect",width:300,height:3,gradient:{from:[0,0],to:[300,0],stops:[[0,"rgba(255,255,255,0.4)"],[1,"rgba(255,255,255, 0)"]]},blur:0},{name:"line3",group:"lines",type:"rect",width:400,height:3,gradient:{from:[0,0],to:[400,0],stops:[[0,"rgba(255,255,255,0.6)"],[1,"rgba(255,255,255, 0)"]]},blur:0},{name:"shadow",type:"circle",group:"shadows",radius:60,gradient:{from:[0,0],to:[0,60],stops:[[0,"rgba(0,0,0,1)"],[1,"rgba(0,0,0,0.3)"]]},blur:30}]}return a}();angular.module("siteGeneratorStaticsBackdropInternal").constant("backdropAnimationsConfig",new BackdropAnimationsConfig);var BackdropAnimationsTransitions=function(){function a(a,b){var c=this;this.backdropAnimationsCanvasUtils=a,this.$q=b,this.shadowOpacity=1,this.horizLineOut=function(a,b){var d=c.$q.defer(),e=a.layers,f=a.timelines,g=a.state,h=g.panel.prevDimensions,i=_.find(e.panelLayers,function(a){return"panel"===a.name}),j=_.find(e.panelLayers,function(a){return"shadow"===a.name});return f.transitionTimeline=f.transitionTimeline||new TimelineMax,f.transitionTimeline.to(i,b,{y:"+="+h.height/2,height:2,ease:Quint.easeIn},0).to(j,b,{alpha:0,height:30,y:"+="+(j.height/2-30),ease:Quint.easeIn},0).eventCallback("onComplete",function(a,b){a.panel.visible=!1,f.transitionTimeline=null,b.resolve()},[g,d]),d.promise},this.vertLineOut=function(a,b){var d=c.$q.defer(),e=a.layers,f=a.timelines,g=a.state,h=g.panel.prevDimensions,i=_.find(e.panelLayers,function(a){return"panel"===a.name}),j=_.find(e.panelLayers,function(a){return"shadow"===a.name});return f.transitionTimeline=f.transitionTimeline||new TimelineMax,f.transitionTimeline.to(i,.7*b,{x:"+="+h.width/2,width:2,ease:Quint.easeIn},0).to(j,.7*b,{x:h.x+h.width/2-15,alpha:0,width:30,height:30,y:"+="+(j.height/2-30),ease:Quint.easeIn},0).eventCallback("onComplete",function(a,b){a.panel.visible=!1,f.transitionTimeline=null,b.resolve()},[g,d]),d.promise},this.horizLineCenterIn=function(a,b){var d=a.layers,e=a.timelines,f=a.state,g=c.$q.defer(),h=f.panel.nextDimensions,i=c.getPanelLayer(h),j=c.getPanelShadowLayer(a,h);return d.panelLayers=[i,j],e.transitionTimeline=e.transitionTimeline||new TimelineMax,e.transitionTimeline.set(i,{x:0,y:0,translateX:h.x+h.width/2,translateY:h.y,width:2,rotate:0,alpha:1}).to(i,.4*b,{bezier:{type:"cubic",values:[{translateX:h.x+h.width/2,translateY:h.y},{translateX:h.x+3*h.width/4,translateY:h.y},{translateX:h.x+h.width,translateY:h.y+h.height/4},{translateX:h.x+h.width,translateY:h.y+h.height/2}]},rotate:Math.PI/2,height:h.width,ease:Cubic.easeOut}).set(i,{translateX:h.x,width:h.width,height:2,rotate:0}).set(j,{height:30,y:"+="+(j.height/2-30)}).to(i,.6*b,{translateY:h.y,height:h.height,ease:Expo.easeInOut},"showPanel").to(j,.6*b,{alpha:c.shadowOpacity,height:j.height,y:"-="+(j.height/2-30),ease:Expo.easeInOut},"showPanel").eventCallback("onComplete",function(a,b){a.panel.visible=!0,e.transitionTimeline=null,b.resolve()},[f,g]),g.promise},this.vertLineRightIn=function(a,b){var d=a.canvas,e=a.layers,f=a.timelines,g=a.state,h=c.$q.defer(),i=g.panel.nextDimensions,j=c.getPanelLayer(i),k=c.getPanelShadowLayer(a,i);return e.panelLayers=[j,k],f.transitionTimeline=f.transitionTimeline||new TimelineMax,f.transitionTimeline.set(j,{x:0,y:0,rotate:0,height:2,alpha:1,translateX:i.x,translateY:i.y}).to(j,.4*b,{bezier:{type:"cubic",values:[{translateX:i.x,translateY:i.y+i.height/2},{translateX:i.x,translateY:i.y+i.height/4},{translateX:i.x+i.width/2,translateY:i.y},{translateX:i.x+i.width,translateY:i.y}]},rotate:Math.PI/2,width:i.height,height:2,ease:Cubic.easeOut}).set(j,{height:i.height,width:2,rotate:0}).set(k,{width:30,x:i.x+1.075*i.width,y:"+="+(k.height/2-30)}).to(j,.6*b,{translateX:i.x,width:i.width,ease:Expo.easeInOut},"showPanel").to(k,.6*b,{alpha:c.shadowOpacity,ease:Cubic.easeIn},"showPanel").to(k,.6*b,{x:(d.width-k.width)/2,y:"-="+(k.height/2-30),width:k.width,ease:Expo.easeInOut},"showPanel").eventCallback("onComplete",function(a,b){a.panel.visible=!0,f.transitionTimeline=null,b.resolve()},[g,h]),h.promise},this.fadeOut=function(a,b,d){var e=c.$q.defer(),f=a.layers,g=a.timelines,h=a.state;return g.transitionTimeline=g.transitionTimeline||new TimelineMax,g.transitionTimeline.to(f.panelLayers,b,{alpha:0,ease:d||Sine.easeOut},0).eventCallback("onComplete",function(a,b){a.panel.visible=!1,g.transitionTimeline=null,f.panelLayers=[],b.resolve()},[h,e]),e.promise},this.cutOut=function(a,b){var d=c.$q.defer(),e=a.layers,f=a.timelines,g=a.state;return f.transitionTimeline=f.transitionTimeline||new TimelineMax,f.transitionTimeline.to(e.panelLayers,.1*b,{},0).eventCallback("onComplete",function(a,b){a.panel.visible=!1,f.transitionTimeline=null,e.panelLayers=[],b.resolve()},[g,d]),d.promise},this.fadeIn=function(a,b,d){var e=a.layers,f=a.timelines,g=a.state,h=c.$q.defer(),i=g.panel.nextDimensions,j=c.getPanelLayer(i),k=c.getPanelShadowLayer(a,i);return e.panelLayers=[j,k],f.transitionTimeline=f.transitionTimeline||new TimelineMax,f.transitionTimeline.to(j,b,{alpha:1,ease:d||Sine.easeOut},0).to(k,b,{alpha:c.shadowOpacity,ease:d||Sine.easeOut},0).eventCallback("onComplete",function(a,b){a.panel.visible=!0,f.transitionTimeline=null,b.resolve()},[g,h]),h.promise},this.scale=function(a,b,d){var e=a.layers,f=a.timelines,g=a.state,h=c.$q.defer(),i=g.panel.nextDimensions,j=_.find(e.panelLayers,function(a){return"panel"===a.name}),k=_.find(e.panelLayers,function(a){return"shadow"===a.name}),l=c.getPanelLayer(i),m=c.getPanelShadowLayer(a,i);return f.transitionTimeline=f.transitionTimeline||new TimelineMax,f.transitionTimeline.to(j,b,_.assign({ease:d||Sine.easeOut},_.pick(l,["x","y","width","height"])),0).to(k,b,_.assign({ease:d||Sine.easeOut},_.pick(m,["x","y","width","height"])),0).eventCallback("onComplete",function(a,b){a.panel.visible=!0,f.transitionTimeline=null,b.resolve()},[g,h]),h.promise},this.floatIn=function(a,b){var d=a.layers,e=a.timelines,f=a.state,g=f.panel.nextDimensions,h=c.fadeIn(a,b,Quad.easeIn);return e.transitionTimeline.from(d.panelLayers,b,{x:"-="+g.width/2,ease:Quad.easeOut},0),h},this.floatOut=function(a,b){var d=a.layers,e=a.timelines,f=a.state,g=f.panel.prevDimensions,h=c.fadeOut(a,b,Quad.easeInOut);return e.transitionTimeline.to(d.panelLayers,b,{x:"+="+g.width/2,ease:Quad.easeIn},0),h},this.fadeAndScaleIn=function(a,b){var d=a.layers,e=a.timelines,f=a.state,g=f.panel.nextDimensions,h=c.fadeIn(a,b,Quint.easeIn);return e.transitionTimeline.from(d.panelLayers,b,{width:"-="+.1*g.width,height:"-="+.1*g.height,x:"+="+.05*g.width,y:"+="+.05*g.height,ease:Quad.easeOut},0),h},this.particlesIn=function(a,b){var d=a.layers,e=a.timelines,f=a.state,g=c.$q.defer(),h=f.panel.nextDimensions,i=h.x,j=h.y,k=h.width,l=h.height,m={panel:{width:70,height:70},cube:{width:70,height:70},one:{width:35,height:35},two:{width:45,height:45},three:{width:60,height:60},four:{width:70,height:70}},n=[{name:"cube",params:[m.cube.width,m.cube.height,0,0,"#fff"]}],o={},p=[{name:"a",canvas:"cube",x:i+.15*k,y:j+.15*l,width:m.two.width,height:m.two.height},{name:"b",canvas:"cube",x:i+.7*k,y:j+.15*l,width:m.two.width,height:m.two.height},{name:"c",canvas:"cube",x:i+.9*k,y:j+.3*l,width:m.two.width,height:m.two.height},{name:"d",canvas:"cube",x:i+.05*k,y:j+.5*l,width:m.one.width,height:m.one.height},{name:"e",canvas:"cube",x:i+.2*k,y:j+.6*l,width:m.three.width,height:m.three.height},{name:"g",canvas:"cube",x:i+.7*k,y:j+.55*l,width:m.one.width,height:m.one.height},{name:"h",canvas:"cube",x:i+.05*k,y:j+.9*l,width:m.one.width,height:m.one.height},{name:"i",canvas:"cube",x:i+.55*k,y:j+.85*l,width:m.one.width,height:m.one.height},{name:"j",canvas:"cube",x:i+.1*k,y:j+.7*l,width:m.four.width,height:m.four.height},{name:"k",canvas:"cube",x:i+.95*k,y:j+.65*l,width:m.one.width,height:m.one.height}];_.forEach(n,function(a){var b=c.getNewCanvasCtx(a.params[0],a.params[1]);(d=c.backdropAnimationsCanvasUtils.drawRect).call.apply(d,[c,b].concat(a.params)),o[a.name]=b.canvas;var d});var q=_.map(p,function(a){var b=o[a.canvas];return{x:a.x,y:a.y,width:a.width,height:a.height,alpha:1,name:a.name,image:b}}),r=c.getPanelLayer(f.panel.nextDimensions),s=c.getPanelShadowLayer(a,f.panel.nextDimensions);d.panelLayers=[r,s].concat(q);var t=_.indexBy(d.panelLayers,"name"),u=Quart.easeOut,v=Quint.easeOut,w=.6*b,x=.4*b;return e.transitionTimeline=e.transitionTimeline||new TimelineMax,e.transitionTimeline.set(r,{width:m.panel.width,height:m.panel.height,alpha:1}).addLabel("particles",0).addLabel("panel","particles+="+w).to(q,w,{alpha:.2,ease:u},"particles+="+.5*w).from(t.a,b,{x:i+.3*k,y:j+.25*l,ease:u},"particles").from(t.b,b,{x:i+.62*k,y:j+.35*l,ease:u},"particles").from(t.c,b,{x:i+.8*k,y:j+.33*l,ease:u},"particles").from(t.d,b,{x:i+.41*k,y:j+.48*l,ease:u},"particles").from(t.e,b,{x:i+.3*k,y:j+.55*l,ease:u},"particles").from(t.g,b,{x:i+.6*k,y:j+.5*l,ease:u},"particles").from(t.h,b,{x:i+.38*k,y:j+.7*l,ease:u},"particles").from(t.i,b,{x:i+.6*k,y:j+.7*l,ease:u},"particles").from(t.j,b,{x:i+.3*k,y:j+.6*l,ease:u},"particles").from(t.k,b,{x:i+.8*k,y:j+.55*l,ease:u},"particles").fromTo(r,w+x/2,{x:i+.46*k,y:j+.42*l},{x:i+.1*k,y:j+.1*l,width:.8*k,height:.8*l,ease:SlowMo.ease.config(.1,.6,!1)},0).to(r,x/2,{x:i,y:j,width:k,height:l,ease:v},w+x/2).to(s,.75*x,{delay:.25*x,alpha:c.shadowOpacity,ease:v},"panel").from(s,x,{height:30,width:30,x:i+k/2-15,ease:v},"panel").eventCallback("onComplete",function(a,b,c,d,e,f){c.panel.visible=!0,a.transitionTimeline=null,b.panelLayers=[e,f],d.resolve()},[e,d,f,g,r,s]),g.promise},this.cornersOut=function(a,b){var d=a.layers,e=a.timelines,f=a.state,g=c.$q.defer(),h=f.panel.prevDimensions,i=h.x,j=h.y,k=h.width,l=h.height,m=f.panel.nextDimensions,n=j+l,o=i+k,p=100,q=16,r=Expo.easeOut,s=b/2,t=Math.min(k,l),u=Math.sqrt(Math.pow((t-2*p)/2,2)+Math.pow((t-2*p)/2,2)),v=Math.asin((l-2*p)/2/u),w=[{name:"particle",params:[p,p,0,0,"#fff"]},{name:"line",params:[u,2,0,0,"#fff"]}],x=[{name:"particleTL",canvas:"particle",x:i,y:j},{name:"particleTR",canvas:"particle",x:o-p,y:j},{name:"particleBR",canvas:"particle",x:o-p,y:n-p},{name:"particleBL",canvas:"particle",x:i,y:n-p},{name:"lineTL",canvas:"line",x:0,y:0,rotate:v,translateX:i+p,translateY:j+p},{name:"lineTR",canvas:"line",x:0,y:0,rotate:Math.PI-v,translateX:o-p,translateY:j+p},{name:"lineBR",canvas:"line",x:0,y:0,rotate:Math.PI+v,translateX:o-p,translateY:n-p},{name:"lineBL",canvas:"line",x:0,y:0,rotate:2*Math.PI-v,translateX:i+p,translateY:n-p}],y={};_.forEach(w,function(a){var b=c.getNewCanvasCtx(a.params[0],a.params[1]);(d=c.backdropAnimationsCanvasUtils.drawRect).call.apply(d,[c,b].concat(a.params)),y[a.name]=b.canvas;var d});var z=_.map(x,function(a){var b=y[a.canvas];return{x:a.x,y:a.y,width:b.width,height:b.height,alpha:1,rotate:a.rotate,translateX:a.translateX,translateY:a.translateY,name:a.name,image:b}});d.panelLayers=d.panelLayers.concat(z);var A=_.indexBy(d.panelLayers,"name"),B=[A.lineTL,A.lineTR,A.lineBR,A.lineBL],C=[A.particleTL,A.particleTR,A.particleBR,A.particleBL];return e.transitionTimeline=e.transitionTimeline||new TimelineMax,e.transitionTimeline.set(A.panel,{alpha:0,delay:.1}).to(A.shadow,b/4,{alpha:0},"start").fromTo(B,b,{width:.75*u},{width:0,ease:r},"start").to(C,s,{width:q,height:q,ease:r},"start").to(A.particleTR,s,{x:o-q,ease:r},"start").to(A.particleBR,s,{x:o-q,y:n-q,ease:r},"start").to(A.particleBL,s,{y:n-q,ease:r},"start").to(A.lineTL,s,{translateX:i+q,translateY:j+q,ease:r},"start").to(A.lineTR,s,{translateX:o-q,translateY:j+q,ease:r},"start").to(A.lineBR,s,{translateX:o-q,translateY:n-q,ease:r},"start").to(A.lineBL,s,{translateX:i+q,translateY:n-q,ease:r},"start").eventCallback("onComplete",function(a,b,c,d){c.panel.visible=!1,a.transitionTimeline=null,d.resolve()},[e,d,f,g]),_.isEqual(f.panel.prevDimensions,f.panel.nextDimensions)||e.transitionTimeline.to(A.particleTL,.2*b,{x:m.x,y:m.y,ease:Linear.easeNone},b).to(A.particleTR,.2*b,{x:m.x+m.width-q,y:m.y,ease:Linear.easeNone},b).to(A.particleBR,.2*b,{x:m.x+m.width-q,y:m.y+m.height-q,ease:Linear.easeNone},b).to(A.particleBL,.2*b,{x:m.x,y:m.y+m.height-q,ease:Linear.easeNone},b),g.promise},this.cornersIn=function(a,b){var d=a.canvas,e=a.layers,f=a.timelines,g=a.state,h=c.$q.defer(),i=g.panel.nextDimensions,j=i.x,k=i.y,l=i.width,m=i.height,n=k+m,o=j+l,p=16,q=Expo.easeInOut,r=b/2,s=[{name:"particle",params:[p,p,0,0,"#fff"]},{name:"hLine",params:[l,1,0,0,"#fff"]},{name:"vLine",params:[1,m,0,0,"#fff"]}],t=[{name:"particleTL",canvas:"particle",x:j,y:k},{name:"particleTR",canvas:"particle",x:o-p,y:k},{name:"particleBR",canvas:"particle",x:o-p,y:n-p},{name:"particleBL",canvas:"particle",x:j,y:n-p},{name:"lineT",canvas:"hLine",x:j+2*p,y:k+p/2},{name:"lineR",canvas:"vLine",x:o-p/2,y:k+2*p},{name:"lineB",canvas:"hLine",x:o-p,y:n-p/2},{name:"lineL",canvas:"vLine",x:j+p/2,y:n-p}],u={};_.forEach(s,function(a){var b=c.getNewCanvasCtx(a.params[0],a.params[1]);(d=c.backdropAnimationsCanvasUtils.drawRect).call.apply(d,[c,b].concat(a.params)),
u[a.name]=b.canvas;var d});var v=_.map(t,function(a){var b=u[a.canvas];return{x:a.x,y:a.y,width:b.width,height:b.height,alpha:1,name:a.name,image:b}}),w=c.getPanelLayer(g.panel.nextDimensions),x=c.getPanelShadowLayer(a,g.panel.nextDimensions);e.panelLayers=[w,x].concat(v);var y=_.indexBy(e.panelLayers,"name"),z=[y.lineT,y.lineR,y.lineB,y.lineL];return f.transitionTimeline=f.transitionTimeline||new TimelineMax,f.transitionTimeline.set(z,{width:1,height:1}).to(y.particleTL,r,{x:j+l-p,ease:q},"particles").to(y.particleTR,r,{y:k+m-p,ease:q},"particles").to(y.particleBR,r,{x:j,ease:q},"particles").to(y.particleBL,r,{y:k,ease:q},"particles").to(y.lineT,r,{width:l-2*p,ease:q},"particles").to(y.lineR,r,{height:m-2*p,ease:q},"particles").to(y.lineB,r,{x:j+p,width:l-2*p,ease:q},"particles").to(y.lineL,r,{y:k+p,height:m-2*p,ease:q},"particles").addLabel("hideLines").to(y.lineT,r,{x:j+l-p,width:0,ease:q},"hideLines").to(y.lineR,r,{y:k+m-p,height:0,ease:q},"hideLines").to(y.lineB,r,{width:0,ease:q},"hideLines").to(y.lineL,r,{height:0,ease:q},"hideLines").fromTo(w,r,{width:l/2,height:m/2,x:j+l/4,y:k+m/4,alpha:.5,immediateRender:!1},{x:j,y:k,width:l,height:m,alpha:1,ease:Expo.easeOut},"hideLines+=0.2").fromTo(x,r,{x:j+l/4,width:l/2,height:m/8},{x:(d.width-x.width)/2,width:x.width,height:x.height,alpha:c.shadowOpacity,ease:Expo.easeOut},"hideLines+=0.2").eventCallback("onComplete",function(a,b,c,d,e,f){c.panel.visible=!0,a.transitionTimeline=null,b.panelLayers=[e,f],d.resolve()},[f,e,g,h,w,x]),h.promise}}return a.$inject=["backdropAnimationsCanvasUtils","$q"],a.prototype.getNewCanvasCtx=function(a,b){var c=document.createElement("canvas"),d=c.getContext("2d");return c.width=a,c.height=b,d},a.prototype.getPanelLayer=function(a){var b=this.getNewCanvasCtx(a.width,a.height);return this.backdropAnimationsCanvasUtils.drawRect(b,a.width,a.height,0,0,"#fff"),{x:a.x,y:a.y,width:a.width,height:a.height,alpha:0,translateX:0,translateY:0,rotate:0,name:"panel",image:b.canvas}},a.prototype.getPanelShadowLayer=function(a,b){var c=a.canvas,d=this.backdropAnimationsCanvasUtils.createShadowSprite(b,45,45);return{x:(c.width-d.width)/2,y:.8*c.height,width:d.width,height:d.height,alpha:0,name:"shadow",image:d.canvas}},a}();angular.module("siteGeneratorStaticsBackdropInternal").service("backdropAnimationsTransitions",BackdropAnimationsTransitions);var BackdropAnimations=function(){function a(a,b,c,d,e,f){var g=this;this.backdropAnimationsConfig=a,this.backdropAnimationsCanvasUtils=b,this.backdropAnimationsTransitions=c,this.$q=d,this.clientTopology=e,this.$window=f,this.trackMouseMovement=function(a){var b=a.clientX,c=a.clientY,d=g.scene,e=d.layers,f=d.canvas,h=d.state,i=g.config.options.idle.mouseOffset,j=f.width,k=f.height,l=1-b/(j/2),m=1-c/(k/2);_.forEach(e.idleLayers,function(a){a.translateX=l*i[a.name],a.translateY=m*i[a.name]}),h.drawOnTicker=!0},this.config=_.merge({},a),this.scene=null}return a.$inject=["backdropAnimationsConfig","backdropAnimationsCanvasUtils","backdropAnimationsTransitions","$q","clientTopology","$window"],a.prototype.init=function(a,b){var c=this;this.setBg(a),this.scene=this.setScene(this.setCanvas(a),this.config.spriteData),TweenMax.ticker.addEventListener("tick",this.drawLayers,this),this.setDimensions(b);var d=b?this.play("idle"):this.$q.when();return this.scene.state.transitionDeferred=d.then(function(){return b?c.runPanelAnimation(c.config.options.firstTime.duration,"firstTime"):c.$q.when()}),this.scene.state.transitionDeferred},a.prototype.play=function(a,b){var c=this;if(void 0===a&&(a=null),this.scene){var d,e=this.config.options,f=this.scene.state,g=this.$q,h=f.transitionDeferred;switch(this.setDimensions(b),a){case"next":d=f.panel.visible?h.then(function(){return c.runPanelAnimation(e.next.hide.duration,"nextOut")}).then(function(){return c.runPanelAnimation(e.next.show.duration,"nextIn")}):h.then(function(){return c.runPanelAnimation(e.next.show.duration,"firstTime")});break;case"back":d=f.panel.visible?h.then(function(){return c.runPanelAnimation(e.back.hide.duration,"backOut")}).then(function(){return g.all([c.runPanelAnimation(e.back.show.duration,"backIn"),c.showIdleLayers(e.idle.duration,e.idle.amount),c.parallaxIdleOnMouse()])}):h.then(function(){return g.all([c.runPanelAnimation(e.back.show.duration,"firstTime"),c.showIdleLayers(e.idle.duration,e.idle.amount),c.parallaxIdleOnMouse()])});break;case"skip":d=this.play("next");break;case"wait":d=h.then(function(){return g.all([c.runPanelAnimation(e.next.hide.duration,"blankOut"),c.hideIdleLayers(e.next.hide.duration)]).then(function(){return g.all([c.showIdleLayers(e.idle.duration,e.wait.amount),c.infiniteSlideIdleLayer(e.wait.duration)])})});break;case"blank":d=h.then(function(){return c.runPanelAnimation(e.next.hide.duration,"blankOut")}).then(function(){return c.stopParallaxOnMouse()}).then(function(){return c.hideIdleLayers(e.blank.duration)});break;case"idle":d=h.then(function(){return g.all([c.showIdleLayers(e.idle.duration,e.idle.amount),c.parallaxIdleOnMouse()])})}return f.transitionDeferred=d,f.transitionDeferred}},a.prototype.resize=function(a){var b=this,c=this.scene.state;return c.resizeDeferred?this.resizeDebounced(a):(c.resizeDeferred=this.$q.defer(),this.resizeDebounced=_.debounce(function(a){b.setDimensions(a),c.resizeDeferred.resolve()},250,{leading:!1,trailing:!0}),this.resizeDebounced(a),c.resizeNotifyDeferred=c.transitionDeferred.then(function(){return c.resizeDeferred.promise}).then(function(){return b.delayedResize()})),c.resizeNotifyDeferred},a.prototype.scale=function(a,b){void 0===b&&(b=this.config.options.scale.duration);var c=this.scene.state;return c.panel.visible?(this.setDimensions(a),this.runPanelAnimation(b,"scale")):this.$q.when()},a.prototype.delayedResize=function(){var a=this,b=this.config.options,c=this.scene,d=c.canvas,e=c.state,f=d.parentNode;return e.resizeDeferred=null,this.setCanvasSize(f.offsetWidth,f.offsetHeight),e.panel.visible?this.runPanelAnimation(b.resize.hide.duration,"resizeOut").then(function(){return a.runPanelAnimation(b.resize.show.duration,"resizeIn")}):this.$q.when()},a.prototype.dispose=function(){if(this.stopParallaxOnMouse(),TweenMax.ticker.removeEventListener("tick",this.drawLayers),this.scene){var a=this.scene,b=a.state,c=a.timelines;return _(c).compact().forEach(function(a){return a.kill().clear()}).value(),_.get(b,["transitionDeferred","reject"])&&b.transitionDeferred.reject(),_.get(b,["resizeDeferred","reject"])&&b.resizeDeferred.reject(),_.get(b,["resizeNotifyDeferred","reject"])&&b.resizeNotifyDeferred.reject(),this.scene=null,this.$q.when()}},a.prototype.setBg=function(a){var b=this.config.bg,c=b.imageId,d=b.color,e=b.gradient,f=2048,g=1108,h={w:Math.min(window.screen.width,f),h:Math.min(window.screen.height,g)},i="al_c,q_90",j=c?"url("+this.clientTopology.mediaUrl+"/"+c+"/v1/fill/w_"+h.w+",h_"+h.h+","+i+"/"+c+")":"";a.style.background=d+" "+(e||j)+" no-repeat 50% 50% / cover"},a.prototype.setScene=function(a,b){var c=this.backdropAnimationsCanvasUtils.createSprite(b),d={idleLayers:[],panelLayers:[]},e={idleTimeline:null,transitionTimeline:null,slideTimeline:null,alphaTimeline:null},f={drawOnTicker:!1,nextTransitionIndex:0,transitionDeferred:this.$q.when(),resizeDeferred:null,resizeNotifyDeferred:null,globalAlpha:1,panel:{visible:!1,prevDimensions:{},nextDimensions:{}}},g=document.createElement("canvas");return g.width=a.width,g.height=a.height,{sprite:c,layers:d,timelines:e,canvas:a,offScreenCanvas:g,state:f}},a.prototype.setCanvas=function(a){var b=document.createElement("canvas");return b.width=a.offsetWidth,b.height=a.offsetHeight,b.id="backdrop-canvas",a.appendChild(b),b},a.prototype.setCanvasSize=function(a,b){var c=this.scene,d=c.canvas,e=c.offScreenCanvas;d.width=e.width=a,d.height=e.height=b},a.prototype.setDimensions=function(a){a&&(this.scene.state.panel.prevDimensions=this.scene.state.panel.nextDimensions,this.scene.state.panel.nextDimensions=a)},a.prototype.drawLayers=function(){var a=this.scene,b=a.layers,c=a.state,d=a.timelines,e=a.canvas,f=a.offScreenCanvas;if(_.some(d,function(a){return a&&a.isActive()})&&(c.drawOnTicker=!0),c.drawOnTicker){_.every(d,function(a){return!a||!a.isActive()})&&(c.drawOnTicker=!1);var g=f.getContext("2d"),h=e.getContext("2d");g.clearRect(0,0,e.width,e.height),h.clearRect(0,0,e.width,e.height),c.globalAlpha>0&&(_.values(b).forEach(function(a){a.forEach(function(a){if(g.save(),a.alpha>0){g.globalAlpha=a.alpha;var b=_.isNumber(a.scaleX)?a.scaleX:1,c=_.isNumber(a.scaleY)?a.scaleY:1,d=a.rotate||0,e=_.isNumber(a.translateX)?a.translateX:0,f=_.isNumber(a.translateY)?a.translateY:0;g.setTransform(Math.cos(d)*b,Math.sin(d),-Math.sin(d),Math.cos(d)*c,e,f),a.source?g.drawImage(a.image,a.source.x||0,a.source.y||0,a.source.width||a.width,a.source.height||a.height,a.x,a.y,a.width,a.height):g.drawImage(a.image,a.x,a.y,a.width,a.height),g.restore()}})}),h.globalAlpha=c.globalAlpha,h.drawImage(g.canvas,0,0))}},a.prototype.stopParallaxOnMouse=function(){return this.$window.removeEventListener("mousemove",this.trackMouseMovement),this.$q.when()},a.prototype.parallaxIdleOnMouse=function(){return this.$window.addEventListener("mousemove",this.trackMouseMovement,!1),this.$q.when()},a.prototype.runPanelAnimation=function(a,b){var c=this.getAnimationFunc(b);return c(this.scene,a)},a.prototype.getAnimationFunc=function(a){var b=this.backdropAnimationsTransitions,c=[{out:b.horizLineOut,inn:b.vertLineRightIn},{out:b.cornersOut,inn:b.cornersIn},{out:b.vertLineOut,inn:b.horizLineCenterIn},{out:b.cutOut,inn:b.particlesIn}];switch(a){case"nextIn":var d=c[this.scene.state.nextTransitionIndex].inn;return this.scene.state.nextTransitionIndex=(this.scene.state.nextTransitionIndex+1)%c.length,d;case"nextOut":return c[this.scene.state.nextTransitionIndex].out;case"firstTime":return b.fadeAndScaleIn;case"blankOut":return b.fadeOut;case"backIn":return b.floatIn;case"backOut":return b.floatOut;case"resizeIn":return b.fadeIn;case"resizeOut":return b.fadeOut;case"scale":return b.scale}},a.prototype.showIdleLayers=function(a,b){void 0===a&&(a=1);var c=this.$q.defer(),d=this.scene,e=d.layers,f=d.timelines,g=d.canvas,h=this.config.options;return e.idleLayers.length?(c.resolve(),c.promise):(f.alphaTimeline=f.alphaTimeline||new TimelineMax,e.idleLayers=this.createIdleLayers(g.width,g.height*(h.idle.heightPercentage||1),b),f.alphaTimeline.set(e.idleLayers,{alpha:0}).to(e.idleLayers,a,{alpha:1}).eventCallback("onComplete",function(a,b){b.alphaTimeline=null,a.resolve()},[c,f]),this.createIdleLayersTimeline(),c.promise)},a.prototype.hideIdleLayers=function(a){void 0===a&&(a=1);var b=this.$q.defer(),c=this.scene,d=c.layers,e=c.timelines;return d.idleLayers.length?(e.alphaTimeline=e.alphaTimeline||new TimelineMax,e.alphaTimeline.to(d.idleLayers,a,{alpha:0}).eventCallback("onComplete",function(a,b,c){this.stopInfiniteSlide(),c.idleTimeline&&(c.idleTimeline.pause().kill(),c.idleTimeline=null),c.alphaTimeline=null,b.idleLayers=[]},[b,d,e],this).call(function(a){return a.resolve()},[b],this,.05),b.promise):(b.resolve(),b.promise)},a.prototype.infiniteSlideIdleLayer=function(a){void 0===a&&(a=1);var b=this.$q.defer(),c=this.scene,d=c.layers,e=c.timelines,f=c.canvas,g=this.config.options.wait.durationOffset,h=this.config.options.wait.distance;if(!d.idleLayers.length)return b.resolve(),b.promise;if(e.slideTimeline){if(e.slideTimeline.isActive())return b.resolve(),b.promise;e.slideTimeline.progress(1).clear()}e.slideTimeline=new TimelineMax;var i=this.createIdleLayers(f.width*(h-1),f.height,this.config.options.wait.amount,f.width),j=d.idleLayers.map(function(a){return _.assign(_.omit(a,"_gsTweenID"),{x:a.x+f.width*h,alpha:1})});return d.idleLayers=d.idleLayers.concat(i,j),d.idleLayers.forEach(function(b){e.slideTimeline.fromTo(b,a*g[b.name],{x:b.x},{x:"-="+f.width*h,ease:Linear.easeNone,repeat:-1},0)}),e.slideTimeline.call(function(){return b.resolve()},[b],null,this.config.options.wait.notify),b.promise},a.prototype.stopInfiniteSlide=function(){var a=this.scene,b=a.layers,c=a.timelines,d=a.canvas;return c.slideTimeline&&(b.idleLayers=b.idleLayers.filter(function(a){return a.x>=0&&a.x<=d.width+a.width}),c.slideTimeline&&(c.slideTimeline.pause().kill(),c.slideTimeline=null)),this.$q.when()},a.prototype.createIdleLayersTimeline=function(){var a=this,b=this.scene,c=b.timelines,d=b.layers;c.idleTimeline=c.idleTimeline||new TimelineMax,c.idleTimeline.clear(),c.idleTimeline.autoRemoveChildren=!0,_.forEach(d.idleLayers,function(b,d){return a.createSingleLayerTweens(b,c.idleTimeline)})},a.prototype.createSingleLayerTweens=function(a,b){var c=this,d=this.config.options,e=(_.random(0,1,!1)?-1:1)*a.offset.x,f=(_.random(0,1,!1)?-1:1)*a.offset.y,g=_.random(d.idle.minDuration,d.idle.maxDuration,!1);b.to(a,g/2,{y:"+="+f,repeat:1,yoyo:!0,ease:Sine.easeInOut},0).to(a,g,{x:"+="+e,repeat:0,ease:Sine.easeInOut,onComplete:function(){c.scene&&c.createIdleLayersTimeline()},onCompleteScope:this},0)},a.prototype.createIdleLayers=function(a,b,c,d,e){void 0===d&&(d=0),void 0===e&&(e=0);var f=this.scene.sprite,g=this.config.options,h=[];return _.forEach(c,function(a,b){return h=h.concat(Array(a).fill(b))}),_.map(h,function(c){var h=f.find(function(a){return a.name===c}).src;return{x:_.random(h.width,a-h.width,!1)+d,y:_.random(h.height,b-h.height,!1)+e,width:h.width,height:h.height,alpha:1,name:c,image:h,offset:{x:g.idle.offset.x,y:g.idle.offset.y}}})},a}();angular.module("siteGeneratorStaticsBackdropInternal").service("backdropAnimations",BackdropAnimations);var BackdropPlayground=function(){function a(a){var b=this;this.backdropAnimations=a;var c=document.querySelector("nav"),d=document.querySelector("#backdrop");console.log(d),this.backdropAnimations.init(d).then(function(){return console.log("init done")}),window.addEventListener("resize",function(){b.backdropAnimations.resize({width:600,height:600,x:(window.innerWidth-600)/2,y:(window.innerHeight-600)/2}).then(function(){return console.log("resize done")})}),c.addEventListener("click",function(a){switch(console.log(a.target.id),a.target.id){case"next":b.backdropAnimations.play("next",{width:800,height:500,x:(window.innerWidth-800)/2,y:(window.innerHeight-500)/2}).then(function(){return console.log("next done")});break;case"back":b.backdropAnimations.play("back",{width:800,height:300,x:(window.innerWidth-800)/2,y:(window.innerHeight-300)/2}).then(function(){return console.log("back done")});break;case"skip":b.backdropAnimations.play("skip",{width:400,height:200,x:(window.innerWidth-400)/2,y:(window.innerHeight-200)/2}).then(function(){return console.log("skip done")});break;case"blank":b.backdropAnimations.play("blank").then(function(){return console.log("blank done")});break;case"wait":b.backdropAnimations.play("wait").then(function(){return console.log("wait done")});break;case"idle":b.backdropAnimations.play("idle").then(function(){return console.log("idle done")})}})}return a.$inject=["backdropAnimations"],a}();angular.module("siteGeneratorStaticsBackdropInternal").component("backdropPlayground",{templateUrl:"views/backdrop-playground.html",controller:BackdropPlayground});var AssistantManager=function(){function a(a,b,c,d,e,f,g,h){this.$rootScope=a,this.$q=b,this.$timeout=c,this.assistantUtils=d,this.assistantUIAdapter=e,this.assistantWaitUntilElement=f,this.experimentManager=g,this.flags=h,this.waitUntilElementWorkers=[],this.isInAutoplay=!1,this.dockStatus=builders.AssistantDockStatus.Hidden,this.menuProgress=builders.AssistantMenuProgress.beginner,this.isShowCCTooltip=!1}return a.$inject=["$rootScope","$q","$timeout","assistantUtils","assistantUIAdapter","assistantWaitUntilElement","experimentManager","flags"],a.prototype.getActiveTask=function(){return this.activeTask},a.prototype.getActiveAction=function(){return this.activeAction},a.prototype.startTask=function(a,b){void 0===b&&(b=0),this.flags.noTour||(this.setDockStatus(builders.AssistantDockStatus.Playing),this.getActiveTask()?this.setIntent({operation:builders.AssistantOperation.Start,task:a,actionIndex:b}):(this.activateTask(a),this.handleActionLifecycle(this.getActiveTask(),b)))},a.prototype.setCCTooltips=function(a){this.isShowCCTooltip=a},a.prototype.getIsShowCCTooltips=function(){return this.isShowCCTooltip},a.prototype.stop=function(){this.setIntent({operation:builders.AssistantOperation.Stop})},a.prototype.stopAndComplete=function(){this.setIntent({operation:builders.AssistantOperation.Complete})},a.prototype.forceStop=function(){this.setIntent({operation:builders.AssistantOperation.ForceStop})},a.prototype.gotoNextAction=function(){this.setIntent({operation:builders.AssistantOperation.Next})},a.prototype.gotoPrevAction=function(){this.gotoActionInActiveTask(this.getActiveTask().activeActionIndex-1)},a.prototype.gotoActionInActiveTask=function(a){this.setIntent({operation:builders.AssistantOperation.Goto,actionIndex:a})},a.prototype.setMenu=function(a){this.menuTask=a},a.prototype.isInActiveTask=function(){return!!this.getActiveTask()},a.prototype.openMenu=function(){if(!this.isMenuTaskDefined())throw"Assistant - menu task is not defined";this.assistantUtils.broadcastAssistantEvent(builders.AssistantAction.EVENTS.OPEN_MENU),this.startTask(this.menuTask)},a.prototype.setIntent=function(a){a.goToIndex&&(a.actionIndex=a.goToIndex),this.userOrSystemIntent=a,this.unblockLifecycle()},a.prototype.getIntent=function(){return this.userOrSystemIntent},a.prototype.setDockStatus=function(a){this.dockStatus=a},a.prototype.getDockStatus=function(){return this.dockStatus},a.prototype.setMenuProgress=function(a){this.menuProgress=a},a.prototype.getMenuProgress=function(){return this.menuProgress},a.prototype.isInAutoplayMode=function(){return this.isInAutoplay},a.prototype.canStop=function(){return this.getActiveTask()&&!this.getActiveTask().isUnstoppable},a.prototype.setCustomTaskData=function(a,b){var c=this.getActiveTask();c&&(c.customData=c.customData||{},c.customData[a]=b)},a.prototype.getCustomTaskData=function(a){var b=this.getActiveTask();return b?b.customData&&b.customData[a]:void 0},a.prototype.isTaskInLastAction=function(a){return a.actions.length-1===a.activeActionIndex},a.prototype.isMenuOpen=function(){return this.isMenuTask(this.activeTask)},a.prototype.isIntentToStop=function(){var a=this.getIntent();return a&&a.operation===builders.AssistantOperation.Stop},a.prototype.setTaskComplete=function(a){a.isComplete=!0,this.assistantUtils.saveTaskData(a)},a.prototype.handleActionLifecycle=function(a,b){var c=this;void 0===b&&(b=0);try{if(this.setActiveActionIndex(a,b),this.activeAction=this.getAction(a,b,this.isInAutoplay),this.activeAction.shouldSkipAction&&this.activeAction.shouldSkipAction())return this.gotoNextAction(),void this.handleIntent();this.lifecyclePreparation(a,this.activeAction).then(function(){return c.lifecycleUIPreparation(c.activeAction)}).then(function(){return c.renderAction(a,c.activeAction)}).then(function(){return c.lifecycleUITeardown(c.activeAction)}).then(function(){return c.lifecycleTeardown(a,c.activeAction)}).then(function(){return c.handleIntent()})["catch"](function(){return c.stopTaskAndHandleMenu()})}catch(d){console.error("encountered error in lifecycle",d),this.stopTaskAndHandleMenu()}},a.prototype.lifecyclePreparation=function(a,b){var c=this;this.assistantUtils.broadcastAssistantEvent(builders.AssistantAction.EVENTS.ACTION_START),this.resetIntent(),this.handleAutoplay(b.onEnter),this.setExitTriggerElementSelectors(b.exitTriggers,b);var d=_.map(b.exitTriggers,function(a){return angular.element(a.element)});return this.assistantUIAdapter.disableElements(d),this.assistantUtils.waitForSpinner(b.waitForSpinner).then(function(){return c.assistantUtils.redirectToState(b.redirectToState)}).then(function(){return c.assistantUtils.delayAction(b.delayBeforeStartInMs)}).then(function(){return c.waitUntilElementIsInDOM(b,b.waitForElement,b.waitForElementCondition)["catch"](function(a){return c.assistantUtils.broadcastAssistantEvent(builders.AssistantAction.EVENTS.TASK_TIMEOUT)})}).then(function(){b.events&&b.events.onEnter&&b.events.onEnter.forEach(function(a){return c.$rootScope.$broadcast(a)})}).then(function(){return b.onEnter&&b.onEnter.callback?b.onEnter.callback(a,b):void 0}).then(function(){return b.onEnter&&b.onEnter.DOMEvents?c.$q.all(b.onEnter.DOMEvents.map(function(a){return c.runExitTrigger(a)})):void 0}).then(function(){return b.element?c.waitUntilElementIsInDOM(b,b.element.selector).then(function(){return b.element.selector=c.assistantUtils.getElementSelector(b.element)})["catch"](function(a){return c.assistantUtils.broadcastAssistantEvent(builders.AssistantAction.EVENTS.TASK_TIMEOUT)}):void 0}).then(function(){return c.registerExitTriggers(b.exitTriggers,b)}).then(function(){return c.assistantUIAdapter.enableElements(d),c.$q.when()})},a.prototype.lifecycleUIPreparation=function(a){var b=this;return this.assistantUIAdapter.scrollToElement(a),this.assistantUIAdapter.moveHintToElement(a).then(function(){b.handleInteractivity(a),b.disabledElements=a.disabledElements?a.disabledElements.map(function(a){return angular.element(a)}):[],b.assistantUIAdapter.disableElements(b.disabledElements)})},a.prototype.renderAction=function(a,b){var c=this;return this.userOrSystemIntent?void 0:this.assistantUIAdapter.renderAction(b,this.assistantUtils.compileTemplateContent(this,a,b)).then(function(){return c.runAutoplay(b.exitTriggers,b.autoplayTimeoutInMs),c.blockLifecycleUntilUserInteraction()}).then(function(){return b.hint?c.assistantUIAdapter.simulateClick():void 0})},a.prototype.lifecycleUITeardown=function(a){return this.assistantUIAdapter.enableElements(this.disabledElements),this.assistantUIAdapter.hideAction(a)},a.prototype.lifecycleTeardown=function(a,b){var c=this;this.cancelAutoplayTimeout();var d=this.$q.when();return b.onExit&&b.onExit.callback&&d.then(function(){return b.onExit.callback(a,b)}),b.onExit&&b.onExit.DOMEvents&&d.then(function(){return c.$q.all(b.onExit.DOMEvents.map(function(a){return c.runExitTrigger(a)}))}),b.backdrop&&b.backdrop.fadeOutOnExit&&(this.assistantUIAdapter.fadeOutBackdrop(b.backdrop.fadeOutTime),d.then(function(){return c.$timeout(angular.noop,b.backdrop.fadeOutTime)})),b.events&&b.events.onExit&&b.events.onExit.forEach(function(a){return c.$rootScope.$broadcast(a)}),d.then(function(){c.handleAutoplay(b.onExit),c.stopAllWaitUntilElementWorkers(),c.unregisterExitTriggers(b.exitTriggers,b),c.assistantUtils.broadcastAssistantEvent(builders.AssistantAction.EVENTS.ACTION_COMPLETED)})},a.prototype.clearCustomTaskData=function(){var a=this.getActiveTask();a.customData={}},a.prototype.getAction=function(a,b,c){if(!a.actions||0>b||b>=a.actions.length)throw"action index out of bounds";var d=a.actions[b];return d=this.createActionAccordingToExperiments(d),d=this.createActionByAutoplayMode(d,c)},a.prototype.createActionAccordingToExperiments=function(a){if(a.experiments){var b=this.assistantUtils.getActiveExperiments();return b.reduce(function(b,c){return angular.merge({},b,a.experiments[c])},a)}return a},a.prototype.createActionByAutoplayMode=function(a,b){return angular.merge({},a,b?a.actionIfAuto:a.actionIfManual)},a.prototype.handleAutoplay=function(a){a&&(a.stopAutoplay?this.disableAutoplay():a.startAutoplay&&this.enableAutoplay())},a.prototype.resetIntent=function(){this.userOrSystemIntent=null},a.prototype.blockLifecycleUntilUserInteraction=function(){return this.lifecycleBlockDeferred=this.$q.defer(),this.userOrSystemIntent&&this.lifecycleBlockDeferred.resolve(),this.lifecycleBlockDeferred.promise},a.prototype.unblockLifecycle=function(){this.lifecycleBlockDeferred&&this.lifecycleBlockDeferred.resolve()},a.prototype.handleInteractivity=function(a){this.isInAutoplay?this.assistantUIAdapter.disableHighlightInteractivity(a):this.assistantUIAdapter.enableHighlightInteractivity(a)},a.prototype.setExitTriggerElementSelectors=function(a,b){var c=this;a&&a.forEach(function(a){return a.element=c.assistantUtils.replaceElementSelectorPlaceholderWithValue(a.element,b.element&&b.element.selector||"")})},a.prototype.registerExitTriggers=function(a,b){var c=this;if(a){var d=a.map(function(a){return(a.dontWaitForElement?c.$q.when():c.waitUntilElementIsInDOM(b,a.element)).then(function(){return c.assistantUtils.registerActionTrigger(a,c.setIntent.bind(c))})});return this.$q.all(d)}},a.prototype.unregisterExitTriggers=function(a,b){var c=this;a&&a.forEach(function(a){c.assistantUtils.unregisterActionTrigger(a)})},a.prototype.runAutoplay=function(a,b){var c=this;if(this.isInAutoplay){var d=this.assistantUtils.getDefaultExitTrigger(a);this.autoplayTimeout=this.$timeout(function(){return d?c.runExitTrigger(d):c.gotoNextAction()},b)}},a.prototype.cancelAutoplayTimeout=function(){this.$timeout.cancel(this.autoplayTimeout)},a.prototype.runExitTrigger=function(a){var b=this,c=$(a.element);return a.descendant&&(c=c.find(a.descendant)),this.$timeout(function(){return c.first().trigger(a.trigger||b.assistantUtils.DEFAULT_TRIGGER)})},a.prototype.activateTask=function(a){return this.activeTask=a,this.setActiveActionIndex(this.activeTask,0),this.assistantUtils.broadcastAssistantEvent(builders.AssistantAction.EVENTS.TASK_START),this.activeTask.onEnter&&this.activeTask.onEnter.callback?this.$q.when(this.activeTask.onEnter.callback(this.activeTask)):this.$q.when()},a.prototype.deactivateTask=function(){this.activeTask.activeActionIndex=0,this.activeTask=void 0},a.prototype.isMenuTaskDefined=function(){return!!this.menuTask},a.prototype.isMenuTask=function(a){return a&&this.menuTask&&a.id===this.menuTask.id},a.prototype.waitUntilElementIsInDOM=function(a,b,c){if(b){var d=this.assistantWaitUntilElement();return this.waitUntilElementWorkers.push(d),d.waitUntilElementIsInDOM(b,this.isIntentToStop.bind(this),c&&c.bind(this))}return this.$q.when()},a.prototype.stopAllWaitUntilElementWorkers=function(){this.waitUntilElementWorkers.forEach(function(a){return a.stopWaiting()}),this.waitUntilElementWorkers=[]},a.prototype.setActiveActionIndex=function(a,b){a.activeActionIndex=b},a.prototype.disableAutoplay=function(){this.isInAutoplay=!1},a.prototype.enableAutoplay=function(){this.isInAutoplay=!0},a.prototype.stopActiveTask=function(){var a=this,b=this.getActiveTask(),c=this.$q.when();return b.onExit&&b.onExit.callback&&(c=this.$q.when(b.onExit.callback(b))),c.then(function(){return a.clearCustomTaskData()}).then(function(){return a.assistantUIAdapter.destroyAction()}).then(function(){a.activeAction=null,a.setDockStatus(builders.AssistantDockStatus.Stopped),a.disableAutoplay();var b=a.getActiveTask();return a.deactivateTask(),b})},a.prototype.handleMenu=function(a){a&&!this.isMenuTask(a)&&this.isMenuTaskDefined()?this.openMenu():this.isMenuTask(a)&&this.assistantUtils.broadcastAssistantEvent(builders.AssistantAction.EVENTS.CLOSE_MENU)},a.prototype.stopTaskAndHandleMenu=function(){var a=this;return this.stopActiveTask().then(function(b){return a.handleMenu(b)})},a.prototype.handleIntent=function(){var a=this;if(this.userOrSystemIntent){var b=this.getActiveTask();switch(this.userOrSystemIntent.enableAutoplay?this.enableAutoplay():this.userOrSystemIntent.disableAutoplay&&this.disableAutoplay(),this.userOrSystemIntent.operation){case builders.AssistantOperation.Next:this.handleActionLifecycle(b,b.activeActionIndex+1);break;case builders.AssistantOperation.Goto:this.handleActionLifecycle(b,this.userOrSystemIntent.actionIndex);break;case builders.AssistantOperation.Stop:this.assistantUtils.broadcastAssistantEvent(builders.AssistantAction.EVENTS.TASK_QUIT),this.stopTaskAndHandleMenu();break;case builders.AssistantOperation.Start:this.stopTaskAndHandleMenu().then(function(){return a.startTask(a.userOrSystemIntent.task,a.userOrSystemIntent.actionIndex)});break;case builders.AssistantOperation.Complete:this.assistantUtils.broadcastAssistantEvent(builders.AssistantAction.EVENTS.TASK_COMPLETE),this.setTaskComplete(b),this.stopTaskAndHandleMenu();break;case builders.AssistantOperation.ForceStop:this.assistantUtils.broadcastAssistantEvent(builders.AssistantAction.EVENTS.TASK_QUIT),this.stopActiveTask();break;default:this.stopTaskAndHandleMenu()}}},a}();angular.module("siteGeneratorTourManagerInternal").service("assistantManager",AssistantManager);var AssistantDock=function(){function a(a,b,c,d){this.flags=a,this.assistantManager=b,this.menuTask=c,this.applicationState=d,this.dockStatusesToClasses=(e={},e[builders.AssistantDockStatus.Playing]="tour-dock-playing",e[builders.AssistantDockStatus.Stopped]="tour-dock-stopped",e[builders.AssistantDockStatus.Disabled]="tour-dock-disabled",e[builders.AssistantDockStatus.Hidden]="ng-hide",e),b.setMenu(c);var e}return a.$inject=["flags","assistantManager","menuTask","applicationState"],a.prototype.handleAssistantMenuClick=function(){this.assistantManager.isInActiveTask()?this.assistantManager.isTaskInLastAction(this.assistantManager.getActiveTask())?this.assistantManager.stopAndComplete():this.assistantManager.canStop()&&this.assistantManager.stop():this.assistantManager.openMenu()},a.prototype.isPlaying=function(){return this.assistantManager.isInActiveTask()},a.prototype.getDockClass=function(){return this.dockStatusesToClasses[this.assistantManager.getDockStatus()]},a.prototype.shouldShowDock=function(){return!this.flags.noTour&&!this.applicationState.isInPreviewMode()},a}();angular.module("siteGeneratorTourManagerInternal").component("assistantDock",{template:'\n                <div class="assistant-dock tour-dock" ng-click="$ctrl.handleAssistantMenuClick()" ng-class="$ctrl.getDockClass()" ng-if="$ctrl.shouldShowDock()">\n                  <div class="tour-dock-element tour-dock-animate tour-dock-outer-circle"></div>\n                  <div class="tour-dock-element tour-dock-animate tour-dock-inner-circle"></div>\n                  <div class="tour-dock-element tour-dock-animate tour-dock-icon">\n                    <div class="tour-dock-icon-arrow"></div>\n                    <div class="tour-dock-icon-square"></div>\n                    <div class="tour-dock-icon-disabled"></div>\n                  </div>\n                </div>\n              ',controller:AssistantDock,bindings:{}});var AssistantBI=function(){function a(a,b,c,d,e,f,g){this.$rootScope=a,this.assistantManager=b,this.assistantUtils=c,this.consumerBiLogger=d,this.wixBiLogger=e,this.consumerBiLoggerHelpers=f,this.flags=g,this.registerBIListeners()}return a.$inject=["$rootScope","assistantManager","assistantUtils","consumerBiLogger","wixBiLogger","consumerBiLoggerHelpers","flags"],a.prototype.sendCustomBIEvent=function(a){if(!this.flags.silentBI){var b=this.consumerBiLoggerHelpers.getInstanceId(),c=this.consumerBiLoggerHelpers.getMetaSiteId(),d=this.consumerBiLoggerHelpers.getStoryRevision(),e=this.consumerBiLoggerHelpers.getStructureId(),f=this.consumerBiLoggerHelpers.getIndustryId(),g=this.consumerBiLoggerHelpers.getEsi(),h=this.consumerBiLoggerHelpers.getEditMode(),i=this.consumerBiLoggerHelpers.getDesignId(),j=this.consumerBiLoggerHelpers.getTotalPhases(),k=this.getActiveTaskName(),l=angular.merge({name:k,instanceId:b,msid:c,revision:d,structureId:e,industryId:f,esi:g,editMode:h,designId:i,totalPhases:j,src:66},a);return this.wixBiLogger.log(l)}},a.prototype.registerBIListeners=function(){var a=this;this.registerBIEvent(builders.AssistantAction.EVENTS.ACTION_START,function(){a.consumerBiLogger.tour.phaseDuringTour(a.getActiveTaskName())}),this.registerBIEvent(builders.AssistantAction.EVENTS.TASK_SKIP,function(){a.consumerBiLogger.tour.skipTour(a.getActiveTaskName())}),this.registerBIEvent(builders.AssistantAction.EVENTS.TASK_QUIT,function(){a.consumerBiLogger.tour.quitTour(a.getActiveTaskName())}),this.registerBIEvent(builders.AssistantAction.EVENTS.TASK_START,function(){a.consumerBiLogger.tour.start(a.getActiveTaskName())}),this.registerBIEvent(builders.AssistantAction.EVENTS.TASK_COMPLETE,function(){a.consumerBiLogger.tour.complete(a.getActiveTaskName())}),this.registerBIEvent(builders.AssistantAction.EVENTS.TASK_TIMEOUT,function(){var b=AssistantWaitUntilElement.WAIT_UNTIL_ELEMENT_INTERVAL_IN_MS*AssistantWaitUntilElement.WAIT_UNTIL_ELEMENT_MAX_TRIES/1e3;
a.consumerBiLogger.tour.timeout(b,"",a.getActiveTaskName())}),this.registerBIEvent(builders.AssistantAction.EVENTS.OPEN_MENU,function(){a.consumerBiLogger.tour.whatSNextShowMenu()}),this.registerBIEvent(builders.AssistantAction.EVENTS.CLOSE_MENU,function(){a.consumerBiLogger.tour.closeAssistant()}),this.registerBIEvent(builders.AssistantAction.EVENTS.MANUAL_OR_AUTO_CHOSE_AUTO,function(){a.consumerBiLogger.tour.firstStepSelectionForMeOrShowMe("do it for me",a.getActiveTaskName())}),this.registerBIEvent(builders.AssistantAction.EVENTS.MANUAL_OR_AUTO_CHOSE_MANUAL,function(){a.consumerBiLogger.tour.firstStepSelectionForMeOrShowMe("show me how",a.getActiveTaskName())}),this.registerBIEvent(builders.AssistantAction.EVENTS.KEEP_TRYANOTHER_CHOSE_TRYANOTHER,function(){a.consumerBiLogger.tour.lastStepSelectionKeepOrTryAnother("try another",a.getActiveTaskName())}),this.registerBIEvent(builders.AssistantAction.EVENTS.KEEP_TRYANOTHER_CHOSE_KEEP,function(){a.consumerBiLogger.tour.lastStepSelectionKeepOrTryAnother("keep",a.getActiveTaskName())})},a.prototype.getTaskExecutionMode=function(){return!this.assistantManager.isInActiveTask()||this.assistantManager.isMenuOpen()?"no-tour":this.assistantManager.isInAutoplayMode()?"auto-tour":"manual-tour"},a.prototype.registerBIEvent=function(a,b){this.$rootScope.$on(a,b)},a.prototype.getActiveTaskName=function(){return this.assistantManager.getActiveTask().BI.description},a}();angular.module("siteGeneratorTourManagerInternal").service("assistantBI",AssistantBI).run(["assistantBI",function(a){}]);var __extends=this&&this.__extends||function(){var a=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(a,b){a.__proto__=b}||function(a,b){for(var c in b)b.hasOwnProperty(c)&&(a[c]=b[c])};return function(b,c){function d(){this.constructor=b}a(b,c),b.prototype=null===c?Object.create(c):(d.prototype=c.prototype,new d)}}(),TourUiHelper=function(){function a(a,b,c){this.$q=a,this.$interval=b,this.storyServices=c,this.DEFAULT_POSITION_DURATION=500,this.ELEMENT_TRANSITION_ACTIVE_CLASS="tour-element-transition-active"}return a.$inject=["$q","$interval","storyServices"],a.prototype.trackChanges=function(a,b,c){var d=this;return void 0===b&&(b=250),this.$interval(function(){return d.notifyChangeIfNeeded(a,c)},b)},a.prototype.notifyChangeIfNeeded=function(a,b){var c=a.data("boundingClientRect"),d=this.getRoundedBoundingClientRect(a);window.requestAnimationFrame(function(){angular.equals(c,d)||b(a),a.data("boundingClientRect",d)})},a.prototype.highlightElement=function(a,b){void 0===b&&(b=!1);var c=[],d=this;$(a).addClass("intro-element"),b&&$(a).addClass("intro-element-preserve-background"),"static"===$(a).css("position")&&$(a).addClass("intro-element-relative");for(var e=$(a).parent();e.length>0&&"body"!==e.get(0).tagName.toLowerCase();){var f=e.css("zIndex"),g=parseFloat(e.css("opacity")),h=e.css("transform");(/[0-9]+/.test(f)||1>g||"none"!==h&&void 0!==h)&&(e.addClass("intro-fixparent"),c.push(e)),e=$(e).parent()}return function(a,b){return function(){d.unhighlighElement(a,b)}}(a,c)},a.prototype.unhighlighElement=function(a,b){void 0===b&&(b=[]);var c=$(a);c.removeClass("intro-element"),c.removeClass("intro-element-disabled"),c.removeClass("intro-element-relative"),b.forEach(function(a){$(a).removeClass("intro-fixparent")})},a.prototype.innerPositionElement=function(a,b,c,d,e){var f=this;void 0===e&&(e=this.DEFAULT_POSITION_DURATION);var g=this.$q.defer(),h=$(a);try{b=$(b);var i=$(a).get(0).getBoundingClientRect(),j=this.getInnerPositionOffset(a,b,c,d),k=!("auto"===h.css("left")||"auto"===h.css("top")),l=e/1e3;0===e||i.left===j.left&&i.top===j.top||!k?(h.removeClass(this.ELEMENT_TRANSITION_ACTIVE_CLASS),g.resolve()):(h.removeClass(this.ELEMENT_TRANSITION_ACTIVE_CLASS),$(a).one("transitionend",function(){h.removeClass(f.ELEMENT_TRANSITION_ACTIVE_CLASS),g.resolve()}),h.addClass(this.ELEMENT_TRANSITION_ACTIVE_CLASS)),h.css("transition","left "+l+"s ease-in-out, top "+l+"s ease-in-out"),h.offset(j)}catch(m){console.error("error",m),h.removeClass(this.ELEMENT_TRANSITION_ACTIVE_CLASS),g.resolve()}return g.promise},a.prototype.outerPositionElement=function(a,b,c,d,e,f){var g=this;void 0===e&&(e=this.DEFAULT_POSITION_DURATION),void 0===f&&(f=!0);var h=this.$q.defer();try{var i=$(a);if(b=$(b),b&&b.length){var j=$(a).get(0).getBoundingClientRect(),k=this.getOuterPositionOffset(a,b,c,d),l=!("auto"===i.css("left")||"auto"===i.css("top")),m=e/1e3;f&&(i.css({left:0}),k=this.fitOffsetToScreen(k,i.outerWidth())),i.css("transition","left "+m+"s ease-in-out, top "+m+"s ease-in-out"),i.offset(k),0===e||j.left===k.left&&j.top===k.top||!l?(i.removeClass(this.ELEMENT_TRANSITION_ACTIVE_CLASS),h.resolve()):(i.addClass(this.ELEMENT_TRANSITION_ACTIVE_CLASS),$(a).one("transitionend",function(){i.removeClass(g.ELEMENT_TRANSITION_ACTIVE_CLASS),h.resolve()}))}else i.hide(),h.resolve()}catch(n){console.error(n),h.resolve()}return h.promise},a.prototype.getOuterPositionOffset=function(a,b,c,d){var e=20;a=$(a);var f=$(b).get(0).getBoundingClientRect(),g={};return d===builders.AssistantPositionY.Top?(g.left=f.left+f.width/2-a.outerWidth()/2,g.top=f.top-a.outerHeight()-e):c===builders.AssistantPositionX.Right?(g.left=f.right+e,g.top=f.top-a.outerHeight()/2+f.height/2):d===builders.AssistantPositionY.Bottom?(g.left=f.left+f.width/2-a.outerWidth()/2,g.top=f.bottom+e):c===builders.AssistantPositionX.Left&&(g.left=f.left-a.outerWidth()-e,g.top=f.top-a.outerHeight()/2+f.height/2),g},a.prototype.fitOffsetToScreen=function(a,b){var c,d=$("body").get(0).getBoundingClientRect();return a.left+b>d.right?(c=d.right-(a.left+b),a.left=a.left+c-30):a.left<d.left&&(c=d.left-a.left,a.left=a.left+c+30),a},a.prototype.getInnerPositionOffset=function(a,b,c,d){void 0===c&&(c=builders.AssistantPositionX.Center),void 0===d&&(d=builders.AssistantPositionY.Center);var e=$(a);b=$(b);var f=$(b).get(0).getBoundingClientRect(),g={};return c===builders.AssistantPositionX.Left?g.left=f.left:c===builders.AssistantPositionX.Center?g.left=f.left+f.width/2-e.outerWidth()/2:c===builders.AssistantPositionX.Right&&(g.left=f.right-e.outerWidth()),d===builders.AssistantPositionY.Top?g.top=f.top:d===builders.AssistantPositionY.Center?g.top=f.top+f.height/2-e.outerHeight()/2:d===builders.AssistantPositionY.Bottom&&(g.top=f.bottom-e.outerHeight()),g},a.prototype.getRoundedBoundingClientRect=function(a){var b=$(a).get(0);if(!b)return{left:-1,right:-1,top:-1,bottom:-1,width:0,height:0};var c=b.getBoundingClientRect();return{left:Number(c.left.toFixed(0)),right:Number(c.right.toFixed(0)),top:Number(c.top.toFixed(0)),bottom:Number(c.bottom.toFixed(0)),width:Number(c.width.toFixed(0)),height:Number(c.height.toFixed(0))}},a}(),TourHint=function(){function a(a,b,c,d){this.$q=a,this.tourUiHelper=b,this.$interval=c,this.$timeout=d,this.CLICK_CLASS="intro-hint-click",this.CLICK_DURATION=1e3,this.MOVE_SPEED=350,this.TRACK_CHANGE_INTERVAL=400,this.isDirty=!1,this.fadeTimeInMs=250,this.hintElement=this.createHint(),angular.element("body").append(this.hintElement),this.hide(0)}return a.prototype.show=function(a){void 0===a&&(a=this.fadeTimeInMs),this.hintElement.fadeIn(a)},a.prototype.hide=function(a){void 0===a&&(a=this.fadeTimeInMs),this.hintElement.fadeOut(a),this.hintElement.css("transition","left 0s ease-in-out, top 0s ease-in-out"),this.hintElement.offset({left:-1e3,top:1e3})},a.prototype.attachTo=function(a,b,c){var d=this;if(this.attachPromise)throw"hint is already attached, try to detach first";this.targetElement=$(a);var e=this.isDirty?this.MOVE_SPEED:0,f=this.tourUiHelper.innerPositionElement(this.hintElement,this.targetElement,b,c,e);return this.attachPromise=this.tourUiHelper.trackChanges(this.targetElement,this.TRACK_CHANGE_INTERVAL,function(){d.tourUiHelper.innerPositionElement(d.hintElement,d.targetElement,b,c,d.MOVE_SPEED)}),this.isDirty=!0,f},a.prototype.detach=function(){this.attachPromise&&(this.$interval.cancel(this.attachPromise),this.attachPromise=null)},a.prototype.destroy=function(){this.detach(),this.hintElement.remove()},Object.defineProperty(a.prototype,"visible",{get:function(){return!this.hintElement.hasClass("tour-hint-hide")},enumerable:!0,configurable:!0}),a.prototype.simulateClick=function(){var a=this;return this.hintElement.addClass(this.CLICK_CLASS),this.$timeout(function(){return a.hintElement.removeClass(a.CLICK_CLASS)},this.CLICK_DURATION)},a.prototype.createHint=function(){var a;return a=angular.element("<div>"),a.addClass("intro-hint"),a},a}(),TourTooltip=function(){function a(a){this.$timeout=a,this.customClasses=[],this.fadeTimeInMs=250}return a.prototype.show=function(a){return void 0===a&&(a=this.fadeTimeInMs),this.element.fadeIn(a),this.$timeout(angular.noop,a)},a.prototype.hide=function(a){return void 0===a&&(a=this.fadeTimeInMs),this.element.fadeOut(a),this.$timeout(angular.noop,a)},a.prototype.destroy=function(){this.element.remove()},a.prototype.addCustomClasses=function(a){a&&((b=this.customClasses).push.apply(b,a),this.element.addClass(a.join(" ")));var b},a.prototype.removeCustomClasses=function(){this.element.removeClass(this.customClasses.join(" "))},a.prototype.addElementToBody=function(){angular.element("body").append(this.element)},a}(),TourAttachedTooltip=function(a){function b(b,c,d,e){var f=a.call(this,e)||this;return f.$q=b,f.tourUiHelper=c,f.$interval=d,f.TRACK_CHANGE_INTERVAL=400,f.element=f.createElement(),f.arrowElement=f.getArrowElement(),f.addElementToBody(),f.hide(0),f}return __extends(b,a),b.prototype.setContent=function(a){this.element.find("."+b.CONTENT_CLASS).html(a)},b.prototype.destroy=function(){this.detach(),a.prototype.destroy.call(this)},b.prototype.attachTo=function(a,b,c){var d=this;if(this.isAttached)throw"tooltip is already attached, try to detach first";this.attachedToElement=$(a),this.attachToElementPromise=this.tourUiHelper.trackChanges(this.attachedToElement,this.TRACK_CHANGE_INTERVAL,function(){d.tourUiHelper.outerPositionElement(d.element,d.attachedToElement,b,c,0,!0),d.setArrowPosition(b,c)}),this.isAttached=!0,this.$timeout(function(){d.tourUiHelper.outerPositionElement(d.element,d.attachedToElement,b,c,0,!0),d.setArrowPosition(b,c)})},b.prototype.detach=function(){this.isAttached&&(this.$interval.cancel(this.attachToElementPromise),this.attachToElementPromise=null,this.isAttached=!1,this.attachedToElement.removeData("boundingClientRect"))},b.prototype.createElement=function(){var a=angular.element("<div>");return a.addClass(b.ELEMENT_CLASS),a.html('<div class="'+b.CONTENT_CLASS+'"></div><div class="'+b.ARROW_CLASS+'"></div>'),a},b.prototype.getArrowElement=function(){return this.element.find("."+b.ARROW_CLASS)},b.prototype.setArrowPosition=function(a,b){var c=_.isUndefined(a)?builders.AssistantPositionY[b]:builders.AssistantPositionX[a];this.arrowElement.attr("position",c),this.tourUiHelper.outerPositionElement(this.arrowElement,this.attachedToElement,a,b,0,!1);var d={};a===builders.AssistantPositionX.Left?d.left=this.element.width():a===builders.AssistantPositionX.Right?d.left=-8:b===builders.AssistantPositionY.Top?d.top=this.element.height():b===builders.AssistantPositionY.Bottom&&(d.top=-8),this.arrowElement.css(d)},b}(TourTooltip);TourAttachedTooltip.ELEMENT_CLASS="intro-tooltip",TourAttachedTooltip.ARROW_CLASS="intro-tooltip-arrow",TourAttachedTooltip.CONTENT_CLASS="intro-tooltip-content";var TourModal=function(a){function b(b){var c=a.call(this,b)||this;return c.element=c.createElement(),c.hide(),c.addElementToBody(),c}return __extends(b,a),b.prototype.setContent=function(a){this.element.html(a)},b.prototype.createElement=function(){var a=angular.element("<div>");return a.addClass(b.ELEMENT_CLASS),a},b}(TourTooltip);TourModal.ELEMENT_CLASS="intro-modal";var TourBackdrop=function(){function a(a){this.$timeout=a,this.fadeTimeInMs=300,this.backdropElement=this.createBackdrop(),this.hide(0),this.syncBackdropScrollWithFakeBrowser()}return a.prototype.syncBackdropScrollWithFakeBrowser=function(){angular.element("body").append(this.backdropElement);var a;this.backdropElement[0].addEventListener("wheel",function(b){a=a||angular.element(".overlay-viewport")[0],a.scrollTop+=b.deltaY},{passive:!0})},a.prototype.show=function(a,b){void 0===b&&(b=this.fadeTimeInMs),this.backdropElement.show(),this.backdropElement.fadeTo(b,a)},a.prototype.hide=function(a){var b=this;return void 0===a&&(a=this.fadeTimeInMs),this.backdropElement.fadeTo(a,0),this.$timeout(function(){return b.backdropElement.hide()},a)},a.prototype.setOpacity=function(a,b){if(void 0===b&&(b=this.fadeTimeInMs),a>1||0>a)throw"invalid opacity, should be between 0-1";this.backdropElement.fadeTo(b,a)},a.prototype.destroy=function(){this.backdropElement.remove()},a.prototype.onClick=function(a){this.backdropElement.on("click",function(){return a()})},a.prototype.createBackdrop=function(){var a;return a=angular.element("<div>"),a.addClass("intro-backdrop"),a},a}();TourBackdrop.DEFAULT_OPACITY=.7;var AssistantUIAdapter=function(){function a(a,b,c,d,e,f){this.TourHint=a,this.TourBackdrop=b,this.TourAttachedTooltip=c,this.TourModal=d,this.tourUiHelper=e,this.$q=f,this.tourBackdrop=new this.TourBackdrop,this.tourHint=new this.TourHint}return a.$inject=["TourHint","TourBackdrop","TourAttachedTooltip","TourModal","tourUiHelper","$q"],a.prototype.renderAction=function(a,b){a.hint&&a.hint.enabled||this.tourHint.hide(),this.tourHint.detach();var c=this.handleBackdrop(a);a.isModal?(this.tourTooltip=new this.TourModal,this.tourTooltip.setContent(b),this.tourTooltip.addCustomClasses(a.tooltip.customClasses)):a.tooltip&&!a.tooltip.disabled&&a.element&&a.element.selector&&(this.tourTooltip=this.tourTooltip||new this.TourAttachedTooltip,this.tourTooltip.setContent(b),this.tourTooltip.attachTo(a.element.selector,a.tooltip.positionX,a.tooltip.positionY),this.tourTooltip.addCustomClasses(a.tooltip.customClasses)),this.unhighlightElementCallback=this.handleElementHighlight(a);var d=this.tourTooltip?this.tourTooltip.show():this.$q.when();return this.$q.all([c,d])},a.prototype.destroyAction=function(){return _.isFunction(this.unhighlightElementCallback)&&this.unhighlightElementCallback(),this.tourTooltip&&(this.tourTooltip.destroy(),this.tourTooltip=null),this.hideHint(),this.tourBackdrop.hide()},a.prototype.hideAction=function(a){var b=this;return void 0===a&&(a={}),_.isFunction(this.unhighlightElementCallback)&&this.unhighlightElementCallback(),this.tourTooltip&&a.tooltip&&!a.tooltip.dontHideOnExit||this.tourTooltip instanceof TourModal?this.tourTooltip.hide().then(function(){b.tourTooltip&&b.tourTooltip.destroy(),b.tourTooltip=null}):void 0},a.prototype.disableHighlightInteractivity=function(a){a.element&&a.element.selector?$(a.element.selector).addClass("intro-element-disabled"):a.hint&&a.hint.selector&&$(a.hint.selector).addClass("intro-element-disabled"),a.additionalHighlightedElements&&a.additionalHighlightedElements.forEach(function(a){return $(a).addClass("intro-element-disabled")})},a.prototype.enableHighlightInteractivity=function(a){a.element&&a.element.selector?$(a.element.selector).removeClass("intro-element-disabled"):a.hint&&a.hint.selector&&$(a.hint.selector).removeClass("intro-element-disabled"),a.additionalHighlightedElements&&a.additionalHighlightedElements.forEach(function(a){return $(a).removeClass("intro-element-disabled")})},a.prototype.disableElements=function(a){void 0===a&&(a=[]),a.forEach(function(a){return a.addClass("disable-element").prop("disabled",!0)})},a.prototype.enableElements=function(a){void 0===a&&(a=[]),a.forEach(function(a){return a.removeClass("disable-element").prop("disabled",!1)})},a.prototype.hideHint=function(){this.tourHint.hide()},a.prototype.fadeOutBackdrop=function(a){this.tourBackdrop.show(0,a)},a.prototype.moveHintToElement=function(a){return a.hint?(this.tourHint.show(),this.tourHint.attachTo(a.hint.selector||a.element&&a.element.selector,a.hint.positionX,a.hint.positionY)):this.$q.when()},a.prototype.simulateClick=function(){return this.tourHint.simulateClick()},a.prototype.handleBackdrop=function(a){return a.backdrop&&a.backdrop.enabled?this.$q.when(this.tourBackdrop.show("undefined"!=typeof a.backdrop.opacity?a.backdrop.opacity:TourBackdrop.DEFAULT_OPACITY)):this.tourBackdrop.hide()},a.prototype.handleElementHighlight=function(a){var b=this,c=[],d=a.preserveBackground;if(a.element||a.hint){var e=this.tourUiHelper.highlightElement($(a.element?a.element.selector:a.hint.selector),d);c.push(e)}if(a.additionalHighlightedElements){var f=a.additionalHighlightedElements.map(function(a){return b.tourUiHelper.highlightElement($(a),d)});c.push.apply(c,f)}return function(){c.forEach(function(a){return a()})}},a.prototype.scrollToElement=function(a){if((a.hint&&a.hint.selector||a.element&&a.element.selector)&&a.scrollToElement!==!1){var b=a.hint&&a.hint.selector||a.element&&a.element.selector,c=$(b).get(0);c&&c.scrollIntoView(!1)}},a}();angular.module("siteGeneratorTourManagerInternal").service("assistantUIAdapter",AssistantUIAdapter).factory("TourHint",["$q","tourUiHelper","$interval","$timeout",function(a,b,c,d){return function(){return new TourHint(a,b,c,d)}}]).factory("TourAttachedTooltip",["$q","tourUiHelper","$interval","$timeout",function(a,b,c,d){return function(){return new TourAttachedTooltip(a,b,c,d)}}]).factory("TourBackdrop",["$timeout",function(a){return function(){return new TourBackdrop(a)}}]).factory("TourModal",["$timeout",function(a){return function(){return new TourModal(a)}}]).service("tourUiHelper",TourUiHelper);var AssistantUtils=function(){function a(a,b,c,d,e,f,g,h,i,j,k,l){this.$q=a,this.$state=b,this.$timeout=c,this.$window=d,this.$compile=e,this.$rootScope=f,this.spinnerService=g,this.ELEMENT_SELECTOR=h,this.storyServices=i,this.applicationParameters=j,this.flags=k,this.$injector=l,this.DEFAULT_TRIGGER="click",this.DELAY_BEFORE_SPINNER_WAIT=800,this.LISTENER_NAMESPACE="obassistant",this.TOUR_STEP_TOOLTIP_COMPONENT='<assistant-tooltip action="action"></assistant-tooltip>',this.STORAGE_KEY="ob_tasks",this.OLD_STORAGE_KEY="ob_tours",this.tourToAssistantNameDictionary={previewTour:"previewTask",entireWebsiteDesign:"entireWebsiteDesignTask",editContentTour:"editContentTask",customizeSectionDesign:"customizeSectionDesign",pageSEOTour:"pageSEOTask",changeLayoutTour:"changeLayoutTour",addSectionTour:"addSectionTask",welcomeTour:"welcomeTask",addNewPageTour:"addNewPageTask",animationTour:"animationTask"},this.$=d.$}return a.$inject=["$q","$state","$timeout","$window","$compile","$rootScope","spinnerService","ELEMENT_SELECTOR","storyServices","applicationParameters","flags","$injector"],a.prototype.compileTemplateContent=function(a,b,c){var d=this.$rootScope.$new();d.action=c,d.task=b,d.assistantManager=a;var e=c.tooltip&&c.tooltip.template||this.TOUR_STEP_TOOLTIP_COMPONENT;return this.$compile(e)(d)},a.prototype.redirectToState=function(a){return a?this.$state.go(a):void 0},a.prototype.triggerElement=function(a,b){this.$timeout(function(){$(a).trigger(b)})},a.prototype.registerActionTrigger=function(a,b){var c=this;return this.$timeout(function(){c.$(a.element).one(c.getNamespacedTrigger(a.trigger),a.descendant,function(){a.callback&&a.callback(),b(a.intent)})})},a.prototype.unregisterActionTrigger=function(a){this.$(a.element).off(this.getNamespacedTrigger(a.trigger))},a.prototype.replaceElementSelectorPlaceholderWithValue=function(a,b){return a?a.replace(this.ELEMENT_SELECTOR,b):b},a.prototype.waitForSpinner=function(a){var b=this;return a?this.$timeout(function(){return b.spinnerService.waitForStop()},this.DELAY_BEFORE_SPINNER_WAIT):this.$q.when()},a.prototype.delayAction=function(a){return void 0===a&&(a=0),this.$timeout(angular.noop,a)},a.prototype.getElementSelector=function(a){var b=a.selector;return a.isRandom&&(b=this.getRandomElementSelector(a)),b},a.prototype.getRandomElementSelector=function(a){a.randomElementsBank&&a.randomElementsBank.length||(a.randomElementsBank=this.createArrayAccordingToNumberOfElementsOnScreen(a.selector));var b=this.getAndRemoveRandomElementFromArray(a.randomElementsBank);return this.getIndexedElementSelector(a.selector,b)},a.prototype.createArrayAccordingToNumberOfElementsOnScreen=function(a){return _.range(0,this.$(a).length)},a.prototype.getAndRemoveRandomElementFromArray=function(a){return a.splice(Math.floor(Math.random()*a.length),1)[0]},a.prototype.getIndexedElementSelector=function(a,b){return a+":eq("+b+")"},a.prototype.getNamespacedTrigger=function(a){return void 0===a&&(a=this.DEFAULT_TRIGGER),a+"."+this.LISTENER_NAMESPACE},a.prototype.getDefaultExitTrigger=function(a){return void 0===a&&(a=[]),_.find(a,{isDefault:!0})||a[0]},a.prototype.broadcastAssistantEvent=function(a){this.$rootScope.$broadcast(a)},a.prototype.openAddTopBarMenu=function(){var a=this.$injector.get("assistantManager");a.setCustomTaskData("openAddTopBarMenu",!0)},a.prototype.closeAddTopBarMenu=function(){var a=this.$injector.get("assistantManager");a.setCustomTaskData("openAddTopBarMenu",!1)},a.prototype.openSiteDesignTopBarMenu=function(){var a=this.$injector.get("assistantManager");a.setCustomTaskData("openSiteDesignTopBarMenu",!0)},a.prototype.closeSiteDesignTopBarMenu=function(){var a=this.$injector.get("assistantManager");a.setCustomTaskData("openSiteDesignTopBarMenu",!1)},a.prototype.showSectionDesignMenu=function(){var a=this.$injector.get("assistantManager");a.setCustomTaskData("showSectionDesignMenu",!0)},a.prototype.hideSectionDesignMenu=function(){var a=this.$injector.get("assistantManager");a.setCustomTaskData("showSectionDesignMenu",!1)},a.prototype.showSiteDesignMenu=function(){var a=this.$injector.get("assistantManager");a.setCustomTaskData("showSiteDesignMenu",!0)},a.prototype.hideSiteDesignMenu=function(){var a=this.$injector.get("assistantManager");a.setCustomTaskData("showSiteDesignMenu",!1)},a.prototype.openPagesTopBarMenu=function(){var a=this.$injector.get("assistantManager");a.setCustomTaskData("openPagesTopBarMenu",!0)},a.prototype.closePagesTopBarMenu=function(){var a=this.$injector.get("assistantManager");a.setCustomTaskData("openPagesTopBarMenu",!1)},a.prototype.hideListSpanButtons=function(){var a=this.$injector.get("assistantManager");a.setCustomTaskData("hideListSpanButtons",!0)},a.prototype.showListSpanButtons=function(){var a=this.$injector.get("assistantManager");a.setCustomTaskData("hideListSpanButtons",!1)},a.prototype.getTaskDataFromStorage=function(a){void 0===a&&(a=this.STORAGE_KEY);var b=this.getData(a);return this.storyServices.story&&this.storyServices.story.id?b&&b[this.storyServices.story.id]:void 0},a.prototype.saveTaskData=function(a){var b=this.getData()||{};this.storyServices.story&&(b[this.storyServices.story.id]=b[this.storyServices.story.id]||{},b[this.storyServices.story.id][a.id]={id:a.id,isComplete:a.isComplete}),this.storeItem(this.STORAGE_KEY,JSON.stringify(b))},a.prototype.saveTasksData=function(a){var b=this.getData(this.STORAGE_KEY)||{};this.storyServices.story&&(b[this.storyServices.story.id]=a),this.storeItem(this.STORAGE_KEY,JSON.stringify(b))},a.prototype.removeDataFromStorage=function(a){void 0===a&&(a=this.STORAGE_KEY),this.isUseBlobStory(a)?this.storyServices.story.tourState[a]=null:this.$window.localStorage.removeItem(a)},a.prototype.convertLocalStorageToursToTasks=function(){var a=this,b=this.getData(this.OLD_STORAGE_KEY);if(b&&b.sites){var c=Object.keys(b.sites).reduce(function(c,d){return c[d]=a.normalizeOldTourDataToAssistantData(b.sites[d].tours),c},{});this.removeDataFromStorage(this.OLD_STORAGE_KEY),this.storeItem(this.STORAGE_KEY,JSON.stringify(c))}},a.prototype.isUseBlobStory=function(a){return a===this.STORAGE_KEY&&this.flags.storeTourStateInStory?!0:!1},a.prototype.storeItem=function(a,b){this.isUseBlobStory(a)&&this.storyServices.story?this.storyServices.story.tourState[a]=b:this.$window.localStorage.setItem(a,b)},a.prototype.getData=function(a){void 0===a&&(a=this.STORAGE_KEY);var b;return b=this.isUseBlobStory(a)&&this.storyServices.story&&this.storyServices.story.tourState&&this.storyServices.story.tourState[a]?this.storyServices.story.tourState[a]:this.$window.localStorage.getItem(a),b?JSON.parse(b):void 0},a.prototype.normalizeOldTourDataToAssistantData=function(a){var b=this,c=a.reduce(function(a,c){var d=c.name;if("fontColorTour"===d)a.fontDesignTask={id:"fontDesignTask",isComplete:c.isComplete},a.colorDesignTask={id:"colorDesignTask",isComplete:c.isComplete};else{var e=b.tourToAssistantNameDictionary[d];e&&(a[e]={id:e,isComplete:c.isComplete})}return a},{});return c},a.prototype.getActiveExperiments=function(){var a=this;return Object.keys(this.flags).filter(function(b){return!!a.flags[b]&&"$get"!==b}).map(function(b){return a.flags[b]===!0?b:b+"_"+a.flags[b]})},a.prototype.shouldAutoProvisionTPAOfType=function(a){return this.storyServices.story?_.contains(this.applicationParameters.tpaTypes[a].structureIds,this.storyServices.story.structureId):!1},a.prototype.goToOnSliderHandled=function(a){var b,c=this;$(builders.AssistantAction.HOOKS.FONT_SIZE_SLIDER).mousedown(function(){return b=!0}),window.addEventListener("mouseup",function(d){if(b===!0){var e=c.$injector.get("assistantManager");e.gotoActionInActiveTask(a),b=!1}})},a}(),AssistantWaitUntilElement=function(){function a(a,b,c){this.$q=a,this.$interval=b,this.$window=c,this.$=c.$}return a.prototype.waitUntilElementIsInDOM=function(b,c,d,e,f){var g=this;void 0===d&&(d=null),void 0===e&&(e=a.WAIT_UNTIL_ELEMENT_INTERVAL_IN_MS),void 0===f&&(f=a.WAIT_UNTIL_ELEMENT_MAX_TRIES),this.intervalPromise&&this.stopWaiting();var h=this.$q.defer(),i=0,j=this.$(b);return!d&&j.length||d&&d(b)?h.resolve(j):this.intervalPromise=this.$interval(function(){i++;var a=g.$(b);!d&&a.length||d&&d(b)||c()?(g.stopWaiting(),h.resolve(a)):i>=f&&(g.stopWaiting(),h.reject())},e,f),h.promise},a.prototype.stopWaiting=function(){this.intervalPromise&&this.$interval.cancel(this.intervalPromise)},a}();AssistantWaitUntilElement.WAIT_UNTIL_ELEMENT_INTERVAL_IN_MS=400,AssistantWaitUntilElement.WAIT_UNTIL_ELEMENT_MAX_TRIES=90,angular.module("siteGeneratorTourManagerInternal").service("assistantUtils",AssistantUtils).factory("assistantWaitUntilElement",["$q","$interval","$window",function(a,b,c){return function(){return new AssistantWaitUntilElement(a,b,c)}}]).constant("ELEMENT_SELECTOR","$element");var builders;!function(a){var b;!function(a){a[a.beginner=0]="beginner",a[a.intermediate=1]="intermediate"}(b=a.AssistantMenuProgress||(a.AssistantMenuProgress={}));var c;!function(a){a[a.Next=0]="Next",a[a.Stop=1]="Stop",a[a.Goto=2]="Goto",a[a.Start=3]="Start",a[a.Complete=4]="Complete",a[a.ForceStop=5]="ForceStop",a[a.NoOp=6]="NoOp"}(c=a.AssistantOperation||(a.AssistantOperation={}));var d;!function(a){a[a.Vertical=0]="Vertical",a[a.Horizontal=1]="Horizontal"}(d=a.TooltipOrientation||(a.TooltipOrientation={}));var e;!function(a){a[a.Top=0]="Top",a[a.Center=1]="Center",a[a.Bottom=2]="Bottom"}(e=a.AssistantPositionY||(a.AssistantPositionY={}));var f;!function(a){a[a.Left=0]="Left",a[a.Center=1]="Center",a[a.Right=2]="Right"}(f=a.AssistantPositionX||(a.AssistantPositionX={}));var g;!function(a){a[a.Playing=0]="Playing",a[a.Stopped=1]="Stopped",a[a.Disabled=2]="Disabled",a[a.Hidden=3]="Hidden"}(g=a.AssistantDockStatus||(a.AssistantDockStatus={}));var h=function(){function b(){var g=this;this.conf={data:{}},this.thatAttachesTo=function(){var c={build:g.build.bind(g),and:g,dock:function(){return g.thatAttachesTo().hook(a.AssistantAction.HOOKS.DOCK),g.withTooltip().thatOpensUp(),c},hook:function(a){return g.mergeConf({element:{selector:a}}),c},onlyUnselectedElements:function(){return g.conf&&g.conf.element&&g.conf.element.selector&&g.mergeConf({element:{selector:b.unselected(g.conf.element.selector)}}),c},onlySelectedElements:function(){return g.conf&&g.conf.element&&g.conf.element.selector&&g.mergeConf({element:{selector:g.conf.element.selector+".selected"}}),c},randomElement:function(){return g.mergeConf({element:{isRandom:!0}}),c}};return c},this.withTooltip=function(){var a={build:g.build.bind(g),and:g,thatIsDisabled:function(){return g.mergeConf({tooltip:{disabled:!0}}),a},withTemplate:function(b){return g.mergeConf({tooltip:{disabled:!1,template:b}}),a},withTitle:function(b){return g.mergeConf({tooltip:{disabled:!1,title:b}}),a},withWidth:function(b){return a.withCustomStyle({width:b,"max-width":b}),a},withHeight:function(b){return a.withCustomStyle({height:b,"min-height":b}),a},withBackgroundColor:function(b){return a.withCustomStyle({backgroundColor:b}),a},withCustomStyle:function(b){return g.mergeConf({tooltip:{disabled:!1,customStyle:b}}),a},withContent:function(b){return g.mergeConf({tooltip:{disabled:!1,content:b}}),a},withImage:function(b){return g.mergeConf({tooltip:{disabled:!1,image:b}}),a},thatIsntHiddenAfterAction:function(){return g.mergeConf({tooltip:{dontHideOnExit:!0}}),a},thatOrientsVertically:function(){return g.mergeConf({tooltip:{orientation:d.Vertical}}),a},thatOpensAsModal:function(){return g.mergeConf({isModal:!0}),a},thatOpensFullScreen:function(){var b="assistant-tooltip-fullscreen",c=g.conf&&g.conf.tooltip&&g.conf.tooltip.customClasses||[];return g.mergeConf({isModal:!0,tooltip:{customClasses:c.concat([b])}}),a},thatOpensRight:function(){return g.mergeConf({tooltip:{positionX:f.Right}}),a},thatOpensLeft:function(){return g.mergeConf({tooltip:{positionX:f.Left}}),a},thatOpensUp:function(){return g.mergeConf({tooltip:{positionY:e.Top}}),a},thatOpensDown:function(){return g.mergeConf({tooltip:{positionY:e.Bottom}}),a}};return a},this.withBehaviors=function(){var a={build:g.build.bind(g),and:g,thatSkipsStepOnCondition:function(b){return g.mergeConf({shouldSkipAction:b}),a},thatStopsAutoplayOnEnter:function(){return g.mergeConf({onEnter:{stopAutoplay:!0}}),a},thatStartsAutoplayOnEnter:function(){return g.mergeConf({onEnter:{startAutoplay:!0}}),a},thatStartsAutoplayOnExit:function(){return g.mergeConf({onExit:{startAutoplay:!0}}),a},thatStopsAutoplayOnExit:function(){return g.mergeConf({onExit:{stopAutoplay:!0}}),a},thatClosesSidePanelOnExit:function(){return g.mergeConf({onExit:{DOMEvents:[{element:b.HOOKS.PANEL_CLOSE_BUTTON,trigger:"click"}]}}),a},thatClosesSidePanelOnEnter:function(){return g.mergeConf({onEnter:{DOMEvents:[{element:b.HOOKS.PANEL_CLOSE_BUTTON,trigger:"click"}]}}),a},thatWaitsForSpinner:function(){return g.mergeConf({waitForSpinner:!0}),a},thatRedirectsTo:function(b){return void 0===b&&(b=null),g.mergeConf({redirectToState:b}),a},thatWaitsForElementWithCondition:function(b){return g.mergeConf({waitForElementCondition:b}),a},thatDoesntScrollToElement:function(){return g.mergeConf({scrollToElement:!1}),a},thatDelays:function(b){return g.mergeConf({delayBeforeStartInMs:b}),a},thatWaitsForElement:function(b){return g.mergeConf({waitForElement:b}),a},thatHasHint:function(b,c){return void 0===b&&(b=f.Center),void 0===c&&(c=e.Center),g.mergeConf({hint:{enabled:!0,positionX:b,positionY:c}}),a},withAutoplayTimeoutOf:function(b){return g.mergeConf({autoplayTimeoutInMs:b}),a}};return a},this.withCallbacks=function(){var a={build:g.build.bind(g),and:g,onExit:function(b){return g.mergeConf({onExit:{callback:b}}),a},onEnter:function(b){return g.mergeConf({onEnter:{callback:b}}),a}};return a},this.withBackdrop=function(){var a={build:g.build.bind(g),and:g,thatIsOn:function(){return g.mergeConf({backdrop:b.BACKDROP.ON}),a},thatIsOff:function(){return g.mergeConf({backdrop:b.BACKDROP.OFF}),a},thatIsInvisible:function(){return g.mergeConf({backdrop:b.BACKDROP.INVISIBLE}),a},thatIsOpaque:function(){return g.mergeConf({backdrop:b.BACKDROP.OPAQUE}),a},thatFadesOutOnExit:function(b){return void 0===b&&(b=1e3),g.mergeConf({backdrop:{fadeOutOnExit:!0,fadeOutTime:b}}),a}};return a},this.withConditionalConf=function(){var a={build:g.build.bind(g),and:g,experimentIsEnabled:function(b,c){return g.mergeConf({experiments:(d={},d[b]=c,d)}),a;var d},isInAutoplayMode:function(b){return g.mergeConf({actionIfAuto:b}),a},isInManualMode:function(b){return g.mergeConf({actionIfManual:b}),a}};return a},this.thatIsBasedOnTemplate=function(){var a={build:g.build.bind(g),
and:g,manualOrAuto:function(){return g.baseTooltipOn("MANUAL_OR_AUTO"),a},keepOrAnother:function(b){return g.baseTooltipOn("KEEP_OR_ANOTHER"),g.mergeConf({tooltip:{buttons:{TRY_ANOTHER:{intent:{actionIndex:b}}}}}),a},singleButtonTooltip:function(b,d){return void 0===d&&(d=c.Next),g.baseTooltipOn("SINGLE_BUTTON"),g.mergeConf({tooltip:{buttons:{BUTTON1:{label:b,intent:{operation:d}}}}}),a}};return a},this.withTriggers=function(){var a={build:g.build.bind(g),and:g,nextOnElementClick:function(b,d,e,f){return g.createExitTrigger({operation:c.Next,hook:b,descendant:d,dontWaitForElement:e,callback:f}),a},goToOnElementClick:function(b,d,e,f,h){return g.createExitTrigger({operation:c.Goto,hook:b,descendant:e,goToIndex:d,dontWaitForElement:f,callback:h}),a},nextOnBackdropClick:function(){return g.createExitTrigger({operation:c.Next,hook:b.HOOKS.BACKDROP}),a},stopOnElementClick:function(b,d){return g.createExitTrigger({operation:c.Stop,hook:b,dontWaitForElement:d}),a},completeOnElementClick:function(b,d,e,f){return g.createExitTrigger({operation:c.Complete,hook:b,descendant:d,dontWaitForElement:e,callback:f}),a},forceStopOnElementClick:function(b,d){return g.createExitTrigger({operation:c.ForceStop,hook:b,dontWaitForElement:d}),a},completeOnBackdropClick:function(){return g.createExitTrigger({operation:c.Complete,hook:b.HOOKS.BACKDROP}),a},stopOnBackdropClick:function(){return g.createExitTrigger({operation:c.Stop,hook:b.HOOKS.BACKDROP}),a}};return a},this.withBI=function(){var a={build:g.build.bind(g),and:g,withDescription:function(b){return g.mergeConf({BI:{description:b}}),a}};return a},this.withEvents=function(){var a={build:g.build.bind(g),and:g,thatBroadcastsOnEnter:function(b){var c=g.conf&&g.conf.events&&g.conf.events.onEnter||[];return g.mergeConf({events:{onEnter:c.concat([b])}}),a},thatBroadcastsOnExit:function(b){var c=g.conf&&g.conf.events&&g.conf.events.onExit||[];return g.mergeConf({events:{onExit:c.concat([b])}}),a}};return a},this.withCustomStage=function(){var a={build:g.build.bind(g),and:g,withDisabledElements:function(b){var c=g.conf&&g.conf.disabledElements||[];return g.mergeConf({disabledElements:c.concat([b])}),a},withAdditionalHighlight:function(b){var c=g.conf&&g.conf.additionalHighlightedElements||[];return g.mergeConf({additionalHighlightedElements:c.concat([b])}),a}};return a}}return b.prototype.build=function(){return this.conf},b.prototype.withCustomConf=function(a){return this.mergeConf(a),this},b.prototype.mergeConf=function(a){_.merge(this.conf,a)},b.prototype.baseTooltipOn=function(a){var c=b.TEMPLATES[a];if(!c)throw"unknown base type "+a;return this.mergeConf(c),this},b.prototype.createExitTrigger=function(a){var c=a.operation,d=a.hook,e=a.descendant,f=a.goToIndex,g=a.trigger,h=void 0===g?"click":g,i=a.dontWaitForElement,j=a.callback,k={element:d||b.ELEMENT_SELECTOR,descendant:e,intent:{operation:c,goToIndex:f},trigger:h,dontWaitForElement:i,callback:j},l=this.conf&&this.conf.exitTriggers||[];l.push(k),this.mergeConf({exitTriggers:l})},b.unselected=function(a){return a+":not(.selected)"},b}();h.ELEMENT_SELECTOR="$element",h.BACKDROP={ON:{enabled:!0,opacity:.7},INVISIBLE:{enabled:!0,opacity:0},OFF:{enabled:!1},OPAQUE:{enabled:!0,opacity:1}},h.HOOKS={BODY:"body",$element:h.ELEMENT_SELECTOR,TOP_BAR:"top-bar",DOCK:".assistant-dock",DOCK_START:".assistant-dock-start",BACKDROP:".intro-backdrop",PREVIEW_TAB:'[data-hook="topbar-preview"]',ADD_TAB:'[data-hook="second-top-bar-add-section"]',PUBLISH_TAB:".publish-tab",ADD_SECTION_TAB:'[data-hook="add-section-button"]',ADD_PAGE_TAB:'[data-hook="add-page-button"]',PAGE_TAB_MENU_ITEM:".pages-dropdown .sub-menu-item",DESIGN_TAB:".design-tab",DESIGN_MENU_THEMES_OPTION:'[data-hook="open-themes-button"]',DESIGN_MENU_COLORS_OPTION:'[data-hook="open-colors-button"]',DESIGN_MENU_FONTS_OPTION:'[data-hook="open-fonts-button"]',DESIGN_MENU_ANIMATIONS_OPTION:'[data-hook="open-animations-button"]',EXIT_PREVIEW_BUTTON:".tour-element-preview-back",KIT_OPTION:"design-panel .kit-option",SELECTED_KIT_OPTION:"design-panel .kit-option.selected",KIT_OPTION_CUSTOMISE:"design-panel .kit-option.selected .customise-button",KIT_OPTION_CUSTOMIZE:"design-panel .kit-option.selected .customize-button",COLORS_PANEL:"kit-colors cc-panel-frame",COLORS_CONTAINER:".colors-container",COLORS_CONTAINER_NEW_COLORATION:".color-palette > *",MAIN_COLOR_NEW_COLORATION:"p21-color-tag [data-hook=color-tag]",MAIN_COLOR_DIALOG_NEW_COLORATION:".colors-dialog",MAIN_COLOR_DIALOG_CANCEL_BUTTON_NEW_COLORATION:'.colors-dialog [data-hook="palette-color-dialog-cancel"]',MAIN_COLOR_DIALOG_CONFIRM_BUTTON_NEW_COLORATION:'.colors-dialog [data-hook="palette-color-dialog-confirm"]',MAIN_COLOR_DIALOG_COLOR_TAG:".colors-dialog .p21-color-tag",KIT_PALETTE_NEW_COLORATION:"kit-palette .p24-palette:not(.-selected)",ADVANCED_EDITING_NEW_COLORATION:"coloration-panel .p18-panel-footer",COLORS:"kit-colors .colors-container .colors",DESIGN_PANEL:"design-panel",DESIGN_PANEL_KIT:"design-panel-kit",PREVIEW_PADDING:".preview-padding",PREVIEW_LIST:".preview-list",PREVIEW_SECTION:".preview-section-loading",PREVIEW_OVERLAY:".preview-overlay",PREVIEW_OVERLAY_WITH_NOT_BLANK_PAGE:".preview-list-container [role=button]:not(.page-blank-overlay)",PREVIEW_CONTAINER:".preview-container",PREVIEW_CONTENT:".preview-content",OVERLAY_CONTAINER:".overlay-container",OVERLAY_SECTION_NOT_TPA:".list-span-overlay:not(.tpa-span)",OVERLAY_SECTION_WITH_PRESETS:".list-span-overlay.has-presets",PANEL_CLOSE_BUTTON:".p16-panel-header [data-hook=close-button]",PANEL_HELP_BUTTON:".p16-panel-header [data-hook=help-button]",PANEL_BACK_BUTTON:".p16-panel-header [data-hook=return-button]",RETURN_SUB_BUTTON:'[data-hook="return-sub-button"]',NODE_EDITOR:".node-editor .cc-panel-frame.cc-container",LEFT_PANEL:".builder-panel-inner",PRESETS_CONTAINER:".builder-left-panel .preview-list-wrap",PRESET:"[data-hook=preview]",PAGE_TAB:".top-bar-section .page-tab",PAGE_TAB_TEMPORARY:".drop-down.pages-dropdown",PAGE_TAB_SECOND_TOPBAR:'[data-hook="second-top-bar-pages-panel"]',MANAGE_PAGES:'[data-hook="manage-pages"]',ADD_PAGE_BUTTON:".add-page-button",PAGE_PANEL_FOOTER:".pages-panel-inner-footer",UNSELECTED_PAGE_ITEMS:".tree-node:not(.selected-page)",ADD_SECTION_PANEL:".add-section",ADD_SECTION_PANEL_LABEL:'.add-section [label="Add Section"]',BROWSER_TOOLBAR:".browser-toolbar",CONNECT_DOMAIN_BUTTON:".browser-toolbar [data-hook=label]",PAGE_SETTINGS_BUTTON:".pages-panel-inner .menu-list .tree-node.selected-page .settings-button",PAGES_PANEL:"pages-panel .pages-panel-inner",PAGE_TRANSITION_DROPDOWN:'pages-panel [data-hook="p3-md-select"]',PAGE_SEO_MENU_ITEM:'md-dialog cc-menu-item[icon=cc-icon-seo] [data-hook="menu-item"]',SEO_PANEL:"seo-panel",SEO_PANEL_PAGE_DESCRIPTION_FIELD:'seo-panel [label="Page Description"]',RECOMMENDED_SECTION:".tour-element-recommended-section .section-button",NEXT_RECOMMENDED_SECTION:".tour-element-recommended-section.selected + .tour-element-recommended-section .section-button",OVERLAY_SWITCH_LAYOUT_BUTTON:".tour-element-switch-layout",OVERLAY_SECTION_EDIT_BUTTON:'[data-hook="edit-button"]',OVERLAY_MORE_ACTIONS_BUTTON:".tour-more-actions-panel",OVERLAY_DRAG_HANDLE:".tour-drag-handle",INSERT_SECTION_BUTTON:".insert",TOOLTIP_BUTTON:".tour-button",BLANK_PAGE_OVERLAY:".page-blank-overlay",ANIMATION_CONTAINER:".animations-container",ANIMATION_TIP:".animations-container .animations-tip",CHANGE_ANIMATION:'[data-hook="animation-container"]',PREVIEW_ANIMATION:'[data-hook="preview-animation"]',ANIMATION_DROPDOWN_EXCLUDE_NO_ANIMATION:"._md-select-menu-container [data-hook=dropdown-list-item]:not(.no-animation)",ANIMATION_DROPDOWN_NO_ANIMATION:"._md-select-menu-container [data-hook=dropdown-list-item].no-animation",PAGES_PREVIEW:"#PAGES_CONTAINERscreenWidthBackground",CLOSE_PREVIEW:".tour-element-preview-back",ANIMATION_CONTROL:'[data-hook="animations-control"]',ANIMATION_THUMBNAILS:'[data-hook="animation-thumbnails"]',ANIMATION_THUMBNAILS_EXCLUDE_NO_ANIMATION:'[data-hook="animation-thumbnails"] .c20-graphic-radio:not(:first)',ANIMATION_THUMBNAILS_NO_ANIMATION:'[data-hook="animation-thumbnails"] .c20-graphic-radio:first',SITE_DESIGN_DROPDOWN_MENU:'[data-hook="site-design-dropdown-menu"]',FONT_THUMBNAIL:'[data-hook="font-thumbnail"]',FONT_PANEL:"font-panel .cc-panel-frame",RETURN_BUTTON:'[data-hook="return-button"]',FONT_SIZE_SLIDER:'[data-hook="slider"].font-size-slider-control',CUSTOMIZE_DESIGN_BUTTON:".customize-design-container .customize-design",HEADER_OVERLAY:".header-overlay",FOOTER_OVERLAY:".footer-overlay",SELECTED_PREVIEW_SECTION:".preview-section.selected",SECTION_DESIGN_MENU_HOOK:'[data-hook="section-design-menu"]',MENU_ITEM:".customize-design-container.selected cc-menu-item",BACKGROUND_BUTTON:'[data-hook="background-button"]',COLOR_BUTTON:'[data-hook="color-button"]',FONT_BUTTON:'[data-hook="font-button"]',ANIMATIONS_BUTTON:'[data-hook="animations-button"]',CC_PANEL_FRAME:".cc-panel-frame",BACKGROUND_PREVIEW:'[data-hook="background"]:not(.-selected)',HEADERBG_BUTTON:'[data-hook="headerbg-button"]',LISTBG_BUTTON:'[data-hook="listbg-button"]',COLORATION_MODE_SELECTOR:"coloration-mode-selector",SEGMENT_OVERLAY_CLASS:".segment-overlay",GO_TO_SITE_COLORS:'[data-hook="goto-site-colors"]',GO_TO_SITE_FONTS:'[data-hook="goto-fonts-panel"]',GO_TO_SITE_ANIMATION:'[data-hook="goto-animation-panel"]',GO_TO_SITE_DESIGN:'[data-hook="goto-site-design"]'},h.EVENTS={ACTION_START:"assistant.action.start",ACTION_COMPLETED:"assistant.action.completed",TASK_START:"assistant.task.start",TASK_COMPLETE:"assistant.task.complete",TASK_QUIT:"assistant.task.quit",TASK_SKIP:"assistant.task.skip",TASK_TIMEOUT:"assistant.task.timeout",MANUAL_OR_AUTO_CHOSE_MANUAL:"assistant.action-type.manualauto.manual",MANUAL_OR_AUTO_CHOSE_AUTO:"assistant.action-type.manualauto.auto",KEEP_TRYANOTHER_CHOSE_KEEP:"assistant.action-type.keeptryagain.keep",KEEP_TRYANOTHER_CHOSE_TRYANOTHER:"assistant.action-type.keeptryagain.tryagain",OPEN_MENU:"assistant.menu.open",CLOSE_MENU:"assistant.menu.close",PROGRESS_BAR_ACTION_IN_PROGRESS:"assistant.progress.action-inprogress",PROGRESS_BAR_ACTION_COMPLETED:"assistant.progress.action-completed"},h.TEMPLATES={SINGLE_BUTTON:{tooltip:{buttons:{BUTTON1:{intent:{operation:c.Next}}}}},MANUAL_OR_AUTO:{tooltip:{buttons:{AUTO:{label:"tour.button.auto",intent:{operation:c.Next,enableAutoplay:!0},BI:{event:h.EVENTS.MANUAL_OR_AUTO_CHOSE_AUTO}},MANUAL:{label:"tour.button.manual",intent:{operation:c.Next,disableAutoplay:!0},BI:{event:h.EVENTS.MANUAL_OR_AUTO_CHOSE_MANUAL}}}}},KEEP_OR_ANOTHER:{additionalHighlightedElements:[h.HOOKS.PREVIEW_CONTAINER],disabledElements:[h.HOOKS.INSERT_SECTION_BUTTON,h.HOOKS.OVERLAY_CONTAINER],onEnter:{stopAutoplay:!0},waitForSpinner:!0,exitTriggers:[{element:h.HOOKS.BACKDROP,intent:{operation:c.Complete}}],tooltip:{disabled:!1,buttons:{TRY_ANOTHER:{label:"tour.button.try-another",intent:{operation:c.Goto},BI:{event:h.EVENTS.KEEP_TRYANOTHER_CHOSE_TRYANOTHER}},KEEP_IT:{label:"tour.button.keep-it",intent:{operation:c.Complete},BI:{event:h.EVENTS.KEEP_TRYANOTHER_CHOSE_KEEP}}},closeable:{enabled:!0,intent:{operation:c.Complete}}},preserveBackground:!0,backdrop:h.BACKDROP.INVISIBLE,actionIfAuto:{tooltip:{buttons:{TRY_ANOTHER:{intent:{enableAutoplay:!0}}}}}}},a.AssistantAction=h}(builders||(builders={}));var AssistantTooltip=function(){function a(a,b){this.assistantManager=a,this.assistantUtils=b,this.tooltip=this.action.tooltip||{}}return a.$inject=["assistantManager","assistantUtils"],Object.defineProperty(a.prototype,"title",{get:function(){return this.tooltip.title},enumerable:!0,configurable:!0}),Object.defineProperty(a.prototype,"customStyle",{get:function(){return this.tooltip.customStyle},enumerable:!0,configurable:!0}),Object.defineProperty(a.prototype,"content",{get:function(){return this.tooltip.content},enumerable:!0,configurable:!0}),Object.defineProperty(a.prototype,"buttons",{get:function(){return this.tooltip.buttons},enumerable:!0,configurable:!0}),Object.defineProperty(a.prototype,"orientation",{get:function(){return this.tooltip.orientation},enumerable:!0,configurable:!0}),a.prototype.hasTitle=function(){return!!this.title},a.prototype.hasContent=function(){return!!this.content},a.prototype.hasButtons=function(){return!!this.buttons},a.prototype.isHorizontal=function(){return this.orientation===builders.TooltipOrientation.Horizontal||!this.hasButtons()&&this.orientation!==builders.TooltipOrientation.Vertical},a.prototype.isVertical=function(){return this.orientation===builders.TooltipOrientation.Vertical||this.hasButtons()&&this.orientation!==builders.TooltipOrientation.Horizontal},a.prototype.hasImage=function(){return!!this.tooltip.image},a.prototype.getImageName=function(){return this.tooltip.image},a.prototype.canClose=function(){return this.tooltip.closeable&&this.tooltip.closeable.enabled},a.prototype.closeClicked=function(){this.assistantManager.setIntent(this.tooltip.closeable.intent)},a.prototype.onButtonClick=function(a){a.BI&&a.BI.event&&this.assistantUtils.broadcastAssistantEvent(a.BI.event),this.assistantManager.setIntent(a.intent)},a.prototype.isFullscreen=function(){return this.action.tooltip.customClasses&&this.action.tooltip.customClasses.indexOf("assistant-tooltip-fullscreen")>-1},a}();angular.module("siteGeneratorTourManagerInternal").component("assistantTooltip",{controller:AssistantTooltip,template:'\n                <div class="tour-step" ng-style=":: $ctrl.customStyle" ng-if=":: $ctrl.isHorizontal()">\n                  <div class="circle">\n                    <img relative-src="images/tour/circle.gif"/>\n                  </div>\n                  <div class="tour-step-content" ng-bind-html=":: $ctrl.content | translate"></div>\n                </div>\n\n                <div class="tour-step-with-action" ng-if=":: $ctrl.isVertical()">\n                  <div class="tour-step-image" ng-if=":: $ctrl.hasImage()" style="min-height:168px">\n                    <img relative-src="images/tour/{{$ctrl.getImageName()}}"/>\n                  </div>\n                  <div class="tour-step-close cc-icon-close-10" ng-if=":: $ctrl.canClose()" ng-click="$ctrl.closeClicked()"></div>\n                  <div class="tour-step-title" ng-if=":: $ctrl.hasTitle()" ng-bind-html=":: $ctrl.title | translate">\n                  </div>\n                  <div class="tour-step-content-wrapper">\n                    <div>\n                      <div class="tour-step-content" ng-if=":: $ctrl.hasContent()" ng-bind-html=":: $ctrl.content | translate">\n                      </div>\n                      <div class="tour-step-actions -centered">\n                        <button ng-repeat="(key, button) in $ctrl.buttons" class="tour-button a05-forward-button" ng-click="$ctrl.onButtonClick(button)"><span ng-bind-html="::button.label | translate"> </span></button>\n                      </div>\n                    </div>\n                  </div>\n                </div>\n              ',bindings:{action:"="}}),angular.module("siteGeneratorTourManagerInternal").directive("assistantStopOnEscape",["flags","assistantManager","consumerBiLogger","assistantUtils",function(a,b,c,d){return{link:function(a,c){var d="T",e=27;angular.element(c).keydown(_.debounce(function(a){var c=b.isInActiveTask(),f=(a.which===e||a.keyCode===e)&&b.canStop(),g=(a.metaKey||a.ctrlKey)&&a.shiftKey&&a.altKey&&String.fromCharCode(a.keyCode)===d;c&&(f||g)&&b.stop()},500))}}}]);var AssistantMenu=function(){function a(a,b,c,d,e,f,g){this.$element=a,this.$timeout=b,this.assistantManager=c,this.assistantTaskFetcher=d,this.assistantUtils=e,this.undoRedo=f,this.flags=g,this.tasks=[],this.addTask(d.getTask("previewTask"),builders.AssistantMenuProgress.beginner),this.addTask(d.getTask("entireWebsiteDesignTask"),builders.AssistantMenuProgress.beginner),this.addTask(d.getTask("colorDesignTask"),builders.AssistantMenuProgress.beginner),this.addTask(d.getTask("fontPanelTask"),builders.AssistantMenuProgress.beginner),this.addTask(d.getTask("animationTask"),builders.AssistantMenuProgress.beginner),this.addTask(d.getTask("changeLayoutTask"),builders.AssistantMenuProgress.beginner),this.addTask(d.getTask("customizeSectionDesign"),builders.AssistantMenuProgress.beginner),this.addTask(d.getTask("editContentTask"),builders.AssistantMenuProgress.beginner),this.addTask(d.getTask("addSectionTask"),builders.AssistantMenuProgress.beginner),this.addTask(d.getTask("addPageTask"),builders.AssistantMenuProgress.beginner),this.addTask(d.getTask("publishTask"),builders.AssistantMenuProgress.intermediate),this.addTask(d.getTask("connectDomainTask"),builders.AssistantMenuProgress.intermediate),this.addTask(d.getTask("pageSEOTask"),builders.AssistantMenuProgress.intermediate),this.setMenuProgressByTaskCompletion()}return a.$inject=["$element","$timeout","assistantManager","assistantTaskFetcher","assistantUtils","undoRedo","flags"],a.prototype.setMenuProgressByTaskCompletion=function(){var a=_.findLastIndex(this.tasks,function(a){return a.menuProgress===builders.AssistantMenuProgress.beginner&&a.task.isComplete});this.tasks[a+1].menuProgress===builders.AssistantMenuProgress.intermediate&&this.assistantManager.setMenuProgress(builders.AssistantMenuProgress.intermediate)},a.prototype.startTask=function(a){this.assistantManager.startTask(a)},a.prototype.addTask=function(a,b){this.tasks.push({task:a,menuProgress:b})},a.prototype.closeMenu=function(){this.assistantManager.stop()},a.prototype.isLastActiveTask=function(a,b){return this.findLastActiveTaskIndex()===b},a.prototype.skipTask=function(a,b){var c=this;b.stopPropagation(),this.assistantManager.setTaskComplete(a),this.assistantUtils.broadcastAssistantEvent(builders.AssistantAction.EVENTS.TASK_SKIP);var d=this.tasks.findIndex(function(b){return b.task===a});this.tasks[d+1]&&(this.assistantManager.setMenuProgress(this.tasks[d+1].menuProgress),this.$timeout(function(){return c.scrollToTask(d+1)},0)),this.assistantUtils.saveTaskData(a),this.undoRedo.captureOperation(!1,!0)},a.prototype.getTasks=function(){var a=this;return this.tasks.filter(function(b){return b.menuProgress<=a.assistantManager.getMenuProgress()}).map(function(a){return a.task})},a.prototype.scrollToActive=function(){var a=this,b=_.findLastIndex(this.tasks,function(a){return a.menuProgress===builders.AssistantMenuProgress.beginner&&a.task.isComplete});this.$timeout(function(){return a.scrollToTask(b+1)},0)},a.prototype.findLastActiveTaskIndex=function(){var a=_.filter(this.tasks,function(a){return a.task.isComplete===!0}).length,b=_.findIndex(this.tasks,function(a){return void 0===a.task.isComplete});return a===this.tasks.length?a:b>-1?b:0},a.prototype.scrollToTask=function(a){var b=this.$element.find(".step-manager-tour:eq("+a+")"),c=b.parent(),d=c.height(),e=b.position().top+b.height(),f=e>d;if(f){var g=c.scrollTop()+b.position().top;c.scrollTop(g)}},a}();angular.module("siteGeneratorTourManagerInternal").filter("menuprogress",["assistantManager",function(a){return function(b){return b&&b.filter(function(b){return b.menuProgress<=a.getMenuProgress()})}}]).component("assistantMenu",{controller:AssistantMenu,template:'\n                <div class="tour-step-manager">\n                  <span class="step-manager-close cc-icon-close-12" ng-click="$ctrl.closeMenu()"></span>\n                  <div class="step-manager-header">\n                    <div class="tour-step-title">{{:: \'tour.stepmanager.title\' | translate}}</div>\n                    <div class="tour-step-content">{{:: \'tour.stepmanager.subtitle\' | translate}}</div>\n                  </div>\n                  <div class="step-manager-container">\n                    <div ng-repeat="task in $ctrl.getTasks() track by task.id"\n                        adi-automation="tour-{{:: task.id}}"\n                        ng-init=\'$last && $ctrl.scrollToActive()\'\n                        class="step-manager-tour"\n                        ng-class="{\'step-manager-tour-last-active-tour\': $ctrl.isLastActiveTask(task, $index),\n                                    \'step-manager-tour-active\': task.isComplete}"\n                        ng-click="(task.isComplete || $ctrl.isLastActiveTask(task, $index)) && $ctrl.startTask(task)">\n\n                        <div class="step-manager-circle">\n                          <div class="step-manager-circle-inner"></div>\n                        </div>\n                        <span class="step-manager-tour-label">\n                          {{:: task.label}}\n                        </span>\n                        <span ng-click="$ctrl.skipTask(task, $event)" class="step-manager-tour-skip" ng-show="$ctrl.isLastActiveTask(task, $index)">\n                          {{:: \'tour.stepmanager.skip\' | translate}}\n                        </span>\n                    </div>\n                  </div>\n                </div>\n              '});var AssistantTaskFetcher=function(){function a(a,b,c,d,e,f,g,h,i,j,k,l,m,n,o,p){var q=this;this.assistantUtils=a,this.flags=p,this.tasks={},this.calculatedTasks={},[c,b,d,e,h,j,k,l,m,n,o].forEach(function(a){return q.addTask(a)}),this.addTask(g),this.addTask(f),this.addTask(i)}return a.$inject=["assistantUtils","previewTask","welcomeTask","entireWebsiteDesignTask","colorDesignTask","fontPanelTask","animationTask","changeLayoutTask","customizeSectionDesign","editContentTask","addSectionTask","addPageTask","publishTask","connectDomainTask","pageSEOTask","flags"],a.prototype.addTask=function(a){this.tasks[a.id]=a},a.prototype.applySavedTasks=function(a){angular.merge(this.tasks,a)},a.prototype.getTask=function(a){return this.calculatedTasks[a]||(this.calculatedTasks[a]=this.getTaskByActiveExperiments(this.tasks[a])),this.calculatedTasks[a]},a.prototype.getTaskByActiveExperiments=function(a){if(!a.experiments)return a;var b=this.assistantUtils.getActiveExperiments(),c=Object.keys(a.experiments).filter(function(a){return-1!==b.indexOf(a)}).map(function(b){return a.experiments[b]});return angular.extend.apply(angular,[{},a].concat(c))},a}();angular.module("siteGeneratorTourManagerInternal").service("assistantTaskFetcher",AssistantTaskFetcher),angular.module("siteGeneratorTourManagerInternal").factory("menuTask",function(){return{id:"menuTask",label:"Menu",BI:{description:"momTour"},actions:[(new builders.AssistantAction).thatAttachesTo().dock().and.withTooltip().withTemplate("<assistant-menu></assistant-menu>").and.withBackdrop().thatIsInvisible().and.withBI().withDescription("MOM").and.withCustomConf({exitTriggers:[{element:"$element",trigger:"click",intent:{operation:builders.AssistantOperation.NoOp}},{element:builders.AssistantAction.HOOKS.BACKDROP,trigger:"click",intent:{operation:builders.AssistantOperation.Stop}}]}).build()]}}),angular.module("siteGeneratorTourManagerInternal").factory("welcomeTask",["assistantManager","assistantUIAdapter","assistantUtils","$timeout","storyServices","wixmpServices","silentPageBuilder","$rootScope","flags","undoRedo","autoSaveNotifier",function(a,b,c,d,e,f,g,h,i,j,k){var l=(new builders.AssistantAction).withTooltip().thatOpensFullScreen().withTemplate("<welcome-task-start></welcome-task-start>").and.withBackdrop().thatIsOpaque().and.withTriggers().nextOnBackdropClick().and.withBehaviors().thatStartsAutoplayOnExit().and.withBI().withDescription("Hello. I am ADI, Wixs Artificial Design Intelligence.").and.withCallbacks().onEnter(function(b){a.setDockStatus(builders.AssistantDockStatus.Hidden),a.setTaskComplete(b),i.preferSocialImages&&e.story&&e.story.privateMediaFolderId&&f.getSocialImages(e.story.privateMediaFolderId),i.dontSaveDuringWelcomeTour&&j.onStartWelcomeTour()}).build(),m=(new builders.AssistantAction).thatAttachesTo().dock().and.withBehaviors().thatWaitsForSpinner().thatStopsAutoplayOnEnter().and.withBackdrop().thatIsInvisible().and.withTriggers().completeOnBackdropClick().and.withCallbacks().onEnter(function(){return i.dontSaveDuringWelcomeTour&&j.onEndWelcomeTour(),d(function(){$(".overlay-viewport").animate({scrollTop:0},1e3),a.setDockStatus(builders.AssistantDockStatus.Stopped)},500)}).and.withBI().withDescription("I’ve completed the first version of your homepage.").and.withTooltip().withTemplate('\n        <div class="tour-step-with-action">\n          <div class="tour-step-image" style="min-height:168px">\n            <img relative-src="images/tour/welcome-tour-complete.gif"/>\n          </div>\n          <div class="tour-step-title -centered">\n            {{:: \'tour.welcome2.complete.title\' | translate}}\n          </div>\n          <div class="tour-step-content-wrapper">\n            <div>\n              <div class="tour-step-content -centered" style="margin-bottom: 0;" ng-bind-html=":: \'tour.welcome2.complete.content\' | translate">\n              </div>\n          </div>\n        </div>\n      ').and.withConditionalConf().experimentIsEnabled("dontOpenMenuAfterWelcomeTour",(new builders.AssistantAction).withTriggers().forceStopOnElementClick().and.withCallbacks().onEnter(function(){return d(function(){$(".overlay-viewport").animate({scrollTop:0},1e3),a.setDockStatus(builders.AssistantDockStatus.Playing)},500)}).and.withTooltip().withTemplate('\n                <div class="tour-step-with-action">\n                  <div class="tour-step-image" style="min-height:168px">\n                    <img relative-src="images/tour/welcome-tour-complete.gif"/>\n                  </div>\n                  <div class="tour-step-title -centered">\n                    {{:: \'tour.welcome2.complete2.title\' | translate}}\n                  </div>\n                  <div class="tour-step-content-wrapper">\n                    <div>\n                      <div class="tour-step-content -centered" style="margin-bottom: 0;" ng-bind-html=":: \'tour.welcome2.complete2.content\' | translate">\n                      </div>\n                      <div class="tour-step-actions -centered" style="margin-top: 20px">\n                        <button class="tour-button a05-forward-button" ng-click="assistantManager.forceStop()"><span ng-bind-html=":: \'general.got-it\' | translate"> </span></button>\n                      </div>\n                  </div>\n                </div>\n              ').build()).build(),n=(new builders.AssistantAction).withBI().withDescription("Silent home page construction.").and.withBehaviors().thatWaitsForSpinner().and.withBackdrop().thatIsOpaque().and.withCallbacks().onEnter(function(b){g.constructAnyHomePage().then(function(){a.setTaskComplete(b)})}).build(),o={id:"welcomeTask",label:"Welcome Test",BI:{description:BIOrigins.WelcomeTour},isUnstoppable:!0,onExit:{callback:function(){c.triggerElement(builders.AssistantAction.HOOKS.ADD_TAB,"mouseleave"),k.startCountingAutosaves()}},actions:[l,n,m]};return o}]),angular.module("siteGeneratorTourManagerInternal").factory("previewTask",function(){return{id:"previewTask",label:"Preview Your Site",BI:{description:"previewTask"},actions:[(new builders.AssistantAction).thatAttachesTo().hook(builders.AssistantAction.HOOKS.PREVIEW_TAB).and.withTooltip().withContent("tour.preview.step0").thatOpensDown().and.withTriggers().nextOnElementClick().and.withBackdrop().thatIsOn().and.withBI().withDescription("Preview mode shows your website exactly as visitors will see it. Click Preview.").build(),(new builders.AssistantAction).thatAttachesTo().hook(builders.AssistantAction.HOOKS.EXIT_PREVIEW_BUTTON).and.withTooltip().withContent("tour.preview.step1").thatOpensLeft().and.withBackdrop().thatIsOff().and.withTriggers().completeOnElementClick().and.withBehaviors().thatWaitsForSpinner().and.withBI().withDescription("When you're done previewing, click here.").build()]}}),angular.module("siteGeneratorTourManagerInternal").factory("animationTask",["applicationState","previewScale","assistantManager","assistantUtils","flags",function(a,b,c,d,e){var f=(new builders.AssistantAction).thatAttachesTo().hook(builders.AssistantAction.HOOKS.DESIGN_TAB).and.withTooltip().withContent("tour.animation.step0b").thatOpensDown().and.withBackdrop().thatIsOn().and.withTriggers().nextOnElementClick().and.withCallbacks().onExit(function(){return d.openSiteDesignTopBarMenu()}).and.withBehaviors().thatStartsAutoplayOnEnter().thatStopsAutoplayOnExit().withAutoplayTimeoutOf(800).thatHasHint().and.withBI().withDescription("Opening Design Menu").build(),g=(new builders.AssistantAction).thatAttachesTo().hook(builders.AssistantAction.HOOKS.DESIGN_MENU_ANIMATIONS_OPTION).and.withTooltip().withContent("tour.animation.step1b").thatOpensRight().and.withBackdrop().thatIsOn().and.withTriggers().nextOnElementClick().and.withCallbacks().onExit(function(){return d.closeSiteDesignTopBarMenu()}).and.withCustomStage().withDisabledElements(builders.AssistantAction.HOOKS.DESIGN_MENU_THEMES_OPTION).withDisabledElements(builders.AssistantAction.HOOKS.DESIGN_MENU_FONTS_OPTION).withDisabledElements(builders.AssistantAction.HOOKS.DESIGN_MENU_COLORS_OPTION).and.withBI().withDescription("Click Animation").build(),h=(new builders.AssistantAction).thatAttachesTo().hook(builders.AssistantAction.HOOKS.ANIMATION_THUMBNAILS).and.withTooltip().withContent("tour.animation.step2-2").thatOpensRight().and.withBehaviors().thatRedirectsTo(config.STATES.BUILDER_DESIGN_KIT_ANIMATIONS).and.withBackdrop().thatIsOn().and.withCallbacks().onEnter(function(){return c.setDockStatus(builders.AssistantDockStatus.Playing)}).and.withTriggers().nextOnElementClick(builders.AssistantAction.HOOKS.ANIMATION_THUMBNAILS_EXCLUDE_NO_ANIMATION).goToOnElementClick(builders.AssistantAction.HOOKS.ANIMATION_THUMBNAILS_NO_ANIMATION,5).and.withBI().withDescription("Choose an animation style").build(),i=(new builders.AssistantAction).thatAttachesTo().hook(builders.AssistantAction.HOOKS.PREVIEW_TAB).and.withTooltip().withContent("tour.animation.step3").thatOpensDown().and.withBackdrop().thatIsOn().and.withTriggers().nextOnElementClick().and.withBehaviors().thatWaitsForSpinner().and.withBI().withDescription("Preview your animation to see if you like it").build(),j=(new builders.AssistantAction).thatIsBasedOnTemplate().keepOrAnother(2).and.withTooltip().withContent("tour.animation.step4").thatOpensLeft().and.thatAttachesTo().hook(builders.AssistantAction.HOOKS.EXIT_PREVIEW_BUTTON).and.withBackdrop().thatIsOff().and.withTriggers().completeOnElementClick(builders.AssistantAction.HOOKS.CLOSE_PREVIEW).and.withCallbacks().onExit(function(){return a.goToBuilder()}).and.withBI().withDescription("Like this animation? Scroll your site to see more.").build(),k=(new builders.AssistantAction).thatAttachesTo().hook(builders.AssistantAction.HOOKS.PREVIEW_TAB).and.withTooltip().withContent("tour.animation.step3").thatOpensDown().and.withBackdrop().thatIsOn().and.withTriggers().goToOnElementClick(builders.AssistantAction.HOOKS.PREVIEW_TAB,6).and.withBehaviors().thatWaitsForSpinner().and.withBI().withDescription("Preview your animation to see if you like it").build(),l=(new builders.AssistantAction).thatIsBasedOnTemplate().keepOrAnother(2).and.thatAttachesTo().hook(builders.AssistantAction.HOOKS.EXIT_PREVIEW_BUTTON).and.withTooltip().withContent("tour.animation.step5").thatOpensLeft().and.withBackdrop().thatIsOff().and.withTriggers().completeOnElementClick(builders.AssistantAction.HOOKS.CLOSE_PREVIEW).and.withCallbacks().onExit(function(){return a.goToBuilder()}).and.withBI().withDescription("Here is your site without animation. Do you want to try another or keep it?").build();return{id:"animationTask",label:"Change Website Animation",BI:{description:"animationTour"},onExit:{callback:function(){d.triggerElement(builders.AssistantAction.HOOKS.DESIGN_TAB,"mouseleave"),b.setScaleFactor(PreviewScale.MaxScaleFactor)}},actions:[f,g,h,i,j,k,l]}}]),angular.module("siteGeneratorTourManagerInternal").factory("entireWebsiteDesignTask",["assistantManager","assistantUtils","applicationState",function(a,b,c){var d=(new builders.AssistantAction).thatIsBasedOnTemplate().manualOrAuto().and.thatAttachesTo().dock().and.withBackdrop().thatIsInvisible().and.withTooltip().withContent("tour.entire-website-design.manual-or-auto").and.withBehaviors().thatRedirectsTo(config.STATES.BUILDER_STORY).and.withBI().withDescription("You've chosen to change the design of your website. I can choose a new design for you or show").build(),e=(new builders.AssistantAction).thatAttachesTo().hook(builders.AssistantAction.HOOKS.DESIGN_TAB).and.withTooltip().withContent("tour.entire-website-design.auto.step0b").thatOpensDown().and.withBackdrop().thatIsOn().and.withTriggers().nextOnElementClick().and.withCallbacks().onExit(function(){
return b.openSiteDesignTopBarMenu()}).and.withBehaviors().thatStartsAutoplayOnEnter().withAutoplayTimeoutOf(800).thatHasHint().and.withBI().withDescription("Opening Design Menu").and.withConditionalConf().isInManualMode((new builders.AssistantAction).withBehaviors().thatStopsAutoplayOnExit().build()).build(),f=(new builders.AssistantAction).thatAttachesTo().hook(builders.AssistantAction.HOOKS.DESIGN_MENU_THEMES_OPTION).and.withTooltip().thatOpensRight().and.withBackdrop().thatIsOn().and.withTriggers().nextOnElementClick().and.withCallbacks().onExit(function(){return b.closeSiteDesignTopBarMenu()}).and.withCustomStage().withDisabledElements(builders.AssistantAction.HOOKS.DESIGN_MENU_COLORS_OPTION).withDisabledElements(builders.AssistantAction.HOOKS.DESIGN_MENU_FONTS_OPTION).withDisabledElements(builders.AssistantAction.HOOKS.DESIGN_MENU_ANIMATIONS_OPTION).and.withBehaviors().withAutoplayTimeoutOf(800).and.withConditionalConf().isInAutoplayMode((new builders.AssistantAction).withBehaviors().thatHasHint().and.withTooltip().withContent("tour.entire-website-design.auto.step0c").and.withBI().withDescription("Opening Themes Menu").build()).isInManualMode((new builders.AssistantAction).withTooltip().withContent("tour.entire-website-design.manual.step0c").and.withBI().withDescription("Click Themes").build()).build(),g=(new builders.AssistantAction).withCustomStage().withDisabledElements(builders.AssistantAction.HOOKS.SELECTED_KIT_OPTION).and.withTooltip().thatOpensRight().and.withConditionalConf().isInAutoplayMode((new builders.AssistantAction).withTooltip().withContent("tour.entire-website-design.auto.step1").and.thatAttachesTo().hook(builders.AssistantAction.HOOKS.KIT_OPTION).onlyUnselectedElements().randomElement().and.withBehaviors().thatHasHint().thatDelays(1e3).and.withTriggers().nextOnElementClick().and.withBI().withDescription("Choosing Design theme").build()).isInManualMode((new builders.AssistantAction).withBackdrop().thatIsOn().and.withTooltip().withContent("tour.entire-website-design.manual.step1").and.thatAttachesTo().hook(builders.AssistantAction.HOOKS.DESIGN_PANEL).and.withTriggers().nextOnElementClick(builders.AssistantAction.HOOKS.KIT_OPTION).completeOnElementClick(builders.AssistantAction.HOOKS.PANEL_CLOSE_BUTTON).and.withBI().withDescription("Choose a Design theme").build()).build(),h=(new builders.AssistantAction).thatAttachesTo().dock().and.thatIsBasedOnTemplate().keepOrAnother(1).and.withBehaviors().thatRedirectsTo(config.STATES.BUILDER_STORY).and.withBackdrop().thatIsInvisible().and.withTooltip().withContent("tour.entire-website-design.step2").and.withBI().withDescription("What do you think of this design?").and.withConditionalConf().experimentIsEnabled("tourEnhancedKeepOrAnother",(new builders.AssistantAction).withBehaviors().thatRedirectsTo().and.thatIsBasedOnTemplate().keepOrAnother(3).and.withBackdrop().thatIsOff().and.withTriggers().completeOnElementClick(builders.AssistantAction.HOOKS.PREVIEW_CONTENT).goToOnElementClick(builders.AssistantAction.HOOKS.PREVIEW_PADDING,3).and.withCustomStage().withDisabledElements(builders.AssistantAction.HOOKS.TOP_BAR).build()).build();return{id:"entireWebsiteDesignTask",label:"Change Website Design",BI:{description:"entireWebsiteDesignTour"},onEnter:{callback:function(){a.setCustomTaskData("scrollToSelectedKit",!0)}},onExit:{callback:function(){b.triggerElement(builders.AssistantAction.HOOKS.DESIGN_TAB,"mouseleave"),c.goToBuilder()}},actions:[d,e,f,g,h]}}]),angular.module("siteGeneratorTourManagerInternal").factory("colorDesignTask",["applicationState","previewScale","assistantUtils",function(a,b,c){var d=(new builders.AssistantAction).thatAttachesTo().hook(builders.AssistantAction.HOOKS.DESIGN_TAB).and.withTooltip().withContent("tour.coloration.step0b").thatOpensDown().and.withBackdrop().thatIsOn().and.withTriggers().nextOnElementClick().and.withCallbacks().onExit(function(){return c.openSiteDesignTopBarMenu()}).and.withBehaviors().thatStartsAutoplayOnEnter().thatStopsAutoplayOnExit().withAutoplayTimeoutOf(800).thatHasHint().and.withBI().withDescription("Opening Design Menu").build(),e=(new builders.AssistantAction).thatAttachesTo().hook(builders.AssistantAction.HOOKS.DESIGN_MENU_COLORS_OPTION).and.withTooltip().withContent("tour.coloration.step0c").thatOpensRight().and.withBackdrop().thatIsOn().and.withTriggers().nextOnElementClick().and.withCallbacks().onExit(function(){return c.closeSiteDesignTopBarMenu()}).and.withCustomStage().withDisabledElements(builders.AssistantAction.HOOKS.DESIGN_MENU_THEMES_OPTION).withDisabledElements(builders.AssistantAction.HOOKS.DESIGN_MENU_FONTS_OPTION).withDisabledElements(builders.AssistantAction.HOOKS.DESIGN_MENU_ANIMATIONS_OPTION).and.withBI().withDescription("Click Colors").build(),f=(new builders.AssistantAction).thatIsBasedOnTemplate().singleButtonTooltip("tour.button.gotit").and.withTooltip().withContent("tour.coloration.step3").thatOpensRight().and.thatAttachesTo().hook(builders.AssistantAction.HOOKS.LEFT_PANEL).and.withBackdrop().thatIsOn().and.withTriggers().nextOnBackdropClick().nextOnElementClick(builders.AssistantAction.HOOKS.LEFT_PANEL).and.withCustomStage().withDisabledElements(builders.AssistantAction.HOOKS.LEFT_PANEL).and.withCallbacks().onEnter(function(){a.clearContentFocus(),b.setScaleFactor(PreviewScale.MinScaleFactor)}).and.withBI().withDescription("here is your recommended main color and palettes").build(),g=(new builders.AssistantAction).thatAttachesTo().hook(builders.AssistantAction.HOOKS.LEFT_PANEL).and.withTooltip().withContent("tour.coloration.step4").thatOpensRight().and.withBackdrop().thatIsOn().and.withCustomStage().withDisabledElements(builders.AssistantAction.HOOKS.ADVANCED_EDITING_NEW_COLORATION).withDisabledElements(builders.AssistantAction.HOOKS.PANEL_BACK_BUTTON).and.withTriggers().nextOnElementClick(builders.AssistantAction.HOOKS.LEFT_PANEL,builders.AssistantAction.HOOKS.KIT_PALETTE_NEW_COLORATION).nextOnElementClick(builders.AssistantAction.HOOKS.BODY,builders.AssistantAction.HOOKS.MAIN_COLOR_DIALOG_COLOR_TAG).nextOnElementClick(builders.AssistantAction.HOOKS.BODY,builders.AssistantAction.HOOKS.MAIN_COLOR_DIALOG_CONFIRM_BUTTON_NEW_COLORATION).completeOnElementClick(builders.AssistantAction.HOOKS.PANEL_CLOSE_BUTTON).and.withBI().withDescription("pick a palette or change the main color").build(),h=(new builders.AssistantAction).thatIsBasedOnTemplate().keepOrAnother(3).and.withTooltip().withContent("tour.coloration.step5").and.thatAttachesTo().dock().and.withTriggers().goToOnElementClick(builders.AssistantAction.HOOKS.PREVIEW_PADDING,3).completeOnElementClick(builders.AssistantAction.HOOKS.PREVIEW_CONTENT).and.withBackdrop().thatIsOff().and.withCustomStage().withDisabledElements(builders.AssistantAction.HOOKS.TOP_BAR).withDisabledElements(builders.AssistantAction.HOOKS.ADVANCED_EDITING_NEW_COLORATION).and.withBI().withDescription("What do you think of the new set of colors?").and.withCustomConf({tooltip:{disabled:!1,buttons:{TRY_ANOTHER:{label:"tour.coloration.try-another",intent:{operation:builders.AssistantOperation.Goto},BI:{event:builders.AssistantAction.EVENTS.KEEP_TRYANOTHER_CHOSE_TRYANOTHER}},KEEP_IT:{label:"tour.coloration.keep-it",intent:{operation:builders.AssistantOperation.Complete},BI:{event:builders.AssistantAction.EVENTS.KEEP_TRYANOTHER_CHOSE_KEEP}}}}}).build();return{id:"colorDesignTask",label:"Change Website Colors",BI:{description:"colorDesignTour"},onExit:{callback:function(){c.triggerElement(builders.AssistantAction.HOOKS.DESIGN_TAB,"mouseleave"),b.setScaleFactor(PreviewScale.MaxScaleFactor),a.goToBuilder()}},actions:[d,e,f,g,h]}}]),angular.module("siteGeneratorTourManagerInternal").factory("fontPanelTask",["assistantManager","assistantUtils","applicationState",function(a,b,c){var d=(new builders.AssistantAction).thatIsBasedOnTemplate().manualOrAuto().and.thatAttachesTo().dock().and.withBackdrop().thatIsInvisible().and.withTooltip().withContent("tour.fonts.new-font.manual-or-auto").and.withBehaviors().thatRedirectsTo(config.STATES.BUILDER_STORY).and.withBI().withDescription("Let's switch up your website's fonts.").build(),e=(new builders.AssistantAction).thatAttachesTo().hook(builders.AssistantAction.HOOKS.DESIGN_TAB).and.withTooltip().thatOpensDown().and.withBackdrop().thatIsOn().and.withTriggers().nextOnElementClick().and.withCallbacks().onExit(function(){return b.openSiteDesignTopBarMenu()}).and.withBehaviors().withAutoplayTimeoutOf(1500).and.withBI().withDescription("Opening Design Menu").and.withConditionalConf().isInAutoplayMode((new builders.AssistantAction).withBehaviors().thatHasHint().and.withTooltip().withContent("tour.fonts.auto.step0").build()).isInManualMode((new builders.AssistantAction).withBehaviors().thatStopsAutoplayOnExit().and.withTooltip().withContent("tour.fonts.manual.step0").build()).build(),f=(new builders.AssistantAction).thatAttachesTo().hook(builders.AssistantAction.HOOKS.DESIGN_MENU_FONTS_OPTION).and.withTooltip().thatOpensRight().and.withBackdrop().thatIsOn().and.withCallbacks().onExit(function(){return b.closeSiteDesignTopBarMenu()}).and.withCustomStage().withAdditionalHighlight(builders.AssistantAction.HOOKS.SITE_DESIGN_DROPDOWN_MENU).withDisabledElements(builders.AssistantAction.HOOKS.DESIGN_MENU_THEMES_OPTION).withDisabledElements(builders.AssistantAction.HOOKS.DESIGN_MENU_COLORS_OPTION).withDisabledElements(builders.AssistantAction.HOOKS.DESIGN_MENU_ANIMATIONS_OPTION).and.withBehaviors().withAutoplayTimeoutOf(800).and.withConditionalConf().isInAutoplayMode((new builders.AssistantAction).withTriggers().nextOnElementClick().and.withTooltip().withContent("tour.fonts.auto.step1b").and.withBehaviors().thatHasHint().and.withBackdrop().thatIsInvisible().and.withBI().withDescription("Opening Fonts Menu").build()).isInManualMode((new builders.AssistantAction).withTriggers().goToOnElementClick(builders.AssistantAction.HOOKS.DESIGN_MENU_FONTS_OPTION,3).and.withTooltip().withContent("tour.fonts.manual.step1b").and.withBI().withDescription("Click Fonts").build()).build(),g=(new builders.AssistantAction).withTooltip().thatOpensRight().and.withConditionalConf().isInAutoplayMode((new builders.AssistantAction).thatAttachesTo().hook(builders.AssistantAction.HOOKS.FONT_THUMBNAIL).onlyUnselectedElements().randomElement().and.withTooltip().withContent("tour.fonts.auto.step3").and.withBackdrop().thatIsOn().and.withCustomStage().withAdditionalHighlight(builders.AssistantAction.HOOKS.FONT_PANEL).withDisabledElements(builders.AssistantAction.HOOKS.RETURN_BUTTON).and.withBehaviors().thatHasHint().thatRedirectsTo(config.STATES.BUILDER_DESIGN_KIT_FONTS_NEW).thatDelays(1e3).withAutoplayTimeoutOf(1500).and.withTriggers().nextOnElementClick().and.withBI().withDescription("Choosing Font Set").build()).isInManualMode((new builders.AssistantAction).thatAttachesTo().hook(builders.AssistantAction.HOOKS.FONT_PANEL).and.withTooltip().withContent("tour.newFonts.manual.step3").and.withBackdrop().thatIsOn().and.withBehaviors().thatRedirectsTo(config.STATES.BUILDER_DESIGN_KIT_FONTS_NEW).and.withTriggers().nextOnElementClick(builders.AssistantAction.HOOKS.FONT_THUMBNAIL).completeOnElementClick(builders.AssistantAction.HOOKS.PANEL_CLOSE_BUTTON).and.withCallbacks().onEnter(function(){return b.goToOnSliderHandled(5)}).and.withCustomStage().withDisabledElements(builders.AssistantAction.HOOKS.RETURN_BUTTON).and.withBI().withDescription("Choose a Font Set").build()).build(),h=(new builders.AssistantAction).thatIsBasedOnTemplate().keepOrAnother(3).and.withTooltip().withContent("tour.fonts.manual.font-set.step4").and.thatAttachesTo().dock().and.withTriggers().completeOnBackdropClick().completeOnElementClick(builders.AssistantAction.HOOKS.PANEL_CLOSE_BUTTON).and.withBI().withDescription("What do you think of this font set?").and.withCustomStage().withDisabledElements(builders.AssistantAction.HOOKS.TOP_BAR).withDisabledElements(builders.AssistantAction.HOOKS.RETURN_BUTTON).and.withCustomConf({additionalHighlightedElements:[builders.AssistantAction.HOOKS.LEFT_PANEL]}).build(),i=(new builders.AssistantAction).thatIsBasedOnTemplate().keepOrAnother(3).and.withTooltip().withContent("tour.fonts.manual.font-size.step4").and.thatAttachesTo().dock().and.withTriggers().completeOnBackdropClick().completeOnElementClick(builders.AssistantAction.HOOKS.PANEL_CLOSE_BUTTON).and.withBI().withDescription("What do you think of this font size?").and.withCustomStage().withDisabledElements(builders.AssistantAction.HOOKS.TOP_BAR).withDisabledElements(builders.AssistantAction.HOOKS.RETURN_BUTTON).and.withCustomConf({additionalHighlightedElements:[builders.AssistantAction.HOOKS.LEFT_PANEL]}).withConditionalConf().isInAutoplayMode((new builders.AssistantAction).withBehaviors().thatStartsAutoplayOnExit().build()).build();return{id:"fontPanelTask",label:"Change Website Fonts",BI:{description:"fontPanelTour"},onExit:{callback:function(){b.triggerElement(builders.AssistantAction.HOOKS.DESIGN_TAB,"mouseleave"),c.goToBuilder()}},actions:[d,e,f,g,h,i]}}]),angular.module("siteGeneratorTourManagerInternal").factory("editContentTask",["assistantManager","assistantUtils","applicationState","flags","previewScale",function(a,b,c,d,e){var f=(new builders.AssistantAction).thatAttachesTo().dock().and.withTooltip().withContent("tour.edit-content.step2").and.withCustomStage().withAdditionalHighlight(builders.AssistantAction.HOOKS.PREVIEW_CONTAINER).withDisabledElements(builders.AssistantAction.HOOKS.INSERT_SECTION_BUTTON).and.withTriggers().nextOnElementClick(builders.AssistantAction.HOOKS.OVERLAY_CONTAINER,builders.AssistantAction.HOOKS.OVERLAY_SECTION_NOT_TPA).and.withBackdrop().thatIsOn().and.withBehaviors().thatRedirectsTo(config.STATES.BUILDER_STORY).and.withCallbacks().onEnter(function(){c.clearContentFocus(),e.setScaleFactor(PreviewScale.MinScaleFactor)}).and.withBI().withDescription("Select a section to edit its content").build(),g=(new builders.AssistantAction).thatIsBasedOnTemplate().singleButtonTooltip("tour.button.gotit").and.thatAttachesTo().hook(builders.AssistantAction.HOOKS.NODE_EDITOR).and.withTooltip().withContent("tour.edit-content.step4").thatOpensRight().and.withTriggers().nextOnElementClick().completeOnElementClick(builders.AssistantAction.HOOKS.PANEL_CLOSE_BUTTON).and.withBackdrop().thatIsOn().and.withBI().withDescription("Edit your content here and I'll update the changes in your website. You can hide or show text with one click.").build(),h=(new builders.AssistantAction).thatAttachesTo().dock().and.withTooltip().withContent("tour.edit-content.step5").and.withBackdrop().thatIsOff().and.withTriggers().completeOnElementClick(builders.AssistantAction.HOOKS.PREVIEW_CONTENT).and.withCustomStage().withDisabledElements(builders.AssistantAction.HOOKS.TOP_BAR).and.withBI().withDescription("When you're done editing, click below").build();return{id:"editContentTask",label:"Edit Section Content",BI:{description:"editContentTour"},onEnter:{callback:function(){b.hideListSpanButtons()}},onExit:{callback:function(){b.showListSpanButtons(),c.clearContentFocus(),e.setScaleFactor(PreviewScale.MaxScaleFactor)}},actions:[f,g,h]}}]),angular.module("siteGeneratorTourManagerInternal").factory("changeLayoutTask",["assistantManager","assistantUtils","applicationState","flags","previewScale",function(a,b,c,d,e){function f(){a.setCustomTaskData("goToBuilderWhenTourCompleted",!1)}var g=(new builders.AssistantAction).thatIsBasedOnTemplate().manualOrAuto().and.thatAttachesTo().dock().and.withTooltip().withContent("tour.change-layout.manual-or-auto").and.withBackdrop().thatIsInvisible().and.withBehaviors().thatRedirectsTo(config.STATES.BUILDER_STORY).and.withBI().withDescription("I'll change the layout of one of your sections").build(),h=(new builders.AssistantAction).thatAttachesTo().dock().and.withCustomStage().withAdditionalHighlight(builders.AssistantAction.HOOKS.PREVIEW_CONTAINER).and.withTriggers().nextOnElementClick(builders.AssistantAction.HOOKS.OVERLAY_CONTAINER,builders.AssistantAction.HOOKS.OVERLAY_SECTION_NOT_TPA).and.withBackdrop().thatIsOn().and.withBehaviors().thatStopsAutoplayOnEnter().and.withCallbacks().onEnter(function(){b.hideListSpanButtons(),c.clearContentFocus(),e.setScaleFactor(PreviewScale.MinScaleFactor)}).onExit(function(){return b.showListSpanButtons()}).and.withConditionalConf().isInAutoplayMode((new builders.AssistantAction).withTooltip().withContent("tour.change-layout.auto.step0").and.withBehaviors().thatStartsAutoplayOnExit().and.withBI().withDescription("Pick the section you want to change and I'll choose a new layout.").build()).isInManualMode((new builders.AssistantAction).withTooltip().withContent("tour.change-layout.manual.step2").and.withBI().withDescription("Pick the section you want to change and I'll show you new layout options.").build()).build(),i=(new builders.AssistantAction).thatAttachesTo().dock().and.withCustomStage().withAdditionalHighlight(builders.AssistantAction.HOOKS.PREVIEW_CONTAINER).and.withTriggers().nextOnElementClick(builders.AssistantAction.HOOKS.OVERLAY_CONTAINER,builders.AssistantAction.HOOKS.OVERLAY_SECTION_WITH_PRESETS).and.withBackdrop().thatIsOn().and.withBehaviors().thatStopsAutoplayOnEnter().and.withCallbacks().onEnter(function(){b.hideListSpanButtons(),c.clearContentFocus(),e.setScaleFactor(PreviewScale.MinScaleFactor)}).onExit(function(){return b.showListSpanButtons()}).and.withConditionalConf().isInAutoplayMode((new builders.AssistantAction).withTooltip().withContent("tour.change-layout.auto.step0").and.withBehaviors().thatStartsAutoplayOnExit().and.withBI().withDescription("Pick the section you want to change and I'll choose a new layout.").build()).isInManualMode((new builders.AssistantAction).withTooltip().withContent("tour.change-layout.manual.step2").and.withBI().withDescription("Pick the section you want to change and I'll show you new layout options.").build()).build(),j=(new builders.AssistantAction).thatAttachesTo().hook(builders.AssistantAction.HOOKS.OVERLAY_SWITCH_LAYOUT_BUTTON).and.withTooltip().thatOpensLeft().and.withTriggers().nextOnElementClick().and.withBackdrop().thatIsOn().and.withConditionalConf().isInAutoplayMode((new builders.AssistantAction).withBehaviors().withAutoplayTimeoutOf(3e3).thatHasHint().and.withTooltip().withContent("tour.change-layout.auto.step1").and.withBI().withDescription("Entering layout options").build()).isInManualMode((new builders.AssistantAction).withTooltip().withContent("tour.change-layout.manual.step3").thatOpensRight().and.withBI().withDescription("Click here to enter layout options").build()).build(),k=(new builders.AssistantAction).withBackdrop().thatIsInvisible().and.withTooltip().thatOpensRight().and.withConditionalConf().isInAutoplayMode((new builders.AssistantAction).thatAttachesTo().hook(builders.AssistantAction.HOOKS.PREVIEW_SECTION).onlyUnselectedElements().randomElement().and.withBehaviors().withAutoplayTimeoutOf(3e3).thatHasHint().and.withTriggers().nextOnElementClick(builders.AssistantAction.HOOKS.$element,builders.AssistantAction.HOOKS.PREVIEW_OVERLAY).and.withTooltip().withContent("tour.change-layout.auto.step2").and.withBI().withDescription("Choosing a new section layout").build()).isInManualMode((new builders.AssistantAction).thatAttachesTo().hook(builders.AssistantAction.HOOKS.LEFT_PANEL).and.withTooltip().withContent("tour.change-layout.manual.step4").and.withTriggers().nextOnElementClick(builders.AssistantAction.HOOKS.BODY,builders.AssistantAction.unselected(builders.AssistantAction.HOOKS.PREVIEW_SECTION)+" "+builders.AssistantAction.HOOKS.PREVIEW_OVERLAY).completeOnElementClick(builders.AssistantAction.HOOKS.PANEL_CLOSE_BUTTON).completeOnElementClick(builders.AssistantAction.HOOKS.GO_TO_SITE_DESIGN,"",!0,f).and.withCustomStage().withDisabledElements(builders.AssistantAction.HOOKS.CUSTOMIZE_DESIGN_BUTTON).and.withBI().withDescription("Select a layout you love").build()).build(),l=(new builders.AssistantAction).thatIsBasedOnTemplate().keepOrAnother(1).and.withTooltip().withContent("tour.change-layout.auto.step3").and.withBehaviors().thatRedirectsTo(config.STATES.BUILDER_STORY).and.thatAttachesTo().dock().and.withBackdrop().thatIsInvisible().and.withCallbacks().onEnter(function(){return b.hideListSpanButtons()}).onExit(function(){return b.showListSpanButtons()}).and.withCustomStage().withDisabledElements(builders.AssistantAction.HOOKS.OVERLAY_SECTION_EDIT_BUTTON).withDisabledElements(builders.AssistantAction.HOOKS.OVERLAY_SWITCH_LAYOUT_BUTTON).withDisabledElements(builders.AssistantAction.HOOKS.OVERLAY_MORE_ACTIONS_BUTTON).withDisabledElements(builders.AssistantAction.HOOKS.OVERLAY_DRAG_HANDLE).and.withBI().withDescription("What do you think of this section's new layout?").and.withConditionalConf().experimentIsEnabled("tourEnhancedKeepOrAnother",(new builders.AssistantAction).thatIsBasedOnTemplate().keepOrAnother(3).and.withBehaviors().thatRedirectsTo(null).and.withBackdrop().thatIsOff().and.withTriggers().completeOnElementClick(builders.AssistantAction.HOOKS.PREVIEW_CONTENT).goToOnElementClick(builders.AssistantAction.HOOKS.PREVIEW_PADDING,3).and.withCustomStage().withDisabledElements(builders.AssistantAction.HOOKS.TOP_BAR).build()).build();return{id:"changeLayoutTask",label:"Change Section Design",BI:{description:"changeLayoutTour"},onEnter:{callback:function(){a.setCustomTaskData("goToBuilderWhenTourCompleted",!0)}},onExit:{callback:function(){c.clearContentFocus(),a.getCustomTaskData("goToBuilderWhenTourCompleted")===!0&&c.goToBuilder(),e.setScaleFactor(PreviewScale.MaxScaleFactor)}},actions:[g,h,j,k,l],experiments:{enableChangeLayoutTourForTPAs:{actions:[g,i,j,k,l]}}}}]),angular.module("siteGeneratorTourManagerInternal").factory("customizeSectionDesign",["assistantManager","assistantUtils","applicationState","flags","previewScale",function(a,b,c,d,e){function f(){a.setCustomTaskData("goToBuilderWhenTourCompleted",!1)}var g=(new builders.AssistantAction).withBehaviors().thatRedirectsTo(config.STATES.BUILDER_STORY).thatStopsAutoplayOnEnter().thatDelays(200).and.thatAttachesTo().dock().and.withCustomStage().withAdditionalHighlight(builders.AssistantAction.HOOKS.PREVIEW_CONTAINER).withDisabledElements(builders.AssistantAction.HOOKS.HEADER_OVERLAY).withDisabledElements(builders.AssistantAction.HOOKS.FOOTER_OVERLAY).and.withTriggers().nextOnElementClick(builders.AssistantAction.HOOKS.OVERLAY_CONTAINER,builders.AssistantAction.HOOKS.OVERLAY_SECTION_NOT_TPA).and.withBackdrop().thatIsOn().and.withTooltip().withContent("tour.customize-section-design.step0").and.withBI().withDescription("Pick the section you want to change and I'll show you new layout options.").and.withCallbacks().onEnter(function(){c.clearContentFocus(),e.setScaleFactor(PreviewScale.MinScaleFactor)}).build(),h=(new builders.AssistantAction).thatAttachesTo().hook(builders.AssistantAction.HOOKS.OVERLAY_SWITCH_LAYOUT_BUTTON).and.withTriggers().nextOnElementClick().and.withBackdrop().thatIsOn().and.withTooltip().withContent("tour.customize-section-design.step1").thatOpensRight().and.withBI().withDescription("Click here to enter design options").and.withCallbacks().onEnter(function(){b.showListSpanButtons()}).onExit(function(){return b.hideListSpanButtons()}).build(),i=(new builders.AssistantAction).withBackdrop().thatIsOn().and.thatAttachesTo().hook(builders.AssistantAction.HOOKS.CUSTOMIZE_DESIGN_BUTTON).and.withCustomStage().withAdditionalHighlight(builders.AssistantAction.HOOKS.SELECTED_PREVIEW_SECTION).withDisabledElements(builders.AssistantAction.HOOKS.RETURN_BUTTON).and.withTriggers().nextOnElementClick().completeOnElementClick(builders.AssistantAction.HOOKS.PANEL_CLOSE_BUTTON).and.withCallbacks().onEnter(function(){return b.hideSectionDesignMenu()}).onExit(function(){return b.showSectionDesignMenu()}).and.withTooltip().withContent("tour.customize-section-design.step2").thatOpensRight().and.withBI().withDescription("Click customize design").build(),j=(new builders.AssistantAction).withBackdrop().thatIsOn().and.withCustomStage().withAdditionalHighlight(builders.AssistantAction.HOOKS.SELECTED_PREVIEW_SECTION).withDisabledElements(builders.AssistantAction.HOOKS.RETURN_BUTTON).withDisabledElements(builders.AssistantAction.HOOKS.PREVIEW_OVERLAY).and.thatAttachesTo().hook(builders.AssistantAction.HOOKS.SECTION_DESIGN_MENU_HOOK).and.withTriggers().completeOnElementClick(builders.AssistantAction.HOOKS.PANEL_CLOSE_BUTTON).completeOnElementClick(builders.AssistantAction.HOOKS.MENU_ITEM).goToOnElementClick(builders.AssistantAction.HOOKS.BACKGROUND_BUTTON,4,null,!0).goToOnElementClick(builders.AssistantAction.HOOKS.HEADERBG_BUTTON,4,null,!0).goToOnElementClick(builders.AssistantAction.HOOKS.LISTBG_BUTTON,4,null,!0).goToOnElementClick(builders.AssistantAction.HOOKS.COLOR_BUTTON,5,null,!0).goToOnElementClick(builders.AssistantAction.HOOKS.FONT_BUTTON,6,null,!0).goToOnElementClick(builders.AssistantAction.HOOKS.ANIMATIONS_BUTTON,7,null,!0).and.withCallbacks().onExit(function(){return b.hideSectionDesignMenu()}).and.withTooltip().withWidth("360px").withContent("tour.customize-section-design.step3").thatOpensRight().and.withBI().withDescription("Choose what you want to customize").build(),k=(new builders.AssistantAction).thatAttachesTo().dock().and.withBackdrop().thatIsOff().and.withTriggers().completeOnElementClick(builders.AssistantAction.HOOKS.PREVIEW_CONTENT).completeOnElementClick(builders.AssistantAction.HOOKS.SEGMENT_OVERLAY_CLASS).completeOnElementClick(builders.AssistantAction.HOOKS.PANEL_CLOSE_BUTTON).and.withCustomStage().withDisabledElements(builders.AssistantAction.HOOKS.TOP_BAR).withDisabledElements(builders.AssistantAction.HOOKS.RETURN_BUTTON).and.withTooltip().withContent("tour.customize-section-design.step4").thatOpensUp().and.withBI().withDescription("When you're done customizing click below").build(),l=(new builders.AssistantAction).withBackdrop().thatIsOff().and.thatAttachesTo().dock().and.withCustomStage().withDisabledElements(builders.AssistantAction.HOOKS.TOP_BAR).withAdditionalHighlight(builders.AssistantAction.HOOKS.CC_PANEL_FRAME).withDisabledElements(builders.AssistantAction.HOOKS.RETURN_BUTTON).and.withTriggers().completeOnElementClick(builders.AssistantAction.HOOKS.PREVIEW_CONTENT).completeOnElementClick(builders.AssistantAction.HOOKS.SEGMENT_OVERLAY_CLASS).completeOnElementClick(builders.AssistantAction.HOOKS.DOCK).completeOnElementClick(builders.AssistantAction.HOOKS.PANEL_CLOSE_BUTTON).completeOnElementClick(builders.AssistantAction.HOOKS.GO_TO_SITE_COLORS,"",!1,f).and.withTooltip().withContent("tour.customize-section-design.step4").thatOpensUp().and.withBI().withDescription("When you're done customizing, click below").build(),m=(new builders.AssistantAction).withBackdrop().thatIsOff().and.thatAttachesTo().dock().and.withCustomStage().withDisabledElements(builders.AssistantAction.HOOKS.TOP_BAR).withAdditionalHighlight(builders.AssistantAction.HOOKS.CC_PANEL_FRAME).withDisabledElements(builders.AssistantAction.HOOKS.RETURN_BUTTON).and.withTriggers().completeOnElementClick(builders.AssistantAction.HOOKS.PREVIEW_CONTENT).completeOnElementClick(builders.AssistantAction.HOOKS.SEGMENT_OVERLAY_CLASS).completeOnElementClick(builders.AssistantAction.HOOKS.DOCK).completeOnElementClick(builders.AssistantAction.HOOKS.PANEL_CLOSE_BUTTON).completeOnElementClick(builders.AssistantAction.HOOKS.GO_TO_SITE_FONTS,"",!1,f).and.withTooltip().withContent("tour.customize-section-design.step4").thatOpensUp().and.withBI().withDescription("When you're done customizing, click below").build(),n=(new builders.AssistantAction).withBackdrop().thatIsOff().and.thatAttachesTo().dock().and.withCustomStage().withDisabledElements(builders.AssistantAction.HOOKS.TOP_BAR).withAdditionalHighlight(builders.AssistantAction.HOOKS.CC_PANEL_FRAME).withDisabledElements(builders.AssistantAction.HOOKS.RETURN_BUTTON).and.withTriggers().completeOnElementClick(builders.AssistantAction.HOOKS.PREVIEW_CONTENT).completeOnElementClick(builders.AssistantAction.HOOKS.SEGMENT_OVERLAY_CLASS).completeOnElementClick(builders.AssistantAction.HOOKS.DOCK).completeOnElementClick(builders.AssistantAction.HOOKS.GO_TO_SITE_ANIMATION,"",!1,f).and.withTooltip().withContent("tour.customize-section-design.step4").thatOpensUp().and.withBI().withDescription("When you're done customizing, click below").build();return{id:"customizeSectionDesign",label:"Customize Section Design",BI:{description:"customizeSectionDesign"},onEnter:{callback:function(){a.setCustomTaskData("goToBuilderWhenTourCompleted",!0),b.hideListSpanButtons()}},onExit:{callback:function(){b.showListSpanButtons(),c.clearContentFocus(),e.setScaleFactor(PreviewScale.MaxScaleFactor),a.getCustomTaskData("goToBuilderWhenTourCompleted")===!0&&c.goToBuilder()}},actions:[g,h,i,j,k,l,m,n]}}]),angular.module("siteGeneratorTourManagerInternal").factory("addSectionTask",["assistantUtils","assistantManager",function(a,b){return{id:"addSectionTask",label:"Add a New Section",BI:{description:"addSectionTour"},actions:[(new builders.AssistantAction).thatAttachesTo().hook(builders.AssistantAction.HOOKS.ADD_TAB).and.withBehaviors().thatHasHint().thatStartsAutoplayOnEnter().thatStopsAutoplayOnExit().withAutoplayTimeoutOf(800).and.withBI().withDescription("Opening Add Menu").and.withCallbacks().onExit(function(){return a.openAddTopBarMenu()}).and.withBackdrop().thatIsOn().build(),(new builders.AssistantAction).thatAttachesTo().hook(builders.AssistantAction.HOOKS.ADD_SECTION_TAB).and.withTooltip().withContent("tour.add-section2.step2").thatOpensRight().and.withBackdrop().thatIsOn().and.withTriggers().nextOnElementClick().and.withBehaviors().thatStopsAutoplayOnEnter().and.withCallbacks().onExit(function(){return a.closeAddTopBarMenu()}).and.withCustomStage().withDisabledElements(builders.AssistantAction.HOOKS.ADD_PAGE_TAB).and.withBI().withDescription("Click Add Section").build(),(new builders.AssistantAction).thatIsBasedOnTemplate().singleButtonTooltip("tour.button.gotit").and.thatAttachesTo().hook(builders.AssistantAction.HOOKS.LEFT_PANEL).and.withTooltip().withContent("tour.add-section.step3").thatOpensRight().and.withBackdrop().thatIsInvisible().and.withTriggers().nextOnElementClick().nextOnElementClick(builders.AssistantAction.HOOKS.PRESETS_CONTAINER,builders.AssistantAction.HOOKS.PRESET).completeOnElementClick(builders.AssistantAction.HOOKS.PANEL_CLOSE_BUTTON).and.withBI().withDescription("I've listed possible sections by relevance for your type of business").build(),(new builders.AssistantAction).thatAttachesTo().dock().and.withTooltip().withContent("tour.add-section.step4").thatOpensUp().and.withBackdrop().thatIsOff().and.withBehaviors().thatClosesSidePanelOnExit().and.withTriggers().completeOnElementClick(builders.AssistantAction.HOOKS.PANEL_CLOSE_BUTTON).completeOnElementClick(builders.AssistantAction.HOOKS.PREVIEW_CONTENT).and.withCustomStage().withDisabledElements(builders.AssistantAction.HOOKS.TOP_BAR).and.withBI().withDescription("When you're done, click below.").build()],onExit:{callback:function(){a.triggerElement(builders.AssistantAction.HOOKS.ADD_TAB,"mouseleave")}}}}]),angular.module("siteGeneratorTourManagerInternal").factory("addPageTask",["assistantManager","assistantUtils",function(a,b){return{id:"addPageTask",label:"Add a New Page",BI:{description:"addPageTour"},actions:[(new builders.AssistantAction).thatAttachesTo().hook(builders.AssistantAction.HOOKS.ADD_TAB).and.withBehaviors().thatStartsAutoplayOnEnter().thatStopsAutoplayOnExit().thatHasHint().withAutoplayTimeoutOf(800).and.withCallbacks().onExit(function(){return b.openAddTopBarMenu()}).and.withBackdrop().thatIsOn().and.withBI().withDescription("Opening Add Menu").build(),(new builders.AssistantAction).thatAttachesTo().hook(builders.AssistantAction.HOOKS.ADD_PAGE_TAB).and.withTooltip().withContent("tour.add-new-page2.step1").thatOpensRight().and.withBackdrop().thatIsOn().and.withTriggers().nextOnElementClick().and.withBehaviors().thatStopsAutoplayOnEnter().and.withCallbacks().onExit(function(){return b.closeAddTopBarMenu()}).and.withCustomStage().withDisabledElements(builders.AssistantAction.HOOKS.ADD_SECTION_TAB).and.withBI().withDescription("Click Add Section").build(),(new builders.AssistantAction).thatAttachesTo().hook(builders.AssistantAction.HOOKS.ADD_SECTION_PANEL).and.withTooltip().withContent("tour.add-new-page.step2").thatOpensRight().and.withBackdrop().thatIsOn().and.withBehaviors().thatDelays(1e3).thatWaitsForElement(builders.AssistantAction.HOOKS.PREVIEW_OVERLAY).and.withTriggers().nextOnElementClick(builders.AssistantAction.HOOKS.PRESETS_CONTAINER,builders.AssistantAction.HOOKS.BLANK_PAGE_OVERLAY).completeOnElementClick(builders.AssistantAction.HOOKS.PRESETS_CONTAINER,builders.AssistantAction.HOOKS.PREVIEW_OVERLAY_WITH_NOT_BLANK_PAGE).completeOnElementClick(builders.AssistantAction.HOOKS.PANEL_CLOSE_BUTTON).and.withCallbacks().onExit(function(){
return a.setMenuProgress(builders.AssistantMenuProgress.intermediate)}).and.withBI().withDescription("I've arranged all possible pages by relevance for your type of business.").build(),(new builders.AssistantAction).withBehaviors().thatWaitsForElement(builders.AssistantAction.HOOKS.ADD_SECTION_PANEL_LABEL).and.withCallbacks().onEnter(function(){return a.stopAndComplete()}).and.withBI().withDescription("Add Blank Page").build()],onExit:{callback:function(){b.triggerElement(builders.AssistantAction.HOOKS.ADD_TAB,"mouseleave")}}}}]),angular.module("siteGeneratorTourManagerInternal").factory("publishTask",function(){return{id:"publishTask",label:"Publish Your Site",BI:{description:"publishTour"},actions:[(new builders.AssistantAction).thatAttachesTo().hook(builders.AssistantAction.HOOKS.PUBLISH_TAB).and.withTooltip().withContent("tour.publish.step0").thatOpensDown().and.withBackdrop().thatIsOn().and.withTriggers().completeOnElementClick().and.withBI().withDescription("Once your site is published, people can see it online").build()]}}),angular.module("siteGeneratorTourManagerInternal").factory("connectDomainTask",function(){return{id:"connectDomainTask",label:"Connect Your Domain",BI:{description:"connectDomainTour"},actions:[(new builders.AssistantAction).thatAttachesTo().hook(builders.AssistantAction.HOOKS.CONNECT_DOMAIN_BUTTON).and.withTooltip().withContent("tour.connect-domain.step0").thatOpensDown().and.withBehaviors().thatHasHint().thatRedirectsTo(config.STATES.BUILDER_STORY).thatDelays(300).and.withCustomStage().withAdditionalHighlight(builders.AssistantAction.HOOKS.BROWSER_TOOLBAR).and.withBackdrop().thatIsOn().and.withTriggers().completeOnElementClick().and.withBI().withDescription("Look professional with a memorable, customized domain.").build()]}}),angular.module("siteGeneratorTourManagerInternal").factory("pageSEOTask",["assistantUtils",function(a){return{id:"pageSEOTask",label:"Improve Search Engine Ranking",BI:{description:"pageSEOTour"},actions:[(new builders.AssistantAction).withBehaviors().thatSkipsStepOnCondition(function(){return!0}).and.withBI().withDescription("Opening Page TopBar Menu").and.withConditionalConf().experimentIsEnabled("useSecondTopBarREMOVEDTEMPORARILY",(new builders.AssistantAction).thatAttachesTo().hook("PAGE_TAB_SECOND_TOPBAR").and.withBehaviors().thatStartsAutoplayOnEnter().thatStopsAutoplayOnExit().thatSkipsStepOnCondition(function(){return!1}).thatHasHint().withAutoplayTimeoutOf(800).thatRedirectsTo(config.STATES.BUILDER_STORY).and.withCallbacks().onExit(function(){return a.openPagesTopBarMenu()}).and.withBackdrop().thatIsOn().build()).build(),(new builders.AssistantAction).thatAttachesTo().hook(builders.AssistantAction.HOOKS.PAGE_TAB_TEMPORARY).and.withTooltip().withContent("tour.page-seo.step0").thatOpensDown().and.withBehaviors().thatRedirectsTo(config.STATES.BUILDER_STORY).and.withTriggers().nextOnElementClick().and.withBackdrop().thatIsOn().and.withBI().withDescription("Open the Page Manager").and.withConditionalConf().experimentIsEnabled("useSecondTopBarREMOVEDTEMPORARILY",(new builders.AssistantAction).thatAttachesTo().hook(builders.AssistantAction.HOOKS.MANAGE_PAGES).and.withTooltip().withContent("tour.page-seo.step0").and.withCustomStage().withDisabledElements(builders.AssistantAction.HOOKS.PAGE_TAB_MENU_ITEM).and.withCallbacks().onExit(function(){return a.closePagesTopBarMenu()}).build()).build(),(new builders.AssistantAction).thatAttachesTo().hook(builders.AssistantAction.HOOKS.PAGE_SETTINGS_BUTTON).and.withTooltip().withContent("tour.page-seo.step2").thatOpensRight().and.withBackdrop().thatIsOn().and.withBehaviors().thatDelays(1e3).and.withCustomStage().withDisabledElements(builders.AssistantAction.HOOKS.ADD_PAGE_BUTTON).withDisabledElements(builders.AssistantAction.HOOKS.PAGE_PANEL_FOOTER).withDisabledElements(builders.AssistantAction.HOOKS.UNSELECTED_PAGE_ITEMS).withAdditionalHighlight(builders.AssistantAction.HOOKS.PAGES_PANEL).and.withTriggers().nextOnElementClick().completeOnElementClick(builders.AssistantAction.HOOKS.PANEL_CLOSE_BUTTON).completeOnElementClick(builders.AssistantAction.HOOKS.PANEL_HELP_BUTTON).and.withBI().withDescription("Click Page Settings").build(),(new builders.AssistantAction).thatAttachesTo().hook(builders.AssistantAction.HOOKS.PAGE_SEO_MENU_ITEM).and.withTooltip().withContent("tour.page-seo.step3").thatOpensRight().and.withBackdrop().thatIsOn().and.withTriggers().nextOnElementClick().completeOnElementClick(builders.AssistantAction.HOOKS.PANEL_CLOSE_BUTTON).and.withBI().withDescription("Select Page SEO").build(),(new builders.AssistantAction).thatIsBasedOnTemplate().singleButtonTooltip("tour.button.gotit").and.withTooltip().withContent("tour.page-seo.step4").thatOpensRight().and.thatAttachesTo().hook(builders.AssistantAction.HOOKS.SEO_PANEL_PAGE_DESCRIPTION_FIELD).and.withCustomStage().withAdditionalHighlight(builders.AssistantAction.HOOKS.SEO_PANEL).and.withBackdrop().thatIsOn().and.withTriggers().nextOnElementClick().nextOnBackdropClick().completeOnElementClick(builders.AssistantAction.HOOKS.PANEL_CLOSE_BUTTON).and.withBI().withDescription("Good SEO helps people find you on search engines like Google. Choose relevant keywords including your business name").build(),(new builders.AssistantAction).thatAttachesTo().dock().and.withBackdrop().thatIsOff().and.withTriggers().completeOnElementClick(builders.AssistantAction.HOOKS.PANEL_CLOSE_BUTTON).and.withTooltip().withContent("tour.page-seo.step5").and.withBI().withDescription("When you're done, click below.").build()],onExit:{callback:function(){a.triggerElement(builders.AssistantAction.HOOKS.PAGE_TAB_SECOND_TOPBAR,"mouseleave")}}}}]);var WelcomeTaskStartTemplate=function(){function a(a,b,c,d,e,f,g,h,i,j,k,l,m){this.assistantManager=a,this.assistantUtils=b,this.assistantBI=c,this.consumerBiLogger=d,this.colorationUtils=e,this.introManager=f,this.designKitManager=g,this.flags=h,this.$q=i,this.kitUtils=j,this.initSiteData=k,this.introModelTree=l,this.initService=m,this.CREATE_MY_HOMEPAGE_STEP=4e3,this.currentStep=1e3,this.isLoading=!1,this.kits=[],this.getKits(),this.logoPersistence=new intro.IntroLogoPersistence(this.introManager.data.media)}return a.$inject=["assistantManager","assistantUtils","assistantBI","consumerBiLogger","colorationUtils","introManager","designKitManager","flags","$q","kitUtils","initSiteData","introModelTree","initService"],a.prototype.getKits=function(){var a=this;this.kitUtils.calculateKits().then(function(b){return a.kits=b})},a.prototype.selectKit=function(a){this.selectedKitId=a},a.prototype.getTitle=function(){return this.flags.fullSiteBuilder&&this.currentStep===this.CREATE_MY_HOMEPAGE_STEP?"I Will Now Create a Website Tailored to Your Needs":"tour.welcome2.step"+this.currentStep+".title"},a.prototype.getContent=function(){return this.flags.fullSiteBuilder&&this.currentStep===this.CREATE_MY_HOMEPAGE_STEP?"Let me take over for a few moments and I’ll create the initial design<br/>of your stunning website right before your eyes.":"tour.welcome2.step"+this.currentStep+".content"},a.prototype.sendBI=function(a,b){void 0===b&&(b=null),this.assistantBI.sendCustomBIEvent({evid:51,phaseNumber:b||this.currentStep,phaseName:a})},a.prototype.shouldSuggestLogoExtraction=function(){return this.introModelTree.isLogoExists()},a.prototype.onKitContinueClick=function(){this.shouldSuggestLogoExtraction()?this.goToSuggestToExtractPalette():(this.sendBI("Create my homepage"),this.goToCreateHomepageConfirmationStep())},a.prototype.goToDesignPickerStep=function(){this.sendBI("Help me understand your style."),this.goToNextInternalStep()},a.prototype.goToSuggestToExtractPalette=function(){this.sendBI("Would you like me to create a color palette from your logo?"),this.goToNextInternalStep()},a.prototype.updateLogoInModel=function(){this.introModelTree.updateLogo()},a.prototype.skipLogoPaletteClick=function(a){var b=1+(a===LogoCEWStep.SHOULD_I_EXTRACT_STEP?3e3:3200);this.sendBI("Create my homepage",b)},a.prototype.createLogoPaletteClick=function(){this.sendBI("Creating palette",3e3)},a.prototype.saveLogoPaletteClick=function(a){this.consumerBiLogger.siteDesign.clickOnDesiredPaletteFromCustomizePallete(this.colorationUtils.numOfColors(a.colors),1,"logo",0,BIOrigins.WelcomeTour),this.sendBI("Create my homepage",3200)},a.prototype.getLogoDescriptionPromise=function(){var a=this;return this.introModelTree.prepareLogoData().then(function(){return{relativeUri:a.introManager.siteProperties.logo,width:a.introManager.logoDimensions.width,height:a.introManager.logoDimensions.height}})},a.prototype.getPreparePalettePromise=function(a){var b=this;return this.getLogoDescriptionPromise().then(function(c){return b.prevPromise&&_.isEqual(c,b.prevPromiseImageDescription)?b.prevPromise:(b.prevPromiseImageDescription=c,b.prevPromise=b.colorationUtils.preparePaletteFromLogo(c,a),b.prevPromise)})},a.prototype.goToCreateHomepageConfirmationStep=function(a){var b=this;this.goToInternalStep(this.CREATE_MY_HOMEPAGE_STEP),this.isLoading=!0;var c;this.$q.all([this.designKitManager.setActiveMainKit(this.selectedKitId),this.colorationUtils.initialize(),this.initService.loaded()]).then(function(){return a?(c=Date.now(),b.colorationUtils.setLogoColors(a),b.colorationUtils.useLogoColors({setColorationMode:!0,overrideMainColor:!0})):void 0}).then(function(){a&&b.consumerBiLogger.siteDesign.clickOnDesiredPaletteFromCustomizePalleteSuccess(Date.now()-c,b.colorationUtils.numOfColors(a.colors),1,"logo",0,BIOrigins.WelcomeTour),b.isLoading=!1})},a.prototype.goToNextInternalStep=function(){this.currentStep=1e3*Math.floor(this.currentStep/1e3)+1e3},a.prototype.goToInternalStep=function(a){this.currentStep=a},a.prototype.goToNextAction=function(){var a=this;this.sendBI("Creating your homepage..."),this.initSiteData.loaded().then(function(){return a.introModelTree.loaded()}).then(function(){a.introManager.reset()}),this.assistantManager.gotoNextAction()},a.prototype.getLastButtonText=function(){return this.isLoading?"Preparing...":"tour.welcome2.step4000.button"},a}();angular.module("siteGeneratorTourManagerInternal").component("welcomeTaskStart",{controller:WelcomeTaskStartTemplate,template:'\n                <div class="tour-step-with-action welcome-start-step welcome-start-step-white">\n                  <div style="position: fixed; left: 200px; top: 120px; z-index: 2; display: none">\n                    <button ng-click="$ctrl.goToInternalStep(1000)">A</button>\n                    <button ng-click="$ctrl.goToInternalStep(2000)">B</button>\n                    <button ng-click="$ctrl.goToInternalStep(3000)">C</button>\n                    <button ng-click="$ctrl.goToInternalStep(4000)">D</button>\n                  </div>\n                  <div class="tour-step-content-wrapper">\n                    <div>\n                      <div ng-switch="$ctrl.currentStep" class="welcome-start-changing-section">\n                        <div ng-switch-when="1000" class="welcome-task-start-substep welcome-task-start-substep-1000">\n                          <div class="tour-step-title" ng-bind-html="$ctrl.getTitle() | translate" ng-if="$ctrl.getTitle() | translate"></div>\n                          <div class="tour-step-content" ng-bind-html="$ctrl.getContent() | translate" ng-if="$ctrl.getContent() | translate"></div>\n                          <button class="tour-dock-start assistant-dock-start" ng-click="$ctrl.goToDesignPickerStep()">START</button>\n                        </div>\n                        <div ng-switch-when="2000" class="welcome-task-start-substep welcome-task-start-substep-2000">\n                          <div class="tour-step-title" ng-bind-html="$ctrl.getTitle() | translate" ng-if="$ctrl.getTitle() | translate"></div>\n                          <div class="tour-step-content" ng-bind-html="$ctrl.getContent() | translate" ng-if="$ctrl.getContent() | translate"></div>\n                          <div class="kits clearfix">\n                            <div class="tour-step-welcome-design-picker-item" ng-class="{selected: kit.id === $ctrl.selectedKitId}" ng-repeat="kit in $ctrl.kits | limitTo:6" ng-click="$ctrl.selectKit(kit.id)">\n                              <kit-thumbnail kit="kit"></kit-thumbnail>\n                            </div>\n                          </div>\n                          <div class="tour-step-actions -centered">\n                            <button class="a05-forward-button tour-button -primary" ng-click="$ctrl.onKitContinueClick()" ng-disabled="!$ctrl.selectedKitId"><span ng-bind-html="::\'tour.button.continue\' | translate"> </span></button>\n                          </div>\n                        </div>\n                        <div ng-switch-when="3000" class="welcome-task-start-substep welcome-task-start-substep-3000">\n                          <div class="tour-step-actions -centered">\n                            <logo-color-extraction-wizard logo-persistence=":: $ctrl.logoPersistence" get-prepare-palette-promise="$ctrl.getPreparePalettePromise(logoOrigin)" enable-replace-logo="true" update-logo-in-model="$ctrl.updateLogoInModel()" on-done="$ctrl.goToCreateHomepageConfirmationStep(logoColoration)" on-skip-click="$ctrl.skipLogoPaletteClick(logoExtractorStep)" on-create-palette-click="$ctrl.createLogoPaletteClick()" on-save-palette-click="$ctrl.saveLogoPaletteClick(logoColoration)" context="tour"> </logo-color-extraction-wizard>\n                          </div>\n                        </div>\n                        <div ng-switch-when="4000" class="welcome-task-start-substep welcome-task-start-substep-4000">\n                          <div class="tour-step-title" ng-bind-html="$ctrl.getTitle() | translate" ng-if="$ctrl.getTitle() | translate"></div>\n                          <div class="tour-step-content" ng-bind-html="$ctrl.getContent() | translate" ng-if="$ctrl.getContent() | translate"></div>\n                          <div class="tour-step-actions -centered">\n                            <button class="tour-button a05-forward-button -primary" ng-click="$ctrl.goToNextAction()" ng-disabled="$ctrl.isLoading">\n                              <span ng-bind-html="$ctrl.getLastButtonText() | translate"> </span>\n                            </button>\n                          </div>\n                        </div>\n                      </div>\n                    </div>\n                  </div>\n                </div>\n              '});var WelcomeTaskEndTemplate=function(){function a(a){this.assistantManager=a}return a.$inject=["assistantManager"],a.prototype.stopTask=function(){this.assistantManager.setIntent({operation:builders.AssistantOperation.ForceStop})},a}();angular.module("siteGeneratorTourManagerInternal").component("welcomeTaskEnd",{controller:WelcomeTaskEndTemplate,template:'\n              <div class="tour-step-with-action">\n                <div class="tour-step-image" style="min-height:168px">\n                  <img relative-src="images/tour/welcome-tour-complete.gif"/>\n                </div>\n                <div class="tour-step-title -centered">\n                  {{:: \'tour.welcome2.complete2.title\' | translate}}\n                </div>\n                <div class="tour-step-content-wrapper">\n                  <div>\n                    <div class="tour-step-content -centered" style="margin-bottom: 0;" ng-bind-html=":: \'tour.welcome2.complete2.content\' | translate">\n                    </div>\n                    <div class="tour-step-actions -centered" style="margin-top: 20px">\n                      <button class="tour-button a05-forward-button" ng-click="$ctrl.stopTask()"><span ng-bind-html=":: \'general.got-it\' | translate"> </span></button>\n                    </div>\n                </div>\n              </div>\n              '});var OpenSiteLoader=function(){function a(a,b,c,d,e){this.wixAngularTopology=a,this.$scope=b,this.$translate=c,this.$timeout=d,this.$interval=e,this.currentMessageIndex=0}return a.$inject=["wixAngularTopology","$scope","$translate","$timeout","$interval"],a.prototype.$postLink=function(){var b=this;this.$timeout(function(){return b.prepareNextMessage()},0),this.stopInterval=this.$interval(function(){return b.prepareNextMessage()},a.MessageInterval),this.$messages=$(".loader-message")},a.prototype.$onDestroy=function(){this.$interval.cancel(this.stopInterval),this.stopInterval=void 0},a.prototype.prepareNextMessage=function(){var b=Math.floor(Math.random()*a.MessageCount)+1,c="builder.open-site-loader.message"+b,d=this.$translate(c),e=this.currentMessage!==d;d&&e?this.animateMessage(d):this.prepareNextMessage()},a.prototype.animateMessage=function(a){var b=this,c=this.$messages.eq(this.currentMessageIndex),d=this.$messages.not(c);d.css({opacity:0,transform:"translateX(-100px)"}),c.css({opacity:0,transform:"translateX(100px)"}).one("transitionend",function(){b.currentMessage=a,b.$scope.$digest(),c.css({opacity:1,transform:"translateX(0)"})}),this.currentMessageIndex=Math.abs(1-this.currentMessageIndex)},a.prototype.getVideoUrl=function(){var a=this.wixAngularTopology.staticsUrl+"/videos/loaders",b=(window.matchMedia&&(window.matchMedia("only screen and (min-resolution: 192dpi), only screen and (min-resolution: 2dppx), only screen and (min-resolution: 75.6dpcm)").matches||window.matchMedia("only screen and (-webkit-min-device-pixel-ratio: 2), only screen and (-o-min-device-pixel-ratio: 2/1), only screen and (min--moz-device-pixel-ratio: 2), only screen and (min-device-pixel-ratio: 2)").matches)||window.devicePixelRatio&&window.devicePixelRatio>=2)&&/(iPad|iPhone|iPod)/g.test(navigator.userAgent),c=b?"open-site-2x.mp4":"open-site.mp4";return a+"/"+c},a}();OpenSiteLoader.MessageCount=20,OpenSiteLoader.MessageInterval=7500,angular.module("siteGeneratorStaticsConsumerAppInternal").component("openSiteLoader",{templateUrl:"views/loaders/open-site-loader.html",controller:OpenSiteLoader});var PagesPanel=function(){function a(a,b,c,d,e,f,g,h,i,j,k,l,m,n,o,p,q,r,s,t,u,v,w,x){var y=this;this.CONSUMER_DIALOGS=a,this.applicationParameters=b,this.modelTree=c,this.tpaService=d,this.initService=e,this.pagesManager=f,this.notification=g,this.previewService=h,this.CcDialogBuilder=i,this.$mdDialog=j,this.$translate=k,this.$state=l,this.undoRedo=m,this.menuService=n,this.flags=o,this.applicationState=p,this.$timeout=q,this.storyServices=r,this.consumerBiLogger=s,this.consumerBiLoggerHelpers=t,this.spinnerService=u,this.consumerMenu=v,this.$stateParams=w,this.documentServicesMediator=x,this.saveChanges=function(){y.consumerMenu.calcMenuAnchors().then(function(){y.undoRedo.captureOperation()})},this.togglePageVisibility=function(a){var b=y.modelTree.getPageNodeById(a);y.pagesManager.togglePageVisibility(b),b.hidePage&&y.notification.show("toasters.page-hidden"),y.consumerBiLogger.pagesManager.hideShowPage(b.hidePage?"hide":"show",y.tpaService.getAppIdByPageNode(b)),y.saveChanges()},this.handleNodesRendererKeydown=function(a,b){var c=a.currentTarget.value;y.nameIsValid(c)&&(y.pageNameOldValue[b.id]=c)},this.handleNodesRendererKeyup=function(a,b){var c=a.currentTarget.value;y.nameIsValid(c)||(b.error||(y.$timeout(function(){b.error=!0},0),y.$timeout(function(){b.error=!1},5e3)),a.currentTarget.value=y.pageNameOldValue[b.id],b.name=y.pageNameOldValue[b.id])},this.isErrorInPageName=new Object,this.pageNameOldValue=new Object,this.pageNameMaxCharacters=100,this.treeOptions={dropped:function(a){var b=a.source.nodeScope.$modelValue,c=a.source.nodesScope.$modelValue;if(b.children.length>0){var d=_.findIndex(b.children,{id:b.id});if(d>-1)return c.push(b.children[d]),void b.children.splice(d,1)}y.goToPage(a.source.nodeScope.item);var e=y.modelTree.getNodeById(a.source.nodeScope.item.id);return y.consumerBiLogger.pagesManager.reorderPage(a.dest.index,a.source.index,y.tpaService.getAppIdByPageNode(e)),y.saveChanges(),y.$timeout(function(){return y.menuService.refresh()}),!0}},this.pageNameMaxLength=DocumentServicesMediator.GENERAL_VALIDATIONS.PAGE_NAME_MAX_LENGTH}return a.$inject=["CONSUMER_DIALOGS","applicationParameters","modelTree","tpaService","initService","pagesManager","notification","previewService","CcDialogBuilder","$mdDialog","$translate","$state","undoRedo","menuService","flags","applicationState","$timeout","storyServices","consumerBiLogger","consumerBiLoggerHelpers","spinnerService","consumerMenu","$stateParams","documentServicesMediator"],a.prototype.nameIsValid=function(a){return a.length<=DocumentServicesMediator.GENERAL_VALIDATIONS.PAGE_NAME_MAX_LENGTH},a.prototype.showRenameForm=function(a,b){b.$show(),a.stopPropagation()},a.prototype.removeDuplicateItems=function(a){if(_.unique(a,function(a){return a.id}).length!==a.length){var b=[];a.forEach(function(c,d){a.slice(d+1).forEach(function(a){c.id===a.id&&b.push(d)})}),b.forEach(function(b){return a.splice(b,1)})}},a.prototype.$onInit=function(){var a=this;this.initService.loaded().then(function(){var b=a.consumerBiLoggerHelpers.popPanelSource();if(a.consumerBiLogger.pagesManager.pagesPanelIsLoaded(b||"second topbar"),a.flags.dataFixerMenuItems&&a.removeDuplicateItems(a.menuService.menuItems),a.applicationState.isSelectedPageMode()){var c=a.$stateParams.pageId;if(c){var d=a.modelTree.getPageNodeById(c);a.goToPage(d)}}})},a.prototype.$onDestroy=function(){this.consumerBiLogger.pagesManager.pagesPanelWasClosed("pages panel")},a.prototype.setSelectedPage=function(a){return this.applicationState.clearContentFocus(),this.storyServices.story.selectedPage=a,this.storyServices.recalculateCurrentPage()},a.prototype.openActionsDialog=function(a,b,c){this.consumerBiLogger.pagesManager.clickOnSettings(b.name),this.idForActions=b.id,this.activePageRenameForm=c,this.showDialog(a)},a.prototype.closePagesPanel=function(){this.$state.go("^")},a.prototype.openPagesPanelHelp=function(){this.CcDialogBuilder.showSupportIframe(this.$translate("help.pages.menu"),this.CONSUMER_DIALOGS.PAGES_PANEL_HELP)},a.prototype.goToDesktopEditMode=function(){var a=this;return this.consumerBiLoggerHelpers.setPanelSource("pages panel"),this.consumerBiLogger.builder.switchBuilderTypeMobileDesktopClick("pages panel",this.applicationState.isInDesktopEditMode()?"desktop":"mobile"),this.consumerBiLoggerHelpers.resetLoadTime(),this.applicationState.disableMobileEditor().then(function(){var b=a.consumerBiLoggerHelpers.popPanelSource();return b&&a.consumerBiLogger.builder.switchBuilderTypeMobileDesktopSuccess(b,a.applicationState.isInMobileEditMode()?"desktop":"mobile"),a.$timeout(angular.noop,200)}).then(function(){a.$state.go(config.STATES.BUILDER_SELECTED_PAGE)})},a.prototype.goToPage=function(a){var b=this;if(this.storyServices.story.selectedPage!==a.id){this.applicationState.goToPage(a.id);var c=this.modelTree.getNodeById(a.id),d=this.tpaService.getAppIdByPageNode(c);this.consumerBiLogger.pagesManager.clickOnPage(a.name,d,"pages panel"),this.pagesManager.goToPage(a.id).then(function(){return b.applicationState.isInMobileEditMode()?b.applicationState.goToMobilePage(a.id):void(b.storyServices.story.selectedPage=a.id)}).then(function(){return b.$state.current.name===config.STATES.BUILDER_PAGES_SEO&&b.$state.go("^"),b.setSelectedPage(a.id)}).then(function(){b.consumerBiLogger.pagesManager.gotoPageSuccess(a.name,d,"pages panel")})["finally"](function(){b.spinnerService.waitForStop().then(function(){var a=b.previewService.getOverlayContainer();a&&(a.scrollTop=0)})})}},a.prototype.addPage=function(){this.consumerBiLogger.pagesManager.addPageClick("pages-panel"),this.applicationState.goToAddPageMode()},a.prototype.afterRename=function(a,b){var c=b.name,d=b.id;if(this.nameIsValid(c)){var e=this.modelTree.getNodeById(d);if(!e)throw d+" without a corresponding node";this.pagesManager.renamePage(d,c),this.consumerBiLogger.pagesManager.renamePage(this.tpaService.getAppIdByPageNode(e)),this.saveChanges()}else a.$data=this.pageNameOldValue[b.id],b.name=this.pageNameOldValue[b.id];this.$timeout(function(){b.error=!1},0)},a.prototype.canManagePage=function(a){var b=this.modelTree.getNodeById(a.id);return b&&!b.tpaExtraPage},a.prototype.isContainerOfUnmanageable=function(a){var b=this.modelTree.getNodeById(a.id);return b&&b.tpaSection},a.prototype.iconName=function(a){var b=this.modelTree.getNodeById(a.id);if(!b)return"";var c="";return this.pagesManager.isHome(a.id)?c="cc-icon-home":!b.tpaExtraPage&&b.alias&&b.alias===this.applicationParameters.tpaTypes.Blog.type?c="cc-icon-blog":!b.tpaExtraPage&&b.alias&&b.alias===this.applicationParameters.tpaTypes.Stores.type?c="cc-icon-store":!b.tpaExtraPage&&b.alias&&b.alias===this.applicationParameters.tpaTypes.Bookings.type&&(c="cc-icon-booking"),c},a.prototype.getPageIdForSeo=function(){return this.idForActions||this.storyServices.story.selectedPage},a.prototype.manipulateEvent=function(a){var b=angular.element(a.target).offset();return a.clientX=Math.round(b.left),a.clientY=Math.round(b.top),a},a.prototype.showDialog=function(a){var b=this,c={idForActions:this.idForActions,saveChanges:this.saveChanges,togglePageVisibility:this.togglePageVisibility,activePageRenameForm:this.activePageRenameForm,setSelectedPage:function(a){return b.setSelectedPage(a)}},d={parent:angular.element(document.body),hasBackdrop:!1,clickOutsideToClose:!0,templateUrl:"views/page-menu-dialog.html",controller:PageMenuDialog,controllerAs:"$ctrl",locals:{$event:this.manipulateEvent(a),selected:c}};this.$mdDialog.show(d)},a}();angular.module("siteGeneratorStaticsConsumerAppInternal").component("pagesPanel",{controller:PagesPanel,templateUrl:"views/pages-panel.html"});var PageMenuDialog=function(){function a(a,b,c,d,e,f,g,h,i,j,k,l,m,n,o,p,q,r,s,t,u,v,w){this.$q=b,this.undoRedo=c,this.notification=d,this.tpaService=e,this.selected=f,this.flags=g,this.wizardService=h,this.previewService=i,this.modelTree=j,this.sectionManager=k,this.pagesManager=l,this.menuService=m,this.$translate=n,this.$mdDialog=o,this.nodeManipulationService=p,this.simpleSolutionManager=q,this.CcDialogBuilder=r,this.consumerBiLogger=s,this.applicationState=t,this.consumerMenu=u,this.applicationParameters=v,this.storyServices=w;var x=j.getNodeById(f.idForActions);this.tpaType=x.tpaSection,this.position={top:a.clientY-30,left:a.clientX+16}}return a.$inject=["$event","$q","undoRedo","notification","tpaService","selected","flags","wizardService","previewService","modelTree","sectionManager","pagesManager","menuService","$translate","$mdDialog","nodeManipulationService","simpleSolutionManager","CcDialogBuilder","consumerBiLogger","applicationState","consumerMenu","applicationParameters","storyServices"],a.prototype.hasNestedPages=function(){var a=this.menuService.getLinkToPage(this.selected.idForActions);return a&&!a.parent&&!_.isEmpty(a.item.children)},a.prototype.goToPageSeo=function(a){this.$mdDialog.hide(),this.applicationState.goToPageSeo(a)},a.prototype.setAsHomepage=function(){this.$mdDialog.hide(),this.pagesManager.setHomeById(this.selected.idForActions),this.consumerBiLogger.pagesManager.clickOnSetPageAsHomepage(),this.selected.saveChanges()},a.prototype.notDeletable=function(){return this.isHomepage()||this.singlePage()},a.prototype.singlePage=function(){return _.keys(this.pagesManager.getNameToPageMap()).length<2},a.prototype.isHomepage=function(){return this.pagesManager.isHome(this.selected.idForActions)},a.prototype.rename=function(){this.$mdDialog.hide(),this.selected.activePageRenameForm.$show()},a.prototype.duplicatePage=function(){var a=this;this.$mdDialog.hide();var b=this.modelTree.getNodeById(this.selected.idForActions);this.sectionManager.duplicatePage(b).then(function(){a.selected.saveChanges()})},a.prototype.toggleVisibility=function(){this.$mdDialog.hide(),this.selected.togglePageVisibility(this.selected.idForActions)},a.prototype.getTpaIcon=function(a){var b={Blog:"blog",Stores:"store",Bookings:"booking"};return"cc-icon-"+b[a]},a.prototype.toggleSubMainPage=function(){this.$mdDialog.hide(),this.menuService.toggleNestingById(this.selected.idForActions);var a=this.modelTree.getNodeById(this.selected.idForActions);this.consumerBiLogger.pagesManager.setPageAsSubpageMainPage(this.menuService.isOuterLevelById(this.selected.idForActions)?"subpage to main page":"main page to subpage ",this.tpaService.getAppIdByPageNode(a)),this.selected.saveChanges()},a.prototype.confirmPageDelete=function(){var a=this,b={heading:this.$translate("popups.page-delete-confirmation.heading"),text:this.$translate("popups.page-delete-confirmation.text"),acceptButtonText:this.$translate("general.delete"),rejectButtonText:this.$translate("general.cancel"),biDialogName:CONSUMER_DIALOGS.PAGE_DELETE_CONFIRM};return this.CcDialogBuilder.showNegativeConfirmation(b).then(function(){a.$mdDialog.hide()})},a.prototype.confirmTpaDelete=function(a){var b=this,c={heading:this.$translate("popups.tpa-delete-confirmation.heading",{TPA:a}),text:this.$translate("popups.tpa-delete-confirmation.text"),acceptButtonText:this.$translate("general.delete"),rejectButtonText:this.$translate("general.cancel"),biDialogName:CONSUMER_DIALOGS.TPA_PAGE_DELETE_CONFIRM};return this.CcDialogBuilder.showNegativeConfirmation(c).then(function(){b.$mdDialog.hide()})},a.prototype.cleanTpaWidgets=function(a){var b=this,c=[];_.each(this.modelTree.getPagesNodes(),function(d){c.push.apply(c,b.modelTree.getTpaWidgetsInPage(d,a))}),_.each(c,function(a){b.nodeManipulationService.deleteNode(a,a.containerPageId,void 0,function(){b.modelTree.markPageAsDirty(a.containerPageId),b.simpleSolutionManager.removeSectionFromSolutionLGs(a.containerPageId,a.id)})})},a.prototype.deletePage=function(){var a,b=this,c=this.modelTree.getNodeById(this.selected.idForActions),d=c.tpaSection,e=this.tpaService.getAppIdByPageNode(c);this.consumerBiLogger.pagesManager.clickOnDeletePage(e),a=this.applicationState.isSilent()?this.$q.resolve():d?this.confirmTpaDelete(d):this.confirmPageDelete(),a.then(function(){if(!b.pagesManager.isHome(b.selected.idForActions)){var a=b.$q.defer();return d&&(_.each(b.pagesManager.getTpaExtraPages(d),function(a){b.nodeManipulationService.deletePageById(a.id,"body",_.noop,_.noop)}),b.cleanTpaWidgets(d)),b.nodeManipulationService.deletePageById(b.selected.idForActions,"body",b.selected.setSelectedPage,function(){a.resolve()}),a.promise}}).then(function(){return b.consumerMenu.calcMenuAnchors()}).then(function(){return b.undoRedo.captureOperation()}).then(function(){return d===b.applicationParameters.tpaTypes.Stores.type?b.sectionManager.recalculateSiteHeader().then(function(){return b.storyServices.reRender("header")}):void 0}).then(function(){b.applicationState.isSupportStaffEditing()||b.previewService.waitForChanges().then(function(){return b.wizardService.publishStory()["catch"](function(){return b.$q.resolve()})})}).then(function(){b.consumerBiLogger.pagesManager.deletePageSuccess(e),b.notification.show("toasters.page-deleted","general.undo",function(){b.undoRedo.undo()})})},a}(),Builder=function(){function a(a,b,c,d,e,f,g,h,i,j,k,l,m,n,o,p,q,r,s,t,u,v){var w=this;this.$element=a,this.$rootScope=b,this.$scope=c,this.initService=d,this.spinnerService=e,this.$state=f,this.applicationState=g,this.modelTree=h,this.getStageBackgroundColors=i,this.colorationUtils=j,this.flags=k,this.assistantManager=l,this.assistantTaskFetcher=m,this.assistantUtils=n,this.$timeout=o,this.consumerBiLogger=p,this.applicationParameters=q,this.storyServices=r,this.logoExtractionPopupService=s,this.$window=t,this.$q=u,this.renderBuilder=!1,this.showBuilder=!1,this.panelWidth=0,this.$onDestroy=function(){return w.stateChangeWatcher()},this.$postLink=function(){return w.adjustBuilderLayoutOnStateChange(w.$state.$current.data)},this.onStateChange=function(a,b){return w.adjustBuilderLayoutOnStateChange(b.data)},this.isPreview=function(){return w.applicationState.isPreviewDisplay()},this.shouldShowPreviewToggle=function(){return w.isPreview()&&!w.applicationState.previewRevision()&&!w.$window.adiRunningOnServer},this.isMobilePreviewDisplay=function(){return w.applicationState.isMobilePreviewDisplay()},this.getMobilePreviewUrl=function(){
return w.applicationState.mobilePreviewUrl()},this.getMobilePreviewPageId=function(){return w.applicationState.mobilePreviewPageId()},this.shouldShowEditModeToggleControls=function(){return w.flags.mobileEditor},k.debugMode||k.previewRevision||(t.onbeforeunload=function(){return v("general.leave-note")}),"preview"===k.initDuringIntro?(this.waitForBuilderState().then(function(a){var c=a.event,e=a.targetState;d.isBuilderValidState()?w.initBuilder():g.goToIntro(),w.onStateChange(c,e),w.stateChangeWatcher=b.$on("$stateChangeStart",w.onStateChange)}),o(function(){w.renderBuilder=!0},5e3)):(d.isBuilderValidState()?this.initBuilder():g.goToIntro(),this.stateChangeWatcher=b.$on("$stateChangeStart",this.onStateChange)),this.$rootScope.$on("switchEditModeStart",function(){w.startLoadingAnimation()}),this.$rootScope.$on("switchEditModeEnd",function(){w.$timeout(function(){return w.finishLoadingAnimation()},200)})}return a.$inject=["$element","$rootScope","$scope","initService","spinnerService","$state","applicationState","modelTree","getStageBackgroundColors","colorationUtils","flags","assistantManager","assistantTaskFetcher","assistantUtils","$timeout","consumerBiLogger","applicationParameters","storyServices","logoExtractionPopupService","$window","$q","$translate"],a.prototype.startLoadingAnimation=function(){var a=this,b=function(b){return a.$element.find(b)};b(".browser-wrapper").addClass(this.applicationState.isInDesktopEditMode()?"mobile-dimensions":"desktop-dimensions"),this.$element.removeClass("transition-fade-in"),this.$element.addClass("transition-fade-out"),this.$timeout(function(){b(".overlay-on-top").css("visibility","hidden"),b(".builder-panel-inner").css("visibility","hidden"),b(".preview-padding").css("flex-basis",0)},250),b(".overlay-on-top").css("opacity",0)},a.prototype.finishLoadingAnimation=function(){var a=this,b=function(b){return a.$element.find(b)};this.$element.removeClass("transition-fade-out"),this.$element.addClass("transition-fade-in"),b(".browser-wrapper").removeClass("mobile-dimensions desktop-dimensions"),this.$timeout(function(){b(".overlay-on-top").css("visibility","visible"),b(".builder-panel-inner").css("visibility","visible")},250),b(".overlay-on-top").css("opacity",1)},a.prototype.waitForBuilderState=function(){var a=this,b=this.$q.defer();if(this.isBuilderState(this.$state.$current))b.resolve({event:{},targetState:this.$state.$current});else var c=this.$rootScope.$on("$stateChangeSuccess",function(d,e){a.isBuilderState(e)&&(c(),b.resolve({event:d,targetState:e}))});return b.promise},a.prototype.isBuilderState=function(a){return a&&a.name.startsWith(builder.BUILDER_STATES.BUILDER)},a.prototype.adjustBuilderLayoutOnStateChange=function(a){this.panelWidth=0,a&&(this.applicationState.isInMobileEditMode()&&a.mobilePanelWidth?this.panelWidth=a.mobilePanelWidth:a.panelWidth&&(this.panelWidth=a.panelWidth))},a.prototype.initBuilder=function(){var a=this;this.renderBuilder=!0,this.showBuilder=!0,this.flags.newPreloader||this.spinnerService.waitForMe("initBuilder"),this.initService.init().then(function(){return a.watchBackgroundColorChange()})["finally"](function(){a.spinnerService.isFirstTime=!1,a.flags.newPreloader||a.spinnerService.imDone("initBuilder")})},a.prototype.watchBackgroundColorChange=function(){var a=this;return this.colorationUtils.initialize().then(function(){a.$scope.$watch(function(){return a.colorationUtils.getPaletteColors()},function(b){return a.updateStageBackgroundColors(b)})})},a.prototype.updateStageBackgroundColors=function(b){var c=this.$window,d=this.getStageBackgroundColors(b),e=d.gradientStart,f=d.gradientEnd,g=d.active,h=d.hover,i=c.document.getElementById(a.STAGE_BACKGROUND_STYLE_ID);i?i.parentNode.removeChild(i):(i=c.document.createElement("style"),i.setAttribute("id",a.STAGE_BACKGROUND_STYLE_ID)),i.innerHTML="\n      .stage {\n        background: linear-gradient(45deg, rgba("+e.rgba()+"), rgba("+f.rgba()+")) !important;\n      }\n      .active-highlight {\n        background: rgba("+g.rgba()+") !important;\n      }\n      .hover-highlight {\n        background: rgba("+h.rgba()+") !important;\n      }\n    ",c.document.body.appendChild(i)},a}();Builder.STAGE_BACKGROUND_STYLE_ID="stageBackgroundColors",angular.module("siteGeneratorStaticsConsumerAppInternal").component("builder",{templateUrl:"views/builder.html",controller:Builder,controllerAs:"$builder"});var AddSection=function(){function a(a,b,c,d,e,f,g,h,i,j,k,l,m,n,o,p,q,r,s,t,u,v){var w=this;this.contentManager=a,this.modelTree=b,this.storyServices=c,this.applicationState=d,this.applicationParameters=e,this.tpaService=f,this.pagesManager=g,this.CcDialogBuilder=h,this.$translate=i,this.tipManager=j,this.TipManagerTypeMap=k,this.initService=l,this.consumerBiLogger=m,this.sectionManager=n,this.assistantManager=o,this.flags=p,this.contentModelTree=q,this.dropTargetCalculator=r,this.overlayManager=s,this.FeatureList=t,this.prettyAlgoRuleEngine=u,this.presetsStrategyFactory=v,this.showMoreSections=!1,this.applicationState.getPageInFocus().managable||this.pageMode?l.loaded().then(function(){return a.initialize(w.storyServices.story)}).then(function(){return w.init()}):this.applicationState.goToBuilder()}return a.$inject=["contentManager","modelTree","storyServices","applicationState","applicationParameters","tpaService","pagesManager","CcDialogBuilder","$translate","tipManager","TipManagerTypeMap","initService","consumerBiLogger","sectionManager","assistantManager","flags","contentModelTree","dropTargetCalculator","overlayManager","FeatureList","prettyAlgoRuleEngine","presetsStrategyFactory"],a.prototype.init=function(){this.storyServices.story?(this.isHomePage=this.pagesManager.isHome(this.storyServices.story.selectedPage),this.contentManager.buildContentMap(),this.selectedOffersMap=this.sectionManager.utilCreateSelectedOffersMap(),this.pageMode?this.initPageMode():this.initAddSectionMode()):this.back()},a.prototype.isSectionSelected=function(a){return this.selectedSection&&a.id===this.selectedSection.id},a.prototype.back=function(){this.applicationState.goToBuilder()},a.prototype.onHelp=function(){this.CcDialogBuilder.showSupportIframe(this.$translate(this.pageMode?"help.pages.add":"help.section.add"),this.pageMode?CONSUMER_DIALOGS.ADD_PAGE_HELP:CONSUMER_DIALOGS.ADD_SECTION_HELP)},a.prototype.toggleMoreSections=function(){this.showMoreSections&&(jQuery(".section-list")[0].scrollTop=0),this.showMoreSections=!this.showMoreSections},a.prototype.setSelectedSection=function(a,b){if(!this.isSectionSelected(a)){if(b&&(this.pageMode?this.consumerBiLogger.pagesManager.switchPageTypeInTheAddPagePanel(a.ceType,a.id,a.origin):this.consumerBiLogger.sectionManagement.switchSectionTypeInTheAddSectionPanel(a.ceType,a.id,a.origin)),this.selectedSection=a,this.pageMode||this.tipManager.show(this.TipManagerTypeMap.ADD,a.id),a.isTpa)this.pageMode?(this.nodes=a.widgetNode?[a.widgetNode]:[this.getTpaNode(a.ceType)],this.pageName=a.pageTitle):(a.widgetNode.alias||(a.widgetNode.alias=a.id),this.nodes=[a.widgetNode]);else if(a.isBlank)this.nodes=[{id:"blank"}];else{this.pageName=a.pageTitle;var c=void 0;if(!this.pageMode){var d=this.storyServices.story.selectedPage;c=this.modelTree.getPageNodeById(d)}var e=this.modelTree.getDataHoldersAndExistingNodesForPage(c,a.ceType,this.isListSection()),f=e.existingNodes,g=this.prepareDrafts(f);this.sectionManager.overrideDraftsContent(g,e.dataHolders),this.nodes=_.union(f,g)}this.addSectionStrategy=this.presetsStrategyFactory.createFromNode(this.nodes[0],builder.PresetsStrategyMode.Add)}},a.prototype.isOnPage=function(a){return this.aliasesOnThisPage.indexOf(a.id)>-1},a.prototype.mapTpaWidgetNodesToSectionObject=function(a){var b=this;return _.map(a,function(a){return b.sectionManager.makeTpaSectionObject(a)})},a.prototype.shouldShowTpaSectionOption=function(a){var b=a.sectionUnderFlag;return a.inConsumer&&a.hasSection&&(!b||this.flags[b])},a.prototype.getTpaPageSuggestions=function(){var a=this,b=[];return _(this.applicationParameters.tpaTypes).filter(function(b){return a.shouldShowTpaSectionOption(b)}).map("type").each(function(c){a.tpaService.isTpaAdded(c)||b.unshift({ceType:c,id:c,isTpa:!0,pageTitle:a.applicationParameters.tpaTypes[c].pageName||c,rawSectionBrief:{}})}).value(),b},a.prototype.setOriginForBI=function(){_.each(this.recommendedSections,function(a){a.origin="recommended"}),_.each(this.otherSections,function(a){a.origin="others"}),_.each(this.moreSections,function(a){a.origin="expanded list"})},a.prototype.initPageMode=function(){this.addSectionIntent=builder.PreviewListIntent.AddPage,this.aliasesOnThisPage=[];var a=this.contentManager.suggestedPages(this.selectedOffersMap[this.applicationParameters.tpaTypes.Stores.type],!0);this.sectionManager.postProcessSuggestedTpaSections(a.pageSuggestions),this.recommendedSections=_.filter(a.pageSuggestions,function(a){return a.isRecommendedPage}),this.otherSections=_.filter(a.pageSuggestions,function(a){return!a.isRecommendedPage}),this.otherSections.push.apply(this.otherSections,this.getTpaPageSuggestions()),this.moreSections=[],this.enforceVisibleSectionLimit(),this.setOriginForBI(),a.selectedIndex=-1===a.selectedIndex?0:a.selectedIndex,this.setSelectedSection(a.pageSuggestions[a.selectedIndex])},a.prototype.enforceVisibleSectionLimit=function(){var b=Math.min(a.MaxInitialVisibleSections,this.otherSections.length);this.moreSections=this.otherSections.splice(b).concat(this.moreSections)},a.prototype.filterPageSectionsByType=function(a,b,c,d){var e=_.find(a.children,function(a){return a.contentElementType===c});if(e||d)for(var f=b.findIndex(function(a){return a.ceType===c});-1!==f;)b.splice(f,1),f=b.findIndex(function(a){return a.ceType===c})},a.prototype.initAddSectionMode=function(){var a=this;if(this.flags.prettyAlgo){var b=this.overlayManager.getDropTargetSection();if(b){var c=new this.FeatureList(b);console.log("pa - section features",c)}}this.addSectionIntent=builder.PreviewListIntent.AddSection;var d=this.modelTree.getPageNodeById(this.storyServices.story.selectedPage);this.aliasesOnThisPage=_(d.children).filter(function(a){return!(a.userHidden||!a.alias&&"Contact"!==a.contentElementType)}).map(function(a){return a.alias||a.contentElementType}).value();var e=this.selectedOffersMap[this.applicationParameters.tpaTypes.Stores.type],f=this.contentManager.suggestedSections(e);this.filterPageSectionsByType(d,f.suggestions,"Contact"),this.filterPageSectionsByType(d,f.suggestions,"Blog",!0),this.isHomePage&&this.modifySectionRecommendationsBySelectedOffer(f),this.sectionManager.postProcessSuggestedTpaSections(f.suggestions),f.suggestions=_.uniq(f.suggestions,!1,"id"),f.selectedIndex=_.findIndex(f.suggestions,function(b){return!a.contentModelTree.isSectionInTree(b.rawSectionBrief||b)}),f.remainingSuggestedSections=_.filter(f.suggestions,function(b){return!a.contentModelTree.isSectionInTree(b.rawSectionBrief||b)&&b.isRecommendedForPage}).length,this.recommendedSections=f.suggestions.filter(function(a){return a.isRecommendedForPage}),this.otherSections=f.suggestions.filter(function(a){return a.isRecommendedForSite&&!a.isRecommendedForPage}),this.moreSections=f.suggestions.filter(function(a){return!a.isRecommendedForSite}),this.moreSections=_.without.apply(_,[this.moreSections].concat(this.recommendedSections)),this.enforceVisibleSectionLimit(),this.remainingSuggestedSections=f.remainingSuggestedSections,this.setOriginForBI(),this.setSelectedSection(f.suggestions[f.selectedIndex])},a.prototype.modifySectionRecommendationsBySelectedOffer=function(a){this.sectionManager.modifySectionRecommendationsBySelectedOffer(a,this.selectedOffersMap)},a.prototype.getTpaNode=function(a){return _.find(this.modelTree.getTpaNodes(),{contentElementType:a})},a.prototype.prepareDrafts=function(a){return this.sectionManager.prepareDrafts(this.selectedSection,a)},a.prototype.isListSection=function(){return this.selectedSection.rawSectionBrief.cardinality>1},a.prototype.reloadAfterAddingSection=function(a){this.pageMode||this.assistantManager.isInActiveTask()?(this.overlayManager.unlockDropTarget(),this.overlayManager.clearDropTarget(),this.overlayManager.lockDropTarget(a),this.pageMode?this.applicationState.goToAddSectionMode():(this.initAddSectionMode(),this.dropTargetCalculator.initDropTarget())):(this.applicationState.setContentFocus(a,"body",!0),this.applicationState.goToEditMode())},a}();AddSection.MaxInitialVisibleSections=12,AddSection.OpeningHours="OpeningHours",AddSection.tpaWidgetAliases={Stores_Slider_Gallery_Widget:"Product Slider",Stores_Product_specific_Widget:"Featured Product",Blog_Post_Gallery:"From The Blog",GetSubscribers_Widget:"Subscribe"},angular.module("siteGeneratorBuilderInternal").component("addSection",{templateUrl:"views/builder/add-section.html",controller:AddSection,bindings:{pageMode:"="}});var builder;!function(a){var b;!function(a){a[a.AddSection=0]="AddSection",a[a.AddPage=1]="AddPage",a[a.ChangeSection=2]="ChangeSection"}(b=a.PreviewListIntent||(a.PreviewListIntent={}));var c=function(){function b(c,d,e,f,g,h,i,j,k,l,m,n,o,p,q,r,s,t,u,v,w,x,y,z,A,B,C,D,E,F,G,H,I,J,K,L,M){var N=this;this.$scope=c,this.$state=d,this.undoRedo=e,this.$timeout=f,this.CcDialogBuilder=g,this.$translate=h,this.$q=i,this.$element=j,this.spinnerService=k,this.sectionManager=l,this.mobileSectionManager=m,this.pagesManager=n,this.storyServices=o,this.presetHelpers=p,this.applicationState=q,this.sitePartTypes=r,this.overlayManager=s,this.flags=t,this.$window=u,this.tpaService=v,this.setTpaContentService=w,this.dropTargetCalculator=x,this.layoutSelectionStoreProvider=y,this.consumerBiLogger=z,this.consumerBiLoggerHelpers=A,this.obMonitoring=B,this.initService=C,this.silentPageBuilder=D,this.colorationUtils=E,this.getStageBackgroundColors=F,this.assistantManager=G,this.consumerMenu=H,this.$injector=I,this.mergedHeaderService=J,this.presetPreviewFlagUtils=K,this.headerPresetUtils=L,this.simpleSolutionManager=M,this.isDoneLoading=!1,this.cancelTimeout=null,this.doNotUpdatePresetConfiguration=!1,this.unsettingPreviewIsInView=!1,this.shouldShowMenu=!1,this.maxPlaceholdersToShow=4,this.isAllPresetsLoaded=!1,this.cachedSiblings=new Map,this.handleSelection=_.debounce(function(c){N.obMonitoring.mark({name:"addSection"}),N.applicationState.isSectionColorsMode()||N.spinnerService.waitForMe(b.SpinnerAddSection);var d=N.getSelectedPreviewData(c,"click");N.onSelectionStart&&N.onSelectionStart({data:d}),N.reportBIStart(d);var e=N.$q.when();return N.intent!==a.PreviewListIntent.AddPage||c.node.isTpa||(e=N.addPageAndSection(!c.node.isTpaWidget)),N.intent===a.PreviewListIntent.AddPage&&N.flags.addAllPageMode?e.then(function(a){return a?N.silentPageBuilder.constructAnyPage(a):N.$q.when()}):e.then(function(){return N.handlePreviewSelected(c)}).then(function(c){c&&"Service"===c.contentElementType&&c.children&&c.children.length&&N.intent===a.PreviewListIntent.AddSection&&N.setTpaContentService.addSingleServiceToTpa(c),N.reportBISuccess(c,d),N.intent!==a.PreviewListIntent.ChangeSection&&N.onSectionAdded(c),N.applicationState.refreshContentFocus(),N.spinnerService.imDone(b.SpinnerAddSection),N.$timeout(function(){N.current=N.previewAboutToBeSet,N.obMonitoring.measure({name:"addSection"}),N.onSelectionChanged&&N.onSelectionChanged({data:d})},10),N.$timeout(function(){N.ensurePreviewVisible(N.current)},300)})},400,{leading:!1,trailing:!0}),"undefined"==typeof this.scale&&(this.scale=b.PreviewListScale);var O=this.$element.find(".preview-list");this.previewListElement=O[0],O.bind("scroll",function(){N.previewListElement.scrollTop+N.previewListElement.offsetHeight>=N.previewListElement.scrollHeight-50&&c.$apply(function(){return N.addPreviews(N.timestamp)})}),c.$watch("$ctrl.nodes",function(){if(N.cancelThrottlingInterval(),angular.element(N.previewListElement).scrollTop(0),N.intent===a.PreviewListIntent.AddPage&&N.nodes&&"blank"===_.first(N.nodes).id)return void(N.showBlankPage=!0);N.showBlankPage=!1;var b=N.nodes&&N.nodes[0],c=N.applicationState.getPageNodeInFocus();N.flags.mergedHeader&&N.intent===a.PreviewListIntent.ChangeSection&&b&&!b.isTpa&&N.isHeaderNode(b)&&N.previewHeaderWithFirstSection(c);var d=N.timestamp;N.strategy.generateListOfPreviews(N.nodes).then(function(a){N.timestamp===d&&(a=N.handleHeaderPreviews(a),N.$timeout(function(){return N.initializeThrottlingMechanism(a,d)},0))})}),c.$on("switchPreset",function(a,b){var c=N.previews.indexOf(N.current),d=c+b;d>=N.previews.length?d=0:0>d&&(d=N.previews.length-1),N.selectPreset(N.previews[d])}),c.$on("$destroy",function(){if(N.cancelThrottlingInterval(),N.layoutSelectionStoreProvider.resetPresetSelections(),N.intent===a.PreviewListIntent.AddPage)N.consumerBiLogger.pagesManager.pagesPanelWasClosed("add page");else if(N.selectedSection)N.consumerBiLogger.sectionManagement.sectionPanelClosed("",N.selectedSection.ceType,N.selectedSection.id);else if(N.nodes){var b=N.nodes[0];N.consumerBiLogger.sectionManagement.sectionPanelClosed(b.getId(),b.getContentElementType(),b.alias)}})}return b.$inject=["$scope","$state","undoRedo","$timeout","CcDialogBuilder","$translate","$q","$element","spinnerService","sectionManager","mobileSectionManager","pagesManager","storyServices","presetHelpers","applicationState","sitePartTypes","overlayManager","flags","$window","tpaService","setTpaContentService","dropTargetCalculator","layoutSelectionStoreProvider","consumerBiLogger","consumerBiLoggerHelpers","obMonitoring","initService","silentPageBuilder","colorationUtils","getStageBackgroundColors","assistantManager","consumerMenu","$injector","mergedHeaderService","presetPreviewFlagUtils","headerPresetUtils","simpleSolutionManager"],b.prototype.$onInit=function(){var b=this;this.initPlaceholders(),this.initService.loaded().then(function(){return b.colorationUtils.initialize()}).then(function(){switch(b.intent){case a.PreviewListIntent.AddPage:b.pageMode=!0,b.consumerBiLogger.pagesManager.addPagePanelIsLoaded();break;case a.PreviewListIntent.AddSection:b.consumerBiLogger.sectionManagement.addSectionPanelIsLoaded()}})},b.prototype.initPlaceholders=function(){this.isShowPlaceholdersInPresets&&(this.placeholders=[])},Object.defineProperty(b.prototype,"isShowPlaceholdersInPresets",{get:function(){return this.intent!==a.PreviewListIntent.AddPage&&!this.applicationState.isSectionColorsMode()},enumerable:!0,configurable:!0}),Object.defineProperty(b.prototype,"overlayTitle",{get:function(){return this.applicationState.isSectionColorsMode()?this.$translate("preset-title.change-color"):this.applicationState.isSwitchPresetMode()?this.$translate("preset-title.switch-preset"):this.intent===a.PreviewListIntent.AddPage?this.$translate("preset-title.add"):this.nodes[0].isTpaNode()?this.$translate("preset-title.click"):this.$translate("preset-title.click-or-drag")},enumerable:!0,configurable:!0}),b.prototype.handleHeaderPreviews=function(a){return this.flags.mergedHeader?this.headerPresetUtils.addHeaderPreviews(a,this.nodes[0]):a},b.prototype.getPlaceholderBackgroundColor=function(){var a=this.colorationUtils.getPaletteColors(),b=this.getStageBackgroundColors(a).gradientStart;return{"background-color":"rgba("+b.rgba()+")"}},b.prototype.getPlaceholderClassName=function(a){return this.applicationState.isInMobileEditMode()?"preview-placeholder-mobile":"preview-placeholder"},b.prototype.isSelected=function(a){if(this.flags.mergedHeader)return a.isSelected;var b=a&&(a.id||a.preset&&a.preset.id),c=this.current&&this.tpaService.getChosenPresetId(this.current.node);return a===this.current||b===c&&void 0!==b},b.prototype.isTpaSelected=function(a){var b=this.current&&this.tpaService.getChosenPresetId(this.current.node),c=a&&(a.id||a.preset&&a.preset.id);return c&&c===b},b.prototype.isGeneralDescriptionPreview=function(a){return a&&this.isGeneralDescription(a.node)},b.prototype.isGeneralDescription=function(a){return a&&"GeneralDescription"===a.getContentElementType()},b.prototype.isHeaderPreview=function(a){return a&&this.isHeaderNode(a.node)},b.prototype.isHeaderNode=function(a){return this.isGeneralDescription(a)&&"footer"!==a.containerPageId},b.prototype.isFooterPreview=function(a){return a&&this.isFooterNode(a.node)},b.prototype.isFooterNode=function(a){return a&&"footer"===a.containerPageId},b.prototype.isSelectedInView=function(){var a=this.$element.find(".preview-list-container .cc-scrollbar"),b=this.$element.find(".selected.preview-section");if(0===b.length)return!1;var c=a.scrollTop(),d=c+a.outerHeight(),e=b.position().top,f=e+b.outerHeight();return f>=c&&d>=e},Object.defineProperty(b.prototype,"body",{get:function(){var a=this.applicationState.getContentFocus();return null===a?!0:a.sitePart!==this.sitePartTypes.HEADER&&a.sitePart!==this.sitePartTypes.FOOTER},enumerable:!0,configurable:!0}),b.prototype.createBlankPage=function(){var a=this,c=this.consumerBiLoggerHelpers.getEditMode(),d=this.selectedSection.ceType,e=this.selectedSection.id,f=this.selectedSection.origin,g=1,h=1,i="",j="",k="";this.consumerBiLogger.pagesManager.clickOnDesiredNewPage(d,e,f,g,h,i,!1),this.applicationState.clearContentFocus(),this.spinnerService.waitForMe(b.SpinnerAddBlankPage),this.pageName=this.$translate("general.blank"),this.addPageAndSection().then(function(){return a.consumerMenu.calcMenuAnchors()}).then(function(){return a.spinnerService.imDone(b.SpinnerAddBlankPage),a.undoRedo.captureOperation(),a.applicationState.clearContentFocus(),a.storyServices.recalculateCurrentPage()}).then(function(){a.consumerBiLogger.pagesManager.addNewPageSuccess(c,d,e,j,f,g,h,i,k,"by user",!1),a.applicationState.goToAddSectionMode()})},b.prototype.popupAfterPageAdd=function(){var a=this;return this.CcDialogBuilder.showFirstTimeNotice({heading:this.$translate("popups.after-page-add.heading"),text:this.$translate("popups.after-page-add.text"),acceptButtonText:this.$translate("popups.after-page-add.accept"),icon:"badge.gif",hideFirstTimeCheckBox:!0,onHelp:function(){a.CcDialogBuilder.showSupportIframe(a.$translate("help.popup.newPageAdded"),CONSUMER_DIALOGS.AFTER_PAGE_ADD_HELP)},biDialogName:CONSUMER_DIALOGS.AFTER_PAGE_ADD})},b.prototype.popupPageAddInitiation=function(){return this.CcDialogBuilder.showFirstTimeNotice({heading:this.$translate("popups.after-page-add.heading"),text:this.$translate("popups.after-page-add.text"),acceptButtonText:this.$translate("popups.after-page-add.accept"),dontBotherMeText:this.$translate("general.dont-show-again"),dontBotherMe:!0,biDialogName:CONSUMER_DIALOGS.AFTER_PAGE_ADD_FIRST_TIME})},b.prototype.addPageAndSection=function(a){var b=this;void 0===a&&(a=!0);var c=this.pageName||"Untitled",d=this.pagesManager.addPage(c).then(function(a){return b.storyServices.story.selectedPage=a.id,b.pagesManager.goToPage(a.id)});return this.applicationState.isSilent()?d:d.then(function(c){var d="popups.after-page-add",e=b.storyServices.story.popupConfigurations[d];return!e&&a&&b.popupAfterPageAdd().then(function(a){b.storyServices.story.popupConfigurations[d]=!0}),c})},b.prototype.handlePreviewSelected=function(b){if(this.applicationState.isInMobileEditMode())return this.mobileSectionManager.handlePreviewSelected(b);var c=this.intent===a.PreviewListIntent.ChangeSection;return this.sectionManager.handlePreviewSelected(b,c)},b.prototype.reportBISuccess=function(b,c){var d=b&&b.isTpaNode();if(d&&(c.instanceId=this.tpaService.getInstanceId(b),(this.intent===a.PreviewListIntent.AddPage||this.intent===a.PreviewListIntent.AddSection)&&this.sendBIForTpaPackageSuccess(c)),this.applicationState.isSectionColorsMode())return void this.consumerBiLogger.sectionDesign.changeColorSuccess(c.sectionAlias,c.sectionType);switch(this.intent){case a.PreviewListIntent.AddPage:c.instanceId&&this.consumerBiLogger.provisioning.tpaIntent(c.instanceId,c.appId,"ADD_APP","ADI"),this.consumerBiLogger.pagesManager.addNewPageSuccess(c.editMode,c.sectionType,c.sectionAlias,b.getId(),c.origin,c.totalPreviews,c.selectedIndex,"",c.appId,"by user",c.isColumns);break;case a.PreviewListIntent.ChangeSection:this.consumerBiLogger.sectionManagement.changeSectionLayoutSuccess(c.editMode,c.node.getId(),c.sectionType,c.sectionAlias,c.totalPreviews,c.selectedIndex,"",c.appId,c.isColumns);break;case a.PreviewListIntent.AddSection:c.instanceId&&this.consumerBiLogger.provisioning.tpaIntent(c.instanceId,c.appId,"ADD_APP","ADI"),this.consumerBiLogger.sectionManagement.addSectionToPageSuccess(c.editMode,b.getId(),c.addPosition,c.sectionType,c.sectionAlias,c.origin,c.totalPreviews,c.selectedIndex,"",c.addType,c.appId,c.isColumns,SectionManager.isNodeDuplicated(b))}},b.prototype.sendBIForTpaPackageSuccess=function(a){this.consumerBiLogger.pagesManager.addTpaPackageSuccess(this.consumerBiLoggerHelpers.extraPagesCount(),a.appId,a.isColumns,Date.now()-a.startTime,a.node.getId()),this.consumerBiLoggerHelpers.resetExtraPagesCount()},b.prototype.getSelectedPreviewData=function(b,c){var d=this,e=function(a){var c=d.tpaService.getAppId(a);if(b.node.isTpaWidget){var e=b.node.contentElementType.split("_")[0];return d.tpaService.getAppIdByType(e)}return c},f=this.nodes[0],g=function(a){return{ceType:a.ceType,alias:a.id,origin:a.origin}},h=function(a){return{ceType:a.getSpecificContentElementType(),alias:a.alias,origin:null}},i=this.intent!==a.PreviewListIntent.ChangeSection?g(this.selectedSection):h(f);return{preview:b,addType:c,node:f,appId:e(b.node),totalPreviews:this.previews.length,selectedIndex:this.previews.indexOf(b)+1,presetId:b.preset&&b.preset.id||"current",isColumns:!(!b.preset||!b.preset.flag_useColumns),sectionType:i.ceType,sectionAlias:i.alias,origin:i.origin,startTime:Date.now(),addPosition:this.sectionManager.getAddSectionPosition(),editMode:this.consumerBiLoggerHelpers.getEditMode()}},b.prototype.reportBIStart=function(b){if(this.consumerBiLoggerHelpers.resetExtraPagesCount(),this.applicationState.isSectionColorsMode())this.consumerBiLogger.sectionDesign.changeColorClick(b.sectionAlias,b.sectionType);else switch(this.intent){case a.PreviewListIntent.ChangeSection:this.consumerBiLogger.sectionManagement.changeASectionLayout(b.node.getId(),b.sectionType,b.sectionAlias,b.totalPreviews,b.selectedIndex,"",b.appId,b.isColumns);break;case a.PreviewListIntent.AddSection:this.consumerBiLogger.sectionManagement.addSectionToPage(b.sectionType,b.sectionAlias,b.addPosition,b.origin,b.totalPreviews,b.selectedIndex,"",b.addType,b.appId,b.isColumns,SectionManager.isNodeDuplicated(b.node));break;case a.PreviewListIntent.AddPage:this.consumerBiLogger.pagesManager.clickOnDesiredNewPage(b.sectionType,b.sectionAlias,b.origin,b.totalPreviews,b.selectedIndex,"",b.isColumns)}},b.prototype.onSectionAdded=function(a){var b=this,c=b.applicationState,d=b.sitePartTypes,e=b.$state;this.doNotUpdatePresetConfiguration=!0,e.current.name===config.STATES.BUILDER_ADD_SECTION?this.reloadAfterAdd&&this.reloadAfterAdd({$nodeId:a.getId()}):(c.setContentFocus(a.getId(),d.BODY,!0),c.goToBuilder())},b.prototype.updateSelectedProp=function(a){var b=this.previews.find(function(a){return a.isSelected});b&&(b.isSelected=!1),a.isSelected=!0},b.prototype.selectPreset=function(a,b){if(this.applicationState.isAddSectionMode()||this.updateSelectedProp(a),b&&this.flags.prettyAlgo&&this.flags.debug&&(b.metaKey||b.ctrlKey)){var c=this.$injector.get("prettyAlgoDX"),d=this.overlayManager.getDropTargetSection();return void c.openRuleCreationDialog(a,d)}this.previewAboutToBeSet!==a&&(this.unsettingPreviewIsInView=this.isSelectedInView(),this.previewAboutToBeSet=a,this.handleSelection(a))},b.prototype.ensurePreviewVisible=function(a){var b=this.previews.indexOf(a),c=angular.element(this.previewListElement).find(".preview-section")[b];if(c){var d=c.offsetTop+c.offsetHeight,e=this.previewListElement.offsetHeight+this.previewListElement.scrollTop;d>e?this.previewListElement.scrollTop+=20+d-e:c.offsetTop<this.previewListElement.scrollTop&&(this.previewListElement.scrollTop-=20+this.previewListElement.scrollTop-c.offsetTop)}},b.prototype.isDebugMode=function(){return!!this.flags.debugMode},b.prototype.debugInfo=function(a){this.$window.preview=a,a.preset&&(this.$window.console.log("%cPreset ID: "+a.preset.id,"color:blue"),a.preset.data.priority&&this.$window.console.log("%cPreset Priority: "+a.preset.data.priority[a.node.contentElementType]+"\nContent Element Type: "+a.node.contentElementType,"color:blue")),this.$window.console.log("%cSignature:\n"+this.strategy.getPresetVisualSignature(a),"color:blue"),this.$window.console.log("%cYou can use the following variables\n'preview.node', \n'preview.preset', \n'preview.solution'\n","color:orange")},b.prototype.postAdd=function(a){var b=this;return this.initiateInterval(a)?void 0:this.$q.when().then(function(){b.cancelThrottlingInterval()})},b.prototype.addPresetToQueue=function(a,b){var c=this;this.strategy.calculatePresetPreview(a).then(function(a){return c.timestamp===b?(a&&(c.flags.mergedHeader&&a.isTpa&&(a.isSelected=c.isTpaSelected(a)),c.addPresetToListIfUnique(c.previews,a)),c.postAdd(b)):void 0})},b.prototype.addPresetToListIfUnique=function(a,b){if(this.strategy.isUnique(b))a.push(b);else if(this.isDebugMode()){var c=this.strategy.getPresetVisualSignature(b),d=b.preset&&b.preset.id;this.$window.console.log("%cFound duplication in presets, ignore.\nPreset ID: "+d+"\nSignature:\n"+c,"color:blue")}},b.prototype.isTpaMode=function(){return this.nodes[0].isTpaNode&&this.nodes[0].isTpaNode()},b.prototype.addPreviews=function(b){if(!this.isTpaMode()){switch(this.intent){case a.PreviewListIntent.AddPage:this.consumerBiLogger.sectionManagement.showMoreSectionPageLayoutsOnScroll("",this.selectedSection.ceType,this.selectedSection.id,"add page");break;case a.PreviewListIntent.AddSection:this.consumerBiLogger.sectionManagement.showMoreSectionPageLayoutsOnScroll("",this.selectedSection.ceType,this.selectedSection.id,"add section");break;case a.PreviewListIntent.ChangeSection:var c=this.nodes[0];this.consumerBiLogger.sectionManagement.showMoreSectionPageLayoutsOnScroll(c.getId(),c.getContentElementType(),c.alias,"replace section")}this.limit=Math.max(this.limit,this.previews.length+3),this.cancelTimeout||this.initiateInterval(b)}},b.prototype.initializeThrottlingMechanism=function(b,c){this.layoutSelectionStoreProvider.resetPresetSelections(),this.allPreviews=b,this.doNotUpdatePresetConfiguration=!1,this.previews=[],this.current&&this.intent===a.PreviewListIntent.ChangeSection&&!this.isTpaMode()&&(this.flags.mergedHeader&&(this.current.isSelected=!0),this.addCurrentPresetToList()),this.limit=5,this.numberOfIterations=0,this.initiateInterval(c)},b.prototype.addCurrentPresetToList=function(){this.flags.mergedHeader&&this.isHeaderPreview(this.current)&&(this.current.flags=(this.presetPreviewFlagUtils.getCurrentPageFlags(this.current.node)||[]).concat(["limitLastPresetHeight"])),this.addPresetToListIfUnique(this.previews,this.current)},b.prototype.initiateInterval=function(a){var b=this;if(this.isShowPlaceholdersInPresets&&(this.isAllPresetsLoaded=!1),this.timestamp!==a)return!1;this.isDoneLoading=!1,this.isShowPlaceholdersInPresets&&this.showPlaceholders();var c=this.allPreviews.length-this.numberOfIterations;if(0===c){var d=this.strategy.generateNextChunkOfPreviews(this.nodes);_.isEmpty(d)||(this.allPreviews=[].concat.call(this.allPreviews,d),c=this.allPreviews.length-this.numberOfIterations),this.loadCallback&&this.loadCallback({total:this.previews.length})}return c>0&&(!this.strategy.shouldLoadPreviousOnScroll()||this.previews.length<this.limit||this.isLoadMorePresetsAccordingToScroll())?(this.flags.noRandomForAutomationTests?(this.cancelTimeout=!0,this.addPresetToQueue(this.allPreviews[this.numberOfIterations++],a)):this.cancelTimeout=this.$timeout(function(){b.addPresetToQueue(b.allPreviews[b.numberOfIterations++],a)},100),!0):void(this.isShowPlaceholdersInPresets&&0===c&&this.onAllPresetsLoaded())},b.prototype.onAllPresetsLoaded=function(){this.isAllPresetsLoaded=!0,this.initPlaceholders()},b.prototype.showPlaceholders=function(){if(this.isShowPlaceholdersInPresets&&!this.isTpaMode()&&this.placeholders&&0===this.placeholders.length)for(var a=0;a<this.maxPlaceholdersToShow;a++){
var b={id:a};this.placeholders.push(b)}},b.prototype.isLoadMorePresetsAccordingToScroll=function(){var a=$(".preview-list").height(),b=0;return $('.preview-section:not(".preview-section-placeholder")').each(function(){b+=$(this).outerHeight(!0)||0}),a>b-50},b.prototype.onPresetsLoadingFinished=function(){this.cancelTimeout=null,this.timestamp=(new Date).getTime(),this.isDoneLoading=!0},b.prototype.cancelThrottlingInterval=function(){this.cancelTimeout&&(this.$timeout.cancel(this.cancelTimeout),this.initPlaceholders()),this.onPresetsLoadingFinished()},b.prototype.onDragStart=function(a,b){var c=this.getSelectedPreviewData(b,"drag");b.selectionData=c,this.consumerBiLogger.sectionManagement.addSectionToPageStartDragging(c.sectionType,c.sectionAlias,c.origin,c.totalPreviews,c.selectedIndex,"",c.addType,c.appId),this.overlayManager.data.draggedPresetPreview=b},b.prototype.onDrop=function(){var a=this,c=this.overlayManager.data.draggedPresetPreview,d=c.selectionData;this.reportBIStart(d),this.spinnerService.waitForMe(b.SpinnerDropSection),this.handlePreviewSelected(c).then(function(c){a.onSectionAdded(c),a.reportBISuccess(c,d),a.spinnerService.imDone(b.SpinnerDropSection)})},b.prototype.onDragEnd=function(a){this.overlayManager.data.draggedPresetPreview=null},b.prototype.onCanceled=function(a){this.dropTargetCalculator.updateDropTarget()},b.prototype.onPresetPreviewBeforeRender=function(a){this.doNotUpdatePresetConfiguration||this.sectionManager.setConfigurationForSection(a)},b.prototype.onHoverPreview=function(a,c){var d=angular.element(a.currentTarget),e=d.find(b.PreviewContainerSelector),f=e.find(b.TpaPreviewSelector),g=d.find(b.PreviewFlagSelector);if(!f[0]||f.attr("is-loaded")){var h=e.height(),i=d.height()-d.find(".browser-toolbar").height()-d.find(".browser-bottom").height();if(c){g.hide();var j=h-i;e.css({"margin-top":Math.min(-j,0),transition:"margin-top "+j/80+"s .15s"}),_.each(e.find(".video-bg"),function(a){return a.play()})}else e.css({"margin-top":0,transition:"margin-top 1s"}),_.each(e.find(".video-bg"),function(a){return a.pause()}),g.show()}},Object.defineProperty(b.prototype,"isMenuVisible",{get:function(){if(this.assistantManager.isInActiveTask()){var a=this.assistantManager.getCustomTaskData("showSectionDesignMenu");if(void 0!==a)return a}return this.shouldShowMenu},enumerable:!0,configurable:!0}),b.prototype.showSectionDesignMenu=function(){this.shouldShowMenu=!0},b.prototype.hideSectionDesignMenu=function(){this.shouldShowMenu=!1},b.prototype.isPresetResponsive=function(a){return a.preset&&_.any(a.preset.data.groups,function(a){return a.columns&&a.columns.enable})},b.prototype.shouldShowCustomizeDesignDropdown=function(a){return!this.applicationState.isAddSectionMode()&&!this.applicationState.isAddPage()&&!this.applicationState.isInMobileEditMode()&&!this.applicationState.isSectionColorsMode()&&!a.isTpa&&(!this.flags.mergedHeader&&!this.isGeneralDescriptionPreview(a)||this.flags.mergedHeader&&!this.isFooterPreview(a))},b.prototype.printPrettyAlgoInfo=function(a){console.log(a.prettyAlgo)},b.prototype.prettyAlgoGetRuleNames=function(a){return a.prettyAlgo&&a.prettyAlgo.rules?a.prettyAlgo.rules.map(function(a){return a.name}):[]},b.prototype.printBgOpacityData=function(a){console.log("opacityDebugData: "),_.each(a.solution,function(a){_.each(a.opacityDebugData,function(a,b){console.log(b,":",a)})})},b.prototype.previewHeaderWithFirstSection=function(a){var b=a.children[1];if(b){var c=this.simpleSolutionManager.getSectionSolution(a.id,b.id);this.firstSectionPreview=this.presetHelpers.createCurrentSectionPreview(b.id,c)}},b.prototype.wrapWithSiblingsIfNeeded=function(a){if(this.flags.mergedHeader&&this.firstSectionPreview){if(this.cachedSiblings.has(a))return this.cachedSiblings.get(a);var b=[a,this.firstSectionPreview];return this.cachedSiblings.set(a,b),b}return a},b}();c.PreviewListWidth=360,c.MobilePreviewListWidth=276,c.PreviewListScale=.25,c.PreviewContainerSelector=".preview-content",c.TpaPreviewSelector="tpa-preview",c.PreviewFlagSelector=".preview-flag-message",c.SpinnerAddBlankPage="addblankpage",c.SpinnerAddSection="addsection",c.SpinnerDropSection="dropsection",a.PreviewList=c,angular.module("siteGeneratorBuilderInternal").directive("sectionReady",["$parse",function(a){return{restrict:"A",link:function(a,b,c){b.ready(function(){var b=a.$ctrl;b.isShowPlaceholdersInPresets&&b.placeholders.length>0&&(b.placeholders.pop(),b.showPlaceholders(!0))})}}}]).component("previewList",{templateUrl:"views/builder/preview-list.html",controller:a.PreviewList,bindings:{nodes:"=",strategy:"<",intent:"<",current:"=?",scale:"<",pageName:"=",draggable:"=",selectedSection:"=?",reloadAfterAdd:"&",loadCallback:"&?",onSelectionStart:"&",onSelectionChanged:"&"}})}(builder||(builder={}));var SwitchPreset=function(){function a(a,b,c,d,e,f,g,h,i,j,k,l,m,n){var o=this;this.nodeFetcher=a,this.applicationState=b,this.storyServices=c,this.simpleSolutionManager=d,this.layoutSolver=e,this.CcDialogBuilder=f,this.initService=g,this.flags=h,this.presetHelpers=i,this.consumerBiLogger=j,this.$translate=k,this.mediaEditorManager=l,this.pubSub=m,this.presetsStrategyFactory=n,this.initNodes=function(){var a=o.nodeFetcher.getCurrentNodeResult(),b=a&&a.node,c=o.getSectionSolution("body"===a.sitePart?b.getId():a.sitePart);o.current=o.presetHelpers.createCurrentSectionPreview(b,c),o.nodes=[b],o.flags.mergedHeader&&"body"!==a.sitePart&&(o.partSuffix="-"+a.sitePart)},this.init()}return a.$inject=["nodeFetcher","applicationState","storyServices","simpleSolutionManager","layoutSolver","CcDialogBuilder","initService","flags","presetHelpers","consumerBiLogger","$translate","mediaEditorManager","pubSub","presetsStrategyFactory"],a.prototype.init=function(){var a=this;this.initService.loaded().then(function(){a.initNodes(),a.flags.onStageIndications&&(a.unsubscribe=a.pubSub.subscribe(PubSub.events.CONTENT_UPDATED,a.initNodes)),a.switchPresetStrategy=a.presetsStrategyFactory.createFromNode(a.nodes[0],builder.PresetsStrategyMode.Change),a.switchPresetIntent=builder.PreviewListIntent.ChangeSection})},a.prototype.$onDestroy=function(){this.flags.onStageIndications&&this.unsubscribe()},a.prototype.back=function(){this.applicationState.goToBuilder(!0)},a.prototype.help=function(){this.CcDialogBuilder.showSupportIframe(this.$translate("help.section.replace"),CONSUMER_DIALOGS.SECTION_REPLACE_HELP)},a.prototype.isTPA=function(){return this.nodes&&this.nodes.length>0&&this.nodes[0].isTpaNode&&this.nodes[0].isTpaNode()},a.prototype.getHeaderParagraphText=function(){return this.applicationState.isInMobileEditMode()?this.$translate("builder.section-design.mobile-headline-text"):this.isTPA()?this.getTPAHeader():this.$translate("builder.section-design.panel-header-text")},a.prototype.getTPAHeader=function(){var a=this.$translate("builder.section-design.TPA_NAME."+this.nodes[0].contentElementType);return this.$translate("builder.section-design.panel-header-text-tpa",{TPA_NAME:a})},a.prototype.goToDesignMode=function(){this.consumerBiLogger.siteDesign.designPanelIsLoaded(BIOrigins.SectionPanel),this.applicationState.goToDesignMode()},a.prototype.getSectionSolution=function(a){return"header"===a?this.layoutSolver.getSelectedSolution("header"):"footer"===a?this.layoutSolver.getSelectedSolution("footer"):this.simpleSolutionManager.getSectionSolution(this.storyServices.story.selectedPage,a)},a}();angular.module("siteGeneratorBuilderInternal").component("switchPreset",{templateUrl:"views/builder/switch-preset.html",controller:SwitchPreset});var SwitchColor=function(){function a(a,b,c,d,e,f,g,h,i,j,k,l,m){var n=this;this.nodeFetcher=a,this.applicationState=b,this.storyServices=c,this.simpleSolutionManager=d,this.layoutSolver=e,this.CcDialogBuilder=f,this.initService=g,this.flags=h,this.presetHelpers=i,this.$translate=j,this.consumerBiLogger=k,this.presetsStrategyFactory=l,this.pubSub=m,this.previewTotal=0,this.initNodes=function(){var a=n.nodeFetcher.getCurrentNodeResult(),b=a&&a.node,c=n.getSectionSolution(b.getId());n.current=n.presetHelpers.createCurrentSectionPreview(b,c),n.nodes=[b]},this.init()}return a.$inject=["nodeFetcher","applicationState","storyServices","simpleSolutionManager","layoutSolver","CcDialogBuilder","initService","flags","presetHelpers","$translate","consumerBiLogger","presetsStrategyFactory","pubSub"],Object.defineProperty(a.prototype,"titleParagraph",{get:function(){var a=1!==this.previewTotal?"builder.switch-color.panel-paragraph":"builder.switch-color.panel-paragraph-only-one-option";return this.$translate(a)},enumerable:!0,configurable:!0}),a.prototype.init=function(){var a=this;this.initService.loaded().then(function(){a.initNodes(),a.switchColorStrategy=a.presetsStrategyFactory.create(builder.PresetsStrategyType.Color,builder.PresetsStrategyMode.Change),a.switchColorIntent=builder.PreviewListIntent.ChangeSection,a.flags.onStageIndications&&(a.unsubscribe=a.pubSub.subscribe(PubSub.events.CONTENT_UPDATED,a.initNodes))})},a.prototype.$onDestroy=function(){this.flags.onStageIndications&&this.unsubscribe()},a.prototype.back=function(){this.applicationState.goToSwitchPresetMode("color-back")},a.prototype.close=function(){this.applicationState.goToBuilder(!0)},a.prototype.help=function(){this.CcDialogBuilder.showSupportIframe(this.$translate("help.section.colors"),CONSUMER_DIALOGS.SECTION_COLORS_HELP)},a.prototype.isTPA=function(){return this.nodes&&this.nodes.length>0&&this.nodes[0].isTpaNode&&this.nodes[0].isTpaNode()},a.prototype.getSectionSolution=function(a){return"header"===a?this.layoutSolver.getSelectedSolution("header"):"footer"===a?this.layoutSolver.getSelectedSolution("footer"):this.simpleSolutionManager.getSectionSolution(this.storyServices.story.selectedPage,a)},a.prototype.goToDesignPanel=function(){this.applicationState.goToSwitchPresetMode("switch-color")},a.prototype.goToColorationPanel=function(){this.consumerBiLogger.siteDesign.customizeDesignColorPaletteMode(BIOrigins.SectionColorsPanel),this.applicationState.goToColorationPanel()},a.prototype.loadCallback=function(a){this.previewTotal=a.total},a}();angular.module("siteGeneratorBuilderInternal").component("switchColor",{templateUrl:"views/builder/switch-color.html",controller:SwitchColor});var BusinessCardModal=function(){function a(b,c,d,e,f,g,h,i,j,k,l){var m=this;this.applicationState=b,this.$mdDialog=c,this.modelTree=d,this.introManager=e,this.storyServices=f,this.introContentElementGenerator=g,this.CcDialogBuilder=h,this.$translate=i,this.mediaGallery=j,this.undoRedo=k,this.consumerBiLogger=l,l.builder.businessInfoEditBusinessInfoPageView(),this.editableIntroData={},a.sections.forEach(function(a){return g.enrichIntroData(m.editableIntroData,m.getContentElementByType(a))});var n=this.editableIntroData.media.logos.length&&this.editableIntroData.media.logos[0].data;n&&(this.editableIntroData.media.logos[0].url=j.itemToThumbnailUrl(n,n.width,n.height))}return a.$inject=["applicationState","$mdDialog","modelTree","introManager","storyServices","introContentElementGenerator","CcDialogBuilder","$translate","mediaGallery","undoRedo","consumerBiLogger"],a.prototype.getContentElementByType=function(a){var b=_.find(this.modelTree.data.children,{contentElementType:a});return b.contentElement},a.prototype.apply=function(){var b=this;this.consumerBiLogger.builder.businessInfoUpdateChanges(0,0,0),this.applicationState.goToBuilder(!0),this.introManager.data=this.editableIntroData,this.introManager.data.socialLinks=this.introManager.data.socialLinks.filter(function(a){return!!a.url}),a.sections.forEach(function(a){return b.introContentElementGenerator.enrichContentElement(b.getContentElementByType(a),b.editableIntroData,!0)}),this.storyServices.emitNodeChangedClearCache(),this.undoRedo.captureOperation(),this.$mdDialog.hide(),this.consumerBiLogger.builder.businessInfoUpdateChangesSuccess()},a.prototype.cancel=function(){this.consumerBiLogger.builder.businessInfoClosePage(),this.$mdDialog.cancel()},a.prototype.help=function(){this.CcDialogBuilder.showSupportIframe(this.$translate("help.businessinfo.edit"),CONSUMER_DIALOGS.BUSINESS_CARD_HELP)},a}();BusinessCardModal.sections=["GeneralDescription","Contact","Social"],angular.module("siteGeneratorBuilderInternal").component("businessInfoModal",{templateUrl:"views/builder/business-info-modal.html",controller:BusinessCardModal});var LogoExtractionPopup=function(){function a(b,c,d,e,f,g,h,i,j,k,l,m){var n=this;this.initService=b,this.logoExtractionPopupService=c,this.builderLogoPersistence=d,this.$element=e,this.$interval=f,this.undoRedo=g,this.colorationUtils=h,this.$log=i,this.$q=j,this.flags=k,this.consumerBiLogger=l,this.defaultBackground=m,this.origin=this.logoExtractionPopupService.getOrigin(),this.consumerBiLogger.dialogs.show(null,null,null,this.getNameOfStep(this.getFirstStep()),this.origin),this.reposition(),this.interval=this.$interval(function(){n.reposition()},a.RepositionLoopDurationMs)}return a.$inject=["initService","logoExtractionPopupService","builderLogoPersistence","$element","$interval","undoRedo","colorationUtils","$log","$q","flags","consumerBiLogger","defaultBackground"],a.prototype.$onDestroy=function(){this.$interval.cancel(this.interval)},a.prototype.reposition=function(){var a=document.querySelectorAll(this.logoExtractionPopupService.getAnchorSelector());if(a.length){var b=a[a.length-1].getBoundingClientRect(),c=b.top+b.height/2,d=b.right+44,e=this.$element.get(0).getBoundingClientRect(),f=c-e.height/2,g=d;this.$element.css("top",f+"px"),this.$element.css("left",g+"px")}},a.prototype.getFirstStep=function(){switch(this.origin){case BIOrigins.HeaderPanel:return LogoCEWStep.SHOULD_I_EXTRACT_STEP;case BIOrigins.ClipartSettingsPanel:return LogoCEWStep.CREATING_PALETTE_STEP}},a.prototype.getNameOfStep=function(a){switch(a){case LogoCEWStep.SHOULD_I_EXTRACT_STEP:return"create-logo-color-palette";case LogoCEWStep.CREATING_PALETTE_STEP:return"extract-logo-color-palette";case LogoCEWStep.SHOULD_I_SAVE_STEP:return"logo-color-palette-ready"}},a.prototype.getPersistenceHandler=function(){return this.builderLogoPersistence},a.prototype.getPreparePalettePromise=function(){var a=this;return this.initService.init().then(function(){return a.colorationUtils.initialize()}).then(function(){return a.logoExtractionPopupService.getLogoColoration()}).then(function(){var b=a.colorationUtils.getLogoPalette();if(!b)return a.$log.debug("Expected to find a logo palette in colorationUtils"),a.$q.reject("Expected to find a logo palette in colorationUtils");var c={colors:b.colors,mode:a.colorationUtils.getLogoRecommendedColorationMode()};return c})},a.prototype.createLogoPaletteClick=function(a){this.consumerBiLogger.dialogs.approveChanges(null,null,null,this.getNameOfStep(a),null,this.origin)},a.prototype.skipLogoPaletteClick=function(a){this.consumerBiLogger.dialogs.cancel(null,null,null,this.getNameOfStep(a),this.origin),this.logoExtractionPopupService.hideLogoPopup()},a.prototype.saveLogoPaletteClick=function(a){this.consumerBiLogger.siteDesign.clickOnDesiredPaletteFromCustomizePallete(this.colorationUtils.numOfColors(a.colors),1,"logo",0,this.origin)},a.prototype.onDone=function(a){var b=this;if(a){var c=Date.now();this.colorationUtils.initialize().then(function(){return b.colorationUtils.useLogoColors({setColorationMode:!0,overrideMainColor:!0})}).then(function(){return b.flags.sectionBackground?b.defaultBackground.resetToDefaultBackground():void 0}).then(function(){return b.undoRedo.captureOperation(!0,!0)}).then(function(){return b.consumerBiLogger.siteDesign.clickOnDesiredPaletteFromCustomizePalleteSuccess(Date.now()-c,b.colorationUtils.numOfColors(a.colors),1,"logo",0,b.origin)})}this.logoExtractionPopupService.hideLogoPopup()},a}();LogoExtractionPopup.RepositionLoopDurationMs=200,angular.module("siteGeneratorStaticsConsumerAppInternal").component("logoExtractionPopup",{controller:LogoExtractionPopup,templateUrl:"views/builder/logo-extraction-popup.html"});var PanelMessage=function(){function a(){}return a}();angular.module("siteGeneratorBuilderInternal").component("panelMessage",{templateUrl:"views/builder/panel-message.html",transclude:!0,controller:PanelMessage});var SectionPanelManager=function(){function a(a){this.nodeFetcher=a}return a.$inject=["nodeFetcher"],a.prototype.getSectionFromContentId=function(a){var b=this.nodeFetcher.getNode(a);return{node:b&&b.node,sitePart:b&&b.sitePart}},a}();angular.module("siteGeneratorStaticsConsumerAppInternal").service("sectionPanelManager",SectionPanelManager);var __assign=this&&this.__assign||Object.assign||function(a){for(var b,c=1,d=arguments.length;d>c;c++){b=arguments[c];for(var e in b)Object.prototype.hasOwnProperty.call(b,e)&&(a[e]=b[e])}return a},SectionBackgroundManager=function(){function a(a,b,c,d,e,f,g,h,i,j,k,l,m,n,o,p,q,r,s,t,u,v,w,x,y,z,A,B){this.sectionBackgroundService=a,this.$q=b,this.$stateParams=c,this.applicationState=d,this.nodeFetcher=e,this.storyServices=f,this.patternService=g,this.designKitParameters=h,this.previewColors=i,this.undoRedo=j,this.clientTopology=k,this.consumerMediaUtils=l,this.mediaOrganizeDataAdapter=m,this.contentElementFieldManager=n,this.consumerBiLoggerHelpers=o,this.overlayManager=p,this.mediaGallery=q,this.simpleSolutionManager=r,this.flags=s,this.consumerBiLogger=t,this.wizardService=u,this.sitePartTypes=v,this.designKit=w,this.PageFeatureList=x,this.$log=y,this.defaultBackground=z,this.backgroundScrollService=A,this.miscUtils=B}return a.$inject=["sectionBackgroundService","$q","$stateParams","applicationState","nodeFetcher","storyServices","patternService","designKitParameters","previewColors","undoRedo","clientTopology","consumerMediaUtils","mediaOrganizeDataAdapter","contentElementFieldManager","consumerBiLoggerHelpers","overlayManager","mediaGallery","simpleSolutionManager","flags","consumerBiLogger","wizardService","sitePartTypes","designKit","PageFeatureList","$log","defaultBackground","backgroundScrollService","miscUtils"],a.prototype.isBackgroundHidden=function(){var a=this.nodeFetcher.getCurrentNodeResult(),b=a&&a.sitePart===this.sitePartTypes.BODY&&a.node;return!!b&&!b.isList()&&this.sectionBackgroundService.isBackgroundHidden(b)},Object.defineProperty(a.prototype,"mode",{get:function(){var a=this.$stateParams.mode;switch(a){case"header":return"header";case"list":return"list";default:return"none"}},enumerable:!0,configurable:!0}),a.prototype.node=function(){return this.nodeFetcher.getCurrentNode()},a.prototype.extractNodeByMode=function(a,b){return"header"===b?a.children.find(function(a){return"ListHeader"===a.contentElementType}):"list"===b?a.children.find(function(a){return"ListFooter"===a.contentElementType}):a},a.prototype.contentElement=function(){var a=_.get(this.extractNodeByMode(this.node(),this.mode),"contentElement");if(!a)throw"there is no contentElement";return a},Object.defineProperty(a.prototype,"selectedBackgroundForCurrentMode",{get:function(){switch(this.mode){case"header":return this.sectionBackgroundService.getBackground(this.node(),"header");default:return this.sectionBackgroundService.getBackground(this.node())}},enumerable:!0,configurable:!0}),Object.defineProperty(a.prototype,"bgPart",{get:function(){return"header"===this.mode?"header":"body"},enumerable:!0,configurable:!0}),a.prototype.selectedAligment=function(){var a=this.node();return this.sectionBackgroundService.getBackgroundAlignment(a,this.bgPart)},a.prototype.setAligmentOption=function(a){var b=this.node();this.sectionBackgroundService.setBackgroundAlignment(b,a,this.bgPart),this.sectionBackgroundService.updateViewer(b)},a.prototype.setBgBackgroundColors=function(a,b){var c=this,d=this.selectedBackgroundForCurrentMode,e=0,f=b.length,g=a.map(function(a){if("pattern"===a.mediaType){var g=void 0;return g=c.isEqual(a,d)?d.backgroundColor:b[e++%f],__assign({},a,{backgroundColor:g})}if("bgImage"===a.mediaType){var h=c.getCurrentListSpan(),i=c.defaultBackground.getDefaultBackgroundConfForSection(h,"header"===c.mode,a);return i>=0?__assign({},a,{backgroundColor:_.find(b,function(a){return a.confId===i})}):a}return a});return g},a.prototype.validateBackgroundList=function(a){var b=this;Object.keys(a).forEach(function(c){a[c]&&(a[c]=a[c].filter(function(a){var c=b.validateBackground(a);return c||b.$log.debug("background is not valid",a),c}))})},a.prototype.calculateBackgrounds=function(){var a=this,b=this.getBackgroundListForCurrentMode();this.validateBackgroundList(b);var c=__assign({},b,{gallery:[]}),d=c.color.slice(),e=this.selectedBackgroundForCurrentMode;if(c.bgImage&&c.bgImage.length){var f=this.createDefaultGalleries(_.cloneDeep(c.bgImage));"gallery"===_.get(e,"mediaType")&&(f=this.replaceDefaultGalleryWithSelected(e,f,c.bgImage)),c.gallery=f}var g,h;this.flags.simpleBackgroundsOrder?g=this.sortBackgroundsByCategories(c):(k=this.sortBackgrounds(c),g=k.sortedBackgrounds,h=k.localSelectedBackground),g=this.setBgBackgroundColors(g,d),this.flags.simpleBackgroundsOrder&&(g=this.moveUsedPatternsToTop(g));var i=g.map(function(b){return a.convertOrgToBackgroundObject(b,h?!1:void 0)});if(h&&(e.backgroundColor&&(h=__assign({},h,{backgroundColor:e.backgroundColor})),!this.flags.simpleBackgroundsOrder)){var j=this.convertOrgToBackgroundObject(h,!0);i.unshift(j)}return i;var k},a.prototype.toggleOnFirstField=function(){var a=this.node(),b=this.getTitleField(a);b&&(this.consumerBiLogger.contentEditor.clickOnHideUnhideComponent(a.getId(),a.getSpecificContentElementType(),a.alias,b.key,b.data.subType,"unhide","section-background-panel"),b.active=!0)},a.prototype.getTitleField=function(b){var c=this.contentElementFieldManager.getNodeFields(b.contentElement,b),d=c.find(function(a){return a.active});if(!d){var e=c.find(function(b){return b.key===a.LIST_TITLE_KEY});if(e)return e}},a.prototype.getParamsToBI=function(){var a=this.node();return a?[a.getContentElementType(),a.alias]:void this.$log.error("can't get node")},a.prototype.setBackground=function(a){var b=this,c="header"===this.mode?"header":"body",d=[(a||{}).mediaType].concat(this.getParamsToBI(),[this.applicationState.getBackgroundModeForBi()]),e=d[0],f=d[1],g=d[2],h=d[3];return e&&this.consumerBiLogger.sectionDesign.changeBackgroundClick(e,f,g,h),this.sectionBackgroundService.setBackgroundAndUpdateViewer(this.node(),a,c).then(function(){if(b.flags.sectionBackground){var a=b.node();b.backgroundScrollService.setSectionOverrideWithInheritance(a,a.backgroundHasFaces?b.backgroundScrollService.SCROLL_TYPE.NONE:b.backgroundScrollService.getSiteOverride())}e&&b.consumerBiLogger.sectionDesign.changeBackgroundSuccess(e,f,g,h),b.undoRedo.captureOperation()})},a.prototype.createSorter=function(b,c,d){return void 0===d&&(d=a.STRIP_SLIDESHOW),{type:b,count:c,galleryType:d}},a.prototype.combineAllMedia=function(a){var b=angular.copy(a);return b.media=(a.bgImage||[]).concat(a.gallery||[],a.video||[]),delete b.bgImage,delete b.gallery,delete b.video,b},a.prototype.sortBackgroundsByCategories=function(a){var b=this,c=[],d=this.combineAllMedia(a),e=["color","media","pattern"];return e.forEach(function(a){var e,f=d[a];"pattern"!==a&&(f=b.flags.noRandomForAutomationTests?f:b.miscUtils.shuffleArray(f)),f=f.filter(function(a){var c=b.isEqual(a);return c&&(e=a),!c}),e&&f.unshift(e),f.length>0&&(f[0].label=a),c.push.apply(c,f)}),c},a.prototype.getCategory=function(a){return"color"===a.data.type||"pattern"===a.data.type?a.data.type:"media"},a.prototype.sortBackgrounds=function(a){var b,c=this,d=[],e=[this.createSorter("color",3),this.createSorter("pattern",2),this.createSorter("bgImage",1),this.createSorter("pattern",1),this.createSorter("video",1),this.createSorter("gallery",1),this.createSorter("color"),this.createSorter("pattern"),this.createSorter("bgImage"),this.createSorter("video")];return e.forEach(function(e){var f=a[e.type];if(!_.isEmpty(f)){for(var g=e.count||f.length,h=0;g>h;h++){var i=f[h];i&&(c.isSelected(i)?b=i:d.push(i))}"gallery"!==e.type&&a[e.type].splice(0,g)}}),{sortedBackgrounds:d,localSelectedBackground:b}},a.prototype.replaceDefaultGalleryWithSelected=function(a,b,c){void 0===c&&(c=[]);var d=angular.copy(b),e=_.map(c,this.mediaGallery.getItemId),f=_.compact(_.map(a.mediaIds,function(a){return c[_.indexOf(e,a)]})),g=this.createGallery(a.galleryType,f),h=_.findIndex(b,function(a){return a.galleryType===g.galleryType});return d[h]=g,d},a.prototype.getSelectedBackgroundAsThumbnail=function(){var a=this.node();return a&&a.isList()?{headerBg:this.convertSelectedFromApi(this.sectionBackgroundService.getBackground(a,"header"),"header"),bg:this.convertSelectedFromApi(this.sectionBackgroundService.getBackground(a))}:this.convertSelectedFromApi(this.sectionBackgroundService.getBackground(a))},a.prototype.uploadBackground=function(a){var b=this;return a===cc.MediaPreviewType.MultipleImages?this.uploadGallery().then(function(c){return b.handleBgResult(c,a)}):this.uploadSingleMedia(a).then(function(c){return b.handleBgResult(c,a)})},a.prototype.handleBgResult=function(a,b){var c=this,d=this.contentElement(),e=this.getMediaField(d).value;a.data.forEach(function(a){c.convertUsage(a,e),c.normaizeFileUrl(a),b===cc.MediaPreviewType.Video&&c.fixVideoFormat(a)}),a.isChanged&&d&&d.fillValuesByMediaType();var f=this.extractBackground(a,b);return this.convertOrgToBackgroundObject(f,!1)},a.prototype.fixVideoFormat=function(a){"file"===a.relativeUri&&(a.fileUrl=a.fileBaseUrl,a.relativeUri=a.id)},a.prototype.normaizeFileUrl=function(a){a.fileUrl||(a.fileUrl="media/"+a.relativeUri)},a.prototype.convertUsage=function(a,b){var c=_.find(b,{relativeUri:a.relativeUri,usage:core.MediaUsageType.Content});c&&(c.usage=core.MediaUsageType.All)},a.prototype.uploadSingleMedia=function(a){var b=this.node();this.consumerBiLoggerHelpers.organizeMediaNode=b;var c=this.createCEMedia(),d=this.consumerMediaUtils.getChangeMediaMethod(b,a),e=this.getCurrentSegment();return d(c,e,!0)},a.prototype.openGalleryOrganizer=function(a){var b=this;return void 0===a&&(a=[]),this.uploadGallery(a).then(function(a){return b.handleBgResult(a,cc.MediaPreviewType.MultipleImages)})},a.prototype.uploadGallery=function(a){void 0===a&&(a=[]);var b=this.node();this.consumerBiLoggerHelpers.organizeMediaNode=b;var c=this.createCEMedia(),d=this.consumerMediaUtils.getChangeMediaMethod(b,cc.MediaPreviewType.MultipleImages);return d(c,null,!0,a)},a.prototype.extractBackground=function(b,c){switch(c){case cc.MediaPreviewType.MultipleImages:return this.createGallery(a.STRIP_SLIDESHOW,b.data);case cc.MediaPreviewType.SingleImage:var d=ob.deepClone(b.data[0]);return d.mediaType="bgImage",d;default:return b.data[0]}},a.prototype.createCEMedia=function(){var a=this.contentElement(),b=this.getMediaField(a);return{contentElement:a,media:b.value}},a.prototype.getMediaField=function(a){var b=_.find(a.values,{type:"media"});if(!b)throw"mediaField not found in contentElement";return b},a.prototype.getCurrentSegment=function(){var a=this.applicationState.getContentFocus();if(a&&"header"!==a.sitePart){var b=this.node();return b&&this.overlayManager.listSpanManager.getSegmentByNodeId(b.getId(),a.sitePart)}},a.prototype.getCurrentListSpan=function(){var a=this.node();return a&&this.overlayManager.listSpanManager.getByNodeId(a.getId())},a.prototype.getPageId=function(){return this.storyServices.story?this.storyServices.story.selectedPage:""},Object.defineProperty(a.prototype,"usedPatternsUrls",{get:function(){try{return this.PageFeatureList.getPatternList(this.getPageId()).map(function(a){return a.relativeUri})}catch(a){return this.$log.error("can't get usedPatterns. error:",a),[]}},enumerable:!0,configurable:!0}),a.prototype.moveUsedPatternsToTop=function(a){var b,c,d=this,e=angular.copy(a);b=c=a.findIndex(function(a){return"pattern"===a.mediaType});var f=a[b].label;return delete e[b].label,this.usedPatternsUrls.forEach(function(a){var b=e.findIndex(function(b){if("pattern"!==b.mediaType)return!1;var c=d.getPattern(b);return a===c});b>-1&&(e.splice(c,0,e.splice(b,1)[0]),c++)}),e[b].label=f,e},a.prototype.getVideoUrlFromBackgrounds=function(a,b){var c=this.sectionBackgroundService.getBackgroundOptions(this.node(),"header"===b?"header":"body"),d=c.video.find(function(b){return b.relativeUri===a});return d?this.getVideo(d):void this.$log.error("can't get video from videoId: "+a)},a.prototype.convertSelectedFromApi=function(a,b){var c=this;if(void 0===b&&(b="none"),a){var d;switch(a.mediaType){case"color":d=this.getColor(a);break;case"bgImage":d=this.extractImageURL(a.mediaId);break;case"video":var e=/.+?(?=video)/.exec(a.mediaId);if(e&&e.length){var f=e[0];d=this.getVideoUrlFromBackgrounds(f,b)}else this.$log.error("can't get video from mediaId: "+a.mediaId);break;case"gallery":d=a.mediaIds.map(function(a){return c.extractImageURL(a)});break;case"pattern":d=this.getPattern(a)}var g={data:{type:a.mediaType,value:d},isSelected:!1,org:null};switch(a.mediaType){case"gallery":g.data.metaData={galleryType:this.getGalleryType(a.galleryType)};break;case"pattern":g.data.metaData={patternBgColor:this.getColor(a.backgroundColor),thumbRatio:a.thumbRatio}}return g}},a.prototype.extractImageURL=function(a){var b,c=/.+?(?=media)/.exec(a);return c&&c.length?b=c[0]:(c=/\.(gif|jpe?g|png)$/i.exec(a),c?b=c.input:this.$log.error("can't get image from mediaId: "+a)),b},a.prototype.getBackgroundListForCurrentMode=function(){switch(this.mode){case"header":return ob.deepClone(this.sectionBackgroundService.getBackgroundOptions(this.node(),"header"));default:return ob.deepClone(this.sectionBackgroundService.getBackgroundOptions(this.node()))}},a.prototype.createDefaultGalleries=function(b){return b&&0!==b.length?[this.createGallery(a.STRIP_SLIDESHOW,b)]:void 0},a.prototype.createGallery=function(a,b){var c={mediaType:"gallery",galleryType:a,galleryProps:{},mediaItems:b};return c},a.prototype.convertOrgToBackgroundObject=function(a,b){var c=this;if(a){angular.isUndefined(b)&&(b=this.isEqual(a));var d;switch(a.mediaType){case"pattern":d=this.getPattern(a);break;case"color":d=this.getColor(a);break;case"bgImage":d=this.getBgImage(a);break;case"video":d=this.getVideo(a);break;case"gallery":d=a.mediaItems.map(function(a){return c.getBgImage(a)})}var e={data:{type:a.mediaType,value:d},isSelected:b,org:a};switch(a.mediaType){case"gallery":e.data.metaData={galleryType:this.getGalleryType(a.galleryType)};break;case"pattern":e.data.metaData={patternBgColor:this.getColor(a.backgroundColor),thumbRatio:a.thumbRatio}}return a.label&&(e.label=a.label),e}},a.prototype.isEqual=function(a,b){if(void 0===b&&(b=this.selectedBackgroundForCurrentMode),!a||!b||a.mediaType!==b.mediaType)return!1;switch(a.mediaType){case"color":return a.color===b.color&&a.confId===b.confId;case"bgImage":case"video":return _(b.mediaId).contains(a.relativeUri);case"gallery":return a.galleryType===b.galleryType;case"pattern":return a.mediaId===b.mediaId}},a.prototype.getGalleryType=function(a){switch(a){default:return"slideshow"}},a.prototype.getPattern=function(a){var b=this.simpleSolutionManager.getNodeSelectedLg(this.node(),this.mode);return this.patternService.getPattern(a,b)},a.prototype.getColor=function(a){var b=this.designKitParameters[a.color],c=this.previewColors.getRGBColor(b);return c},a.prototype.getBgImage=function(a){return a.relativeUri},a.prototype.getVideo=function(a){return this.clientTopology.videoUrl+a.fileOutput.video[0].url},a.prototype.isSelected=function(a){return this.selectedBackgroundForCurrentMode&&this.isEqual(a)},a.prototype.hideMedia=function(){var b=this,c=this.node(),d=this.contentElementFieldManager.getNodeFields(c.contentElement,c),e=d.find(function(b){return b.data.type===a.MEDIA_KEY});this.consumerBiLogger.contentEditor.clickOnHideUnhideComponent(c.getId(),c.getSpecificContentElementType(),c.alias,e.key,e.data.subType,"hide","section-background-panel"),e.active=!1,this.updateViewer(c).then(function(){b.undoRedo.captureOperation()})},a.prototype.convertMediaPreviewTypeToBi=function(a){return["image","gallery","video"][a]},a.prototype.updateViewer=function(a){var b=this,c=Object.keys(a.contentElement.values).find(function(b){
return"media"===a.contentElement.values[b].type});return this.wizardService.onSynchronousFieldChanged(a,c,null,!0,void 0,void 0).then(function(){b.storyServices.reRender()})},a.prototype.validateBackground=function(a){return a?"color"===a.mediaType?"confId"in a&&"color"in a:!0:!1},a}();SectionBackgroundManager.STRIP_SLIDESHOW="Strip Slideshow",SectionBackgroundManager.LIST_TITLE_KEY="listTitle",SectionBackgroundManager.MEDIA_KEY="media",angular.module("siteGeneratorStaticsConsumerAppInternal").service("sectionBackgroundManager",SectionBackgroundManager);var AnimationUtils=function(){function a(a,b,c,d,e,f,g,h,i,j,k,l,m){this.$q=a,this.animationKit=b,this.animationKitPreview=c,this.animationNoPatternIdentifier=d,this.animationInheritPatternIdentifier=e,this.overlayManager=f,this.modelTree=g,this.layoutSolver=h,this.previewService=i,this.spinnerService=j,this.flags=k,this.storyServices=l,this.animationPatterns=m}return a.$inject=["$q","animationKit","animationKitPreview","animationNoPatternIdentifier","animationInheritPatternIdentifier","overlayManager","modelTree","layoutSolver","previewService","spinnerService","flags","storyServices","animationPatterns"],a.prototype.getDefaultSiteAnimation=function(){return this.animationKit.getDefaultSiteAnimation()},a.prototype.getActivePatternForSite=function(){return this.animationKit.getActivePatternForSite()},a.prototype.getActivePatternLabelForSite=function(){return this.animationPatterns[this.getActivePatternForSite()].label},a.prototype.getActivePatternForSection=function(a,b){return this.animationKit.getActivePatternForSection(a,b)},a.prototype.visibleLGs=function(){return this.overlayManager.listSpanManager.getLayoutGroupsInViewport()},a.prototype.animateVisibleLGs=function(){var a=this.visibleLGs();_.invoke(a,"playAnimations")},a.prototype.animateNode=function(a){var b=this.overlayManager.listSpanManager.getByNodeId(a.id);_.invoke(b.groups,"playAnimations")},a.prototype.refreshAnimationsForPart=function(a,b){var c=this;void 0===b&&(b=void 0);var d=this.layoutSolver.getPartSolutions(a,b);if(d){var e=d.getSelectedSolution();_.each(e,function(a){c.animationKitPreview.refreshAnimationsForLg(a)})}},a.prototype.refreshAnimationsForNode=function(a,b){var c=this,d=this.overlayManager.listSpanManager.getByNodeId(a.id,b);_.each(d.groups,function(a){c.animationKitPreview.refreshAnimationsForLg(a)})},a.prototype.refreshAnimations=function(){var a=this;_.each(this.modelTree.getPagesNodes(),function(b){a.refreshAnimationsForPart("body",b.id)})},a.prototype.setSiteAnimationPattern=function(a){var b=this;return this.animationKit.setPatternForSite(a),this.$q.when().then(function(){return b.refreshAnimations(),b.previewService.waitForChanges()})},a.prototype.previewPattern=function(a){var b=_.reject(this.visibleLGs(),function(a){return a.isSiteHeader()});this.previewPatternForLgs(b,a)},a.prototype.previewPatternForLgs=function(a,b){var c=this;this.animationKitPreview.stopRunningAnimations(),_.each(a,function(a){c.animationKitPreview.previewPatternForLg(a,b)})},a.prototype.setSectionAnimationPattern=function(a,b,c){return this.animationKit.setPatternForSection(a,b,c),this.refreshAnimationsForNode(a,b),this.previewService.waitForChanges()},a.prototype.doSiteAndSectionPatternsMatch=function(){return this.animationKit.doSiteAndSectionPatternsMatch()},a.prototype.forceSitePattern=function(){return this.animationKit.clearOverridableSections(),this.refreshAnimations(),this.previewService.waitForChanges()},a}();angular.module("siteGeneratorStaticsConsumerAppInternal").service("animationUtils",AnimationUtils);var __assign=this&&this.__assign||Object.assign||function(a){for(var b,c=1,d=arguments.length;d>c;c++){b=arguments[c];for(var e in b)Object.prototype.hasOwnProperty.call(b,e)&&(a[e]=b[e])}return a},coloration;!function(a){function b(a){return a&&void 0!==a.colors}a.PALETTE_DIALOG_OPEN_CLASS="palette-color-dialog-open",a.INVALID_PALETTE_INDEX=-1,a.CUSTOM_PALETTE_INDEX=-2,a.LOGO_PALETTE_INDEX=-3;var c="#ffffff",d="#181818",e="#000000",f=.76,g=.24,h=14,i="recentColors",j=6,k=50,l=2.8,m="[data-main-color] .p21-color-tag";a.ColorationMode=ThemeChooser.COLORATION_METHOD_TYPE;var n,o=function(){function a(a,b,c){this.colors=a,this.blackAndWhite=b,this.utils=c,this.isColorLight=a.map(function(a){return c.isLightColor(a,b)}),this.firstLight=this.isColorLight.indexOf(!0),this.firstDark=this.isColorLight.indexOf(!1)}return a.prototype.getExistingLight=function(){var a=this.colors[this.firstLight]||c;return this.firstLight=this.isColorLight.indexOf(!0,this.firstLight+1),a},a.prototype.getExistingDark=function(){var a=this.colors[this.firstDark]||d;return this.firstDark=this.isColorLight.indexOf(!1,this.firstDark+1),a},a.prototype.getLight=function(){return-1!==this.firstLight?this.getExistingLight():this.utils.toLightColor(this.getExistingDark(),this.blackAndWhite)},a.prototype.getDark=function(){return-1!==this.firstDark?this.getExistingDark():this.utils.toDarkColor(this.getExistingLight(),this.blackAndWhite)},a.prototype.getFirst=function(){return-1===this.firstDark||-1!==this.firstLight&&this.firstLight<this.firstDark?this.getExistingLight():this.getExistingDark()},a.prototype.getComplementary=function(a){return this.utils.isLightColor(a,this.blackAndWhite)?this.getDark():this.getLight()},a}(),p=function(){function n(b,c,d,e,f,g,h,i,j,k,l,m,n,o,p){this.consumerBiLogger=b,this.logoColorService=c,this.initService=d,this.themeChooser=e,this.themeChooserUtils=f,this.contentManager=g,this.chroma=h,this.colorApi=i,this.localStorageService=j,this.$timeout=k,this.$q=l,this.$log=m,this.storyServices=n,this.$rootScope=o,this.flags=p,this.activePaletteIndex=a.INVALID_PALETTE_INDEX,this.shouldUpdatePalettes=!1,this.isUpdatingPalettes=!1,this.isSwitchingMainColor=!1}return n.$inject=["consumerBiLogger","logoColorService","initService","themeChooser","themeChooserUtils","contentManager","chroma","colorApi","localStorageService","$timeout","$q","$log","storyServices","$rootScope","flags"],n.prototype.initialize=function(){var a=this;return this.initPromise?this.initPromise:(this.initPromise=this.initService.loaded().then(function(){return a.themeChooser.initialize()}).then(function(){return a.$timeout(function(){return a.loadStoryColoration()})}).then(function(){return a.listenToUndoRedo()}),this.initPromise)},n.prototype.loadStoryColoration=function(){this.storyColoration=this.storyServices.story.coloration,this.storyColoration||(this.storyServices.story.coloration=this.storyColoration={},this.resetColoration()),this.checkIntegrity(),this.shouldUpdatePalettes=!0},n.prototype.checkIntegrity=function(){var a=this.themeChooser.coloration.getActiveKitColors(),b=this.themeChooser.coloration.getActiveKitDefaultColors(),c=this.storyColoration,d=c.activePalette,e=c.customMainColor,f=c.logoPalette;this.arePalettesEqual(a,d)||(this.$log.error("colorationUtils: integrity check failed"),this.themeChooserUtils.logColors("error","colorationUtils: expected colors '"+JSON.stringify(d.colors)+"'",_.values(d.colors)),this.themeChooserUtils.logColors("error","colorationUtils: actual colors '"+JSON.stringify(a)+"'",_.values(a)),this.storyColoration.activePalette={colors:a,numOfColors:this.numOfColors(a),creator:"error"});var g=this.arePalettesEqual(d,f);if(!g){var h=!!e,i=!this.areColorsEqual(a.mainColor,b.mainColor);h!==i&&(this.$log.error("colorationUtils: integrity check failed"),this.themeChooserUtils.logColors("error","colorationUtils: customMainColor '"+e+"'",[e]),this.themeChooserUtils.logColors("error","colorationUtils: active colors '"+JSON.stringify(a)+"'",_.values(a)),this.themeChooserUtils.logColors("error","colorationUtils: default colors '"+JSON.stringify(b)+"'",_.values(b)),e||(this.storyColoration.customMainColor=a.mainColor))}},n.prototype.listenToUndoRedo=function(){var a=this;this.$rootScope.$on(UndoEvents.STORY_REVISION_CHANGED,function(){return a.loadStoryColoration()})},n.prototype.resetColoration=function(){var a=this.themeChooser.coloration.getActiveKitDefaultColors();this.storyColoration.activePalette={colors:a,creator:"default",numOfColors:this.numOfColors(a)},this.storyColoration.customPalette=null,this.storyColoration.customMainColor=null,this.shouldUpdatePalettes=!0},n.prototype.areKitColorsOverriden=function(){var a=this.themeChooser.coloration.getActiveKitDefaultColors();return!this.arePalettesEqual(a,this.storyColoration.activePalette)},n.prototype.setActivePaletteIndex=function(b){var c;if(b>=0&&b<this.palettes.length)c=this.palettes[b];else if(b===a.CUSTOM_PALETTE_INDEX){var d=this.storyColoration.customPalette;if(!d)return this.$log.error("colorationUtils: cannot set custom palette as active, custom palette doesn't exist"),this.$q.reject();c=d}else{if(b!==a.LOGO_PALETTE_INDEX)return this.$log.error("colorationUtils: palette index is out of range"),this.$q.reject();var e=this.storyColoration.logoPalette;if(!e)return this.$log.error("colorationUtils: cannot set logo palette as active, logo palette doesn't exist"),this.$q.reject();c=e}return this.activePaletteIndex=b,this.storyColoration.activePalette=c,this.themeChooser.coloration.setActiveKitColors(c.colors)},n.prototype.getActivePaletteIndex=function(){return this.activePaletteIndex},n.prototype.getActivePalette=function(){return this.storyColoration.activePalette},n.prototype.getCustomPalette=function(){return this.storyColoration.customPalette},n.prototype.getLogoPalette=function(){return this.storyColoration.logoPalette},n.prototype.getLogoRecommendedColorationMode=function(){return this.storyColoration.logoRecommendedColorationMode},n.prototype.getNumPalettes=function(){return this.getPalettes().length+(this.getCustomPalette()?1:0)+(this.getLogoPalette()?1:0)},n.prototype.getMainColor=function(){return this.storyColoration.customMainColor||this.themeChooser.coloration.getActiveKitDefaultColors().mainColor},n.prototype.setCustomMainColor=function(a){this.storyColoration.customMainColor=a,this.shouldUpdatePalettes=!0},n.prototype.switchMainColor=function(a){var b=this,c=function(a){var c=b.$q.defer();return $(m).off("transitionend").one("transitionend",function(){return c.resolve()}),b.$timeout(function(){return c.resolve()}),c.promise};return this.isSwitchingMainColor=!0,this.storyColoration.customMainColor=a,c(a).then(function(){return b.storyColoration.customPalette=null}).then(function(){return b.generatePalettes("selectSimilar")})["finally"](function(){b.isSwitchingMainColor=!1})},n.prototype.numOfColors=function(a){return a.fourthColor?6:a.thirdColor?5:a.secondaryColor?4:3},n.prototype.saveLogoPaletteAsCustom=function(){this.activePaletteIndex===a.LOGO_PALETTE_INDEX&&(this.storyColoration.customPalette=this.storyColoration.logoPalette,this.activePaletteIndex=a.CUSTOM_PALETTE_INDEX),this.storyColoration.logoPalette=null},n.prototype.setCustomColors=function(b,e){var f=__assign({},b),g=this.numOfColors(f),h=!this.areColorsEqual(this.storyColoration.activePalette.colors.mainColor,f.mainColor),i={colors:f,creator:"custom",numOfColors:g};return 3===g&&this.areColorsEqual(f.white,c)&&this.areColorsEqual(f.black,d)?(this.storyColoration.customPalette=null,this.storyColoration.activePalette=i):(this.storyColoration.customPalette=i,this.storyColoration.activePalette=i,this.activePaletteIndex=a.CUSTOM_PALETTE_INDEX),h&&this.setCustomMainColor(f.mainColor),this.themeChooser.coloration.setActiveKitColorsAndMode(f,e)},n.prototype.preparePaletteFromLogo=function(a,b){var c,d,e=this;return this.$q.when(a).then(function(a){return c=Date.now(),e.consumerBiLogger.siteDesign.createPaletteFromLogoAlgoStart(b),e.logoColorService.extractLogoColorsFromWixImage(a,function(){d=Date.now(),e.onLogoImageLoaded(c,b)})}).then(function(a){return e.consumerBiLogger.siteDesign.createPaletteFromLogoAlgoSuccess(Date.now()-c,Date.now()-d,"palette extraction",b,e.numOfColors(a.colors)),a})},n.prototype.onLogoImageLoaded=function(a,b){this.consumerBiLogger.siteDesign.createPaletteFromLogoAlgoSuccess(null,Date.now()-a,"image download",b,null)},n.prototype.setLogoColors=function(a){var b=__assign({},a.colors),c=this.numOfColors(b),d={colors:b,creator:"logo",numOfColors:c};this.storyColoration.logoPalette=d,this.storyColoration.logoRecommendedColorationMode=a.mode,this.forgetCustomPaletteIfDupeOfLogo()},n.prototype.useLogoColors=function(b){var c=void 0===b?{}:b,d=c.setColorationMode,e=void 0===d?!1:d,f=c.overrideMainColor,g=void 0===f?!1:f,h=this.storyColoration,i=h.logoPalette,j=h.logoRecommendedColorationMode;this.storyColoration.activePalette=i,this.activePaletteIndex=a.LOGO_PALETTE_INDEX,g&&this.setCustomMainColor(i.colors.mainColor),this.forgetCustomPaletteIfDupeOfLogo();var k=void 0;return e&&(k=null!==j?j:a.ColorationMode.light),this.themeChooser.coloration.setActiveKitColorsAndMode(i.colors,k)},n.prototype.forgetCustomPaletteIfDupeOfLogo=function(){this.arePalettesEqual(this.storyColoration.customPalette,this.storyColoration.logoPalette)&&(this.storyColoration.customPalette=null,this.activePaletteIndex===a.CUSTOM_PALETTE_INDEX&&(this.activePaletteIndex=a.LOGO_PALETTE_INDEX))},n.prototype.arePalettesEqual=function(a,c){return a&&c?(a=b(a)?a.colors:a,c=b(c)?c.colors:c,this.areColorsEqual(a.mainColor,c.mainColor)&&this.areColorsEqual(a.secondaryColor,c.secondaryColor)&&this.areColorsEqual(a.thirdColor,c.thirdColor)&&this.areColorsEqual(a.fourthColor,c.fourthColor)&&this.areColorsEqual(a.white,c.white)&&this.areColorsEqual(a.black,c.black)):!1},n.prototype.areColorsEqual=function(a,b){return!!a&&!!b&&a.toLowerCase()===b.toLowerCase()||!a&&!b},n.prototype.findPaletteSimilarToActive=function(b){var c=this,d=a.INVALID_PALETTE_INDEX,e=this.storyColoration.activePalette;if(3===e.numOfColors)d=b.findIndex(function(a){return 3===a.numOfColors});else{var f=function(a){return c.themeChooserUtils.calculateKitConfiguration(a.colors,c.getColorationMode())},g=f(e),h=b.filter(function(a){return f(a)===g}),i=h.filter(function(a){return a.numOfColors===e.numOfColors}),j=i.length>0?i:h,k=this.findClosestPalette(j,e);d=b.indexOf(k)}return d===a.INVALID_PALETTE_INDEX&&(d=0),d},n.prototype.findClosestPalette=function(a,b){var c=this,d=b.colors,e=d.mainColor,f=d.secondaryColor,g=this.chroma(e).hsl()[2]-this.chroma(f).hsl()[2],h=this.chroma(this.storyColoration.customMainColor).hsl(),i=h[2],j=i-g,k=a[0],l=10;return a.forEach(function(a){if(a.colors.secondaryColor){var b=c.chroma(a.colors.secondaryColor).hsl(),d=b[2];Math.abs(d-j)<l&&(l=Math.abs(d-j),k=a)}}),k},n.prototype.getPaletteColors=function(){return this.storyColoration.activePalette?this.storyColoration.activePalette.colors:this.themeChooser.coloration.getActiveKitColors()},n.prototype.getCurrentState=function(){return{storyColoration:this.storyColoration&&__assign({},this.storyColoration),palettes:this.palettes&&this.palettes.slice(),activePaletteIndex:this.activePaletteIndex,shouldUpdatePalettes:this.shouldUpdatePalettes}},n.prototype.restoreState=function(a){return Object.assign(this.storyColoration,a.storyColoration),this.palettes=a.palettes,this.activePaletteIndex=a.activePaletteIndex,this.shouldUpdatePalettes=a.shouldUpdatePalettes,this.themeChooser.coloration.setActiveKitColors(this.storyColoration.activePalette.colors)},n.prototype.areColorsReadable=function(a){if(!this.areKitColorsOverriden())return!0;var b=this,c=b.chroma,d=b.themeChooserUtils,e=a.thirdColor,f=a.fourthColor,g=d.generate6Colors(a).map(function(a){return c(a)}),h=g[0],i=g[1],j=g[2],k=g[3],m=g[4],n=g[5],o=function(a){var b=c(a).luminance();return h.luminance()>=b&&b>=k.luminance()},p=function(){for(var b=[],c=0;c<arguments.length;c++)b[c]=arguments[c];return b.filter(function(b){return d.isDarkColor(b,a)}).length};return h.luminance()>k.luminance()&&3===p(h,i,j,k,m,n)&&c.contrast(h,k)>l&&c.contrast(h,m)>l&&c.contrast(h,n)>l&&c.contrast(k,i)>l&&c.contrast(k,j)>l&&(!e||o(e))&&(!f||o(f))},n.prototype.makeColorsReadable=function(a){var b=this.numOfColors(a);switch(b){case 3:return this.make3ColorsReadable(a);case 4:return this.make4ColorsReadable(a);case 5:return this.make5ColorsReadable(a);case 6:return this.make6ColorsReadable(a)}},n.prototype.make3ColorsReadable=function(a){var b,d,f,g,h,i,j=this,k=j.chroma,m=j.themeChooserUtils,n=a.mainColor,o=a.black,p=a.white,q=function(){a=m.generate6Colors({mainColor:n,black:o,white:p}).map(function(a){return k(a)}),b=a[0],d=a[1],f=a[2],g=a[3],h=a[4],i=a[5];var a};if(q(),g.luminance()>b.luminance()){var r=o;o=p,p=r,q()}for(;k.contrast(g,b)<l;)o=g.darken(.1).hex(),p=b.brighten(.1).hex(),q();for(var s={black:o,white:p};m.isLightColor(n,s)&&k.contrast(n,e)<l;)n=k(n).brighten(.1).hex(),q();for(;m.isDarkColor(n,s)&&k.contrast(n,c)<l;)n=k(n).darken(.1).hex(),q();for(;(k.contrast(b,g)<l||k.contrast(b,h)<l||k.contrast(b,i)<l)&&!this.areColorsEqual(p,c);)p=b.brighten(.3).hex(),q();for(;(k.contrast(g,d)<l||k.contrast(g,f)<l)&&!this.areColorsEqual(o,e);)o=g.darken(.3).hex(),q();return{mainColor:n,black:o,white:p}},n.prototype.make4ColorsReadable=function(a){var b,d,f,g,h,i,j=this,k=j.chroma,m=j.themeChooserUtils,n=a.mainColor,o=a.secondaryColor,p=a.black,q=a.white,r=function(){a=m.generate6Colors({mainColor:n,secondaryColor:o,black:p,white:q}).map(function(a){return k(a)}),b=a[0],d=a[1],f=a[2],g=a[3],h=a[4],i=a[5];var a};if(r(),g.luminance()>b.luminance()){var s=p;p=q,q=s,r()}for(;k.contrast(g,b)<l;)p=g.darken(.1).hex(),q=b.brighten(.1).hex(),r();for(var t={black:p,white:q};m.isLightColor(n,t)&&k.contrast(n,e)<l;)n=k(n).brighten(.1).hex(),r();for(;m.isDarkColor(n,t)&&k.contrast(n,c)<l;)n=k(n).darken(.1).hex(),r();for(;m.isLightColor(o,t)&&k.contrast(o,e)<l;)o=k(o).brighten(.1).hex(),r();for(;m.isDarkColor(o,t)&&k.contrast(o,c)<l;)o=k(o).darken(.1).hex(),r();for(;(k.contrast(b,g)<l||k.contrast(b,h)<l||k.contrast(b,i)<l)&&!this.areColorsEqual(q,c);)q=b.brighten(.3).hex(),r();for(;(k.contrast(g,d)<l||k.contrast(g,f)<l)&&!this.areColorsEqual(p,e);)p=g.darken(.3).hex(),r();return{mainColor:n,secondaryColor:o,black:p,white:q}},n.prototype.make5ColorsReadable=function(a){var b,d,f,g,h,i,j=this,k=j.chroma,m=j.themeChooserUtils,n=a.mainColor,o=a.secondaryColor,p=a.thirdColor,q=a.black,r=a.white,s=function(){a=m.generate6Colors({mainColor:n,secondaryColor:o,thirdColor:p,black:q,white:r}).map(function(a){return k(a)}),b=a[0],d=a[1],f=a[2],g=a[3],h=a[4],i=a[5];var a};if(s(),g.luminance()>b.luminance()){var t=q;q=r,r=t,s()}if(k(p).luminance()>b.luminance()){var t=p;p=r,r=t,s()}if(k(p).luminance()<g.luminance()){var t=p;p=q,q=t,s()}for(;k.contrast(g,b)<l;)q=g.darken(.1).hex(),r=b.brighten(.1).hex(),s();var u={black:q,white:r},v=function(){for(var a=[],b=0;b<arguments.length;b++)a[b]=arguments[b];return a.filter(function(a){return m.isDarkColor(a,u)}).length};for(v(n,o,p)>2&&(p=m.toLightColor(p,u),s()),v(n,o,p)<1&&(p=m.toDarkColor(p,u),s());m.isLightColor(n,u)&&k.contrast(n,e)<l;)n=k(n).brighten(.1).hex(),s();for(;m.isDarkColor(n,u)&&k.contrast(n,c)<l;)n=k(n).darken(.1).hex(),s();for(;m.isLightColor(o,u)&&k.contrast(o,e)<l;)o=k(o).brighten(.1).hex(),s();for(;m.isDarkColor(o,u)&&k.contrast(o,c)<l;)o=k(o).darken(.1).hex(),s();for(;m.isLightColor(p,u)&&k.contrast(p,e)<l;)p=k(p).brighten(.1).hex(),s();for(;m.isDarkColor(p,u)&&k.contrast(p,c)<l;)p=k(p).darken(.1).hex(),s();for(;(k.contrast(b,g)<l||k.contrast(b,h)<l||k.contrast(b,i)<l)&&!this.areColorsEqual(r,c);)r=b.brighten(.3).hex(),s();for(;(k.contrast(g,d)<l||k.contrast(g,f)<l)&&!this.areColorsEqual(q,e);)q=g.darken(.3).hex(),s();return{mainColor:n,secondaryColor:o,thirdColor:p,black:q,white:r}},n.prototype.make6ColorsReadable=function(a){var b,d,f,g,h,i,j=this,k=j.chroma,m=j.themeChooserUtils,n=a.mainColor,o=a.secondaryColor,p=a.thirdColor,q=a.fourthColor,r=a.black,s=a.white,t=function(){a=m.generate6Colors({mainColor:n,secondaryColor:o,thirdColor:p,fourthColor:q,black:r,white:s}).map(function(a){return k(a)}),b=a[0],d=a[1],f=a[2],g=a[3],h=a[4],i=a[5];var a};if(t(),g.luminance()>b.luminance()){var u=r;r=s,s=u,t()}if(k(p).luminance()>k(q).luminance()){if(k(p).luminance()>b.luminance()){var u=p;p=s,s=u,t()}if(k(q).luminance()<g.luminance()){var u=q;q=r,r=u,t()}}else{if(k(q).luminance()>b.luminance()){var u=q;q=s,s=u,t()}if(k(p).luminance()<g.luminance()){var u=p;p=r,r=u,t()}}for(;k.contrast(g,b)<l;)r=g.darken(.1).hex(),s=b.brighten(.1).hex(),t();var v={black:r,white:s},w=function(){for(var a=[],b=0;b<arguments.length;b++)a[b]=arguments[b];return a.filter(function(a){return m.isDarkColor(a,v)}).length};for(w(n,o,p,q)>2&&(q=m.toLightColor(q,v),t()),w(n,o,p,q)>2&&(p=m.toLightColor(p,v),t()),w(n,o,p,q)<2&&(q=m.toDarkColor(q,v),t()),w(n,o,p,q)<2&&(p=m.toDarkColor(p,v),t());m.isLightColor(n,v)&&k.contrast(n,e)<l;)n=k(n).brighten(.1).hex(),t();for(;m.isDarkColor(n,v)&&k.contrast(n,c)<l;)n=k(n).darken(.1).hex(),t();for(;m.isLightColor(o,v)&&k.contrast(o,e)<l;)o=k(o).brighten(.1).hex(),t();for(;m.isDarkColor(o,v)&&k.contrast(o,c)<l;)o=k(o).darken(.1).hex(),t();for(;m.isLightColor(p,v)&&k.contrast(p,e)<l;)p=k(p).brighten(.1).hex(),t();for(;m.isDarkColor(p,v)&&k.contrast(p,c)<l;)p=k(p).darken(.1).hex(),t();for(;m.isLightColor(q,v)&&k.contrast(q,e)<l;)q=k(q).brighten(.1).hex(),t();for(;m.isDarkColor(q,v)&&k.contrast(q,c)<l;)q=k(q).darken(.1).hex(),t();for(;(k.contrast(b,g)<l||k.contrast(b,h)<l||k.contrast(b,i)<l)&&!this.areColorsEqual(s,c);)s=b.brighten(.3).hex(),t();for(;(k.contrast(g,d)<l||k.contrast(g,f)<l)&&!this.areColorsEqual(r,e);)r=g.darken(.3).hex(),t();return{mainColor:n,secondaryColor:o,thirdColor:p,fourthColor:q,black:r,white:s}},n.prototype.setColorationMode=function(a){return this.themeChooser.coloration.setActiveKitColorationMode(a)},n.prototype.getColorationMode=function(){return this.themeChooser.coloration.getActiveKitColorationMode()},n.prototype.isColorationModeOverriden=function(){return this.themeChooser.coloration.getActiveKitColorationMode()!==this.themeChooser.coloration.getActiveKitDefaultColorationMode()},n.prototype.removePalettes=function(){this.palettes=[],this.storyColoration.customPalette=null},n.prototype.generatePalettes=function(b){var c=this;this.palettes=[],this.activePaletteIndex=a.INVALID_PALETTE_INDEX;var d=this.calculateThreeColorsForPalettes();return this.colorApi.getMatches(d.mainColor,k).then(function(a){var b=a.matches;return b})["catch"](function(){return[]}).then(function(a){var b=c.calculatePalettesWithThreeColors(d),e=c.calculatePalettesWithTint(d),f=c.calculatePalettesWithShade(d),g=c.calculatePalettesFromColors(d,a),h=b.concat(e,f,g);return c.storyColoration.customMainColor||c.insertDefaultPalette(h),h}).then(function(d){var e=a.INVALID_PALETTE_INDEX;switch(b){case"selectSimilar":e=c.findPaletteSimilarToActive(d);break;case"selectCustom":e=a.CUSTOM_PALETTE_INDEX;break;case"keepLogo":e=a.LOGO_PALETTE_INDEX;break;case"addToList":var f=c.storyColoration.activePalette;f?(e=d.findIndex(function(a){return c.arePalettesEqual(a,f)}),e===a.INVALID_PALETTE_INDEX&&(e=c.insertPalette(f,d))):c.$log.error("colorationUtils: activePalette is not specified")}return{palettes:d,activePaletteIndex:e}}).then(function(a){var d=a.palettes,e=a.activePaletteIndex;return c.$timeout(function(){return c.palettes=d,"selectSimilar"===b?c.setActivePaletteIndex(e):void(c.activePaletteIndex=e)})})},n.prototype.insertDefaultPalette=function(a){var b=this.themeChooser.coloration.getActiveKitDefaultColors(),c={colors:b,creator:"default",numOfColors:this.numOfColors(b)};return this.insertPalette(c,a)},n.prototype.insertPalette=function(a,b){var c=b.findIndex(function(b){return a.numOfColors<=b.numOfColors});return-1===c&&(c=b.length),b.splice(c,0,a),c},n.prototype.calculateThreeColorsForPalettes=function(){var a;if(this.storyColoration.customMainColor)a={mainColor:this.storyColoration.customMainColor,white:c,black:d};else{var b=this.storyColoration.activePalette.colors,e=b.mainColor,f=b.white,g=b.black;a={mainColor:e,white:f,black:g}}return a},n.prototype.calculatePalettesWithThreeColors=function(a){var b=this.chroma(a.mainColor).hsl()[2],c=b>f||g>b;return c?[]:[{colors:a,creator:"calculated",numOfColors:3}]},n.prototype.calculatePalettesWithTint=function(a){for(var b=a.mainColor,c=a.white,d=a.black,e=[],f=b,g=this.themeChooserUtils.tintColor(f);g!==f;)e.push({colors:{mainColor:b,secondaryColor:g,white:c,black:d},creator:"calculated",numOfColors:4}),f=g,g=this.themeChooserUtils.tintColor(f);return e.reverse(),e},n.prototype.calculatePalettesWithShade=function(a){for(var b=a.mainColor,c=a.white,d=a.black,e=[],f=b,g=this.themeChooserUtils.shadeColor(f);g!==f;)e.push({colors:{mainColor:b,secondaryColor:g,white:c,black:d},creator:"calculated",numOfColors:4}),f=g,g=this.themeChooserUtils.shadeColor(f);return e},n.prototype.calculatePalettesFromColors=function(a,b){var c=this,d=a.mainColor,e=a.white,f=a.black,g=this.themeChooserUtils.isLightColor(d,a),h=1,i=1,k=3,l=Math.min(j,Math.floor((b.length+i+k)/(h+i+k))),m=Math.min(j,Math.floor((b.length+k)/(h+i+k))),n=Math.min(j,Math.floor(b.length/(h+i+k))),p=b.splice(0,l),q=b.splice(0,m),r=b.splice(0,n),s=new o(b,a,this.themeChooserUtils),t=p.map(function(a){return{colors:{mainColor:d,secondaryColor:a,white:e,black:f},creator:"server",numOfColors:4}}),u=q.map(function(b){var g=c.themeChooserUtils.isLightColor(b,a),h=g?c.themeChooserUtils.toDarkColor(c.themeChooserUtils.shadeColor(b),a):c.themeChooserUtils.toLightColor(c.themeChooserUtils.tintColor(b),a);return{colors:c.makeColorsReadable({mainColor:d,secondaryColor:b,thirdColor:h,white:e,black:f}),creator:"server",numOfColors:5}}),v=r.map(function(b){var h,i,j=c.themeChooserUtils.isLightColor(b,a);return g&&j?(h=s.getDark(),i=s.getDark()):g||j?(h=s.getFirst(),i=s.getComplementary(h)):(h=s.getLight(),i=s.getLight()),{colors:c.makeColorsReadable({mainColor:d,secondaryColor:b,thirdColor:h,fourthColor:i,white:e,black:f}),creator:"server",numOfColors:6}});return t.concat(u,v)},n.prototype.updatePalettes=function(){var b=this;if(!this.isUpdatingPalettes){var c=this,d=c.storyColoration,e=d.activePalette,f=d.customPalette,g=d.logoPalette,h=c.palettes,i=void 0===h?[]:h,j=c.activePaletteIndex,k=e.colors.mainColor,l=i.length>0?i[0].colors.mainColor:"",m=f&&this.arePalettesEqual(e,f),n=g&&this.arePalettesEqual(e,g);this.areColorsEqual(k,l)||this.isSwitchingMainColor?m?this.activePaletteIndex=a.CUSTOM_PALETTE_INDEX:n?this.activePaletteIndex=a.LOGO_PALETTE_INDEX:(0>j||j>=i.length||!this.arePalettesEqual(e,i[j]))&&(this.activePaletteIndex=i.findIndex(function(a){return b.arePalettesEqual(a,e)})):(this.isUpdatingPalettes=!0,this.generatePalettes(m?"selectCustom":n?"keepLogo":"addToList").then(function(){return b.isUpdatingPalettes=!1}))}},n.prototype.willLoadPalettes=function(){return this.shouldUpdatePalettes},n.prototype.getPalettes=function(){return this.shouldUpdatePalettes&&(this.updatePalettes(),this.shouldUpdatePalettes=!1),this.palettes},n.prototype.getRecentColors=function(){return this.localStorageService.get(i)||[]},n.prototype.addColorToRecent=function(a){var b=this.getRecentColors();_(b).contains(a)||(b.unshift(a),this.localStorageService.set(i,b))},n.prototype.getIndustryMainColors=function(a){var b=this;void 0===a&&(a=h);var c=angular.copy(this.themeChooser.getColorThemes()),d=[];return this.contentManager.getKitIds().forEach(function(a){var b=_.findIndex(c,{id:a});-1!==b&&(d.push(c[b]),c.splice(b,1))}),_.unique(d.concat(c).map(function(a){var c=a.originalKit?a.originalKit:a;return b.themeChooser.coloration.getSpecificKitColors(c).mainColor})).splice(0,a)},n}();!function(a){a[a.mainColor=0]="mainColor",a[a.secondaryColor=1]="secondaryColor",a[a.black=2]="black",a[a.white=3]="white",a[a.thirdColor=4]="thirdColor",a[a.fourthColor=5]="fourthColor"}(n=a.ePaletteColorPickerStates||(a.ePaletteColorPickerStates={})),angular.module("siteGeneratorStaticsConsumerAppInternal").service("colorationUtils",p)}(coloration||(coloration={}));var FontUtils=function(){function a(a,b,c,d,e,f){this.themeChooser=a,this.fontDataForThumbnail=b,this.storyServices=c,this.simpleSolutionManager=d,this.layoutSolver=e,this.modelTree=f}return a.$inject=["themeChooser","fontDataForThumbnail","storyServices","simpleSolutionManager","layoutSolver","modelTree"],a.prototype.convertFontDataToThumbnail=function(b,c){void 0===c&&(c=!1);var d=this.fontDataForThumbnail.data[b.displayName.toLowerCase().replace(/ /,"-")];return{name:{title:d.name,font:this.fixFontFamily(this.themeChooser.getSpecificKitFontStyle(b,d.fontName)),family:b.displayName,size:(d.fontNameSize||a.FONT_THUMBNAIL_TITLE_FONT_SIZE)+(c?a.LARGE_THUMBNAIL_TITLE_FONT_SIZE_INCREMENT:0)},description:{title:d.description,font:this.fixFontFamily(this.themeChooser.getSpecificKitFontStyle(b,d.fontDescription)),family:b.displayName,size:d.fontDescriptionSize||a.FONT_THUMBNAIL_PARAGRAPH_FONT_SIZE},id:b.id}},a.prototype.fixFontFamily=function(b){return b.replace(a.BROKEN_FONT_FAMILY_REGEXP,function(a){return'"'+a.replace(/\+/g," ")+'"'})},a.prototype.updateNodeView=function(a){var b=this,c=this.simpleSolutionManager.getSectionSolution(this.storyServices.story.selectedPage,a.getId());return _.each(c,function(a){a.isDirty=!0}),this.layoutSolver.calculateSolverStatus(void 0,void 0,!0).then(function(){return b.simpleSolutionManager.detectAndHandleSolutionFailure(a.getContainerPageId(),a.getId())}).then(function(){return b.storyServices.reRender("body")})},a.prototype.updateView=function(){return this.modelTree.dirtifyAllPages(),this.storyServices.onNodeChangedClearCacheSynchronous()},a}();FontUtils.BROKEN_FONT_FAMILY_REGEXP=/\w+(\+[\w]+)+/g,FontUtils.FONT_THUMBNAIL_PARAGRAPH_FONT_SIZE=14,FontUtils.FONT_THUMBNAIL_TITLE_FONT_SIZE=30,FontUtils.LARGE_THUMBNAIL_TITLE_FONT_SIZE_INCREMENT=6,angular.module("siteGeneratorStaticsConsumerAppInternal").service("fontUtils",FontUtils);var KitUtils=function(){function a(a,b,c,d,e){this.themeChooser=a,this.contentManager=b,this.$rootScope=c,this.$q=d,this.flags=e}return a.$inject=["themeChooser","contentManager","$rootScope","$q","flags"],a.prototype.calculateKits=function(){var a=this.themeChooser.getColorThemes()||[],b=this.contentManager.getKitIds()||[];return this.flags.noRandomForAutomationTests?this.$q.when(a):this.$q.when(this.resolveKits(b,a))},a.prototype.resolveKits=function(a,b){var c=new Set(a),d=function(a){return a.kitFonts.replacingKitId&&c.has(a.kitFonts.replacingKitId)?[a.kitFonts.replacingKitId,a]:[a.id,a]},e=new Map(b.map(d)),f=a.map(function(a){return e.get(a)}),g=f.filter(function(a){return a}),h=b.filter(function(a){return!c.has(a.id)&&!c.has(a.kitFonts.replacingKitId)});return g.concat(h)},a}();angular.module("siteGeneratorStaticsConsumerAppInternal").service("kitUtils",KitUtils);var builder;!function(a){var b=function(){function b(a,b,c,d,e,f,g,h){this.$q=a,this.TourAttachedTooltip=b,this.TourBackdrop=c,this.consumerBiLogger=d,this.presetsStrategyFactory=e,this.$compile=f,this.$timeout=g,this.$rootScope=h}return b.$inject=["$q","TourAttachedTooltip","TourBackdrop","consumerBiLogger","presetsStrategyFactory","$compile","$timeout","$rootScope"],b.prototype.show=function(b){var c=this,d=new this.TourAttachedTooltip,e=new this.TourBackdrop,f=this.$q.defer(),g=function(a){d.element.css({opacity:"0"}),c.$timeout(function(){d.destroy(),e.hide().then(function(){e.destroy(),f.resolve(a)})},200)};e.onClick(function(){return g(!1)});var h=this.compileCAB(b,g);d.setContent(h),d.attachTo(b.target,builders.AssistantPositionX.Right,builders.AssistantPositionY.Center),d.show(150);var i=b.nodes[0];return this.consumerBiLogger.sectionManagement.replaceSectionPanelIsLoaded(i.getId(),i.getSpecificContentElementType(),i.alias,b.strategyType===a.PresetsStrategyType.FitMode?"fit":"crop"),this.$timeout(function(){return e.show(0)}),f.promise},b.prototype.compileCAB=function(b,c){var d="<preview-list-panel\n        title='title'\n        text='text'\n        nodes='nodes'\n        intent='intent'\n        strategy='strategy'\n        on-close='onClose(value)'>\n      </preview-list-panel>",e=this.$rootScope.$new();return e.title=b.title,e.text=b.text,e.nodes=b.nodes,e.strategy=this.presetsStrategyFactory.create(b.strategyType,a.PresetsStrategyMode.Change),
e.intent=a.PreviewListIntent.ChangeSection,e.title=b.title,e.onClose=function(a){return c(a)},this.$compile(d)(e)},b}();a.PreviewListCAB=b}(builder||(builder={})),angular.module("siteGeneratorStaticsConsumerAppInternal").service("previewListCAB",builder.PreviewListCAB),angular.module("siteGeneratorStaticsConsumerAppInternal").component("previewListPanel",{template:"\n    <cc-panel-frame label=\"{{::$ctrl.title|translate}}\" show-close-button=\"true\" on-close=\"$ctrl.onClose({value:false})\">\n      <cc-panel-fixed-top>\n        <div class=\"text-t2\">\n          {{::$ctrl.text|translate}}\n        </div>\n      </cc-panel-fixed-top>\n      <cc-panel-body>\n        <preview-list\n          scale='0.18'\n          strategy='$ctrl.strategy'\n          intent='$ctrl.intent'\n          nodes='$ctrl.nodes'\n          draggable='false'\n          on-selection-changed='$ctrl.onClose({value:true})'>\n        </preview-list>\n      </cc-panel-body>\n    </cc-panel-frame>",bindings:{title:"<",text:"<",nodes:"<",strategy:"<",intent:"<",onClose:"&"}});var __assign=this&&this.__assign||Object.assign||function(a){for(var b,c=1,d=arguments.length;d>c;c++){b=arguments[c];for(var e in b)Object.prototype.hasOwnProperty.call(b,e)&&(a[e]=b[e])}return a},OnstageActionsManager=function(){function a(a,b,c,d,e,f,g,h,i,j,k,l,m,n){this.$rootScope=a,this.$state=b,this.$stateParams=c,this.$timeout=d,this.ONSTAGE_EVENTS=e,this.storyServices=f,this.applicationState=g,this.modelTree=h,this.ONSTAGE_ACTIONS_BY_TYPE=i,this.fieldEditorConfiguration=j,this.mediaOverrideManager=k,this.nodeFetcher=l,this.PresetMediaType=m,this.consumerMenu=n,this.subscribe(e.OPEN_SEO,function(){d(function(){g.goToPageSeo(f.story.selectedPage)})})}return a.$inject=["$rootScope","$state","$stateParams","$timeout","ONSTAGE_EVENTS","storyServices","applicationState","modelTree","ONSTAGE_ACTIONS_BY_TYPE","fieldEditorConfiguration","mediaOverrideManager","nodeFetcher","PresetMediaType","consumerMenu"],a.prototype.runClickAction=function(a){var b=this.getActionsOfField(a);b&&b.click&&this.executeAction(b.click,a)},a.prototype.runDblClickAction=function(a){var b=this.getActionsOfField(a);b&&b.dbl_click&&this.executeAction(b.dbl_click,a)},a.prototype.hasDoubleClickAction=function(a){var b=this.getActionsOfField(a);return b&&b.dbl_click},a.prototype.getMenuActions=function(a){var b=this.getActionsOfField(a);return b&&b.menu||[]},a.prototype.executeAction=function(a,b){var c=this;a.state&&a.state.name!==this.$state.current.name&&this.$timeout(function(){return c.$state.go(a.state.name,__assign({},c.$stateParams))}),this.emitEventAction(a.event,b)},a.prototype.emitEventAction=function(a,b){this.$rootScope.$emit(a,b)},a.prototype.subscribe=function(a,b,c){return this.$rootScope.$on(a,function(a,c){b(c)})},a.prototype.getActionsOfField=function(a){var b=this.detectComponentType(a);return b&&this.getActionsByType(b)},a.prototype.getActionsByType=function(a){return this.ONSTAGE_ACTIONS_BY_TYPE[a]},a.prototype.detectComponentType=function(a){if("media"===a.data.type){if(this.isLogo(a))return"LOGO";if(this.fieldEditorConfiguration.isSocial(a.data))return"SOCIAL";if(this.isGallery())return"GALLERY";if(this.isImage())return this.isDisaleCrop()?"IMAGE_WITHOUT_CROP":"IMAGE";if(this.isExtVideo())return"EXT_VIDEO";if(this.isVideo())return"VIDEO"}return this.fieldEditorConfiguration.isButton(a.data)?"BUTTON":this.fieldEditorConfiguration.isTextType(a.data)?this.isBusinessName(a)?"BUSINESS_NAME":this.isContact(a)?"CONTACT":this.isMap(a)?"MAP":"TEXT":this.isMenu(a)?1===this.consumerMenu.getVisiblePageNodes().length?"SECTIONS_MENU":"PAGES_MENU":null},a.prototype.isLogo=function(a){return"Logo"===a.key},a.prototype.isBusinessName=function(a){return"BusinessName"===a.key},a.prototype.isContact=function(a){return"form"===a.data.subType},a.prototype.isMap=function(a){return"map"===a.data.subType},a.prototype.isMenu=function(a){return"Menu"===a.key},a.prototype.isImage=function(){return"Image"===this.mediaOverrideManager.getCurrentSelectedMediaTypeLabel(this.nodeFetcher.getCurrentActiveNode())},a.prototype.isVideo=function(){return"Video"===this.mediaOverrideManager.getCurrentSelectedMediaTypeLabel(this.nodeFetcher.getCurrentActiveNode())},a.prototype.isExtVideo=function(){return this.mediaOverrideManager.getCurrentSelectedMediaPreviewType(this.nodeFetcher.getCurrentActiveNode())===cc.MediaPreviewType.ExtVideo},a.prototype.isGallery=function(){return"Gallery"===this.mediaOverrideManager.getCurrentSelectedMediaTypeLabel(this.nodeFetcher.getCurrentActiveNode())},a.prototype.isDisaleCrop=function(){if(this.applicationState.isInMobileEditMode())return!0;var a=this.nodeFetcher.getCurrentActiveNode(),b=this.mediaOverrideManager.getAllowedMediaOverride(a);return b===this.PresetMediaType.COAST2COAST||b===this.PresetMediaType.COLUMNBG},a}();angular.module("siteGeneratorStaticsConsumerAppInternal").service("onstageActionsManager",OnstageActionsManager);var __assign=this&&this.__assign||Object.assign||function(a){for(var b,c=1,d=arguments.length;d>c;c++){b=arguments[c];for(var e in b)Object.prototype.hasOwnProperty.call(b,e)&&(a[e]=b[e])}return a},OnstageAction=function(){function a(a,b,c,d,e,f){this.label=a,this.name=b,this.icon=c,this.event=d,this.state=e,this.goToState=f}return a}(),OnstageActions=function(){function a(a){this.ONSTAGE_EVENTS=a,this.HIDE=new OnstageAction("overlay.actions.hide","hide","osi:hideeye",this.ONSTAGE_EVENTS.HIDE),this.EDIT_CONTENT=new OnstageAction("overlay.actions.edit","edit-content","osi:rename",this.ONSTAGE_EVENTS.EDIT_CONTENT,{name:config.STATES.BUILDER_EDIT}),this.EDIT_ADDRESS=__assign({},this.EDIT_CONTENT,{label:"overlay.actions.edit-address",icon:"osi:address"}),this.CROP_IMAGE=new OnstageAction("overlay.actions.crop","crop-image","osi:crop",this.ONSTAGE_EVENTS.CROP_IMAGE),this.OPEN_MEDIA=new OnstageAction("overlay.actions.open-media","open-media","osi:replace",this.ONSTAGE_EVENTS.OPEN_MEDIA_MANAGER),this.ORGANIZE_GALLERY=__assign({},this.OPEN_MEDIA,{label:"overlay.actions.organize-gallery",name:"organize-gallery"}),this.CHANGE_GALLERY_TYPE=new OnstageAction("overlay.actions.gallery-type","gallery-type","osi:gallery",this.ONSTAGE_EVENTS.CHANGE_GALLERY_TYPE),this.OPEN_MEDIA_SETTINGS=new OnstageAction("overlay.actions.settings","settings","osi:settings",this.ONSTAGE_EVENTS.OPEN_SETTINGS,{name:config.STATES.BUILDER_MEDIA_SETTINGS}),this.LINK_TO=new OnstageAction("overlay.actions.link-to","link-to","osi:link",this.ONSTAGE_EVENTS.LINK_TO),this.MEDIA_LINK_TO=__assign({},this.LINK_TO,{event:this.ONSTAGE_EVENTS.MEDIA_LINK_TO}),this.OPEN_SEO=new OnstageAction("overlay.actions.edit-seo","edit-seo","osi:seo",this.ONSTAGE_EVENTS.OPEN_SEO),this.OPEN_PAGES_PANEL=new OnstageAction("overlay.actions.edit-pages","edit-pages","osi:pages",null,{name:config.STATES.BUILDER_PAGES}),this.OPEN_SOCIAL_PANEL=new OnstageAction("overlay.actions.edit","edit-socials","osi:edit",this.ONSTAGE_EVENTS.OPEN_SOCIAL_PANEL),this.EDIT_LIST_ITEM=new OnstageAction("overlay.actions.edit","edit-list-item","osi:edit",this.ONSTAGE_EVENTS.EDIT_LIST_ITEM),this.HIDE_LIST_ITEM=new OnstageAction("overlay.actions.hide","hide-list-item","osi:hideeye",this.ONSTAGE_EVENTS.HIDE_LIST_ITEM),this.DELETE_LIST_ITEM=new OnstageAction("overlay.actions.delete","delete-list-item","osi:delete",this.ONSTAGE_EVENTS.DELETE_LIST_ITEM),this.DUPLICATE_LIST_ITEM=new OnstageAction("overlay.actions.duplicate","duplicate-list-item","osi:duplicate",this.ONSTAGE_EVENTS.DUPLICATE_LIST_ITEM),this.LIST_ITEM_TO_PAGE=new OnstageAction("overlay.actions.list-item-to-page","create-page-from-item","osi:moveto",this.ONSTAGE_EVENTS.LIST_ITEM_TO_PAGE)}return a.$inject=["ONSTAGE_EVENTS"],a}();angular.module("siteGeneratorStaticsConsumerAppInternal").service("ONSTAGE_ACTIONS",OnstageActions);var OnstageActionMap=function(){function a(a,b,c){this.click=a,this.dbl_click=b,this.menu=c}return a}(),OnstageActionsByType=function(){function a(a){this.ONSTAGE_ACTIONS=a,this.LOGO=new OnstageActionMap(this.ONSTAGE_ACTIONS.EDIT_CONTENT,this.ONSTAGE_ACTIONS.OPEN_MEDIA,[this.ONSTAGE_ACTIONS.OPEN_MEDIA,this.ONSTAGE_ACTIONS.OPEN_MEDIA_SETTINGS,this.ONSTAGE_ACTIONS.HIDE,this.ONSTAGE_ACTIONS.MEDIA_LINK_TO]),this.BUTTON=new OnstageActionMap(this.ONSTAGE_ACTIONS.EDIT_CONTENT,null,[this.ONSTAGE_ACTIONS.EDIT_CONTENT,this.ONSTAGE_ACTIONS.LINK_TO,this.ONSTAGE_ACTIONS.HIDE]),this.TEXT=new OnstageActionMap(this.ONSTAGE_ACTIONS.EDIT_CONTENT,null,[this.ONSTAGE_ACTIONS.EDIT_CONTENT,this.ONSTAGE_ACTIONS.HIDE]),this.BUSINESS_NAME=new OnstageActionMap(this.ONSTAGE_ACTIONS.EDIT_CONTENT,null,[this.ONSTAGE_ACTIONS.EDIT_CONTENT,this.ONSTAGE_ACTIONS.HIDE,this.ONSTAGE_ACTIONS.OPEN_SEO]),this.CONTACT=new OnstageActionMap(this.ONSTAGE_ACTIONS.EDIT_CONTENT,null,[this.ONSTAGE_ACTIONS.HIDE]),this.MAP=new OnstageActionMap(this.ONSTAGE_ACTIONS.EDIT_CONTENT,null,[this.ONSTAGE_ACTIONS.EDIT_ADDRESS,this.ONSTAGE_ACTIONS.HIDE]),this.PAGES_MENU=new OnstageActionMap(null,this.ONSTAGE_ACTIONS.OPEN_PAGES_PANEL,[this.ONSTAGE_ACTIONS.OPEN_PAGES_PANEL,this.ONSTAGE_ACTIONS.HIDE]),this.SECTIONS_MENU=new OnstageActionMap(null,null,[this.ONSTAGE_ACTIONS.HIDE]),this.SOCIAL=new OnstageActionMap(this.ONSTAGE_ACTIONS.OPEN_SOCIAL_PANEL,null,[this.ONSTAGE_ACTIONS.OPEN_SOCIAL_PANEL,this.ONSTAGE_ACTIONS.HIDE]),this.EXT_VIDEO=new OnstageActionMap(this.ONSTAGE_ACTIONS.EDIT_CONTENT,this.ONSTAGE_ACTIONS.OPEN_MEDIA,[this.ONSTAGE_ACTIONS.OPEN_MEDIA,this.ONSTAGE_ACTIONS.OPEN_MEDIA_SETTINGS,this.ONSTAGE_ACTIONS.HIDE]),this.VIDEO=new OnstageActionMap(this.ONSTAGE_ACTIONS.EDIT_CONTENT,this.ONSTAGE_ACTIONS.OPEN_MEDIA,[this.ONSTAGE_ACTIONS.OPEN_MEDIA,this.ONSTAGE_ACTIONS.HIDE]),this.GALLERY=new OnstageActionMap(this.ONSTAGE_ACTIONS.EDIT_CONTENT,this.ONSTAGE_ACTIONS.ORGANIZE_GALLERY,[this.ONSTAGE_ACTIONS.ORGANIZE_GALLERY,this.ONSTAGE_ACTIONS.CHANGE_GALLERY_TYPE,this.ONSTAGE_ACTIONS.HIDE]),this.IMAGE=new OnstageActionMap(this.ONSTAGE_ACTIONS.EDIT_CONTENT,this.ONSTAGE_ACTIONS.OPEN_MEDIA,[this.ONSTAGE_ACTIONS.OPEN_MEDIA,this.ONSTAGE_ACTIONS.OPEN_MEDIA_SETTINGS,this.ONSTAGE_ACTIONS.CROP_IMAGE,this.ONSTAGE_ACTIONS.MEDIA_LINK_TO,this.ONSTAGE_ACTIONS.HIDE]),this.IMAGE_WITHOUT_CROP=new OnstageActionMap(this.ONSTAGE_ACTIONS.EDIT_CONTENT,this.ONSTAGE_ACTIONS.OPEN_MEDIA,[this.ONSTAGE_ACTIONS.OPEN_MEDIA,this.ONSTAGE_ACTIONS.OPEN_MEDIA_SETTINGS,this.ONSTAGE_ACTIONS.MEDIA_LINK_TO,this.ONSTAGE_ACTIONS.HIDE]),this.LIST_ITEM=new OnstageActionMap(this.ONSTAGE_ACTIONS.EDIT_LIST_ITEM,null,[this.ONSTAGE_ACTIONS.EDIT_LIST_ITEM,this.ONSTAGE_ACTIONS.DUPLICATE_LIST_ITEM,this.ONSTAGE_ACTIONS.HIDE_LIST_ITEM,this.ONSTAGE_ACTIONS.DELETE_LIST_ITEM,this.ONSTAGE_ACTIONS.LIST_ITEM_TO_PAGE])}return a.$inject=["ONSTAGE_ACTIONS"],a}();angular.module("siteGeneratorStaticsConsumerAppInternal").service("ONSTAGE_ACTIONS_BY_TYPE",OnstageActionsByType);var OverlaySegmentManager=function(){function a(a,b,c,d,e,f,g,h){this.storyServices=a,this.Solution=b,this.modelTree=c,this.tpaService=d,this.applicationState=e,this.sitePartTypes=f,this.$state=g,this.overlayManager=h,this.nodeToSegmentOverlayElement={}}return a.$inject=["storyServices","Solution","modelTree","tpaService","applicationState","sitePartTypes","$state","overlayManager"],a.prototype.onSegmentOverlayCreate=function(a,b){this.nodeToSegmentOverlayElement[a.getId()]=b},a.prototype.onSegmentOverlayDestroy=function(a){delete this.nodeToSegmentOverlayElement[a.getId()]},a.prototype.isActiveSegmentNodeId=function(a,b){if(this.applicationState.isEditMode()){var c=this.applicationState.getContentFocus();if(c)return c.sitePart===this.sitePartTypes.HEADER?"header"===a:this.$state.params.childId?a===this.$state.params.childId:a===c.nodeId||b&&0===a.indexOf(c.nodeId)}return!1},a.prototype.isActiveSegmentNodeIdAnyEdit=function(a,b){if(this.applicationState.isInAnyEditOrDesignOfSectionPanel()){var c=this.applicationState.getContentFocus();if(c)return c.sitePart===this.sitePartTypes.HEADER?"header"===a:this.$state.params.childId?a===this.$state.params.childId:a===c.nodeId||b&&0===a.indexOf(c.nodeId)}return!1},a.prototype.getSegmentOverlayPosition=function(b){var c=this.nodeToSegmentOverlayElement[b];return c.find(a.OverlaySegmentSelector).offset()},a.prototype.getMediaOverlayPosition=function(b){var c=this.nodeToSegmentOverlayElement[b];return c.find(a.OverlaySegmentSelector+" "+a.OverlayMediaSelector)[0].getBoundingClientRect()},a.prototype.editSegment=function(a){var b="header"===a.getSafeId()?this.modelTree.getGeneralInformation():a.node,c=!0;if(b.isTpaNode()&&(c=!!this.tpaService.getEditWidgetUrl(b)),c){this.lastHoveredArgs=null,this.lastClickedArgs=null;var d=["ListHeader","ListFooter"].indexOf(a.contentElement.type)>-1;!d&&a.node&&a.node.isListItem&&this.applicationState.isEditMode()?this.applicationState.goToEditMode(a.getSafeId()):this.applicationState.goToEditMode()}},a}();OverlaySegmentManager.OverlaySegmentSelector=".segment-overlay",OverlaySegmentManager.OverlayMediaSelector=".segment-component.media",angular.module("siteGeneratorStaticsConsumerAppInternal").service("overlaySegmentManager",OverlaySegmentManager);var OverlayData=function(){function a(a,b){this.listSpanManager=a,this.sitePartTypes=b,this.init()}return Object.defineProperty(a.prototype,"dropTargetData",{get:function(){return this._dropTargetData},enumerable:!0,configurable:!0}),Object.defineProperty(a.prototype,"siteParts",{get:function(){return this._siteParts},enumerable:!0,configurable:!0}),Object.defineProperty(a.prototype,"draggedListSpan",{get:function(){return this._draggedListSpan},set:function(a){this._draggedListSpan=a},enumerable:!0,configurable:!0}),Object.defineProperty(a.prototype,"focusedListSpan",{get:function(){return this._focusedListSpan},set:function(a){this._focusedListSpan=a},enumerable:!0,configurable:!0}),Object.defineProperty(a.prototype,"hoveredListSpan",{get:function(){return this._hoveredListSpan},set:function(a){this._hoveredListSpan=a},enumerable:!0,configurable:!0}),Object.defineProperty(a.prototype,"draggedPresetPreview",{get:function(){return this._draggedPresetPreview},set:function(a){this._draggedPresetPreview=a},enumerable:!0,configurable:!0}),a.prototype.init=function(){this._siteParts={},this._siteParts[this.sitePartTypes.HEADER]={},this._siteParts[this.sitePartTypes.BODY]={},this._siteParts[this.sitePartTypes.FOOTER]={},this._dropTargetData=new OverlayDropTargetData},a}(),OverlayDropTargetData=function(){function a(){this._dropTargetId=null,this._dropTargetPosition=0,this._dropTargetLocked=!1}return Object.defineProperty(a.prototype,"dropTargetId",{get:function(){return this._dropTargetId},set:function(a){this._dropTargetId=a},enumerable:!0,configurable:!0}),Object.defineProperty(a.prototype,"isDropTargetLocked",{get:function(){return this._dropTargetLocked},enumerable:!0,configurable:!0}),Object.defineProperty(a.prototype,"dropTargetPosition",{get:function(){return this._dropTargetPosition},set:function(a){this._dropTargetPosition=a},enumerable:!0,configurable:!0}),a.prototype.lock=function(){this._dropTargetLocked=!0},a.prototype.unlock=function(){this._dropTargetLocked=!1},a}();OverlayDropTargetData.DropTargetHeight=450;var OverlayManager=function(){function a(a,b,c,d,e,f,g,h,i,j,k,l,m,n,o,p,q){var r=this;if(this.$rootScope=a,this.solutionSantaMediator=b,this.$q=c,this.renderedModelMobileAdapter=d,this.sitePartTypes=e,this.previewScale=f,this.modelTree=g,this.designKit=h,this.storyServices=i,this.applicationParameters=j,this.Solution=k,this.documentServicesMediator=l,this.flags=m,this.FeatureList=n,this.prettyAlgoRuleEngine=o,this.prettyAlgoRules=p,this.$injector=q,this._partRenderCache={},this._listSpanManager=new ListSpanManager(this.solutionSantaMediator,this.$q,this.renderedModelMobileAdapter,this.documentServicesMediator,this.previewScale,function(){return r.applicationParameters.isInMobileEditMode()},this.sitePartTypes),this._overlayData=new OverlayData(this.listSpanManager,this.sitePartTypes),this.$rootScope.$watch(function(){return r.previewScale.getScale()},function(a){return r.calculateDropTargetPosition(r.dropTargetId)}),this.storyServices.onRenderedPart(this.renderedPartHandler.bind(this)),this.flags.debug&&this.flags.prettyAlgo){var s=this.$injector.get("prettyAlgoDX");s.init().then(function(){return s.getRulesFromDB()}).then(function(a){r.prettyAlgoRules=a,console.log("loaded rules from firebase",a)})}}return a.$inject=["$rootScope","solutionSantaMediator","$q","renderedModelMobileAdapter","sitePartTypes","previewScale","modelTree","designKit","storyServices","applicationParameters","Solution","documentServicesMediator","flags","FeatureList","prettyAlgoRuleEngine","prettyAlgoRules","$injector"],a.prototype.getPartRenderCache=function(a){void 0===a&&(a=this.applicationParameters.isInMobileEditMode());var b=a?"mobile":"desktop";return this._partRenderCache[b]=this._partRenderCache[b]||{},this._partRenderCache[b]},Object.defineProperty(a.prototype,"data",{get:function(){return this._overlayData},enumerable:!0,configurable:!0}),a.prototype.getDropTargetSection=function(){var a=this,b=this.listSpanManager.getAllInBody();return _.find(b,function(b){return b.node.getId()===a.dropTargetId})},a.prototype.onEditModeSwitched=function(){var a=this;_.each(this.getPartRenderCache(),function(b,c){return a.updateData(b.solution,c,b.height)})},a.prototype.getSitePartByType=function(a){return this.data.siteParts[a]},a.prototype.updateSitePart=function(a){this.data.siteParts[a.partType]=a,this.calculatePartHeight(a.partType)},a.prototype.getViewerHeight=function(){var b=_.sum(this.data.siteParts,function(a){return a.originalHeight});return this.dropTargetId&&!this.listSpanManager.isBodyEmpty()&&(b+=a.DropTargetHeight),b},a.prototype.calculateBodyHeight=function(){this.calculatePartHeight(this.sitePartTypes.BODY)},Object.defineProperty(a.prototype,"listSpanManager",{get:function(){return this._listSpanManager},enumerable:!0,configurable:!0}),a.prototype.isListSpanHovered=function(a){return this.listSpanManager.equals(a,this.data.hoveredListSpan)},a.prototype.isListSpanFocused=function(a){return this.listSpanManager.equals(a,this.data.focusedListSpan)},a.prototype.updateContentFocus=function(a){a?(this.data.focusedListSpan=this.listSpanManager.getByNodeId(a.nodeId,a.sitePart),this.isListSpanFocused(this.data.hoveredListSpan)&&(this.data.hoveredListSpan=null)):(this.data.focusedListSpan=null,this.data.hoveredListSpan=null)},Object.defineProperty(a.prototype,"isCurrentPageEmpty",{get:function(){if(!this.storyServices.story)return!0;var a=this.modelTree.getPageNodeById(this.storyServices.story.selectedPage);return!_.some(a.children,{userHidden:!1})},enumerable:!0,configurable:!0}),Object.defineProperty(a.prototype,"dropTargetData",{get:function(){return this.data.dropTargetData},enumerable:!0,configurable:!0}),Object.defineProperty(a.prototype,"dropTargetId",{get:function(){return this.dropTargetData.dropTargetId},enumerable:!0,configurable:!0}),a.prototype.clearDropTarget=function(){return this.setDropTarget(null)},a.prototype.setDropTarget=function(a){if(this.dropTargetData.isDropTargetLocked)return!1;if(a===this.dropTargetId)return!0;this.designKit.resetPresetSelections();var b=this.dropTargetId;return this.dropTargetData.dropTargetId=a,this.calculatePartHeight(this.sitePartTypes.BODY),a?this.handleDropTargetChange(b,a):this.listSpanManager.rerenderFromIndex(0),!0},a.prototype.lockDropTarget=function(a){return this.dropTargetData.isDropTargetLocked?!1:(this.setDropTarget(a),this.dropTargetData.lock(),!0)},a.prototype.unlockDropTarget=function(){this.dropTargetData.unlock()},a.prototype.makeSpaceForDropTarget=function(b,c){var d=this.listSpanManager.getAllInBody(),e=this.getListSpanIndex(c,d),f=b?this.getListSpanIndex(b,d):d.length,g=Math.min(f,e),h=Math.max(f,e),i=d.slice(g+1,h+1),j=f>e?1:-1,k=j*a.DropTargetHeight;return this.listSpanManager.moveListSpansByOffset(i,k)},a.prototype.handleDropTargetChange=function(a,b){this.makeSpaceForDropTarget(a,b),this.calculateDropTargetPosition(b)},a.prototype.calculateDropTargetPosition=function(a){if(!a)return void(this.data.dropTargetData.dropTargetPosition=0);var b=this.listSpanManager.getAllInBody(),c=_.find(b,function(b){return b.node.getId()===a});if(c){var d=this.listSpanManager.getListSpanLayout(c);this.data.dropTargetData.dropTargetPosition=(d.top+d.height)*this.previewScale.getScale()}else this.data.dropTargetData.dropTargetPosition=0},a.prototype.renderedPartHandler=function(a,b,c,d,e){var f=c[0]&&c[0].isMobile();this.getPartRenderCache(f)[b]={solution:c,height:d};var g=!c[0]||!!c[0].isMobile()==!!this.applicationParameters.isInMobileEditMode();g&&this.updateData(c,b,d)},a.prototype.updateData=function(a,b,c){var d=this,e=this.Solution.calculateListSpans(a),f={partType:b,originalHeight:c,adjustedHeight:c,listSpans:e};if(this.flags.prettyAlgo&&b===this.sitePartTypes.BODY)for(var g=this.modelTree.getPageNodeById(this.storyServices.story.selectedPage),h=g.children,i=2,j=h.length;j>i;i++){var k=e[h[i-1].id],l=e[h[i].id],m=new this.FeatureList(k),n=new this.FeatureList(l),o=this.prettyAlgoRuleEngine.getScores(this.prettyAlgoRules,m,[n])[0];o&&(l.prettyAlgo={score:o.score,rules:o.rules,features:n})}this.updateSitePart(f),this.listSpanManager.setSitePartListSpans(b,_.values(e),function(){return b!==d.sitePartTypes.BODY||d.applicationParameters.isInMobileEditMode()?f.adjustedHeight:ListSpanManager.MinBodyHeight}),this.data.focusedListSpan&&(this.data.focusedListSpan=this.listSpanManager.getByNodeId(this.data.focusedListSpan.listNodeId,this.data.focusedListSpan.sitePart)),this.data.hoveredListSpan&&(this.data.hoveredListSpan=this.listSpanManager.getByNodeId(this.data.hoveredListSpan.listNodeId,this.data.hoveredListSpan.sitePart))},a.prototype.getListSpanIndex=function(a,b){var c=this;return _.findIndex(b,function(b){var d=b.node.id,e=b.sitePart;return d===a&&e===c.sitePartTypes.BODY})},a.prototype.calculatePartHeight=function(b){if(b===this.sitePartTypes.BODY){var c=this.getSitePartByType(b);if(!c)throw new Error("site part not found:"+b);c.adjustedHeight=c.originalHeight,this.data.draggedListSpan&&(c.adjustedHeight-=this.listSpanManager.getListSpanLayout(this.data.draggedListSpan).height),this.data.dropTargetData.dropTargetId&&!this.isCurrentPageEmpty&&(c.adjustedHeight+=a.DropTargetHeight)}},a}();OverlayManager.DropTargetHeight=450,angular.module("siteGeneratorStaticsConsumerAppInternal").service("overlayManager",OverlayManager);var IframeViewAdapter=function(){function a(a,b,c,d){this.previewService=a,this.applicationState=b,this.flags=c,this.$document=d}return a.$inject=["previewService","applicationState","flags","$document"],a.prototype.prepareForPreview=function(){if(this.init()){if(this.iframe.style.width="",this.iframe.style.marginLeft="",this.iframe.style.transform="none",this.browserWrapper&&(this.browserWrapper.style.height="100%"),(this.flags.newMobilePreview||this.flags.mobileEditor)&&this.applicationState.isPreviewDisplay()&&this.applicationState.isInMobileEditMode())return this.iframe.style.height="",void(this.iframe.style.maxWidth="");this.iframe.style.height="100%",this.iframe.style.maxWidth=""}},a.prototype.exitPreview=function(){this.browserWrapper&&(this.browserWrapper.style.height="")},a.prototype.setHeight=function(a){return this.init()?(this.flags.newMobilePreview||this.flags.mobileEditor)&&this.applicationState.isPreviewDisplay()&&this.applicationState.isInMobileEditMode()?void(this.iframe.style.height=""):void(this.iframe.style.height=this.applicationState.isPreviewDisplay()?"100%":a+"px"):void 0},a.prototype.setScale=function(a){if(this.init()){var b=this.previewService.getDocumentServices();b&&(b.site.setScrollAndScale(0,0,a),this.centerIframe(a))}},a.prototype.setScrollTop=function(a){var b=this.previewService.getDocumentServices();b&&b.site.setScroll(0,a)},a.prototype.init=function(){if(this.iframe)return!0;var a=this.$document.find(Viewer.IframeSelector);if(0===a.length)return!1;this.iframe=a[0];var b=$(".browser-wrapper");return this.browserWrapper=b&&b[0],!0},a.prototype.centerIframe=function(a){var b=this.applicationState.isInMobileEditMode()?Viewer.ViewerMobileBaseSize:Viewer.ViewerDesktopBaseSize,c=b*a,d=(b-c)/2;this.iframe.style.marginLeft="-"+d+"px",this.iframe.style.width=b+"px",this.iframe.style.maxWidth=b+"px"},a}();angular.module("siteGeneratorStaticsConsumerAppInternal").service("iframeViewAdapter",IframeViewAdapter);var ViewerHeightController=function(){function a(a,b,c,d,e){var f=this;this.$window=a,this.$rootScope=b,this.previewScale=c,this.overlayManager=d,this.iframeViewAdapter=e,this.registerWindowResizeListener(),this.$rootScope.$watch(function(){return f.getViewportHeight()+"-"+f.overlayManager.getViewerHeight()},function(){return f.resetHeight()})}return a.$inject=["$window","$rootScope","previewScale","overlayManager","iframeViewAdapter"],a.prototype.setHeight=function(a,b){b&&(this.currentViewerHeight=b);var c=this.getViewportHeight(),d=this.currentViewerHeight*a,e=Math.min(d,c);0!==e&&this.iframeViewAdapter.setHeight(e)},a.prototype.getViewportHeight=function(){return angular.element(Viewer.BuilderSelector).height()-angular.element(Viewer.TopBarSelector).height()-2*Viewer.FakeBrowserVerticalSpacing-Viewer.FakeBrowserBarHeight},a.prototype.resetHeight=function(){this.setHeight(this.previewScale.getScale(),this.overlayManager.getViewerHeight())},a.prototype.registerWindowResizeListener=function(){var a=this,b=_.debounce(function(){a.previewScale.reset(),a.resetHeight(),a.$rootScope.$apply()},Viewer.ResizeWindowDebounce);this.$window.addEventListener(Viewer.WindowResizeEvent,b)},a}();angular.module("siteGeneratorStaticsConsumerAppInternal").service("viewerHeightController",ViewerHeightController);var ViewerScaleController=function(){function a(a,b,c,d,e,f,g){var h=this;this.$rootScope=a,this.initService=b,this.previewScale=c,this.applicationState=d,this.viewerHeightController=e,this.viewerScrollController=f,this.iframeViewAdapter=g,b.loaded().then(function(){h.$rootScope.$watch(function(){return h.applicationState.isPreviewDisplay()+"-"+h.applicationState.isInMobileEditMode()+"-"+h.previewScale.getScale()},function(){return h.updateScale(h.previewScale.getScale())})})}return a.$inject=["$rootScope","initService","previewScale","applicationState","viewerHeightController","viewerScrollController","iframeViewAdapter"],a.prototype.updateScale=function(a){this.applicationState.isPreviewDisplay()||(this.iframeViewAdapter.setScale(a),this.viewerHeightController.setHeight(a),this.viewerScrollController.refreshScroll())},a}();angular.module("siteGeneratorStaticsConsumerAppInternal").service("viewerScaleController",ViewerScaleController);var ViewerScrollController=function(){function a(a,b){this.$rootScope=a,this.iframeViewAdapter=b}return a.$inject=["$rootScope","iframeViewAdapter"],a.prototype.init=function(a){this.$scrollingSource=a,this.$scrollingSource.on("scroll",this.onScroll.bind(this))},a.prototype.refreshScroll=function(){this.scrollIframe(this.$scrollingSource.scrollTop())},a.prototype.onScroll=function(a){this.scrollIframe(a.target.scrollTop)},a.prototype.scrollIframe=function(b){this.iframeViewAdapter.setScrollTop(b),this.$rootScope.$broadcast(a.PreviewScrollEvent)},a}();ViewerScrollController.PreviewScrollEvent="previewScroll",angular.module("siteGeneratorStaticsConsumerAppInternal").service("viewerScrollController",ViewerScrollController);var ViewerPreviewController=function(){function a(a,b,c){var d=this;this.$rootScope=a,this.applicationState=b,this.iframeViewAdapter=c,this.$rootScope.$watch(function(){return d.applicationState.isPreviewDisplay()},this.handlePreviewChange.bind(this))}return a.$inject=["$rootScope","applicationState","iframeViewAdapter"],a.prototype.handlePreviewChange=function(a,b){return a?void(a!==b&&this.iframeViewAdapter.prepareForPreview()):void this.iframeViewAdapter.exitPreview()},a}();angular.module("siteGeneratorStaticsConsumerAppInternal").service("viewerPreviewController",ViewerPreviewController);var Viewer=function(){function a(b,c,d,e,f,g,h,i,j){this.previewService=b,this.$window=c,this.$element=d,this.$scope=e,this.applicationState=f,this.viewerScrollController=g,this.viewerScaleController=h,this.viewerHeightController=i,this.viewerPreviewController=j,a.ViewerDesktopBaseSize=this.applicationState.previewFrameWidth}return a.$inject=["previewService","$window","$element","$scope","applicationState","viewerScrollController","viewerScaleController","viewerHeightController","viewerPreviewController"],a.prototype.$postLink=function(){var b=this,c=this.$element.find(a.IframeSelector);this.contentWindow=c[0].contentWindow,this.enableReactDevTools(),this.previewService.registerUrlLoader(this.onUrlLoad.bind(this)),this.$window.addEventListener("message",this.onWindowMessage.bind(this),!1),this.$scope.$watch(function(){return b.applicationState.isPreviewDisplay()},function(a,c){b.$element.css("opacity",a?0:1)})},a.prototype.onUrlLoad=function(a){this.contentWindow.location.replace(a)},a.prototype.onWindowMessage=function(a){"documentServicesLoaded"===a.data&&this.contentWindow&&this.contentWindow.documentServices&&this.contentWindow.documentServicesModel&&this.previewCtrl.viewerLoaded(this.contentWindow,this.contentWindow.documentServices,this.contentWindow.documentServicesModel)},a.prototype.enableReactDevTools=function(){var a=this;this.$window.__REACT_DEVTOOLS_GLOBAL_HOOK__&&this.$element.load(function(){a.contentWindow.__REACT_DEVTOOLS_GLOBAL_HOOK__=a.$window.__REACT_DEVTOOLS_GLOBAL_HOOK__})},a}();Viewer.ViewerDesktopBaseSize=1040,Viewer.ViewerMobileBaseSize=320,Viewer.FakeBrowserVerticalSpacing=18,Viewer.FakeBrowserBarHeight=36,Viewer.ResizeWindowDebounce=300,Viewer.WindowResizeEvent="resize",Viewer.BuilderSelector=".builder",Viewer.TopBarSelector="top-bar",Viewer.IframeSelector="iframe.viewer",angular.module("siteGeneratorStaticsConsumerAppInternal").component("viewer",{template:'<iframe name="viewer" class="viewer" ng-class="{ preview: $ctrl.applicationState.isPreviewDisplay() }" style="height: 100px;"></iframe>',require:{previewCtrl:"^preview"},controller:Viewer});var FakeBrowser=function(){function a(a,b,c,d,e,f,g,h,i,j,k){this.$scope=a,this.$element=b,this.previewScale=c,this.applicationState=d,this.previewService=e,this.iframeViewAdapter=f,this.viewerScaleController=g,this.flags=h,this.$translate=i,this.$document=j,this.$mdDialog=k}return a.$inject=["$scope","$element","previewScale","applicationState","previewService","iframeViewAdapter","viewerScaleController","flags","$translate","$document","$mdDialog"],a.prototype.$postLink=function(){var a=this;this.$scope.$watch(function(){return a.previewScale.getScale()},function(b){return a.updateWidth(b)}),this.$scope.$watch(function(){return a.applicationState.isInMobileEditMode()},function(b){return a.toggleEditModeBrowser(b)})},a.prototype.isPreviewDisplay=function(){return this.applicationState.isPreviewDisplay()},a.prototype.isInMobileEditMode=function(){return this.applicationState.isInMobileEditMode()},a.prototype.extraWidthIfDefined=function(a){var b=this.applicationState.previewFrameWidth;return{width:b,maxWidth:this.isPreviewDisplay()?"100% !important":b}},a.prototype.getSiteUrl=function(){var a=this.applicationState.getStoryMetadata(),b=a&&a.publicUri,c=b&&-1===b.indexOf("editor.wix");return c?b:"http://www.wix.com/mysite"},a.prototype.getBarLabel=function(){return this.$translate("builder.fake-browser.choose-domain")},a.prototype.openConnectDomainDialog=function(b){this.$mdDialog.show({parent:this.$document.body,targetEvent:b,onComplete:function(){angular.element(".md-dialog-container").addClass("tour-modal")},template:'<md-dialog aria-label="Publish dialog" class="big-modal"><publish-dialog screen="connect" source="'+a.ConnectDomainSource+'"></publish-dialog></md-dialog>'})},a.prototype.updateWidth=function(b){var c=this.$element.find(a.BrowserWrapperSelector);c.width(Viewer.ViewerDesktopBaseSize*b)},a.prototype.toggleEditModeBrowser=function(b){var c=this.$element.find(a.BrowserWrapperSelector);c.css(this.extraWidthIfDefined()),
b?this.previewScale.setScale(1):(this.previewScale.reset(!0),this.updateWidth(this.previewScale.getScale()))},a}();FakeBrowser.BrowserWrapperSelector=".browser-wrapper",FakeBrowser.InnerWrapperSelector=".inner-wrapper",FakeBrowser.IframeSelector=".viewer",FakeBrowser.ConnectDomainSource="fakebrowser",angular.module("siteGeneratorStaticsConsumerAppInternal").component("fakeBrowser",{templateUrl:"views/preview/fake-browser.html",controller:FakeBrowser});var Overlay=function(){function a(a,b,c,d,e,f,g,h,i){this.$element=a,this.applicationState=b,this.overlayManager=c,this.viewerScrollController=d,this.sitePartTypes=e,this.flags=f,this.$window=g,this.previewScale=h,this.$scope=i}return a.$inject=["$element","applicationState","overlayManager","viewerScrollController","sitePartTypes","flags","$window","previewScale","$scope"],a.prototype.$postLink=function(){var a=this;this.accountForScrollBar(),this.setOverlayViewport(),this.$element.on("mousemove",_.debounce(function(){return a.onMouseMove},150))},a.prototype.onMouseMove=function(a){if(!(this.applicationState&&!this.applicationState.isSteady()||this.applicationState.isAddSectionMode()||this.applicationState.isPreviewDisplay()||this.applicationState.isInMobileEditMode()||this.overlayManager.dropTargetId)){for(var b=this.$element.find(".overlay-viewport").scrollTop(),c=b,d=a.clientY+c,e=!1,f=this.overlayManager.listSpanManager,g=this.overlayManager.listSpanManager.getAll(),h=0;h<g.length;h++){var i=g[h],j=f.getListSpanAbsoluteLayout(i).scale(this.previewScale.getScale());d>=j.top&&d<=j.top+j.height&&(e=!0,this.overlayManager.isListSpanFocused(i)?(this.overlayManager.data.hoveredListSpan=null,this.$scope.$digest()):this.overlayManager.isListSpanHovered(i)||(this.overlayManager.data.hoveredListSpan=i,this.$scope.$digest()))}!e&&this.overlayManager.data.hoveredListSpan&&(this.overlayManager.data.hoveredListSpan=null)}},a.prototype.onMouseLeave=function(){this.overlayManager.data.hoveredListSpan=null},Object.defineProperty(a.prototype,"header",{get:function(){return this.overlayManager.getSitePartByType(this.sitePartTypes.HEADER)},enumerable:!0,configurable:!0}),Object.defineProperty(a.prototype,"body",{get:function(){return this.overlayManager.getSitePartByType(this.sitePartTypes.BODY)},enumerable:!0,configurable:!0}),Object.defineProperty(a.prototype,"footer",{get:function(){return this.overlayManager.getSitePartByType(this.sitePartTypes.FOOTER)},enumerable:!0,configurable:!0}),Object.defineProperty(a.prototype,"appearOnHover",{get:function(){return!!this.getHoveredListSpan()},enumerable:!0,configurable:!0}),a.prototype.isPreviewDisplay=function(){return this.applicationState.isPreviewDisplay()},a.prototype.isInMobileEditMode=function(){return this.applicationState.isInMobileEditMode()},Object.defineProperty(a.prototype,"showFocusedListSpan",{get:function(){return!!this.getFocusedListSpan()},enumerable:!0,configurable:!0}),Object.defineProperty(a.prototype,"showHoveredListSpan",{get:function(){return this.applicationState.isSteady()&&!!this.getHoveredListSpan()},enumerable:!0,configurable:!0}),a.prototype.getFocusedListSpan=function(){return this.overlayManager.data.focusedListSpan},a.prototype.getHoveredListSpan=function(){return this.overlayManager.data.hoveredListSpan},Object.defineProperty(a.prototype,"isFirefox",{get:function(){return"undefined"!=typeof window.InstallTrigger},enumerable:!0,configurable:!0}),Object.defineProperty(a.prototype,"isChrome",{get:function(){return!!this.$window.chrome},enumerable:!0,configurable:!0}),Object.defineProperty(a.prototype,"isWindows",{get:function(){return"Win32"===this.$window.navigator.platform},enumerable:!0,configurable:!0}),a.prototype.setOverlayViewport=function(){var b=this.$element.find(a.ViewportSelector);this.previewCtrl.overlayLoaded(b[0]),this.viewerScrollController.init(b)},a.prototype.accountForScrollBar=function(){var b=this.$element.find(a.SiteSelector);b.css("padding-left",this.getScrollbarWidth())},a.prototype.getScrollbarWidth=function(){if(this.isWindows&&!this.isChrome&&!this.isFirefox)return 0;var a,b,c=document.documentElement,d=0;return a=document.createElement("div"),a.style.cssText="position: absolute;\n                             left: -100px;\n                             width: 50px;\n                             height: 50px;\n                             overflow: scroll;\n                             -ms-overflow-style: scrollbar",b=document.createElement("div"),b.style.cssText="width: 100px; height: 100px",a.appendChild(b),c.appendChild(a),d=a.offsetWidth-a.clientWidth,c.removeChild(a),d},a}();Overlay.ViewportSelector=".overlay-viewport",Overlay.SiteSelector='[data-hook="site-overlay"]',angular.module("siteGeneratorStaticsConsumerAppInternal").component("overlay",{templateUrl:"views/preview/overlay.html",require:{previewCtrl:"^preview"},controller:Overlay,controllerAs:"$overlay"}),angular.module("siteGeneratorStaticsConsumerAppInternal").directive("overlayHighlightStyle",["overlayManager","previewScale",function(a,b){function c(b){switch(b){case"hover":return a.data.hoveredListSpan;case"active":return a.data.focusedListSpan;default:return null}}function d(c,d,e){if(void 0===e&&(e=b.getScale()),e&&d){var f=a.listSpanManager.getListSpanAbsoluteLayout(d).scale(e);c.css({top:f.top,height:f.height})}else c.css({height:0,top:0})}return{restrict:"A",link:function(e,f,g){e.$watch(function(){var b=c(g.overlayHighlightStyle);if(b){var d=a.listSpanManager.getListSpanAbsoluteLayout(b);return d.top+"-"+d.height}},function(){return d(f,c(g.overlayHighlightStyle))}),e.$watch(function(){return b.getScale()},function(a,b){return d(f,c(g.overlayHighlightStyle),a)}),e.$watch(function(){return c(g.overlayHighlightStyle)},function(a){return d(f,a)})}}}]);var Preview=function(){function a(a,b,c,d,e,f,g,h,i,j,k,l,m,n){var o=this;this.flags=b,this.applicationState=c,this.overlayManager=d,this.obMonitoring=e,this.clientTopology=f,this.previewService=g,this.sitePartTypes=h,this.simpleSolutionManager=i,this.storyServices=j,this.presetHelpers=k,this.$state=l,this.$window=m,this.getPanelWidth=function(){return o.applicationState.isInMobileEditMode()&&_.get(o.$state,"current.data.mobilePanelWidth")||_.get(o.$state,"current.data.panelWidth",0)},c.isPreviewDisplay()&&(a.builder.previewSitePageView(),g.setPreviewMode(!0)),n.$watch(function(){return o.overlayManager.data.focusedListSpan},function(a){o.presetPreview=a?o.createDraggedSectionPreview(a):null})}return a.$inject=["consumerBiLogger","flags","applicationState","overlayManager","obMonitoring","clientTopology","previewService","sitePartTypes","simpleSolutionManager","storyServices","presetHelpers","$state","$window","$scope"],a.prototype.viewerLoaded=function(a,b,c){var d=this;this.dsContentWindow=a,this.documentServices=b,this.documentServicesModel=c,this.documentServicesModel.editorSessionId=this.clientTopology.esi,this.previewLoaded(),b.registerToErrorThrown(function(a){a&&"components.arrangement.moveToBack"===a.methodName||d.obMonitoring.error("santa error: "+JSON.stringify(a))})},a.prototype.overlayLoaded=function(a){this.previewOverlay=a,this.previewOverlayContainer=angular.element(a).closest(Overlay.ViewportSelector).get(0),this.previewLoaded()},a.prototype.adiServerOnResize=function(){var a=this.$window.adiRunningOnServer.parameters.width;a===this.dsContentWindow.innerWidth&&(this.documentServices.documentMode.toggleWixAds(),$("builder").addClass("-without-overlay"),this.$window.document.querySelector("iframe.viewer").setAttribute("scrolling","no"),this.$window.adiRunningOnServer.previewSwitchedOn(this.documentServices.site.getHeight()))},a.prototype.previewLoaded=function(){var a=this;this.previewOverlay&&this.dsContentWindow&&(this.$window.adiRunningOnServer&&(this.dsContentWindow.addEventListener("resize",function(){return a.adiServerOnResize()},!1),this.adiServerOnResize()),this.previewService.urlLoaded(this.documentServices,this.documentServicesModel,this.previewOverlay,this.previewOverlayContainer,this.dsContentWindow))},a.prototype.createDraggedSectionPreview=function(a){var b=a.sitePart,c=a.node;if(b!==this.sitePartTypes.BODY||c.isTpaNode())return null;var d=this.simpleSolutionManager.getSectionSolution(this.storyServices.story.selectedPage,c.getId());return this.presetHelpers.createCurrentSectionPreview(c,d)},a}();angular.module("siteGeneratorStaticsConsumerAppInternal").directive("preview",function(){return{restrict:"E",templateUrl:"views/preview/preview.html",replace:!0,controllerAs:"$ctrl",controller:Preview}}),angular.module("siteGeneratorStaticsConsumerAppInternal").directive("spinner",["spinnerService","notification","$timeout","flags",function(a,b,c,d){function e(a){requestAnimationFrame(function(){a.find(".onboarding-preloader-circle1").addClass("animate"),a.find(".onboarding-preloader-circle2").addClass("animate"),a.find(".onboarding-preloader-circle3").addClass("animate")})}function f(a){a.find(".onboarding-preloader-circle1").removeClass("animate"),a.find(".onboarding-preloader-circle2").removeClass("animate"),a.find(".onboarding-preloader-circle3").removeClass("animate")}var g={slow:1400,fast:1400,mode:"slow",getRate:function(){var a=g[g.mode];return d.fullSiteBuilder&&(a*=.9),a},setRate:function(a){return g.mode=a?"fast":"slow"}},h="progress-bar-shown";return{restrict:"E",replace:!0,templateUrl:"views/spinner.html",link:function(d,i){function j(){var a=d.isFirstTime()?m:n;return o=(o+1)%a.length,k=a[o]}var k,l={start:function(){(d.isFirstTime()||d.buildHomePagePhase)&&i.css("background","rgb(255, 255, 255)"),d.message=j(),document.body.classList.add("is-working"),i.show(),d.isSpinning=!0,d.showAnimations()&&e(i)},stop:function(){return d.buildHomePagePhase?void g.setRate(!0):d.showAnimations()?void(d.isFirstTime()?(i.css("opacity",0),c(function(){i.css("opacity",""),i.css("transition",""),i.css("background",""),f(i),i.hide(),d.isSpinning=!1,document.body.classList.remove("is-working")},500)):(f(i),i.hide(),d.isSpinning=!1,document.body.classList.remove("is-working"))):void c(function(){i.hide(),d.isSpinning=!1},100)}};d.message="",d.isSpinning=!1,d.isFirstTime=function(){return a.isFirstTime},d.isFatalError=function(){return a.isFatalError},d.showAnimations=function(){return a.showAnimation},d.getProgressStyle=function(){return d.buildHomePagePhase?{width:360*d.progressInHomePage+"px"}:void 0},d.getMessage=function(){if(!d.isSpinning)return"";var e=b.getSpinnerMessage();return d.visibleMessage&&d.visibleMessage===e?d.message:(d.buildHomePagePhase&&!e&&(d.isSpinning=!1,c(function(){$(i).fadeTo(1e3,0),i.find(".progress-bar-spinner").removeClass(h)},1e3),c(function(){g.setRate(!1),d.buildHomePagePhase=!1,a.setWithAnimation(!0),l.stop()},2e3)),d.visibleMessage=e,!d.buildHomePagePhase&&e&&(d.buildHomePagePhase=!0,c(function(){return i.find(".progress-bar-spinner").addClass(h)})),e?(c(function(){return b.popSpinnerMessage()},g.getRate(),!0),d.message=e.message,d.subtitle=e.currentStep?"STEP "+e.currentStep+" OUT OF "+e.totalSteps:"",d.progressInHomePage=e.currentStep/(e.totalSteps||1)):d.message=k||j(),d.message)};var m=["Loading everything you need","It all starts with your stunning website","Loading everything you need to be stunning"],n=["Wait for it…","I’m on it…","Loading awesomeness","Creating awesome stuff","Loading... the future"],o=_.random(m.length);l.stop(),a.register(l)}}}]);var SolutionOverlay=function(){function a(a,b,c,d,e,f,g,h){var i=this;this.$scope=a,this.previewScale=b,this.$element=c,this.applicationState=d,this.overlayManager=e,this.sitePartTypes=f,this.flags=g,this.$timeout=h,a.$watch(function(){return i.previewScale.getScale()},function(a,b){return i.updateScale(a)}),a.$watch(function(){return i.renderData.adjustedHeight},function(){return i.updateHeight()})}return a.$inject=["$scope","previewScale","$element","applicationState","overlayManager","sitePartTypes","flags","$timeout"],Object.defineProperty(a.prototype,"isInDesktopEditMode",{get:function(){return this.applicationState.isInDesktopEditMode()},enumerable:!0,configurable:!0}),Object.defineProperty(a.prototype,"dropTargetHeight",{get:function(){return this.overlayManager.isCurrentPageEmpty?ListSpanManager.MinBodyHeight:OverlayManager.DropTargetHeight},enumerable:!0,configurable:!0}),Object.defineProperty(a.prototype,"dropTargetWidth",{get:function(){return Viewer.ViewerDesktopBaseSize},enumerable:!0,configurable:!0}),a.prototype.updateHeight=function(a){void 0===a&&(a=this.previewScale.getScale()),this.$element.css({height:this.renderData.adjustedHeight*a})},a.prototype.adjustEmptyPage=function(a){if(this.overlayManager.isCurrentPageEmpty){var b=this.$element.find("empty-page");b.outerWidth(Viewer.ViewerDesktopBaseSize*a)}},a.prototype.updateScale=function(a){this.adjustEmptyPage(a),this.updateHeight(a)},a.prototype.isAddMode=function(){return this.applicationState.isAddSectionMode()},a.prototype.handleSolutionOverlayClick=function(){this.isAddMode()&&this.applicationState.goToBuilder(!1)},a.prototype.handleSolutionOverlayMouseEnter=function(a){this.applicationState.isSteady()&&!this.isAddMode()&&(this.overlayManager.data.hoveredListSpan=this.overlayManager.isListSpanFocused(a)?null:a)},a.prototype.shouldShowDropStrip=function(){return!!this.overlayManager.dropTargetId&&this.isInDesktopEditMode},a.prototype.isBodySitePart=function(){return this.renderData.partType===this.sitePartTypes.BODY},a}();angular.module("siteGeneratorStaticsConsumerAppInternal").component("solutionOverlay",{bindings:{renderData:"<"},templateUrl:"views/preview/solution-overlay.html",controller:SolutionOverlay,controllerAs:"$solutionOverlay"}),angular.module("siteGeneratorStaticsConsumerAppInternal").directive("headerLayoutSolver",["visualValidationContainer",function(a){return{restrict:"A",link:function(b,c){a.initHeaderLayoutSolver(c),c.html("")}}}]);var ProgressBar=function(){function a(a,b){var c=this;this.$rootScope=a,this.$element=b,this.element=this.$element,this.timeInterval=0,this.timer=void 0,this.width=0,this.animationFinished=!1,this.$rootScope.$on("switchEditModeStart",function(a,b){c.startLoadingAnimation(b)}),this.$rootScope.$on("switchEditModeEnd",function(){c.finishLoadingAnimation()})}return a.$inject=["$rootScope","$element"],a.prototype.startLoadingAnimation=function(a){this.timeInterval=a,this.element.children().removeClass("-fade-out"),this.animationFinished=!1,this.width=0,this.element.children().css("width",this.width+"%"),this.element.children().css("display","block"),this.setAnimation(a)},a.prototype.finishLoadingAnimation=function(){clearInterval(this.timer),this.setAnimation(200)},a.prototype.setAnimation=function(a){var b=this;this.timer=setInterval(function(){b.width>=99?(clearInterval(b.timer),b.animationFinished||b.finishAnimation()):(b.width++,b.element.children().css("width",b.width+"%"))},a/(100-this.width))},a.prototype.finishAnimation=function(){this.element.children().addClass("-fade-out"),this.animationFinished=!0},a}();angular.module("siteGeneratorStaticsConsumerAppInternal").component("progressBar",{templateUrl:"views/progress-bar.html",controller:ProgressBar});var TopBar=function(){function a(a,b,c,d,e,f,g,h,i,j,k,l,m,n,o,p,q,r,s,t,u,v,w,x,y,z,A,B,C,D,E,F,G){var H=this;this.clientTopology=a,this.publishService=b,this.applicationState=c,this.tpaDiscovery=d,this.$window=e,this.$state=f,this.$sce=g,this.$scope=h,this.$document=i,this.$mdDialog=j,this.storyServices=k,this.modelTree=l,this.$timeout=m,this.$q=n,this.flags=o,this.menuService=p,this.introManager=q,this.undoRedo=r,this.CcDialogBuilder=s,this.tpaService=t,this.pagesManager=u,this.sectionManager=v,this.$translate=w,this.notification=x,this.metaDataService=y,this.spinnerService=z,this.consumerBiLogger=A,this.CONSUMER_DIALOGS=B,this.staticsUrls=C,this.autoSaveNotifier=D,this.assistantManager=E,this.initService=F,this.mergedHeaderService=G,this.managablePageSelected=!0,this.activeTab="",this.isAppReady=!1,this.whilePublishing=!1,this.afterPublishing=!1,this.showPublishAnimation=!1,this.timeToRetrySave=0,this.showSavingMessage=!1,this.showSavedMessage=!1,this.shouldShowManage=!1,this.lastSaveTime=Date.now(),this.DROPDOWN_STYLE_FOR_ASSISTANT="display: block !important; transform: translateX(-50%) !important; z-index: 10000000 !important;",this.onKeyDown=_.debounce(function(a){if(a.metaKey||a.ctrlKey){var b=String.fromCharCode(a.keyCode);switch(b){case"Z":if(!a.shiftKey){H.undoRedo.undo(!0);break}case"Y":H.undoRedo.redo(!0),a.preventDefault();break;case"V":if(a.shiftKey&&a.altKey){var c=H.storyServices.story.staticsVersion;c&&0!==c.toString().length||(c="local");var d=(H.flags.contentVersionId?H.flags.contentVersionId:H.storyServices.story.contentVersion)||"unspecified",e=H.flags.realSantaVersion;H.notification.show(H.$sce.trustAsHtml(H.$translate("notifications.version-info",{staticsVersion:c,contentVersion:d,santaVersion:e}))),a.preventDefault()}break;case"F":if(a.shiftKey&&a.altKey){var f=_.pick(_.omit(H.flags,_.functions(H.flags)),_.identity),g=_.keys(f);H.$window.console.log(g),H.$window.console.log("Experiments has been saved to 'openExperiments', use 'copy(openExperiments)' to copy them to your clipboard"),H.$window.openExperiments=g;var h="Active flags: "+g.join(", ");H.notification.show(h),a.preventDefault()}}}},500),this.initService.loaded().then(function(){return H.isAppReady=!0}),angular.element(this.$window).keydown(function(a){return H.onKeyDown(a)}),this.watchSave(),this.watchState(),this.activeTab=this.getActiveTab()}return a.$inject=["clientTopology","publishService","applicationState","tpaDiscovery","$window","$state","$sce","$scope","$document","$mdDialog","storyServices","modelTree","$timeout","$q","flags","menuService","introManager","undoRedo","CcDialogBuilder","tpaService","pagesManager","sectionManager","$translate","notification","metaDataService","spinnerService","consumerBiLogger","CONSUMER_DIALOGS","staticsUrls","autoSaveNotifier","assistantManager","initService","mergedHeaderService"],a.prototype.showSingleTpa=function(){return 1===_.size(this.getManageableTPAs())},a.prototype.singleTpa=function(){var a=this.getManageableTPAs();return a[Object.keys(a)[0]]},a.prototype.singleTpaType=function(){var a=this.getManageableTPAs();return Object.keys(a)[0]},a.prototype.showMultiTpa=function(){return _.size(this.getManageableTPAs())>1&&this.getManageableTPAs()},a.prototype.getManageableTPAs=function(){return this.tpaDiscovery.manageableTPAs},a.prototype.getRelevantTPANode=function(a){return this.tpaDiscovery.manageableTPAs[a].naiveNode},a.prototype.watchSave=function(){var a,b=this;this.$scope.$watch("$ctrl.autoSaveNotifier.savingState",function(c){"saving"===c?(b.showSavingMessage=!0,b.showSavedMessage=!1,b.timeToRetrySave=0,a&&b.$timeout.cancel(a)):null===b.autoSaveNotifier.saveRetryTime?(b.timeToRetrySave=0,a=b.$timeout(function(){b.showSavingMessage=!1,b.showSavedMessage=!0,a=b.$timeout(function(){b.showSavedMessage=!1,a=null},1500)},800)):(b.showSavingMessage=!1,b.showSavedMessage=!1)})},a.prototype.watchState=function(){var a=this;this.$scope.$watch(function(){return a.$state.$current&&a.$state.$current.name},function(){a.activeTab=a.getActiveTab()})},a.prototype.debugFeatures=function(){return this.flags.debugMode},a.prototype.startOver=function(){this.introManager.reset(),this.$state.go(config.STATES.INTRO,{reload:!0})},a.prototype.showMergeButton=function(){return!this.mobileMode&&this.flags.mergedHeader&&this.isAppReady&&this.mergedHeaderService.isHeaderMergeable()},a.prototype.mergeButtonText=function(){var a=this.applicationState.getPageNodeInFocus();return this.mergedHeaderService.isHeaderMerged(a)?"builder.unmerge":"builder.merge"},a.prototype.togglePageMerge=function(){var a=this.applicationState.getPageNodeInFocus();this.mergedHeaderService.toggleHeaderMerge(a),this.undoRedo.captureOperation()},a.prototype.isPreviewDisplay=function(){return this.applicationState.isPreviewDisplay()},a.prototype.onCustomizeSelectedKit=function(){return this.applicationState.goToDesignKitMode()},a.prototype.openFonts=function(){this.applicationState.goToFontsPanel(BIOrigins.TopBar)},a.prototype.openNewColorationPanel=function(){this.consumerBiLogger.siteDesign.customizeDesignColorPaletteMode(BIOrigins.TopBar),this.applicationState.goToColorationPanel()},a.prototype.openAnimationPanel=function(){this.consumerBiLogger.siteDesign.openAnimationList(),this.applicationState.goToAnimationPanel(BIOrigins.TopBar)},a.prototype.showSiteDesignDropdown=function(){this.isSiteDesignDropdownVisible=!0},a.prototype.hideSiteDesignDropdown=function(){this.isSiteDesignDropdownVisible=!1},Object.defineProperty(a.prototype,"mobileMode",{get:function(){return this.applicationState.isInMobileEditMode()},enumerable:!0,configurable:!0}),a.prototype.shouldShowDropDownDesign=function(){return this.assistantManager.isInActiveTask()&&this.assistantManager.getCustomTaskData("openSiteDesignTopBarMenu")||this.isSiteDesignDropdownVisible&&!this.assistantManager.isInActiveTask()},a.prototype.shouldShowSwitchEditMode=function(){return this.flags.mobileEditor},a.prototype.shouldShowManageDropDown=function(){return this.shouldShowManage},a.prototype.getManageDropdownStyle=function(){return this.shouldShowManage?{display:"flex"}:{display:"none"}},a.prototype.getSiteDesignDropdownStyle=function(){return this.assistantManager.isInActiveTask()&&this.assistantManager.getCustomTaskData("openSiteDesignTopBarMenu")?this.DROPDOWN_STYLE_FOR_ASSISTANT:this.isSiteDesignDropdownVisible&&!this.assistantManager.isInActiveTask()?"display: flex":"display: none"},a.prototype.onClickDesign=function(){this.consumerBiLogger.siteDesign.designPanelIsLoaded("header"),this.applicationState.goToDesignMode()},a.prototype.isManualSave=function(){return this.applicationState.isSupportStaffEditing()},a.prototype.onManualSave=function(){this.undoRedo.manualSave()},a.prototype.onClickPreview=function(){var a=this;this.consumerBiLogger.builder.topBarPreviewSiteClick("top bar"),this.spinnerService.waitForMe("goToPreview"),this.applicationState.goToPreview(!0).then(function(){a.consumerBiLogger.builder.topBarPreviewSiteSuccess(),a.applicationState.isSupportStaffEditing()&&a.notification.show("toasters.preview-in-manual-save"),a.spinnerService.imDone("goToPreview")})},a.prototype.publishCompleteCB=function(){var a=this;this.metaDataService.getMetadata(this.storyServices.story.id,this.applicationState.setStoryMetadata.bind(this.applicationState),!0),this.whilePublishing=!1,this.showPublishAnimation=!0,this.afterPublishing=!0,this.$timeout(function(){a.showPublishAnimation=!1,a.afterPublishing=!1},1300)},a.prototype.publisher=function(){var a=this;this.whilePublishing=!0,this.publishService.publishConsumerStory().then(function(){a.publishCompleteCB()})},a.prototype.shouldShowPublishDialog=function(){return this.storyServices.story.popupConfigurations[PublishCongrats.PublishCongratsPopupKey]},a.prototype.onClickPublish=function(a){var b=this;this.applicationState.goToBuilder(),this.showPublishAnimation=!1,this.consumerBiLogger.builder.topBarPublishSiteClick(),this.shouldShowPublishDialog()?this.publisher():this.$mdDialog.show({parent:this.$document.body,targetEvent:a,onComplete:function(){angular.element(".md-dialog-container").addClass("tour-modal")},template:'<md-dialog aria-label="Publish dialog" class="big-modal">    <publish-dialog></publish-dialog></md-dialog>',controller:["$scope",function(a){a.publisher=b.publisher.bind(b)}]}).then(function(){b.showPublishAnimation=!0,b.publishCompleteCB()})},a.prototype.getActiveTab=function(){var a="",b=[config.STATES.BUILDER_DESIGN,config.STATES.BUILDER_DESIGN_KITS,config.STATES.BUILDER_DESIGN_KIT,config.STATES.BUILDER_DESIGN_KIT_FONTS_NEW,config.STATES.BUILDER_DESIGN_KIT_COLORATION,config.STATES.BUILDER_DESIGN_KIT_COLORATION_ADVANCED,config.STATES.BUILDER_DESIGN_KIT_ANIMATIONS],c=[config.STATES.BUILDER_ADD_SECTION],d=[config.STATES.BUILDER_ADD_PAGE,config.STATES.BUILDER_SELECTED_PAGE,config.STATES.BUILDER_PAGES,config.STATES.BUILDER_PAGES_SEO],e=[config.STATES.BUILDER_STORY_PREVIEW];return b.indexOf(this.$state.$current.name)>-1?a="design":c.indexOf(this.$state.$current.name)>-1?a="add-section":d.indexOf(this.$state.$current.name)>-1?a="page-tab":e.indexOf(this.$state.$current.name)>-1&&(a="desktop-preview"),a},a.prototype.openMainHelp=function(){this.CcDialogBuilder.showSupportIframe(this.$translate("help.home"),this.CONSUMER_DIALOGS.HOME_HELP),this.consumerBiLogger.builder.topBarHelpClick()},a.prototype.isInDesktopEditMode=function(){return this.applicationState.isInDesktopEditMode()},a.prototype.isShowPagesDropDown=function(){return this.flags.pagesDropDownNewDesign&&this.modelTree.getPagesNodes().length>1},a}();TopBar.ConnectDomainSource="site-connect",angular.module("siteGeneratorStaticsConsumerAppInternal").component("topBar",{templateUrl:"views/top-bar/top-bar.html",controller:TopBar});var PagesPanelDropdown=function(){function a(a,b,c,d,e,f,g,h,i,j){this.menuService=a,this.pagesManager=b,this.consumerBiLogger=c,this.flags=d,this.applicationState=e,this.assistantManager=f,this.$state=g,this.storyServices=h,this.modelTree=i,this.tpaService=j,this.managablePageSelected=!0,this.isPagesDropdownVisible=!1}return a.$inject=["menuService","pagesManager","consumerBiLogger","flags","applicationState","assistantManager","$state","storyServices","modelTree","tpaService"],a.prototype.getSelectedPageName=function(){var a=this.applicationState.getPageInFocus();return this.managablePageSelected=a.managable,a.name},a.prototype.showPagesDropdown=function(){},a.prototype.hidePagesDropdown=function(){},a.prototype.handlePagesDropDownClick=function(a){this.hidePagesDropdown(),this.onClickPages()},a.prototype.onClickPages=function(){var a=this.storyServices.story.selectedPage;a?this.applicationState.goToPage(a):this.applicationState.goToPageManager()},a.prototype.getCssClassesForPageTab=function(){return{active:"page-tab"===this.activeTab}},a.prototype.shouldShowDropDownDesign=function(){return this.assistantManager.isInActiveTask()&&this.assistantManager.getCustomTaskData("openPagesTopBarMenu")||this.isPagesDropdownVisible},a.prototype.getPagesDropdownStyle=function(){return this.assistantManager.isInActiveTask()&&this.assistantManager.getCustomTaskData("openPagesTopBarMenu")?{display:"block"}:this.isPagesDropdownVisible?{display:"flex"}:{display:"none"}},a.prototype.goToPage=function(a,b){var c=this,d=this,e=d.$state,f=d.applicationState,g=d.storyServices,h=d.modelTree,i=d.tpaService,j=d.consumerBiLogger,k=d.pagesManager;if(g.story.selectedPage!==a.id){var l=h.getNodeById(a.id),m=i.getAppIdByPageNode(l);j.pagesManager.clickOnPage(a.name,m,"second topbar"),f.goToBuilder(),k.goToPage(a.id).then(function(){c.setSelectedPage.bind(c)(a.id),e.current.name===config.STATES.BUILDER_PAGES_SEO&&e.go("^"),c.consumerBiLogger.pagesManager.gotoPageSuccess(a.name,m,"second topbar")})}},a.prototype.setSelectedPage=function(a){this.applicationState.clearContentFocus(),this.storyServices.story.selectedPage=a,this.storyServices.emitChangingPage()},a.prototype.shouldShowHomeIcon=function(){return this.flags.mergedHeader&&this.isPageHome()},a.prototype.isPageHome=function(a){void 0===a&&(a=this.applicationState.getPageNodeInFocus());var b=a&&this.modelTree.isHomePage(a);return b},a}();angular.module("siteGeneratorStaticsConsumerAppInternal").component("pagesPanelDropdown",{templateUrl:"views/top-bar/pages-panel-dropdown/pages-panel-dropdown.html",controller:PagesPanelDropdown,bindings:{activeTab:"<"}});var PagesDropdownNewDesign=function(){function a(a,b,c,d,e,f,g,h,i,j,k,l,m,n,o,p,q){this.menuService=a,this.pagesManager=b,this.consumerBiLogger=c,this.flags=d,this.applicationState=e,this.layoutSolver=f,this.assistantManager=g,this.$state=h,this.$scope=i,this.$timeout=j,this.$q=k,this.storyServices=l,this.consumerBiLoggerHelpers=m,this.mobileSolutionManager=n,this.modelTree=o,this.$element=p,this.tpaService=q,this.managablePageSelected=!0,this.DROPDOWN_STYLE_FOR_ASSISTANT="display: block !important; transform: translateX(-50%) !important; z-index: 10000000 !important;",this.clickedPage="",this.ready=!1,this.isPagesDropdownVisible=!1,this.pagesDropDownVisibilityStartTime=null,this.pagesDropDownVisibilityEndTime=null}return a.$inject=["menuService","pagesManager","consumerBiLogger","flags","applicationState","layoutSolver","assistantManager","$state","$scope","$timeout","$q","storyServices","consumerBiLoggerHelpers","mobileSolutionManager","modelTree","$element","tpaService"],a.prototype.scrollInsideContainer=function(a,b,c){a.animate({scrollTop:b},c)},a.prototype.scrollToSelectedPage=function(){var a=this;this.$timeout(function(){var b=a.$element.find(".pages-dropdown-list"),c=a.$element.find(".-selected-in-pages-dropdown"),d=b[0].clientHeight,e=c[0].offsetTop+c[0].clientHeight;if(e>d){var f=d/2,g=Math.floor(e/f),h=Math.max(0,f*g);a.scrollInsideContainer(b,h,0)}})},a.prototype.getDropdownAdditionalStyleBasedOnDevice=function(){return this.isInMobileEditMode()?"mobile-dropdown-style":"desktop-dropdown-style"},a.prototype.getSubMenuAdditionalStyleBasedOnDevice=function(){return this.isInMobileEditMode()?"mobile-sub-menu-style":"desktop-sub-menu-style"},Object.defineProperty(a.prototype,"isPanelOpen",{get:function(){return this.pagesDropDownVisibilityStartTime&&this.pagesDropDownVisibilityEndTime?this.pagesDropDownVisibilityStartTime>this.pagesDropDownVisibilityEndTime:!1},enumerable:!0,configurable:!0}),Object.defineProperty(a.prototype,"timePanelIsOpen",{get:function(){return!this.pagesDropDownVisibilityStartTime||this.pagesDropDownVisibilityEndTime>this.pagesDropDownVisibilityStartTime?0:(Date.now()-this.pagesDropDownVisibilityStartTime)/1e3},enumerable:!0,configurable:!0}),a.prototype.showPagesDropdownNewDesign=function(){var a=this;if(this.applicationState.isSelectedPageMode())this.pagesDropDownVisibilityEndTime=Date.now(),this.isPagesDropdownVisible=!1;else{this.enablePagesDropdownVisibility(),this.pagesDropDownVisibilityStartTime=Date.now();var b=1;setTimeout(function(){a.isPagesDropdownVisible&&a.timePanelIsOpen>b&&a.consumerBiLogger.pagesManager.pagesDropdownListOpenOnHover()},1e3*b)}},a.prototype.enablePagesDropdownVisibility=function(){this.isPagesDropdownVisible=!0,this.scrollToSelectedPage()},a.prototype.hidePagesDropdownNewDesign=function(){this.clickedPage="",this.pagesDropDownVisibilityEndTime=Date.now(),this.isPagesDropdownVisible=!1},a.prototype.getSelectedPageName=function(){var a=this.applicationState.getPageInFocus();return this.managablePageSelected=a.managable,a.name},a.prototype.isInMobileEditMode=function(){return this.applicationState.isInMobileEditMode()},a.prototype.handlePagesDropDownClick=function(a){"UL"!==a.target.tagName&&(this.hidePagesDropdownNewDesign(),this.onClickPages())},a.prototype.isMarkAsSelected=function(a){return this.clickedPage?a===this.clickedPage:this.pagesManager.isSelectedPage(a)},a.prototype.onClickPages=function(a){this.consumerBiLoggerHelpers.setPanelSource(a);var b=this.storyServices.story.selectedPage;b?this.applicationState.goToPage(b):this.applicationState.goToPageManager()},a.prototype.getCssClassesForPageTab=function(){return{active:"page-tab"===this.activeTab}},a.prototype.shouldShowDropDownDesign=function(){return this.isPagesDropdownVisible&&!this.assistantManager.isInActiveTask()},a.prototype.getPagesDropdownStyle=function(){return this.shouldShowDropDownDesign()?{display:"flex"}:{display:"none"}},a.prototype.goToPage=function(a,b){var c=this;b.stopPropagation();var d=this,e=d.$state,f=d.applicationState,g=(d.storyServices,d.modelTree),h=d.tpaService,i=d.consumerBiLogger,j=d.pagesManager;if(!this.pagesManager.isSelectedPage(a.id)){var k=g.getNodeById(a.id),l=h.getAppIdByPageNode(k);this.$q.when().then(function(){return c.clickedPage=a.id,c.$timeout(function(){c.hidePagesDropdownNewDesign()},250),i.pagesManager.clickOnPage(a.name,l,"site pages list"),c.applicationState.isInMobileEditMode()||f.goToBuilder(),j.goToPage(a.id)}).then(function(){return c.applicationState.isInMobileEditMode()?(c.applicationState.clearContentFocus(),
c.applicationState.goToMobilePage(a.id)):void c.setSelectedPage(a.id)}).then(function(){c.storyServices.emitChangingPage(),e.current.name===config.STATES.BUILDER_PAGES_SEO&&e.go("^"),c.consumerBiLogger.pagesManager.gotoPageSuccess(a.name,l,"site pages list")})["catch"](function(a){return console.log(a.stack)})}},a.prototype.setSelectedPage=function(a){this.applicationState.clearContentFocus(),this.storyServices.story.selectedPage=a},a.prototype.getSiteDesignDropdownStyle=function(){return this.assistantManager.isInActiveTask()&&this.assistantManager.getCustomTaskData("openSiteDesignTopBarMenu")?this.DROPDOWN_STYLE_FOR_ASSISTANT:this.isPagesDropdownVisible&&!this.assistantManager.isInActiveTask()?"display: flex":"display: none"},a}();angular.module("siteGeneratorStaticsConsumerAppInternal").component("pagesDropdownNewDesign",{templateUrl:"views/top-bar/pages-panel-dropdown/pages-dropdown-new-design.html",controller:PagesDropdownNewDesign,bindings:{activeTab:"<"}});var AddTabDropdown=function(){function a(a,b,c,d,e){var f=this;this.assistantManager=a,this.consumerBiLogger=b,this.applicationState=c,this.tpaService=d,this.initService=e,this.isAppReady=!1,this.isAddSectionDropdownVisible=!1,this.DROPDOWN_STYLE_FOR_ASSISTANT="display: block !important; transform: translateX(-50%) !important; z-index: 10000000 !important;",this.getCssClassesForAddSectionTab=function(){return{active:"add-section"===f.activeTab,"disabled-button":f.isCurrentPageSinglePostBlog()}},this.initService.loaded().then(function(){return f.isAppReady=!0})}return a.$inject=["assistantManager","consumerBiLogger","applicationState","tpaService","initService"],a.prototype.showAddSectionDropdown=function(){this.isAddSectionDropdownVisible=!0},a.prototype.hideAddSectionDropdown=function(){this.isAddSectionDropdownVisible=!1},a.prototype.shouldShowDropDownDesign=function(){return this.assistantManager.isInActiveTask()&&this.assistantManager.getCustomTaskData("openAddTopBarMenu")||this.isAddSectionDropdownVisible&&!this.assistantManager.isInActiveTask()},a.prototype.getAddSectionDropdownStyle=function(){return this.assistantManager.isInActiveTask()&&this.assistantManager.getCustomTaskData("openAddTopBarMenu")?this.DROPDOWN_STYLE_FOR_ASSISTANT:this.isAddSectionDropdownVisible&&!this.assistantManager.isInActiveTask()?"display: flex":"display: none"},a.prototype.isCurrentPageSinglePostBlog=function(){return this.isAppReady&&this.tpaService.isCurrentPageIsBlogSinglePost()},a.prototype.onClickAddSection=function(){this.isCurrentPageSinglePostBlog()||(this.consumerBiLogger.sectionManagement.addSectionClick("second topbar"),this.applicationState.goToAddSectionMode())},a.prototype.onClickAddPage=function(){this.consumerBiLogger.pagesManager.addPageClick("second topbar"),this.applicationState.goToAddPageMode()},a}();angular.module("siteGeneratorStaticsConsumerAppInternal").component("addTabDropdown",{templateUrl:"views/top-bar/add-tab-dropdown/add-tab-dropdown.html",controller:AddTabDropdown,bindings:{activeTab:"<"}});var SiteDesignDropdown=function(){function a(a,b,c,d,e){this.assistantManager=a,this.consumerBiLogger=b,this.applicationState=c,this.flags=d,this.initService=e,this.isAppReady=!1,this.isAddSectionDropdownVisible=!1,this.DROPDOWN_STYLE_FOR_ASSISTANT="display: block !important; transform: translateX(-50%) !important; z-index: 10000000 !important;"}return a.$inject=["assistantManager","consumerBiLogger","applicationState","flags","initService"],a.prototype.onClickDesign=function(){this.consumerBiLogger.siteDesign.designPanelIsLoaded("header"),this.applicationState.goToDesignMode()},a.prototype.openNewColorationPanel=function(){this.consumerBiLogger.siteDesign.customizeDesignColorPaletteMode(BIOrigins.TopBar),this.applicationState.goToColorationPanel()},a.prototype.openFonts=function(){this.applicationState.goToFontsPanel(BIOrigins.TopBar)},a.prototype.openAnimationPanel=function(){this.consumerBiLogger.siteDesign.openAnimationList(),this.applicationState.goToAnimationPanel(BIOrigins.TopBar)},a.prototype.getSiteDesignDropdownStyle=function(){return this.assistantManager.isInActiveTask()&&this.assistantManager.getCustomTaskData("openSiteDesignTopBarMenu")?this.DROPDOWN_STYLE_FOR_ASSISTANT:this.assistantManager.isInActiveTask()?"display: none":"display: flex"},a}();angular.module("siteGeneratorStaticsConsumerAppInternal").component("siteDesignDropdown",{templateUrl:"views/top-bar/site-design-dropdown/site-design-dropdown.html",controller:SiteDesignDropdown,bindings:{activeTab:"<"}});var __extends=this&&this.__extends||function(){var a=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(a,b){a.__proto__=b}||function(a,b){for(var c in b)b.hasOwnProperty(c)&&(a[c]=b[c])};return function(b,c){function d(){this.constructor=b}a(b,c),b.prototype=null===c?Object.create(c):(d.prototype=c.prototype,new d)}}(),SiteDropdown=function(a){function b(b,c,d,e,f,g,h,i,j,k,l,m,n,o,p,q,r,s,t,u,v,w){var x=a.call(this)||this;return x.clientTopology=b,x.menuService=c,x.pagesManager=d,x.consumerBiLogger=e,x.flags=f,x.applicationState=g,x.assistantManager=h,x.$state=i,x.storyServices=j,x.modelTree=k,x.$document=l,x.CcDialogBuilder=m,x.tpaService=n,x.CONSUMER_DIALOGS=o,x.$mdDialog=p,x.consumerDialogs=q,x.$window=r,x.staticsUrls=s,x.$translate=t,x.publishService=u,x.initService=v,x.$timeout=w,x.siteInitialized=!1,x.initService.loaded().then(function(){x.siteInitialized=!0}),x}return __extends(b,a),b.$inject=["clientTopology","menuService","pagesManager","consumerBiLogger","flags","applicationState","assistantManager","$state","storyServices","modelTree","$document","CcDialogBuilder","tpaService","CONSUMER_DIALOGS","$mdDialog","consumerDialogs","$window","staticsUrls","$translate","publishService","initService","$timeout"],b.prototype.isSitePublished=function(){return this.siteInitialized?this.publishService.isSitePublished():!1},b.prototype.getMetadata=function(){return this.applicationState.getStoryMetadata()},Object.defineProperty(b.prototype,"showBusinessInfo",{get:function(){return!1},enumerable:!0,configurable:!0}),b.prototype.onClickMyBusinessInfo=function(a){this.consumerBiLogger.builder.topBarEditBusinessInfoClick(),this.CcDialogBuilder.show({parent:this.$document.body,targetEvent:a,biDialogName:CONSUMER_DIALOGS.BUSINESS_DETAILS,template:'<md-dialog aria-label="Business details" class="big-modal"><business-info-modal></business-info-modal></md-dialog>'})},b.prototype.isManualSave=function(){return this.applicationState.isSupportStaffEditing()},b.prototype.onClickConnectDomain=function(a){this.consumerBiLogger.builder.topBarConnectDomainClick(),this.$mdDialog.show({parent:this.$document.body,targetEvent:a,template:'<md-dialog aria-label="Publish dialog" class="big-modal">\n                   <publish-dialog screen="connect" source="'+TopBar.ConnectDomainSource+'"></publish-dialog>\n                 </md-dialog>'})},b.prototype.onClickMyDashboard=function(){this.consumerBiLogger.builder.topBarGoToMyDashboard(),this.openExternalLink("dashboardUri")},b.prototype.onClickSiteSettings=function(){this.consumerBiLogger.builder.topBarGoToSiteSettings(),this.openExternalLink("siteSettingsUri")},b.prototype.onClickEditor=function(){this.consumerBiLogger.builder.topBarGoToEditorClick(),this.goToEditor(void 0)},b.prototype.onClickStartNewSite=function(){this.consumerBiLogger.builder.topBarCreateNewSite();var a="https://www.wix.com/new/vertical?ref=ADI";this.$window.open(a,"_blank")},b.prototype.onClickViewLiveSite=function(){this.consumerBiLogger.builder.topBarViewSiteClick(),this.openExternalLink("publicUri")},b.prototype.onClickFeedback=function(){this.consumerBiLogger.builder.topBarGiveFeedbackClick(),this.$window.open(this.$translate("help.give-feedback"),"_blank")},b.prototype.onClickSEOWiz=function(){this.consumerBiLogger.builder.topBarSeoPanelGetFoundOnGoogleClick("topbar"),this.$window.open(this.staticsUrls.getSeoWizUrl("ADI_MENU"),"_blank")},b.prototype.openExternalLink=function(a){var b=this.getStoryMetadataByKey(a);b&&this.$window.open(b,"_blank")},b.prototype.getStoryMetadataByKey=function(a){var b=this.getMetadata();return b&&b[a]},b.prototype.goToEditor=function(a){var b=this;this.CcDialogBuilder.show({parent:this.$document.body,targetEvent:a,biDialogName:this.CONSUMER_DIALOGS.GOTO_EDITOR,template:'<md-dialog aria-label="Publish dialog" class="big-modal">    <goto-editor-dialog on-go-to-editor="goToEditor()"></goto-editor-dialog></md-dialog>',controller:["$scope",function(a){function c(){b.openInternalLink("htmlEditorUri")}a.goToEditor=c}]})},b.prototype.openInternalLink=function(a){var b=this.getStoryMetadataByKey(a);if(b){var c=URI(b);c.addQuery("editorSessionId",this.clientTopology.esi),c.addQuery("onboarding","true"),this.$window.location.href=c}},b.prototype.showDropDown=function(){return this.handleOpened(),a.prototype.showDropDown.call(this)},b.prototype.hideDropDown=function(){return this.handleClosed(),a.prototype.hideDropDown.call(this)},b.prototype.handleOpened=function(){var a=this;this.reportBiMenuOpenedPromise=this.$timeout(function(){a.reportBiMenuOpenedPromise=null,a.consumerBiLogger.builder.topBarSiteMenuDialogOpen()},2e3)},b.prototype.handleClosed=function(){this.reportBiMenuOpenedPromise&&this.$timeout.cancel(this.reportBiMenuOpenedPromise)},b}(BaseDropDown);angular.module("siteGeneratorStaticsConsumerAppInternal").component("siteDropdown",{templateUrl:"views/top-bar/site-dropdown/site-dropdown.html",controller:SiteDropdown});var __extends=this&&this.__extends||function(){var a=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(a,b){a.__proto__=b}||function(a,b){for(var c in b)b.hasOwnProperty(c)&&(a[c]=b[c])};return function(b,c){function d(){this.constructor=b}a(b,c),b.prototype=null===c?Object.create(c):(d.prototype=c.prototype,new d)}}(),UpgradeTabPopup=function(a){function b(b){var c=a.call(this)||this;return c.saleService=b,c}return __extends(b,a),b.$inject=["saleService"],b}(BaseDropDown);angular.module("siteGeneratorStaticsConsumerAppInternal").component("upgradeTabPopup",{templateUrl:"views/top-bar/upgrade-tab-popup/upgrade-tab-popup.html",controller:UpgradeTabPopup,bindings:{metaSiteId:"<"}}),angular.module("siteGeneratorStaticsConsumerAppInternal").component("upgradePopupDefault",{templateUrl:"views/top-bar/upgrade-tab-popup/upgrade-popup-default.html",bindings:{metaSiteId:"="}}),angular.module("siteGeneratorStaticsConsumerAppInternal").component("upgradePopupSeasonalCampaign",{templateUrl:"views/top-bar/upgrade-tab-popup/upgrade-popup-seasonal-campaign.html",bindings:{metaSiteId:"="}});var __extends=this&&this.__extends||function(){var a=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(a,b){a.__proto__=b}||function(a,b){for(var c in b)b.hasOwnProperty(c)&&(a[c]=b[c])};return function(b,c){function d(){this.constructor=b}a(b,c),b.prototype=null===c?Object.create(c):(d.prototype=c.prototype,new d)}}(),SwitchEditModeDropdown=function(a){function b(b,c,d,e,f,g,h,i,j){var k=a.call(this)||this;return k.applicationState=b,k.storyServices=c,k.consumerDialogs=d,k.flags=e,k.$log=f,k.consumerBiLogger=g,k.consumerBiLoggerHelpers=h,k.previewService=i,k.$q=j,k}return __extends(b,a),b.$inject=["applicationState","storyServices","consumerDialogs","flags","$log","consumerBiLogger","consumerBiLoggerHelpers","previewService","$q"],b.prototype.currentEditMode=function(){return this.applicationState.isInMobileEditMode()?"mobile":"desktop"},b.prototype.iconType=function(){return"cc-icon-switch-to-"+this.currentEditMode()},b.prototype.switchToDesktopEditMode=function(){this.switchEditorWithLogging("desktop")},b.prototype.switchToMobileEditMode=function(){var a=this,b="first-time-in-mobile-editor";this.flags.debug||this.storyServices.story.popupConfigurations[b]?this.switchEditorWithLogging("mobile"):this.consumerDialogs.showDialog(this.selectConsumerDialogType()).then(function(){a.storyServices.story.popupConfigurations[b]=!0,a.switchEditorWithLogging("mobile")})},b.prototype.switchEditorWithLogging=function(a){var b=this;this.prepareBiLogger(a),this.$q.when().then(function(){return"mobile"===a?b.applicationState.goToMobilePage(b.storyServices.story.selectedPage):b.applicationState.disableMobileEditor()}).then(function(){b.sendBiAfterLoadFinished()})["catch"](function(a){b.$log.error(a)})},b.prototype.sendBiAfterLoadFinished=function(){var a=this.consumerBiLoggerHelpers.popPanelSource();a&&this.consumerBiLogger.builder.switchBuilderTypeMobileDesktopSuccess(a,this.applicationState.isInMobileEditMode()?"desktop":"mobile")},b.prototype.prepareBiLogger=function(a){var b=this.currentEditMode();b!==a&&(this.consumerBiLoggerHelpers.setPanelSource("top bar"),this.consumerBiLogger.builder.switchBuilderTypeMobileDesktopClick("top bar",b),this.consumerBiLoggerHelpers.resetLoadTime())},b.prototype.selectConsumerDialogType=function(){return this.previewService.isSitePublished()?ConsumerDialogTypes.EXISTING_USER_FIRST_TIME_MOBILE_EDITOR_POPUP:ConsumerDialogTypes.NEW_USER_FIRST_TIME_MOBILE_EDITOR_POPUP},b}(BaseDropDown);angular.module("siteGeneratorStaticsConsumerAppInternal").component("switchEditModeDropdown",{templateUrl:"views/top-bar/switch-edit-mode-dropdown/switch-edit-mode-dropdown.html",controller:SwitchEditModeDropdown}),angular.module("siteGeneratorStaticsConsumerAppInternal").directive("stateClass",["$state",function(a){return{restrict:"A",link:function(b,c,d){function e(a){return a&&a.data&&a.data[f]}var f=d.stateClass||"stateClass";c.addClass(e(a.current)),b.$on("$stateChangeSuccess",function(a,b,d,f){c.removeClass(e(f)),c.addClass(e(b))})}}}]),angular.module("siteGeneratorStaticsConsumerAppInternal").directive("storyContainer",function(){return{replace:!0,template:"<div ui-view></div>"}});var PublishService=function(){function a(a,b,c,d,e,f,g,h,i){this.previewService=a,this.consumerDialogs=b,this.wizardService=c,this.$http=d,this.$q=e,this.siteNameApi=f,this.consumerBiLogger=g,this.storyServices=h,this.documentServicesMediator=i,this.nextCongratsScreenIndex=0}return a.$inject=["previewService","consumerDialogs","wizardService","$http","$q","siteNameApi","consumerBiLogger","storyServices","documentServicesMediator"],a.prototype.getCongratsState=function(){var b=0;return this.isPremium()?b=this.isDomainConnected()?a.PromoteScreenIndex:a.NoPremiumScreenIndex:(b=this.nextCongratsScreenIndex,this.changeToNextCongratsScreen()),a.CongratsScreens[b]},a.prototype.getSiteDomainInfo=function(){var b=this,c=this.previewService.getMetaSiteId();return this.$http({method:"POST",url:a.PremiumStateApiUrl+c}).then(function(a){return{isDomainConnected:b.isDomainConnectedInXMLResponse(a.data),sitePublishedDomain:b.getPublishedSiteDomain(a.data),isSitePremium:b.isSitePremiumInXMLResponse(a.data)}})},a.prototype.changeToNextCongratsScreen=function(){this.nextCongratsScreenIndex=1-this.nextCongratsScreenIndex},a.prototype.changeSiteNameIfNeededAndValid=function(a){var b=this,c=this.getSiteName();if(c!==a){var d=this.previewService.getMetaSiteId();return this.siteNameApi.rename(d,a).then(function(){if(b.previewService.setSiteName(a),a=b.getSiteName(),!b.isDomainConnected()){var d=b.getPublicUrl().slice(0,-c.length);b.previewService.setPublicUrl(d+a)}return a})}return this.$q.resolve(c)},a.prototype.publishConsumerStory=function(){var a=this;return this.wizardService.publishConsumerStory()["catch"](function(b){var c=b;b.stack?c=b.stack:b.document&&b.document.errorType&&(c=b.document.errorType),a.consumerBiLogger.fatal(BIErrorCodes.DSPublishStoryFailed,"Error publishing story "+c);var d=a.documentServicesMediator.getDsSaveErros();return _.get(b,["document","errorType"])===d.SAVE_PUBLISH_DISABLED_ON_SERVER?(delete a.storyServices.waitsForSave,a.consumerDialogs.showDialog(ConsumerDialogTypes.DS_SAVE_PUBLISH_DISABLED_ON_SERVER_POPUP)):409===b.status||"CONCURRENT_SAVE_ERROR"===_.get(b,["document","errorType"])?a.consumerDialogs.showDialog(ConsumerDialogTypes.STORY_CONFLICTING_CHANGES_POPUP):a.consumerDialogs.showDialog(ConsumerDialogTypes.PUBLISH_FAILED_POPUP).then(function(){return a.publishConsumerStory()})})},a.prototype.getPublicUrl=function(){return this.previewService.getPublicUrl()},a.prototype.getUsername=function(){return this.previewService.getUsername()},a.prototype.getSiteName=function(){return this.previewService.getSiteName()},a.prototype.validateSiteName=function(a){return this.previewService.validateSiteName(a)},a.prototype.isSitePublished=function(){return this.previewService.isSitePublished()},a.prototype.isDomainConnected=function(){return this.previewService.isDomainConnected()},a.prototype.isPremium=function(){return this.previewService.isPremium()},Object.defineProperty(a.prototype,"freeDomain",{get:function(){return this.previewService.getFreeDomain()},enumerable:!0,configurable:!0}),a.prototype.isDomainConnectedInXMLResponse=function(b){var c=angular.element(b).find("domainName");if(_.isEmpty(c))return!1;var d=angular.element(b).find("checkStatus").text();return _.parseInt(d)===a.DomainConnectedSuccessCode},a.prototype.getPublishedSiteDomain=function(b){var c=angular.element(b).find("domainName").text();return _.isEmpty(c)||_.includes(c,a.UrlPrefix)||(c=a.UrlPrefix+c),_.isEmpty(c)?null:c},a.prototype.isSitePremiumInXMLResponse=function(a){return!_.isEmpty(angular.element(a).find("cycle"))},a}();PublishService.NoPremiumScreenIndex=0,PublishService.PromoteScreenIndex=2,PublishService.CongratsScreens=["one-action","three-actions-social","three-actions-promote"],PublishService.DomainConnectedSuccessCode=0,PublishService.UrlPrefix="http://",PublishService.PremiumStateApiUrl="//www.wix.com/_api/wix/getDocPremiumState2?siteGuid=",angular.module("siteGeneratorStaticsConsumerAppInternal").service("publishService",PublishService);var PubSub;!function(a){a.events={SWITCH_MODE:"SWITCH_MODE",CONTENT_UPDATED:"CONTENT_UPDATED",LIST_ITEMS_UPDATED:"LIST_ITEMS_UPDATED",NEW_STATE_STORY_WAS_SET:"NEW_STATE_STORY_WAS_SET",BLINK_FIELD:"BLINK_FIELD"};var b=function(){function a(){this.listeners={}}return a.prototype.fire=function(a,b){this.listeners[a]&&this.listeners[a].forEach(function(a){return a(b)})},a.prototype.subscribe=function(a,b){var c=this;return this.listeners[a]||(this.listeners[a]=[]),this.listeners[a].push(b),function(){var d=c.listeners[a].indexOf(b);-1!==d&&c.listeners[a].splice(d,1)}},a}();a.PubSubService=b,angular.module("siteGeneratorStaticsConsumerAppInternal").service("pubSub",b)}(PubSub||(PubSub={}));var EmptyPage=function(){function a(a,b,c,d,e){this.sectionManager=a,this.overlayManager=b,this.applicationState=c,this.storyServices=d,this.flags=e}return a.$inject=["sectionManager","overlayManager","applicationState","storyServices","flags"],a.prototype.isOnAddState=function(){return this.applicationState.isOnAddState()},a.prototype.onDrop=function(){var a=this,b=this.overlayManager.data.draggedPresetPreview;this.sectionManager.handlePreviewSelected(b,!1).then(function(){return a.applicationState.goToBuilder()})},a.prototype.onAdd=function(){this.overlayManager.setDropTarget(DropTargetCalculator.FirstDropTargetId),this.applicationState.goToAddSectionMode()},a}();angular.module("siteGeneratorStaticsConsumerAppInternal").component("emptyPage",{templateUrl:"views/preview/empty-page.html",controller:EmptyPage});var MobilePreview=function(){function a(a){this.$element=a}return a.$inject=["$element"],a.prototype.getPreviewUrl=function(){return this.previewUrl||"aaa"},a.prototype.$postLink=function(){var a=this,b=this.$element.find("iframe")[0];b.onload=function(){var c=b.contentWindow,d=c.setInterval(function(){try{c.documentServices.pages.navigateTo(a.page),c.documentServices.tpa.change.editMode("preview"),c.documentServices.documentMode.setComponentViewMode("preview"),c.clearInterval(d)}catch(b){_.noop(b)}},10)}},a}();angular.module("siteGeneratorStaticsConsumerAppInternal").component("mobilePreview",{templateUrl:"views/preview/mobile-preview.html",controller:MobilePreview,bindings:{previewUrl:"@",page:"@"}});var __assign=this&&this.__assign||Object.assign||function(a){for(var b,c=1,d=arguments.length;d>c;c++){b=arguments[c];for(var e in b)Object.prototype.hasOwnProperty.call(b,e)&&(a[e]=b[e])}return a},PresetHelpers=function(){function a(a,b,c,d,e,f,g,h,i,j,k,l,m,n,o,p,q,r,s,t,u,v,w,x,y,z,A,B,C,D){var E=this;if(this.defaultsService=a,this.layoutSolver=b,this.simpleSolutionManager=c,this.mobileSolutionManager=d,this.$q=e,this.modelTree=f,this.layoutPresetHelperService=g,this.MediaPreferences=h,this.storyServices=i,this.applicationState=j,this.flags=k,this.$window=l,this.FeatureList=m,this.PageFeatureList=n,this.prettyAlgoRules=o,this.$injector=p,this.clusters=q,this.LayoutUtils=r,this.overlayManager=s,this.prettyAlgoRuleEngine=t,this.sectionBackgroundService=u,this.PresetMediaType=v,this.mediaOverride=w,this.patternService=x,this.solutionManager=y,this.sitePartTypes=z,this.designKit=A,this.layoutSelectionStoreProvider=B,this.presetPreviewFlagUtils=C,this.Solution=D,this.pattern_ratio=4,this.flags.debug&&this.flags.prettyAlgo){var F=this.$injector.get("prettyAlgoDX");F.init().then(function(){return F.getRulesFromDB()}).then(function(a){E.prettyAlgoRules=a,console.log("loaded rules from firebase",a)})}}return a.$inject=["defaultsService","layoutSolver","simpleSolutionManager","mobileSolutionManager","$q","modelTree","layoutPresetHelperService","MediaPreferences","storyServices","applicationState","flags","$window","FeatureList","PageFeatureList","prettyAlgoRules","$injector","clusters","LayoutUtils","overlayManager","prettyAlgoRuleEngine","sectionBackgroundService","PresetMediaType","mediaOverride","patternService","solutionManager","sitePartTypes","designKit","layoutSelectionStoreProvider","presetPreviewFlagUtils","Solution"],a.prototype.isHomePage=function(){return this.storyServices.story.selectedPage===this.modelTree.homePageId},a.prototype.getPresetGroups=function(a,b,c){var d=[b.data.groups[0]];if(c)switch(a.contentElementType){case"ListHeader":d=[b.data.groups[0]];break;case"ListFooter":return void(d=[]);default:d=_.filter(b.data.groups,function(a){return!a.isHeader&&!a.isFooter})}return _.any(d&&d[0].columns,function(a){return"image"===a.backgroundMode})?[]:d},a.prototype.changePreset=function(a,b,c,d){b.preset=_.cloneDeep(b.preset);var e=this.getPresetGroups(a,b.preset,d);this.mediaOverride.changeC2CtoFullWidth(b.preset.data,e),_.each(e,function(a){_.each(a.layouts,function(a){var b=_.get(a.selections,["overrides","strips"]);_.each(b,function(a){_.each(a,function(a){a.strip&&(a.strip.paddingTop=40,a.strip.paddingBottom=40)})})})}),a.argsMatchingPolicy[c]=!1,b.convertedPreset=!0},a.prototype.convertAllOnMediaCoast2CoastPreset=function(a,b,c,d){void 0===d&&(d=!1);var e=this.getMediaFieldName(a),f=_.get(this.getPresetGroups(a,b.preset,c),[0,"layouts",0]);if(!f)return!0;if(1===f.cluster&&f.mediaType===this.PresetMediaType.COAST2COAST)return this.changePreset(a,b,e,c),!0;var g=_.any(a.argsMatchingPolicy);if(!g)return!0;var h=this.LayoutUtils.transformStructureToStringArray(f,f.structure),i=this.LayoutUtils.transformStructureToStringArray(f,f.onMediaStructure),j=f.argsSignature.split("#"),k=a.contentElement.calculateUnwantedArgs(),l=j.filter(function(a){return k.find(function(b){return b===a})}),m=this.clusters.calculateFallBackClusterAndStructure(h,i,l);if(1===m.cluster&&f.mediaType===this.PresetMediaType.COAST2COAST){if(d){var n=_.intersection(_.flatten(h),l);if(n.length>0){var o=_.find(_.keys(a.contentElement.values),function(b){return a.contentElement.values[b].signature===n[0]});o&&(a.argsMatchingPolicy[o]=!0)}}return!1}return!0},a.prototype.fillArgsMatchingPolicy=function(a,b,c,d,e){var f=this.getOptimalFieldMasksArray(b.preset,a,d);f.length<=c&&(c=f.length-1);var g=f[c];a.contentElement.calculateWantedArgs(),_.each(a.contentElement.values,function(b,c){a.argsMatchingPolicy[c]=g.indexOf(b.signature)>-1}),this.flags.sectionBackground&&e&&this.convertAllOnMediaCoast2CoastPreset(a,b,d,!0),a.contentElement.getNonBlankFields();var h=_.any(a.argsMatchingPolicy);h||this.modelTree.updateNodeVisibility(a,d,!1)},a.prototype.getOptimalFieldMasksArray=function(a,b,c){var d=a.data.isList?"items":"single",e=b.contentElementType;"ListHeader"===b.contentElementType?(d="header",e=c.contentElementType):"ListFooter"===b.contentElementType&&(d="footer",e=c.contentElementType);var f=this.layoutPresetHelperService.getPresetPropertyValue(a,"fieldMasks",e,d),g=this.isHomePage();return f=_.sortBy(f,function(a){return 1===a.length&&-1===a[0]?0:g?a.length:-a.length})},a.prototype.getMediaFieldName=function(a){return a.isList()?{item:this.getItemMediaFieldName(_.first(this.modelTree.getListItems(a))),header:this.getItemMediaFieldName(this.modelTree.getListHeader(a))}:this.getItemMediaFieldName(a)},a.prototype.getItemMediaFieldName=function(a){var b;return _.each(a.contentElement.values,function(a,c){"media"===a.type&&(b=c)}),b},a.prototype.getBgColorOption=function(){return{mediaType:"color"}},a.prototype.getBgOptions=function(a){this.applicationState.isPagePrettyRulesActive&&(a.bgImage=this.removeImagesAlreadyOnPage(a.bgImage));var b=[this.getBgColorOption()],c=a.bgImage||[];return c.splice(0,0,this.getBgColorOption()),{bgOptions:a,bgForPresetWithContent:b,bgForPresetWithContentLength:b.length,bgForPresetWithoutContent:c,bgForPresetWithoutContentLength:c.length}},a.prototype.removeImagesAlreadyOnPage=function(a){var b=_(this.PageFeatureList.getImageList(this.storyServices.story.selectedPage)).filter(function(a){return"image"===a.mediaType}).collect(function(a){return a.relativeUri}).unique().value();return _.filter(a,function(a){return-1===b.indexOf(a.relativeUri)})},a.prototype.getSectionBgOptions=function(a){return a.isList()?{headerBg:this.getBgOptions(this.sectionBackgroundService.getBackgroundOptions(a,"header")),bg:this.getBgOptions(this.sectionBackgroundService.getBackgroundOptions(a))}:this.getBgOptions(this.sectionBackgroundService.getBackgroundOptions(a))},a.prototype.setImageBg=function(a,b,c,d){void 0===d&&(d="body");var e=this.sectionBackgroundService.getBackgroundOptions(b,d),f=e.bgImage[c%e.bgImage.length];"header"===d?a.headerBg=f:a.bg=f},a.prototype.isShapePreset=function(a,b){var c;if(a.isListItem){var d=_.filter(b.data.groups,function(a){return!a.isHeader&&!a.isFooter});c=_.first(d).layouts[0].mediaType}else c=b.data.groups[0].layouts[0].mediaType;return c===this.PresetMediaType.SHAPE},a.prototype.getNodeBg=function(a,b,c,d,e,f){void 0===f&&(f=!1);var g=this.hasContentMedia(a,b,c);return g||f?d.bgForPresetWithContent[e%d.bgForPresetWithContentLength]:d.bgForPresetWithoutContent[e%d.bgForPresetWithoutContentLength]},a.prototype.hasContentMedia=function(a,b,c){return a.argsMatchingPolicy[c]&&!this.isShapePreset(a,b)},a.prototype.setSectionBackground=function(a,b,c,d){if(a.node.isList()){var e=this.modelTree.getListHeader(a.node),f=void 0,g=this.hasContentMedia(e,a.preset,b.header),h=void 0;if(g||c%2!==0||(f=this.getNodeBg(e,a.preset,b.header,d.headerBg,c),_.isEqual(this.getBgColorOption(),f)||(h=this.getBgColorOption())),!h){var i=_.first(this.modelTree.getListItems(a.node)),j=0===_.filter(a.preset.data.groups,function(a){return a.layouts.length>1}).length;h=this.getNodeBg(i,a.preset,b.item,d.bg,c,j)}a.bg=h,_.eq(h,f)||(a.headerBg=f)}else a.bg=this.getNodeBg(a.node,a.preset,b,d,c)},a.prototype.isMediaOnMedia=function(a,b,c){var d,e=this.sectionBackgroundService.getBackground(a),f=e&&"color"!==e.mediaType&&"pattern"!==e.mediaType;if(a.isList()){var g=this.modelTree.getListHeader(a),h=_.first(this.modelTree.getListItems(a));d=this.hasContentMedia(h,b,c.item);var i=this.sectionBackgroundService.getBackground(a,"header"),j=this.hasContentMedia(g,b,c.header),k=i&&"color"!==i.mediaType&&"pattern"!==i.mediaType;return d&&f||j&&k}return d=this.hasContentMedia(a,b,c),d&&f},a.prototype.setPatternBg=function(a,b){var c=b.getContentElementType();if("Welcome"!==c&&"Contact"!==c)for(var d=_.filter(a,function(a){return b.isList()?a.headerBg&&"color"===a.headerBg.mediaType:a.bg&&"color"===a.bg.mediaType}),e=this.patternService.getPatternOptions(),f=0;f<d.length;f+=this.pattern_ratio){var g=f/this.pattern_ratio%e.length;b.isList()?d[f].headerBg=e[g]:d[f].bg=e[g]}},a.prototype.generateFlattenedListOfPreviewsForTpa=function(a,b){var c=[];return _.each(b,function(b){c.push({node:a,preset:b,isTpa:!0})}),c},a.prototype.orderPresetsByPrettyAlgo=function(a,b){var c=this,d=a.map(function(a){return new c.FeatureList(a)}),e=new this.FeatureList(b),f=this.prettyAlgoRuleEngine.getScores(this.prettyAlgoRules,e,d),g=a.map(function(a,b){return __assign({},a,f[b],{features:d[b]})}).sort(function(a,b){return b.score-a.score});return console.log("pa - NUMBER OF PRESETS",g.length),g},a.prototype.getWantedArgsSignature=function(a){if(a.isList()){var b=this.modelTree.getListHeader(a),c=this.modelTree.getListFooter(a),d=_.first(this.modelTree.getListItems(a));return _.map([b,d,c],function(a){return a&&a.contentElement.getWantedArgs()||""}).join("#")}return a.contentElement.getWantedArgs()},a.prototype.calculateSolution=function(a,b){var c=this,d="|"+a.node.id+"|"+this.getWantedArgsSignature(a.node);return this.layoutSolver.createLayoutPresetPreviewSolutions([a.preset],a.node,a.isClone,d,a.node.preferredMedia).then(function(b){if(b.length>0){var d=b[0];return d.sourcePageName=a.sourcePageName,d.sourceName=a.sourceName,d.prettyAlgo={score:a.score,rules:a.rules,features:a.features},a.bg&&(d.previewNode.isList()&&c.sectionBackgroundService.setBackground(d.previewNode,a.headerBg,"header",d.solution),c.sectionBackgroundService.setBackground(d.previewNode,a.bg,"body",d.solution)),a.flags&&(d.flags=a.flags),c.$q.when(d)}return c.$q.reject("Could not find any solution to this preset")})},a.prototype.generateColorOptions=function(a){var b=a.isList()&&!this.modelTree.getListHeader(a).isUserHidden(),c=this.simpleSolutionManager.getSectionSolution(a.containerPageId,a.id),d=this.designKit.getConfigurationOfLg(c[0]),e=_.sortBy(this.sectionBackgroundService.getUniqueConfigurationsOfActiveKit(),function(a){return a.id!==d.id});return _(e).map(function(c){return b?_.map(e,function(b){return{node:a,headerConfId:c.id,confId:b.id}}):{node:a,confId:c.id}}).flatten().value()},a.prototype.createColorOptionSolution=function(a){var b=this,c=a.confId,d=a.headerConfId,e="switchColorPreview_"+c+"_"+(d||0);return this.simpleSolutionManager.duplicateSectionForPreview(a.node,e).then(function(a){return b.preparePresetPreviewForRender(b.sitePartTypes.BODY,a),b.designKit.setSpecificConfigurationForSectionByConfId(a.solution,c,d),a})},a.prototype.preparePresetPreviewForRender=function(a,b){this.solutionManager.preparePresetPreviewForRender(a,b)},a.prototype.createCurrentSectionPreview=function(a,b){var c=this,d=this.layoutSelectionStoreProvider.cloneLayoutSelectionStoreForPresetPreview();this.applicationState.isInMobileEditMode()&&(b=this.mobileSolutionManager.getMobileSolution(b));var e,f=_.map(b,function(a){var b=a.getLgData();if(a.isMobile()){b=ob.deepClone(b);var c=_.get(a.getDesktopLG().getLgData(),["strip","color"]);c&&_.set(b,["strip","color"],c)}return b});this.flags.mergedHeader&&(e=this.presetPreviewFlagUtils.getCurrentPageFlags(a)||[]);var g={prettyAlgo:void 0,node:a,preset:void 0,solution:b,previewNode:a,lss:d,selections:this.designKit.getSectionSelections(b),dummyPageId:this.storyServices.story.selectedPage,stripData:[],stripSizes:[],lgDataArray:f,flags:e},h=_.map(g.solution,function(a){return c.solutionManager.hasStripOnLE(a)});return this.solutionManager.mergeDecorativeStrips(g.solution,g.lgDataArray,h,g.stripData,g.stripSizes),g},a}();angular.module("siteGeneratorBuilderInternal").service("presetHelpers",PresetHelpers);var PresetPreviewGenerator=function(){function a(a,b,c,d,e,f,g,h){this.presetHelpers=a,this.modelTree=b,this.applicationState=c,this.sitePartTypes=d,this.storyServices=e,this.PageFeatureList=f,this.overlayManager=g,this.flags=h}return a.$inject=["presetHelpers","modelTree","applicationState","sitePartTypes","storyServices","PageFeatureList","overlayManager","flags"],
a.prototype.getBackgroundMediaField=function(a){return this.flags.sectionBackground&&a.length>0?this.presetHelpers.getMediaFieldName(a[0]):null},a.prototype.getBackgroundNodeOptions=function(a){var b=this;return this.flags.sectionBackground?a.map(function(a){return b.presetHelpers.getSectionBgOptions(a)}):[]},a.prototype.createPreviewsFromExistingNodes=function(a,b,c){var d=this;if(c)return a.sort(function(a){return a.containerPageName?0:1}).map(function(a){return{node:d.modelTree.duplicateNodeAndContentElementForPresetPreview(a),sourcePageName:a.containerPageName,sourceName:a.containerSourceName,isClone:!0,staticRoundRobin:!0}});var e=_.first(a);return b.map(function(a){var b=d.modelTree.duplicateNodeAndContentElementForPresetPreview(e);return d.presetHelpers.fillArgsMatchingPolicy(b,a,a.maskIndex),{node:b,preset:a.preset,sourcePageName:null,sourceName:null,isClone:!0}})},a.prototype.createPreviewsFromDrafts=function(a,b,c){var d=this,e=this.getBackgroundNodeOptions(a),f=this.getBackgroundMediaField(a);return b.map(function(b,g){var h=(g+c)%a.length,i=d.modelTree.duplicateNodeAndContentElementForPresetPreview(a[h]);i.isList()?i.children.forEach(function(a){d.presetHelpers.fillArgsMatchingPolicy(a,b,b.maskIndex,i,!0)}):d.presetHelpers.fillArgsMatchingPolicy(i,b,b.maskIndex,void 0,!0);var j={node:i,preset:b.preset,sourcePageName:null,sourceName:null,isClone:!0};return d.flags.sectionBackground&&d.presetHelpers.setSectionBackground(j,f,Math.floor((g+c)/a.length),e[h]),j})},Object.defineProperty(a.prototype,"isAddMode",{get:function(){return this.applicationState.isAddSectionMode()||this.applicationState.isAddPage()},enumerable:!0,configurable:!0}),a.prototype.createPreviewCombination=function(a,b,c,d,e,f,g){var h=this;void 0===g&&(g=!0);var i=this.modelTree.duplicateNodeAndContentElementForPresetPreview(a);if(f)if(i.isList()){var j=this.modelTree.getListItems(i)[0],k=e.item;j.argsMatchingPolicy[k]=!j.argsMatchingPolicy[k]}else i.argsMatchingPolicy[e]=!i.argsMatchingPolicy[e];var l={node:i,preset:b,sourcePageName:null,sourceName:null,isClone:!0},m=!1;return m=l.node.isList()?_.every(l.node.children,function(a){return h.presetHelpers.convertAllOnMediaCoast2CoastPreset(a,l,l.node)}):this.presetHelpers.convertAllOnMediaCoast2CoastPreset(l.node,l),m?((g||this.presetHelpers.isMediaOnMedia(i,b,e))&&this.presetHelpers.setSectionBackground(l,e,Math.floor(c/d),this.presetHelpers.getSectionBgOptions(i)),!i.isList()&&a.argsMatchingPolicy[e]&&l.convertedPreset&&this.presetHelpers.setImageBg(l,i,Math.floor(c/d)),l):null},a.prototype.createPreviewBgPermutations=function(a,b){var c=this,d=[],e=a.length;return _.each(a,function(a){var f=c.presetHelpers.getMediaFieldName(a);_.each(b,function(b,g){var h=c.createPreviewCombination(a,b.preset,g,e,f,!1,4>g?!1:!0);h&&d.push(h)}),_.each(b,function(b,g){var h=c.createPreviewCombination(a,b.preset,g,e,f,!0);h&&d.push(h)})}),d},a.prototype.generateNewPreviews=function(a,b,c){var d=a.filter(function(a){return a.isDraft}),e=d.length,f=[];if(0===c){var g=a.filter(function(a){return!a.isDraft});f=f.concat(this.createPreviewsFromExistingNodes(g,b,e>0))}if(e>0){f=f.concat(this.createPreviewsFromDrafts(d,b,c));var h=this.flags.sectionBackground&&(!this.applicationState.isPagePrettyRulesActive||!this.PageFeatureList.hasAnyPattern(this.storyServices.story.selectedPage));h&&this.presetHelpers.setPatternBg(f,a[0])}return f},a.prototype.generateAlternativePreviews=function(a,b){return b.map(function(b){return a.map(function(a){return{node:a,preset:b.preset,sourcePageName:null,sourceName:null,isClone:!1}})}).reduce(function(a,b){return a.concat(b)},[])},a.prototype.generateAlternativePreviewsWithBg=function(a,b){var c=this.createPreviewBgPermutations(a,b);return this.presetHelpers.setPatternBg(c,a[0]),c},a}();angular.module("siteGeneratorBuilderInternal").service("presetPreviewGenerator",PresetPreviewGenerator);var PresetPreviewSorter=function(){function a(a,b,c,d,e){this.flags=a,this.presetHelpers=b,this.applicationState=c,this.$window=d,this.defaultsService=e}return a.$inject=["flags","presetHelpers","applicationState","$window","defaultsService"],a.prototype.sort=function(a,b){return this.flags.prettyAlgo||this.flags.noRandomForAutomationTests?this.fakeSortForPrettyAlgo(a,b):this.rectangleSort(a,b)},Object.defineProperty(a.prototype,"isAddMode",{get:function(){return this.applicationState.isAddSectionMode()||this.applicationState.isAddPage()},enumerable:!0,configurable:!0}),a.prototype.fakeSortForPrettyAlgo=function(a,b){return a.map(function(a){return{preset:a,maskIndex:0}}).concat(a.map(function(a){return{preset:a,maskIndex:1}}))},a.prototype.rectangleSort=function(a,b){var c=this;this.printPrioritiesDebug(a,b);var d=[],e=10;if(_.each(a,function(a){var f=c.defaultsService.getPriority(a,b);10>f&&(f+=e++);var g=Math.floor(f/10),h=f%10;d[h]||(d[h]=[]),d[h][g]={preset:a,maskIndex:0}}),this.isAddMode){var f=a[0],g=this.presetHelpers.getOptimalFieldMasksArray(f,b);g.length>1&&(d=d.concat(_.map(d,function(a){return a?_.map(a,function(a){return a?{preset:a.preset,maskIndex:1}:void 0}):void 0})))}var h=this.applicationState.generateRandomOffset(b.getContentElementType(),d.length);return h>0&&this.insertArray(d,d.splice(0,h)),_.filter(_.flatten(d),function(a){return a})},a.prototype.insertArray=function(a,b){Array.prototype.splice.apply(a,[a.length,0].concat(b))},a.prototype.printPrioritiesDebug=function(a,b){var c=this;if(this.flags.debugMode){var d=_(a).filter(function(a){return a.data.priority}).groupBy(function(a){return a.data.priority[b.contentElementType]}).value(),e=_.map(a,function(a){return a.id});this.$window.console.log("%cPreset Priorities: "+_.keys(d),"color:green"),_.each(d,function(a,d){a.length>1&&c.$window.console.log("%cDuplication of Priority ["+b.contentElementType+"] ["+d+"] Preset IDs: "+_.map(a,function(a){return a.id}),"color:red")}),this.$window.console.log("%cPreset IDs: "+e,"color:green")}},a}();angular.module("siteGeneratorBuilderInternal").service("presetPreviewSorter",PresetPreviewSorter);var HeaderPresetUtils=function(){function a(a,b,c,d,e){this.modelTree=a,this.storyServices=b,this.mergedHeaderService=c,this.layoutSelectionStoreProvider=d,this.themeChooser=e}return a.$inject=["modelTree","storyServices","mergedHeaderService","layoutSelectionStoreProvider","themeChooser"],a.prototype.isHeaderNode=function(a){return a&&"GeneralDescription"===a.contentElementType&&"footer"!==a.containerPageId},a.prototype.currentPageHasSections=function(){var a=this,b=this.modelTree.getPagesNodes().find(function(b){return b.id===a.storyServices.story.selectedPage});return b&&b.children.length>1},a.prototype.decorateHeaderPreviews=function(a){return a.map(function(a){return a.flags?a.flags.push("limitLastPresetHeight"):a.flags=["limitLastPresetHeight"],a})},a.prototype.shouldGeneratePresetForMode=function(b,c){return _(a.PresetIncludes[b]).includes(c)},a.prototype.clonePreviewWithoutFlags=function(a){var b={};return a.lss&&(b.lss=angular.copy(a.lss)),Object.assign(b,_.omit(a,["flags","lss"]))},a.prototype.getRelevantHeaderModes=function(a){var b=this,c=a.flags||["none"],d=["fix","none"];return this.mergedHeaderService.isHeaderMergeable()&&d.push("mergeHeader"),_.difference(d,c).filter(function(c){return!a.preset||b.shouldGeneratePresetForMode(c,a.preset.id)})},a.prototype.generateHeaderPreviews=function(a){var b=this;return this.getRelevantHeaderModes(a).map(function(c){return"none"===c?b.clonePreviewWithoutFlags(a):Object.assign({},a,{flags:[c]})}).concat(a)},a.prototype.permutateHeaderPreviews=function(a){var b=this;return a.map(function(a){return b.generateHeaderPreviews(a)}).reduce(function(a,b){return a.concat(b)},[])},a.prototype.addHeaderPreviews=function(a,b){if(this.isHeaderNode(b)&&this.currentPageHasSections()){var c=this.permutateHeaderPreviews(a);return this.decorateHeaderPreviews(c)}return a},a.prototype.updateLssProperty=function(a,b){var c=this.layoutSelectionStoreProvider.getLayoutSelectionStore();_.set(c.siteOverrides,a,b)},a.prototype.setHeaderBg=function(a){this.updateLssProperty("headerBackground",a),this.themeChooser.updateHeaderBg()},a.prototype.getHeaderAvailableBackgroundColors=function(){return _.unique(this.themeChooser.coloration.getColorsForCurrentColoration().map(function(a){return{color:a}}),"color")},a}();HeaderPresetUtils.PresetIncludes={fix:["59009097a9f3001400ba5266","5900a9d788524514007e9cae","5900a006ef3dd814004c3fd2","5900a923ec554d1400c92c66","5900949d88524514007e9ca4","5900aa7088524514007e9cb0","5900939da9f3001400ba5268"],mergeHeader:["5900a9d788524514007e9cae","59009f0c5548e21400c6954a","5900a923ec554d1400c92c66","5900949d88524514007e9ca4","5900aa7088524514007e9cb0"]},angular.module("siteGeneratorBuilderInternal").service("headerPresetUtils",HeaderPresetUtils);var PresetPreviewFlagUtils=function(){function a(a,b){this.layoutSelectionStoreProvider=a,this.mergedHeaderService=b}return a.$inject=["layoutSelectionStoreProvider","mergedHeaderService"],a.prototype.isHeaderNode=function(a){return a&&"GeneralDescription"===a.contentElementType&&"footer"!==a.containerPageId},a.prototype.getCurrentPageFlags=function(a){var b=[];return this.isHeaderNode(a)?(this.layoutSelectionStoreProvider.getLayoutSelectionStore().getFixedHeader()&&b.push("fix"),this.mergedHeaderService.isHeaderMerged()&&b.push("mergeHeader"),b.length?b:void 0):b},a}();angular.module("siteGeneratorBuilderInternal").service("presetPreviewFlagUtils",PresetPreviewFlagUtils);var builder;!function(a){var b=function(){function b(a,b,c,d){this.presetFeatureDetector=a,this.sitePartTypes=b,this.mediaOverride=c,this.overlayManager=d}return b.$inject=["presetFeatureDetector","sitePartTypes","mediaOverride","overlayManager"],b.prototype.create=function(b){return{mode:a.PresetsStrategyMode.Change,isBackgroundSupported:function(){return!1},filterPresets:b?this.filterNonImagePresets.bind(this):null,orderPresets:this.orderPresetsByCluster.bind(this),preCalculate:b?this.setFitMode.bind(this):null}},b.prototype.filterNonImagePresets=function(a,b){var c=this;return a.filter(function(a){var b={node:null,preset:a,sourcePageName:null,sourceName:null,isClone:!0},d=c.presetFeatureDetector.getMediaPreferredOverride(b);return!d||"Image"===d.name})},b.prototype.orderPresetsByCluster=function(a,b){var c=this,d=this.overlayManager.listSpanManager.getSegmentByNodeId(b[0].id,this.sitePartTypes.BODY),e=d.getLE().cluster,f=a.map(function(a){var d=c.presetFeatureDetector.enhanceWithRealStructure({},a.data.groups[0].layouts[0],b[0]),e=d.realStructure,f=d.cluster;return{preset:a,realStructure:e,cluster:f}});return f.sort(function(a,b){return a.cluster===e?-1:b.cluster===e?1:0})},b.prototype.setFitMode=function(a){var b=ob.deepClone(a),c=this.presetFeatureDetector.getOrCreateMediaPreferredOverride(b,this.mediaOverride["default"]);return"Image"===c.name&&(c.sourceProperties.imageScaling="full",c.properties.displayMode="full"),b},b}();a.FitModePresetsStrategyOptions=b}(builder||(builder={})),angular.module("siteGeneratorBuilderInternal").service("fitModePresetsStrategyOptions",builder.FitModePresetsStrategyOptions);var builder;!function(a){var b=function(){function a(a,b,c,d){this.presetHelpers=a,this.designKit=b,this.$p=c,this.backgroundMediaOpacity=d,this.hashMap={}}return a.prototype.generateListOfPreviews=function(a){return this.$p.when(this.presetHelpers.generateColorOptions(a[0]))},a.prototype.generateNextChunkOfPreviews=function(a){return[]},a.prototype.calculatePresetPreview=function(a){return this.presetHelpers.createColorOptionSolution(a)},a.prototype.isUnique=function(a){var b=this.getPresetVisualSignature(a);return this.hashMap[b]||(this.hashMap[b]=a),this.hashMap[b]===a},a.prototype.getPresetVisualSignature=function(a){var b=this;return _.each(a.solution,function(c,d){var e=a.stripData[d];e&&e.mediaItems&&(c.hasNonTransparentBackground=1===b.backgroundMediaOpacity.getBackgroundOpacity(c,e.color,e.mediaType,e.mediaItems))}),this.designKit.getColorSignature(a.solution,a.previewNode)},a.prototype.shouldLoadPreviousOnScroll=function(){return!1},a}();a.ColoredPresetsStrategy=b}(builder||(builder={}));var builder;!function(a){var b=function(){function b(a,b,c,d){this.strategyOptions=a,this.defaultsService=b,this.presetHelpers=c,this.$p=d}return b.prototype.generateListOfPreviews=function(b){var c=this,d=this.strategyOptions.mode===a.PresetsStrategyMode.Add;return this.defaultsService.getPresetsForNode(b[0],void 0,d).then(function(a){return c.presetHelpers.generateFlattenedListOfPreviewsForTpa(b[0],a)})},b.prototype.generateNextChunkOfPreviews=function(a){return[]},b.prototype.calculatePresetPreview=function(a){return this.$p.when(a)},b.prototype.isUnique=function(a){return!0},b.prototype.getPresetVisualSignature=function(a){return""},b.prototype.shouldLoadPreviousOnScroll=function(){return!1},b}();a.TpaPresetsStrategy=b}(builder||(builder={}));var builder;!function(a){var b=function(){function b(b,c,d,e,f,g,h,i,j,k){this.strategyOptions=b,this.defaultsService=c,this.applicationState=d,this.presetHelpers=e,this.presetPreviewGenerator=f,this.$window=g,this.$q=h,this.mobileSectionManager=i,this.flags=j,this.sitePartTypes=k,this.chunkIndex=0,this.maxChunks=0,this.staticIndex=0,this.hashMap={};var l=this.applicationState.getContentFocus();this.sitePart=l&&l.sitePart,this.ceType=this.strategyOptions.mode===a.PresetsStrategyMode.Change&&this.sitePart===this.sitePartTypes.HEADER?"SiteHeader":null}return b.prototype.generateListOfPreviews=function(a){var b=this;return this.getPresets(a).then(function(c){var d=b.filterPresets(c,a),e=b.orderPresets(d,a);return b.generatePreviewsFromPresets(a,e)})},b.prototype.generateNextChunkOfPreviews=function(b){return this.strategyOptions.mode===a.PresetsStrategyMode.Add&&this.chunkIndex<this.maxChunks?this.presetPreviewGenerator.generateNewPreviews(b,this.presets,this.chunkIndex++):[]},b.prototype.calculatePresetPreview=function(a){var b=this;return this.tryOverrideNextPreset(a),a=this.preCalculate(a),this.presetHelpers.calculateSolution(a,this.sitePart).then(function(c){return b.validateMobileSolution(a,c)}).then(function(c){return b.tryUpdateNextOverridePreset(a),c},function(c){return b.flags.debugMode&&b.$window.console.log("%cCannot create solution for preset/node\nPreset ID: "+a.preset.id+"\nReason: "+c,"color:red"),b.tryNextPreset(a)})},b.prototype.isUnique=function(b){if(this.strategyOptions.mode===a.PresetsStrategyMode.Add)return!0;var c=this.getPresetVisualSignature(b);return this.hashMap[c]||(this.hashMap[c]=b),this.hashMap[c]===b},b.prototype.shouldLoadPreviousOnScroll=function(){return!0},b.prototype.getPresetVisualSignature=function(a){var b=this;return[_.map(a.solution,function(a){return[a.id,a.selectedHeightMutation,b.getColumnsVisualSignature(a),_.get(a.getLgData(),["menuStrip","enable"])||!1,"["+_.map(a.segments,function(a){var c=a.getLENoError();return c&&[c.id,b.getLEVisualSignature(c)].join("$")}).join(",")+"]"].join("$")}).join("\n"),this.flags.mergedHeader&&a.flags?a.flags.join("$"):null].filter(function(a){return!!a}).join("$")},b.prototype.getPresets=function(b){var c=this.strategyOptions.mode===a.PresetsStrategyMode.Add;return this.defaultsService.getPresetsForNode(b[0],this.ceType,c,this.applicationState.isInMobileEditMode())},b.prototype.filterPresets=function(a,b){return this.strategyOptions&&this.strategyOptions.filterPresets?this.strategyOptions.filterPresets(a,b):a},b.prototype.orderPresets=function(a,b){return this.strategyOptions&&this.strategyOptions.orderPresets?this.strategyOptions.orderPresets(a,b):a.map(function(a){return{preset:a}})},b.prototype.generatePreviewsFromPresets=function(b,c){if(this.presets=c,this.strategyOptions.mode===a.PresetsStrategyMode.Add)return this.maxChunks=b.filter(function(a){return a.isDraft}).length,this.tryJust1Preset(),this.presetPreviewGenerator.generateNewPreviews(b,this.presets,this.chunkIndex++);var d=this.strategyOptions.isBackgroundSupported()&&!this.applicationState.isInMobileEditMode()&&this.flags.sectionBackground&&this.sitePart===this.sitePartTypes.BODY;return d?this.presetPreviewGenerator.generateAlternativePreviewsWithBg(b,this.presets):this.presetPreviewGenerator.generateAlternativePreviews(b,this.presets)},b.prototype.preCalculate=function(a){return this.strategyOptions&&this.strategyOptions.preCalculate?this.strategyOptions.preCalculate(a):a},b.prototype.validateMobileSolution=function(a,b){return b.preset.data.isMobile&&!this.mobileSectionManager.validateMobileSolution(b.solution,this.sitePart,a.node.containerPageId,a.node.id)?this.$q.reject("Mobile solution does not fit desktop solution"):b},b.prototype.tryOverrideNextPreset=function(a){a.staticRoundRobin&&(void 0===a.staticStartIndex&&(a.staticStartIndex=this.staticIndex),a.preset=this.presets[this.staticIndex].preset)},b.prototype.tryUpdateNextOverridePreset=function(a){a.staticRoundRobin&&(this.staticIndex=(this.staticIndex+1)%this.presets.length)},b.prototype.tryNextPreset=function(a){return a.staticRoundRobin&&(this.staticIndex=(this.staticIndex+1)%this.presets.length,a.staticStartIndex!==this.staticIndex)?this.calculatePresetPreview(a):null},b.prototype.getColumnsVisualSignature=function(a){var b=a.getColumnsData();return b&&b.enable?[b.props.fullWidth,b.props.columnsMargin,b.props.siteMargin,b.props.frameMargin,b.props.rowMargin,b.split].join(","):!1},b.prototype.getLEVisualSignature=function(a){var b=[],c=a.getLayoutSelectionStore();return a.recurseLayouts(function(d){var e;if(a.isMediaType(d)){var f=a.overrides&&a.overrides.media&&a.overrides.media[d.argIndex];e=f&&f.name||d.type}else switch(d.type){case"menu":e=[c?c.menuOverridesManager.stretchButtons():!0,c?c.menuOverridesManager.alignment():"center"].join("|");case"text":e=a.getAlignment(d,"align")}e&&b.push(e)}),b.join("$")},b.prototype.tryJust1Preset=function(){var a=this;if(this.flags.debugMode&&this.$window.justThisPresetId){var b=_.find(this.presets,function(b){return b.preset.id===a.$window.justThisPresetId});b&&(this.presets=[b])}},b}();a.GenericPresetsStrategy=b}(builder||(builder={}));var builder;!function(a){var b;!function(a){a[a.Generic=0]="Generic",a[a.Tpa=1]="Tpa",a[a.Color=2]="Color",a[a.FitMode=3]="FitMode",a[a.UnFitMode=4]="UnFitMode"}(b=a.PresetsStrategyType||(a.PresetsStrategyType={}));var c;!function(a){a[a.Add=0]="Add",a[a.Change=1]="Change"}(c=a.PresetsStrategyMode||(a.PresetsStrategyMode={}));var d=function(){function c(a,b,c,d,e,f,g,h,i,j,k,l,m,n){this.flags=a,this.designKit=b,this.backgroundMediaOpacity=c,this.applicationState=d,this.defaultsService=e,this.presetHelpers=f,this.presetPreviewSorter=g,this.presetPreviewGenerator=h,this.mobileSectionManager=i,this.fitModePresetsStrategyOptions=j,this.sitePartTypes=k,this.$p=l,this.$q=m,this.$window=n}return c.$inject=["flags","designKit","backgroundMediaOpacity","applicationState","defaultsService","presetHelpers","presetPreviewSorter","presetPreviewGenerator","mobileSectionManager","fitModePresetsStrategyOptions","sitePartTypes","$p","$q","$window"],c.prototype.createFromNode=function(b,c){var d=b.isTpaNode&&b.isTpaNode(),e=d?a.PresetsStrategyType.Tpa:a.PresetsStrategyType.Generic;return this.create(e,c)},c.prototype.create=function(a,c){switch(a){case b.Generic:return this.createGenericStrategyFromMode(c);case b.Tpa:return this.createTPAStrategy(c);case b.Color:return this.createColorStrategy();case b.FitMode:return this.createGenericStrategy(this.fitModePresetsStrategyOptions.create(!0));case b.UnFitMode:return this.createGenericStrategy(this.fitModePresetsStrategyOptions.create(!1))}return null},c.prototype.createGenericStrategyFromMode=function(a){var b=this,c={mode:a,isBackgroundSupported:function(){return!0},orderPresets:function(a,c){return b.presetPreviewSorter.sort(a,c[0])}};return this.createGenericStrategy(c)},c.prototype.createGenericStrategy=function(b){return void 0===b&&(b=null),new a.GenericPresetsStrategy(b,this.defaultsService,this.applicationState,this.presetHelpers,this.presetPreviewGenerator,this.$window,this.$q,this.mobileSectionManager,this.flags,this.sitePartTypes)},c.prototype.createTPAStrategy=function(b){var c={mode:b,isBackgroundSupported:function(){return!1}};return new a.TpaPresetsStrategy(c,this.defaultsService,this.presetHelpers,this.$p)},c.prototype.createColorStrategy=function(){return new a.ColoredPresetsStrategy(this.presetHelpers,this.designKit,this.$p,this.backgroundMediaOpacity)},c}();a.PresetsStrategyFactory=d}(builder||(builder={})),angular.module("siteGeneratorBuilderInternal").service("presetsStrategyFactory",builder.PresetsStrategyFactory);var LogoExtractionPopupService=function(){function a(a,b,c){var d=this;this.flags=a,this.$timeout=b,this.$window=c,this.showIt=!1,this.$window.addEventListener("mousedown",function(a){!d.showIt&&!d.timeout||$(a.target).parents().andSelf().is("logo-extraction-popup")||d.hideLogoPopup()})}return a.$inject=["flags","$timeout","$window"],a.prototype.shouldShowPopup=function(){return this.showIt&&this.flags.logoExtractionPopupInBuilder},a.prototype.showLogoPopup=function(a,b,c,d){var e=this;this.hideLogoPopup(),this.timeout=this.$timeout(function(){e.getLogoColoration=c,e.origin=a,e.anchorSelector=b,e.showIt=!0},d),this.timeout.then(function(){e.getLogoColoration()})},a.prototype.hideLogoPopup=function(){this.origin=null,this.anchorSelector=null,this.showIt=!1,this.timeout&&(this.$timeout.cancel(this.timeout),this.timeout=null)},a.prototype.getAnchorSelector=function(){return this.anchorSelector},a.prototype.getOrigin=function(){return this.origin},a}();angular.module("siteGeneratorBuilderInternal").service("logoExtractionPopupService",LogoExtractionPopupService);var builder;!function(a){var b=function(){function a(a){this.modelTree=a}return a.$inject=["modelTree"],a.prototype.getLogoURL=function(){var a=this.modelTree.getGeneralInformation(),b=_.get(a.contentElement.getFieldValue("Logo"),"value[0]");return b&&LogoColorService.getResizedWixImageURL(b)},a.prototype.isLogoVisible=function(){return!0},a}();a.BuilderLogoPersistence=b,angular.module("siteGeneratorBuilderInternal").service("builderLogoPersistence",b)}(builder||(builder={}));var Checkpoint=function(){function a(a,b,c,d,e,f,g){void 0===b&&(b=!0),void 0===c&&(c=!1),void 0===d&&(d=!1),void 0===e&&(e=null),void 0===f&&(f=!1),void 0===g&&(g=!1),this.story=a,this.refresh=b,this.setTheme=c,this.forceDsSave=d,this.revision=e,this.saveWithDs=f,this.mobileEditor=g}return a}(),UndoRedo=function(){function a(a,b,c,d,e,f,g,h,i,j){var k=this;this.undoStateManager=a,this.$timeout=b,this.obMonitoring=c,this.autoSaveNotifier=d,this.$location=e,this.consumerBiLogger=f,this.applicationState=g,this.pagesManager=h,this.pubSub=i,this.flags=j,this.ongoingSave={shouldSetTheme:!1,shouldDsSave:!1,reset:function(){k.ongoingSave.shouldSetTheme=!1,k.ongoingSave.shouldDsSave=!1}},this.maxInMemorySavedStories=10,this.maxOperationsPerSave=5,this.maxTimeBetweenSavesInMilliSeconds=this.flags.dsSaveEveryAutoSave?1e4:5e3,this.maxTimeBetweenRevisionSaves=3e5,this.normalAutoSave={maxOperationsPerSave:5,maxTimeBetweenSavesInMilliSeconds:this.flags.dsSaveEveryAutoSave?1e4:5e3,maxTimeBetweenRevisionSaves:3e5},this.slowAutoSave={maxOperationsPerSave:1e4,maxTimeBetweenSavesInMilliSeconds:6e7,maxTimeBetweenRevisionSaves:6e7},this.maxStorySavesPerRevisionSave=10,this.undoCheckpoints=[],this.redoCheckpoints=[],this.timeoutPromise=null,this.timeoutPromiseForRevisions=null,this.unsavedRevisions=0,this.regularAutoSaveCount=0,this.canUndo=function(){return k.undoCheckpoints.length>0},this.canRedo=function(){return k.redoCheckpoints.length>0},this.captureInitialState=function(){return k.updateCurrentState()},this.setStoryDebounced=_.debounce(this.setStory,1e3),_.has(e.search(),"delayAutoSave")&&this.delayAutoSave()}return a.$inject=["undoStateManager","$timeout","obMonitoring","autoSaveNotifier","$location","consumerBiLogger","applicationState","pagesManager","pubSub","flags"],a.prototype.captureOperation=function(a,b,c,d){void 0===a&&(a=!0),void 0===b&&(b=!1),void 0===c&&(c=!1),void 0===d&&(d=!1),this.obMonitoring.mark({name:"captureOperation"}),this.currentState.refresh=a,this.currentState.forceDsSave=c,this.currentState.saveWithDs=d,this.currentState.setTheme=b,this.currentState.mobileEditor=this.applicationState.isInMobileEditMode(),this.undoCheckpoints.push(this.currentState),this.redoCheckpoints=[],this.updateCurrentState(d),this.maintainUndoListSize(),this.handleAutoSave(),this.obMonitoring.measure({name:"captureOperation"})},a.prototype.undo=function(a){void 0===a&&(a=!1),this.canUndo()&&this.undoOrRedo("undo",a,this.undoCheckpoints,this.redoCheckpoints)},a.prototype.redo=function(a){void 0===a&&(a=!1),this.canRedo()&&this.undoOrRedo("redo",a,this.redoCheckpoints,this.undoCheckpoints)},a.prototype.setSupportMode=function(){this.disableAutoSave(),this.delayAutoSave()},a.prototype.disableAutoSave=function(){this.cancelAllTimeouts(!0)},a.prototype.enableAutoSave=function(){this.handleAutoSave()},a.prototype.reloadAndResetToLatest=function(){var a=this;return this.undoStateManager.loadStoryRevision(void 0,!0,!0).then(function(){return a.resetState()})},a.prototype.resetState=function(){this.updateCurrentState()},a.prototype.updateCurrentState=function(a,b){void 0===a&&(a=!1),this.currentState=new Checkpoint(this.undoStateManager.getCurrentStory(),!0,!1,!1,null,a||this.currentState&&this.currentState.saveWithDs,!(!this.currentState||!this.currentState.mobileEditor)),b&&_.extend(this.currentState,b)},a.prototype.undoOrRedo=function(a,b,c,d){this.consumerBiLogger.builder.undoRedoLastChange(a);var e=c.pop(),f=this.currentState;d.push(this.currentState),this.currentState=e,this.ongoingSave.shouldSetTheme=this.ongoingSave.shouldSetTheme||f.setTheme||e.setTheme,this.ongoingSave.shouldDsSave=this.ongoingSave.shouldDsSave||f.forceDsSave||e.forceDsSave,b?this.setStoryDebounced(a,e):this.setStory(a,e)},a.prototype.setStory=function(b,c){var d=this;this.obMonitoring.mark({name:b});var e=c.story?this.undoStateManager.setStory(c.story,c.refresh,this.ongoingSave.shouldSetTheme,c.mobileEditor):this.undoStateManager.loadStoryRevision(c.revision,c.refresh,c.setTheme,c.mobileEditor);e.then(function(){d.handleAutoSave(d.ongoingSave.shouldDsSave),d.ongoingSave.reset(),d.updateCurrentState(!1,_.pick(c,a.PROPERTIES)),d.obMonitoring.measure({name:b}),d.consumerBiLogger.builder.undoRedoSucces(b)}).then(function(){d.pubSub.fire(PubSub.events.NEW_STATE_STORY_WAS_SET)})},a.prototype.maintainUndoListSize=function(){var a=_.filter(this.undoCheckpoints,function(a){return a&&null!==a.story});a.length>this.maxInMemorySavedStories&&(a[0].story=null),this.undoCheckpoints=this.undoCheckpoints.filter(function(a){return a&&(null!==a.story||null!==a.revision)})},a.prototype.handleAutoSave=function(a){var b=this;void 0===a&&(a=!1),a||this.unsavedRevisions===this.maxOperationsPerSave-1?this.autoSave(a||this.regularAutoSaveCount===this.maxStorySavesPerRevisionSave-1&&!this.flags.dsSaveEveryAutoSave):(this.unsavedRevisions++,null===this.timeoutPromise&&(this.timeoutPromise=this.$timeout(function(){return b.autoSave(!1)},this.maxTimeBetweenSavesInMilliSeconds)),this.flags.dsSaveEveryAutoSave||null!==this.timeoutPromiseForRevisions||(this.timeoutPromiseForRevisions=this.$timeout(function(){return b.autoSave(!0)},this.maxTimeBetweenRevisionSaves)))},a.prototype.autoSave=function(a){var b=this;if(this.obMonitoring.mark({name:"autoSave"}),(this.flags.dsSaveEveryAutoSave||a)&&this.applicationState.isOnAddState())return void this.cancelAllTimeouts(a);var c=this.currentState,d=a||this.currentState.saveWithDs,e=this.undoStateManager.saveStory(d,this.currentState.story,this.currentState.saveWithDs).then(function(a){return c.revision=a}).then(function(){return d&&!b.flags.dsSaveEveryAutoSave?b.pagesManager.goToSelectedPage():void 0});return this.currentState.saveWithDs=!1,this.autoSaveNotifier.onSave(e),this.cancelAllTimeouts(a),this.unsavedRevisions=0,a?this.regularAutoSaveCount=0:this.regularAutoSaveCount++,e.then(function(){return b.obMonitoring.measure({name:"autoSave",data:{shouldSaveRevision:a}})}),e},a.prototype.manualSave=function(){return this.autoSave(!0)},a.prototype.cancelAllTimeouts=function(a){this.timeoutPromise&&(this.$timeout.cancel(this.timeoutPromise),this.timeoutPromise=null),this.timeoutPromiseForRevisions&&a&&(this.$timeout.cancel(this.timeoutPromiseForRevisions),this.timeoutPromiseForRevisions=null)},a.prototype.delayAutoSave=function(){_.assign(this,this.slowAutoSave)},a.prototype.setSlowAutoSave=function(a){void 0===a&&(a=!1),_.assign(this,a?this.slowAutoSave:this.normalAutoSave)},a.prototype.onStartWelcomeTour=function(){this.setSlowAutoSave(!0)},a.prototype.onEndWelcomeTour=function(){this.setSlowAutoSave(!1),this.autoSave(!0),this.undoCheckpoints.length=0},a}();UndoRedo.PROPERTIES=["refresh","forceDsSave","setTheme","revision","saveWithDs"],angular.module("siteGeneratorBuilderInternal").service("undoRedo",UndoRedo);var UndoEvents=function(){function a(){}return a}();UndoEvents.STORY_REVISION_CHANGED="storyRevisionChanged";var UndoStateManager=function(){function a(a,b,c,d,e,f,g,h,i,j,k,l,m,n,o,p){this.$state=a,this.$rootScope=b,this.storyServices=c,this.wizardService=d,this.Story=e,this.flags=f,this.publishService=g,this.layoutSolver=h,this.pagesManager=i,this.consumerDialogs=j,this.applicationState=k,this.themeChooser=l,this.menuService=m,this.spinnerService=n,this.previewService=o,this.consumerBiLogger=p,this.updatePublishReminderTimestamp()}return a.$inject=["$state","$rootScope","storyServices","wizardService","Story","flags","publishService","layoutSolver","pagesManager","consumerDialogs","applicationState","themeChooser","menuService","spinnerService","previewService","consumerBiLogger"],a.prototype.getCurrentStory=function(){return this.storyServices.story.getCurrentState()},a.prototype.setStory=function(a,b,c,d){var e=this;return this.spinnerService.waitForMe("setStory"),!c&&b&&(this.applicationState.clearContentFocus(),this.applicationState.goToBuilder()),a.revision=this.storyServices.story.revision,this.storyServices.story.setState(a),this.pagesManager.changeStory().then(function(){return e.pagesManager.goToPage(e.storyServices.story.selectedPage)}).then(function(){e.wizardService.setFixedHeader()}).then(function(){return d?e.applicationState.isInMobileEditMode()?e.storyServices.calculateAndRenderDesktopAndMobilePages("current"):e.applicationState.goToMobilePage(e.storyServices.story.selectedPage):e.applicationState.isInMobileEditMode()?e.applicationState.disableMobileEditor().then(function(){return e.layoutSolver.onNodeChanged()}):e.layoutSolver.onNodeChanged()}).then(function(){if(c){var a=e.themeChooser.setStoryStyles(e.storyServices.story,!0),b=e.$state.current.name;if(b===config.STATES.BUILDER_DESIGN_KIT||b===config.STATES.BUILDER_DESIGN_KIT_COLORATION||b===config.STATES.BUILDER_DESIGN_KIT_COLORATION_ADVANCED){var d=e.storyServices.story.selectedStyle;if(d.mainKit)switch(b){case config.STATES.BUILDER_DESIGN_KIT:e.applicationState.goToDesignKitMode();break;case config.STATES.BUILDER_DESIGN_KIT_COLORATION:e.applicationState.goToColorationPanel();break;case config.STATES.BUILDER_DESIGN_KIT_COLORATION_ADVANCED:e.applicationState.goToAdvancedPaletteEditing()}else e.applicationState.goToDesignMode()}return a}}).then(function(){e.$rootScope.$broadcast(UndoEvents.STORY_REVISION_CHANGED)}).then(function(){return e.previewService.waitForChanges()}).then(function(){e.menuService.refresh()})["finally"](function(){e.spinnerService.imDone("setStory")})},a.prototype.saveStory=function(b,c,d){var e=this;b=b,this.consumerBiLogger.builder.autosaveStart(!1);var f;return f=this.flags.dsSaveEveryAutoSave?this.wizardService.publishStory(void 0,void 0,!0):b?this.wizardService.publishStory(void 0,void 0,d):this.wizardService.saveStory(),f.then(function(){e.consumerBiLogger.builder.autosaveEnd();var c=!e.publishService.isSitePublished()&&(b||e.flags.dsSaveEveryAutoSave)&&e.minutesSinceLastPublishReminder>=a.TIME_TO_PUBLISH_REMINDER_INTERVAL;return c&&e.showTimeToPublishPopup(),
e.storyServices.story.revision})},a.prototype.loadStoryRevision=function(a,b,c,d){var e=this;return void 0===d&&(d=!1),this.spinnerService.waitForMe("loadStoryRevision"),this.Story.getStoryDataByVersion(this.storyServices.story.id,a).then(function(a){return a.revision=e.storyServices.story.revision,e.setStory(a,b,c,d)})["finally"](function(){e.spinnerService.imDone("loadStoryRevision")})},a.prototype.showTimeToPublishPopup=function(){this.updatePublishReminderTimestamp(),this.consumerDialogs.showDialog(ConsumerDialogTypes.TIME_TO_PUBLISH_POPUP)},Object.defineProperty(a.prototype,"minutesSinceLastPublishReminder",{get:function(){var a=(new Date).getTime()-this.lastPublishReminderTimestamp;return a/1e3/60},enumerable:!0,configurable:!0}),a.prototype.updatePublishReminderTimestamp=function(){this.lastPublishReminderTimestamp=(new Date).getTime()},a}();UndoStateManager.TIME_TO_PUBLISH_REMINDER_INTERVAL=50,angular.module("siteGeneratorStaticsConsumerAppInternal").service("undoStateManager",UndoStateManager);var RevisionReloader=function(){function a(a,b,c,d,e){var f=this;this.undoStateManager=a,this.storyManager=b,this.urlStateKeeper=c,this.consumerBiLogger=d,this.$window=e,this.onHashChange=function(){var a=f.urlStateKeeper.getFlag("previewRevision");if("undefined"==typeof a)return void f.consumerBiLogger.restoreBI();f.consumerBiLogger.pauseBI();var b=!0,c=!0;return+a!==f.storyManager.currentStory.revision?f.undoStateManager.loadStoryRevision(+a,b,c):void 0}}return a.$inject=["undoStateManager","storyManager","urlStateKeeper","consumerBiLogger","$window"],a.prototype.init=function(){angular.element(this.$window).on("hashchange",this.onHashChange)},a.prototype.reset=function(){angular.element(this.$window).off("hashchange",this.onHashChange)},a}();angular.module("siteGeneratorBuilderInternal").service("revisionReloader",RevisionReloader);var AutoSaveNotifier=function(){function a(a,b,c){this.flags=a,this.consumerDialogs=b,this.assistantManager=c,this.savingState="idle",this.saveRetryTime=null,this.lastSuccessfulSave=null,this.autosaveCounter=0,this.shouldCountAutosaves=!1,this.autosavePopupThreshold=2,a.autosavePopupThreshold&&(this.autosavePopupThreshold=a.autosavePopupThreshold)}return a.$inject=["flags","consumerDialogs","assistantManager"],a.prototype.onSave=function(a){var b=this;this.setState("saving"),a.then(function(){return b.onSaveSuccess()},function(a){return b.onSaveError(a)})},a.prototype.startCountingAutosaves=function(){this.shouldCountAutosaves=!0},a.prototype.onSaveSuccess=function(){this.setState("idle"),this.lastSuccessfulSave=(new Date).getTime(),this.saveRetryTime=null,this.assistantManager.isInActiveTask()||(this.shouldCountAutosaves&&this.autosaveCounter++,this.autosaveCounter===+this.autosavePopupThreshold&&this.consumerDialogs.showDialog(ConsumerDialogTypes.AUTOSAVE_POPUP))},a.prototype.onSaveError=function(a){this.setState("waitingForResave"),this.saveRetryTime=a?a.retryTime:1},a.prototype.setState=function(a){this.savingState=a},a}();angular.module("siteGeneratorBuilderInternal").service("autoSaveNotifier",AutoSaveNotifier);var ConsumerMenu=function(){function a(a,b,c,d,e,f){this.$p=a,this.flags=b,this.modelTree=c,this.menuService=d,this.layoutSelectionStoreProvider=e,this.previewService=f}return a.$inject=["$p","flags","modelTree","menuService","layoutSelectionStoreProvider","previewService"],a.prototype.nodeHasAnchorMenu=function(a){return!!this.menuService.getLinkToNode(a)},a.prototype.getChildrenWithAnchor=function(a){return _(a).map("children").flatten().filter(this.nodeHasAnchorMenu.bind(this)).value()},a.prototype.getVisiblePageNodes=function(){return _.reject(this.modelTree.getPagesNodes(),function(a){return a.hidePage||a.tpaExtraPage})},a.prototype.addAnchorsToMenu=function(a){var b=this;return _.each(a,function(a){b.menuService.addLinkToNode(a)})},a.prototype.removeAnchorsFromMenu=function(a){var b=this;return _.each(a,function(a){b.menuService.removeLinkToNode(a)})},a.prototype.calcMenuAnchors=function(){var a,b,c,d=this,e=this.modelTree.getPagesNodes(),f=this.getVisiblePageNodes();if(1===f.length){var g=_.first(f),h=_(g.children).reject(_.method("isUserHidden")).value(),i=_(this.layoutSelectionStoreProvider.getLayoutSelectionStore().getSolutionLGs(g.id)).keys().uniq().value(),j=function(a){return 0===a||i.indexOf(h[a].id)<0};a=_.reject(h,function(a,b){return d.nodeHasAnchorMenu(a)||j(b)}),b=_.filter(h,function(a,b){return d.nodeHasAnchorMenu(a)&&j(b)}),this.removeAnchorsFromMenu(b),this.addAnchorsToMenu(a),c=this.previewService.waitForChanges().then(function(){_.each(h,function(a,b){b>0&&d.menuService.ensureLinkToNodePosition(a,b+e.length-1)})})}else b=this.getChildrenWithAnchor(e),this.removeAnchorsFromMenu(b),c=this.$p.when();return c},a}();angular.module("siteGeneratorBuilderInternal").service("consumerMenu",ConsumerMenu),angular.module("siteGeneratorStaticsConsumerAppInternal").service("tpaPostMessageService",["$window","editorHandlers","tpaPostMessageCommon","applicationState","undoRedo","previewService",function(a,b,c,d,e,f){function g(a){var c=Boolean(b[a.type]);return c}function h(a){return g(a)?["setValue","removeValue","postMessage","setStyleParam","setExternalId"].indexOf(a)>=0:_.startsWith(a,"get")?!1:-1===["closeWindow","isSupported","siteInfo","appIsAlive","registerEventListener","stylesReady"].indexOf(a)}var i=_.debounce(function(){f.waitForChanges().then(function(){e.captureOperation(!0,!1,!1,!0)})},400,{leading:!1,trailing:!0}),j=function(a,c,e){c.compId&&"tpaSettings"!==c.compId||_.merge(c,{compId:d.getSelectedTpaComponentRef().id}),g(c)?b[c.type].call(this,a,c,e):(_.merge(c,{originFrame:"editor"}),a.tpa.handlers(c,e)),h(c.type)&&i()},k=function(b){a.addEventListener("message",c.handleTPAMessage.bind(this,b,j),!1)};return{init:k,callHandler:j}}]),angular.module("siteGeneratorStaticsConsumerAppInternal").service("tpaPostMessageCommon",function(){var a={TPA_MESSAGE:"TPA",TPA_MESSAGE2:"TPA2",TPA_RESPONSE:"TPA_RESPONSE",UI_LIB_RESPONSE:"UI_LIB_RESPONSE",PINGPONG_PREFIX:"pingpong:"},b=function(a,b,c){if(!_.isUndefined(a)){var d="";try{d=JSON.stringify(b)}catch(e){return}a.postMessage||(a=a.contentWindow),a.postMessage(d,c||"*")}},c=function(c,d){var e=["openColorPicker","openFontPicker"],f=a.TPA_RESPONSE;return _.includes(e,d.type)&&(f=a.UI_LIB_RESPONSE),function(a){try{b(c,{intent:f,callId:d.callId,type:d.type,res:a,status:!0})}catch(e){}}},d=function(b){return(b.intent===a.TPA_MESSAGE||b.intent===a.TPA_MESSAGE2)&&!e(b)},e=function(a){return"[UNKNOWN]"===a.compId},f=function(b){return b.replace(a.PINGPONG_PREFIX,"")},g=function(a,b,e){var f;try{e.data?f=JSON.parse(e.data):e.originalEvent&&e.originalEvent.data&&(e=e.originalEvent,f=JSON.parse(e.data))}catch(g){return}f&&d(f)&&b(a,f,c(e.source,f))};return{Intents:a,callPostMessage:b,generateResponseFunction:c,isTPAMessage:d,fixOldPingPongMessageType:f,handleTPAMessage:g}}),angular.module("siteGeneratorStaticsConsumerAppInternal").service("tpaStyleService",function(){var a=null,b={},c=function(c){if(b[a]){var d=[],f=[],g=a;_.forEach(b[g],function(a){d.push(a.data),f.push(a.callback)}),delete b[g],a=null,e(c,g,d,f)}else a=null},d=function(a,b){_.isArray(a)?_.forEach(a,function(a){a&&a(b)}):a&&a(b)},e=function(e,f,g,h){return a===f?(b[f]||(b[f]=[]),void b[f].push({data:g,callback:h})):(e.tpa.style.setStyleParam(f,g,function(a){d(h,a)}),e.waitForChangesApplied(c.bind(null,e)),void(a=f))};return{setStyleParam:e}}),angular.module("siteGeneratorStaticsConsumerAppInternal").service("editorHandlers",["undoRedo","modelTree","CONSUMER_DIALOGS","$log","CcDialogBuilder","tpaSettings","applicationState","tpaStyleService","tpaService",function(a,b,c,d,e,f,g,h,i){function j(a){return a.components.data.get(g.getSelectedTpaComponentRef())}function k(a,c){var d;return b.getPagesNodes().some(function(e){return b.getTpaWidgetsInPage(e,c).some(function(b){return b.widgetRef.id===a?(d=b,!0):void 0})}),d}function l(a,b,c){var d=k(b.compId,"ProGallery_Widget");c(d?!(!d.dockToWidget||!d.dockToWidget.fullWidth):null)}function m(a){var b={vw:0,px:0};if(a=(a||"").trim()){var c=parseInt(a,10),d=a.substr(c.toString().length);"%"===d&&(d="vw"),b[d]=c}return b}function n(b,c,e){var f=k(c.compId,"ProGallery_Widget");f?(f.dockToWidget={fullWidth:!!_.get(c,"data.stretch"),margins:{left:m(c.data.options&&c.data.options.margins&&c.data.options.margins.left),right:m(c.data.options&&c.data.options.margins&&c.data.options.margins.right)}},d.info("progallery dock state change",f.dockToWidget.fullWidth,f.dockToWidget.margins.left,f.dockToWidget.margins.right),i.updateStyle(f,function(){a.captureOperation(),e(!0)})):e(!1)}var o=function(a,b,c){c(a.tpa.style.get(b.compId))},p=function(a,b,c){var d=a.components.get.byId(b.compId);a.tpa.data.set(d,b.data.key,b.data.value,b.data.scope,c)},q=function(a,b,c){if(b.data.scope===a.tpa.data.SCOPE.APP){var d=j(a);a.tpa.data.app.get(d.applicationId,b.data.key,c)}else{var e=a.components.get.byId(b.compId);a.tpa.data.comp.get(e,b.data.key,c)}},r=function(a,b,c){var d=a.components.get.byId(b.compId);a.tpa.data.remove(d,b.data.key,b.data.scope,c)},s=function(a,b,c){if(b.data.scope===a.tpa.data.SCOPE.APP){var d=j(a);a.tpa.data.app.getMulti(d.applicationId,b.data.keys,c)}else{var e=a.components.get.byId(b.compId);a.tpa.data.comp.getMulti(e,b.data.keys,c)}},t=function(a,b){var c=j(a);c&&a.tpa.change.trigger.settingsUpdated(c.applicationId,b.data.compId,b.data.message)},u=function(a,b,c){h.setStyleParam(a,b.compId,b.data,c),a.tpa.style.setParamOldSDK(b.compId,b.data)},v=function(a,b,c){c(a.tpa.style.get(b.compId))},w=function(a,b,c){var d=a.components.get.byId(b.compId);a.tpa.comp.setExternalId(d,b.data.externalId,c)},x=function(a,b,c){var d=a.components.get.byId(b.compId),e=a.tpa.comp.getExternalId(d);c(e)},y=function(a,b,c,d){d=d||{};var e=_.assign(_.pick(b,["name","appIcon","colorSvgIcon","packages","features","price","upgradeBenefits","upgradeTitle","upgradedToYearly","appDefinitionId"]),_.pick(c,"vendorProductId"));e.packages=_.reject(b.packages,{id:"oneTime"});var f={appDefId:c.appDefinitionId,referralAdditionalInfo:d.origin};return e.upgradeUrl=a.tpa.billing.getSiteUpgradeUrl(f),e},z=function(a,b,c,d){A(a,b,c,d)},A=function(a,b,c,d){a.tpa.appMarket.getDataAsync(b).then(function(b){var e=y(a,b,d);c(e.upgradeUrl)})},B=function(a,b,c){var d=a.components.data.get(a.components.get.byId(b.compId)),e=a.tpa.app.getData(d.applicationId);a.tpa.app.hasPremiumOffering(e.applicationId)&&z(a,e.appDefinitionId,c,e)},C=function(a,b){f.closeSettings(b.data.message)},D=function(a){var b=_.get(a,["data","eventData","url"]);b?e.showSupportIframe(b,c.TPA_HELP):d.info("tpa sent onHelp with invalid data")},E=function(a,b){var c=_.get(b,["compId"]);if(c){var e=a.components.get.byId(c),f=a.components.data.get(e);i.openManageForApp(f.applicationId,_.get(b,["data","eventData","state"]))}else d.info("tpa sent onManage with invalid data")},F=function(a,b){switch(_.get(b,["data","eventKey"])){case"TPA_PUB_SUB_OB_ON_HELP":D(b);break;case"TPA_PUB_SUB_OB_ON_MANAGE":E(a,b)}};return{isFullWidth:l,setFullWidth:n,setValue:p,removeValue:r,getValue:q,getValues:s,openBillingPage:_.noop(),trackAppUpgrade:_.noop(),getWixUpgradeUrl:B,postMessage:t,openMediaDialog:_.noop(),superAppsOpenMediaDialog:_.noop(),setStyleParam:u,appIsAlive:v,stylesReady:_.noop(),getDashboardAppUrl:_.noop(),setWindowPlacement:_.noop(),getWindowPlacement:_.noop(),settingsOpenModal:_.noop(),addComponent:_.noop(),setExternalId:w,getExternalId:x,openReviewInfo:_.noop(),closeWindow:C,publish:F,getStyleByCompId:o}}]);var TpaSettings=function(){function a(b,c,d,e,f,g,h,i,j,k,l,m,n,o,p,q,r){var s=this;this.$rootScope=b,this.$mdDialog=c,this.$translate=d,this.$window=e,this.$timeout=f,this.miscUtils=g,this.applicationState=h,this.applicationParameters=i,this.consumerBiLogger=j,this.consumerBiLoggerHelpers=k,this.CcDialogBuilder=l,this.tpaService=m,this.tpaUrlBuilder=n,this.osUtils=o,this.storyServices=p,this.clientTopology=q,this.flags=r,this.handlePostMessages=function(a){if("Stores"===s.tpaType&&/^(http|https):\/\/(\w+\.)?wix\.com/.test(a.origin)&&a&&a.data)try{var b=JSON.parse(a.data);90===b.callId&&($("md-dialog").find("iframe").trigger("resize"),s.ShowHideDialog(!0))}catch(c){console.log(c)}},this.ShowHideDialog=function(b){b?$(document.body).removeClass(a.BODY_HIDE_DIALOG):$(document.body).addClass(a.BODY_HIDE_DIALOG)},this.registerTpaHandlers=function(b,c){return s.tpaService.registerTpaOpener(b,function(d){return s.$rootScope.$apply(function(){s.consumerBiLogger.apps.clickOnManageApp(a.SETTINGS_PANEL_ORIGIN,s.tpaService.getAppIdByType(b),b),s.openManagement(a.SETTINGS_PANEL_ORIGIN,c,b,d)})})},this.isFullScreen=function(b){return b&&a.MANAGE_FULL_SCREEN_TYPES.indexOf(b.contentElementType)>=0},this.closeManagement=function(){return s.$mdDialog.hide()},this.closeSettings=function(){return s.applicationState.goToBuilder()},m.registerTpaManagementCallback(a.TPA_EVENT_CLOSE_WINDOW,function(){return s.closeManagement()}),this.osUtils.isIE&&this.$window.addEventListener("message",this.handlePostMessages,!1)}return a.$inject=["$rootScope","$mdDialog","$translate","$window","$timeout","miscUtils","applicationState","applicationParameters","consumerBiLogger","consumerBiLoggerHelpers","CcDialogBuilder","tpaService","tpaUrlBuilder","osUtils","storyServices","clientTopology","flags"],a.prototype.openManagement=function(a,b,c,d){var e=this;void 0===d&&(d=""),this.osUtils.isIE&&(this.tpaType=c,this.updateTpaState()),this.isFullScreen(b)&&this.applicationState.setSelectedTpaComponentRef(b.widgetRef),this.applicationParameters.tpaTypes[c].closeSettingsPanelWhenManaging&&this.applicationState.goToBuilder(),this.applicationParameters.updateCurrentlyManaged(c);var f=this.buildManagementUrl(c,b,a,d);this.$mdDialog.show(this.getManageDialogOptions(b,c,f))["finally"](function(){return e.onDialogClosed(c)})},a.prototype.buildManagementUrl=function(b,c,d,e){var f=d===a.SETTINGS_PANEL_ORIGIN?SdkBIEventType.Settings:d===a.SECTION_ORIGIN?SdkBIEventType.Manage:SdkBIEventType.Topbar,g=this.tpaUrlBuilder.getManagementUrl(b,c,d)+e;return this.consumerBiLoggerHelpers.addSDKJsonForBiEvent(g,this.tpaService.getAppIdByType(b),f)},a.prototype.onDialogClosed=function(b){this.tpaService.managementPanelClosed(b),this.storyServices.reRender(),this.$rootScope.$emit(a.TPA_EVENT_CLOSE_WINDOW)},a.prototype.updateTpaState=function(){"Stores"===this.tpaType?this.ShowHideDialog(!1):this.ShowHideDialog(!0)},a.prototype.getManageDialogOptions=function(a,b,c){var d=this,e=this.$translate("builder.manage-tpa",{TPA:b}),f=this.miscUtils.translateIfPossible("builder.manage-tpa-"+b)||e;return{autoWrap:!1,hasBackdrop:!0,fullscreen:!0,templateUrl:"views/editor/tpa-manage-dialog.html",locals:{manageUrl:c,title:f,type:b&&b.toLowerCase(),fullScreen:this.isFullScreen(a),close:function(){return d.$mdDialog.hide()},help:function(){var a=d.$translate("help.tpa."+b);d.CcDialogBuilder.showSupportIframe(a,CONSUMER_DIALOGS.TPA_HELP)}},controllerAs:"$ctrl",bindToController:!0,controller:angular.noop}},a}();TpaSettings.MANAGE_FULL_SCREEN_TYPES=["ProGallery_Widget"],TpaSettings.TPA_EVENT_CLOSE_WINDOW="closeWindow",TpaSettings.SETTINGS_PANEL_ORIGIN="settings-panel",TpaSettings.SECTION_ORIGIN="ADI-section",TpaSettings.BODY_HIDE_DIALOG="body-hide-dialog",angular.module("siteGeneratorBuilderInternal").service("tpaSettings",TpaSettings);var StaticsUrls=function(){function a(a,b,c){this.wixAngularTopology=a,this.$translate=b,this.consumerBiLoggerHelpers=c,this.MEDIA_GALLERY_CSS_URL=this.wixAngularTopology.staticsUrl+"/styles/media-gallery-customize.css"}return a.$inject=["wixAngularTopology","$translate","consumerBiLoggerHelpers"],Object.defineProperty(a.prototype,"mediaGalleryCssUrl",{get:function(){return this.MEDIA_GALLERY_CSS_URL},enumerable:!0,configurable:!0}),a.prototype.getSeoWizUrl=function(a){var b=this.consumerBiLoggerHelpers.getMetaSiteId();return this.$translate("builder.url.seo-wiz",{msid:b,referral:a})},a}();angular.module("siteGeneratorCommon").service("staticsUrls",StaticsUrls);var TPADiscovery=function(){function a(a,b,c,d,e,f,g){var h=this;this.$translate=a,this.applicationParameters=b,this.sitePartTypes=c,this.modelTree=d,this.tpaService=e,this.menuService=f,this.storyServices=g,this.isDirty=!1,this.toTPADictionary=this._toTPADictionary.bind(this),this.deleteUnmanageableTPAs=this._deleteUnmanageableTPAs.bind(this),this.toManageableTPATuple=this._toManageableTPATuple.bind(this),this._manageableTPAs={},this.storyServices.onRenderedPart(function(a,b,c,d,e){b===h.sitePartTypes.BODY&&(h.isDirty=!0)})}return a.$inject=["$translate","applicationParameters","sitePartTypes","modelTree","tpaService","menuService","storyServices"],Object.defineProperty(a.prototype,"manageableTPAs",{get:function(){return this.isDirty&&(this.updateAvailableTPAs(),this.isDirty=!1),this._manageableTPAs},enumerable:!0,configurable:!0}),a.prototype.updateAvailableTPAs=function(){this._manageableTPAs=_(this.getAllTPANodes()).mapKeys(this.toTPADictionary).each(this.deleteUnmanageableTPAs).mapValues(this.toManageableTPATuple).value()},a.prototype._toTPADictionary=function(a){return this.tpaService.getNaiveType(a.contentElementType)},a.prototype._deleteUnmanageableTPAs=function(a,b,c){this.applicationParameters.tpaTypes[b].topBarTitle||delete c[b]},a.prototype._toManageableTPATuple=function(a,b){return{naiveNode:a,menuItem:this.getTpaMenuItem(this.applicationParameters.tpaTypes[b])}},a.prototype.getAllTPANodes=function(){var a=[];return _.each(this.modelTree.getPagesNodes(),function(b){b&&b.children&&(a=b.children.filter(function(a){return!a.userHidden&&a.isTpa||a.isTpaWidget}).concat(a))}),a},a.prototype.getTpaMenuItem=function(a){return{title:this.$translate("builder.manage-tpa",{TPA:a.topBarTitle}),nameAsObject:a.topBarTitle,icon:a.icon}},a}();angular.module("siteGeneratorBuilderInternal").service("tpaDiscovery",TPADiscovery);var ListSpanUtils=function(){function a(){}return a.prototype.ceHasPresets=function(a){return-1===["Stores_Shopping_Cart_Widget","Stores_Thank_You_Widget","Blog_Single_Post_Widget"].indexOf(a)},a}();angular.module("siteGeneratorBuilderInternal").service("listSpanUtils",ListSpanUtils);var Validation=function(){function a(a){this.$translate=a}return a.$inject=["$translate"],a.prototype.isEmail=function(a){var b=new RegExp(this.$translate("regex.email_format"));return _.isString(a)&&b.test(a)},a.prototype.isPhone=function(a){var b=/^[ \(\)\-\+\d]+$/;return _.isString(a)&&b.test(a)},a.prototype.isUrl=function(a){var b=/^(?:(?:https?|ftp):\/\/)?(?:(?!10(?:\.\d{1,3}){3})(?!127(?:\.\d{1,3}){3})(?!169\.254(?:\.\d{1,3}){2})(?!192\.168(?:\.\d{1,3}){2})(?!172\.(?:1[6-9]|2\d|3[0-1])(?:\.\d{1,3}){2})(?:[1-9]\d?|1\d\d|2[01]\d|22[0-3])(?:\.(?:1?\d{1,2}|2[0-4]\d|25[0-5])){2}(?:\.(?:[1-9]\d?|1\d\d|2[0-4]\d|25[0-4]))|(?:(?:[a-z0-9]+-?)*[a-z0-9]+)(?:\.(?:[a-z0-9]+-?)*[a-z0-9]+)*(?:\.(?:[a-z]{2,4})))(?::\d{2,5})?(?:\/[-\w:@&?=+,.!\/~*'%$_;]*)?$/i;return _.isString(a)&&b.test(a)},a.prototype.isWebsite=function(a){var b=new RegExp("^(http[s]?://|www.)(?:\\S+(?::\\S*)?@)?(?:(?!(?:10|127)(?:\\.\\d{1,3}){3})(?!(?:169\\.254|192\\.168)(?:\\.\\d{1,3}){2})(?!172\\.(?:1[6-9]|2\\d|3[0-1])(?:\\.\\d{1,3}){2})(?:[1-9]\\d?|1\\d\\d|2[01]\\d|22[0-3])(?:\\.(?:1?\\d{1,2}|2[0-4]\\d|25[0-5])){2}(?:\\.(?:[1-9]\\d?|1\\d\\d|2[0-4]\\d|25[0-4]))|(?:(?:[a-z\\u00a1-\\uffff0-9]-*)*[a-z\\u00a1-\\uffff0-9]+)(?:\\.(?:[a-z\\u00a1-\\uffff0-9]-*)*[a-z\\u00a1-\\uffff0-9]+)*(?:\\.(?:[a-zA-Z\\u00a1-\\uffff]{2,}))\\.?)(?::\\d{2,5})?(?:[/?#]\\S*)?$","i");return a&&!a.startsWith("http")&&(a="http://"+a),!a||b.test(a)},a}();angular.module("siteGeneratorStaticsConsumerAppInternal").service("validation",Validation);var SocialLinksValidator=function(){function a(a,b,c){this.siteModelData=a,this.modelTree=b,this.storyServices=c,this.defaultSocialLinks=this.getDefaultSocialValues()}return a.$inject=["siteModelData","modelTree","storyServices"],a.prototype.validateSocialLink=function(a){if(!a||!(a.url||a.data&&a.data.link))return!1;var b=a.url||a.data.link;if(a.invalidDefaultURL=!1,!SocialLinkManager.urlValidation.exec(b))return!1;var c=-1===this.getDefaultSocialLinksArray().indexOf(b);return c||(a.invalidDefaultURL=!0),c},a.prototype.getDefaultSocialLinksArray=function(){return this.defaultSocialLinks},a.prototype.getDefaultSocialValues=function(){var a=_.find(this.modelTree.data.children,{contentElementType:"Social"}),b=this.siteModelData.getDefaultValues(a,this.storyServices.story);return b?b.SocialButtons.map(function(a){return a.Link.targetUrl}):[]},a}();angular.module("siteGeneratorBuilderInternal").service("socialLinksValidator",SocialLinksValidator);var DesignKitManager=function(){function a(a,b,c,d,e,f,g,h,i,j,k,l,m,n,o){this.themeChooser=a,this.undoRedo=b,this.modelTree=c,this.spinnerService=d,this.$q=e,this.flags=f,this.colorationUtils=g,this.fontCustomizationService=h,this.fontUtils=i,this.animationKit=j,this.animationUtils=k,this.backgroundScrollService=l,this.pagesManager=m,this.layoutSelectionStoreProvider=n,this.defaultBackground=o,this.animationPatterns=this.animationKit.getPatternsOptions()}return a.$inject=["themeChooser","undoRedo","modelTree","spinnerService","$q","flags","colorationUtils","fontCustomizationService","fontUtils","animationKit","animationUtils","backgroundScrollService","pagesManager","layoutSelectionStoreProvider","defaultBackground"],a.prototype.setActiveMainKit=function(a){var b=this;return this.flags.debugHeaderFooterColoration&&this.deleteHeaderAndFooterBackgroundsFromLss(),this.modelTree.dirtifyAllPages(),this.fontCustomizationService.resetFontSize(),this.spinnerService.waitForMe("setActiveKit"),this.colorationUtils.initialize().then(function(){return b.themeChooser.setThemeByID({color:a,font:a})}).then(function(){return b.flags.sectionBackground?b.defaultBackground.resetToDefaultBackground():void 0}).then(function(){b.themeChooser.serializeMainKitSelection(a),b.themeChooser.serializeColorKitSelection(),b.themeChooser.serializeFontKitSelection(),b.colorationUtils.resetColoration(),b.resetAnimations(),b.undoRedo.captureOperation(!1,!0)})["finally"](function(){return b.spinnerService.imDone("setActiveKit")})},a.prototype.getPaletteColors=function(){return this.colorationUtils.getPaletteColors()},a.prototype.getActiveFontTheme=function(){return this.themeChooser.getActiveFontTheme()},a.prototype.getActiveFontThemeAsThumbnail=function(){return this.fontUtils.convertFontDataToThumbnail(this.getActiveFontTheme())},a.prototype.getActiveTheme=function(){return this.themeChooser.getActiveTheme("mainKit")},a.prototype.getActiveAnimationPatterns=function(){return _.find(this.animationPatterns,{id:this.animationUtils.getActivePatternForSite()})},a.prototype.getDefaultAnimationPatterns=function(){return _.find(this.animationPatterns,{id:this.animationUtils.getDefaultSiteAnimation()})},a.prototype.deleteHeaderAndFooterBackgroundsFromLss=function(){var a=this.layoutSelectionStoreProvider.getLayoutSelectionStore(),b=a.siteOverrides;b&&(delete b.headerBackground,delete b.footerBackground)},a.prototype.isKitOveridden=function(){var a=this.getActiveTheme(),b=!this.isActiveFontKit(a),c=this.fontCustomizationService.getFontSizeAllSite(),d=!this.isActiveColorKit(a),e=this.isKitColorationOverriden(),f=!this.isKitAnimationChanged(),g=this.isScrollEffectNotDefault(),h=this.pagesManager.getPagesTransition()!==this.pagesManager.getDefaultPagesTransition();return c||b||d||e||f||g||h},a.prototype.getActiveKitDefaultColors=function(){return this.themeChooser.coloration.getActiveKitDefaultColors()},a.prototype.isActiveFontKit=function(a){return this.themeChooser.getChosenFonts().font_0.themeId===a.id},a.prototype.isActiveColorKit=function(a){return this.themeChooser.getActiveTheme("color")===a},a.prototype.isKitColorationOverriden=function(){return this.colorationUtils.isColorationModeOverriden()||this.colorationUtils.areKitColorsOverriden()},a.prototype.isKitAnimationChanged=function(){var a=this.getActiveAnimationPatterns(),b=this.getDefaultAnimationPatterns();return a.label===b.label},a.prototype.isScrollEffectNotDefault=function(){return this.backgroundScrollService.getSiteOverride()!==this.backgroundScrollService.getDefaultScrollType()},a.prototype.resetAnimations=function(){var a=this.animationUtils.getDefaultSiteAnimation();this.animationUtils.setSiteAnimationPattern(a),this.backgroundScrollService.setDefaultScrollType(),this.pagesManager.setDefaultPagesTransition()},a}();angular.module("siteGeneratorBuilderInternal").service("designKitManager",DesignKitManager);var SinglePanel=function(){function a(a,b,c,d,e,f,g,h,i,j,k,l,m,n,o,p,q,r){var s=this;this.$scope=a,this.nodeTitleManager=b,this.consumerBiLogger=c,this.CcDialogBuilder=d,this.$translate=e,this.storyServices=f,this.consumerBiLoggerHelpers=g,this.modelTree=h,this.nodeFetcher=i,this.flags=j,this.menuService=k,this.tipManager=l,this.sectionBackgroundManager=m,this.applicationState=n,this.$element=o,this.editorEventManager=p,this.slideShowService=q,this.$timeout=r,this.flags.sectionBackground&&this.isItemSupportBackground?this.background=this.sectionBackgroundManager.getSelectedBackgroundAsThumbnail():this.background=null;var t;a.$watch("$ctrl.node",function(){try{var a=s.nodeFetcher.getNode(s.node.id);t=ListPanel.filterChildren(a.parent.children),s.currentItem=t.indexOf(s.node)+1,s.totalItems=t.length}catch(b){s.currentItem=1,s.totalItems=1}if(s.flags.listItemSlideShow&&s.node.isListItem){var c=t.filter(function(a){return!a.userHidden}).indexOf(s.node);c>-1&&s.slideShowService.navigateToSlide(s.node.identifyingNodeId,c)}s.isItem?(s.consumerBiLoggerHelpers.openedPanelStack.push("list item"),s.consumerBiLogger.contentEditor.panelIsLoaded(s.node.getId(),s.node.getSpecificContentElementType(),s.node.alias,s.consumerBiLoggerHelpers.popPanelSource())):(s.consumerBiLoggerHelpers.mainPanelLoggedWithNodeId!==s.node.id&&(s.consumerBiLoggerHelpers.openedPanelStack.push("main"),s.consumerBiLogger.contentEditor.panelIsLoaded(s.node.getId(),s.node.getSpecificContentElementType(),s.node.alias,s.consumerBiLoggerHelpers.popPanelSource())),s.consumerBiLoggerHelpers.mainPanelLoggedWithNodeId=s.node.id)}),a.$watch("$ctrl.currentItem",function(a,b){if(void 0!==s.currentItem&&a!==b){s.consumerBiLoggerHelpers.setPanelSource("navigate item");var c=t[s.currentItem-1];s.editorEventManager.editListItem({id:c.id,label:s.nodeTitleManager.getNodeTitleValue(c),hidden:c.isUserHidden()})}})}return a.$inject=["$scope","nodeTitleManager","consumerBiLogger","CcDialogBuilder","$translate","storyServices","consumerBiLoggerHelpers","modelTree","nodeFetcher","flags","menuService","tipManager","sectionBackgroundManager","applicationState","$element","editorEventManager","slideShowService","$timeout"],Object.defineProperty(a.prototype,"title",{get:function(){return this.nodeTitleManager.getNodeTitle(this.node)},enumerable:!0,configurable:!0}),Object.defineProperty(a.prototype,"contentElement",{get:function(){return this.node.contentElement},enumerable:!0,configurable:!0}),Object.defineProperty(a.prototype,"isHeader",{get:function(){return"GeneralDescription"===this.node.contentElementType&&"footer"!==this.node.containerPageId},enumerable:!0,configurable:!0}),Object.defineProperty(a.prototype,"isFooter",{get:function(){return"GeneralDescription"===this.node.contentElementType&&"footer"===this.node.containerPageId},enumerable:!0,configurable:!0}),Object.defineProperty(a.prototype,"isNested",{get:function(){return this.isItem},enumerable:!0,configurable:!0}),a.prototype.closeSinglePanel=function(){this.isItem?(this.consumerBiLogger.contentEditor.panelClosed(this.node.getId(),this.node.getSpecificContentElementType(),this.node.alias),this.consumerBiLoggerHelpers.openedPanelStack.pop()):(void 0!==this.consumerBiLoggerHelpers.mainPanelLoggedWithNodeId&&(this.consumerBiLogger.contentEditor.panelClosed(this.node.getId(),this.node.getSpecificContentElementType(),this.node.alias),this.consumerBiLoggerHelpers.openedPanelStack.pop()),this.consumerBiLoggerHelpers.mainPanelLoggedWithNodeId=void 0),this.editorEventManager.closePanel(this.node.id),this.applicationState.clearContentFocus()},a.prototype.openSinglePanelHelp=function(){var a="help.section.edit("+this.node.contentElementType+")",b=this.$translate(a);(b===a||""===b)&&(b=this.node.isListItem||this.node.nodeDescription.isListItem?this.$translate("help.section.editListItem"):this.$translate("help.section.editSection")),this.isFooter&&(b=this.$translate("help.section.edit(Footer)")),this.CcDialogBuilder.showSupportIframe(b,CONSUMER_DIALOGS.SINGLE_PANEL_HELP)},a.prototype.showNameInMenuEditor=function(){return this.modelTree.isSiteMenuVisible()&&null!==this.menuService.getLinkToNode(this.node)&&!this.applicationState.isInMobileEditMode()},a.prototype.onEditBackground=function(){this.applicationState.goToSectionBackgroundPanel(BIOrigins.ContentPanel)},a.prototype.isShowSectionBackground=function(){return this.flags.sectionBackground&&this.isItemSupportBackground},Object.defineProperty(a.prototype,"isItemSupportBackground",{get:function(){return!this.isHeader&&!this.isFooter&&!this.node.isListItem},enumerable:!0,configurable:!0}),a}();angular.module("siteGeneratorEditorInternal").component("singlePanel",{templateUrl:"views/editor/single-panel.html",controller:SinglePanel,bindings:{node:"=",childId:"=?",onItemToPage:"&?",isItem:"=?"}});var ListPanel=function(){function a(a,b,c,d,e,f,g,h,i,j,k,l,m,n,o,p,q,r,s,t,u,v,w,x,y){var z=this;this.$scope=a,this.$q=b,this.contentManager=c,this.nodeTitleManager=d,this.simpleSolutionManager=e,this.nodeManipulationService=f,this.storyServices=g,this.sectionManager=h,this.undoRedo=i,this.spinnerService=j,this.consumerBiLoggerHelpers=k,this.consumerBiLogger=l,this.notification=m,this.CcDialogBuilder=n,this.$translate=o,this.flags=p,this.menuService=q,this.modelTree=r,this.sectionBackgroundManager=s,this.applicationState=t,this.onstageActionsManager=u,this.ONSTAGE_EVENTS=v,this.editorEventManager=w,this.listPanelManager=x,this.pubSub=y,this.listItems=[],this.onAnyFieldToggle=function(){z.setBackground()},this.pageId=this.storyServices.story.selectedPage,this.setBackground(),this.watchListItems(),this.consumerBiLoggerHelpers.mainPanelLoggedWithNodeId!==this.node.id&&(this.consumerBiLoggerHelpers.openedPanelStack.push("main"),this.consumerBiLogger.contentEditor.panelIsLoaded(this.node.getId(),this.node.getSpecificContentElementType(),this.node.alias,this.consumerBiLoggerHelpers.popPanelSource())),this.consumerBiLoggerHelpers.mainPanelLoggedWithNodeId=this.node.id,this.flags.onStageIndications&&(this.unsubscribers=[y.subscribe(PubSub.events.LIST_ITEMS_UPDATED,this.refreshListItems.bind(this))])}return a.$inject=["$scope","$q","contentManager","nodeTitleManager","simpleSolutionManager","nodeManipulationService","storyServices","sectionManager","undoRedo","spinnerService","consumerBiLoggerHelpers","consumerBiLogger","notification","CcDialogBuilder","$translate","flags","menuService","modelTree","sectionBackgroundManager","applicationState","onstageActionsManager","ONSTAGE_EVENTS","editorEventManager","listPanelManager","pubSub"],a.prototype.$onDestroy=function(){this.flags.onStageIndications&&this.unsubscribers.forEach(function(a){return a()})},a.prototype.setBackground=function(){this.background=this.sectionBackgroundManager.getSelectedBackgroundAsThumbnail()},Object.defineProperty(a.prototype,"title",{get:function(){return this.nodeTitleManager.getNodeTitle(this.node)},enumerable:!0,configurable:!0}),Object.defineProperty(a.prototype,"header",{get:function(){return _.find(this.node.children,function(a){return"ListHeader"===a.getContentElementType()})},enumerable:!0,configurable:!0}),Object.defineProperty(a.prototype,"footer",{get:function(){return _.find(this.node.children,function(a){return"ListFooter"===a.getContentElementType()})},enumerable:!0,configurable:!0}),Object.defineProperty(a.prototype,"showHeader",{get:function(){return"undefined"!=typeof this.header},enumerable:!0,configurable:!0}),
Object.defineProperty(a.prototype,"showFooter",{get:function(){return"undefined"!=typeof this.footer},enumerable:!0,configurable:!0}),a.prototype.watchListItems=function(){var a=this;this.$scope.$watch(this.node.children,function(){return a.refreshListItems()})},a.prototype.refreshListItems=function(){this.listItems=this.createListItems()},a.prototype.createListItems=function(){var b=this;return a.filterChildren(this.node.children).map(function(a){return b.generateItem(a)})},a.prototype.generateItem=function(a){return this.flags.onStageIndications?this.listPanelManager.generateItem(a):{id:a.id,label:this.nodeTitleManager.getNodeTitleValue(a),hidden:a.isUserHidden()}},a.prototype.getRealItem=function(a){return _.find(this.node.children,function(b){return b.id===a.id})},a.filterChildren=function(a){return _.filter(a,function(a){return"ListHeader"!==a.getContentElementType()&&"ListFooter"!==a.getContentElementType()&&"HomePageTeaser"!==a.getContentElementType()})},a.prototype.addListItem=function(a,b,c,d){var e=this;return this.sectionManager.addListItem(this.node,a,b).then(function(){e.handleAfterUpdateList(c,d),e.consumerBiLogger.contentEditor.addDuplicateItemSuccess(e.node.getId(),e.node.getSpecificContentElementType(),e.node.alias,"onAdd"===d?"new":"duplicate")})},a.prototype.removeListItem=function(a,b,c,d){var e=this,f=this.$q.when(),g="onDelete"!==c||!d.userHidden;return g&&(f=this.sectionManager.removeListItem(this.node,d,a)),f.then(function(){e.handleAfterUpdateList(b,c)})},a.prototype.handleAfterUpdateList=function(a,b){this.refreshListItems(),this.undoRedo.captureOperation(!1),a&&this.notification.show(a,2e3),this.spinnerService.imDone(b)},a.prototype.realIndexAndStatus=function(a){var b=this.getRealItem(a),c=this.nodeManipulationService.nodeIndexAndStatus(this.node,b);if(!c)throw"cannot toggle a non list item from this flow";return c.childNode=b,c},a.prototype.itemToPage=function(a){this.editorEventManager.itemToPage(a)},a.prototype.onEdit=function(a){this.consumerBiLoggerHelpers.setPanelSource("click edit in menu"),this.editorEventManager.editListItem(a)},a.prototype.onAdd=function(){this.consumerBiLogger.contentEditor.clickOnAddDuplicateItemInAList(this.node.getId(),this.node.getSpecificContentElementType(),this.node.alias,"new");var a=this.createNewCEDraft(),b=this.createNewNodeFromCE(a);this.spinnerService.waitForMe("onAdd"),this.addListItem(b,void 0,"toasters.list-item-added","onAdd")},a.prototype.createNewNodeFromCE=function(a){var b=this.nodeManipulationService.addNodeToList(this.node);return _.each(a.values,function(a,c){return b.contentElement.values[c]=a}),b},a.prototype.getSectionSuggestionByNode=function(a){var b=this,c={rawSectionBrief:{id:this.node.alias,ceType:this.node.getContentElementType(),cardinality:2}},d=this.contentManager.suggestedSections().suggestions,e=d&&d.find(function(a){return a.id===b.node.alias});return e&&e.rawSectionBrief.cardinality>1&&(c.rawSectionBrief.item=e.rawSectionBrief.item),c},a.prototype.createNewCEDraft=function(){var a=this.getSectionSuggestionByNode(this.node),b=this.modelTree.getListItems(this.node).length,c=this.contentManager.prepareDrafts(a,1,b);return c[0].items[0]},a.prototype.onDuplicate=function(a){var b=this;if(this.flags.onStageIndications)this.listPanelManager.onDuplicate(a,!0).then(function(){b.refreshListItems()});else{this.consumerBiLogger.contentEditor.clickOnAddDuplicateItemInAList(this.node.getId(),this.node.getSpecificContentElementType(),this.node.alias,"duplicate");var c=this.realIndexAndStatus(a);this.spinnerService.waitForMe("onDuplicate");var d=this.node.children.length;this.node.children[d-1].isListFooter()&&d--;var e=this.modelTree.duplicateListItem(c.childNode,this.node,d);this.addListItem(e,d,"toasters.list-item-duplicated","onDuplicate")}},a.prototype.getVisibleItems=function(){var a=this.node.getContentElementType(),b=_.filter(this.node.children,function(b){return b.getContentElementType()===a&&!b.userHidden});return b},a.prototype.onDelete=function(a){var b=this;if(this.flags.onStageIndications)this.listPanelManager.onDelete(a).then(function(){b.refreshListItems()});else{var c=this.getVisibleItems();if(1===c.length&&c[0].getId()===a.id)this.sectionManager.showDeleteSectionPopup(this.node,"hide-or-delete-all-elements");else{var d=this.realIndexAndStatus(a),e={heading:this.$translate("popups.delete-list-item.heading"),text:this.$translate("popups.delete-list-item.text"),acceptButtonText:this.$translate("general.delete"),rejectButtonText:this.$translate("general.cancel"),icon:"delete-single.gif",biDialogName:CONSUMER_DIALOGS.CONFIRM_DELETE_LIST_ITEM},f=this.CcDialogBuilder.showNegativeConfirmation(e);f.then(function(){b.spinnerService.waitForMe("onDelete");var a=b;b.nodeManipulationService.deleteNode(d.childNode,b.pageId,!1,function(){b.removeListItem(d.indexInVisibleItemsIgnoringHeader,null,"onDelete",d.childNode).then(function(){b.notification.show("toasters.list-item-deleted","general.undo",function(){a.undoRedo.undo()}),b.consumerBiLogger.contentEditor.valueWasDeleted(b.node.getId(),b.node.getSpecificContentElementType(),b.node.alias,"list","list item")})})})}}},a.prototype.onToggle=function(a){var b=this;if(this.flags.onStageIndications){var c=this.listPanelManager.onToggle(a,!0);c.then instanceof Function&&c.then(function(){b.refreshListItems()})}else{var d=this.realIndexAndStatus(a);if(this.nodeManipulationService.toggleNodeInlist(this.node,d.childNode),d.shown){var e=this.getVisibleItems();0===e.length?this.sectionManager.showDeleteSectionPopup(this.node,"hide-or-delete-all-elements",function(){b.node.userHidden=!1,d.childNode.userHidden=!1,a.hidden=!1}):(this.spinnerService.waitForMe("onToggleHide"),this.consumerBiLogger.contentEditor.clickOnHideShowOnItemInListItems("hide",this.node.getId(),this.node.getSpecificContentElementType(),this.node.alias),this.removeListItem(d.indexInVisibleItemsIgnoringHeader,"List item hidden","onToggleHide",d.childNode).then(function(){b.consumerBiLogger.contentEditor.clickOnHideShowOnItemInListItemsSuccess("hide",b.node.getId(),b.node.getSpecificContentElementType(),b.node.alias)}))}else this.spinnerService.waitForMe("onToggleShow"),this.consumerBiLogger.contentEditor.clickOnHideShowOnItemInListItems("unhide",this.node.getId(),this.node.getSpecificContentElementType(),this.node.alias),this.addListItem(d.childNode,d.indexInVisibleItemsIgnoringHeader,"List item shown","onToggleShow").then(function(){b.consumerBiLogger.contentEditor.clickOnHideShowOnItemInListItemsSuccess("unhide",b.node.getId(),b.node.getSpecificContentElementType(),b.node.alias)})}},a.prototype.closeListPanel=function(){void 0!==this.consumerBiLoggerHelpers.mainPanelLoggedWithNodeId&&(this.consumerBiLogger.contentEditor.panelClosed(this.node.getId(),this.node.getSpecificContentElementType(),this.node.alias),this.consumerBiLoggerHelpers.openedPanelStack.pop()),this.consumerBiLoggerHelpers.mainPanelLoggedWithNodeId=void 0,this.editorEventManager.closePanel(this.node.id),this.applicationState.clearContentFocus()},a.prototype.onOrderChange=function(a){var b=this;this.consumerBiLogger.contentEditor.reorderItemInAList(this.node.getId(),this.node.getSpecificContentElementType(),this.node.alias);var c=this.createListItems(),d=c[a.fromIndex],e=this.realIndexAndStatus(d),f=_(c).filter({hidden:!1}).collect(function(a){return a.id}).value().join("|"),g=_(this.listItems).filter({hidden:!1}).collect(function(a){return a.id}).value().join("|");if(this.nodeManipulationService.moveListItem(this.node,a.fromIndex,a.toIndex),f!==g){var h=this.realIndexAndStatus(d);this.spinnerService.waitForMe("reorder"),this.simpleSolutionManager.reorderItems(this.pageId,this.node.getId(),e.indexInVisibleItemsIgnoringHeader,h.indexInVisibleItemsIgnoringHeader).then(function(a){var c={direction:b.simpleSolutionManager.Animation.Direction.REVERSE,type:b.simpleSolutionManager.Animation.Type.CROSS_FADE};return b.sectionManager.startAnimatedRender(a,c)}).then(function(){b.refreshListItems(),b.undoRedo.captureOperation(!1),b.spinnerService.imDone("reorder"),b.consumerBiLogger.contentEditor.itemReorderSuccess(b.node.getId(),b.node.getSpecificContentElementType(),b.node.alias)})}},a.prototype.onItemClick=function(a){this.onEdit(a),this.consumerBiLoggerHelpers.setPanelSource("click item in panel")},a.prototype.onItemDoubleClick=function(a){this.onItemClick(a)},a.prototype.openListPanelHelp=function(){this.CcDialogBuilder.showSupportIframe(this.$translate("help.section.editListPageSection"),CONSUMER_DIALOGS.LIST_PANEL_HELP)},a.prototype.showNameInMenuEditor=function(){return this.modelTree.isSiteMenuVisible()&&null!==this.menuService.getLinkToNode(this.node)&&!this.applicationState.isInMobileEditMode()},Object.defineProperty(a.prototype,"isMobileMode",{get:function(){return this.applicationState.isInMobileEditMode()},enumerable:!0,configurable:!0}),a.prototype.onEditHeaderBackground=function(){this.applicationState.goToSectionHeaderBackgroundPanel(BIOrigins.ContentPanel)},a.prototype.onEditListBackground=function(){this.applicationState.goToSectionListBackgroundPanel(BIOrigins.ContentPanel)},a.prototype.isShowSectionBackground=function(){return this.flags.sectionBackground},a}();angular.module("siteGeneratorEditorInternal").component("listPanel",{templateUrl:"views/editor/list-panel.html",controller:ListPanel,bindings:{node:"=",onItemToPage:"&"}});var SocialPanel=function(){function a(a,b,c,d,e,f,g,h,i,j,k,l){var m=this;this.$scope=a,this.introDataFormatter=b,this.modelTree=c,this.CcDialogBuilder=d,this.$translate=e,this.mediaGallery=f,this.consumerBiLoggerHelpers=g,this.consumerBiLogger=h,this.undoRedo=i,this.editorEventManager=j,this.socialLinkManager=k,this.socialLinksValidator=l,this.node=this.modelTree.getNodeByContentElementName("Social"),this.$scope.$watch("$ctrl.node",function(a,b){m.socialLinks=m.extractSocialLinks()}),this.$scope.$watch("$ctrl.socialLinks",_.debounce(function(a,b){a!==b&&m.updateSocialLinks(a)},500),!0),this.consumerBiLoggerHelpers.openedPanelStack.push("social"),this.consumerBiLogger.contentEditor.panelIsLoaded(this.node.getId(),this.node.getSpecificContentElementType(),this.node.alias,this.consumerBiLoggerHelpers.popPanelSource())}return a.$inject=["$scope","introDataFormatter","modelTree","CcDialogBuilder","$translate","mediaGallery","consumerBiLoggerHelpers","consumerBiLogger","undoRedo","editorEventManager","socialLinkManager","socialLinksValidator"],a.prototype.extractSocialLinks=function(){var a=this;return _.map(this.node.contentElement.values.SocialButtons.value,function(b){return{platform:b.platform,url:b.Link.targetUrl,hidden:!!_.get(a.node.hiddenMedia,["icon",a.mediaGallery.getItemId(b)])}})},a.prototype.updateSocialLinks=function(a){var b=this,c=_.get(this.node.contentElement.getValuesByMediaType(),["icon","length"])||0,d=this.introDataFormatter.createSocialButtons(a);this.node.contentElement.values.SocialButtons.value.length=0,this.node.contentElement.values.SocialButtons.value=d,this.node.hiddenMedia.icon={},_.each(d,function(c,d){(a[d].hidden||a[d].platform===b.socialLinkManager.invalidPlatformName)&&(b.node.hiddenMedia.icon[b.mediaGallery.getItemId(c)]=!0)}),this.node.contentElement.fillValuesByMediaType();var e=_.get(this.node.contentElement.getValuesByMediaType(),["icon","length"])||0,f=c>0&&0===e,g=0===c&&e>0,h=f||g;h&&(this.editedNode.getReferenceFields()["Social.SocialButtons"]=g);var i={node:this.editedNode,isReferencedField:!0,key:"Social.SocialButtons",field:this.node.contentElement.values.SocialButtons.value,maskChanged:h,whatChanged:IEditEventType.ValueChange,parent:null};this.editorEventManager.nodeChanged(i),this.undoRedo.captureOperation()},Object.defineProperty(a.prototype,"title",{get:function(){return"SOCIAL"},enumerable:!0,configurable:!0}),a.prototype.closeSocialPanel=function(){this.consumerBiLogger.contentEditor.panelClosed(this.node.getId(),this.node.getSpecificContentElementType(),this.node.alias),this.consumerBiLoggerHelpers.openedPanelStack.pop(),this.editorEventManager.closePanel(NodeEditorManager.SOCIAL_ID)},a.prototype.openSocialPanelHelp=function(){this.CcDialogBuilder.showSupportIframe(this.$translate("help.social.menu"),CONSUMER_DIALOGS.SOCIAL_PANEL_HELP)},a}();angular.module("siteGeneratorEditorInternal").component("socialPanel",{templateUrl:"views/editor/social-panel.html",controller:SocialPanel,bindings:{editedNode:"="}});var SocialPanelInner=function(){function a(a,b,c,d,e){var f=this;this.$scope=a,this.socialLinkManager=b,this.applicationParameters=c,this.modelTree=d,this.consumerBiLogger=e,this.labelFilter=function(a){var b=f.socialLinkManager,c=b.getPlatformNameByUrl(a);if(c&&c!==SocialLinkManager.VALID_CUSTOM_LINK){var d=b.getPlatformRelativePath(a);return"/"===d[0]&&(d=d.substring(1,d.length)),d}return a},this.isDraggable=this.isDraggable!==!1,this.newSocialUrl=""}return a.$inject=["$scope","socialLinkManager","applicationParameters","modelTree","consumerBiLogger"],a.prototype.$onInit=function(){var a=this;this.data.forEach(function(b){b.platform=a.socialLinkManager.getPlatformNameByUrl(b.url)||a.socialLinkManager.invalidPlatformName,b.icon=a.socialLinkManager.getPlatformIconClass(b.platform,!0)})},a.prototype.canAddSocialLink=function(){return this.data.length<this.applicationParameters.maxSocialLinks},a.prototype.onNewPlatform=function(){if(this.canAddSocialLink()){var a=this.newSocialUrl;if(a){var b=this.socialLinkManager.getPlatformNameByUrl(a);this.data.push({platform:b||this.socialLinkManager.invalidPlatformName,url:a,icon:this.socialLinkManager.getPlatformIconClass(b,!0)}),this.newSocialUrl=""}}},a.prototype.removePlatform=function(a){_.pull(this.data,a),this.consumerBiLogger.contentEditor.valueWasDeleted(this.node.getId(),this.node.getSpecificContentElementType(),this.node.alias,"social","link")},a.prototype.onToggle=function(a){this.consumerBiLogger.contentEditor.clickOnHideUnhideComponent(this.node.getId(),this.node.getSpecificContentElementType(),this.node.alias,"social","link",a.hidden?"hide":"unhide","social-panel")},a.prototype.onEdit=function(a){""===a.url?this.removePlatform(a):(a.platform=this.socialLinkManager.getPlatformNameByUrl(a.url)||this.socialLinkManager.invalidPlatformName,a.icon=this.socialLinkManager.getPlatformIconClass(a.platform,!0))},a.prototype.getIconClassForNewSocialUrl=function(){var a=this.socialLinkManager.getPlatformNameByUrl(this.newSocialUrl);return a?this.socialLinkManager.getPlatformIconClass(a):"cc-icon-social-placeholder"},a.prototype.getInvalidtooltipName=function(a){return a.invalidDefaultURL?"intro_card_url_default":"intro_card_url_invalid"},a}();angular.module("siteGeneratorEditorInternal").component("socialPanelInner",{templateUrl:"views/editor/social-panel-inner.html",controller:SocialPanelInner,bindings:{data:"=",isDraggable:"=?",node:"<",noHide:"=?",itemValidator:"&?"}});var __assign=this&&this.__assign||Object.assign||function(a){for(var b,c=1,d=arguments.length;d>c;c++){b=arguments[c];for(var e in b)Object.prototype.hasOwnProperty.call(b,e)&&(a[e]=b[e])}return a},FieldEditor=function(){function a(a,b,c,d,e,f,g,h,i,j,k,l,m,n,o,p,q,r,s,t,u,v,w,x,y,z){var A=this;this.$q=a,this.assistiveMessage=b,this.$scope=c,this.fieldEditorConfiguration=d,this.nodeTitleManager=e,this.$mdDialog=f,this.socialLinkManager=g,this.linkDetailsManager=h,this.consumerBiLogger=i,this.modelTree=j,this.validation=k,this.$translate=l,this.socialLinksValidator=m,this.spinnerService=n,this.storyServices=o,this.mediaOverrideManager=p,this.richTextService=q,this.designKit=r,this.$timeout=s,this.flags=t,this.applicationState=u,this.$element=v,this.osUtils=w,this.domHelpers=x,this.editorEventManager=y,this.pubSub=z,this.updateOnBlur=this.flags.updateOnBlur,this.config={email:{validator:function(a){return A.validation.isEmail(a)},errorMessage:this.$translate("general.email.invalid")}},this.debouncedUpdateViewer=_.debounce(this.updateViewer,this.fieldEditorConfiguration.getDebounceDelay(this.field)),this.flags.onStageIndications?this.unsubscribe=d.isTextType(this.fieldData)&&z.subscribe(PubSub.events.BLINK_FIELD,function(a){a===A.field&&A.blinkField()}):c.$watch("$ctrl.clickArg",function(){return A.focused=A.isArgsFitsField(A.clickArg)}),c.$watch("$ctrl.field",function(){A.fieldEditorConfiguration.isRichTextInput(A.fieldData)&&A.initRichText(),A.initTextValue()}),c.$watch("$ctrl.field.focused",function(a){a&&A.scrollToField()})}return a.$inject=["$q","assistiveMessage","$scope","fieldEditorConfiguration","nodeTitleManager","$mdDialog","socialLinkManager","linkDetailsManager","consumerBiLogger","modelTree","validation","$translate","socialLinksValidator","spinnerService","storyServices","mediaOverrideManager","richTextService","designKit","$timeout","flags","applicationState","$element","osUtils","domHelpers","editorEventManager","pubSub"],a.prototype.$onDestroy=function(){this.flags.onStageIndications||(this.focused=null),this.flags.onStageIndications&&this.unsubscribe&&this.unsubscribe()},a.prototype.$onInit=function(){this.scrollParent=angular.element(this.$element.parents(".cc-panel-body")),this.isInMobileEditMode=this.applicationState.isInMobileEditMode(),this.debounceDelay=0,this.updateILink(),this.validator=_.get(this.config,this.fieldData.subType+".validator"),this.validateEmail(),this.fieldEditorConfiguration.isSocialInput(this.fieldData)&&this.watchSocialLinks()},a.prototype.blinkField=function(){var a=this;this.blink=!0,this.$timeout(function(){a.blink=!1},250)},a.prototype.scrollToField=function(){var a=this.$element[0],b=this.calculateHeightCompensation(),c=Math.max(0,a.offsetTop-b-12);this.domHelpers.scrollInsideContainer(this.scrollParent,c,1e3)},a.prototype.calculateHeightCompensation=function(){if(this.fieldEditorConfiguration.isRichTextInput(this.fieldData)){var a=this.$element.find(".in-focus").length;if(!a){var b=this.$element.parent().find("p22-rich-text-toolbar"),c=this.$element.parent().find(".in-focus"),d=this.$element.find("p22-rich-text-toolbar"),e=b.index(c),f=b.index(d);if(f>e)return c.height()}}return 0},a.prototype.initRichText=function(){this.designKitFormatting=this.designKit.getFormattingForRichTextEditor(this.modelTree.getGeneralInformation()!==this.node&&this.node||null,this.fieldData.subType),this.richTextStylesManager=a.richTextStylesManager,this.richTextLinksManager=this.richTextService.getEditorLinksManager(),this.displayedRTTSections=[cc.RTTSection.BoldUnderlineItalic,cc.RTTSection.Linking,cc.RTTSection.ClearFormatting],("longText"===this.fieldData.subType||"address"===this.fieldData.subType)&&this.displayedRTTSections.push(cc.RTTSection.Listing),this.maxRowsOnBlur="longText"===this.fieldData.subType?8:2,this.initRichTextValue()},a.prototype.initRichTextValue=function(){this.richTextValue=this.richTextService.isRichText(this.fieldData.value)?this.richTextService.unMarkRichText(this.fieldData.value):this.richTextService.transformForEditor(this.fieldData.value,this.designKitFormatting)},a.prototype.initTextValue=function(){this.fieldEditorConfiguration.isTextInput(this.fieldData)&&(this.fieldEditorConfiguration.isButton(this.fieldData)?this.textInputValue=this.fieldData.value.callToAction:this.textInputValue=this.fieldData.value)},a.prototype.watchSocialLinks=function(){var a=this,b=this.modelTree.getNodeByContentElementName("Social");this.$scope.$watch(function(){return b.contentElement.getValuesByMediaType().icon},function(b){return a.socialItems=a.createSocialItems(b)},!0)},Object.defineProperty(a.prototype,"isMediaAutocomplete",{get:function(){return this.field.suggestedContent&&this.field.suggestedContent.length>0&&_.has(this.field.suggestedContent[0],"media")},set:function(a){_.map([],function(){return[]})},enumerable:!0,configurable:!0}),Object.defineProperty(a.prototype,"fieldData",{get:function(){return this.field.data},enumerable:!0,configurable:!0}),a.prototype.validateEmail=function(){this.validator&&(this.isValid=this.validator(this.fieldData.value),this.isValid||(this.errorMessage=this.config[this.fieldData.subType].errorMessage))},a.prototype.getDebounceDelay=function(){return this.debounceDelay},a.prototype.isArgsFitsField=function(a){return a&&this.field.contentElement.type===a.contentElementType&&this.fieldData.type===a.type&&this.fieldData.subType===a.subType},Object.defineProperty(a.prototype,"isHighlighted",{get:function(){return this.isArgsFitsField(this.highlightArg)},enumerable:!0,configurable:!0}),a.prototype.createSocialItems=function(a){var b=this;return _.map(a,function(a){return{cssClass:b.socialLinkManager.getPlatformIconClass(a.platform),data:{link:a.Link.targetUrl}}})},a.prototype.onRichTextLinkCommand=function(a){var b=this,c=this.richTextService.getLink(a)||{};return this.linkDetailsManager.openLinkDetailsDialog(c,this.node,"richtext").then(function(c){return b.richTextService.removeLink(a),_.isEmpty(c)?void 0:b.richTextService.addLink(c)})},a.prototype.resetRichText=function(a){var b=this,c=this.richTextService.resetFormatting(a);this.onChange(c,!1),this.richTextValue=null,this.$timeout(function(){b.initRichTextValue()})},a.prototype.isEmptyValue=function(a){return this.richTextService.isEmpty(a)},a.prototype.updateViewer=function(a,b){var c=_.clone(this.fieldData);c.value=a;var d=__assign({},this.field,{data:c}),e=this.mediaOverrideManager.getFieldDataType(this.fieldData.subType,this.node);this.consumerBiLogger.contentEditor.updateField(this.node.getId(),this.node.getSpecificContentElementType(),this.node.alias||"",this.field.key,e),this.editorEventManager.fieldChanged(d,!1,b,BIOrigins.EditPanel)},a.prototype.onChange=function(a,b,c){if(void 0===b&&(b=!1),void 0===c&&(c=IEditEventType.ValueChange),!!this.onValueChange&&this.onValueChange(this.field),!_.isUndefined(a)||"media"===this.fieldData.type){if(b&&this.isEmptyValue(a)&&(a="",this.richTextValue=null),!(a||b||"text"!==this.fieldData.type&&"button"!==this.fieldData.type))return void(this.isValid=!0);if(!_.isUndefined(a))if("button"===this.fieldData.type)this.fieldData.value.callToAction=a;else{var d=_.has(a,"text")?a.text:a;b&&d?this.fieldData.value=this.richTextService.tryToExtractPlainText(d,this.designKitFormatting)||this.richTextService.markRichText(d):this.fieldData.value=d}if(!a&&b)return void(this.isValid=!0);this.validateEmail(),this.debouncedUpdateViewer(a,c)}},a.prototype.onMaskChange=function(a){this.consumerBiLogger.contentEditor.clickOnHideUnhideComponent(this.node.getId(),this.node.getSpecificContentElementType(),this.node.alias,this.field.key,this.field.data.subType,a?"unhide":"hide",BIOrigins.EditPanel),this.field.active=a,this.editorEventManager.fieldChanged(this.field,!0,IEditEventType.VisibilityChange,BIOrigins.EditPanel),a&&this.fieldEditorConfiguration.isRichTextInput(this.fieldData)&&this.initRichTextValue(),this.onAnyFieldToggle&&this.onAnyFieldToggle(),this.isInMobileEditMode&&!a&&this.maybeShowAssistiveMessage("popup.hide-field-in-mobile","tip_content.first_time_hide_field")},a.prototype.maybeShowAssistiveMessage=function(a,b){var c=this;return this.storyServices.story.popupConfigurations[a]?this.$q.when():(this.storyServices.story.popupConfigurations[a]=!0,this.spinnerService.waitForStop().then(function(){return c.assistiveMessage.show({target:c.$element.find('[data-hook="toggle-icon"]:visible'),xOffset:23,text:c.$translate(b)})}))},a.prototype.onSocialItemClick=function(){this.editorEventManager.editSocial()},a.prototype.onRichTextCommand=function(a,b){var c=b?"on":"off",d=P23RichTextInput.getCKEditorCommandName(a);this.consumerBiLogger.contentEditor.richTextClick(this.node.getId(),this.node.getSpecificContentElementType(),this.node.alias||"",c,d,this.field.key,this.fieldData.subType,this.field.data.value,this.field.data.value&&this.field.data.value.length)},a.prototype.socialButtonsParagraph=function(){var a=this;return this.socialItems&&this.socialItems.length&&_.every(this.socialItems.map(function(b){return a.socialLinksValidator.validateSocialLink({url:b.data.link})}))?"":this.$translate("builder.field-editor.social-paragraph")},a.prototype.onLinkItemEdit=function(){var a=this;this.linkDetailsManager.openLinkDetailsDialog(this.field.data.value,this.node,"button").then(function(b){a.field.data.value=b,a.editorEventManager.fieldChanged(a.field,!1,IEditEventType.ValueChange,BIOrigins.EditPanel),a.updateILink()})},a.prototype.updateILink=function(){this.flags.onStageIndications?this.fieldData.linkAsILink=this.fieldEditorConfiguration.getILink(this.fieldData):this.linkAsILink=this.fieldEditorConfiguration.getILink(this.fieldData)},a}();FieldEditor.richTextStylesManager={getFonts:function(){return{}},getThemes:function(){return{}},getCssData:function(){var a={};return a["adi-ux-fonts"]={id:"adi-ux-fonts",value:"//static.parastorage.com/services/third-party/fonts/Helvetica/fontFace.css",isLink:!0,force:!1},a.theme_fonts={id:"theme_fonts",value:".cke_editable p,.cke_editable h1,.cke_editable h2,.cke_editable h3,.cke_editable h4,.cke_editable h5,.cke_editable h6,.cke_editable div,.cke_editable li,.cke_editable ol,.cke_editable ul {-webkit-font-smoothing: antialiased;font: normal normal 300 16px/24px HelveticaNeueW01-55Roma,HelveticaNeueW02-55Roma,HelveticaNeueW10-55Roma,\"'Helvetica Neue', Helvetica, Arial, Meiryo, 'Hiragino Kaku Gothic Pro W3', 'Hiragino Kaku Gothic Pro', sans-serif\";color:#20303c;}::selection {background-color:#d3edff}.cke_editable a {color:#4196e0}.cke_editable ol,.cke_editable ul {margin-top:0;margin-bottom:0}",isLink:!1,force:!1},a}},angular.module("siteGeneratorEditorInternal").component("fieldEditor",{templateUrl:"views/editor/field-editor.html",controller:FieldEditor,bindings:{field:"=",node:"=",highlightArg:"=",clickArg:"=",onAnyFieldToggle:"&?",onValueChange:"&?",toggleDisabled:"=?"}});var ContentElementEditor=function(){function a(a,b,c,d,e,f,g,h,i,j,k,l,m,n,o){var p=this;this.$scope=a,this.$timeout=b,this.overlaySegmentManager=c,this.contentElementFieldManager=d,this.onstageActionsManager=e,this.applicationState=f,this.ONSTAGE_EVENTS=g,this.wizardService=h,this.linkDetailsManager=i,this.fieldEditorConfiguration=j,this.editorEventManager=k,this.$element=l,this.domHelpers=m,this.flags=n,this.pubSub=o,this.getFieldArgs=function(a){return{contentElementType:a.contentElement.type,type:a.data.type,subType:a.data.subType}},this.resetLastHoveredField=function(){return p.overlaySegmentManager.lastHoveredArgs=null},this.resetHoveredFieldWithDelay=_.debounce(this.resetLastHoveredField,1e3),this.setLastHoveredField=function(a){return p.overlaySegmentManager.lastHoveredArgs=p.getFieldArgs(a)},this.onMouseEnter=this.setLastHoveredField,this.onClicked=function(a){return p.overlaySegmentManager.lastClickedArgs=p.getFieldArgs(a)},this.isInMobileEditMode=function(){return p.applicationState.isInMobileEditMode()},this.flags.onStageIndications?(o.subscribe(PubSub.events.NEW_STATE_STORY_WAS_SET,this.prepareFields.bind(this)),this.prepareFields()):a.$watch("$ctrl.node",function(){p.prepareFields()}),this.$scope.$watch("$ctrl.overlaySegmentManager.lastHoveredArgs",function(a){return p.highlightArg=p.getLayoutArgs(a)}),this.$scope.$watch("$ctrl.overlaySegmentManager.lastClickedArgs",function(a){return p.clickArg=p.getLayoutArgs(a)})}return a.$inject=["$scope","$timeout","overlaySegmentManager","contentElementFieldManager","onstageActionsManager","applicationState","ONSTAGE_EVENTS","wizardService","linkDetailsManager","fieldEditorConfiguration","editorEventManager","$element","domHelpers","flags","pubSub"],a.prototype.onLinkItemEdit=function(a){var b=this;this.linkDetailsManager.openLinkDetailsDialog(a.data.value,this.node,"button").then(function(c){a.data.value=c,b.editorEventManager.fieldChanged(a,!1,IEditEventType.ValueChange,BIOrigins.EditPanel),a.data.linkAsILink=b.fieldEditorConfiguration.getILink(a.data)})},Object.defineProperty(a.prototype,"contentElement",{get:function(){return this.node?this.node.contentElement:null},enumerable:!0,configurable:!0}),a.prototype.getLayoutArgs=function(a){var b=null,c=a&&(this.overlaySegmentManager.isActiveSegmentNodeId(this.node.id,this.node.contentElement.isSpecialListItem())||this.overlaySegmentManager.isActiveSegmentNodeId("header",!1)&&"GeneralDescription"===this.node.contentElementType);return c&&(b=a),b},a.prototype.temporaryHighlight=function(a){this.setLastHoveredField(a),this.resetHoveredFieldWithDelay()},Object.defineProperty(a.prototype,"fields",{get:function(){return this.isInMobileEditMode()?_.filter(this._fields,"visible"):this._fields},enumerable:!0,configurable:!0}),a.prototype.updateToggleDisable=function(){if(this.isInMobileEditMode()){var a=this.fields.filter(function(a){return a.active});this._fields.forEach(function(b){return b.lastActiveField=1===a.length&&a[0]===b})}},a.prototype.prepareFields=function(){this.nodeFields=this.contentElementFieldManager.getNodeFields(this.contentElement,this.node),this.referencedFields=this.contentElementFieldManager.getReferencedFields(this.contentElement,this.node),this._fields=this.nodeFields.concat(this.referencedFields),this.updateToggleDisable(),!this.flags.mergedHeader&&this.applicationState.isHeaderContent()&&this.addFixedHeaderField(),this.fields.length>0&&(this.fields[this.fields.length-1].lastField=!0)},a.prototype.addFixedHeaderField=function(){var a=this,b={key:"fixedHeader",contentElement:this.contentElement,data:{type:"fixedHeader",subType:"fixedHeader",value:!0,displayName:"Freeze Header",helpTooltip:"header_fixed_header"}};Object.defineProperty(b,"active",{get:function(){return a.wizardService.isFixedHeader()},set:function(b){a.wizardService.setFixedHeader(b)},enumerable:!0,configurable:!0}),this.fields.unshift(b)},a}();angular.module("siteGeneratorEditorInternal").component("contentElementEditor",{templateUrl:"views/editor/content-element-editor.html",controller:ContentElementEditor,bindings:{node:"=",onItemToPage:"&",isItem:"=",onAnyFieldToggle:"&?"}});var NodeEditor=function(){function a(a,b,c,d,e,f,g,h,i,j,k,l,m,n,o,p,q,r,s,t,u,v,w,x,y,z,A,B,C,D,E,F,G,H,I,J,K){var L=this;this.onstageActionsManager=a,this.ONSTAGE_EVENTS=b,this.$stateParams=c,this.$scope=d,this.$rootScope=e,this.$state=f,this.modelTree=g,this.nodeFetcher=h,this.simpleSolutionManager=i,this.sectionManager=j,this.wizardService=k,this.applicationState=l,this.storyServices=m,this.undoRedo=n,this.$element=o,this.notification=p,this.tipManager=q,this.TipManagerTypeMap=r,this.linkDetailsManager=s,this.mediaOverrideManager=t,this.initService=u,this.spinnerService=v,this.consumerBiLogger=w,this.flags=x,this.osUtils=y,this.focusKeeper=z,this.nodeChangeReporter=A,this.contentManager=B,this.colorationUtils=C,this.mobileSolutionManager=D,this.logoExtractionPopupService=E,this.layoutSolver=F,this.sitePartTypes=G,this.logoHandler=H,this.editorEventManager=I,this.nodeEditorManager=J,this.contentElementFieldManager=K,this.unsubscribers=[],this.showNested=!1,this.showMediaSettings=!1,u.loaded().then(function(){return B.initialize(m.story)}).then(function(){L.init(),L.initEventHandlers()}),d.$on(UndoEvents.STORY_REVISION_CHANGED,function(){L.init()})}return a.$inject=["onstageActionsManager","ONSTAGE_EVENTS","$stateParams","$scope","$rootScope","$state","modelTree","nodeFetcher","simpleSolutionManager","sectionManager","wizardService","applicationState","storyServices","undoRedo","$element","notification","tipManager","TipManagerTypeMap","linkDetailsManager","mediaOverrideManager","initService","spinnerService","consumerBiLogger","flags","osUtils","focusKeeper","nodeChangeReporter","contentManager","colorationUtils","mobileSolutionManager","logoExtractionPopupService","layoutSolver","sitePartTypes","logoHandler","editorEventManager","nodeEditorManager","contentElementFieldManager"],a.prototype.init=function(){var a=this.nodeFetcher.getNode(this.nodeId);this.node=a&&a.node,this.sitePart=a&&a.sitePart,this.node?(this.nodeChangeReporter.init(this.node),this.childId&&(this.isItemEditor?this.showItemEditor():this.isSocialEditor&&this.showSocialEditor()),this.tipManager.show(this.TipManagerTypeMap.EDIT,this.node.alias||this.node.contentElementType)):this.applicationState.goToBuilder();
},a.prototype.$onDestroy=function(){this.unsubscribers.forEach(function(a){return a()})},a.prototype.isTpa=function(){return this.node.isTpaNode()},a.prototype.initEventHandlers=function(){var a=this;this.unsubscribers=[this.editorEventManager.onNodeChanged(function(b){return a.updateViewer(b)}),this.editorEventManager.onEditListItem(function(b){return a.loadItemEditor(b.item)}),this.editorEventManager.onItemToPage(function(b){return a.itemToPage(b.item)}),this.editorEventManager.onEditSocial(function(){return a.loadSocialEditor()}),this.editorEventManager.onClosePanel(function(b){return a.handleClose()})],this.unsubscribers.push(this.onstageActionsManager.subscribe(this.ONSTAGE_EVENTS.EDIT_CONTENT,function(){a.isSocialEditor&&a.handleClose()}))},a.prototype.itemToPage=function(a){this.makeIntoPage(this.getRealItem(a))},a.prototype.getRealItem=function(a){return _.find(this.node.children,function(b){return b.id===a.id})},a.prototype.updateViewer=function(a){this.handleMediaChange(a)},a.prototype.fullUpdateViewer=function(a){this.nodeEditorManager.updateViewer(a),this.updateViewer(a)},a.prototype.handleMediaChange=function(a){if(a.field.value&&a.field.value.media&&a.field.value.text){var b=_.find(a.node.contentElement.values,{type:"media"});b&&(b.value[0]=a.field.value.media);var c=this.$element.find(".nested-panel ng-transclude");c.scrollTop(0),c.perfectScrollbar("update")}},a.prototype.loadItemEditor=function(a){this.flags.onStageIndications?this.nodeEditorManager.loadItemEditor(a):this.applicationState.goToEditMode(a.id)},a.prototype.loadSocialEditor=function(){this.flags.onStageIndications?this.nodeEditorManager.loadSocialEditor():this.applicationState.goToEditMode(NodeEditorManager.SOCIAL_ID)},a.prototype.showItemEditor=function(){var a=this,b=_.find(this.node.children,function(b){return b.id===a.childId});"undefined"!=typeof b&&(this.showNested=!0,this.editedNode=b)},a.prototype.showSocialEditor=function(){this.showNested=!0,this.editedNode=this.node},a.prototype.showMediaSettingsEditor=function(a){this.segment=a,this.showMediaSettings=!0,this.flags.onStageIndications&&this.$state.go(config.STATES.BUILDER_MEDIA_SETTINGS,this.$stateParams)},a.prototype.hideMediaSettingsEditor=function(){this.segment=null,this.showMediaSettings=!1,this.flags.onStageIndications&&this.$state.go(config.STATES.BUILDER_EDIT,this.$stateParams)},Object.defineProperty(a.prototype,"isList",{get:function(){return"contentElementList"===this.node.getNodeType()},enumerable:!0,configurable:!0}),Object.defineProperty(a.prototype,"isItemEditor",{get:function(){return!this.isSocialEditor},enumerable:!0,configurable:!0}),Object.defineProperty(a.prototype,"isSocialEditor",{get:function(){return this.nodeEditorManager.isSocialEditor()},enumerable:!0,configurable:!0}),a.prototype.linkButtonFieldIfEmpty=function(a,b){var c=a.contentElement,d=_.find(c.values,function(a){return"button"===a.type}),e=d?d.value:{};LinkDetailsManager.isNone(e)&&(e.isPageRef=!0,e.targetPage=b,e.link={pageId:b})},a.prototype.handleClose=function(){this.showNested?(this.showNested=!1,this.editedNode=null,this.$state.go(".",{childId:void 0})):this.applicationState.goToBuilder(!0)},a.prototype.makeIntoPage=function(a){var b=this;this.flags.onStageIndications?this.nodeEditorManager.makeIntoPage(a):(this.spinnerService.waitForMe("makeIntoPage"),this.sectionManager.makeIntoPage(a).then(function(){b.linkButtonFieldIfEmpty(a,b.storyServices.story.selectedPage),b.spinnerService.imDone("makeIntoPage")}))},a}();angular.module("siteGeneratorEditorInternal").component("nodeEditor",{templateUrl:"views/editor/node-editor.html",controller:NodeEditor,bindings:{nodeId:"=",childId:"=?"}});var NameInMenuEditor=function(){function a(a,b,c,d,e){var f=this;this.undoRedo=a,this.$scope=b,this.consumerBiLogger=c,this.menuService=d,this.flags=e,this.validator=function(a){return a.trim().length>0},this.updateOnBlur=this.flags.updateOnBlur,this.defaultName=this.node.alias||this.node.contentElementType,this.value=this.initialValue,this.$scope.$watch(function(){return f.node.getMetadatum(MenuService.NameInMenu)},function(){f.value=f.initialValue,f.menuService.updateLinkToNode(f.node,f.value)})}return a.$inject=["undoRedo","$scope","consumerBiLogger","menuService","flags"],Object.defineProperty(a.prototype,"initialValue",{get:function(){return this.node.getMetadatum(MenuService.NameInMenu)||this.defaultName},enumerable:!0,configurable:!0}),Object.defineProperty(a.prototype,"rectifiedValue",{get:function(){return this.validator(this.value)?this.value.trim():this.defaultName},enumerable:!0,configurable:!0}),a.prototype.onChangeValue=function(a){this.value=a.trim(),this.menuService.updateLinkToNode(this.node,this.rectifiedValue)},a.prototype.onBlur=function(){this.value=this.rectifiedValue,this.value!==this.initialValue&&(this.consumerBiLogger.contentEditor.updateField(this.node.getId(),this.node.getSpecificContentElementType(),this.node.alias||"","nameInMenu","text"),this.node.setMetadatum(MenuService.NameInMenu,this.value),this.undoRedo.captureOperation(!1),this.consumerBiLogger.contentEditor.fieldWasUpdatedSuccess(this.node.getId(),this.node.getSpecificContentElementType(),this.node.alias||"","nameInMenu","text",this.value,this.value.length,0))},a.prototype.onToggle=function(){var a=!this.node.getMetadatum(MenuService.HiddenFromMenu);this.consumerBiLogger.contentEditor.clickOnHideUnhideComponent(this.node.getId(),this.node.getSpecificContentElementType(),this.node.alias||"","showInMenu","text",a?"hide":"unhide",BIOrigins.EditPanel),this.node.setMetadatum(MenuService.HiddenFromMenu,a),this.menuService.updateLinkToNodeVisibility(this.node),this.undoRedo.captureOperation(!1),this.consumerBiLogger.contentEditor.componentWasHiddenSuccess(this.node.getId(),this.node.getSpecificContentElementType(),this.node.alias||"","showInMenu","text",a?"hide":"unhide",BIOrigins.EditPanel)},a.prototype.isActive=function(){return!this.node.getMetadatum(MenuService.HiddenFromMenu)},a}();angular.module("siteGeneratorStaticsConsumerAppInternal").component("nameInMenuEditor",{templateUrl:"views/editor/name-in-menu-editor.html",controller:NameInMenuEditor,bindings:{node:"="}});var TpaEditor=function(){function a(a,b,c,d,e,f){var g=this;this.$rootScope=a,this.$scope=b,this.tpaService=c,this.applicationState=d,this.editorEventManager=e,this.flags=f,this.$scope.$watch("$ctrl.node",function(a){return g.init()}),this.deregisterCloseEvent=this.$rootScope.$on(TpaSettings.TPA_EVENT_CLOSE_WINDOW,function(){g.flags.tpaSettingsRefresh&&g.init()})}return a.$inject=["$rootScope","$scope","tpaService","applicationState","editorEventManager","flags"],a.prototype.$onDestroy=function(){this.deregisterCloseEvent()},a.prototype.init=function(){this.node&&this.canEdit(this.node)?(this.compRef=this.node.isTpa?this.tpaService.getCompRef(this.node.contentElementType):this.node.widgetRef,this.applicationState.setSelectedTpaComponentRef(this.compRef),this.iFrameUrl=this.tpaService.getEditWidgetUrl(this.node)+("&"+(new Date).getTime())):this.applicationState.goToBuilder()},a.prototype.canEdit=function(a){var b=!0;return a.isTpaNode()&&(b=this.tpaService.getEditWidgetUrl(a)),b},a.prototype.onClose=function(){this.editorEventManager.closePanel(this.node.id)},a}();angular.module("siteGeneratorBuilderInternal").component("tpaEditor",{templateUrl:"views/editor/tpa-editor.html",controller:TpaEditor,bindings:{node:"="}});var IEditEventType;!function(a){a[a.ValueChange=0]="ValueChange",a[a.TypeChange=1]="TypeChange",a[a.VisibilityChange=2]="VisibilityChange",a[a.AlignmentChange=3]="AlignmentChange",a[a.GalleryLayoutChange=4]="GalleryLayoutChange",a[a.VideoSettingsChange=5]="VideoSettingsChange",a[a.MediaTitleChange=6]="MediaTitleChange",a[a.MediaDescriptionChange=7]="MediaDescriptionChange"}(IEditEventType||(IEditEventType={}));var EditorEvents=function(){function a(){}return a}();EditorEvents.FIELD_CHANGED="fieldChanged",EditorEvents.NODE_FIELD_CHANGED="nodeFieldChanged",EditorEvents.EDIT_LIST_ITEM="editListItem",EditorEvents.ITEM_TO_PAGE="itemToPage",EditorEvents.EDIT_SOCIAL="editSocial",EditorEvents.CLOSE_PANEL="closePanel";var EditorEventManager=function(){function a(a){this.$rootScope=a}return a.$inject=["$rootScope"],a.prototype.fieldChanged=function(a,b,c,d){void 0===b&&(b=!1),void 0===c&&(c=IEditEventType.ValueChange);var e={contentElementField:a,key:a.key,field:a.data,maskChanged:b,whatChanged:c};d&&(e.BIOrigin=d),this.send(EditorEvents.FIELD_CHANGED,e)},a.prototype.nodeChangedOnFieldChanged=function(a){var b=this;return this.onReceive(EditorEvents.FIELD_CHANGED,function(c){var d=a(c);b.send(EditorEvents.NODE_FIELD_CHANGED,_.assign(c,d))})},a.prototype.nodeChanged=function(a){this.send(EditorEvents.NODE_FIELD_CHANGED,a)},a.prototype.editListItem=function(a){this.send(EditorEvents.EDIT_LIST_ITEM,{item:a})},a.prototype.itemToPage=function(a){this.send(EditorEvents.ITEM_TO_PAGE,{item:a})},a.prototype.editSocial=function(){this.send(EditorEvents.EDIT_SOCIAL,{})},a.prototype.closePanel=function(a){this.send(EditorEvents.CLOSE_PANEL,{id:a})},a.prototype.onNodeChanged=function(a){return this.onReceive(EditorEvents.NODE_FIELD_CHANGED,a)},a.prototype.onEditListItem=function(a){return this.onReceive(EditorEvents.EDIT_LIST_ITEM,a)},a.prototype.onItemToPage=function(a){return this.onReceive(EditorEvents.ITEM_TO_PAGE,a)},a.prototype.onEditSocial=function(a){return this.onReceive(EditorEvents.EDIT_SOCIAL,a)},a.prototype.onClosePanel=function(a){return this.onReceive(EditorEvents.CLOSE_PANEL,a)},a.prototype.send=function(a,b){this.$rootScope.$emit(a,b)},a.prototype.onReceive=function(a,b,c){void 0===c&&(c=!0);var d=this.$rootScope.$on(a,function(a,d){c&&a.preventDefault(),b(d)});return d},a}();angular.module("siteGeneratorEditorInternal").service("editorEventManager",EditorEventManager);var MediaEditor=function(){function a(a,b,c,d,e,f,g,h,i,j,k,l,m,n,o,p,q,r,s,t,u,v,w,x,y,z){var A=this;this.onstageActionsManager=a,this.ONSTAGE_EVENTS=b,this.$scope=c,this.undoRedo=d,this.overlaySegmentManager=e,this.overlayManager=f,this.mediaGallery=g,this.consumerMediaUtils=h,this.$mdDialog=i,this.$compile=j,this.notification=k,this.applicationState=l,this.PresetMediaType=m,this.flags=n,this.storyServices=o,this.mediaOverrideManager=p,this.$timeout=q,this.consumerBiLogger=r,this.consumerBiLoggerHelpers=s,this.previewScale=t,this.linkDetailsManager=u,this.cropFaceService=v,this.mediaEditorManager=w,this.previewListCAB=x,this.$element=y,this.selections=z,this.isSlideShowLss=function(){return A.selections.getForNode(A.node.identifyingNode).isSlideShow},this.handleMediaChange=function(a){var b=a.changed;b&&A.onMediaChange({whatChanged:IEditEventType.ValueChange})},"undefined"==typeof this.active&&(this.active=!0),this.currentMediaType=this.mediaOverrideManager.getCurrentSelectedMediaPreviewType(this.node),this.isInMobileEditMode=this.applicationState.isInMobileEditMode(),this.visibleMediaTypes=this.getVisibleMediaTypes(),this.currentTab=this.getCurrentTab(),this.label=this.initLabel(),this.tabLabels=this.initTabLabels(),this.disableMediaChangeButton=this.isInMobileEditMode;var B=_.get(this,"applicationState.contentFocus.sitePart");"header"!==B&&(this.seg=this.node&&this.applicationState&&this.applicationState.getContentFocus()&&this.overlayManager.listSpanManager.getSegmentByNodeId(this.node.getId(),B)),this.imageFitMode=this.flags.imageFitMode&&"body"===B&&this.mediaOverrideManager.isFitMode(this.node),this.initAlignmentDropdown(),this.$scope.$watch(function(){return A.isSlideShowLss()},function(){A.$timeout(function(){A.currentMediaType===cc.MediaPreviewType.MultipleImages&&A.$element.find('[data-hook="image-tab"]').click(),A.visibleMediaTypes=A.getVisibleMediaTypes()})})}return a.$inject=["onstageActionsManager","ONSTAGE_EVENTS","$scope","undoRedo","overlaySegmentManager","overlayManager","mediaGallery","consumerMediaUtils","$mdDialog","$compile","notification","applicationState","PresetMediaType","flags","storyServices","mediaOverrideManager","$timeout","consumerBiLogger","consumerBiLoggerHelpers","previewScale","linkDetailsManager","cropFaceService","mediaEditorManager","previewListCAB","$element","selections"],a.prototype.changeLink=function(){var a=this.mediaOverrideManager.getActiveMediaValue(this.node);this.linkDetailsManager.openLinkDetailsDialog(a.Link,this.node,"media").then(function(b){a.Link=b})},a.prototype.initAlignmentDropdown=function(){var a=this;this.flags.alignmentDropDownInFirstPanel&&this.seg&&(this.imageAlignmentOptions=this.mediaOverrideManager.listAlignmentOptions(),this.$scope.$watch(function(){return a.seg.getAlignment()},function(b){a.selectedImageAlignment=a.mediaOverrideManager.getAlignmentOption(b)})),this.flags.alignmentDropDownInFirstPanel&&this.seg&&this.$scope.$watch(function(){return a.seg.getAlignment()},function(b){var c=ImagePositions.getLabelDetailsByPosName(b);a.selectedPositionName=c.selectedPosition,a.selectedPositionImage=c.imagePosition,a.selectedPositionIndex=ImagePositions.invertedPosToDetails[b]})},a.prototype.toggle=function(a){this.onToggle&&this.onToggle({visibility:a})},a.prototype.openCropper=function(a,b){var c=this;if(this.flags.onStageIndications)this.mediaEditorManager.openCropper();else{var d=this,e=this.seg.getLE();this.imageLayout=e.getMediaLayout();var f=this.overlaySegmentManager.getMediaOverlayPosition(this.node.getId()),g=this.seg.getLayoutSelectionStore().getImageStretch(this.seg,e),h=this.previewScale.getScale(),i={left:f.left-(g&&g.left||0)*h,top:f.top-(g&&g.top||0)*h,width:f.width+((g&&g.left||0)+(g&&g.right||0))*h,height:f.height+((g&&g.top||0)+(g&&g.bottom||0))*h},j=$(".overlay-viewport"),k=j.height(),l=64;if(!a){var m=i.height+l;if(m>k)return this.cropScaleFactor=h,this.previewScale.setScaleFactor((k/m).toFixed(1)-.1),this.$timeout(function(){return c.openCropper(!0,b)},300)}if(!b){var n=$(".browser-toolbar"),o=n.offset().top+n.outerHeight(),p=i.top,q=p+i.height;if(o>p||q>k&&p>o){var r=j.scrollTop();return $(".overlay-viewport").animate({scrollTop:r-o+(this.flags.updatedCropper?i.top-l:i.top)},500),this.$timeout(function(){return c.openCropper(a,!0)},550)}}var s=[e.getArgValue(this.imageLayout.argIndex)[0]];this.imgData=_.map(s,function(a){var b=d.cropFaceService.getLimitingAlpha(4e3,4e3,a.width,a.height),c=d.mediaGallery.itemToThumbnailUrl(a,Math.round(b*a.width),Math.round(b*a.height));return{uri:c,width:a.width,height:a.height,relativeUri:a.relativeUri}});var t=!0,u=_.map(s,function(a){var b=d.seg.node.getCropOfImage(d.imageLayout.argIndex,a.relativeUri,d.imageLayout);return b?{x:b.x,y:b.y,h:b.height,w:b.width}:void 0});this.$mdDialog.show({template:'\n          <md-dialog class="cropper-md-dialog">\n            <cropper-controller\n              node="node"\n              crop="crop"\n              autoclose="autoClose"\n              imgdata="imgData"\n              viewport="viewport"\n              consumer-bi-logger="consumerBiLogger"\n              oncropclose="onCropClose"\n              bindoutsideclick="bindOutsideClick"\n            ></cropper-controller>\n          </md-dialog>',hasBackdrop:!1,locals:{node:this.node,crop:u,autoclose:t,imgData:this.imgData,viewport:i,consumerBiLogger:d.consumerBiLogger,onCropClose:this.onCropClose.bind(this)},onRemoving:function(){c.applicationState.setCropperMode(!1),c.cropScaleFactor&&c.previewScale.setScaleFactor(c.cropScaleFactor)},controller:["$scope","$mdDialog","crop","autoclose","imgData","viewport","onCropClose","node","consumerBiLogger","applicationState",function(a,b,c,e,f,g,h,i,j,k){k.setCropperMode(!0),a.crop=c,a.autoclose=e,a.imgData=f,a.viewport=g,a.consumerBiLogger=j,a.node=i,a.bindOutsideClick=function(b){a.onOutsideClick=b},a.onCropClose=function(a,c){b.hide(),h(a,c)},d.consumerBiLogger.contentEditor.cropImageDialogIsShown(d.node.getId(),d.node.getSpecificContentElementType(),d.node.alias)}]})}},a.prototype.onCropClose=function(a,b){var c=this;"ok"===a&&(_.forEach(this.imgData,function(a,d){b[d]&&c.node.setCropData(c.imageLayout.argIndex,a.relativeUri,c.imageLayout,b[d])}),this.flags.renderedModel?this.storyServices.reRender():this.seg.reRender(),this.undoRedo.captureOperation())},a.prototype.mediaTypeChange=function(a){var b=this;this.currentMediaType=a,this.consumerMediaUtils.biSwitchMediaTypeClick(this.node,a);var c=this.mediaOverrideManager.getAllowedMediaOverride(this.node)===this.PresetMediaType.COAST2COAST,d=this.mediaOverrideManager.getAllowedMediaOverride(this.node)===this.PresetMediaType.COLUMNBG;switch(a){case cc.MediaPreviewType.SingleImage:this.mediaOverrideManager.setMediaOverride(this.node,c?MediaOverrideManager.MO_STRIP_IMAGE:MediaOverrideManager.MO_IMAGE);break;case cc.MediaPreviewType.MultipleImages:this.mediaOverrideManager.setMediaOverride(this.node,c?MediaOverrideManager.MO_STRIP_SLIDESHOW:MediaOverrideManager.MO_SLIDESHOW);break;case cc.MediaPreviewType.ExtVideo:this.mediaOverrideManager.setMediaOverride(this.node,MediaOverrideManager.MO_VIDEO);break;case cc.MediaPreviewType.Video:this.mediaOverrideManager.setMediaOverride(this.node,d?MediaOverrideManager.MO_WIX_VIDEO:MediaOverrideManager.MO_STRIP_VIDEO);break;case cc.MediaPreviewType.Shape:this.setSmallImageOverrideWithOnlyOneVisibleMediaByType("shape");break;case cc.MediaPreviewType.Clipart:this.setSmallImageOverrideWithOnlyOneVisibleMediaByType("clipart")}this.initAlignmentDropdown(),this.onMediaChange({whatChanged:IEditEventType.TypeChange}),(this.node.isListItem||this.node.nodeDescription&&this.node.nodeDescription.isListItem)&&"ListHeader"!==this.node.contentElementType&&"ListFooter"!==this.node.contentElementType&&this.notification.show("toasters.list-item-media-type-changed","general.undo",function(){b.undoRedo.undo()})},a.prototype.mediaChange=function(a){var b=this;this.disableMediaChangeButton||(this.disableMediaChangeButton=!0,this.consumerMediaUtils.biReplaceMediaClick(this.node,a),this.consumerMediaUtils.biCheckIfReplaceLogoClick(this.node,BIOrigins.HeaderPanel),this.consumerBiLoggerHelpers.organizeMediaNode=this.node,this.mediaEditorManager.mediaChange(this.currentMediaType,this.field,this.contentElement,BIOrigins.EditPanel).then(this.handleMediaChange)["finally"](function(){b.disableMediaChangeButton=!1}))},a.prototype.changeGallery=function(){var a=this,b=this.mediaOverrideManager.getAvailableGalleries(this.node),c=this.mediaOverrideManager.getAllowedMediaOverride(this.node),d=!1;this.$mdDialog.show({autoWrap:!1,hasBackdrop:!1,templateUrl:"views/editor/gallery-picker.html",clickOutsideToClose:!0,onRemoving:function(){d||a.consumerBiLogger.contentEditor.galleryLayoutWindowClosed(a.node.getId(),a.node.getSpecificContentElementType(),a.node.alias,null,b.length,c===a.PresetMediaType.SHAPE?"shape":c===a.PresetMediaType.COAST2COAST?"full width":c===a.PresetMediaType.IMAGE?"image":"")},controller:["$scope","$mdDialog",function(e,f){e.galleries=b,e.onSelect=function(e){e&&e.gallery&&a.mediaOverrideManager.setGallery(a.node,e.gallery)&&(d=!0,a.onMediaChange({whatChanged:IEditEventType.GalleryLayoutChange}),a.consumerBiLogger.contentEditor.galleryLayoutChanged(a.node.getId(),a.node.getSpecificContentElementType(),a.node.alias,e.gallery.name,b.length,b.indexOf(e),c===a.PresetMediaType.SHAPE?"shape":c===a.PresetMediaType.COAST2COAST?"full width":c===a.PresetMediaType.IMAGE?"image":"")),f.hide()},e.getDisplayName=function(a){return a.name},a.consumerBiLogger.contentEditor.galleryLayoutWindowOpened(a.node.getId(),a.node.getSpecificContentElementType(),a.node.alias,b.length,c===a.PresetMediaType.SHAPE?"shape":c===a.PresetMediaType.COAST2COAST?"full width":c===a.PresetMediaType.IMAGE?"image":"")}]})},a.prototype.openSettingsPanel=function(){this.consumerBiLogger.contentEditor.mediaSettingsShow(this.node.getId(),this.node.getContentElementType(),this.node.alias,this.consumerMediaUtils.mediaTypeToString(this.currentMediaType),this.consumerMediaUtils.mediaTypeToGalleryType(this.currentMediaType)),this.nodeEditorCtrl.showMediaSettingsEditor(this.seg)},a.prototype.setSmallImageOverrideWithOnlyOneVisibleMediaByType=function(a){this.toggleAllMediaByType("shape",!1),this.toggleAllMediaByType("clipart",!1),this.toggleFirstMediaByType(a,!0),this.contentElement.fillValuesByMediaType(),this.mediaOverrideManager.setMediaOverride(this.node,MediaOverrideManager.MO_IMAGE)},a.prototype.toggleAllMediaByType=function(a,b){var c=this,d=this.getMediaField();this.contentElement.hiddenMedia[a]=this.contentElement.hiddenMedia[a]||{};var e=_.get(this.contentElement.hiddenMedia,a);_.forEach(d.value,function(d){d.mediaType===a&&(e[c.mediaGallery.getItemId(d)]=!b)})},a.prototype.toggleFirstMediaByType=function(a,b){var c=this.getMediaField(),d=_.find(c.value,function(b){return b.mediaType===a});if(d){this.contentElement.hiddenMedia[a]=this.contentElement.hiddenMedia[a]||{};var e=_.get(this.contentElement.hiddenMedia,a);e[this.mediaGallery.getItemId(d)]=!b}},a.prototype.getMediaField=function(){return _.find(this.contentElement.values,function(a){return"media"===a.type})},a.prototype.getCurrentTab=function(){return this.mediaOverrideManager.getCurrentSelectedMediaPreviewType(this.node)},a.prototype.getVisibleMediaTypes=function(){if(this.isInMobileEditMode)return[this.currentTab];switch(this.mediaOverrideManager.getAllowedMediaOverride(this.node)){case this.PresetMediaType.SHAPE:return[cc.MediaPreviewType.Clipart,cc.MediaPreviewType.Shape];case this.PresetMediaType.IMAGE:return this.getAllowedMediaTypes([cc.MediaPreviewType.SingleImage,cc.MediaPreviewType.MultipleImages,cc.MediaPreviewType.ExtVideo]);case this.PresetMediaType.COAST2COAST:return this.getAllowedMediaTypes([cc.MediaPreviewType.SingleImage,cc.MediaPreviewType.MultipleImages,cc.MediaPreviewType.Video]);case this.PresetMediaType.AGGREGATOR:return[cc.MediaPreviewType.SingleImage,cc.MediaPreviewType.MultipleImages];case this.PresetMediaType.COLUMNBG:return[cc.MediaPreviewType.SingleImage,cc.MediaPreviewType.Video];default:return[cc.MediaPreviewType.SingleImage,cc.MediaPreviewType.MultipleImages,cc.MediaPreviewType.ExtVideo]}},a.prototype.getAllowedMediaTypes=function(a){return this.flags.listItemSlideShow&&this.node.isListItem&&this.isSlideShowLss()?a.filter(function(a){return a!==cc.MediaPreviewType.MultipleImages}):a},a.prototype.initLabel=function(){return"GeneralDescription"===this.node.getContentElementType()?"Logo":"Media"},a.prototype.initTabLabels=function(){if("GeneralDescription"===this.node.getContentElementType()){var a={};return a[cc.MediaPreviewType.Shape]="Logo Shape",a[cc.MediaPreviewType.Clipart]="Logo Image",a}return null},Object.defineProperty(a.prototype,"isImageCropEnabled",{get:function(){if(this.isInMobileEditMode)return!1;if(this.imageFitMode)return!1;var a=this.mediaOverrideManager.getAllowedMediaOverride(this.node);return a!==this.PresetMediaType.COAST2COAST&&a!==this.PresetMediaType.COLUMNBG},enumerable:!0,configurable:!0}),a.prototype.onDontCropChange=function(a){var b=this,c=this.imageFitMode,d=a?builder.PresetsStrategyType.FitMode:builder.PresetsStrategyType.UnFitMode,e=a?"fitmode":"unfitmode";this.imageFitMode=a,this.previewListCAB.show({target:this.$element.find('[data-hook="media-preview"]'),title:"popups."+e+".heading",text:"popups."+e+".text",nodes:[this.node],strategyType:d}).then(function(a){a||(b.imageFitMode=c)})},a.prototype.canChangeAlignment=function(){return this.flags.alignmentDropDownInFirstPanel&&!this.isInMobileEditMode&&this.seg&&this.seg.shouldAlignImage()},a.prototype.changeAlignment=function(a){var b=_.get(this,"seg.node.contentElement.allValuesByMediaType.image[0].relativeUri");this.seg.updateAlignment(b,a),this.onMediaChange({whatChanged:IEditEventType.AlignmentChange})},a.prototype.onPositionClicked=function(a){this.changeAlignment(a)},a.prototype.onAlignmentChange=function(a){this.changeAlignment(a.value)},a}();angular.module("siteGeneratorEditorInternal").component("mediaEditor",{templateUrl:"views/editor/media-editor.html",require:{nodeEditorCtrl:"^?nodeEditor"},controller:MediaEditor,bindings:{media:"=",field:"=",active:"=?",node:"=",contentElement:"=",onMediaChange:"&",onToggle:"&",toggleDisabled:"="}});var PreviewModeToggle=function(){function a(a,b,c,d,e,f,g,h,i,j,k,l,m,n,o,p,q,r){var s=this;this.$mdDialog=a,this.$q=b,this.previewService=c,this.documentServicesMediator=d,this.undoRedo=e,this.previewScale=f,this.pagesManager=g,this.storyServices=h,this.overlayManager=i,this.applicationState=j,this.$window=k,this.consumerBiLogger=l,this.iframeViewAdapter=m,this.viewerHeightController=n,this.$scope=o,this.assistantManager=p,this.flags=q,this.tpaService=r,this.isClosing=!1,this.tpaAppsToRefreshAfterMobilePreview=["Stores"],this.$scope.$on("$stateChangeStart",function(a,b,c,d){!_.include(b.name,config.STATES.BUILDER_STORY_PREVIEW)&&_.include(d.name,config.STATES.BUILDER_STORY_PREVIEW)&&(s.applicationState.setMobilePreviewDisplay(!1),s.overlayManager.clearDropTarget(),s.previewService.setPreviewMode(!1),s.$window.viewer.document.body.scrollLeft=0,s.$window.viewer.document.body.scrollTop=0)})}return a.$inject=["$mdDialog","$q","previewService","documentServicesMediator","undoRedo","previewScale","pagesManager","storyServices","overlayManager","applicationState","$window","consumerBiLogger","iframeViewAdapter","viewerHeightController","$scope","assistantManager","flags","tpaService"],a.prototype.refreshTpaApps=function(){var a=this;_.each(this.tpaAppsToRefreshAfterMobilePreview,function(b){a.tpaService.refreshApp(b)})},a.prototype.hideMobilePreview=function(){this.consumerBiLogger.builder.previewSiteSwitchToMobileDesktopView("desktop"),(this.flags.newMobilePreview||this.flags.mobileEditor)&&this.applicationState.disableMobileEditor(!0),this.iframeViewAdapter.prepareForPreview(),this.applicationState.setMobilePreviewDisplay(!1),this.$mdDialog.hide(),this.refreshTpaApps()},a.prototype.openMobilePreview=function(){var a=this;if(!this.applicationState.isMobilePreviewDisplay()){if(this.consumerBiLogger.builder.previewSiteSwitchToMobileDesktopView("mobile"),this.flags.newMobilePreview||this.flags.mobileEditor)return void this.$q.when().then(function(){return a.flags.mobileEditor&&a.storyServices.calculateAndRenderDesktopAndMobilePages("all")}).then(function(){return a.applicationState.enableMobileEditor()}).then(function(){return a.iframeViewAdapter.prepareForPreview()});var b=void 0;b=this.applicationState.isSupportStaffEditing()?this.$q.when():this.undoRedo.manualSave(),b.then(function(){a.isClosing||(a.applicationState.setMobilePreviewDisplay(!0),a.applicationState.mobilePreviewUrl(a.previewService.mobilePreviewUrl(a.storyServices.siteId,a.storyServices.metaSiteId)),a.applicationState.mobilePreviewPageId(a.pagesManager.getCurrentPageName()))})}},a.prototype.onStopPreview=function(){this.isClosing=!0,this.assistantManager.setDockStatus(builders.AssistantDockStatus.Stopped),this.consumerBiLogger.builder.previewSiteClosePage(),this.applicationState.setMobilePreviewDisplay(!1),this.applicationState.isMobilePreviewDisplay()&&this.refreshTpaApps(),this.applicationState.returnFromPreview(),this.$window.viewer.document.body.scrollLeft=0,this.$window.viewer.document.body.scrollTop=0,this.applicationState.isInMobileEditMode()&&(this.flags.mobileEditor?this.previewScale.reset():this.applicationState.disableMobileEditor(!1)),this.iframeViewAdapter.exitPreview(),this.viewerHeightController.resetHeight()},a.prototype.isMobilePreview=function(){return this.flags.newMobilePreview||this.flags.mobileEditor?this.applicationState.isInMobileEditMode():this.applicationState.isMobilePreviewDisplay()},a}();angular.module("siteGeneratorStaticsConsumerAppInternal").component("previewModeToggle",{templateUrl:"views/preview/preview-mode-toggle.html",controller:PreviewModeToggle,bindings:{}});var SeoPanel=function(){function a(a,b,c,d,e,f,g,h,i,j,k,l,m,n,o,p,q,r,s,t){var u=this;this.modelTree=a,this.$state=b,this.$scope=c,this.$stateParams=d,this.$window=e,this.CcDialogBuilder=f,this.$translate=g,this.$timeout=h,this.previewService=i,this.documentServicesMediator=j,this.pagesManager=k,this.rendererSeo=l,this.undoRedo=m,this.initService=n,this.consumerBiLogger=o,this.consumerBiLoggerHelpers=p,this.tpaService=q,this.staticsUrls=r,this.flags=s,this.CONSUMER_DIALOGS=t,this.updateOnBlur=this.flags.updateOnBlur,this.seoErrorHandler={pageTitleSEO:{isValid:!0,isRequired:!0,validatorConfigKey:"title",isErrorShown:!1},descriptionSEO:{isValid:!0,validatorConfigKey:"description",isErrorShown:!1},metaKeywordsSEO:{isValid:!0,validatorConfigKey:"keywords",isErrorShown:!1}},this.state={},this.defaults={},this.config={description:{validation:{validator:function(a){var b=a||"";return u.documentServicesMediator.validateSeoDescription(b)},tooltip:"seo_description_validation"},helpTooltip:"seo_description_tooltip",placeholder:this.$translate("seo_panel.description.placeholder")},title:{validation:{validator:function(a){var b=a||"";return u.documentServicesMediator.validateSeoTitle(b)},tooltip:"seo_title_validation"},helpTooltip:"seo_title_tooltip"},keywords:{validation:{validator:function(a){var b=a||"";return u.documentServicesMediator.validateSeoKeywords(b)},tooltip:"seo_keywords_validation"},helpTooltip:"seo_keywords_tooltip",placeholder:this.$translate("seo_panel.keywords.placeholder")}},this.indexableCheckbox={label:this.$translate("seo_panel.search_results.placeholder")},this.openSeoPanelHelp=function(){u.CcDialogBuilder.showSupportIframe(u.$translate("help.pages.seo"),u.CONSUMER_DIALOGS.SEO_PANEL_HELP)},this.updateValueAndSaveForm=function(a){u.seoErrorHandler[a].isRequired&&0===u.state[a].value.length&&(u.state[a].value=u.defaults[a]),u.saveForm(a)},this.saveForm=function(a){if(u.shouldSaveForm(a)){u.getInputsToUpdate(a).forEach(function(a){u.updateModel(a)}),u.updateAppState();var b=u.pageNode.contentElement.values[a],c=b.value+"";u.consumerBiLogger.pagesManager.seoPanelFieldWasUpdated(u.tpaService.getAppIdByPageNode(u.pageNode),a,b.type,c,c.length)}},this.$onInit=function(){u.initService.loaded().then(function(){u.pageId=u.$stateParams.pageId,u.pageNode=a.getPageNodeById(u.pageId),u.ce=u.pageNode&&u.pageNode.getContentElement()||{};var b=u.modelTree.getPageSEODefaults(u.pageNode);u.initInnerState(u.ce.values,b),u.consumerBiLogger.pagesManager.seoPanelIsLoaded(q.getAppIdByPageNode(u.pageNode)),u.state.pageTitleSEO.value=u.state.pageTitleSEO.value||u.defaults.pageTitleSEO,u.$scope.$watch(function(){return u.state.pageTitleSEO.value},function(a,b){u.showErrorIfNeeded("pageTitleSEO",a,b)}),u.$scope.$watch(function(){return u.state.descriptionSEO.value},function(a,b){u.showErrorIfNeeded("descriptionSEO",a,b)}),u.$scope.$watch(function(){return u.state.metaKeywordsSEO.value},function(a,b){u.showErrorIfNeeded("metaKeywordsSEO",a,b)})})},this.$scope.$on("$destroy",function(){u.consumerBiLogger.pagesManager.pagesPanelWasClosed("seo panel")})}return a.$inject=["modelTree","$state","$scope","$stateParams","$window","CcDialogBuilder","$translate","$timeout","previewService","documentServicesMediator","pagesManager","rendererSeo","undoRedo","initService","consumerBiLogger","consumerBiLoggerHelpers","tpaService","staticsUrls","flags","CONSUMER_DIALOGS"],a.prototype.showErrorIfNeeded=function(a,b,c){var d=this,e=this.seoErrorHandler[a].isErrorShown,f=this.seoErrorHandler[a].validatorConfigKey;this.config[f].validation.validator(b)||(this.state[a].value=c,e||(this.$timeout(function(){d.seoErrorHandler[a].isValid=!1,d.seoErrorHandler[a].isErrorShown=!0},0),this.$timeout(function(){d.seoErrorHandler[a].isValid=!0,d.seoErrorHandler[a].isErrorShown=!1},5e3)))},a.prototype.closeSeoPanel=function(){this.isFormValid()&&this.$state.go("^")},a.prototype.updateAppState=function(){this.rendererSeo.setPageSEO(this.pageNode),this.undoRedo.captureOperation(!1)},a.prototype.shouldSaveForm=function(a){return this.hasValueChanged(a)&&this.isFormValid()},a.prototype.hasValueChanged=function(a){return"indexable"===a||this.state[a].value!==this.ce.values[a].value},a.prototype.isFormValid=function(){return!0},a.prototype.getInputsToUpdate=function(a){
var b=[a];return"pageTitleSEO"===a?(this.updateUriInnerState(),b.push("pageUriSEO")):"indexable"===a&&this.updateCheckboxInnerState(),b},a.prototype.updateModel=function(a){this.ce.values[a].value=this.state[a].value},a.prototype.initInnerState=function(a,b){this.state=ob.deepClone(a),this.defaults=ob.deepClone(b),this.indexableCheckbox.checked=!this.state.indexable.value,this.updateUriInnerState()},a.prototype.updateUriInnerState=function(){var a=this.documentServicesMediator.convertPageNameToUrl(this.state.pageTitleSEO.value||this.defaults.pageTitleSEO);if(a!==this.state.pageUriSEO.value){var b=this.pagesManager.getPageIdByName(this.pageId);this.state.pageUriSEO.value=this.documentServicesMediator.getValidPageUriSEO(b,a)}},a.prototype.updateCheckboxInnerState=function(){this.state.indexable.value=!this.indexableCheckbox.checked},a.prototype.wixSEOWizUrl=function(){return this.staticsUrls.getSeoWizUrl("ADI_PAGES")},a.prototype.onSEOWizClick=function(){this.consumerBiLogger.builder.topBarSeoPanelGetFoundOnGoogleClick("seo panel")},a}();angular.module("siteGeneratorStaticsConsumerAppInternal").component("seoPanel",{templateUrl:"views/seo-panel.html",controller:SeoPanel});var PublishChooseDomain=function(){function a(a,b,c,d,e,f){this.$translate=a,this.CcDialogBuilder=b,this.$q=c,this.publishService=d,this.$timeout=e,this.consumerBiLogger=f,this.domainModel="free-domain",this.username=this.publishService.getUsername(),this.siteName=this.publishService.getSiteName(),this.validateSiteName()}return a.$inject=["$translate","CcDialogBuilder","$q","publishService","$timeout","consumerBiLogger"],a.prototype.closeChooseDomainDialog=function(){this.onClose()},a.prototype.validateSiteName=function(){this.siteNameValidation=this.publishService.validateSiteName(this.siteName),this.siteNameValidation.success=this.doesNewNameEqualToExistingSite()||this.siteNameValidation.success},a.prototype.onChangeSiteName=function(){var a=this;this.validateSiteName(),this.siteNameValidation.success?this.$timeout(function(){return a.invalidSiteNameTooltip=""},0):(this.invalidSiteNameTooltip="publish_error_"+(this.siteNameValidation.errorCode||"site_name_invalid").toLowerCase(),this.$timeout(function(){return a.showValidationErrorTooltip()},0))},a.prototype.nextStep=function(){var a=this;this.publishService.changeSiteNameIfNeededAndValid(this.siteName).then(function(){return a.publishService.publishConsumerStory()}).then(function(){"free-domain"===a.domainModel?(a.consumerBiLogger.builder.publishSiteCongratsPageView(),a.setState({$value:"congrats"})):a.setState({$value:"connect"})})},a.prototype.doesNewNameEqualToExistingSite=function(){return this.siteName===this.publishService.getSiteName()},Object.defineProperty(a.prototype,"validationTooltip",{get:function(){return angular.element("#invalid-name-tooltip")},enumerable:!0,configurable:!0}),a.prototype.showValidationErrorTooltip=function(){this.validationTooltip.tooltipster("show")},a.prototype.openChooseDomainHelp=function(){this.CcDialogBuilder.showSupportIframe(this.$translate("help.publish"),CONSUMER_DIALOGS.PUBLISH_CHOOSE_DOMAIN_HELP)},a}();angular.module("siteGeneratorStaticsConsumerAppInternal").component("publishChooseDomain",{templateUrl:"views/publish/publish-choose-domain.html",controller:PublishChooseDomain,bindings:{setState:"&",onClose:"&"}});var PublishCongrats=function(){function a(a,b,c,d,e,f,g,h){this.$translate=a,this.CcDialogBuilder=b,this.$mdDialog=c,this.saleService=d,this.publishService=e,this.storyServices=f,this.flags=g,this.previewService=h,this.saleService=d,this.metaSiteId=this.previewService.getDocumentServices().generalInfo.getMetaSiteId(),this.publicUrl=this.publishService.getPublicUrl(),this.rightPart={state:this.publishService.getCongratsState(),"three-actions-social":{subtitle:"Get the word out about your site",actions:[{iconClassName:"cc-icon-facebook",description:"Get more visitors by sharing your site",linkText:"Share on Facebook",social:"facebook",socialUrl:this.publicUrl,socialText:"My very own website! Created by me "},{iconClassName:"cc-icon-twitter",description:"Tweet your site and build a loyal following",linkText:"Tweet on Twitter",social:"twitter",socialUrl:this.publicUrl,socialText:"My very own website! Created by me - made with @Wix",socialVia:"",socialHashtags:"MyProWebsite, StartStunning"},{iconClassName:"cc-icon-shoutout",description:"Promote your site with beautiful newsletters",linkText:"Email a ShoutOut",linkUrl:this.getShoutoutUrl(this.metaSiteId)}]},"three-actions-promote":{subtitle:"Promote your website and business",actions:[{iconClassName:"cc-icon-shoutout",description:"Promote your site with beautiful newsletters",linkText:"Email a ShoutOut",linkUrl:this.getShoutoutUrl(this.metaSiteId)},{iconSrc:"bower_components/common-controls/dist/images/svg-font-icons/mailbox.svg",description:"Get an email address at your domain",linkText:"Get Your Own Mailbox",linkUrl:"https://premium.wix.com/wix/api/mpContainerStaticController#/mailboxes"},{iconSrc:"bower_components/common-controls/dist/images/svg-font-icons/dashboard.svg",description:"Grow your business & get people to your site",linkText:"Go to Your Wix Home",linkUrl:"https://www.wix.com/my-account/sites/"+this.metaSiteId}]}}}return a.$inject=["$translate","CcDialogBuilder","$mdDialog","saleService","publishService","storyServices","flags","previewService"],a.prototype.getShoutoutUrl=function(a){var b="135c3d92-0fea-1f9d-2ba5-2a1dfb04297e",c="feedb3b8-0b1a-413f-bcab-73e805d0f554",d=["http://www.wix.com/my-account/sites/",a,"/app/",b,"?referralInfo=onboarding-2publish-congrats","&appState=%3Fdl%3Dmessage%26messageId%3D",c].join("");return d},a.prototype.continueEditing=function(){this.$mdDialog.hide(),this.storyServices.story.popupConfigurations[a.PublishCongratsPopupKey]=this.dontShowValue},a.prototype.goToManagePremium=function(){this.publishDialogCtrl.goToManagePremium()},a.prototype.closeCongratsDialog=function(){this.publishDialogCtrl.closeDialog()},a.prototype.openCongratsHelp=function(){this.CcDialogBuilder.showSupportIframe(this.$translate("help.publish"),CONSUMER_DIALOGS.PUBLISH_CONGRATS_HELP)},a}();PublishCongrats.PublishCongratsPopupKey="popup.publish-congrats",angular.module("siteGeneratorStaticsConsumerAppInternal").component("publishCongrats",{templateUrl:"views/publish/publish-congrats.html",controller:PublishCongrats,require:{publishDialogCtrl:"^publishDialog"}});var PublishConnectDomain=function(){function a(a,b){this.$translate=a,this.CcDialogBuilder=b}return a.$inject=["$translate","CcDialogBuilder"],a.prototype.goToNewDomain=function(){this.publishDialogCtrl.goToNewDomain()},a.prototype.goToConnectDomain=function(){this.publishDialogCtrl.goToConnectDomain()},a.prototype.skipToCongrats=function(){this.publishDialogCtrl.skipToCongrats()},Object.defineProperty(a.prototype,"biSource",{get:function(){switch(this.source){case TopBar.ConnectDomainSource:return CONSUMER_DIALOGS.TOPBAR_CONNECT_DOMAIN_HELP;case FakeBrowser.ConnectDomainSource:return CONSUMER_DIALOGS.FAKEBROWSER_CONNECT_DOMAIN_HELP;default:return CONSUMER_DIALOGS.PUBLISH_CONNECT_DOMAIN_HELP}},enumerable:!0,configurable:!0}),a.prototype.openConnectDomainHelp=function(){this.CcDialogBuilder.showSupportIframe(this.$translate("help.connectDomain"),this.biSource)},a}();angular.module("siteGeneratorStaticsConsumerAppInternal").component("publishConnectDomain",{templateUrl:"views/publish/publish-connect-domain.html",controller:PublishConnectDomain,bindings:{source:"@"},require:{publishDialogCtrl:"^publishDialog"}});var PublishDialog=function(){function a(b,c,d,e,f,g,h,i,j){this.$q=b,this.$log=c,this.$window=d,this.$mdDialog=e,this.publishService=f,this.previewService=g,this.consumerBiLogger=h,this.userService=i,this.flags=j,this.metaSiteId=g.getDocumentServices().generalInfo.getMetaSiteId(),this.firstPublish=!f.isSitePublished(),this.disableGoToConnectDomain=!1,this.referralString="onboarding-"+(this.source?this.source:(this.firstPublish?1:2)+"publish"),this.managePremiumUrl=""+a.MyAccountPrefix+this.metaSiteId+"/manage-premium/?referralAdditionalInfo="+this.referralString,this.newDomainUrl=""+a.PremiumPrefix+a.DomainsMidfix+"?domainSearch=true&referralAdditionalInfo="+this.referralString,this.connectNewOwnedDomainUrl=""+a.PremiumPrefix+a.DomainsMidfix+"?connectDomain=true&referralAdditionalInfo="+this.referralString,this.connectUnattachedOwnedDomainUrl=""+a.MyAccountPrefix+this.metaSiteId+"/manage-premium/?referralAdditionalInfo="+this.referralString,this.packagePickerUrl=a.PremiumPrefix+"premiumStart?siteGuid="+this.metaSiteId+"&referralAdditionalInfo="+this.referralString,this.consumerBiLogger=h,this.screen?this.state=this.screen:this.firstPublish&&!f.isDomainConnected()?this.state="choose":(this.state="congrats",f.publishConsumerStory()),"connect"===this.state&&h.builder.connectDomainPageView(this.referralString)}return a.$inject=["$q","$log","$window","$mdDialog","publishService","previewService","consumerBiLogger","userService","flags"],a.prototype.sendCloseDialogBiEvents=function(){"connect"===this.state?this.consumerBiLogger.builder.connectDomainClosePage():"choose"===this.state&&this.consumerBiLogger.builder.publishSiteClosePage()},a.prototype.setState=function(a){this.state=a},a.prototype.closeDialog=function(){this.sendCloseDialogBiEvents(),this.$mdDialog.hide()},a.prototype.closeDialogAndCancelPublish=function(){this.sendCloseDialogBiEvents(),this.$mdDialog.cancel()},a.prototype.skipToCongrats=function(){var a=this;this.userHasChosenConnectADomain=!0,"connect"===this.screen?this.closeDialog():this.publishService.publishConsumerStory().then(function(){a.$q.when().then(function(){a.state="congrats"})})},a.prototype.goToNewDomain=function(){this.userHasChosenConnectADomain=!0,this.consumerBiLogger.builder.connectDomainNavigateToDomainSPages("newdomain"),this.$window.open((this.publishService.isPremium()?this.newDomainUrl:this.packagePickerUrl)+"-newdomain"),"connect"===this.screen?this.closeDialog():this.state="congrats"},a.prototype.goToConnectDomain=function(){var a=this;if(!this.disableGoToConnectDomain){this.disableGoToConnectDomain=!0,this.userHasChosenConnectADomain=!0,this.consumerBiLogger.builder.connectDomainNavigateToDomainSPages("owndomain");var b;b=this.publishService.isPremium()?this.userService.hasUnattachedOwnedDomain().then(function(b){return b?a.connectUnattachedOwnedDomainUrl:a.connectNewOwnedDomainUrl}):this.$q.when(this.packagePickerUrl);var c;return b.then(function(a){c=a})["catch"](function(b){a.$log.error("Failed reading from server, so using fallback url",b),c=a.connectNewOwnedDomainUrl}).then(function(){a.$window.open(c+"-owndomain")})["finally"](function(){a.disableGoToConnectDomain=!1,"connect"===a.screen?a.closeDialog():a.state="congrats"})}},a.prototype.goToManagePremium=function(){this.$window.open((this.publishService.isPremium()?this.managePremiumUrl:this.packagePickerUrl)+"-congrats")},a}();PublishDialog.MyAccountPrefix="https://www.wix.com/my-account/sites/",PublishDialog.PremiumPrefix="https://premium.wix.com/wix/api/",PublishDialog.DomainsMidfix="mpContainerStaticController#/domains",angular.module("siteGeneratorStaticsConsumerAppInternal").component("publishDialog",{templateUrl:"views/publish/publish-dialog.html",controller:PublishDialog,bindings:{source:"@",screen:"@"}}),angular.module("siteGeneratorStaticsConsumerAppInternal").component("simpleSavingAnimation",{templateUrl:"views/animations/simple-saving-animation.html",bindings:{isSaved:"=",isCurrentlySaving:"="}});var ApplicationState=function(){function a(a,b,c,d,e,f,g,h,i,j,k,l,m,n,o,p,q,r,s,t,u,v,w,x,y,z,A,B,C){var D=this;this.applicationParameters=a,this.storyServices=b,this.$q=c,this.$state=d,this.$stateParams=e,this.sitePartTypes=f,this.$rootScope=g,this.$translate=h,this.renderer=i,this.designKit=j,this.notify=k,this.previewService=l,this.modelTree=m,this.tipManager=n,this.clientTopology=o,this.pagesManager=p,this.tpaService=q,this.flags=r,this.consumerBiLogger=s,this.assistantManager=t,this.overlayManager=u,this.spinnerService=v,this.visualValidation=w,this.mobileSolutionManager=x,this.documentServicesMediator=y,this.layoutSolver=z,this.$window=A,this.pubSub=B,this.$timeout=C,this.ignoreStateSaving=[config.STATES.BUILDER_ADD_SECTION],this.mobileViewVisible=!1,this.isCroppperMode=!1,this._steady=!0,this.previewFrameWidth=1040,this._isGoToEditorState=!1,this._isMobileEditorEnabled=!1,this._pagePrettyRulesMode=ePrettyPageRulesMode.rulesOff,this.generateRandomOffset=function(a,b){return void 0===b&&(b=101),D.flags.noRandomForAutomationTests?0:D.storyServices.generateRandomOffset(a,b)},this.isSupportStaffEditing=function(a){return(a||_.isUndefined(D.supportStaffEditing))&&(D.isWixStaff()||D.clientTopology.isImpersonatedUser?D.supportStaffEditing=D.clientTopology.isImpersonatedUser||D.storyServices.story&&D.storyServices.story.dbStory&&!D.storyServices.story.dbStory.isStoryOwner:D.supportStaffEditing=!1),D.supportStaffEditing},this.isSilent=function(){return"true"===D.$state.params.silent||D.isSilentInTour()||D.flags.silentMode},this.isSilentInTour=function(){return D.assistantManager.isInActiveTask()&&!D.assistantManager.getIsShowCCTooltips()},this.isAddPage=function(){return D.$state.current.name===config.STATES.BUILDER_ADD_PAGE},this.isContentFocusEnabled=function(){return D.$state.current.name!==config.STATES.BUILDER_ADD_SECTION},this.getContentFocus=function(){return D.contentFocus},this.clearContentFocus=function(){D.contentFocus=null,D.overlayManager.updateContentFocus(null)},this.setContentFocus=function(a,b,c){if(void 0===c&&(c=!1),c||D.isContentFocusEnabled()){var d={nodeId:a,sitePart:b};_.eq(d,D.contentFocus)||(D.contentFocus=d,D.overlayManager.updateContentFocus(D.contentFocus))}},this.refreshContentFocus=function(){D.overlayManager.updateContentFocus(D.contentFocus)},this.setStoryMetadata=function(a){D.storyMetadata=a},this.getStoryMetadata=function(){return D.storyMetadata},this.getSelectedTpaComponentRef=function(){return D.selectedTpaComponentRef},this.setSelectedTpaComponentRef=function(a){D.selectedTpaComponentRef=a},this.goToDesignMode=function(){D.builderSubStateToggle(config.STATES.BUILDER_DESIGN_KITS)},this.goToIntro=function(){return D.$state.go(config.STATES.INTRO)},this.goToDesignKitMode=function(){return D.clearContentFocus(),D.$state.go(config.STATES.BUILDER_DESIGN_KIT)},this.goToColorationPanel=function(){return D.clearContentFocus(),D.$state.go(config.STATES.BUILDER_DESIGN_KIT_COLORATION)},this.goToAdvancedPaletteEditing=function(){return D.clearContentFocus(),D.$state.go(config.STATES.BUILDER_DESIGN_KIT_COLORATION_ADVANCED)},this.goToFontsPanel=function(a){return D.clearContentFocus(),D.consumerBiLogger.siteDesign.customizeDesignSubPanelIsLoaded("font",a),D.$state.go(config.STATES.BUILDER_DESIGN_KIT_FONTS_NEW)},this.goToAnimationPanel=function(a){return D.clearContentFocus(),D.consumerBiLogger.siteDesign.customizeDesignSubPanelIsLoaded("animation",a),D.$state.go(config.STATES.BUILDER_DESIGN_KIT_ANIMATIONS)},this.goToSectionAnimationPanel=function(){var a=D.toContentNode(D.contentFocus);return D.consumerBiLogger.sectionDesign.animationPanelOpened(a.alias,a.getContentElementType()),D.$state.go(config.STATES.BUILDER_SECTION_DESIGN_ANIMATIONS,{contentId:D.toContentId(D.contentFocus)})},this.isInSectionAnimationPanel=function(){return D.$state.includes(config.STATES.BUILDER_SECTION_DESIGN_ANIMATIONS)},this.goToSectionBackgroundPanel=function(a){return D.reportBiForSectionBackgroundPanel(a,D.getBackgroundModeForBi()),D.$state.go(config.STATES.BUILDER_SECTION_DESIGN_BACKGROUND,{contentId:D.toContentId(D.contentFocus),mode:null})},this.goToSectionHeaderBackgroundPanel=function(a){return D.reportBiForSectionBackgroundPanel(a,D.getBackgroundModeForBi()),D.$state.go(config.STATES.BUILDER_SECTION_DESIGN_BACKGROUND,{contentId:D.toContentId(D.contentFocus),mode:config.BACKGROUND_PANEL_MODE.HEADER_MODE})},this.goToSectionListBackgroundPanel=function(a){return a&&D.reportBiForSectionBackgroundPanel(a,D.getBackgroundModeForBi()),D.$state.go(config.STATES.BUILDER_SECTION_DESIGN_BACKGROUND,{contentId:D.toContentId(D.contentFocus),mode:config.BACKGROUND_PANEL_MODE.LIST_MODE})},this.isInSectionBackgroundPanel=function(){return D.$state.includes(config.STATES.BUILDER_SECTION_DESIGN_BACKGROUND)},this.goToSectionColorPanel=function(a){var b=D.toContentNode(D.contentFocus);return D.consumerBiLogger.sectionDesign.colorPanelOpened(b.alias,b.getContentElementType(),a),D.$state.go(config.STATES.BUILDER_SECTION_DESIGN_COLORS,{contentId:D.toContentId(D.contentFocus)})},this.isInSectionColorPanel=function(){return D.$state.includes(config.STATES.BUILDER_SECTION_DESIGN_COLORS)},this.goToSectionFontPanel=function(){var a=D.toContentNode(D.contentFocus);return D.consumerBiLogger.sectionDesign.fontPanelOpened(a.alias,a.getContentElementType()),D.$state.go(config.STATES.BUILDER_SECTION_DESIGN_FONTS,{contentId:D.toContentId(D.contentFocus)})},this.isInSectionFontPanel=function(){return D.$state.includes(config.STATES.BUILDER_SECTION_DESIGN_FONTS)},this.goToAddSectionMode=function(){D.builderSubStateToggle(config.STATES.BUILDER_ADD_SECTION)},this.goToAddPageMode=function(){return D.clearContentFocus(),D.$state.go(config.STATES.BUILDER_ADD_PAGE)},this.goToSectionPanel=function(a){if(D.isSwitchPresetMode())return D.goToSwitchPresetMode(a);if(D.isInSectionFontPanel())return D.goToSectionFontPanel();if(D.isInSectionColorPanel())return D.goToSectionColorPanel(a);if(D.isInSectionAnimationPanel())return D.goToSectionAnimationPanel();if(D.isInSectionBackgroundPanel()){var b=D.toContentNode(D.contentFocus);return b.isList()?D.goToSectionListBackgroundPanel(a):D.goToSectionBackgroundPanel(a)}return D.goToEditMode()},this.goToPreview=function(a){a&&!_.includes(D.ignoreStateSaving,D.$state.current.name)?D.savedState={state:D.$state.$current,params:_.extend(_.clone(D.$stateParams),D.getContentFocus())}:D.savedState=null,D.clearContentFocus(),D.storyServices.nodesRefMap={};var b=D.previewService.getDocumentServices();b.site.setScrollAndScale(0,0,1);var c=D.isInMobileEditMode()?D.storyServices.calculateAndRenderDesktopAndMobilePages("all"):D.storyServices.calculateAndRenderAllPages(!1);return c.then(function(){return D.notify.closeAll(),D.previewService.setPreviewMode(!0),D.$state.go(config.STATES.BUILDER_STORY_PREVIEW,null,{location:"replace"})})},this.returnFromPreview=function(){return D.savedState?D.$state.go(D.savedState.state,D.savedState.params,{location:"replace"}):D.goToBuilder()},this.builderSubStateToggle=function(a,b){if(void 0===b&&(b={}),D.$state.current.name.indexOf(a+".")>-1)return D.tipManager.hide(),D.goToBuilder(!1);D.clearContentFocus();var c=a!==D.$state.current.name;return D.$state.transitionTo(a,b,{location:!0,inherit:!0,relative:D.$state.$current,notify:c})},this.getPageNodeInFocus=function(){var a=D.storyServices.story&&D.storyServices.story.selectedPage,b=D.modelTree.getNodeById(a);return b},this.getPageInFocus=function(){var a=D.getPageNodeInFocus();return{name:a&&a.getDisplayName(),managable:a&&"Blog_Single_Post_Widget"!==a.tpaExtraPage}},this.goToBuilder=function(a){void 0===a&&(a=!1),D.overlayManager.clearDropTarget(),D.isPreviewDisplay()&&(D.previewService.setPreviewMode(!1),D.pagesManager.goToPage(D.storyServices.story.selectedPage));var b=D.$state.go(config.STATES.BUILDER_STORY);return a&&D.clearContentFocus(),b},this.goToBuilderDeepLink=function(a,b,c){var d={industryId:b,structureId:a,businessName:c};D.$state.transitionTo(config.STATES.BUILDER,d,{reload:!0})},this.goToPageManager=function(){D.builderSubStateToggle(config.STATES.BUILDER_PAGES)},this.goToPage=function(a){return D.overlayManager.clearDropTarget(),D.builderSubStateToggle(config.STATES.BUILDER_SELECTED_PAGE,{pageId:a})},this.goToPageSeo=function(a){D.overlayManager.clearDropTarget(),D.builderSubStateToggle(config.STATES.BUILDER_PAGES_SEO,{pageId:a})},this.goToMobilePage=function(a){return D.isInMobileEditMode()&&D.storyServices.story.selectedPage===a?D.$q.when():D.$q.when().then(function(){return D.$rootScope.$emit("switchEditModeStart",3e3),D.$timeout(angular.noop,500)}).then(function(){return D.$state.go(config.STATES.BUILDER_STORY)}).then(function(){return D.pagesManager.isHiddenPage(a)?(a=D.modelTree.homePageId,D.goToPage(a)):void 0}).then(function(){return D.storyServices.story.selectedPage=a}).then(function(){return D.storyServices.calculateAndRenderDesktopAndMobilePages("current")}).then(function(){return D.enableMobileEditor()})["finally"](function(){D.$rootScope.$emit("switchEditModeEnd")})},this.isOnAddState=function(){return D.$state.includes(config.STATES.BUILDER_ADD_SECTION)},this.isInEditMode=function(){return D.$state.includes(config.STATES.BUILDER_EDIT)},this.inIntroMode=function(){return D.$state.includes(config.STATES.INTRO)},this.goToEditMode=function(a){return D.overlayManager.clearDropTarget(),D.$state.go(config.STATES.BUILDER_EDIT,{contentId:D.toContentId(D.contentFocus),childId:a})},this.goToSwitchPresetMode=function(a){D.overlayManager.clearDropTarget();var b=D.toContentNode(D.contentFocus);return b&&D.consumerBiLogger.sectionManagement.replaceSectionPanelIsLoaded(b.getId(),b.getSpecificContentElementType(),b.alias,a),D.$state.go(config.STATES.BUILDER_SWITCH_PRESET,{contentId:D.toContentId(D.contentFocus)})},this.isFooterContent=function(){return D.contentFocus&&D.contentFocus.sitePart===D.sitePartTypes.FOOTER},this.isHeaderContent=function(){return D.contentFocus&&D.contentFocus.sitePart===D.sitePartTypes.HEADER},this.isAddSectionMode=function(){return D.$state.current.name===config.STATES.BUILDER_ADD_SECTION},this.isEditMode=function(){return D.$state.current.name===config.STATES.BUILDER_EDIT},this.isSwitchPresetMode=function(){return D.$state.current.name===config.STATES.BUILDER_SWITCH_PRESET},this.isSelectedPageMode=function(){return D.$state.current.name===config.STATES.BUILDER_SELECTED_PAGE},this.isSectionColorsMode=function(){return D.$state.current.name===config.STATES.BUILDER_SECTION_DESIGN_COLORS},this.isMediaSettingsActive=function(){return D.$state.current.name===config.STATES.BUILDER_MEDIA_SETTINGS},this.isSeoPanelActive=function(){return D.$state.current.name===config.STATES.BUILDER_PAGES_SEO},this.isSwitchDesignMode=function(){return D.isSectionColorsMode()||D.isSwitchPresetMode()},this.isInAnyEditOrDesignOfSectionPanel=function(){return D.isInEditMode()||D.isSwitchDesignMode()||D.isInSectionBackgroundPanel()||D.isInSectionFontPanel()||D.isInSectionAnimationPanel()},this.isPreviewDisplay=function(){return D.$state.current.name===config.STATES.BUILDER_STORY_PREVIEW},this.previewRevision=function(){return D.isPreviewDisplay()?D.flags.previewRevision:null},this.isMobilePreviewDisplay=function(){return D.mobileViewVisible},this.setMobilePreviewDisplay=function(a){D.mobileViewVisible=a},this.mobilePreviewUrl=function(a){return a?D._mobilePreviewUrl=a:D._mobilePreviewUrl},this.mobilePreviewPageId=function(a){return a?D._mobilePreviewPageId=a:D._mobilePreviewPageId},this.setCropperMode=function(a){D.isCroppperMode=a},this.isInCropperMode=function(){return D.flags.updatedCropper&&D.isCroppperMode},this.onStateChangeSuccess=function(a,b,c,d){if(D._isMobileEditorEnabled&&!b.mobile&&D.disableMobileEditor(!1),c.contentId){var e=D.toContentFocus(c.contentId);_.eq(e,D.contentFocus)||(D.contentFocus=e,D.overlayManager.updateContentFocus(D.contentFocus))}d&&d.name===config.STATES.BUILDER_STORY_PREVIEW&&D.pagesManager.goToPage(D.storyServices.story.selectedPage)},this.init=function(){D.$rootScope.$on("$stateChangeSuccess",D.onStateChangeSuccess.bind(D)),D.$rootScope.$on("$stateChangeError",function(a,b,c,d,e){console.log(a)}),D.onStateChangeSuccess(void 0,D.$state.current,D.$state.params)},this.setGoToEditorState=function(a){D._isGoToEditorState=a},this.isGoToEditorState=function(){return D._isGoToEditorState},this.isInMobileEditMode=function(){return D._isMobileEditorEnabled},this.isInDesktopEditMode=function(){return!D._isMobileEditorEnabled},this.setPrettyPageMode=function(a){D._pagePrettyRulesMode=a},this.enableMobileEditor=function(){return D.isInMobileEditMode()?void 0:(D._isMobileEditorEnabled=!0,D.previewFrameWidth=Viewer.ViewerMobileBaseSize,D.clearContentFocus(),D.documentServicesMediator.setEditorToMobileMode().then(function(){D.overlayManager.onEditModeSwitched(),D.pubSub.fire(PubSub.events.SWITCH_MODE),D.isPreviewDisplay()||D.goToBuilder()}))},this.disableMobileEditor=function(a){return D.isInDesktopEditMode()?D.$q.when():D.$q.when().then(function(){return D.$rootScope.$emit("switchEditModeStart"),D.$timeout(angular.noop,500)}).then(function(){return D._isMobileEditorEnabled=!1,D.previewFrameWidth=Viewer.ViewerDesktopBaseSize,D.clearContentFocus(),D.documentServicesMediator.setEditorToDesktopMode(a).then(function(){D.overlayManager.onEditModeSwitched(),D.pubSub.fire(PubSub.events.SWITCH_MODE),D.isPreviewDisplay()||D.goToBuilder()})["finally"](function(){D.$rootScope.$emit("switchEditModeEnd")})})},a.registerWithIsInMobileEditMode(this.isInMobileEditMode.bind(this)),i.setStateGetter(function(){switch(d.current.name){case config.STATES.BUILDER_STORY_PREVIEW:return"preview";default:return"editor"}}),_.isNaN(Number.parseInt(this.flags.extraWidth))&&(this.flags.extraWidth=100),this.previewFrameWidth+=Number.parseInt(this.flags.extraWidth)}return a.$inject=["applicationParameters","storyServices","$q","$state","$stateParams","sitePartTypes","$rootScope","$translate","renderer","designKit","notify","previewService","modelTree","tipManager","clientTopology","pagesManager","tpaService","flags","consumerBiLogger","assistantManager","overlayManager","spinnerService","visualValidation","mobileSolutionManager","documentServicesMediator","layoutSolver","$window","pubSub","$timeout"],a.prototype.isSteady=function(){return this._steady},a.prototype.setSteady=function(a){this._steady=a},a.prototype.toContentId=function(a){return a?a.sitePart===this.sitePartTypes.BODY?a.nodeId:a.sitePart:void 0},a.prototype.toContentFocus=function(a){var b=this.modelTree.getGeneralInformation();return"header"===a?{sitePart:this.sitePartTypes.HEADER,nodeId:b.getId()}:"footer"===a?{sitePart:this.sitePartTypes.FOOTER,nodeId:b.getId()}:{sitePart:this.sitePartTypes.BODY,nodeId:a}},a.prototype.toContentNode=function(a){return this.modelTree.findById(a.nodeId)},a.prototype.isWixStaff=function(){return this.clientTopology.isWixStaff||this.storyServices.story&&(this.storyServices.story.userRoles.indexOf("wixStaff")>-1||this.storyServices.story.userRoles.indexOf("superuser")>-1||this.storyServices.story.userRoles.indexOf("superuser-limited")>-1)},a.prototype.goBack=function(){this.$window.history.back()},a.prototype.getBackgroundModeForBi=function(){var a=this.$stateParams.mode;return a?a:"regular"},a.prototype.reportBiForSectionBackgroundPanel=function(a,b){var c=this.toContentNode(this.contentFocus);this.consumerBiLogger.sectionDesign.backgroundPanelOpened(b,a,c.alias,c.getContentElementType())},Object.defineProperty(a.prototype,"isPagePrettyRulesActive",{get:function(){return this._pagePrettyRulesMode!==ePrettyPageRulesMode.rulesOff},enumerable:!0,configurable:!0}),Object.defineProperty(a.prototype,"isPagePrettyRulesCached",{get:function(){return this._pagePrettyRulesMode===ePrettyPageRulesMode.rulesOnAndCaching},enumerable:!0,configurable:!0}),a.prototype.isInPreviewMode=function(){return this.$state.current.name===config.STATES.BUILDER_STORY_PREVIEW},a}();angular.module("siteGeneratorStaticsConsumerAppInternal").service("applicationState",ApplicationState);var getKitName=function(a){return a?_.without(a.name.split("-"),"all").join("-"):""},createGuid=function(){var a=function(){return Math.floor(65536*(1+Math.random())).toString(16).substring(1)};return a()+a()+"-"+a()+"-"+a()+"-"+a()+"-"+a()+a()+a()};angular.module("siteGeneratorStaticsConsumerAppInternal").factory("getStageBackgroundColors",getStageBackgroundColorsFactory).constant("defaultToastDuration",6e3).constant("getKitName",getKitName).constant("createGuid",createGuid);var NodeFetcherResult=function(){function a(){}return a}(),NodeFetcher=function(){function a(a,b,c,d,e){this.modelTree=a,this.storyServices=b,this.sitePartTypes=c,this.applicationState=d,this.$stateParams=e}return a.$inject=["modelTree","storyServices","sitePartTypes","applicationState","$stateParams"],a.prototype.getNode=function(a){if(!a)return null;if("header"===a)return{parent:null,node:this.modelTree.getGeneralInformation(),sitePart:this.sitePartTypes.HEADER};if("footer"===a)return{parent:null,node:this.modelTree.getFooterInformation(),sitePart:this.sitePartTypes.FOOTER};var b=this.modelTree.findNodeAndParentAndPageByNodeId(a,this.storyServices.story.selectedPage);return b&&b.node?{parent:b.parentNode,node:b.node,sitePart:this.sitePartTypes.BODY}:null},a.prototype.getCurrentNodeResult=function(){var a=this.applicationState.getContentFocus(),b=this.getCorrectNodeId(a);return b?this.getNode(b):null},a.prototype.getCurrentNode=function(){var a=this.getCurrentNodeResult();return a?a.node:null},a.prototype.getCurrentActiveNode=function(){var a=this.getCurrentNode();return a?a.isList()?this.getSpecificNode(a):a:null},a.prototype.getSpecificNode=function(a){var b=this,c=_.find(a.children,function(a){return a.id===b.$stateParams.childId});return c?c:a.children[0]},a.prototype.getCorrectNodeId=function(a){return _.isEmpty(a)?null:a.sitePart===this.sitePartTypes.FOOTER||a.sitePart===this.sitePartTypes.HEADER?a.sitePart:a.nodeId},a.prototype.getCurrentCorrectNodeId=function(){return this.getCorrectNodeId(this.applicationState.getContentFocus())},a.prototype.getNodeByContentElement=function(a,b){return a.contentElement===b?a:_.find(a.children,{contentElement:b})},a}();angular.module("siteGeneratorStaticsConsumerAppInternal").service("nodeFetcher",NodeFetcher);var BIErrorCodes;!function(a){a[a.GeneralFatal=-1]="GeneralFatal",a[a.GeneralError=-2]="GeneralError",a[a.GeneralWarning=-3]="GeneralWarning",a[a.ExcessiveErrors=-4]="ExcessiveErrors",a[a.InitSetPropertiesFailed=20]="InitSetPropertiesFailed",a[a.DSSaveFailed=21]="DSSaveFailed",a[a.DSPublishStoryFailed=22]="DSPublishStoryFailed",a[a.UploadImagesFailed=23]="UploadImagesFailed",a[a.SetColorKitFailed=24]="SetColorKitFailed",a[a.SetFontKitFailed=25]="SetFontKitFailed",a[a.SaveStoryHangs=26]="SaveStoryHangs",a[a.SaveStoryFailed=27]="SaveStoryFailed",a[a.PublishStoryFailed=28]="PublishStoryFailed",a[a.MarkMajorRevisionStoryFailed=29]="MarkMajorRevisionStoryFailed",a[a.GetCampaignFailed=200]="GetCampaignFailed"}(BIErrorCodes||(BIErrorCodes={}));var BIOrigins=function(){function a(){}return a}();BIOrigins.TopBar="topbar",BIOrigins.DesignPanel="design panel",BIOrigins.SectionFontPanel="section font panel",BIOrigins.SectionAnimationPanel="section animation panel",BIOrigins.SectionColorsPanel="section colors panel",BIOrigins.SectionBackgroundPanel="section background panel",BIOrigins.ContentPanel="content panel",BIOrigins.SectionPanel="section panel",BIOrigins.HeaderPanel="header-panel",BIOrigins.ColorationPanel="customize-palette-panel",BIOrigins.WelcomeTour="welcomeTour",BIOrigins.InfoCard="info-card",BIOrigins.ClipartSettingsPanel="clipart-settings-panel",BIOrigins.EditPanel="edit panel",BIOrigins.MediaSettingsPanel="media settings panel",BIOrigins.OSIDropdown="OSI dropdown",BIOrigins.ClickEditButton="click edit button",BIOrigins.UnknownSource="unknown-source";var BIInitSteps=function(){function a(){}return a}();BIInitSteps.InitStory="init story",BIInitSteps.InitCoreB=core.BIWizardServiceInitBSteps.Init,BIInitSteps.LoadCampaign="load campaign",BIInitSteps.ListenToSiteChanges="listen to site changes",BIInitSteps.InitSiteData="init site data",BIInitSteps.ProvisionTPAs="provision tpas",BIInitSteps.GenerateInitialContent="general initial content",BIInitSteps.InitialSave="initial save",BIInitSteps.FullSave="full save",BIInitSteps.DocumentServicesSave="ds save",BIInitSteps.LayoutSolverRender="layout solver render",BIInitSteps.InitContent="init content",BIInitSteps.SendSourcesToWixWiz="send source to wixwiz",
BIInitSteps.RecalculatePages="recalculate pages";var BILoadStorySteps=function(){function a(){}return a}();BILoadStorySteps.GetMetadata="get metadata",BILoadStorySteps.FetchStory="fetch story",BILoadStorySteps.InitCoreA=core.BIWizardServiceInitSteps.Init,BILoadStorySteps.BackwardCompatibility="backward compatibility",BILoadStorySteps.DeepLink="deep link";var BICreateStorySteps=function(){function a(){}return a}();BICreateStorySteps.GetUniqueName="get unique name",BICreateStorySteps.SaveNewStory="save new story",BICreateStorySteps.LoadMetadataAndContent="load metadata and content",BICreateStorySteps.GetMetadata="get metadata",BICreateStorySteps.InitContent="init content",BICreateStorySteps.SetMainKit="set main kit",BICreateStorySteps.InitCoreA=core.BIWizardServiceInitSteps.Init,BICreateStorySteps.SetSiteProperties="set site properties";var SdkBIEventType=function(){function a(){}return a}();SdkBIEventType.Settings="GFPP_SETTINGS",SdkBIEventType.Topbar="TOP_BAR_MANAGE",SdkBIEventType.Manage="GFPP_MANAGE";var ConsumerBiLoggerHelpers=function(){function a(a,b,c,d,e,f){this.clientTopology=a,this.urlParser=b,this.$injector=c,this.initStopwatch=d,this.$window=e,this.applicationParameters=f,this.services={},this.extraPagesAdded=0,this.defaultValues={},this.openedPanelStack=[]}return a.$inject=["clientTopology","urlParser","$injector","initStopwatch","$window","applicationParameters"],a.prototype.getService=function(a){return this.services[a]||(this.services[a]=this.$injector.get(a)),this.services[a]},Object.defineProperty(a.prototype,"storyServices",{get:function(){return this.getService("storyServices")},enumerable:!0,configurable:!0}),Object.defineProperty(a.prototype,"themeChooser",{get:function(){return this.getService("themeChooser")},enumerable:!0,configurable:!0}),Object.defineProperty(a.prototype,"assistantManager",{get:function(){return this.getService("assistantManager")},enumerable:!0,configurable:!0}),Object.defineProperty(a.prototype,"introManager",{get:function(){return this.getService("introManager")},enumerable:!0,configurable:!0}),Object.defineProperty(a.prototype,"BackendStory",{get:function(){return this.getService("BackendStory")},enumerable:!0,configurable:!0}),Object.defineProperty(a.prototype,"nodeFetcher",{get:function(){return this.getService("nodeFetcher")},enumerable:!0,configurable:!0}),a.prototype.getSDKJsonForBIEvent=function(a,b){var c={app_id:a,evid:12,initiator:"ADI",instance_id:this.getInstanceId(),msid:this.getMetaSiteId(),ownerId:this.getOwnerId(),src:75,type:b};return"cbi="+encodeURIComponent(JSON.stringify(c))},a.prototype.addSDKJsonForBiEvent=function(a,b,c){var d=this.getSDKJsonForBIEvent(b,c),e=a.split("#"),f=e[0].includes("?")?"&":"?",g=e[0]+f+d;return e[1]?g+"#"+e[1]:g},a.prototype.getPanelType=function(){return this.openedPanelStack[this.openedPanelStack.length-1]},a.prototype.setDefaultValue=function(a,b){this.defaultValues[a]=b},a.prototype.setPanelSource=function(a){this.panelSource=a},a.prototype.popPanelSource=function(){var a=this.panelSource;return this.panelSource=void 0,a},a.prototype.getPanelSource=function(){return this.panelSource},a.prototype.getStoryId=function(){return this.storyServices.story?this.storyServices.story.id:this.defaultValues.storyId},a.prototype.getStoryRevision=function(){return this.storyServices.story?this.storyServices.story.revision:this.defaultValues.storyRevision},a.prototype.getIsNewSite=function(){var a=this.defaultValues.isNewSite;return"true"===a?"new site":"existing site"},a.prototype.getMetaSiteId=function(){try{return this.BackendStory.parseId(this.getStoryId()).metaSiteId}catch(a){return this.defaultValues.metaSiteId}},a.prototype.getInstanceId=function(){try{return this.BackendStory.parseId(this.getStoryId()).instanceId}catch(a){return this.defaultValues.instanceId}},a.prototype.getStructureId=function(){return this.storyServices.story?this.storyServices.story.structureId:this.defaultValues.structureId},a.prototype.getIndustryId=function(){return this.storyServices.story?this.storyServices.story.industryId:this.defaultValues.industryId},a.prototype.getEsi=function(){return this.clientTopology.esi},a.prototype.getPageId=function(){return this.storyServices.story?this.storyServices.story.selectedPage:""},a.prototype.getMainCategory=function(){return this.urlParser.queryParams().vertical||null},a.prototype.getReferral=function(){return decodeURI(this.urlParser.getQueryStringValueByKey("referral"))},a.prototype.getReferralForBI=function(){var a=this.getReferral(),b=this.getMainCategory();return"invalid_story"===a||b&&"business"===b.toLowerCase()?a:""},a.prototype.getWixWizSearchGuid=function(){return this.introManager.wixWizSearchId||null},a.prototype.getLod=function(){return this.introManager.getLod()},a.prototype.getEditMode=function(){return!this.assistantManager.isInActiveTask()||this.assistantManager.isMenuOpen()?"no-tour":this.assistantManager.isInAutoplayMode()?"auto-tour":"manual-tour"},a.prototype.getAdiBuilderType=function(){return this.applicationParameters.isInMobileEditMode()?"mobile":"desktop"},a.prototype.getNode=function(){return this.nodeFetcher.getCurrentActiveNode()},a.prototype.getNodeId=function(){var a=this.getNode();return a&&a.id},a.prototype.getSectionTypeAndAlias=function(){var a=this.getNode();return[a.getContentElementType(),a.alias]},a.prototype.getSectionType=function(){return"TBD"},a.prototype.getSectionAlias=function(){return"TBD"},a.prototype.getObjectType=function(){return"TBD"},a.prototype.getDesignId=function(){var a=this.themeChooser.getActiveTheme("mainKit");return a?a.id:void 0},a.prototype.getDesignNumber=function(){return-1},a.prototype.getNoOfDesigns=function(){return this.themeChooser.getColorThemes().length},a.prototype.getPhaseNumber=function(){return this.assistantManager.getActiveTask().activeActionIndex},a.prototype.getTotalPhases=function(){return this.assistantManager.getActiveTask().actions.length},a.prototype.getPhaseName=function(){var a=this.assistantManager.getActiveAction();return a&&a.BI.description},a.prototype.getVersion=function(){return this.BackendStory.getStaticsVersion()},a.prototype.getLastPhase=function(){return this.assistantManager.getActiveTask().activeActionIndex},a.prototype.getIntervalLoadTime=function(){return this.initStopwatch.sample},a.prototype.getLoadTime=function(){return this.initStopwatch.total},a.prototype.resetLoadTime=function(){this.initStopwatch.reset()},a.prototype.getOwnerId=function(){return this.storyServices.story&&this.storyServices.story.ownerId},a.prototype.getUserRoles=function(){return this.storyServices.story&&this.storyServices.story.userRoles&&this.storyServices.story.userRoles.join(",")},a.prototype.getScreenResolution=function(){return this.$window.screen.availWidth+"x"+this.$window.screen.availHeight},a.prototype.resetExtraPagesCount=function(){this.extraPagesAdded=0},a.prototype.incExtraPagesCount=function(){this.extraPagesAdded++},a.prototype.extraPagesCount=function(){return this.extraPagesAdded},a}();angular.module("siteGeneratorStaticsConsumerAppInternal").service("consumerBiLoggerHelpers",ConsumerBiLoggerHelpers);var AutomationConsumerBiLogger=function(){function a(a,b,c){this.consumerBiLoggerHelpers=a,this.clientTopology=b,this.mainHelper=c}return a.prototype.loadTestCompleted=function(a){try{var b=this.consumerBiLoggerHelpers.getLoadTime(),c=this.consumerBiLoggerHelpers.getMetaSiteId();return this.mainHelper.validateString(a),this.mainHelper.validateNumber(b),this.mainHelper.validateGuid(c),this.mainHelper.log({src:66,evid:30,testName:a,loadTime:b,msid:c})}catch(d){this.mainHelper.onError("BISafe: failed to report automation.loadTestCompleted",d.stack)}},a}(),AppsConsumerBiLogger=function(){function a(a,b,c){this.consumerBiLoggerHelpers=a,this.clientTopology=b,this.mainHelper=c}return a.prototype.clickOnManageApp=function(a,b,c){try{var d=this.consumerBiLoggerHelpers.getEditMode(),e=this.consumerBiLoggerHelpers.getEsi(),f=this.consumerBiLoggerHelpers.getIndustryId(),g=this.consumerBiLoggerHelpers.getInstanceId(),h=this.consumerBiLoggerHelpers.getMetaSiteId(),i=this.consumerBiLoggerHelpers.getStoryRevision(),j=this.consumerBiLoggerHelpers.getStructureId(),k=this.consumerBiLoggerHelpers.getAdiBuilderType();return this.mainHelper.validateString(a),this.mainHelper.validateGuid(b),this.mainHelper.validateString(c),this.mainHelper.validateString(d),this.mainHelper.validateGuid(e),this.mainHelper.validateString(f),this.mainHelper.validateString(g),this.mainHelper.validateString(h),this.mainHelper.validateNumber(i),this.mainHelper.validateString(j),this.mainHelper.validateString(k),this.mainHelper.log({src:66,evid:450,source:a,appId:b,appName:c,editMode:d,esi:e,industryId:f,instanceId:g,msid:h,revision:i,structureId:j,adiBuilderType:k})}catch(l){this.mainHelper.onError("BISafe: failed to report apps.clickOnManageApp",l.stack)}},a.prototype.clickOnEditAppTpaSettings=function(a,b,c){try{var d=this.consumerBiLoggerHelpers.getEditMode(),e=this.consumerBiLoggerHelpers.getEsi(),f=this.consumerBiLoggerHelpers.getIndustryId(),g=this.consumerBiLoggerHelpers.getInstanceId(),h=this.consumerBiLoggerHelpers.getMetaSiteId(),i=this.consumerBiLoggerHelpers.getStoryRevision(),j=this.consumerBiLoggerHelpers.getStructureId(),k=this.consumerBiLoggerHelpers.getAdiBuilderType();return this.mainHelper.validateString(a),this.mainHelper.validateGuid(b),this.mainHelper.validateString(c),this.mainHelper.validateString(d),this.mainHelper.validateGuid(e),this.mainHelper.validateString(f),this.mainHelper.validateString(g),this.mainHelper.validateString(h),this.mainHelper.validateNumber(i),this.mainHelper.validateString(j),this.mainHelper.validateString(k),this.mainHelper.log({src:66,evid:453,source:a,appId:b,appName:c,editMode:d,esi:e,industryId:f,instanceId:g,msid:h,revision:i,structureId:j,adiBuilderType:k})}catch(l){this.mainHelper.onError("BISafe: failed to report apps.clickOnEditAppTpaSettings",l.stack)}},a}(),BuilderConsumerBiLogger=function(){function a(a,b,c){this.consumerBiLoggerHelpers=a,this.clientTopology=b,this.mainHelper=c}return a.prototype.loadingPhaseInInitStart=function(a,b){try{var c=this.consumerBiLoggerHelpers.getLoadTime(),d=this.consumerBiLoggerHelpers.getIsNewSite(),e=this.consumerBiLoggerHelpers.getEsi(),f=this.consumerBiLoggerHelpers.getIndustryId(),g=this.consumerBiLoggerHelpers.getInstanceId(),h=this.consumerBiLoggerHelpers.getMetaSiteId(),i=this.consumerBiLoggerHelpers.getStructureId(),j=this.consumerBiLoggerHelpers.getAdiBuilderType();return this.mainHelper.validateNumber(c),this.mainHelper.validateString(d),this.mainHelper.validateString(a),this.mainHelper.validateString(b),this.mainHelper.validateGuid(e),this.mainHelper.validateString(f),this.mainHelper.validateString(g),this.mainHelper.validateGuid(h),this.mainHelper.validateString(i),this.mainHelper.validateString(j),this.mainHelper.log({src:66,evid:1,loadTime:c,loadType:d,phaseName:a,subPhaseName:b,esi:e,industryId:f,instanceId:g,msid:h,structureId:i,adiBuilderType:j})}catch(k){this.mainHelper.onError("BISafe: failed to report builder.loadingPhaseInInitStart",k.stack)}},a.prototype.loadingPhaseInInitComplete=function(a,b,c){try{var d=this.consumerBiLoggerHelpers.getLoadTime(),e=this.consumerBiLoggerHelpers.getIsNewSite(),f=this.consumerBiLoggerHelpers.getEsi(),g=this.consumerBiLoggerHelpers.getIndustryId(),h=this.consumerBiLoggerHelpers.getInstanceId(),i=this.consumerBiLoggerHelpers.getMetaSiteId(),j=this.consumerBiLoggerHelpers.getStructureId(),k=this.consumerBiLoggerHelpers.getAdiBuilderType();return this.mainHelper.validateNumber(a),this.mainHelper.validateNumber(d),this.mainHelper.validateString(e),this.mainHelper.validateString(b),this.mainHelper.validateString(c),this.mainHelper.validateGuid(f),this.mainHelper.validateString(g),this.mainHelper.validateString(h),this.mainHelper.validateGuid(i),this.mainHelper.validateString(j),this.mainHelper.validateString(k),this.mainHelper.log({src:66,evid:2,intervalLoadTime:a,loadTime:d,loadType:e,phaseName:b,subPhaseName:c,esi:f,industryId:g,instanceId:h,msid:i,structureId:j,adiBuilderType:k})}catch(l){this.mainHelper.onError("BISafe: failed to report builder.loadingPhaseInInitComplete",l.stack)}},a.prototype.firstTimeCreatestoryGetMetadataCompleted=function(){try{var a=this.consumerBiLoggerHelpers.getIntervalLoadTime(),b=this.consumerBiLoggerHelpers.getEsi(),c=this.consumerBiLoggerHelpers.getIndustryId(),d=this.consumerBiLoggerHelpers.getInstanceId(),e=this.consumerBiLoggerHelpers.getLoadTime(),f=this.consumerBiLoggerHelpers.getMetaSiteId(),g=this.consumerBiLoggerHelpers.getStructureId(),h=this.consumerBiLoggerHelpers.getAdiBuilderType();return this.mainHelper.validateNumber(a),this.mainHelper.validateGuid(b),this.mainHelper.validateString(c),this.mainHelper.validateString(d),this.mainHelper.validateNumber(e),this.mainHelper.validateGuid(f),this.mainHelper.validateString(g),this.mainHelper.validateString(h),this.mainHelper.log({src:66,evid:500,intervalLoadTime:a,esi:b,industryId:c,instanceId:d,loadTime:e,msid:f,structureId:g,adiBuilderType:h})}catch(i){this.mainHelper.onError("BISafe: failed to report builder.firstTimeCreatestoryGetMetadataCompleted",i.stack)}},a.prototype.firstTimeCreatestorySetMainKit=function(){try{var a=this.consumerBiLoggerHelpers.getIntervalLoadTime(),b=this.consumerBiLoggerHelpers.getEsi(),c=this.consumerBiLoggerHelpers.getIndustryId(),d=this.consumerBiLoggerHelpers.getInstanceId(),e=this.consumerBiLoggerHelpers.getLoadTime(),f=this.consumerBiLoggerHelpers.getMetaSiteId(),g=this.consumerBiLoggerHelpers.getStructureId(),h=this.consumerBiLoggerHelpers.getAdiBuilderType();return this.mainHelper.validateNumber(a),this.mainHelper.validateGuid(b),this.mainHelper.validateString(c),this.mainHelper.validateString(d),this.mainHelper.validateNumber(e),this.mainHelper.validateGuid(f),this.mainHelper.validateString(g),this.mainHelper.validateString(h),this.mainHelper.log({src:66,evid:501,intervalLoadTime:a,esi:b,industryId:c,instanceId:d,loadTime:e,msid:f,structureId:g,adiBuilderType:h})}catch(i){this.mainHelper.onError("BISafe: failed to report builder.firstTimeCreatestorySetMainKit",i.stack)}},a.prototype.firstTimeCreatestorySetSiteProperties=function(){try{var a=this.consumerBiLoggerHelpers.getIntervalLoadTime(),b=this.consumerBiLoggerHelpers.getEsi(),c=this.consumerBiLoggerHelpers.getIndustryId(),d=this.consumerBiLoggerHelpers.getInstanceId(),e=this.consumerBiLoggerHelpers.getLoadTime(),f=this.consumerBiLoggerHelpers.getMetaSiteId(),g=this.consumerBiLoggerHelpers.getStructureId(),h=this.consumerBiLoggerHelpers.getAdiBuilderType();return this.mainHelper.validateNumber(a),this.mainHelper.validateGuid(b),this.mainHelper.validateString(c),this.mainHelper.validateString(d),this.mainHelper.validateNumber(e),this.mainHelper.validateGuid(f),this.mainHelper.validateString(g),this.mainHelper.validateString(h),this.mainHelper.log({src:66,evid:502,intervalLoadTime:a,esi:b,industryId:c,instanceId:d,loadTime:e,msid:f,structureId:g,adiBuilderType:h})}catch(i){this.mainHelper.onError("BISafe: failed to report builder.firstTimeCreatestorySetSiteProperties",i.stack)}},a.prototype.firstTimeAssistantInitAssistant=function(){try{var a=this.consumerBiLoggerHelpers.getIntervalLoadTime(),b=this.consumerBiLoggerHelpers.getEsi(),c=this.consumerBiLoggerHelpers.getIndustryId(),d=this.consumerBiLoggerHelpers.getInstanceId(),e=this.consumerBiLoggerHelpers.getLoadTime(),f=this.consumerBiLoggerHelpers.getMetaSiteId(),g=this.consumerBiLoggerHelpers.getStructureId(),h=this.consumerBiLoggerHelpers.getAdiBuilderType();return this.mainHelper.validateNumber(a),this.mainHelper.validateGuid(b),this.mainHelper.validateString(c),this.mainHelper.validateString(d),this.mainHelper.validateNumber(e),this.mainHelper.validateGuid(f),this.mainHelper.validateString(g),this.mainHelper.validateString(h),this.mainHelper.log({src:66,evid:503,intervalLoadTime:a,esi:b,industryId:c,instanceId:d,loadTime:e,msid:f,structureId:g,adiBuilderType:h})}catch(i){this.mainHelper.onError("BISafe: failed to report builder.firstTimeAssistantInitAssistant",i.stack)}},a.prototype.firstTimeWizardserviceInitBFinalizeCoreInit=function(){try{var a=this.consumerBiLoggerHelpers.getIntervalLoadTime(),b=this.consumerBiLoggerHelpers.getEsi(),c=this.consumerBiLoggerHelpers.getIndustryId(),d=this.consumerBiLoggerHelpers.getInstanceId(),e=this.consumerBiLoggerHelpers.getLoadTime(),f=this.consumerBiLoggerHelpers.getMetaSiteId(),g=this.consumerBiLoggerHelpers.getStructureId(),h=this.consumerBiLoggerHelpers.getAdiBuilderType();return this.mainHelper.validateNumber(a),this.mainHelper.validateGuid(b),this.mainHelper.validateString(c),this.mainHelper.validateString(d),this.mainHelper.validateNumber(e),this.mainHelper.validateGuid(f),this.mainHelper.validateString(g),this.mainHelper.validateString(h),this.mainHelper.log({src:66,evid:504,intervalLoadTime:a,esi:b,industryId:c,instanceId:d,loadTime:e,msid:f,structureId:g,adiBuilderType:h})}catch(i){this.mainHelper.onError("BISafe: failed to report builder.firstTimeWizardserviceInitBFinalizeCoreInit",i.stack)}},a.prototype.firstTimeInitDataSaveStory=function(){try{var a=this.consumerBiLoggerHelpers.getIntervalLoadTime(),b=this.consumerBiLoggerHelpers.getEsi(),c=this.consumerBiLoggerHelpers.getIndustryId(),d=this.consumerBiLoggerHelpers.getInstanceId(),e=this.consumerBiLoggerHelpers.getLoadTime(),f=this.consumerBiLoggerHelpers.getMetaSiteId(),g=this.consumerBiLoggerHelpers.getStructureId(),h=this.consumerBiLoggerHelpers.getAdiBuilderType();return this.mainHelper.validateNumber(a),this.mainHelper.validateGuid(b),this.mainHelper.validateString(c),this.mainHelper.validateString(d),this.mainHelper.validateNumber(e),this.mainHelper.validateGuid(f),this.mainHelper.validateString(g),this.mainHelper.validateString(h),this.mainHelper.log({src:66,evid:505,intervalLoadTime:a,esi:b,industryId:c,instanceId:d,loadTime:e,msid:f,structureId:g,adiBuilderType:h})}catch(i){this.mainHelper.onError("BISafe: failed to report builder.firstTimeInitDataSaveStory",i.stack)}},a.prototype.firstTimeLoadCampaignLoadCampaignDataAsync=function(){try{var a=this.consumerBiLoggerHelpers.getIntervalLoadTime(),b=this.consumerBiLoggerHelpers.getEsi(),c=this.consumerBiLoggerHelpers.getIndustryId(),d=this.consumerBiLoggerHelpers.getInstanceId(),e=this.consumerBiLoggerHelpers.getLoadTime(),f=this.consumerBiLoggerHelpers.getMetaSiteId(),g=this.consumerBiLoggerHelpers.getStructureId(),h=this.consumerBiLoggerHelpers.getAdiBuilderType();return this.mainHelper.validateNumber(a),this.mainHelper.validateGuid(b),this.mainHelper.validateString(c),this.mainHelper.validateString(d),this.mainHelper.validateNumber(e),this.mainHelper.validateGuid(f),this.mainHelper.validateString(g),this.mainHelper.validateString(h),this.mainHelper.log({src:66,evid:506,intervalLoadTime:a,esi:b,industryId:c,instanceId:d,loadTime:e,msid:f,structureId:g,adiBuilderType:h})}catch(i){this.mainHelper.onError("BISafe: failed to report builder.firstTimeLoadCampaignLoadCampaignDataAsync",i.stack)}},a.prototype.firstTimeLoadCampaignLoadCampaignDataComplete=function(){try{var a=this.consumerBiLoggerHelpers.getIntervalLoadTime(),b=this.consumerBiLoggerHelpers.getEsi(),c=this.consumerBiLoggerHelpers.getIndustryId(),d=this.consumerBiLoggerHelpers.getInstanceId(),e=this.consumerBiLoggerHelpers.getLoadTime(),f=this.consumerBiLoggerHelpers.getMetaSiteId(),g=this.consumerBiLoggerHelpers.getStructureId(),h=this.consumerBiLoggerHelpers.getAdiBuilderType();return this.mainHelper.validateNumber(a),this.mainHelper.validateGuid(b),this.mainHelper.validateString(c),this.mainHelper.validateString(d),this.mainHelper.validateNumber(e),this.mainHelper.validateGuid(f),this.mainHelper.validateString(g),this.mainHelper.validateString(h),this.mainHelper.log({src:66,evid:507,intervalLoadTime:a,esi:b,industryId:c,instanceId:d,loadTime:e,msid:f,structureId:g,adiBuilderType:h})}catch(i){this.mainHelper.onError("BISafe: failed to report builder.firstTimeLoadCampaignLoadCampaignDataComplete",i.stack)}},a.prototype.firstTimeRenderSiteDataListenToSantaChanges=function(){try{var a=this.consumerBiLoggerHelpers.getIntervalLoadTime(),b=this.consumerBiLoggerHelpers.getEsi(),c=this.consumerBiLoggerHelpers.getIndustryId(),d=this.consumerBiLoggerHelpers.getInstanceId(),e=this.consumerBiLoggerHelpers.getLoadTime(),f=this.consumerBiLoggerHelpers.getMetaSiteId(),g=this.consumerBiLoggerHelpers.getStructureId(),h=this.consumerBiLoggerHelpers.getAdiBuilderType();return this.mainHelper.validateNumber(a),this.mainHelper.validateGuid(b),this.mainHelper.validateString(c),this.mainHelper.validateString(d),this.mainHelper.validateNumber(e),this.mainHelper.validateGuid(f),this.mainHelper.validateString(g),this.mainHelper.validateString(h),this.mainHelper.log({src:66,evid:508,intervalLoadTime:a,esi:b,industryId:c,instanceId:d,loadTime:e,msid:f,structureId:g,adiBuilderType:h})}catch(i){this.mainHelper.onError("BISafe: failed to report builder.firstTimeRenderSiteDataListenToSantaChanges",i.stack)}},a.prototype.firstTimeSendSiteSourcesSendSiteSourcesInfoToWixwizAsync=function(){try{var a=this.consumerBiLoggerHelpers.getIntervalLoadTime(),b=this.consumerBiLoggerHelpers.getEsi(),c=this.consumerBiLoggerHelpers.getIndustryId(),d=this.consumerBiLoggerHelpers.getInstanceId(),e=this.consumerBiLoggerHelpers.getLoadTime(),f=this.consumerBiLoggerHelpers.getMetaSiteId(),g=this.consumerBiLoggerHelpers.getStructureId(),h=this.consumerBiLoggerHelpers.getAdiBuilderType();return this.mainHelper.validateNumber(a),this.mainHelper.validateGuid(b),this.mainHelper.validateString(c),this.mainHelper.validateString(d),this.mainHelper.validateNumber(e),this.mainHelper.validateGuid(f),this.mainHelper.validateString(g),this.mainHelper.validateString(h),this.mainHelper.log({src:66,evid:509,intervalLoadTime:a,esi:b,industryId:c,instanceId:d,loadTime:e,msid:f,structureId:g,adiBuilderType:h})}catch(i){this.mainHelper.onError("BISafe: failed to report builder.firstTimeSendSiteSourcesSendSiteSourcesInfoToWixwizAsync",i.stack)}},a.prototype.firstTimeSendSiteSourcesSendSiteSourcesInfoToWixwizComplete=function(){try{var a=this.consumerBiLoggerHelpers.getIntervalLoadTime(),b=this.consumerBiLoggerHelpers.getEsi(),c=this.consumerBiLoggerHelpers.getIndustryId(),d=this.consumerBiLoggerHelpers.getInstanceId(),e=this.consumerBiLoggerHelpers.getLoadTime(),f=this.consumerBiLoggerHelpers.getMetaSiteId(),g=this.consumerBiLoggerHelpers.getStructureId(),h=this.consumerBiLoggerHelpers.getAdiBuilderType();return this.mainHelper.validateNumber(a),this.mainHelper.validateGuid(b),this.mainHelper.validateString(c),this.mainHelper.validateString(d),this.mainHelper.validateNumber(e),this.mainHelper.validateGuid(f),this.mainHelper.validateString(g),this.mainHelper.validateString(h),this.mainHelper.log({src:66,evid:510,intervalLoadTime:a,esi:b,industryId:c,instanceId:d,loadTime:e,msid:f,structureId:g,adiBuilderType:h})}catch(i){this.mainHelper.onError("BISafe: failed to report builder.firstTimeSendSiteSourcesSendSiteSourcesInfoToWixwizComplete",i.stack)}},a.prototype.firstTimeStart=function(a){try{var b=this.consumerBiLoggerHelpers.getEsi(),c=this.consumerBiLoggerHelpers.getIndustryId(),d=this.consumerBiLoggerHelpers.getStructureId(),e=this.consumerBiLoggerHelpers.getAdiBuilderType();return this.mainHelper.validateGuid(b),this.mainHelper.validateString(c),this.mainHelper.validateString(a),this.mainHelper.validateString(d),this.mainHelper.validateString(e),this.mainHelper.log({src:66,evid:125,esi:b,industryId:c,origin:a,structureId:d,adiBuilderType:e})}catch(f){this.mainHelper.onError("BISafe: failed to report builder.firstTimeStart",f.stack)}},a.prototype.firstTimeCreatestoryGetUniqueName=function(){try{var a=this.consumerBiLoggerHelpers.getIntervalLoadTime(),b=this.consumerBiLoggerHelpers.getEsi(),c=this.consumerBiLoggerHelpers.getIndustryId(),d=this.consumerBiLoggerHelpers.getInstanceId(),e=this.consumerBiLoggerHelpers.getLoadTime(),f=this.consumerBiLoggerHelpers.getMetaSiteId(),g=this.consumerBiLoggerHelpers.getStructureId(),h=this.consumerBiLoggerHelpers.getAdiBuilderType();return this.mainHelper.validateNumber(a),this.mainHelper.validateGuid(b),this.mainHelper.validateString(c),this.mainHelper.validateString(d),this.mainHelper.validateNumber(e),this.mainHelper.validateGuid(f),this.mainHelper.validateString(g),this.mainHelper.validateString(h),this.mainHelper.log({src:66,evid:126,intervalLoadTime:a,esi:b,industryId:c,instanceId:d,loadTime:e,msid:f,structureId:g,adiBuilderType:h})}catch(i){this.mainHelper.onError("BISafe: failed to report builder.firstTimeCreatestoryGetUniqueName",i.stack)}},a.prototype.firstTimeCreatestorySaveNewStory=function(){try{var a=this.consumerBiLoggerHelpers.getIntervalLoadTime(),b=this.consumerBiLoggerHelpers.getEsi(),c=this.consumerBiLoggerHelpers.getIndustryId(),d=this.consumerBiLoggerHelpers.getInstanceId(),e=this.consumerBiLoggerHelpers.getLoadTime(),f=this.consumerBiLoggerHelpers.getMetaSiteId(),g=this.consumerBiLoggerHelpers.getStructureId(),h=this.consumerBiLoggerHelpers.getAdiBuilderType();return this.mainHelper.validateNumber(a),this.mainHelper.validateGuid(b),this.mainHelper.validateString(c),this.mainHelper.validateString(d),this.mainHelper.validateNumber(e),this.mainHelper.validateGuid(f),this.mainHelper.validateString(g),this.mainHelper.validateString(h),this.mainHelper.log({src:66,evid:169,intervalLoadTime:a,esi:b,industryId:c,instanceId:d,loadTime:e,msid:f,structureId:g,adiBuilderType:h})}catch(i){this.mainHelper.onError("BISafe: failed to report builder.firstTimeCreatestorySaveNewStory",i.stack)}},a.prototype.firstTimeCreatestoryGetMetadataInitContent=function(){try{var a=this.consumerBiLoggerHelpers.getIntervalLoadTime(),b=this.consumerBiLoggerHelpers.getEsi(),c=this.consumerBiLoggerHelpers.getIndustryId(),d=this.consumerBiLoggerHelpers.getInstanceId(),e=this.consumerBiLoggerHelpers.getLoadTime(),f=this.consumerBiLoggerHelpers.getMetaSiteId(),g=this.consumerBiLoggerHelpers.getStructureId(),h=this.consumerBiLoggerHelpers.getAdiBuilderType();return this.mainHelper.validateNumber(a),this.mainHelper.validateGuid(b),this.mainHelper.validateString(c),this.mainHelper.validateString(d),this.mainHelper.validateNumber(e),this.mainHelper.validateGuid(f),this.mainHelper.validateString(g),this.mainHelper.validateString(h),this.mainHelper.log({src:66,evid:127,intervalLoadTime:a,esi:b,industryId:c,instanceId:d,loadTime:e,msid:f,structureId:g,adiBuilderType:h})}catch(i){this.mainHelper.onError("BISafe: failed to report builder.firstTimeCreatestoryGetMetadataInitContent",i.stack)}},a.prototype.firstTimeCreatestoryInitContentCompleted=function(){try{var a=this.consumerBiLoggerHelpers.getIntervalLoadTime(),b=this.consumerBiLoggerHelpers.getEsi(),c=this.consumerBiLoggerHelpers.getIndustryId(),d=this.consumerBiLoggerHelpers.getInstanceId(),e=this.consumerBiLoggerHelpers.getLoadTime(),f=this.consumerBiLoggerHelpers.getMetaSiteId(),g=this.consumerBiLoggerHelpers.getStructureId(),h=this.consumerBiLoggerHelpers.getAdiBuilderType();return this.mainHelper.validateNumber(a),this.mainHelper.validateGuid(b),this.mainHelper.validateString(c),this.mainHelper.validateString(d),this.mainHelper.validateNumber(e),this.mainHelper.validateGuid(f),this.mainHelper.validateString(g),this.mainHelper.validateString(h),this.mainHelper.log({src:66,evid:129,intervalLoadTime:a,esi:b,industryId:c,instanceId:d,loadTime:e,msid:f,structureId:g,adiBuilderType:h})}catch(i){this.mainHelper.onError("BISafe: failed to report builder.firstTimeCreatestoryInitContentCompleted",i.stack)}},a.prototype.firstTimeCreatestoryWizardserviceInitA=function(){try{var a=this.consumerBiLoggerHelpers.getIntervalLoadTime(),b=this.consumerBiLoggerHelpers.getEsi(),c=this.consumerBiLoggerHelpers.getIndustryId(),d=this.consumerBiLoggerHelpers.getInstanceId(),e=this.consumerBiLoggerHelpers.getLoadTime(),f=this.consumerBiLoggerHelpers.getMetaSiteId(),g=this.consumerBiLoggerHelpers.getStructureId(),h=this.consumerBiLoggerHelpers.getAdiBuilderType();return this.mainHelper.validateNumber(a),this.mainHelper.validateGuid(b),this.mainHelper.validateString(c),this.mainHelper.validateString(d),this.mainHelper.validateNumber(e),this.mainHelper.validateGuid(f),this.mainHelper.validateString(g),this.mainHelper.validateString(h),this.mainHelper.log({src:66,evid:128,intervalLoadTime:a,esi:b,industryId:c,instanceId:d,loadTime:e,msid:f,structureId:g,adiBuilderType:h})}catch(i){this.mainHelper.onError("BISafe: failed to report builder.firstTimeCreatestoryWizardserviceInitA",i.stack)}},a.prototype.firstTimeInitDataUploadMediaFromIntro=function(){try{var a=this.consumerBiLoggerHelpers.getIntervalLoadTime(),b=this.consumerBiLoggerHelpers.getEsi(),c=this.consumerBiLoggerHelpers.getIndustryId(),d=this.consumerBiLoggerHelpers.getInstanceId(),e=this.consumerBiLoggerHelpers.getLoadTime(),f=this.consumerBiLoggerHelpers.getMetaSiteId(),g=this.consumerBiLoggerHelpers.getStructureId(),h=this.consumerBiLoggerHelpers.getAdiBuilderType();return this.mainHelper.validateNumber(a),this.mainHelper.validateGuid(b),this.mainHelper.validateString(c),this.mainHelper.validateString(d),this.mainHelper.validateNumber(e),this.mainHelper.validateGuid(f),this.mainHelper.validateString(g),this.mainHelper.validateString(h),this.mainHelper.log({src:66,evid:171,intervalLoadTime:a,esi:b,industryId:c,instanceId:d,loadTime:e,msid:f,structureId:g,adiBuilderType:h})}catch(i){this.mainHelper.onError("BISafe: failed to report builder.firstTimeInitDataUploadMediaFromIntro",i.stack)}},a.prototype.firstTimeInitDataGenerateInitialContent=function(){try{var a=this.consumerBiLoggerHelpers.getIntervalLoadTime(),b=this.consumerBiLoggerHelpers.getEsi(),c=this.consumerBiLoggerHelpers.getIndustryId(),d=this.consumerBiLoggerHelpers.getInstanceId(),e=this.consumerBiLoggerHelpers.getLoadTime(),f=this.consumerBiLoggerHelpers.getMetaSiteId(),g=this.consumerBiLoggerHelpers.getStructureId(),h=this.consumerBiLoggerHelpers.getAdiBuilderType();return this.mainHelper.validateNumber(a),this.mainHelper.validateGuid(b),this.mainHelper.validateString(c),this.mainHelper.validateString(d),this.mainHelper.validateNumber(e),this.mainHelper.validateGuid(f),this.mainHelper.validateString(g),this.mainHelper.validateString(h),this.mainHelper.log({src:66,evid:130,intervalLoadTime:a,esi:b,industryId:c,instanceId:d,loadTime:e,msid:f,structureId:g,adiBuilderType:h})}catch(i){this.mainHelper.onError("BISafe: failed to report builder.firstTimeInitDataGenerateInitialContent",i.stack)}},a.prototype.firstTimeInitDataProvisionTpas=function(){try{var a=this.consumerBiLoggerHelpers.getIntervalLoadTime(),b=this.consumerBiLoggerHelpers.getEsi(),c=this.consumerBiLoggerHelpers.getIndustryId(),d=this.consumerBiLoggerHelpers.getInstanceId(),e=this.consumerBiLoggerHelpers.getLoadTime(),f=this.consumerBiLoggerHelpers.getMetaSiteId(),g=this.consumerBiLoggerHelpers.getStructureId(),h=this.consumerBiLoggerHelpers.getAdiBuilderType();return this.mainHelper.validateNumber(a),this.mainHelper.validateGuid(b),this.mainHelper.validateString(c),this.mainHelper.validateString(d),this.mainHelper.validateNumber(e),this.mainHelper.validateGuid(f),this.mainHelper.validateString(g),this.mainHelper.validateString(h),this.mainHelper.log({src:66,evid:172,intervalLoadTime:a,esi:b,industryId:c,instanceId:d,loadTime:e,msid:f,structureId:g,adiBuilderType:h})}catch(i){this.mainHelper.onError("BISafe: failed to report builder.firstTimeInitDataProvisionTpas",i.stack)}},a.prototype.firstTimeInitDataLayoutSolverRender=function(){try{var a=this.consumerBiLoggerHelpers.getIntervalLoadTime(),b=this.consumerBiLoggerHelpers.getEsi(),c=this.consumerBiLoggerHelpers.getIndustryId(),d=this.consumerBiLoggerHelpers.getInstanceId(),e=this.consumerBiLoggerHelpers.getLoadTime(),f=this.consumerBiLoggerHelpers.getMetaSiteId(),g=this.consumerBiLoggerHelpers.getStructureId(),h=this.consumerBiLoggerHelpers.getAdiBuilderType();return this.mainHelper.validateNumber(a),this.mainHelper.validateGuid(b),this.mainHelper.validateString(c),
this.mainHelper.validateString(d),this.mainHelper.validateNumber(e),this.mainHelper.validateGuid(f),this.mainHelper.validateString(g),this.mainHelper.validateString(h),this.mainHelper.log({src:66,evid:131,intervalLoadTime:a,esi:b,industryId:c,instanceId:d,loadTime:e,msid:f,structureId:g,adiBuilderType:h})}catch(i){this.mainHelper.onError("BISafe: failed to report builder.firstTimeInitDataLayoutSolverRender",i.stack)}},a.prototype.firstTimeInitDataSaveDsIfTpaSaveLocalOtherwise=function(a){try{var b=this.consumerBiLoggerHelpers.getIntervalLoadTime(),c=this.consumerBiLoggerHelpers.getEsi(),d=this.consumerBiLoggerHelpers.getIndustryId(),e=this.consumerBiLoggerHelpers.getInstanceId(),f=this.consumerBiLoggerHelpers.getLoadTime(),g=this.consumerBiLoggerHelpers.getMetaSiteId(),h=this.consumerBiLoggerHelpers.getStructureId(),i=this.consumerBiLoggerHelpers.getAdiBuilderType();return this.mainHelper.validateString(a),this.mainHelper.validateNumber(b),this.mainHelper.validateGuid(c),this.mainHelper.validateString(d),this.mainHelper.validateString(e),this.mainHelper.validateNumber(f),this.mainHelper.validateGuid(g),this.mainHelper.validateString(h),this.mainHelper.validateString(i),this.mainHelper.log({src:66,evid:133,saveType:a,intervalLoadTime:b,esi:c,industryId:d,instanceId:e,loadTime:f,msid:g,structureId:h,adiBuilderType:i})}catch(j){this.mainHelper.onError("BISafe: failed to report builder.firstTimeInitDataSaveDsIfTpaSaveLocalOtherwise",j.stack)}},a.prototype.firstTimeCreateTpa=function(a){try{var b=this.consumerBiLoggerHelpers.getIntervalLoadTime(),c=this.consumerBiLoggerHelpers.getEsi(),d=this.consumerBiLoggerHelpers.getIndustryId(),e=this.consumerBiLoggerHelpers.getInstanceId(),f=this.consumerBiLoggerHelpers.getLoadTime(),g=this.consumerBiLoggerHelpers.getMetaSiteId(),h=this.consumerBiLoggerHelpers.getStructureId(),i=this.consumerBiLoggerHelpers.getAdiBuilderType();return this.mainHelper.validateNumber(b),this.mainHelper.validateGuid(a),this.mainHelper.validateGuid(c),this.mainHelper.validateString(d),this.mainHelper.validateString(e),this.mainHelper.validateNumber(f),this.mainHelper.validateGuid(g),this.mainHelper.validateString(h),this.mainHelper.validateString(i),this.mainHelper.log({src:66,evid:132,intervalLoadTime:b,appId:a,esi:c,industryId:d,instanceId:e,loadTime:f,msid:g,structureId:h,adiBuilderType:i})}catch(j){this.mainHelper.onError("BISafe: failed to report builder.firstTimeCreateTpa",j.stack)}},a.prototype.firstTimeComplete=function(a,b){try{var c=this.consumerBiLoggerHelpers.getIntervalLoadTime(),d=this.consumerBiLoggerHelpers.getEsi(),e=this.consumerBiLoggerHelpers.getIndustryId(),f=this.consumerBiLoggerHelpers.getInstanceId(),g=this.consumerBiLoggerHelpers.getLoadTime(),h=this.consumerBiLoggerHelpers.getMetaSiteId(),i=this.consumerBiLoggerHelpers.getStructureId(),j=this.consumerBiLoggerHelpers.getAdiBuilderType();return this.mainHelper.validateNumber(c),this.mainHelper.validateGuid(d),this.mainHelper.validateString(e),this.mainHelper.validateString(f),this.mainHelper.validateNumber(g),this.mainHelper.validateGuid(h),this.mainHelper.validateString(i),this.mainHelper.validateString(a),this.mainHelper.validateNumber(b),this.mainHelper.validateString(j),this.mainHelper.log({src:66,evid:134,intervalLoadTime:c,esi:d,industryId:e,instanceId:f,loadTime:g,msid:h,structureId:i,validStory:a,timeInPage:b,adiBuilderType:j})}catch(k){this.mainHelper.onError("BISafe: failed to report builder.firstTimeComplete",k.stack)}},a.prototype.existingSiteStart=function(a){try{var b=this.consumerBiLoggerHelpers.getEsi(),c=this.consumerBiLoggerHelpers.getIndustryId(),d=this.consumerBiLoggerHelpers.getInstanceId(),e=this.consumerBiLoggerHelpers.getMetaSiteId(),f=this.consumerBiLoggerHelpers.getStructureId(),g=this.consumerBiLoggerHelpers.getAdiBuilderType();return this.mainHelper.validateGuid(b),this.mainHelper.validateString(c),this.mainHelper.validateString(d),this.mainHelper.validateGuid(e),this.mainHelper.validateString(a),this.mainHelper.validateString(f),this.mainHelper.validateString(g),this.mainHelper.log({src:66,evid:135,esi:b,industryId:c,instanceId:d,msid:e,origin:a,structureId:f,adiBuilderType:g})}catch(h){this.mainHelper.onError("BISafe: failed to report builder.existingSiteStart",h.stack)}},a.prototype.existingSiteLoadstoryGetMetadata=function(){try{var a=this.consumerBiLoggerHelpers.getIntervalLoadTime(),b=this.consumerBiLoggerHelpers.getEsi(),c=this.consumerBiLoggerHelpers.getIndustryId(),d=this.consumerBiLoggerHelpers.getInstanceId(),e=this.consumerBiLoggerHelpers.getLoadTime(),f=this.consumerBiLoggerHelpers.getMetaSiteId(),g=this.consumerBiLoggerHelpers.getStructureId(),h=this.consumerBiLoggerHelpers.getAdiBuilderType();return this.mainHelper.validateNumber(a),this.mainHelper.validateGuid(b),this.mainHelper.validateString(c),this.mainHelper.validateString(d),this.mainHelper.validateNumber(e),this.mainHelper.validateGuid(f),this.mainHelper.validateString(g),this.mainHelper.validateString(h),this.mainHelper.log({src:66,evid:136,intervalLoadTime:a,esi:b,industryId:c,instanceId:d,loadTime:e,msid:f,structureId:g,adiBuilderType:h})}catch(i){this.mainHelper.onError("BISafe: failed to report builder.existingSiteLoadstoryGetMetadata",i.stack)}},a.prototype.existingSiteLoadstoryLoadStory=function(){try{var a=this.consumerBiLoggerHelpers.getIntervalLoadTime(),b=this.consumerBiLoggerHelpers.getEsi(),c=this.consumerBiLoggerHelpers.getIndustryId(),d=this.consumerBiLoggerHelpers.getInstanceId(),e=this.consumerBiLoggerHelpers.getLoadTime(),f=this.consumerBiLoggerHelpers.getMetaSiteId(),g=this.consumerBiLoggerHelpers.getStructureId(),h=this.consumerBiLoggerHelpers.getAdiBuilderType();return this.mainHelper.validateNumber(a),this.mainHelper.validateGuid(b),this.mainHelper.validateString(c),this.mainHelper.validateString(d),this.mainHelper.validateNumber(e),this.mainHelper.validateGuid(f),this.mainHelper.validateString(g),this.mainHelper.validateString(h),this.mainHelper.log({src:66,evid:511,intervalLoadTime:a,esi:b,industryId:c,instanceId:d,loadTime:e,msid:f,structureId:g,adiBuilderType:h})}catch(i){this.mainHelper.onError("BISafe: failed to report builder.existingSiteLoadstoryLoadStory",i.stack)}},a.prototype.existingSiteLoadstoryWizardserviceInitA=function(){try{var a=this.consumerBiLoggerHelpers.getIntervalLoadTime(),b=this.consumerBiLoggerHelpers.getEsi(),c=this.consumerBiLoggerHelpers.getIndustryId(),d=this.consumerBiLoggerHelpers.getInstanceId(),e=this.consumerBiLoggerHelpers.getLoadTime(),f=this.consumerBiLoggerHelpers.getMetaSiteId(),g=this.consumerBiLoggerHelpers.getStructureId(),h=this.consumerBiLoggerHelpers.getAdiBuilderType();return this.mainHelper.validateNumber(a),this.mainHelper.validateGuid(b),this.mainHelper.validateString(c),this.mainHelper.validateString(d),this.mainHelper.validateNumber(e),this.mainHelper.validateGuid(f),this.mainHelper.validateString(g),this.mainHelper.validateString(h),this.mainHelper.log({src:66,evid:137,intervalLoadTime:a,esi:b,industryId:c,instanceId:d,loadTime:e,msid:f,structureId:g,adiBuilderType:h})}catch(i){this.mainHelper.onError("BISafe: failed to report builder.existingSiteLoadstoryWizardserviceInitA",i.stack)}},a.prototype.existingSiteLoadstoryRecalculatePages=function(){try{var a=this.consumerBiLoggerHelpers.getIntervalLoadTime(),b=this.consumerBiLoggerHelpers.getEsi(),c=this.consumerBiLoggerHelpers.getIndustryId(),d=this.consumerBiLoggerHelpers.getInstanceId(),e=this.consumerBiLoggerHelpers.getLoadTime(),f=this.consumerBiLoggerHelpers.getMetaSiteId(),g=this.consumerBiLoggerHelpers.getStructureId(),h=this.consumerBiLoggerHelpers.getAdiBuilderType();return this.mainHelper.validateNumber(a),this.mainHelper.validateGuid(b),this.mainHelper.validateString(c),this.mainHelper.validateString(d),this.mainHelper.validateNumber(e),this.mainHelper.validateGuid(f),this.mainHelper.validateString(g),this.mainHelper.validateString(h),this.mainHelper.log({src:66,evid:512,intervalLoadTime:a,esi:b,industryId:c,instanceId:d,loadTime:e,msid:f,structureId:g,adiBuilderType:h})}catch(i){this.mainHelper.onError("BISafe: failed to report builder.existingSiteLoadstoryRecalculatePages",i.stack)}},a.prototype.existingSiteLoadstoryBackwardCompatibility=function(){try{var a=this.consumerBiLoggerHelpers.getIntervalLoadTime(),b=this.consumerBiLoggerHelpers.getEsi(),c=this.consumerBiLoggerHelpers.getIndustryId(),d=this.consumerBiLoggerHelpers.getInstanceId(),e=this.consumerBiLoggerHelpers.getLoadTime(),f=this.consumerBiLoggerHelpers.getMetaSiteId(),g=this.consumerBiLoggerHelpers.getStructureId(),h=this.consumerBiLoggerHelpers.getAdiBuilderType();return this.mainHelper.validateNumber(a),this.mainHelper.validateGuid(b),this.mainHelper.validateString(c),this.mainHelper.validateString(d),this.mainHelper.validateNumber(e),this.mainHelper.validateGuid(f),this.mainHelper.validateString(g),this.mainHelper.validateString(h),this.mainHelper.log({src:66,evid:513,intervalLoadTime:a,esi:b,industryId:c,instanceId:d,loadTime:e,msid:f,structureId:g,adiBuilderType:h})}catch(i){this.mainHelper.onError("BISafe: failed to report builder.existingSiteLoadstoryBackwardCompatibility",i.stack)}},a.prototype.existingSiteLoadstoryHandleDeepLink=function(){try{var a=this.consumerBiLoggerHelpers.getIntervalLoadTime(),b=this.consumerBiLoggerHelpers.getEsi(),c=this.consumerBiLoggerHelpers.getIndustryId(),d=this.consumerBiLoggerHelpers.getInstanceId(),e=this.consumerBiLoggerHelpers.getLoadTime(),f=this.consumerBiLoggerHelpers.getMetaSiteId(),g=this.consumerBiLoggerHelpers.getStructureId(),h=this.consumerBiLoggerHelpers.getAdiBuilderType();return this.mainHelper.validateNumber(a),this.mainHelper.validateGuid(b),this.mainHelper.validateString(c),this.mainHelper.validateString(d),this.mainHelper.validateNumber(e),this.mainHelper.validateGuid(f),this.mainHelper.validateString(g),this.mainHelper.validateString(h),this.mainHelper.log({src:66,evid:514,intervalLoadTime:a,esi:b,industryId:c,instanceId:d,loadTime:e,msid:f,structureId:g,adiBuilderType:h})}catch(i){this.mainHelper.onError("BISafe: failed to report builder.existingSiteLoadstoryHandleDeepLink",i.stack)}},a.prototype.existingSiteAssistantInitAssistant=function(){try{var a=this.consumerBiLoggerHelpers.getIntervalLoadTime(),b=this.consumerBiLoggerHelpers.getEsi(),c=this.consumerBiLoggerHelpers.getIndustryId(),d=this.consumerBiLoggerHelpers.getInstanceId(),e=this.consumerBiLoggerHelpers.getLoadTime(),f=this.consumerBiLoggerHelpers.getMetaSiteId(),g=this.consumerBiLoggerHelpers.getStructureId(),h=this.consumerBiLoggerHelpers.getAdiBuilderType();return this.mainHelper.validateNumber(a),this.mainHelper.validateGuid(b),this.mainHelper.validateString(c),this.mainHelper.validateString(d),this.mainHelper.validateNumber(e),this.mainHelper.validateGuid(f),this.mainHelper.validateString(g),this.mainHelper.validateString(h),this.mainHelper.log({src:66,evid:515,intervalLoadTime:a,esi:b,industryId:c,instanceId:d,loadTime:e,msid:f,structureId:g,adiBuilderType:h})}catch(i){this.mainHelper.onError("BISafe: failed to report builder.existingSiteAssistantInitAssistant",i.stack)}},a.prototype.existingSiteWizardserviceInitBFinializeCoreInit=function(){try{var a=this.consumerBiLoggerHelpers.getIntervalLoadTime(),b=this.consumerBiLoggerHelpers.getEsi(),c=this.consumerBiLoggerHelpers.getIndustryId(),d=this.consumerBiLoggerHelpers.getInstanceId(),e=this.consumerBiLoggerHelpers.getLoadTime(),f=this.consumerBiLoggerHelpers.getMetaSiteId(),g=this.consumerBiLoggerHelpers.getStructureId(),h=this.consumerBiLoggerHelpers.getAdiBuilderType();return this.mainHelper.validateNumber(a),this.mainHelper.validateGuid(b),this.mainHelper.validateString(c),this.mainHelper.validateString(d),this.mainHelper.validateNumber(e),this.mainHelper.validateGuid(f),this.mainHelper.validateString(g),this.mainHelper.validateString(h),this.mainHelper.log({src:66,evid:516,intervalLoadTime:a,esi:b,industryId:c,instanceId:d,loadTime:e,msid:f,structureId:g,adiBuilderType:h})}catch(i){this.mainHelper.onError("BISafe: failed to report builder.existingSiteWizardserviceInitBFinializeCoreInit",i.stack)}},a.prototype.existingSiteLoadCampaignLoadCampaignDataAsync=function(){try{var a=this.consumerBiLoggerHelpers.getIntervalLoadTime(),b=this.consumerBiLoggerHelpers.getEsi(),c=this.consumerBiLoggerHelpers.getIndustryId(),d=this.consumerBiLoggerHelpers.getInstanceId(),e=this.consumerBiLoggerHelpers.getLoadTime(),f=this.consumerBiLoggerHelpers.getMetaSiteId(),g=this.consumerBiLoggerHelpers.getStructureId(),h=this.consumerBiLoggerHelpers.getAdiBuilderType();return this.mainHelper.validateNumber(a),this.mainHelper.validateGuid(b),this.mainHelper.validateString(c),this.mainHelper.validateString(d),this.mainHelper.validateNumber(e),this.mainHelper.validateGuid(f),this.mainHelper.validateString(g),this.mainHelper.validateString(h),this.mainHelper.log({src:66,evid:517,intervalLoadTime:a,esi:b,industryId:c,instanceId:d,loadTime:e,msid:f,structureId:g,adiBuilderType:h})}catch(i){this.mainHelper.onError("BISafe: failed to report builder.existingSiteLoadCampaignLoadCampaignDataAsync",i.stack)}},a.prototype.existingSiteLoadCampaignLoadCampaignDataComplete=function(){try{var a=this.consumerBiLoggerHelpers.getIntervalLoadTime(),b=this.consumerBiLoggerHelpers.getEsi(),c=this.consumerBiLoggerHelpers.getIndustryId(),d=this.consumerBiLoggerHelpers.getInstanceId(),e=this.consumerBiLoggerHelpers.getLoadTime(),f=this.consumerBiLoggerHelpers.getMetaSiteId(),g=this.consumerBiLoggerHelpers.getStructureId(),h=this.consumerBiLoggerHelpers.getAdiBuilderType();return this.mainHelper.validateNumber(a),this.mainHelper.validateGuid(b),this.mainHelper.validateString(c),this.mainHelper.validateString(d),this.mainHelper.validateNumber(e),this.mainHelper.validateGuid(f),this.mainHelper.validateString(g),this.mainHelper.validateString(h),this.mainHelper.log({src:66,evid:518,intervalLoadTime:a,esi:b,industryId:c,instanceId:d,loadTime:e,msid:f,structureId:g,adiBuilderType:h})}catch(i){this.mainHelper.onError("BISafe: failed to report builder.existingSiteLoadCampaignLoadCampaignDataComplete",i.stack)}},a.prototype.existingSiteRenderSiteDataListenToSantaChanges=function(){try{var a=this.consumerBiLoggerHelpers.getIntervalLoadTime(),b=this.consumerBiLoggerHelpers.getEsi(),c=this.consumerBiLoggerHelpers.getIndustryId(),d=this.consumerBiLoggerHelpers.getInstanceId(),e=this.consumerBiLoggerHelpers.getLoadTime(),f=this.consumerBiLoggerHelpers.getMetaSiteId(),g=this.consumerBiLoggerHelpers.getStructureId(),h=this.consumerBiLoggerHelpers.getAdiBuilderType();return this.mainHelper.validateNumber(a),this.mainHelper.validateGuid(b),this.mainHelper.validateString(c),this.mainHelper.validateString(d),this.mainHelper.validateNumber(e),this.mainHelper.validateGuid(f),this.mainHelper.validateString(g),this.mainHelper.validateString(h),this.mainHelper.log({src:66,evid:519,intervalLoadTime:a,esi:b,industryId:c,instanceId:d,loadTime:e,msid:f,structureId:g,adiBuilderType:h})}catch(i){this.mainHelper.onError("BISafe: failed to report builder.existingSiteRenderSiteDataListenToSantaChanges",i.stack)}},a.prototype.existingSiteInitContent=function(){try{var a=this.consumerBiLoggerHelpers.getIntervalLoadTime(),b=this.consumerBiLoggerHelpers.getEsi(),c=this.consumerBiLoggerHelpers.getIndustryId(),d=this.consumerBiLoggerHelpers.getInstanceId(),e=this.consumerBiLoggerHelpers.getLoadTime(),f=this.consumerBiLoggerHelpers.getMetaSiteId(),g=this.consumerBiLoggerHelpers.getStructureId(),h=this.consumerBiLoggerHelpers.getAdiBuilderType();return this.mainHelper.validateNumber(a),this.mainHelper.validateGuid(b),this.mainHelper.validateString(c),this.mainHelper.validateString(d),this.mainHelper.validateNumber(e),this.mainHelper.validateGuid(f),this.mainHelper.validateString(g),this.mainHelper.validateString(h),this.mainHelper.log({src:66,evid:138,intervalLoadTime:a,esi:b,industryId:c,instanceId:d,loadTime:e,msid:f,structureId:g,adiBuilderType:h})}catch(i){this.mainHelper.onError("BISafe: failed to report builder.existingSiteInitContent",i.stack)}},a.prototype.existingSiteComplete=function(a,b){try{var c=this.consumerBiLoggerHelpers.getIntervalLoadTime(),d=this.consumerBiLoggerHelpers.getEsi(),e=this.consumerBiLoggerHelpers.getIndustryId(),f=this.consumerBiLoggerHelpers.getInstanceId(),g=this.consumerBiLoggerHelpers.getLoadTime(),h=this.consumerBiLoggerHelpers.getMetaSiteId(),i=this.consumerBiLoggerHelpers.getStructureId(),j=this.consumerBiLoggerHelpers.getAdiBuilderType();return this.mainHelper.validateNumber(c),this.mainHelper.validateGuid(d),this.mainHelper.validateString(e),this.mainHelper.validateString(f),this.mainHelper.validateNumber(g),this.mainHelper.validateGuid(h),this.mainHelper.validateString(i),this.mainHelper.validateString(a),this.mainHelper.validateNumber(b),this.mainHelper.validateString(j),this.mainHelper.log({src:66,evid:139,intervalLoadTime:c,esi:d,industryId:e,instanceId:f,loadTime:g,msid:h,structureId:i,validStory:a,timeInPage:b,adiBuilderType:j})}catch(k){this.mainHelper.onError("BISafe: failed to report builder.existingSiteComplete",k.stack)}},a.prototype.undoRedoLastChange=function(a){try{var b=this.consumerBiLoggerHelpers.getInstanceId(),c=this.consumerBiLoggerHelpers.getMetaSiteId(),d=this.consumerBiLoggerHelpers.getStructureId(),e=this.consumerBiLoggerHelpers.getIndustryId(),f=this.consumerBiLoggerHelpers.getEsi(),g=this.consumerBiLoggerHelpers.getAdiBuilderType();return this.mainHelper.validateString(b),this.mainHelper.validateGuid(c),this.mainHelper.validateString(d),this.mainHelper.validateString(e),this.mainHelper.validateGuid(f),this.mainHelper.validateString(a),this.mainHelper.validateString(g),this.consumerBiLoggerHelpers.resetLoadTime(),this.mainHelper.log({src:66,evid:140,instanceId:b,msid:c,structureId:d,industryId:e,esi:f,action:a,adiBuilderType:g})}catch(h){this.mainHelper.onError("BISafe: failed to report builder.undoRedoLastChange",h.stack)}},a.prototype.undoRedoSucces=function(a){try{var b=this.consumerBiLoggerHelpers.getInstanceId(),c=this.consumerBiLoggerHelpers.getMetaSiteId(),d=this.consumerBiLoggerHelpers.getStructureId(),e=this.consumerBiLoggerHelpers.getIndustryId(),f=this.consumerBiLoggerHelpers.getEsi(),g=this.consumerBiLoggerHelpers.getLoadTime(),h=this.consumerBiLoggerHelpers.getAdiBuilderType();return this.mainHelper.validateString(b),this.mainHelper.validateGuid(c),this.mainHelper.validateString(d),this.mainHelper.validateString(e),this.mainHelper.validateGuid(f),this.mainHelper.validateString(a),this.mainHelper.validateNumber(g),this.mainHelper.validateString(h),this.mainHelper.log({src:66,evid:141,instanceId:b,msid:c,structureId:d,industryId:e,esi:f,action:a,loadTime:g,adiBuilderType:h})}catch(i){this.mainHelper.onError("BISafe: failed to report builder.undoRedoSucces",i.stack)}},a.prototype.topBarHelpClick=function(){try{var a=this.consumerBiLoggerHelpers.getInstanceId(),b=this.consumerBiLoggerHelpers.getMetaSiteId(),c=this.consumerBiLoggerHelpers.getStructureId(),d=this.consumerBiLoggerHelpers.getIndustryId(),e=this.consumerBiLoggerHelpers.getEsi(),f=this.consumerBiLoggerHelpers.getAdiBuilderType();return this.mainHelper.validateString(a),this.mainHelper.validateGuid(b),this.mainHelper.validateString(c),this.mainHelper.validateString(d),this.mainHelper.validateGuid(e),this.mainHelper.validateString(f),this.mainHelper.log({src:66,evid:142,instanceId:a,msid:b,structureId:c,industryId:d,esi:e,adiBuilderType:f})}catch(g){this.mainHelper.onError("BISafe: failed to report builder.topBarHelpClick",g.stack)}},a.prototype.topBarEditBusinessInfoClick=function(){try{var a=this.consumerBiLoggerHelpers.getInstanceId(),b=this.consumerBiLoggerHelpers.getMetaSiteId(),c=this.consumerBiLoggerHelpers.getStructureId(),d=this.consumerBiLoggerHelpers.getIndustryId(),e=this.consumerBiLoggerHelpers.getEsi(),f=this.consumerBiLoggerHelpers.getAdiBuilderType();return this.mainHelper.validateString(a),this.mainHelper.validateGuid(b),this.mainHelper.validateString(c),this.mainHelper.validateString(d),this.mainHelper.validateGuid(e),this.mainHelper.validateString(f),this.mainHelper.log({src:66,evid:143,instanceId:a,msid:b,structureId:c,industryId:d,esi:e,adiBuilderType:f})}catch(g){this.mainHelper.onError("BISafe: failed to report builder.topBarEditBusinessInfoClick",g.stack)}},a.prototype.businessInfoEditBusinessInfoPageView=function(){try{var a=this.consumerBiLoggerHelpers.getInstanceId(),b=this.consumerBiLoggerHelpers.getMetaSiteId(),c=this.consumerBiLoggerHelpers.getStructureId(),d=this.consumerBiLoggerHelpers.getIndustryId(),e=this.consumerBiLoggerHelpers.getEsi(),f=this.consumerBiLoggerHelpers.getAdiBuilderType();return this.mainHelper.validateString(a),this.mainHelper.validateGuid(b),this.mainHelper.validateString(c),this.mainHelper.validateString(d),this.mainHelper.validateGuid(e),this.mainHelper.validateString(f),this.mainHelper.log({src:66,evid:144,instanceId:a,msid:b,structureId:c,industryId:d,esi:e,adiBuilderType:f})}catch(g){this.mainHelper.onError("BISafe: failed to report builder.businessInfoEditBusinessInfoPageView",g.stack)}},a.prototype.businessInfoUpdateChanges=function(a,b,c){try{var d=this.consumerBiLoggerHelpers.getInstanceId(),e=this.consumerBiLoggerHelpers.getMetaSiteId(),f=this.consumerBiLoggerHelpers.getStructureId(),g=this.consumerBiLoggerHelpers.getIndustryId(),h=this.consumerBiLoggerHelpers.getEsi(),i=this.consumerBiLoggerHelpers.getAdiBuilderType();return this.mainHelper.validateString(d),this.mainHelper.validateGuid(e),this.mainHelper.validateString(f),this.mainHelper.validateString(g),this.mainHelper.validateGuid(h),this.mainHelper.validateString(a),this.mainHelper.validateString(b),this.mainHelper.validateString(c),this.mainHelper.validateString(i),this.consumerBiLoggerHelpers.resetLoadTime(),this.mainHelper.log({src:66,evid:145,instanceId:d,msid:e,structureId:f,industryId:g,esi:h,fieldsAdded:a,fieldsRemoved:b,fieldsUpdated:c,adiBuilderType:i})}catch(j){this.mainHelper.onError("BISafe: failed to report builder.businessInfoUpdateChanges",j.stack)}},a.prototype.businessInfoUpdateChangesSuccess=function(){try{var a=this.consumerBiLoggerHelpers.getInstanceId(),b=this.consumerBiLoggerHelpers.getMetaSiteId(),c=this.consumerBiLoggerHelpers.getStructureId(),d=this.consumerBiLoggerHelpers.getIndustryId(),e=this.consumerBiLoggerHelpers.getEsi(),f=this.consumerBiLoggerHelpers.getLoadTime(),g=this.consumerBiLoggerHelpers.getAdiBuilderType();return this.mainHelper.validateString(a),this.mainHelper.validateGuid(b),this.mainHelper.validateString(c),this.mainHelper.validateString(d),this.mainHelper.validateGuid(e),this.mainHelper.validateNumber(f),this.mainHelper.validateString(g),this.mainHelper.log({src:66,evid:146,instanceId:a,msid:b,structureId:c,industryId:d,esi:e,loadTime:f,adiBuilderType:g})}catch(h){this.mainHelper.onError("BISafe: failed to report builder.businessInfoUpdateChangesSuccess",h.stack)}},a.prototype.businessInfoClosePage=function(){try{var a=this.consumerBiLoggerHelpers.getInstanceId(),b=this.consumerBiLoggerHelpers.getMetaSiteId(),c=this.consumerBiLoggerHelpers.getStructureId(),d=this.consumerBiLoggerHelpers.getIndustryId(),e=this.consumerBiLoggerHelpers.getEsi(),f=this.consumerBiLoggerHelpers.getAdiBuilderType();return this.mainHelper.validateString(a),this.mainHelper.validateGuid(b),this.mainHelper.validateString(c),this.mainHelper.validateString(d),this.mainHelper.validateGuid(e),this.mainHelper.validateString(f),this.mainHelper.log({src:66,evid:147,instanceId:a,msid:b,structureId:c,industryId:d,esi:e,adiBuilderType:f})}catch(g){this.mainHelper.onError("BISafe: failed to report builder.businessInfoClosePage",g.stack)}},a.prototype.topBarGoToMyDashboard=function(){try{var a=this.consumerBiLoggerHelpers.getInstanceId(),b=this.consumerBiLoggerHelpers.getMetaSiteId(),c=this.consumerBiLoggerHelpers.getStructureId(),d=this.consumerBiLoggerHelpers.getIndustryId(),e=this.consumerBiLoggerHelpers.getEsi(),f=this.consumerBiLoggerHelpers.getAdiBuilderType();return this.mainHelper.validateString(a),this.mainHelper.validateGuid(b),this.mainHelper.validateString(c),this.mainHelper.validateString(d),this.mainHelper.validateGuid(e),this.mainHelper.validateString(f),this.mainHelper.log({src:66,evid:148,instanceId:a,msid:b,structureId:c,industryId:d,esi:e,adiBuilderType:f})}catch(g){this.mainHelper.onError("BISafe: failed to report builder.topBarGoToMyDashboard",g.stack)}},a.prototype.topBarGoToSiteSettings=function(){try{var a=this.consumerBiLoggerHelpers.getInstanceId(),b=this.consumerBiLoggerHelpers.getMetaSiteId(),c=this.consumerBiLoggerHelpers.getStructureId(),d=this.consumerBiLoggerHelpers.getIndustryId(),e=this.consumerBiLoggerHelpers.getEsi(),f=this.consumerBiLoggerHelpers.getAdiBuilderType();return this.mainHelper.validateString(a),this.mainHelper.validateGuid(b),this.mainHelper.validateString(c),this.mainHelper.validateString(d),this.mainHelper.validateGuid(e),this.mainHelper.validateString(f),this.mainHelper.log({src:66,evid:149,instanceId:a,msid:b,structureId:c,industryId:d,esi:e,adiBuilderType:f})}catch(g){this.mainHelper.onError("BISafe: failed to report builder.topBarGoToSiteSettings",g.stack)}},a.prototype.topBarConnectDomainClick=function(){try{var a=this.consumerBiLoggerHelpers.getInstanceId(),b=this.consumerBiLoggerHelpers.getMetaSiteId(),c=this.consumerBiLoggerHelpers.getStructureId(),d=this.consumerBiLoggerHelpers.getIndustryId(),e=this.consumerBiLoggerHelpers.getEsi(),f=this.consumerBiLoggerHelpers.getAdiBuilderType();return this.mainHelper.validateString(a),this.mainHelper.validateGuid(b),this.mainHelper.validateString(c),this.mainHelper.validateString(d),this.mainHelper.validateGuid(e),this.mainHelper.validateString(f),this.mainHelper.log({src:66,evid:150,instanceId:a,msid:b,structureId:c,industryId:d,esi:e,adiBuilderType:f})}catch(g){this.mainHelper.onError("BISafe: failed to report builder.topBarConnectDomainClick",g.stack)}},a.prototype.connectDomainPageView=function(a){try{var b=this.consumerBiLoggerHelpers.getInstanceId(),c=this.consumerBiLoggerHelpers.getMetaSiteId(),d=this.consumerBiLoggerHelpers.getStructureId(),e=this.consumerBiLoggerHelpers.getIndustryId(),f=this.consumerBiLoggerHelpers.getEsi(),g=this.consumerBiLoggerHelpers.getAdiBuilderType();return this.mainHelper.validateString(b),this.mainHelper.validateGuid(c),this.mainHelper.validateString(d),this.mainHelper.validateString(e),this.mainHelper.validateGuid(f),this.mainHelper.validateString(a),this.mainHelper.validateString(g),this.mainHelper.log({src:66,evid:151,instanceId:b,msid:c,structureId:d,industryId:e,esi:f,referral:a,adiBuilderType:g})}catch(h){this.mainHelper.onError("BISafe: failed to report builder.connectDomainPageView",h.stack)}},a.prototype.connectDomainNavigateToDomainSPages=function(a){try{var b=this.consumerBiLoggerHelpers.getInstanceId(),c=this.consumerBiLoggerHelpers.getMetaSiteId(),d=this.consumerBiLoggerHelpers.getStructureId(),e=this.consumerBiLoggerHelpers.getIndustryId(),f=this.consumerBiLoggerHelpers.getEsi(),g=this.consumerBiLoggerHelpers.getAdiBuilderType();return this.mainHelper.validateString(b),this.mainHelper.validateGuid(c),this.mainHelper.validateString(d),this.mainHelper.validateString(e),this.mainHelper.validateGuid(f),this.mainHelper.validateString(a),this.mainHelper.validateString(g),this.mainHelper.log({src:66,evid:152,instanceId:b,msid:c,structureId:d,industryId:e,esi:f,action:a,adiBuilderType:g})}catch(h){this.mainHelper.onError("BISafe: failed to report builder.connectDomainNavigateToDomainSPages",h.stack)}},a.prototype.connectDomainClosePage=function(){try{var a=this.consumerBiLoggerHelpers.getInstanceId(),b=this.consumerBiLoggerHelpers.getMetaSiteId(),c=this.consumerBiLoggerHelpers.getStructureId(),d=this.consumerBiLoggerHelpers.getIndustryId(),e=this.consumerBiLoggerHelpers.getEsi(),f=this.consumerBiLoggerHelpers.getAdiBuilderType();return this.mainHelper.validateString(a),this.mainHelper.validateGuid(b),this.mainHelper.validateString(c),this.mainHelper.validateString(d),this.mainHelper.validateGuid(e),this.mainHelper.validateString(f),this.mainHelper.log({src:66,evid:153,instanceId:a,msid:b,structureId:c,industryId:d,esi:e,adiBuilderType:f})}catch(g){this.mainHelper.onError("BISafe: failed to report builder.connectDomainClosePage",g.stack)}},a.prototype.topBarViewSiteClick=function(){try{var a=this.consumerBiLoggerHelpers.getInstanceId(),b=this.consumerBiLoggerHelpers.getMetaSiteId(),c=this.consumerBiLoggerHelpers.getStructureId(),d=this.consumerBiLoggerHelpers.getIndustryId(),e=this.consumerBiLoggerHelpers.getEsi(),f=this.consumerBiLoggerHelpers.getAdiBuilderType();return this.mainHelper.validateString(a),this.mainHelper.validateGuid(b),this.mainHelper.validateString(c),this.mainHelper.validateString(d),this.mainHelper.validateGuid(e),this.mainHelper.validateString(f),this.mainHelper.log({src:66,evid:154,instanceId:a,msid:b,structureId:c,industryId:d,esi:e,adiBuilderType:f})}catch(g){this.mainHelper.onError("BISafe: failed to report builder.topBarViewSiteClick",g.stack)}},a.prototype.topBarGoToEditorClick=function(){try{var a=this.consumerBiLoggerHelpers.getInstanceId(),b=this.consumerBiLoggerHelpers.getMetaSiteId(),c=this.consumerBiLoggerHelpers.getStructureId(),d=this.consumerBiLoggerHelpers.getIndustryId(),e=this.consumerBiLoggerHelpers.getEsi(),f=this.consumerBiLoggerHelpers.getAdiBuilderType();return this.mainHelper.validateString(a),this.mainHelper.validateGuid(b),this.mainHelper.validateString(c),this.mainHelper.validateString(d),this.mainHelper.validateGuid(e),this.mainHelper.validateString(f),this.mainHelper.log({src:66,evid:155,instanceId:a,msid:b,structureId:c,industryId:d,esi:e,adiBuilderType:f})}catch(g){this.mainHelper.onError("BISafe: failed to report builder.topBarGoToEditorClick",g.stack)}},a.prototype.goToEditorNotificationPageView=function(){try{var a=this.consumerBiLoggerHelpers.getInstanceId(),b=this.consumerBiLoggerHelpers.getMetaSiteId(),c=this.consumerBiLoggerHelpers.getStructureId(),d=this.consumerBiLoggerHelpers.getIndustryId(),e=this.consumerBiLoggerHelpers.getEsi(),f=this.consumerBiLoggerHelpers.getAdiBuilderType();return this.mainHelper.validateString(a),this.mainHelper.validateGuid(b),this.mainHelper.validateString(c),this.mainHelper.validateString(d),this.mainHelper.validateGuid(e),this.mainHelper.validateString(f),this.mainHelper.log({src:66,evid:156,instanceId:a,msid:b,structureId:c,industryId:d,esi:e,adiBuilderType:f})}catch(g){this.mainHelper.onError("BISafe: failed to report builder.goToEditorNotificationPageView",g.stack)}},a.prototype.goToEditorContinueToProEditorClick=function(){try{var a=this.consumerBiLoggerHelpers.getInstanceId(),b=this.consumerBiLoggerHelpers.getMetaSiteId(),c=this.consumerBiLoggerHelpers.getStructureId(),d=this.consumerBiLoggerHelpers.getIndustryId(),e=this.consumerBiLoggerHelpers.getEsi(),f=this.consumerBiLoggerHelpers.getAdiBuilderType();return this.mainHelper.validateString(a),this.mainHelper.validateGuid(b),this.mainHelper.validateString(c),this.mainHelper.validateString(d),this.mainHelper.validateGuid(e),this.mainHelper.validateString(f),this.mainHelper.log({src:66,evid:157,instanceId:a,msid:b,structureId:c,industryId:d,esi:e,adiBuilderType:f})}catch(g){this.mainHelper.onError("BISafe: failed to report builder.goToEditorContinueToProEditorClick",g.stack)}},a.prototype.goToEditorClosePage=function(){try{var a=this.consumerBiLoggerHelpers.getInstanceId(),b=this.consumerBiLoggerHelpers.getMetaSiteId(),c=this.consumerBiLoggerHelpers.getStructureId(),d=this.consumerBiLoggerHelpers.getIndustryId(),e=this.consumerBiLoggerHelpers.getEsi(),f=this.consumerBiLoggerHelpers.getAdiBuilderType();return this.mainHelper.validateString(a),this.mainHelper.validateGuid(b),this.mainHelper.validateString(c),this.mainHelper.validateString(d),this.mainHelper.validateGuid(e),this.mainHelper.validateString(f),this.mainHelper.log({src:66,evid:158,instanceId:a,msid:b,structureId:c,industryId:d,esi:e,adiBuilderType:f})}catch(g){this.mainHelper.onError("BISafe: failed to report builder.goToEditorClosePage",g.stack);
}},a.prototype.topBarPreviewSiteClick=function(a){try{var b=this.consumerBiLoggerHelpers.getInstanceId(),c=this.consumerBiLoggerHelpers.getMetaSiteId(),d=this.consumerBiLoggerHelpers.getStructureId(),e=this.consumerBiLoggerHelpers.getIndustryId(),f=this.consumerBiLoggerHelpers.getEsi(),g=this.consumerBiLoggerHelpers.getAdiBuilderType();return this.mainHelper.validateString(b),this.mainHelper.validateGuid(c),this.mainHelper.validateString(d),this.mainHelper.validateString(e),this.mainHelper.validateGuid(f),this.mainHelper.validateString(a),this.mainHelper.validateString(g),this.consumerBiLoggerHelpers.resetLoadTime(),this.mainHelper.log({src:66,evid:159,instanceId:b,msid:c,structureId:d,industryId:e,esi:f,origin:a,adiBuilderType:g})}catch(h){this.mainHelper.onError("BISafe: failed to report builder.topBarPreviewSiteClick",h.stack)}},a.prototype.previewSitePageView=function(){try{var a=this.consumerBiLoggerHelpers.getInstanceId(),b=this.consumerBiLoggerHelpers.getMetaSiteId(),c=this.consumerBiLoggerHelpers.getStructureId(),d=this.consumerBiLoggerHelpers.getIndustryId(),e=this.consumerBiLoggerHelpers.getEsi(),f=this.consumerBiLoggerHelpers.getAdiBuilderType();return this.mainHelper.validateString(a),this.mainHelper.validateGuid(b),this.mainHelper.validateString(c),this.mainHelper.validateString(d),this.mainHelper.validateGuid(e),this.mainHelper.validateString(f),this.mainHelper.log({src:66,evid:160,instanceId:a,msid:b,structureId:c,industryId:d,esi:e,adiBuilderType:f})}catch(g){this.mainHelper.onError("BISafe: failed to report builder.previewSitePageView",g.stack)}},a.prototype.previewSiteSwitchToMobileDesktopView=function(a){try{var b=this.consumerBiLoggerHelpers.getInstanceId(),c=this.consumerBiLoggerHelpers.getMetaSiteId(),d=this.consumerBiLoggerHelpers.getStructureId(),e=this.consumerBiLoggerHelpers.getIndustryId(),f=this.consumerBiLoggerHelpers.getEsi(),g=this.consumerBiLoggerHelpers.getAdiBuilderType();return this.mainHelper.validateString(b),this.mainHelper.validateGuid(c),this.mainHelper.validateString(d),this.mainHelper.validateString(e),this.mainHelper.validateGuid(f),this.mainHelper.validateString(a),this.mainHelper.validateString(g),this.mainHelper.log({src:66,evid:161,instanceId:b,msid:c,structureId:d,industryId:e,esi:f,viewMode:a,adiBuilderType:g})}catch(h){this.mainHelper.onError("BISafe: failed to report builder.previewSiteSwitchToMobileDesktopView",h.stack)}},a.prototype.previewSiteClosePage=function(){try{var a=this.consumerBiLoggerHelpers.getInstanceId(),b=this.consumerBiLoggerHelpers.getMetaSiteId(),c=this.consumerBiLoggerHelpers.getStructureId(),d=this.consumerBiLoggerHelpers.getIndustryId(),e=this.consumerBiLoggerHelpers.getEsi(),f=this.consumerBiLoggerHelpers.getAdiBuilderType();return this.mainHelper.validateString(a),this.mainHelper.validateGuid(b),this.mainHelper.validateString(c),this.mainHelper.validateString(d),this.mainHelper.validateGuid(e),this.mainHelper.validateString(f),this.mainHelper.log({src:66,evid:162,instanceId:a,msid:b,structureId:c,industryId:d,esi:e,adiBuilderType:f})}catch(g){this.mainHelper.onError("BISafe: failed to report builder.previewSiteClosePage",g.stack)}},a.prototype.topBarPublishSiteClick=function(){try{var a=this.consumerBiLoggerHelpers.getInstanceId(),b=this.consumerBiLoggerHelpers.getMetaSiteId(),c=this.consumerBiLoggerHelpers.getStructureId(),d=this.consumerBiLoggerHelpers.getIndustryId(),e=this.consumerBiLoggerHelpers.getEsi(),f=this.consumerBiLoggerHelpers.getAdiBuilderType();return this.mainHelper.validateString(a),this.mainHelper.validateGuid(b),this.mainHelper.validateString(c),this.mainHelper.validateString(d),this.mainHelper.validateGuid(e),this.mainHelper.validateString(f),this.mainHelper.log({src:66,evid:163,instanceId:a,msid:b,structureId:c,industryId:d,esi:e,adiBuilderType:f})}catch(g){this.mainHelper.onError("BISafe: failed to report builder.topBarPublishSiteClick",g.stack)}},a.prototype.publishSiteCongratsPageView=function(){try{var a=this.consumerBiLoggerHelpers.getInstanceId(),b=this.consumerBiLoggerHelpers.getMetaSiteId(),c=this.consumerBiLoggerHelpers.getStructureId(),d=this.consumerBiLoggerHelpers.getIndustryId(),e=this.consumerBiLoggerHelpers.getEsi(),f=this.consumerBiLoggerHelpers.getAdiBuilderType();return this.mainHelper.validateString(a),this.mainHelper.validateGuid(b),this.mainHelper.validateString(c),this.mainHelper.validateString(d),this.mainHelper.validateGuid(e),this.mainHelper.validateString(f),this.mainHelper.log({src:66,evid:164,instanceId:a,msid:b,structureId:c,industryId:d,esi:e,adiBuilderType:f})}catch(g){this.mainHelper.onError("BISafe: failed to report builder.publishSiteCongratsPageView",g.stack)}},a.prototype.publishSiteClosePage=function(){try{var a=this.consumerBiLoggerHelpers.getInstanceId(),b=this.consumerBiLoggerHelpers.getMetaSiteId(),c=this.consumerBiLoggerHelpers.getStructureId(),d=this.consumerBiLoggerHelpers.getIndustryId(),e=this.consumerBiLoggerHelpers.getEsi(),f=this.consumerBiLoggerHelpers.getAdiBuilderType();return this.mainHelper.validateString(a),this.mainHelper.validateGuid(b),this.mainHelper.validateString(c),this.mainHelper.validateString(d),this.mainHelper.validateGuid(e),this.mainHelper.validateString(f),this.mainHelper.log({src:66,evid:165,instanceId:a,msid:b,structureId:c,industryId:d,esi:e,adiBuilderType:f})}catch(g){this.mainHelper.onError("BISafe: failed to report builder.publishSiteClosePage",g.stack)}},a.prototype.zoomInOut=function(a,b){try{var c=this.consumerBiLoggerHelpers.getInstanceId(),d=this.consumerBiLoggerHelpers.getMetaSiteId(),e=this.consumerBiLoggerHelpers.getStructureId(),f=this.consumerBiLoggerHelpers.getIndustryId(),g=this.consumerBiLoggerHelpers.getEsi(),h=this.consumerBiLoggerHelpers.getAdiBuilderType();return this.mainHelper.validateString(c),this.mainHelper.validateGuid(d),this.mainHelper.validateString(e),this.mainHelper.validateString(f),this.mainHelper.validateGuid(g),this.mainHelper.validateString(a),this.mainHelper.validateNumber(b),this.mainHelper.validateString(h),this.mainHelper.log({src:66,evid:166,instanceId:c,msid:d,structureId:e,industryId:f,esi:g,zoomType:a,scale:b,adiBuilderType:h})}catch(i){this.mainHelper.onError("BISafe: failed to report builder.zoomInOut",i.stack)}},a.prototype.loadingError=function(a){try{var b=this.consumerBiLoggerHelpers.getInstanceId(),c=this.consumerBiLoggerHelpers.getMetaSiteId(),d=this.consumerBiLoggerHelpers.getIsNewSite(),e=this.consumerBiLoggerHelpers.getAdiBuilderType();return this.mainHelper.validateString(b),this.mainHelper.validateGuid(c),this.mainHelper.validateString(a),this.mainHelper.validateString(d),this.mainHelper.validateString(e),this.mainHelper.log({src:66,evid:167,instanceId:b,msid:c,err:a,loadType:d,adiBuilderType:e})}catch(a){this.mainHelper.onError("BISafe: failed to report builder.loadingError",a.stack)}},a.prototype.autosaveStart=function(a){try{var b=this.consumerBiLoggerHelpers.getInstanceId(),c=this.consumerBiLoggerHelpers.getEsi(),d=this.consumerBiLoggerHelpers.getMetaSiteId(),e=this.consumerBiLoggerHelpers.getStoryRevision(),f=this.consumerBiLoggerHelpers.getAdiBuilderType();return this.mainHelper.validateString(b),this.mainHelper.validateGuid(c),this.mainHelper.validateGuid(d),this.mainHelper.validateNumber(e),this.mainHelper.validateString(f),this.mainHelper.log({src:66,evid:168,saveToSanta:a,instanceId:b,esi:c,msid:d,revision:e,adiBuilderType:f})}catch(g){this.mainHelper.onError("BISafe: failed to report builder.autosaveStart",g.stack)}},a.prototype.autosaveEnd=function(){try{var a=this.consumerBiLoggerHelpers.getEsi(),b=this.consumerBiLoggerHelpers.getInstanceId(),c=this.consumerBiLoggerHelpers.getStoryRevision(),d=this.consumerBiLoggerHelpers.getAdiBuilderType();return this.mainHelper.validateGuid(a),this.mainHelper.validateString(b),this.mainHelper.validateNumber(c),this.mainHelper.validateString(d),this.mainHelper.log({src:66,evid:174,esi:a,instanceId:b,revision:c,adiBuilderType:d})}catch(e){this.mainHelper.onError("BISafe: failed to report builder.autosaveEnd",e.stack)}},a.prototype.stillLoadingSite=function(a,b){try{var c=this.consumerBiLoggerHelpers.getEsi(),d=this.consumerBiLoggerHelpers.getIndustryId(),e=this.consumerBiLoggerHelpers.getInstanceId(),f=this.consumerBiLoggerHelpers.getLoadTime(),g=this.consumerBiLoggerHelpers.getMetaSiteId(),h=this.consumerBiLoggerHelpers.getStructureId(),i=this.consumerBiLoggerHelpers.getAdiBuilderType();return this.mainHelper.validateString(a),this.mainHelper.validateNumber(b),this.mainHelper.validateGuid(c),this.mainHelper.validateString(d),this.mainHelper.validateString(e),this.mainHelper.validateNumber(f),this.mainHelper.validateGuid(g),this.mainHelper.validateString(h),this.mainHelper.validateString(i),this.mainHelper.log({src:66,evid:175,siteMode:a,interval:b,esi:c,industryId:d,instanceId:e,loadTime:f,msid:g,structureId:h,adiBuilderType:i})}catch(j){this.mainHelper.onError("BISafe: failed to report builder.stillLoadingSite",j.stack)}},a.prototype.topBarGiveFeedbackClick=function(){try{var a=this.consumerBiLoggerHelpers.getEsi(),b=this.consumerBiLoggerHelpers.getIndustryId(),c=this.consumerBiLoggerHelpers.getInstanceId(),d=this.consumerBiLoggerHelpers.getMetaSiteId(),e=this.consumerBiLoggerHelpers.getStructureId(),f=this.consumerBiLoggerHelpers.getAdiBuilderType();return this.mainHelper.validateGuid(a),this.mainHelper.validateString(b),this.mainHelper.validateString(c),this.mainHelper.validateGuid(d),this.mainHelper.validateString(e),this.mainHelper.validateString(f),this.mainHelper.log({src:66,evid:178,esi:a,industryId:b,instanceId:c,msid:d,structureId:e,adiBuilderType:f})}catch(g){this.mainHelper.onError("BISafe: failed to report builder.topBarGiveFeedbackClick",g.stack)}},a.prototype.topBarPreviewSiteSuccess=function(){try{var a=this.consumerBiLoggerHelpers.getEsi(),b=this.consumerBiLoggerHelpers.getIndustryId(),c=this.consumerBiLoggerHelpers.getInstanceId(),d=this.consumerBiLoggerHelpers.getMetaSiteId(),e=this.consumerBiLoggerHelpers.getStructureId(),f=this.consumerBiLoggerHelpers.getLoadTime(),g=this.consumerBiLoggerHelpers.getAdiBuilderType();return this.mainHelper.validateGuid(a),this.mainHelper.validateString(b),this.mainHelper.validateString(c),this.mainHelper.validateGuid(d),this.mainHelper.validateString(e),this.mainHelper.validateNumber(f),this.mainHelper.validateString(g),this.mainHelper.log({src:66,evid:179,esi:a,industryId:b,instanceId:c,msid:d,structureId:e,loadTime:f,adiBuilderType:g})}catch(h){this.mainHelper.onError("BISafe: failed to report builder.topBarPreviewSiteSuccess",h.stack)}},a.prototype.topBarCreateNewSite=function(){try{var a=this.consumerBiLoggerHelpers.getEsi(),b=this.consumerBiLoggerHelpers.getIndustryId(),c=this.consumerBiLoggerHelpers.getInstanceId(),d=this.consumerBiLoggerHelpers.getMetaSiteId(),e=this.consumerBiLoggerHelpers.getStructureId(),f=this.consumerBiLoggerHelpers.getAdiBuilderType();return this.mainHelper.validateGuid(a),this.mainHelper.validateString(b),this.mainHelper.validateString(c),this.mainHelper.validateGuid(d),this.mainHelper.validateString(e),this.mainHelper.validateString(f),this.mainHelper.log({src:66,evid:180,esi:a,industryId:b,instanceId:c,msid:d,structureId:e,adiBuilderType:f})}catch(g){this.mainHelper.onError("BISafe: failed to report builder.topBarCreateNewSite",g.stack)}},a.prototype.topBarSeoPanelGetFoundOnGoogleClick=function(a){try{var b=this.consumerBiLoggerHelpers.getEsi(),c=this.consumerBiLoggerHelpers.getIndustryId(),d=this.consumerBiLoggerHelpers.getInstanceId(),e=this.consumerBiLoggerHelpers.getMetaSiteId(),f=this.consumerBiLoggerHelpers.getStructureId(),g=this.consumerBiLoggerHelpers.getAdiBuilderType();return this.mainHelper.validateString(a),this.mainHelper.validateGuid(b),this.mainHelper.validateString(c),this.mainHelper.validateString(d),this.mainHelper.validateGuid(e),this.mainHelper.validateString(f),this.mainHelper.validateString(g),this.mainHelper.log({src:66,evid:181,origin:a,esi:b,industryId:c,instanceId:d,msid:e,structureId:f,adiBuilderType:g})}catch(h){this.mainHelper.onError("BISafe: failed to report builder.topBarSeoPanelGetFoundOnGoogleClick",h.stack)}},a.prototype.topBarSiteMenuDialogOpen=function(){try{var a=this.consumerBiLoggerHelpers.getAdiBuilderType(),b=this.consumerBiLoggerHelpers.getEsi(),c=this.consumerBiLoggerHelpers.getIndustryId(),d=this.consumerBiLoggerHelpers.getInstanceId(),e=this.consumerBiLoggerHelpers.getMetaSiteId(),f=this.consumerBiLoggerHelpers.getStructureId();return this.mainHelper.validateString(a),this.mainHelper.validateGuid(b),this.mainHelper.validateString(c),this.mainHelper.validateString(d),this.mainHelper.validateGuid(e),this.mainHelper.validateString(f),this.mainHelper.log({src:66,evid:182,adiBuilderType:a,esi:b,industryId:c,instanceId:d,msid:e,structureId:f})}catch(g){this.mainHelper.onError("BISafe: failed to report builder.topBarSiteMenuDialogOpen",g.stack)}},a.prototype.coreLoadingWizardServiceCoreInitializeStart=function(){try{var a=this.consumerBiLoggerHelpers.getIntervalLoadTime(),b=this.consumerBiLoggerHelpers.getEsi(),c=this.consumerBiLoggerHelpers.getIndustryId(),d=this.consumerBiLoggerHelpers.getInstanceId(),e=this.consumerBiLoggerHelpers.getLoadTime(),f=this.consumerBiLoggerHelpers.getIsNewSite(),g=this.consumerBiLoggerHelpers.getMetaSiteId(),h=this.consumerBiLoggerHelpers.getStructureId(),i=this.consumerBiLoggerHelpers.getAdiBuilderType();return this.mainHelper.validateNumber(a),this.mainHelper.validateGuid(b),this.mainHelper.validateString(c),this.mainHelper.validateString(d),this.mainHelper.validateNumber(e),this.mainHelper.validateString(f),this.mainHelper.validateGuid(g),this.mainHelper.validateString(h),this.mainHelper.validateString(i),this.mainHelper.log({src:66,evid:12,intervalLoadTime:a,esi:b,industryId:c,instanceId:d,loadTime:e,loadType:f,msid:g,structureId:h,adiBuilderType:i})}catch(j){this.mainHelper.onError("BISafe: failed to report builder.coreLoadingWizardServiceCoreInitializeStart",j.stack)}},a.prototype.coreLoadingWizardServiceLoadPreview=function(){try{var a=this.consumerBiLoggerHelpers.getIntervalLoadTime(),b=this.consumerBiLoggerHelpers.getEsi(),c=this.consumerBiLoggerHelpers.getIndustryId(),d=this.consumerBiLoggerHelpers.getInstanceId(),e=this.consumerBiLoggerHelpers.getLoadTime(),f=this.consumerBiLoggerHelpers.getIsNewSite(),g=this.consumerBiLoggerHelpers.getMetaSiteId(),h=this.consumerBiLoggerHelpers.getStructureId(),i=this.consumerBiLoggerHelpers.getAdiBuilderType();return this.mainHelper.validateNumber(a),this.mainHelper.validateGuid(b),this.mainHelper.validateString(c),this.mainHelper.validateString(d),this.mainHelper.validateNumber(e),this.mainHelper.validateString(f),this.mainHelper.validateGuid(g),this.mainHelper.validateString(h),this.mainHelper.validateString(i),this.mainHelper.log({src:66,evid:13,intervalLoadTime:a,esi:b,industryId:c,instanceId:d,loadTime:e,loadType:f,msid:g,structureId:h,adiBuilderType:i})}catch(j){this.mainHelper.onError("BISafe: failed to report builder.coreLoadingWizardServiceLoadPreview",j.stack)}},a.prototype.coreLoadingWizardServiceMenuServiceInitialize=function(){try{var a=this.consumerBiLoggerHelpers.getIntervalLoadTime(),b=this.consumerBiLoggerHelpers.getEsi(),c=this.consumerBiLoggerHelpers.getIndustryId(),d=this.consumerBiLoggerHelpers.getInstanceId(),e=this.consumerBiLoggerHelpers.getLoadTime(),f=this.consumerBiLoggerHelpers.getIsNewSite(),g=this.consumerBiLoggerHelpers.getMetaSiteId(),h=this.consumerBiLoggerHelpers.getStructureId(),i=this.consumerBiLoggerHelpers.getAdiBuilderType();return this.mainHelper.validateNumber(a),this.mainHelper.validateGuid(b),this.mainHelper.validateString(c),this.mainHelper.validateString(d),this.mainHelper.validateNumber(e),this.mainHelper.validateString(f),this.mainHelper.validateGuid(g),this.mainHelper.validateString(h),this.mainHelper.validateString(i),this.mainHelper.log({src:66,evid:14,intervalLoadTime:a,esi:b,industryId:c,instanceId:d,loadTime:e,loadType:f,msid:g,structureId:h,adiBuilderType:i})}catch(j){this.mainHelper.onError("BISafe: failed to report builder.coreLoadingWizardServiceMenuServiceInitialize",j.stack)}},a.prototype.coreLoadingLoadLayoutsComplete=function(){try{var a=this.consumerBiLoggerHelpers.getIntervalLoadTime(),b=this.consumerBiLoggerHelpers.getEsi(),c=this.consumerBiLoggerHelpers.getIndustryId(),d=this.consumerBiLoggerHelpers.getInstanceId(),e=this.consumerBiLoggerHelpers.getLoadTime(),f=this.consumerBiLoggerHelpers.getIsNewSite(),g=this.consumerBiLoggerHelpers.getMetaSiteId(),h=this.consumerBiLoggerHelpers.getStructureId(),i=this.consumerBiLoggerHelpers.getAdiBuilderType();return this.mainHelper.validateNumber(a),this.mainHelper.validateGuid(b),this.mainHelper.validateString(c),this.mainHelper.validateString(d),this.mainHelper.validateNumber(e),this.mainHelper.validateString(f),this.mainHelper.validateGuid(g),this.mainHelper.validateString(h),this.mainHelper.validateString(i),this.mainHelper.log({src:66,evid:15,intervalLoadTime:a,esi:b,industryId:c,instanceId:d,loadTime:e,loadType:f,msid:g,structureId:h,adiBuilderType:i})}catch(j){this.mainHelper.onError("BISafe: failed to report builder.coreLoadingLoadLayoutsComplete",j.stack)}},a.prototype.coreLoadingWizardServiceChangeStory=function(){try{var a=this.consumerBiLoggerHelpers.getIntervalLoadTime(),b=this.consumerBiLoggerHelpers.getEsi(),c=this.consumerBiLoggerHelpers.getIndustryId(),d=this.consumerBiLoggerHelpers.getInstanceId(),e=this.consumerBiLoggerHelpers.getLoadTime(),f=this.consumerBiLoggerHelpers.getIsNewSite(),g=this.consumerBiLoggerHelpers.getMetaSiteId(),h=this.consumerBiLoggerHelpers.getStructureId(),i=this.consumerBiLoggerHelpers.getAdiBuilderType();return this.mainHelper.validateNumber(a),this.mainHelper.validateGuid(b),this.mainHelper.validateString(c),this.mainHelper.validateString(d),this.mainHelper.validateNumber(e),this.mainHelper.validateString(f),this.mainHelper.validateGuid(g),this.mainHelper.validateString(h),this.mainHelper.validateString(i),this.mainHelper.log({src:66,evid:16,intervalLoadTime:a,esi:b,industryId:c,instanceId:d,loadTime:e,loadType:f,msid:g,structureId:h,adiBuilderType:i})}catch(j){this.mainHelper.onError("BISafe: failed to report builder.coreLoadingWizardServiceChangeStory",j.stack)}},a.prototype.coreLoadingWizardServiceSetStoryStyles=function(){try{var a=this.consumerBiLoggerHelpers.getIntervalLoadTime(),b=this.consumerBiLoggerHelpers.getEsi(),c=this.consumerBiLoggerHelpers.getIndustryId(),d=this.consumerBiLoggerHelpers.getInstanceId(),e=this.consumerBiLoggerHelpers.getLoadTime(),f=this.consumerBiLoggerHelpers.getIsNewSite(),g=this.consumerBiLoggerHelpers.getMetaSiteId(),h=this.consumerBiLoggerHelpers.getStructureId(),i=this.consumerBiLoggerHelpers.getAdiBuilderType();return this.mainHelper.validateNumber(a),this.mainHelper.validateGuid(b),this.mainHelper.validateString(c),this.mainHelper.validateString(d),this.mainHelper.validateNumber(e),this.mainHelper.validateString(f),this.mainHelper.validateGuid(g),this.mainHelper.validateString(h),this.mainHelper.validateString(i),this.mainHelper.log({src:66,evid:17,intervalLoadTime:a,esi:b,industryId:c,instanceId:d,loadTime:e,loadType:f,msid:g,structureId:h,adiBuilderType:i})}catch(j){this.mainHelper.onError("BISafe: failed to report builder.coreLoadingWizardServiceSetStoryStyles",j.stack)}},a.prototype.coreLoadingLoadThemChooserComplete=function(){try{var a=this.consumerBiLoggerHelpers.getIntervalLoadTime(),b=this.consumerBiLoggerHelpers.getEsi(),c=this.consumerBiLoggerHelpers.getIndustryId(),d=this.consumerBiLoggerHelpers.getInstanceId(),e=this.consumerBiLoggerHelpers.getLoadTime(),f=this.consumerBiLoggerHelpers.getMetaSiteId(),g=this.consumerBiLoggerHelpers.getStructureId(),h=this.consumerBiLoggerHelpers.getAdiBuilderType();return this.mainHelper.validateNumber(a),this.mainHelper.validateGuid(b),this.mainHelper.validateString(c),this.mainHelper.validateString(d),this.mainHelper.validateNumber(e),this.mainHelper.validateGuid(f),this.mainHelper.validateString(g),this.mainHelper.validateString(h),this.mainHelper.log({src:66,evid:18,intervalLoadTime:a,esi:b,industryId:c,instanceId:d,loadTime:e,msid:f,structureId:g,adiBuilderType:h})}catch(i){this.mainHelper.onError("BISafe: failed to report builder.coreLoadingLoadThemChooserComplete",i.stack)}},a.prototype.coreLoadingLoadLayoutSolverComplete=function(){try{var a=this.consumerBiLoggerHelpers.getIntervalLoadTime(),b=this.consumerBiLoggerHelpers.getEsi(),c=this.consumerBiLoggerHelpers.getIndustryId(),d=this.consumerBiLoggerHelpers.getInstanceId(),e=this.consumerBiLoggerHelpers.getLoadTime(),f=this.consumerBiLoggerHelpers.getMetaSiteId(),g=this.consumerBiLoggerHelpers.getStructureId(),h=this.consumerBiLoggerHelpers.getAdiBuilderType();return this.mainHelper.validateNumber(a),this.mainHelper.validateGuid(b),this.mainHelper.validateString(c),this.mainHelper.validateString(d),this.mainHelper.validateNumber(e),this.mainHelper.validateGuid(f),this.mainHelper.validateString(g),this.mainHelper.validateString(h),this.mainHelper.log({src:66,evid:19,intervalLoadTime:a,esi:b,industryId:c,instanceId:d,loadTime:e,msid:f,structureId:g,adiBuilderType:h})}catch(i){this.mainHelper.onError("BISafe: failed to report builder.coreLoadingLoadLayoutSolverComplete",i.stack)}},a.prototype.coreLoadingLoadIframeStart=function(){try{var a=this.consumerBiLoggerHelpers.getIntervalLoadTime(),b=this.consumerBiLoggerHelpers.getEsi(),c=this.consumerBiLoggerHelpers.getIndustryId(),d=this.consumerBiLoggerHelpers.getInstanceId(),e=this.consumerBiLoggerHelpers.getLoadTime(),f=this.consumerBiLoggerHelpers.getMetaSiteId(),g=this.consumerBiLoggerHelpers.getStructureId(),h=this.consumerBiLoggerHelpers.getAdiBuilderType();return this.mainHelper.validateNumber(a),this.mainHelper.validateGuid(b),this.mainHelper.validateString(c),this.mainHelper.validateString(d),this.mainHelper.validateNumber(e),this.mainHelper.validateGuid(f),this.mainHelper.validateString(g),this.mainHelper.validateString(h),this.mainHelper.log({src:66,evid:20,intervalLoadTime:a,esi:b,industryId:c,instanceId:d,loadTime:e,msid:f,structureId:g,adiBuilderType:h})}catch(i){this.mainHelper.onError("BISafe: failed to report builder.coreLoadingLoadIframeStart",i.stack)}},a.prototype.coreLoadingNodeChangeStart=function(){try{var a=this.consumerBiLoggerHelpers.getIntervalLoadTime(),b=this.consumerBiLoggerHelpers.getEsi(),c=this.consumerBiLoggerHelpers.getIndustryId(),d=this.consumerBiLoggerHelpers.getInstanceId(),e=this.consumerBiLoggerHelpers.getLoadTime(),f=this.consumerBiLoggerHelpers.getMetaSiteId(),g=this.consumerBiLoggerHelpers.getStructureId(),h=this.consumerBiLoggerHelpers.getAdiBuilderType();return this.mainHelper.validateNumber(a),this.mainHelper.validateGuid(b),this.mainHelper.validateString(c),this.mainHelper.validateString(d),this.mainHelper.validateNumber(e),this.mainHelper.validateGuid(f),this.mainHelper.validateString(g),this.mainHelper.validateString(h),this.mainHelper.log({src:66,evid:21,intervalLoadTime:a,esi:b,industryId:c,instanceId:d,loadTime:e,msid:f,structureId:g,adiBuilderType:h})}catch(i){this.mainHelper.onError("BISafe: failed to report builder.coreLoadingNodeChangeStart",i.stack)}},a.prototype.coreLoadingNodeChangeComplete=function(){try{var a=this.consumerBiLoggerHelpers.getIntervalLoadTime(),b=this.consumerBiLoggerHelpers.getEsi(),c=this.consumerBiLoggerHelpers.getIndustryId(),d=this.consumerBiLoggerHelpers.getInstanceId(),e=this.consumerBiLoggerHelpers.getLoadTime(),f=this.consumerBiLoggerHelpers.getMetaSiteId(),g=this.consumerBiLoggerHelpers.getStructureId(),h=this.consumerBiLoggerHelpers.getAdiBuilderType();return this.mainHelper.validateNumber(a),this.mainHelper.validateGuid(b),this.mainHelper.validateString(c),this.mainHelper.validateString(d),this.mainHelper.validateNumber(e),this.mainHelper.validateGuid(f),this.mainHelper.validateString(g),this.mainHelper.validateString(h),this.mainHelper.log({src:66,evid:22,intervalLoadTime:a,esi:b,industryId:c,instanceId:d,loadTime:e,msid:f,structureId:g,adiBuilderType:h})}catch(i){this.mainHelper.onError("BISafe: failed to report builder.coreLoadingNodeChangeComplete",i.stack)}},a.prototype.coreLoadingLoadIframeComplete=function(){try{var a=this.consumerBiLoggerHelpers.getIntervalLoadTime(),b=this.consumerBiLoggerHelpers.getEsi(),c=this.consumerBiLoggerHelpers.getIndustryId(),d=this.consumerBiLoggerHelpers.getInstanceId(),e=this.consumerBiLoggerHelpers.getLoadTime(),f=this.consumerBiLoggerHelpers.getMetaSiteId(),g=this.consumerBiLoggerHelpers.getStructureId(),h=this.consumerBiLoggerHelpers.getAdiBuilderType();return this.mainHelper.validateNumber(a),this.mainHelper.validateGuid(b),this.mainHelper.validateString(c),this.mainHelper.validateString(d),this.mainHelper.validateNumber(e),this.mainHelper.validateGuid(f),this.mainHelper.validateString(g),this.mainHelper.validateString(h),this.mainHelper.log({src:66,evid:23,intervalLoadTime:a,esi:b,industryId:c,instanceId:d,loadTime:e,msid:f,structureId:g,adiBuilderType:h})}catch(i){this.mainHelper.onError("BISafe: failed to report builder.coreLoadingLoadIframeComplete",i.stack)}},a.prototype.switchBuilderTypeMobileDesktopClick=function(a,b){try{var c=this.consumerBiLoggerHelpers.getEditMode(),d=this.consumerBiLoggerHelpers.getEsi(),e=this.consumerBiLoggerHelpers.getIndustryId(),f=this.consumerBiLoggerHelpers.getInstanceId(),g=this.consumerBiLoggerHelpers.getMetaSiteId(),h=this.consumerBiLoggerHelpers.getStoryRevision(),i=this.consumerBiLoggerHelpers.getStructureId(),j=this.consumerBiLoggerHelpers.getAdiBuilderType();return this.mainHelper.validateString(a),this.mainHelper.validateString(c),this.mainHelper.validateGuid(d),this.mainHelper.validateString(e),this.mainHelper.validateString(f),this.mainHelper.validateGuid(g),this.mainHelper.validateString(b),this.mainHelper.validateNumber(h),this.mainHelper.validateString(i),this.mainHelper.validateString(j),this.mainHelper.log({src:66,evid:35,source:a,editMode:c,esi:d,industryId:e,instanceId:f,msid:g,selectedBuilder:b,revision:h,structureId:i,adiBuilderType:j})}catch(k){this.mainHelper.onError("BISafe: failed to report builder.switchBuilderTypeMobileDesktopClick",k.stack)}},a.prototype.switchBuilderTypeMobileDesktopSuccess=function(a,b){try{var c=this.consumerBiLoggerHelpers.getLoadTime(),d=this.consumerBiLoggerHelpers.getEditMode(),e=this.consumerBiLoggerHelpers.getEsi(),f=this.consumerBiLoggerHelpers.getIndustryId(),g=this.consumerBiLoggerHelpers.getInstanceId(),h=this.consumerBiLoggerHelpers.getMetaSiteId(),i=this.consumerBiLoggerHelpers.getStoryRevision(),j=this.consumerBiLoggerHelpers.getStructureId(),k=this.consumerBiLoggerHelpers.getAdiBuilderType();return this.mainHelper.validateNumber(c),this.mainHelper.validateString(a),this.mainHelper.validateString(d),this.mainHelper.validateGuid(e),this.mainHelper.validateString(f),this.mainHelper.validateString(g),this.mainHelper.validateGuid(h),this.mainHelper.validateString(b),this.mainHelper.validateNumber(i),this.mainHelper.validateString(j),this.mainHelper.validateString(k),this.mainHelper.log({src:66,evid:36,loadTime:c,source:a,editMode:d,esi:e,industryId:f,instanceId:g,msid:h,selectedBuilder:b,revision:i,structureId:j,adiBuilderType:k})}catch(l){this.mainHelper.onError("BISafe: failed to report builder.switchBuilderTypeMobileDesktopSuccess",l.stack)}},a.prototype.onstageOsiQuickAction=function(a,b,c,d,e,f){try{var g=this.consumerBiLoggerHelpers.getEditMode(),h=this.consumerBiLoggerHelpers.getEsi(),i=this.consumerBiLoggerHelpers.getIndustryId(),j=this.consumerBiLoggerHelpers.getInstanceId(),k=this.consumerBiLoggerHelpers.getMetaSiteId(),l=this.consumerBiLoggerHelpers.getPageId(),m=this.consumerBiLoggerHelpers.getStoryRevision(),n=this.consumerBiLoggerHelpers.getStructureId();return this.mainHelper.validateString(a),this.mainHelper.validateString(b),this.mainHelper.validateString(g),this.mainHelper.validateGuid(h),this.mainHelper.validateString(c),this.mainHelper.validateString(i),this.mainHelper.validateString(j),this.mainHelper.validateGuid(k),this.mainHelper.validateString(d),this.mainHelper.validateString(l),this.mainHelper.validateNumber(m),this.mainHelper.validateString(e),this.mainHelper.validateString(f),this.mainHelper.validateString(n),this.mainHelper.log({src:66,evid:236,origin:a,name:b,editMode:g,esi:h,fieldName:c,industryId:i,instanceId:j,msid:k,nodeId:d,pageId:l,revision:m,sectionAlias:e,sectionType:f,structureId:n})}catch(o){this.mainHelper.onError("BISafe: failed to report builder.onstageOsiQuickAction",o.stack)}},a}(),ContentEditorConsumerBiLogger=function(){function a(a,b,c){this.consumerBiLoggerHelpers=a,this.clientTopology=b,this.mainHelper=c}return a.prototype.panelIsLoaded=function(a,b,c,d){try{var e=this.consumerBiLoggerHelpers.getInstanceId(),f=this.consumerBiLoggerHelpers.getMetaSiteId(),g=this.consumerBiLoggerHelpers.getStoryRevision(),h=this.consumerBiLoggerHelpers.getStructureId(),i=this.consumerBiLoggerHelpers.getIndustryId(),j=this.consumerBiLoggerHelpers.getEsi(),k=this.consumerBiLoggerHelpers.getEditMode(),l=this.consumerBiLoggerHelpers.getPageId(),m=this.consumerBiLoggerHelpers.getPanelType(),n=this.consumerBiLoggerHelpers.getObjectType(),o=this.consumerBiLoggerHelpers.getAdiBuilderType();return this.mainHelper.validateString(e),this.mainHelper.validateGuid(f),this.mainHelper.validateNumber(g),this.mainHelper.validateString(h),this.mainHelper.validateString(i),this.mainHelper.validateGuid(j),this.mainHelper.validateString(k),this.mainHelper.validateString(a),this.mainHelper.validateString(b),this.mainHelper.validateString(c),this.mainHelper.validateString(l),this.mainHelper.validateString(d),this.mainHelper.validateString(m),this.mainHelper.validateString(n),this.mainHelper.validateString(o),this.mainHelper.log({src:66,evid:200,instanceId:e,msid:f,revision:g,structureId:h,industryId:i,esi:j,editMode:k,nodeId:a,sectionType:b,sectionAlias:c,pageId:l,source:d,panelType:m,objectType:n,adiBuilderType:o})}catch(p){this.mainHelper.onError("BISafe: failed to report contentEditor.panelIsLoaded",p.stack)}},a.prototype.panelClosed=function(a,b,c){try{var d=this.consumerBiLoggerHelpers.getInstanceId(),e=this.consumerBiLoggerHelpers.getMetaSiteId(),f=this.consumerBiLoggerHelpers.getStoryRevision(),g=this.consumerBiLoggerHelpers.getStructureId(),h=this.consumerBiLoggerHelpers.getIndustryId(),i=this.consumerBiLoggerHelpers.getEsi(),j=this.consumerBiLoggerHelpers.getEditMode(),k=this.consumerBiLoggerHelpers.getPageId(),l=this.consumerBiLoggerHelpers.getPanelType(),m=this.consumerBiLoggerHelpers.getObjectType(),n=this.consumerBiLoggerHelpers.getAdiBuilderType();return this.mainHelper.validateString(d),this.mainHelper.validateGuid(e),this.mainHelper.validateNumber(f),this.mainHelper.validateString(g),this.mainHelper.validateString(h),this.mainHelper.validateGuid(i),this.mainHelper.validateString(j),this.mainHelper.validateString(a),this.mainHelper.validateString(b),this.mainHelper.validateString(c),this.mainHelper.validateString(k),this.mainHelper.validateString(l),this.mainHelper.validateString(m),this.mainHelper.validateString(n),this.mainHelper.log({src:66,evid:201,instanceId:d,msid:e,revision:f,structureId:g,industryId:h,esi:i,editMode:j,nodeId:a,sectionType:b,sectionAlias:c,pageId:k,panelType:l,objectType:m,adiBuilderType:n})}catch(o){this.mainHelper.onError("BISafe: failed to report contentEditor.panelClosed",o.stack)}},a.prototype.updateField=function(a,b,c,d,e){try{var f=this.consumerBiLoggerHelpers.getInstanceId(),g=this.consumerBiLoggerHelpers.getMetaSiteId(),h=this.consumerBiLoggerHelpers.getStoryRevision(),i=this.consumerBiLoggerHelpers.getStructureId(),j=this.consumerBiLoggerHelpers.getIndustryId(),k=this.consumerBiLoggerHelpers.getEsi(),l=this.consumerBiLoggerHelpers.getEditMode(),m=this.consumerBiLoggerHelpers.getPageId(),n=this.consumerBiLoggerHelpers.getAdiBuilderType();return this.mainHelper.validateString(f),this.mainHelper.validateGuid(g),this.mainHelper.validateNumber(h),this.mainHelper.validateString(i),this.mainHelper.validateString(j),
this.mainHelper.validateGuid(k),this.mainHelper.validateString(l),this.mainHelper.validateString(a),this.mainHelper.validateString(b),this.mainHelper.validateString(c),this.mainHelper.validateString(m),this.mainHelper.validateString(d),this.mainHelper.validateString(e),this.mainHelper.validateString(n),this.consumerBiLoggerHelpers.resetLoadTime(),this.mainHelper.log({src:66,evid:202,instanceId:f,msid:g,revision:h,structureId:i,industryId:j,esi:k,editMode:l,nodeId:a,sectionType:b,sectionAlias:c,pageId:m,fieldName:d,fieldType:e,adiBuilderType:n})}catch(o){this.mainHelper.onError("BISafe: failed to report contentEditor.updateField",o.stack)}},a.prototype.valueWasDeleted=function(a,b,c,d,e){try{var f=this.consumerBiLoggerHelpers.getInstanceId(),g=this.consumerBiLoggerHelpers.getMetaSiteId(),h=this.consumerBiLoggerHelpers.getStoryRevision(),i=this.consumerBiLoggerHelpers.getStructureId(),j=this.consumerBiLoggerHelpers.getIndustryId(),k=this.consumerBiLoggerHelpers.getEsi(),l=this.consumerBiLoggerHelpers.getEditMode(),m=this.consumerBiLoggerHelpers.getPageId(),n=this.consumerBiLoggerHelpers.getAdiBuilderType();return this.mainHelper.validateString(f),this.mainHelper.validateGuid(g),this.mainHelper.validateNumber(h),this.mainHelper.validateString(i),this.mainHelper.validateString(j),this.mainHelper.validateGuid(k),this.mainHelper.validateString(l),this.mainHelper.validateString(a),this.mainHelper.validateString(b),this.mainHelper.validateString(c),this.mainHelper.validateString(m),this.mainHelper.validateString(d),this.mainHelper.validateString(e),this.mainHelper.validateString(n),this.mainHelper.log({src:66,evid:203,instanceId:f,msid:g,revision:h,structureId:i,industryId:j,esi:k,editMode:l,nodeId:a,sectionType:b,sectionAlias:c,pageId:m,fieldName:d,fieldType:e,adiBuilderType:n})}catch(o){this.mainHelper.onError("BISafe: failed to report contentEditor.valueWasDeleted",o.stack)}},a.prototype.clickOnHideUnhideComponent=function(a,b,c,d,e,f,g){try{var h=this.consumerBiLoggerHelpers.getInstanceId(),i=this.consumerBiLoggerHelpers.getMetaSiteId(),j=this.consumerBiLoggerHelpers.getStoryRevision(),k=this.consumerBiLoggerHelpers.getStructureId(),l=this.consumerBiLoggerHelpers.getIndustryId(),m=this.consumerBiLoggerHelpers.getEsi(),n=this.consumerBiLoggerHelpers.getEditMode(),o=this.consumerBiLoggerHelpers.getPageId(),p=this.consumerBiLoggerHelpers.getAdiBuilderType();return this.mainHelper.validateString(h),this.mainHelper.validateGuid(i),this.mainHelper.validateNumber(j),this.mainHelper.validateString(k),this.mainHelper.validateString(l),this.mainHelper.validateGuid(m),this.mainHelper.validateString(n),this.mainHelper.validateString(a),this.mainHelper.validateString(b),this.mainHelper.validateString(c),this.mainHelper.validateString(o),this.mainHelper.validateString(d),this.mainHelper.validateString(e),this.mainHelper.validateString(f),this.mainHelper.validateString(p),this.mainHelper.validateString(g),this.consumerBiLoggerHelpers.resetLoadTime(),this.mainHelper.log({src:66,evid:204,instanceId:h,msid:i,revision:j,structureId:k,industryId:l,esi:m,editMode:n,nodeId:a,sectionType:b,sectionAlias:c,pageId:o,fieldName:d,fieldType:e,action:f,adiBuilderType:p,origin:g})}catch(q){this.mainHelper.onError("BISafe: failed to report contentEditor.clickOnHideUnhideComponent",q.stack)}},a.prototype.componentWasHiddenSuccess=function(a,b,c,d,e,f,g){try{var h=this.consumerBiLoggerHelpers.getInstanceId(),i=this.consumerBiLoggerHelpers.getMetaSiteId(),j=this.consumerBiLoggerHelpers.getStoryRevision(),k=this.consumerBiLoggerHelpers.getStructureId(),l=this.consumerBiLoggerHelpers.getIndustryId(),m=this.consumerBiLoggerHelpers.getEsi(),n=this.consumerBiLoggerHelpers.getEditMode(),o=this.consumerBiLoggerHelpers.getPageId(),p=this.consumerBiLoggerHelpers.getLoadTime(),q=this.consumerBiLoggerHelpers.getAdiBuilderType();return this.mainHelper.validateString(h),this.mainHelper.validateGuid(i),this.mainHelper.validateNumber(j),this.mainHelper.validateString(k),this.mainHelper.validateString(l),this.mainHelper.validateGuid(m),this.mainHelper.validateString(n),this.mainHelper.validateString(a),this.mainHelper.validateString(b),this.mainHelper.validateString(c),this.mainHelper.validateString(o),this.mainHelper.validateString(d),this.mainHelper.validateString(e),this.mainHelper.validateString(f),this.mainHelper.validateNumber(p),this.mainHelper.validateString(q),this.mainHelper.validateString(g),this.mainHelper.log({src:66,evid:205,instanceId:h,msid:i,revision:j,structureId:k,industryId:l,esi:m,editMode:n,nodeId:a,sectionType:b,sectionAlias:c,pageId:o,fieldName:d,fieldType:e,action:f,loadTime:p,adiBuilderType:q,origin:g})}catch(r){this.mainHelper.onError("BISafe: failed to report contentEditor.componentWasHiddenSuccess",r.stack)}},a.prototype.switchMediaTypeClick=function(a,b,c,d){try{var e=this.consumerBiLoggerHelpers.getInstanceId(),f=this.consumerBiLoggerHelpers.getMetaSiteId(),g=this.consumerBiLoggerHelpers.getStoryRevision(),h=this.consumerBiLoggerHelpers.getStructureId(),i=this.consumerBiLoggerHelpers.getIndustryId(),j=this.consumerBiLoggerHelpers.getEsi(),k=this.consumerBiLoggerHelpers.getEditMode(),l=this.consumerBiLoggerHelpers.getPageId(),m=this.consumerBiLoggerHelpers.getAdiBuilderType();return this.mainHelper.validateString(e),this.mainHelper.validateGuid(f),this.mainHelper.validateNumber(g),this.mainHelper.validateString(h),this.mainHelper.validateString(i),this.mainHelper.validateGuid(j),this.mainHelper.validateString(k),this.mainHelper.validateString(a),this.mainHelper.validateString(b),this.mainHelper.validateString(c),this.mainHelper.validateString(l),this.mainHelper.validateString(d),this.mainHelper.validateString(m),this.mainHelper.log({src:66,evid:206,instanceId:e,msid:f,revision:g,structureId:h,industryId:i,esi:j,editMode:k,nodeId:a,sectionType:b,sectionAlias:c,pageId:l,mediaType:d,adiBuilderType:m})}catch(n){this.mainHelper.onError("BISafe: failed to report contentEditor.switchMediaTypeClick",n.stack)}},a.prototype.clickOnReplaceOrganizeMedia=function(a,b,c,d){try{var e=this.consumerBiLoggerHelpers.getInstanceId(),f=this.consumerBiLoggerHelpers.getMetaSiteId(),g=this.consumerBiLoggerHelpers.getStoryRevision(),h=this.consumerBiLoggerHelpers.getStructureId(),i=this.consumerBiLoggerHelpers.getIndustryId(),j=this.consumerBiLoggerHelpers.getEsi(),k=this.consumerBiLoggerHelpers.getEditMode(),l=this.consumerBiLoggerHelpers.getPageId(),m=this.consumerBiLoggerHelpers.getAdiBuilderType();return this.mainHelper.validateString(e),this.mainHelper.validateGuid(f),this.mainHelper.validateNumber(g),this.mainHelper.validateString(h),this.mainHelper.validateString(i),this.mainHelper.validateGuid(j),this.mainHelper.validateString(k),this.mainHelper.validateString(a),this.mainHelper.validateString(b),this.mainHelper.validateString(c),this.mainHelper.validateString(l),this.mainHelper.validateString(d),this.mainHelper.validateString(m),this.mainHelper.log({src:66,evid:207,instanceId:e,msid:f,revision:g,structureId:h,industryId:i,esi:j,editMode:k,nodeId:a,sectionType:b,sectionAlias:c,pageId:l,mediaType:d,adiBuilderType:m})}catch(n){this.mainHelper.onError("BISafe: failed to report contentEditor.clickOnReplaceOrganizeMedia",n.stack)}},a.prototype.cropImageDialogIsShown=function(a,b,c){try{var d=this.consumerBiLoggerHelpers.getInstanceId(),e=this.consumerBiLoggerHelpers.getMetaSiteId(),f=this.consumerBiLoggerHelpers.getStoryRevision(),g=this.consumerBiLoggerHelpers.getStructureId(),h=this.consumerBiLoggerHelpers.getIndustryId(),i=this.consumerBiLoggerHelpers.getEsi(),j=this.consumerBiLoggerHelpers.getEditMode(),k=this.consumerBiLoggerHelpers.getPageId(),l=this.consumerBiLoggerHelpers.getObjectType(),m=this.consumerBiLoggerHelpers.getAdiBuilderType();return this.mainHelper.validateString(d),this.mainHelper.validateGuid(e),this.mainHelper.validateNumber(f),this.mainHelper.validateString(g),this.mainHelper.validateString(h),this.mainHelper.validateGuid(i),this.mainHelper.validateString(j),this.mainHelper.validateString(a),this.mainHelper.validateString(b),this.mainHelper.validateString(c),this.mainHelper.validateString(k),this.mainHelper.validateString(l),this.mainHelper.validateString(m),this.mainHelper.log({src:66,evid:208,instanceId:d,msid:e,revision:f,structureId:g,industryId:h,esi:i,editMode:j,nodeId:a,sectionType:b,sectionAlias:c,pageId:k,objectType:l,adiBuilderType:m})}catch(n){this.mainHelper.onError("BISafe: failed to report contentEditor.cropImageDialogIsShown",n.stack)}},a.prototype.imageCropZoomInZoomOut=function(a,b,c,d){try{var e=this.consumerBiLoggerHelpers.getInstanceId(),f=this.consumerBiLoggerHelpers.getMetaSiteId(),g=this.consumerBiLoggerHelpers.getStoryRevision(),h=this.consumerBiLoggerHelpers.getStructureId(),i=this.consumerBiLoggerHelpers.getIndustryId(),j=this.consumerBiLoggerHelpers.getEsi(),k=this.consumerBiLoggerHelpers.getEditMode(),l=this.consumerBiLoggerHelpers.getPageId(),m=this.consumerBiLoggerHelpers.getObjectType(),n=this.consumerBiLoggerHelpers.getAdiBuilderType();return this.mainHelper.validateString(e),this.mainHelper.validateGuid(f),this.mainHelper.validateNumber(g),this.mainHelper.validateString(h),this.mainHelper.validateString(i),this.mainHelper.validateGuid(j),this.mainHelper.validateString(k),this.mainHelper.validateString(a),this.mainHelper.validateString(b),this.mainHelper.validateString(c),this.mainHelper.validateString(l),this.mainHelper.validateString(d),this.mainHelper.validateString(m),this.mainHelper.validateString(n),this.mainHelper.log({src:66,evid:209,instanceId:e,msid:f,revision:g,structureId:h,industryId:i,esi:j,editMode:k,nodeId:a,sectionType:b,sectionAlias:c,pageId:l,zoomType:d,objectType:m,adiBuilderType:n})}catch(o){this.mainHelper.onError("BISafe: failed to report contentEditor.imageCropZoomInZoomOut",o.stack)}},a.prototype.imageCropSuccess=function(a,b,c){try{var d=this.consumerBiLoggerHelpers.getInstanceId(),e=this.consumerBiLoggerHelpers.getMetaSiteId(),f=this.consumerBiLoggerHelpers.getStoryRevision(),g=this.consumerBiLoggerHelpers.getStructureId(),h=this.consumerBiLoggerHelpers.getIndustryId(),i=this.consumerBiLoggerHelpers.getEsi(),j=this.consumerBiLoggerHelpers.getEditMode(),k=this.consumerBiLoggerHelpers.getPageId(),l=this.consumerBiLoggerHelpers.getObjectType(),m=this.consumerBiLoggerHelpers.getAdiBuilderType();return this.mainHelper.validateString(d),this.mainHelper.validateGuid(e),this.mainHelper.validateNumber(f),this.mainHelper.validateString(g),this.mainHelper.validateString(h),this.mainHelper.validateGuid(i),this.mainHelper.validateString(j),this.mainHelper.validateString(a),this.mainHelper.validateString(b),this.mainHelper.validateString(c),this.mainHelper.validateString(k),this.mainHelper.validateString(l),this.mainHelper.validateString(m),this.mainHelper.log({src:66,evid:210,instanceId:d,msid:e,revision:f,structureId:g,industryId:h,esi:i,editMode:j,nodeId:a,sectionType:b,sectionAlias:c,pageId:k,objectType:l,adiBuilderType:m})}catch(n){this.mainHelper.onError("BISafe: failed to report contentEditor.imageCropSuccess",n.stack)}},a.prototype.imageCropCancel=function(a,b,c){try{var d=this.consumerBiLoggerHelpers.getInstanceId(),e=this.consumerBiLoggerHelpers.getMetaSiteId(),f=this.consumerBiLoggerHelpers.getStoryRevision(),g=this.consumerBiLoggerHelpers.getStructureId(),h=this.consumerBiLoggerHelpers.getIndustryId(),i=this.consumerBiLoggerHelpers.getEsi(),j=this.consumerBiLoggerHelpers.getEditMode(),k=this.consumerBiLoggerHelpers.getPageId(),l=this.consumerBiLoggerHelpers.getObjectType(),m=this.consumerBiLoggerHelpers.getAdiBuilderType();return this.mainHelper.validateString(d),this.mainHelper.validateGuid(e),this.mainHelper.validateNumber(f),this.mainHelper.validateString(g),this.mainHelper.validateString(h),this.mainHelper.validateGuid(i),this.mainHelper.validateString(j),this.mainHelper.validateString(a),this.mainHelper.validateString(b),this.mainHelper.validateString(c),this.mainHelper.validateString(k),this.mainHelper.validateString(l),this.mainHelper.validateString(m),this.mainHelper.log({src:66,evid:211,instanceId:d,msid:e,revision:f,structureId:g,industryId:h,esi:i,editMode:j,nodeId:a,sectionType:b,sectionAlias:c,pageId:k,objectType:l,adiBuilderType:m})}catch(n){this.mainHelper.onError("BISafe: failed to report contentEditor.imageCropCancel",n.stack)}},a.prototype.linkDialogIsLoaded=function(a,b,c,d){try{var e=this.consumerBiLoggerHelpers.getInstanceId(),f=this.consumerBiLoggerHelpers.getMetaSiteId(),g=this.consumerBiLoggerHelpers.getStoryRevision(),h=this.consumerBiLoggerHelpers.getStructureId(),i=this.consumerBiLoggerHelpers.getIndustryId(),j=this.consumerBiLoggerHelpers.getEsi(),k=this.consumerBiLoggerHelpers.getEditMode(),l=this.consumerBiLoggerHelpers.getPageId(),m=this.consumerBiLoggerHelpers.getPanelType(),n=this.consumerBiLoggerHelpers.getAdiBuilderType();return this.mainHelper.validateString(e),this.mainHelper.validateGuid(f),this.mainHelper.validateNumber(g),this.mainHelper.validateString(h),this.mainHelper.validateString(i),this.mainHelper.validateGuid(j),this.mainHelper.validateString(k),this.mainHelper.validateString(a),this.mainHelper.validateString(b),this.mainHelper.validateString(c),this.mainHelper.validateString(l),this.mainHelper.validateString(m),this.mainHelper.validateString(d),this.mainHelper.validateString(n),this.mainHelper.log({src:66,evid:212,instanceId:e,msid:f,revision:g,structureId:h,industryId:i,esi:j,editMode:k,nodeId:a,sectionType:b,sectionAlias:c,pageId:l,panelType:m,source:d,adiBuilderType:n})}catch(o){this.mainHelper.onError("BISafe: failed to report contentEditor.linkDialogIsLoaded",o.stack)}},a.prototype.linkDialogDoneClicked=function(a,b,c,d,e,f,g){try{var h=this.consumerBiLoggerHelpers.getInstanceId(),i=this.consumerBiLoggerHelpers.getMetaSiteId(),j=this.consumerBiLoggerHelpers.getStoryRevision(),k=this.consumerBiLoggerHelpers.getStructureId(),l=this.consumerBiLoggerHelpers.getIndustryId(),m=this.consumerBiLoggerHelpers.getEsi(),n=this.consumerBiLoggerHelpers.getEditMode(),o=this.consumerBiLoggerHelpers.getPageId(),p=this.consumerBiLoggerHelpers.getPanelType(),q=this.consumerBiLoggerHelpers.getAdiBuilderType();return this.mainHelper.validateString(h),this.mainHelper.validateGuid(i),this.mainHelper.validateNumber(j),this.mainHelper.validateString(k),this.mainHelper.validateString(l),this.mainHelper.validateGuid(m),this.mainHelper.validateString(n),this.mainHelper.validateString(a),this.mainHelper.validateString(b),this.mainHelper.validateString(c),this.mainHelper.validateString(o),this.mainHelper.validateString(p),this.mainHelper.validateString(d),this.mainHelper.validateString(e),this.mainHelper.validateString(f),this.mainHelper.validateString(g),this.mainHelper.validateString(q),this.mainHelper.log({src:66,evid:213,instanceId:h,msid:i,revision:j,structureId:k,industryId:l,esi:m,editMode:n,nodeId:a,sectionType:b,sectionAlias:c,pageId:o,panelType:p,linkTo:d,targetPage:e,place:f,source:g,adiBuilderType:q})}catch(r){this.mainHelper.onError("BISafe: failed to report contentEditor.linkDialogDoneClicked",r.stack)}},a.prototype.linkDialogClosed=function(a,b,c,d){try{var e=this.consumerBiLoggerHelpers.getInstanceId(),f=this.consumerBiLoggerHelpers.getMetaSiteId(),g=this.consumerBiLoggerHelpers.getStoryRevision(),h=this.consumerBiLoggerHelpers.getStructureId(),i=this.consumerBiLoggerHelpers.getIndustryId(),j=this.consumerBiLoggerHelpers.getEsi(),k=this.consumerBiLoggerHelpers.getEditMode(),l=this.consumerBiLoggerHelpers.getPageId(),m=this.consumerBiLoggerHelpers.getPanelType(),n=this.consumerBiLoggerHelpers.getAdiBuilderType();return this.mainHelper.validateString(e),this.mainHelper.validateGuid(f),this.mainHelper.validateNumber(g),this.mainHelper.validateString(h),this.mainHelper.validateString(i),this.mainHelper.validateGuid(j),this.mainHelper.validateString(k),this.mainHelper.validateString(a),this.mainHelper.validateString(b),this.mainHelper.validateString(c),this.mainHelper.validateString(l),this.mainHelper.validateString(m),this.mainHelper.validateString(d),this.mainHelper.validateString(n),this.mainHelper.log({src:66,evid:214,instanceId:e,msid:f,revision:g,structureId:h,industryId:i,esi:j,editMode:k,nodeId:a,sectionType:b,sectionAlias:c,pageId:l,panelType:m,source:d,adiBuilderType:n})}catch(o){this.mainHelper.onError("BISafe: failed to report contentEditor.linkDialogClosed",o.stack)}},a.prototype.clickOnAddDuplicateItemInAList=function(a,b,c,d){try{var e=this.consumerBiLoggerHelpers.getInstanceId(),f=this.consumerBiLoggerHelpers.getMetaSiteId(),g=this.consumerBiLoggerHelpers.getStoryRevision(),h=this.consumerBiLoggerHelpers.getStructureId(),i=this.consumerBiLoggerHelpers.getIndustryId(),j=this.consumerBiLoggerHelpers.getEsi(),k=this.consumerBiLoggerHelpers.getEditMode(),l=this.consumerBiLoggerHelpers.getPageId(),m=this.consumerBiLoggerHelpers.getAdiBuilderType();return this.mainHelper.validateString(e),this.mainHelper.validateGuid(f),this.mainHelper.validateNumber(g),this.mainHelper.validateString(h),this.mainHelper.validateString(i),this.mainHelper.validateGuid(j),this.mainHelper.validateString(k),this.mainHelper.validateString(a),this.mainHelper.validateString(l),this.mainHelper.validateString(b),this.mainHelper.validateString(c),this.mainHelper.validateString(d),this.mainHelper.validateString(m),this.consumerBiLoggerHelpers.resetLoadTime(),this.mainHelper.log({src:66,evid:215,instanceId:e,msid:f,revision:g,structureId:h,industryId:i,esi:j,editMode:k,nodeId:a,pageId:l,sectionType:b,sectionAlias:c,addType:d,adiBuilderType:m})}catch(n){this.mainHelper.onError("BISafe: failed to report contentEditor.clickOnAddDuplicateItemInAList",n.stack)}},a.prototype.addDuplicateItemSuccess=function(a,b,c,d){try{var e=this.consumerBiLoggerHelpers.getInstanceId(),f=this.consumerBiLoggerHelpers.getMetaSiteId(),g=this.consumerBiLoggerHelpers.getStoryRevision(),h=this.consumerBiLoggerHelpers.getStructureId(),i=this.consumerBiLoggerHelpers.getIndustryId(),j=this.consumerBiLoggerHelpers.getEsi(),k=this.consumerBiLoggerHelpers.getEditMode(),l=this.consumerBiLoggerHelpers.getPageId(),m=this.consumerBiLoggerHelpers.getLoadTime(),n=this.consumerBiLoggerHelpers.getAdiBuilderType();return this.mainHelper.validateString(e),this.mainHelper.validateGuid(f),this.mainHelper.validateNumber(g),this.mainHelper.validateString(h),this.mainHelper.validateString(i),this.mainHelper.validateGuid(j),this.mainHelper.validateString(k),this.mainHelper.validateString(a),this.mainHelper.validateString(l),this.mainHelper.validateString(b),this.mainHelper.validateString(c),this.mainHelper.validateString(d),this.mainHelper.validateNumber(m),this.mainHelper.validateString(n),this.mainHelper.log({src:66,evid:216,instanceId:e,msid:f,revision:g,structureId:h,industryId:i,esi:j,editMode:k,nodeId:a,pageId:l,sectionType:b,sectionAlias:c,addType:d,loadTime:m,adiBuilderType:n})}catch(o){this.mainHelper.onError("BISafe: failed to report contentEditor.addDuplicateItemSuccess",o.stack)}},a.prototype.reorderItemInAList=function(a,b,c){try{var d=this.consumerBiLoggerHelpers.getInstanceId(),e=this.consumerBiLoggerHelpers.getMetaSiteId(),f=this.consumerBiLoggerHelpers.getStoryRevision(),g=this.consumerBiLoggerHelpers.getStructureId(),h=this.consumerBiLoggerHelpers.getIndustryId(),i=this.consumerBiLoggerHelpers.getEsi(),j=this.consumerBiLoggerHelpers.getEditMode(),k=this.consumerBiLoggerHelpers.getPageId(),l=this.consumerBiLoggerHelpers.getAdiBuilderType();return this.mainHelper.validateString(d),this.mainHelper.validateGuid(e),this.mainHelper.validateNumber(f),this.mainHelper.validateString(g),this.mainHelper.validateString(h),this.mainHelper.validateGuid(i),this.mainHelper.validateString(j),this.mainHelper.validateString(a),this.mainHelper.validateString(k),this.mainHelper.validateString(b),this.mainHelper.validateString(c),this.mainHelper.validateString(l),this.consumerBiLoggerHelpers.resetLoadTime(),this.mainHelper.log({src:66,evid:217,instanceId:d,msid:e,revision:f,structureId:g,industryId:h,esi:i,editMode:j,nodeId:a,pageId:k,sectionType:b,sectionAlias:c,adiBuilderType:l})}catch(m){this.mainHelper.onError("BISafe: failed to report contentEditor.reorderItemInAList",m.stack)}},a.prototype.itemReorderSuccess=function(a,b,c){try{var d=this.consumerBiLoggerHelpers.getInstanceId(),e=this.consumerBiLoggerHelpers.getMetaSiteId(),f=this.consumerBiLoggerHelpers.getStoryRevision(),g=this.consumerBiLoggerHelpers.getStructureId(),h=this.consumerBiLoggerHelpers.getIndustryId(),i=this.consumerBiLoggerHelpers.getEsi(),j=this.consumerBiLoggerHelpers.getEditMode(),k=this.consumerBiLoggerHelpers.getPageId(),l=this.consumerBiLoggerHelpers.getLoadTime(),m=this.consumerBiLoggerHelpers.getAdiBuilderType();return this.mainHelper.validateString(d),this.mainHelper.validateGuid(e),this.mainHelper.validateNumber(f),this.mainHelper.validateString(g),this.mainHelper.validateString(h),this.mainHelper.validateGuid(i),this.mainHelper.validateString(j),this.mainHelper.validateString(a),this.mainHelper.validateString(k),this.mainHelper.validateString(b),this.mainHelper.validateString(c),this.mainHelper.validateNumber(l),this.mainHelper.validateString(m),this.mainHelper.log({src:66,evid:218,instanceId:d,msid:e,revision:f,structureId:g,industryId:h,esi:i,editMode:j,nodeId:a,pageId:k,sectionType:b,sectionAlias:c,loadTime:l,adiBuilderType:m})}catch(n){this.mainHelper.onError("BISafe: failed to report contentEditor.itemReorderSuccess",n.stack)}},a.prototype.switchListItemToPage=function(a,b,c,d){try{var e=this.consumerBiLoggerHelpers.getInstanceId(),f=this.consumerBiLoggerHelpers.getMetaSiteId(),g=this.consumerBiLoggerHelpers.getStoryRevision(),h=this.consumerBiLoggerHelpers.getStructureId(),i=this.consumerBiLoggerHelpers.getIndustryId(),j=this.consumerBiLoggerHelpers.getEsi(),k=this.consumerBiLoggerHelpers.getEditMode(),l=this.consumerBiLoggerHelpers.getPageId(),m=this.consumerBiLoggerHelpers.getAdiBuilderType();return this.mainHelper.validateString(e),this.mainHelper.validateGuid(f),this.mainHelper.validateNumber(g),this.mainHelper.validateString(h),this.mainHelper.validateString(i),this.mainHelper.validateGuid(j),this.mainHelper.validateString(k),this.mainHelper.validateString(a),this.mainHelper.validateString(b),this.mainHelper.validateString(l),this.mainHelper.validateString(c),this.mainHelper.validateString(d),this.mainHelper.validateString(m),this.consumerBiLoggerHelpers.resetLoadTime(),this.mainHelper.log({src:66,evid:219,instanceId:e,msid:f,revision:g,structureId:h,industryId:i,esi:j,editMode:k,nodeId:a,originPageId:b,pageId:l,sectionType:c,sectionAlias:d,adiBuilderType:m})}catch(n){this.mainHelper.onError("BISafe: failed to report contentEditor.switchListItemToPage",n.stack)}},a.prototype.itemMovedToAnotherPageSuccess=function(a,b,c,d){try{var e=this.consumerBiLoggerHelpers.getInstanceId(),f=this.consumerBiLoggerHelpers.getMetaSiteId(),g=this.consumerBiLoggerHelpers.getStoryRevision(),h=this.consumerBiLoggerHelpers.getStructureId(),i=this.consumerBiLoggerHelpers.getIndustryId(),j=this.consumerBiLoggerHelpers.getEsi(),k=this.consumerBiLoggerHelpers.getEditMode(),l=this.consumerBiLoggerHelpers.getPageId(),m=this.consumerBiLoggerHelpers.getLoadTime(),n=this.consumerBiLoggerHelpers.getAdiBuilderType();return this.mainHelper.validateString(e),this.mainHelper.validateGuid(f),this.mainHelper.validateNumber(g),this.mainHelper.validateString(h),this.mainHelper.validateString(i),this.mainHelper.validateGuid(j),this.mainHelper.validateString(k),this.mainHelper.validateString(a),this.mainHelper.validateString(b),this.mainHelper.validateString(l),this.mainHelper.validateString(c),this.mainHelper.validateString(d),this.mainHelper.validateNumber(m),this.mainHelper.validateString(n),this.mainHelper.log({src:66,evid:220,instanceId:e,msid:f,revision:g,structureId:h,industryId:i,esi:j,editMode:k,nodeId:a,originPageId:b,pageId:l,sectionType:c,sectionAlias:d,loadTime:m,adiBuilderType:n})}catch(o){this.mainHelper.onError("BISafe: failed to report contentEditor.itemMovedToAnotherPageSuccess",o.stack)}},a.prototype.galleryLayoutWindowOpened=function(a,b,c,d,e){try{var f=this.consumerBiLoggerHelpers.getInstanceId(),g=this.consumerBiLoggerHelpers.getMetaSiteId(),h=this.consumerBiLoggerHelpers.getStoryRevision(),i=this.consumerBiLoggerHelpers.getStructureId(),j=this.consumerBiLoggerHelpers.getIndustryId(),k=this.consumerBiLoggerHelpers.getEsi(),l=this.consumerBiLoggerHelpers.getEditMode(),m=this.consumerBiLoggerHelpers.getPageId(),n=this.consumerBiLoggerHelpers.getAdiBuilderType();return this.mainHelper.validateString(f),this.mainHelper.validateGuid(g),this.mainHelper.validateNumber(h),this.mainHelper.validateString(i),this.mainHelper.validateString(j),this.mainHelper.validateGuid(k),this.mainHelper.validateString(l),this.mainHelper.validateString(a),this.mainHelper.validateString(b),this.mainHelper.validateString(c),this.mainHelper.validateString(m),this.mainHelper.validateNumber(d),this.mainHelper.validateString(e),this.mainHelper.validateString(n),this.mainHelper.log({src:66,evid:221,instanceId:f,msid:g,revision:h,structureId:i,industryId:j,esi:k,editMode:l,nodeId:a,sectionType:b,sectionAlias:c,pageId:m,noOfSuggestions:d,layoutType:e,adiBuilderType:n})}catch(o){this.mainHelper.onError("BISafe: failed to report contentEditor.galleryLayoutWindowOpened",o.stack)}},a.prototype.galleryLayoutChanged=function(a,b,c,d,e,f,g){try{var h=this.consumerBiLoggerHelpers.getInstanceId(),i=this.consumerBiLoggerHelpers.getMetaSiteId(),j=this.consumerBiLoggerHelpers.getStoryRevision(),k=this.consumerBiLoggerHelpers.getStructureId(),l=this.consumerBiLoggerHelpers.getIndustryId(),m=this.consumerBiLoggerHelpers.getEsi(),n=this.consumerBiLoggerHelpers.getEditMode(),o=this.consumerBiLoggerHelpers.getPageId(),p=this.consumerBiLoggerHelpers.getAdiBuilderType();return this.mainHelper.validateString(h),this.mainHelper.validateGuid(i),this.mainHelper.validateNumber(j),this.mainHelper.validateString(k),this.mainHelper.validateString(l),this.mainHelper.validateGuid(m),this.mainHelper.validateString(n),this.mainHelper.validateString(a),this.mainHelper.validateString(b),this.mainHelper.validateString(c),this.mainHelper.validateString(o),this.mainHelper.validateString(d),this.mainHelper.validateNumber(e),this.mainHelper.validateNumber(f),this.mainHelper.validateString(g),this.mainHelper.validateString(p),this.mainHelper.log({src:66,evid:222,instanceId:h,msid:i,revision:j,structureId:k,industryId:l,esi:m,editMode:n,nodeId:a,sectionType:b,sectionAlias:c,pageId:o,galleryType:d,noOfSuggestions:e,placeOfSelected:f,layoutType:g,adiBuilderType:p})}catch(q){this.mainHelper.onError("BISafe: failed to report contentEditor.galleryLayoutChanged",q.stack)}},a.prototype.galleryLayoutWindowClosed=function(a,b,c,d,e,f){try{var g=this.consumerBiLoggerHelpers.getInstanceId(),h=this.consumerBiLoggerHelpers.getMetaSiteId(),i=this.consumerBiLoggerHelpers.getStoryRevision(),j=this.consumerBiLoggerHelpers.getStructureId(),k=this.consumerBiLoggerHelpers.getIndustryId(),l=this.consumerBiLoggerHelpers.getEsi(),m=this.consumerBiLoggerHelpers.getEditMode(),n=this.consumerBiLoggerHelpers.getPageId(),o=this.consumerBiLoggerHelpers.getAdiBuilderType();return this.mainHelper.validateString(g),this.mainHelper.validateGuid(h),this.mainHelper.validateNumber(i),this.mainHelper.validateString(j),this.mainHelper.validateString(k),this.mainHelper.validateGuid(l),this.mainHelper.validateString(m),this.mainHelper.validateString(a),this.mainHelper.validateString(b),this.mainHelper.validateString(c),this.mainHelper.validateString(n),this.mainHelper.validateString(d),this.mainHelper.validateNumber(e),this.mainHelper.validateString(f),this.mainHelper.validateString(o),this.mainHelper.log({src:66,evid:224,instanceId:g,msid:h,revision:i,structureId:j,industryId:k,esi:l,editMode:m,nodeId:a,sectionType:b,sectionAlias:c,pageId:n,galleryType:d,noOfSuggestions:e,layoutType:f,adiBuilderType:o})}catch(p){this.mainHelper.onError("BISafe: failed to report contentEditor.galleryLayoutWindowClosed",p.stack)}},a.prototype.failoverReArrangeSolution=function(a,b,c){try{var d=this.consumerBiLoggerHelpers.getInstanceId(),e=this.consumerBiLoggerHelpers.getMetaSiteId(),f=this.consumerBiLoggerHelpers.getStoryRevision(),g=this.consumerBiLoggerHelpers.getStructureId(),h=this.consumerBiLoggerHelpers.getIndustryId(),i=this.consumerBiLoggerHelpers.getEsi(),j=this.consumerBiLoggerHelpers.getEditMode(),k=this.consumerBiLoggerHelpers.getPageId(),l=this.consumerBiLoggerHelpers.getAdiBuilderType();return this.mainHelper.validateString(d),this.mainHelper.validateGuid(e),this.mainHelper.validateNumber(f),this.mainHelper.validateString(g),this.mainHelper.validateString(h),this.mainHelper.validateGuid(i),this.mainHelper.validateString(j),this.mainHelper.validateString(a),this.mainHelper.validateString(b),this.mainHelper.validateString(c),this.mainHelper.validateString(k),this.mainHelper.validateString(l),this.mainHelper.log({src:66,evid:225,instanceId:d,msid:e,revision:f,structureId:g,industryId:h,esi:i,editMode:j,nodeId:a,sectionType:b,sectionAlias:c,pageId:k,adiBuilderType:l})}catch(m){this.mainHelper.onError("BISafe: failed to report contentEditor.failoverReArrangeSolution",m.stack)}},a.prototype.failoverReArrangeLayout=function(a,b,c){try{var d=this.consumerBiLoggerHelpers.getInstanceId(),e=this.consumerBiLoggerHelpers.getMetaSiteId(),f=this.consumerBiLoggerHelpers.getStoryRevision(),g=this.consumerBiLoggerHelpers.getStructureId(),h=this.consumerBiLoggerHelpers.getIndustryId(),i=this.consumerBiLoggerHelpers.getEsi(),j=this.consumerBiLoggerHelpers.getEditMode(),k=this.consumerBiLoggerHelpers.getPageId(),l=this.consumerBiLoggerHelpers.getAdiBuilderType();return this.mainHelper.validateString(d),this.mainHelper.validateGuid(e),this.mainHelper.validateNumber(f),this.mainHelper.validateString(g),this.mainHelper.validateString(h),this.mainHelper.validateGuid(i),this.mainHelper.validateString(j),this.mainHelper.validateString(a),this.mainHelper.validateString(b),this.mainHelper.validateString(c),this.mainHelper.validateString(k),this.mainHelper.validateString(l),this.mainHelper.log({src:66,evid:226,instanceId:d,msid:e,revision:f,structureId:g,industryId:h,esi:i,editMode:j,nodeId:a,sectionType:b,sectionAlias:c,pageId:k,adiBuilderType:l})}catch(m){this.mainHelper.onError("BISafe: failed to report contentEditor.failoverReArrangeLayout",m.stack)}},a.prototype.failToFitLayoutCanTFindAProperLayout=function(a,b,c,d){try{var e=this.consumerBiLoggerHelpers.getInstanceId(),f=this.consumerBiLoggerHelpers.getMetaSiteId(),g=this.consumerBiLoggerHelpers.getStoryRevision(),h=this.consumerBiLoggerHelpers.getStructureId(),i=this.consumerBiLoggerHelpers.getIndustryId(),j=this.consumerBiLoggerHelpers.getEsi(),k=this.consumerBiLoggerHelpers.getEditMode(),l=this.consumerBiLoggerHelpers.getPageId(),m=this.consumerBiLoggerHelpers.getAdiBuilderType();return this.mainHelper.validateString(e),this.mainHelper.validateGuid(f),this.mainHelper.validateNumber(g),this.mainHelper.validateString(h),this.mainHelper.validateString(i),this.mainHelper.validateGuid(j),this.mainHelper.validateString(k),this.mainHelper.validateString(a),this.mainHelper.validateString(b),this.mainHelper.validateString(c),this.mainHelper.validateString(l),this.mainHelper.validateString(d),this.mainHelper.validateString(m),this.mainHelper.log({src:66,evid:227,instanceId:e,msid:f,revision:g,structureId:h,industryId:i,esi:j,editMode:k,nodeId:a,sectionType:b,sectionAlias:c,pageId:l,reason:d,adiBuilderType:m})}catch(n){this.mainHelper.onError("BISafe: failed to report contentEditor.failToFitLayoutCanTFindAProperLayout",n.stack)}},a.prototype.fieldWasUpdatedSuccess=function(a,b,c,d,e,f,g,h){try{var i=this.consumerBiLoggerHelpers.getInstanceId(),j=this.consumerBiLoggerHelpers.getMetaSiteId(),k=this.consumerBiLoggerHelpers.getStoryRevision(),l=this.consumerBiLoggerHelpers.getStructureId(),m=this.consumerBiLoggerHelpers.getIndustryId(),n=this.consumerBiLoggerHelpers.getEsi(),o=this.consumerBiLoggerHelpers.getEditMode(),p=this.consumerBiLoggerHelpers.getPageId(),q=this.consumerBiLoggerHelpers.getLoadTime(),r=this.consumerBiLoggerHelpers.getAdiBuilderType();
return this.mainHelper.validateString(i),this.mainHelper.validateGuid(j),this.mainHelper.validateNumber(k),this.mainHelper.validateString(l),this.mainHelper.validateString(m),this.mainHelper.validateGuid(n),this.mainHelper.validateString(o),this.mainHelper.validateString(a),this.mainHelper.validateString(b),this.mainHelper.validateString(c),this.mainHelper.validateString(p),this.mainHelper.validateString(d),this.mainHelper.validateString(e),this.mainHelper.validateString(f),this.mainHelper.validateNumber(g),this.mainHelper.validateNumber(h),this.mainHelper.validateNumber(q),this.mainHelper.validateString(r),this.mainHelper.log({src:66,evid:228,instanceId:i,msid:j,revision:k,structureId:l,industryId:m,esi:n,editMode:o,nodeId:a,sectionType:b,sectionAlias:c,pageId:p,fieldName:d,fieldType:e,fieldValue:f,fieldLength:g,noOfFaces:h,loadTime:q,adiBuilderType:r})}catch(s){this.mainHelper.onError("BISafe: failed to report contentEditor.fieldWasUpdatedSuccess",s.stack)}},a.prototype.dataInsertedToTpaAutomatically=function(a,b,c,d,e){try{var f=this.consumerBiLoggerHelpers.getInstanceId(),g=this.consumerBiLoggerHelpers.getMetaSiteId(),h=this.consumerBiLoggerHelpers.getStoryRevision(),i=this.consumerBiLoggerHelpers.getStructureId(),j=this.consumerBiLoggerHelpers.getIndustryId(),k=this.consumerBiLoggerHelpers.getEditMode(),l=this.consumerBiLoggerHelpers.getEsi(),m=this.consumerBiLoggerHelpers.getAdiBuilderType();return this.mainHelper.validateString(f),this.mainHelper.validateGuid(g),this.mainHelper.validateNumber(h),this.mainHelper.validateString(i),this.mainHelper.validateString(j),this.mainHelper.validateString(k),this.mainHelper.validateString(a),this.mainHelper.validateString(b),this.mainHelper.validateString(c),this.mainHelper.validateGuid(l),this.mainHelper.validateString(d),this.mainHelper.validateString(e),this.mainHelper.validateString(m),this.mainHelper.log({src:66,evid:229,instanceId:f,msid:g,revision:h,structureId:i,industryId:j,editMode:k,nodeId:a,sectionType:b,sectionAlias:c,esi:l,extraInfo:d,appId:e,adiBuilderType:m})}catch(n){this.mainHelper.onError("BISafe: failed to report contentEditor.dataInsertedToTpaAutomatically",n.stack)}},a.prototype.clickOnHideShowOnItemInListItems=function(a,b,c,d){try{var e=this.consumerBiLoggerHelpers.getEditMode(),f=this.consumerBiLoggerHelpers.getEsi(),g=this.consumerBiLoggerHelpers.getIndustryId(),h=this.consumerBiLoggerHelpers.getInstanceId(),i=this.consumerBiLoggerHelpers.getMetaSiteId(),j=this.consumerBiLoggerHelpers.getPageId(),k=this.consumerBiLoggerHelpers.getStoryRevision(),l=this.consumerBiLoggerHelpers.getStructureId(),m=this.consumerBiLoggerHelpers.getAdiBuilderType();return this.mainHelper.validateString(a),this.mainHelper.validateString(e),this.mainHelper.validateGuid(f),this.mainHelper.validateString(g),this.mainHelper.validateString(h),this.mainHelper.validateGuid(i),this.mainHelper.validateString(b),this.mainHelper.validateString(j),this.mainHelper.validateNumber(k),this.mainHelper.validateString(c),this.mainHelper.validateString(d),this.mainHelper.validateString(l),this.mainHelper.validateString(m),this.consumerBiLoggerHelpers.resetLoadTime(),this.mainHelper.log({src:66,evid:230,action:a,editMode:e,esi:f,industryId:g,instanceId:h,msid:i,nodeId:b,pageId:j,revision:k,sectionAlias:c,sectionType:d,structureId:l,adiBuilderType:m})}catch(n){this.mainHelper.onError("BISafe: failed to report contentEditor.clickOnHideShowOnItemInListItems",n.stack)}},a.prototype.clickOnHideShowOnItemInListItemsSuccess=function(a,b,c,d){try{var e=this.consumerBiLoggerHelpers.getEditMode(),f=this.consumerBiLoggerHelpers.getEsi(),g=this.consumerBiLoggerHelpers.getIndustryId(),h=this.consumerBiLoggerHelpers.getInstanceId(),i=this.consumerBiLoggerHelpers.getMetaSiteId(),j=this.consumerBiLoggerHelpers.getPageId(),k=this.consumerBiLoggerHelpers.getStoryRevision(),l=this.consumerBiLoggerHelpers.getStructureId(),m=this.consumerBiLoggerHelpers.getLoadTime(),n=this.consumerBiLoggerHelpers.getAdiBuilderType();return this.mainHelper.validateString(a),this.mainHelper.validateString(e),this.mainHelper.validateGuid(f),this.mainHelper.validateString(g),this.mainHelper.validateString(h),this.mainHelper.validateGuid(i),this.mainHelper.validateString(b),this.mainHelper.validateString(j),this.mainHelper.validateNumber(k),this.mainHelper.validateString(c),this.mainHelper.validateString(d),this.mainHelper.validateString(l),this.mainHelper.validateNumber(m),this.mainHelper.validateString(n),this.mainHelper.log({src:66,evid:231,action:a,editMode:e,esi:f,industryId:g,instanceId:h,msid:i,nodeId:b,pageId:j,revision:k,sectionAlias:c,sectionType:d,structureId:l,loadTime:m,adiBuilderType:n})}catch(o){this.mainHelper.onError("BISafe: failed to report contentEditor.clickOnHideShowOnItemInListItemsSuccess",o.stack)}},a.prototype.richTextClick=function(a,b,c,d,e,f,g,h,i){try{var j=this.consumerBiLoggerHelpers.getInstanceId(),k=this.consumerBiLoggerHelpers.getMetaSiteId(),l=this.consumerBiLoggerHelpers.getStoryRevision(),m=this.consumerBiLoggerHelpers.getStructureId(),n=this.consumerBiLoggerHelpers.getIndustryId(),o=this.consumerBiLoggerHelpers.getEsi(),p=this.consumerBiLoggerHelpers.getEditMode(),q=this.consumerBiLoggerHelpers.getPageId(),r=this.consumerBiLoggerHelpers.getAdiBuilderType();return this.mainHelper.validateString(j),this.mainHelper.validateGuid(k),this.mainHelper.validateNumber(l),this.mainHelper.validateString(m),this.mainHelper.validateString(n),this.mainHelper.validateGuid(o),this.mainHelper.validateString(p),this.mainHelper.validateString(a),this.mainHelper.validateString(b),this.mainHelper.validateString(c),this.mainHelper.validateString(q),this.mainHelper.validateString(d),this.mainHelper.validateString(e),this.mainHelper.validateString(f),this.mainHelper.validateString(g),this.mainHelper.validateString(h),this.mainHelper.validateNumber(i),this.mainHelper.validateString(r),this.mainHelper.log({src:66,evid:232,instanceId:j,msid:k,revision:l,structureId:m,industryId:n,esi:o,editMode:p,nodeId:a,sectionType:b,sectionAlias:c,pageId:q,richTextMode:d,richTextType:e,fieldName:f,fieldType:g,fieldValue:h,fieldLength:i,adiBuilderType:r})}catch(s){this.mainHelper.onError("BISafe: failed to report contentEditor.richTextClick",s.stack)}},a.prototype.onstageQuickActionsTooltipShown=function(a,b,c,d){try{var e=this.consumerBiLoggerHelpers.getEditMode(),f=this.consumerBiLoggerHelpers.getEsi(),g=this.consumerBiLoggerHelpers.getIndustryId(),h=this.consumerBiLoggerHelpers.getInstanceId(),i=this.consumerBiLoggerHelpers.getMetaSiteId(),j=this.consumerBiLoggerHelpers.getPageId(),k=this.consumerBiLoggerHelpers.getStoryRevision(),l=this.consumerBiLoggerHelpers.getStructureId();return this.mainHelper.validateString(e),this.mainHelper.validateGuid(f),this.mainHelper.validateString(a),this.mainHelper.validateString(g),this.mainHelper.validateString(h),this.mainHelper.validateGuid(i),this.mainHelper.validateString(b),this.mainHelper.validateString(j),this.mainHelper.validateNumber(k),this.mainHelper.validateString(c),this.mainHelper.validateString(d),this.mainHelper.validateString(l),this.mainHelper.log({src:66,evid:235,editMode:e,esi:f,fieldName:a,industryId:g,instanceId:h,msid:i,nodeId:b,pageId:j,revision:k,sectionAlias:c,sectionType:d,structureId:l})}catch(m){this.mainHelper.onError("BISafe: failed to report contentEditor.onstageQuickActionsTooltipShown",m.stack)}},a.prototype.replaceMediaWindowIsLoaded=function(a,b,c,d,e,f,g){try{var h=this.consumerBiLoggerHelpers.getInstanceId(),i=this.consumerBiLoggerHelpers.getMetaSiteId(),j=this.consumerBiLoggerHelpers.getStoryRevision(),k=this.consumerBiLoggerHelpers.getStructureId(),l=this.consumerBiLoggerHelpers.getIndustryId(),m=this.consumerBiLoggerHelpers.getEsi(),n=this.consumerBiLoggerHelpers.getEditMode(),o=this.consumerBiLoggerHelpers.getPageId(),p=this.consumerBiLoggerHelpers.getAdiBuilderType();return this.mainHelper.validateString(h),this.mainHelper.validateGuid(i),this.mainHelper.validateNumber(j),this.mainHelper.validateString(k),this.mainHelper.validateString(l),this.mainHelper.validateGuid(m),this.mainHelper.validateString(n),this.mainHelper.validateString(a),this.mainHelper.validateString(b),this.mainHelper.validateString(c),this.mainHelper.validateString(o),this.mainHelper.validateString(d),this.mainHelper.validateString(e),this.mainHelper.validateString(f),this.mainHelper.validateNumber(g),this.mainHelper.validateString(p),this.mainHelper.log({src:66,evid:400,instanceId:h,msid:i,revision:j,structureId:k,industryId:l,esi:m,editMode:n,nodeId:a,sectionType:b,sectionAlias:c,pageId:o,mediaType:d,galleryType:e,origin:f,numTotal:g,adiBuilderType:p})}catch(q){this.mainHelper.onError("BISafe: failed to report contentEditor.replaceMediaWindowIsLoaded",q.stack)}},a.prototype.closeMediaWindow=function(a,b,c,d,e,f){try{var g=this.consumerBiLoggerHelpers.getInstanceId(),h=this.consumerBiLoggerHelpers.getMetaSiteId(),i=this.consumerBiLoggerHelpers.getStoryRevision(),j=this.consumerBiLoggerHelpers.getStructureId(),k=this.consumerBiLoggerHelpers.getIndustryId(),l=this.consumerBiLoggerHelpers.getEsi(),m=this.consumerBiLoggerHelpers.getEditMode(),n=this.consumerBiLoggerHelpers.getPageId(),o=this.consumerBiLoggerHelpers.getAdiBuilderType();return this.mainHelper.validateString(g),this.mainHelper.validateGuid(h),this.mainHelper.validateNumber(i),this.mainHelper.validateString(j),this.mainHelper.validateString(k),this.mainHelper.validateGuid(l),this.mainHelper.validateString(m),this.mainHelper.validateString(a),this.mainHelper.validateString(b),this.mainHelper.validateString(c),this.mainHelper.validateString(n),this.mainHelper.validateString(d),this.mainHelper.validateString(e),this.mainHelper.validateString(f),this.mainHelper.validateString(o),this.mainHelper.log({src:66,evid:401,instanceId:g,msid:h,revision:i,structureId:j,industryId:k,esi:l,editMode:m,nodeId:a,sectionType:b,sectionAlias:c,pageId:n,mediaType:d,galleryType:e,origin:f,adiBuilderType:o})}catch(p){this.mainHelper.onError("BISafe: failed to report contentEditor.closeMediaWindow",p.stack)}},a.prototype.approveChangesInTheMediaWindow=function(a,b,c,d,e,f,g){try{var h=this.consumerBiLoggerHelpers.getInstanceId(),i=this.consumerBiLoggerHelpers.getMetaSiteId(),j=this.consumerBiLoggerHelpers.getStoryRevision(),k=this.consumerBiLoggerHelpers.getStructureId(),l=this.consumerBiLoggerHelpers.getIndustryId(),m=this.consumerBiLoggerHelpers.getEsi(),n=this.consumerBiLoggerHelpers.getEditMode(),o=this.consumerBiLoggerHelpers.getPageId(),p=this.consumerBiLoggerHelpers.getAdiBuilderType();return this.mainHelper.validateString(a),this.mainHelper.validateString(h),this.mainHelper.validateGuid(i),this.mainHelper.validateNumber(j),this.mainHelper.validateString(k),this.mainHelper.validateString(l),this.mainHelper.validateGuid(m),this.mainHelper.validateString(n),this.mainHelper.validateString(b),this.mainHelper.validateString(c),this.mainHelper.validateString(d),this.mainHelper.validateString(o),this.mainHelper.validateString(e),this.mainHelper.validateString(f),this.mainHelper.validateNumber(g),this.mainHelper.validateString(p),this.mainHelper.log({src:66,evid:402,origin:a,instanceId:h,msid:i,revision:j,structureId:k,industryId:l,esi:m,editMode:n,nodeId:b,sectionType:c,sectionAlias:d,pageId:o,mediaType:e,galleryType:f,numTotal:g,adiBuilderType:p})}catch(q){this.mainHelper.onError("BISafe: failed to report contentEditor.approveChangesInTheMediaWindow",q.stack)}},a.prototype.mediaSettingsShow=function(a,b,c,d,e){try{var f=this.consumerBiLoggerHelpers.getInstanceId(),g=this.consumerBiLoggerHelpers.getMetaSiteId(),h=this.consumerBiLoggerHelpers.getStoryRevision(),i=this.consumerBiLoggerHelpers.getStructureId(),j=this.consumerBiLoggerHelpers.getIndustryId(),k=this.consumerBiLoggerHelpers.getEsi(),l=this.consumerBiLoggerHelpers.getEditMode(),m=this.consumerBiLoggerHelpers.getPageId(),n=this.consumerBiLoggerHelpers.getAdiBuilderType();return this.mainHelper.validateString(f),this.mainHelper.validateGuid(g),this.mainHelper.validateNumber(h),this.mainHelper.validateString(i),this.mainHelper.validateString(j),this.mainHelper.validateGuid(k),this.mainHelper.validateString(l),this.mainHelper.validateString(a),this.mainHelper.validateString(b),this.mainHelper.validateString(c),this.mainHelper.validateString(m),this.mainHelper.validateString(d),this.mainHelper.validateString(e),this.mainHelper.validateString(n),this.mainHelper.log({src:66,evid:411,instanceId:f,msid:g,revision:h,structureId:i,industryId:j,esi:k,editMode:l,nodeId:a,sectionType:b,sectionAlias:c,pageId:m,mediaType:d,galleryType:e,adiBuilderType:n})}catch(o){this.mainHelper.onError("BISafe: failed to report contentEditor.mediaSettingsShow",o.stack)}},a.prototype.mediaSettingsFieldWasUpdated=function(a,b,c,d,e,f,g,h,i){try{var j=this.consumerBiLoggerHelpers.getInstanceId(),k=this.consumerBiLoggerHelpers.getMetaSiteId(),l=this.consumerBiLoggerHelpers.getStoryRevision(),m=this.consumerBiLoggerHelpers.getStructureId(),n=this.consumerBiLoggerHelpers.getIndustryId(),o=this.consumerBiLoggerHelpers.getEsi(),p=this.consumerBiLoggerHelpers.getEditMode(),q=this.consumerBiLoggerHelpers.getPageId(),r=this.consumerBiLoggerHelpers.getAdiBuilderType();return this.mainHelper.validateString(j),this.mainHelper.validateGuid(k),this.mainHelper.validateNumber(l),this.mainHelper.validateString(m),this.mainHelper.validateString(n),this.mainHelper.validateGuid(o),this.mainHelper.validateString(p),this.mainHelper.validateString(a),this.mainHelper.validateString(b),this.mainHelper.validateString(c),this.mainHelper.validateString(q),this.mainHelper.validateString(d),this.mainHelper.validateString(e),this.mainHelper.validateString(f),this.mainHelper.validateString(g),this.mainHelper.validateString(h),this.mainHelper.validateNumber(i),this.mainHelper.validateString(r),this.mainHelper.log({src:66,evid:412,instanceId:j,msid:k,revision:l,structureId:m,industryId:n,esi:o,editMode:p,nodeId:a,sectionType:b,sectionAlias:c,pageId:q,mediaType:d,galleryType:e,fieldName:f,fieldType:g,fieldValue:h,fieldLength:i,adiBuilderType:r})}catch(s){this.mainHelper.onError("BISafe: failed to report contentEditor.mediaSettingsFieldWasUpdated",s.stack)}},a.prototype.mediaSettingsClosePanel=function(a,b,c,d,e){try{var f=this.consumerBiLoggerHelpers.getInstanceId(),g=this.consumerBiLoggerHelpers.getMetaSiteId(),h=this.consumerBiLoggerHelpers.getStoryRevision(),i=this.consumerBiLoggerHelpers.getStructureId(),j=this.consumerBiLoggerHelpers.getIndustryId(),k=this.consumerBiLoggerHelpers.getEsi(),l=this.consumerBiLoggerHelpers.getEditMode(),m=this.consumerBiLoggerHelpers.getPageId(),n=this.consumerBiLoggerHelpers.getAdiBuilderType();return this.mainHelper.validateString(f),this.mainHelper.validateGuid(g),this.mainHelper.validateNumber(h),this.mainHelper.validateString(i),this.mainHelper.validateString(j),this.mainHelper.validateGuid(k),this.mainHelper.validateString(l),this.mainHelper.validateString(a),this.mainHelper.validateString(b),this.mainHelper.validateString(c),this.mainHelper.validateString(m),this.mainHelper.validateString(d),this.mainHelper.validateString(e),this.mainHelper.validateString(n),this.mainHelper.log({src:66,evid:413,instanceId:f,msid:g,revision:h,structureId:i,industryId:j,esi:k,editMode:l,nodeId:a,sectionType:b,sectionAlias:c,pageId:m,mediaType:d,galleryType:e,adiBuilderType:n})}catch(o){this.mainHelper.onError("BISafe: failed to report contentEditor.mediaSettingsClosePanel",o.stack)}},a.prototype.imageCropSave=function(a,b,c){try{var d=this.consumerBiLoggerHelpers.getEditMode(),e=this.consumerBiLoggerHelpers.getEsi(),f=this.consumerBiLoggerHelpers.getIndustryId(),g=this.consumerBiLoggerHelpers.getInstanceId(),h=this.consumerBiLoggerHelpers.getMetaSiteId(),i=this.consumerBiLoggerHelpers.getObjectType(),j=this.consumerBiLoggerHelpers.getPageId(),k=this.consumerBiLoggerHelpers.getStoryRevision(),l=this.consumerBiLoggerHelpers.getStructureId();return this.mainHelper.validateString(d),this.mainHelper.validateGuid(e),this.mainHelper.validateString(f),this.mainHelper.validateString(g),this.mainHelper.validateGuid(h),this.mainHelper.validateString(a),this.mainHelper.validateString(i),this.mainHelper.validateString(j),this.mainHelper.validateNumber(k),this.mainHelper.validateString(b),this.mainHelper.validateString(c),this.mainHelper.validateString(l),this.mainHelper.log({src:66,evid:233,editMode:d,esi:e,industryId:f,instanceId:g,msid:h,nodeId:a,objectType:i,pageId:j,revision:k,sectionAlias:b,sectionType:c,structureId:l})}catch(m){this.mainHelper.onError("BISafe: failed to report contentEditor.imageCropSave",m.stack)}},a}(),DialogsConsumerBiLogger=function(){function a(a,b,c){this.consumerBiLoggerHelpers=a,this.clientTopology=b,this.mainHelper=c}return a.prototype.show=function(a,b,c,d,e){try{var f=this.consumerBiLoggerHelpers.getInstanceId(),g=this.consumerBiLoggerHelpers.getMetaSiteId(),h=this.consumerBiLoggerHelpers.getStoryRevision(),i=this.consumerBiLoggerHelpers.getStructureId(),j=this.consumerBiLoggerHelpers.getIndustryId(),k=this.consumerBiLoggerHelpers.getEsi(),l=this.consumerBiLoggerHelpers.getEditMode(),m=this.consumerBiLoggerHelpers.getPageId(),n=this.consumerBiLoggerHelpers.getAdiBuilderType();return this.mainHelper.validateString(f),this.mainHelper.validateGuid(g),this.mainHelper.validateNumber(h),this.mainHelper.validateString(i),this.mainHelper.validateString(j),this.mainHelper.validateGuid(k),this.mainHelper.validateString(l),this.mainHelper.validateString(a),this.mainHelper.validateString(b),this.mainHelper.validateString(c),this.mainHelper.validateString(m),this.mainHelper.validateString(d),this.mainHelper.validateString(e),this.mainHelper.validateString(n),this.mainHelper.log({src:66,evid:47,instanceId:f,msid:g,revision:h,structureId:i,industryId:j,esi:k,editMode:l,nodeId:a,sectionType:b,sectionAlias:c,pageId:m,name:d,origin:e,adiBuilderType:n})}catch(o){this.mainHelper.onError("BISafe: failed to report dialogs.show",o.stack)}},a.prototype.approveChanges=function(a,b,c,d,e,f){try{var g=this.consumerBiLoggerHelpers.getInstanceId(),h=this.consumerBiLoggerHelpers.getMetaSiteId(),i=this.consumerBiLoggerHelpers.getStoryRevision(),j=this.consumerBiLoggerHelpers.getStructureId(),k=this.consumerBiLoggerHelpers.getIndustryId(),l=this.consumerBiLoggerHelpers.getEsi(),m=this.consumerBiLoggerHelpers.getEditMode(),n=this.consumerBiLoggerHelpers.getPageId(),o=this.consumerBiLoggerHelpers.getAdiBuilderType();return this.mainHelper.validateString(g),this.mainHelper.validateGuid(h),this.mainHelper.validateNumber(i),this.mainHelper.validateString(j),this.mainHelper.validateString(k),this.mainHelper.validateGuid(l),this.mainHelper.validateString(m),this.mainHelper.validateString(a),this.mainHelper.validateString(b),this.mainHelper.validateString(c),this.mainHelper.validateString(n),this.mainHelper.validateString(d),this.mainHelper.validateString(e),this.mainHelper.validateString(f),this.mainHelper.validateString(o),this.consumerBiLoggerHelpers.resetLoadTime(),this.mainHelper.log({src:66,evid:48,instanceId:g,msid:h,revision:i,structureId:j,industryId:k,esi:l,editMode:m,nodeId:a,sectionType:b,sectionAlias:c,pageId:n,name:d,targetName:e,origin:f,adiBuilderType:o})}catch(p){this.mainHelper.onError("BISafe: failed to report dialogs.approveChanges",p.stack)}},a.prototype.cancel=function(a,b,c,d,e){try{var f=this.consumerBiLoggerHelpers.getInstanceId(),g=this.consumerBiLoggerHelpers.getMetaSiteId(),h=this.consumerBiLoggerHelpers.getStoryRevision(),i=this.consumerBiLoggerHelpers.getStructureId(),j=this.consumerBiLoggerHelpers.getIndustryId(),k=this.consumerBiLoggerHelpers.getEsi(),l=this.consumerBiLoggerHelpers.getEditMode(),m=this.consumerBiLoggerHelpers.getPageId(),n=this.consumerBiLoggerHelpers.getAdiBuilderType();return this.mainHelper.validateString(f),this.mainHelper.validateGuid(g),this.mainHelper.validateNumber(h),this.mainHelper.validateString(i),this.mainHelper.validateString(j),this.mainHelper.validateGuid(k),this.mainHelper.validateString(l),this.mainHelper.validateString(a),this.mainHelper.validateString(b),this.mainHelper.validateString(c),this.mainHelper.validateString(m),this.mainHelper.validateString(d),this.mainHelper.validateString(e),this.mainHelper.validateString(n),this.consumerBiLoggerHelpers.resetLoadTime(),this.mainHelper.log({src:66,evid:49,instanceId:f,msid:g,revision:h,structureId:i,industryId:j,esi:k,editMode:l,nodeId:a,sectionType:b,sectionAlias:c,pageId:m,name:d,origin:e,adiBuilderType:n})}catch(o){this.mainHelper.onError("BISafe: failed to report dialogs.cancel",o.stack)}},a}(),IntroConsumerBiLogger=function(){function a(a,b,c){this.consumerBiLoggerHelpers=a,this.clientTopology=b,this.mainHelper=c}return a.prototype.fullStoryStarted=function(a){try{var b=this.consumerBiLoggerHelpers.getEsi(),c=this.consumerBiLoggerHelpers.getMainCategory(),d=this.consumerBiLoggerHelpers.getAdiBuilderType();return this.mainHelper.validateGuid(b),this.mainHelper.validateString(c),this.mainHelper.validateString(a),this.mainHelper.validateString(d),this.mainHelper.log({src:66,evid:11,esi:b,mainCategory:c,fullStoryUrl:a,adiBuilderType:d})}catch(e){this.mainHelper.onError("BISafe: failed to report intro.fullStoryStarted",e.stack)}},a.prototype.pageView=function(a,b){try{var c=this.consumerBiLoggerHelpers.getEsi(),d=this.consumerBiLoggerHelpers.getMainCategory(),e=this.consumerBiLoggerHelpers.getWixWizSearchGuid(),f=this.consumerBiLoggerHelpers.getReferralForBI(),g=this.consumerBiLoggerHelpers.getAdiBuilderType();return this.mainHelper.validateGuid(c),this.mainHelper.validateString(a),this.mainHelper.validateString(d),this.mainHelper.validateGuid(e),this.mainHelper.validateNumber(b),this.mainHelper.validateString(f),this.mainHelper.validateString(g),this.mainHelper.log({src:66,evid:100,esi:c,view:a,mainCategory:d,searchGuid:e,noOfMatches:b,referral:f,adiBuilderType:g})}catch(h){this.mainHelper.onError("BISafe: failed to report intro.pageView",h.stack)}},a.prototype.businessTypeWasSelected=function(a,b,c,d,e){try{var f=this.consumerBiLoggerHelpers.getEsi(),g=this.consumerBiLoggerHelpers.getMainCategory(),h=this.consumerBiLoggerHelpers.getAdiBuilderType();return this.mainHelper.validateGuid(f),this.mainHelper.validateString(a),this.mainHelper.validateString(b),this.mainHelper.validateString(c),this.mainHelper.validateNumber(d),this.mainHelper.validateString(e),this.mainHelper.validateString(g),this.mainHelper.validateString(h),this.mainHelper.log({src:66,evid:101,esi:f,level:a,name:b,text:c,position:d,suggestList:e,mainCategory:g,adiBuilderType:h})}catch(i){this.mainHelper.onError("BISafe: failed to report intro.businessTypeWasSelected",i.stack)}},a.prototype.businessTypeTypingClientEvent=function(a,b){try{var c=this.consumerBiLoggerHelpers.getEsi(),d=this.consumerBiLoggerHelpers.getMainCategory(),e=this.consumerBiLoggerHelpers.getAdiBuilderType();return this.mainHelper.validateGuid(c),this.mainHelper.validateString(a),this.mainHelper.validateString(d),this.mainHelper.validateNumber(b),this.mainHelper.validateString(e),this.mainHelper.log({src:66,evid:102,esi:c,text:a,mainCategory:d,"returnedResults ":b,adiBuilderType:e})}catch(f){this.mainHelper.onError("BISafe: failed to report intro.businessTypeTypingClientEvent",f.stack)}},a.prototype.selectBusinessTypePageNavigationClick=function(a,b,c,d,e,f,g){try{var h=this.consumerBiLoggerHelpers.getEsi(),i=this.consumerBiLoggerHelpers.getMainCategory(),j=this.consumerBiLoggerHelpers.getAdiBuilderType();return this.mainHelper.validateGuid(h),this.mainHelper.validateString(a),this.mainHelper.validateString(b),this.mainHelper.validateString(c),this.mainHelper.validateString(d),this.mainHelper.validateString(e),this.mainHelper.validateString(f),this.mainHelper.validateString(g),this.mainHelper.validateString(i),this.mainHelper.validateString(j),this.mainHelper.log({src:66,evid:103,esi:h,nextView:a,name:b,text:c,suggestList:d,navButton:e,selectedStructureId:f,selectedIndustryId:g,mainCategory:i,adiBuilderType:j})}catch(k){this.mainHelper.onError("BISafe: failed to report intro.selectBusinessTypePageNavigationClick",k.stack)}},a.prototype.servicesSelected=function(a,b,c,d){try{var e=this.consumerBiLoggerHelpers.getEsi(),f=this.consumerBiLoggerHelpers.getMainCategory(),g=this.consumerBiLoggerHelpers.getAdiBuilderType();return this.mainHelper.validateGuid(e),this.mainHelper.validateString(a),this.mainHelper.validateString(b),this.mainHelper.validateString(c),this.mainHelper.validateString(d),this.mainHelper.validateString(f),this.mainHelper.validateString(g),this.mainHelper.log({src:66,evid:104,esi:e,stores:a,bookings:b,userSubscription:c,blog:d,mainCategory:f,adiBuilderType:g})}catch(h){this.mainHelper.onError("BISafe: failed to report intro.servicesSelected",h.stack)}},a.prototype.selectServicesPageNavigationClick=function(a,b,c,d,e,f){try{var g=this.consumerBiLoggerHelpers.getEsi(),h=this.consumerBiLoggerHelpers.getMainCategory(),i=this.consumerBiLoggerHelpers.getAdiBuilderType();return this.mainHelper.validateGuid(g),this.mainHelper.validateString(a),this.mainHelper.validateString(b),this.mainHelper.validateString(c),this.mainHelper.validateString(d),this.mainHelper.validateString(e),this.mainHelper.validateString(f),this.mainHelper.validateString(h),this.mainHelper.validateString(i),this.mainHelper.log({src:66,evid:105,esi:g,nextView:a,navButton:b,stores:c,bookings:d,userSubscription:e,blog:f,mainCategory:h,adiBuilderType:i})}catch(j){this.mainHelper.onError("BISafe: failed to report intro.selectServicesPageNavigationClick",j.stack)}},a.prototype.typeBusinessNamePageNavigationClick=function(a,b,c){try{var d=this.consumerBiLoggerHelpers.getEsi(),e=this.consumerBiLoggerHelpers.getMainCategory(),f=this.consumerBiLoggerHelpers.getAdiBuilderType();return this.mainHelper.validateGuid(d),this.mainHelper.validateString(a),this.mainHelper.validateString(b),this.mainHelper.validateString(c),this.mainHelper.validateString(e),this.mainHelper.validateString(f),this.mainHelper.log({src:66,evid:106,esi:d,nextView:a,navButton:b,text:c,mainCategory:e,adiBuilderType:f})}catch(g){this.mainHelper.onError("BISafe: failed to report intro.typeBusinessNamePageNavigationClick",g.stack)}},a.prototype.typeBusinessLocationPageNavigationClick=function(a,b,c){try{var d=this.consumerBiLoggerHelpers.getEsi(),e=this.consumerBiLoggerHelpers.getLod(),f=this.consumerBiLoggerHelpers.getMainCategory(),g=this.consumerBiLoggerHelpers.getAdiBuilderType();return this.mainHelper.validateGuid(d),this.mainHelper.validateString(a),this.mainHelper.validateString(b),this.mainHelper.validateString(e),this.mainHelper.validateString(c),this.mainHelper.validateString(f),this.mainHelper.validateString(g),this.mainHelper.log({src:66,evid:107,esi:d,nextView:a,navButton:b,lod:e,text:c,mainCategory:f,adiBuilderType:g})}catch(h){this.mainHelper.onError("BISafe: failed to report intro.typeBusinessLocationPageNavigationClick",h.stack)}},a.prototype.approveSearchInformationPageNavigationClick=function(a,b,c){try{var d=this.consumerBiLoggerHelpers.getEsi(),e=this.consumerBiLoggerHelpers.getLod(),f=this.consumerBiLoggerHelpers.getMainCategory(),g=this.consumerBiLoggerHelpers.getAdiBuilderType();return this.mainHelper.validateGuid(d),this.mainHelper.validateString(a),this.mainHelper.validateString(b),this.mainHelper.validateString(e),this.mainHelper.validateString(c),this.mainHelper.validateString(f),this.mainHelper.validateString(g),this.mainHelper.log({src:66,evid:108,esi:d,nextView:a,navButton:b,lod:e,text:c,mainCategory:f,adiBuilderType:g})}catch(h){this.mainHelper.onError("BISafe: failed to report intro.approveSearchInformationPageNavigationClick",h.stack)}},a.prototype.wixwizSearchResultsGoToTopOfPageClick=function(a,b){try{var c=this.consumerBiLoggerHelpers.getEsi(),d=this.consumerBiLoggerHelpers.getWixWizSearchGuid(),e=this.consumerBiLoggerHelpers.getMainCategory(),f=this.consumerBiLoggerHelpers.getAdiBuilderType();return this.mainHelper.validateGuid(c),this.mainHelper.validateGuid(d),this.mainHelper.validateNumber(a),this.mainHelper.validateNumber(b),this.mainHelper.validateString(e),this.mainHelper.validateString(f),this.mainHelper.log({src:66,evid:109,esi:c,searchGuid:d,noOfMatches:a,noOfSeenMatches:b,mainCategory:e,adiBuilderType:f})}catch(g){this.mainHelper.onError("BISafe: failed to report intro.wixwizSearchResultsGoToTopOfPageClick",g.stack)}},a.prototype.selectInfoCardPageNavigationClick=function(a,b,c,d,e,f,g){try{var h=this.consumerBiLoggerHelpers.getEsi(),i=this.consumerBiLoggerHelpers.getWixWizSearchGuid(),j=this.consumerBiLoggerHelpers.getMainCategory(),k=this.consumerBiLoggerHelpers.getAdiBuilderType();return this.mainHelper.validateGuid(h),this.mainHelper.validateString(a),this.mainHelper.validateString(b),this.mainHelper.validateGuid(i),this.mainHelper.validateNumber(c),this.mainHelper.validateNumber(d),this.mainHelper.validateNumber(e),this.mainHelper.validateNumber(f),this.mainHelper.validateNumber(g),this.mainHelper.validateString(j),this.mainHelper.validateString(k),this.mainHelper.log({src:66,evid:110,esi:h,nextView:a,navButton:b,searchGuid:i,noOfMatches:c,noOfSeenMatches:d,position:e,similarityScore:f,locationScore:g,mainCategory:j,adiBuilderType:k})}catch(l){this.mainHelper.onError("BISafe: failed to report intro.selectInfoCardPageNavigationClick",l.stack)}},a.prototype.infoCardAddEditRemoveInfo=function(a,b,c,d,e,f){try{var g=this.consumerBiLoggerHelpers.getEsi(),h=this.consumerBiLoggerHelpers.getWixWizSearchGuid(),i=this.consumerBiLoggerHelpers.getMainCategory(),j=this.consumerBiLoggerHelpers.getAdiBuilderType();return this.mainHelper.validateGuid(g),this.mainHelper.validateGuid(h),this.mainHelper.validateString(a),this.mainHelper.validateString(b),this.mainHelper.validateNumber(c),this.mainHelper.validateString(d),this.mainHelper.validateString(i),this.mainHelper.validateString(e),this.mainHelper.validateNumber(f),this.mainHelper.validateString(j),this.mainHelper.log({src:66,evid:111,esi:g,searchGuid:h,fieldName:a,fieldType:b,fieldLength:c,action:d,mainCategory:i,origin:e,loadTime:f,adiBuilderType:j})}catch(k){this.mainHelper.onError("BISafe: failed to report intro.infoCardAddEditRemoveInfo",k.stack)}},a.prototype.editInfoCardPageNavigationClick=function(a,b){try{var c=this.consumerBiLoggerHelpers.getEsi(),d=this.consumerBiLoggerHelpers.getMainCategory(),e=this.consumerBiLoggerHelpers.getAdiBuilderType();return this.mainHelper.validateGuid(c),this.mainHelper.validateString(a),this.mainHelper.validateString(b),this.mainHelper.validateString(d),this.mainHelper.validateString(e),this.mainHelper.log({src:66,evid:112,esi:c,nextView:a,navButton:b,mainCategory:d,adiBuilderType:e})}catch(f){this.mainHelper.onError("BISafe: failed to report intro.editInfoCardPageNavigationClick",f.stack)}},a.prototype.businessTypeNotSupported=function(a,b){try{var c=this.consumerBiLoggerHelpers.getEsi(),d=this.consumerBiLoggerHelpers.getMainCategory(),e=this.consumerBiLoggerHelpers.getAdiBuilderType();return this.mainHelper.validateGuid(c),this.mainHelper.validateString(a),this.mainHelper.validateString(b),this.mainHelper.validateString(d),this.mainHelper.validateString(e),this.mainHelper.log({src:66,evid:113,esi:c,name:a,text:b,mainCategory:d,adiBuilderType:e})}catch(f){this.mainHelper.onError("BISafe: failed to report intro.businessTypeNotSupported",f.stack)}},a.prototype.clickOnSearchButtonInSelectUserPage=function(a,b){try{var c=this.consumerBiLoggerHelpers.getEsi(),d=this.consumerBiLoggerHelpers.getMainCategory(),e=this.consumerBiLoggerHelpers.getLod(),f=this.consumerBiLoggerHelpers.getAdiBuilderType();return this.mainHelper.validateGuid(c),this.mainHelper.validateString(d),this.mainHelper.validateString(a),this.mainHelper.validateString(e),this.mainHelper.validateString(b),this.mainHelper.validateString(f),this.mainHelper.log({src:66,evid:115,esi:c,mainCategory:d,text:a,lod:e,address:b,adiBuilderType:f})}catch(g){this.mainHelper.onError("BISafe: failed to report intro.clickOnSearchButtonInSelectUserPage",g.stack)}},a.prototype.clickOnReplaceLogoIntroWelcometourBuilder=function(a,b){
try{var c=this.consumerBiLoggerHelpers.getEditMode(),d=this.consumerBiLoggerHelpers.getEsi(),e=this.consumerBiLoggerHelpers.getIndustryId(),f=this.consumerBiLoggerHelpers.getInstanceId(),g=this.consumerBiLoggerHelpers.getMetaSiteId(),h=this.consumerBiLoggerHelpers.getStoryRevision(),i=this.consumerBiLoggerHelpers.getStructureId(),j=this.consumerBiLoggerHelpers.getAdiBuilderType();return this.mainHelper.validateString(c),this.mainHelper.validateGuid(d),this.mainHelper.validateString(e),this.mainHelper.validateString(f),this.mainHelper.validateGuid(g),this.mainHelper.validateString(a),this.mainHelper.validateString(b),this.mainHelper.validateNumber(h),this.mainHelper.validateString(i),this.mainHelper.validateString(j),this.mainHelper.log({src:66,evid:117,editMode:c,esi:d,industryId:e,instanceId:f,msid:g,name:a,origin:b,revision:h,structureId:i,adiBuilderType:j})}catch(k){this.mainHelper.onError("BISafe: failed to report intro.clickOnReplaceLogoIntroWelcometourBuilder",k.stack)}},a.prototype.genericCategoryDialogIsShown=function(a){try{var b=this.consumerBiLoggerHelpers.getEsi(),c=this.consumerBiLoggerHelpers.getMainCategory(),d=this.consumerBiLoggerHelpers.getAdiBuilderType();return this.mainHelper.validateGuid(b),this.mainHelper.validateString(c),this.mainHelper.validateString(a),this.mainHelper.validateString(d),this.mainHelper.log({src:66,evid:118,esi:b,mainCategory:c,text:a,adiBuilderType:d})}catch(e){this.mainHelper.onError("BISafe: failed to report intro.genericCategoryDialogIsShown",e.stack)}},a}(),PagesManagerConsumerBiLogger=function(){function a(a,b,c){this.consumerBiLoggerHelpers=a,this.clientTopology=b,this.mainHelper=c}return a.prototype.addPageClick=function(a){try{var b=this.consumerBiLoggerHelpers.getEditMode(),c=this.consumerBiLoggerHelpers.getEsi(),d=this.consumerBiLoggerHelpers.getIndustryId(),e=this.consumerBiLoggerHelpers.getInstanceId(),f=this.consumerBiLoggerHelpers.getMetaSiteId(),g=this.consumerBiLoggerHelpers.getPageId(),h=this.consumerBiLoggerHelpers.getStoryRevision(),i=this.consumerBiLoggerHelpers.getStructureId(),j=this.consumerBiLoggerHelpers.getAdiBuilderType();return this.mainHelper.validateString(a),this.mainHelper.validateString(b),this.mainHelper.validateGuid(c),this.mainHelper.validateString(d),this.mainHelper.validateString(e),this.mainHelper.validateGuid(f),this.mainHelper.validateString(g),this.mainHelper.validateNumber(h),this.mainHelper.validateString(i),this.mainHelper.validateString(j),this.mainHelper.log({src:66,evid:349,source:a,editMode:b,esi:c,industryId:d,instanceId:e,msid:f,pageId:g,revision:h,structureId:i,adiBuilderType:j})}catch(k){this.mainHelper.onError("BISafe: failed to report pagesManager.addPageClick",k.stack)}},a.prototype.pagesPanelIsLoaded=function(a){try{var b=this.consumerBiLoggerHelpers.getInstanceId(),c=this.consumerBiLoggerHelpers.getMetaSiteId(),d=this.consumerBiLoggerHelpers.getStoryRevision(),e=this.consumerBiLoggerHelpers.getStructureId(),f=this.consumerBiLoggerHelpers.getIndustryId(),g=this.consumerBiLoggerHelpers.getEsi(),h=this.consumerBiLoggerHelpers.getEditMode(),i=this.consumerBiLoggerHelpers.getPageId(),j=this.consumerBiLoggerHelpers.getAdiBuilderType();return this.mainHelper.validateString(b),this.mainHelper.validateGuid(c),this.mainHelper.validateNumber(d),this.mainHelper.validateString(e),this.mainHelper.validateString(f),this.mainHelper.validateGuid(g),this.mainHelper.validateString(h),this.mainHelper.validateString(i),this.mainHelper.validateString(a),this.mainHelper.validateString(j),this.mainHelper.log({src:66,evid:350,instanceId:b,msid:c,revision:d,structureId:e,industryId:f,esi:g,editMode:h,pageId:i,source:a,adiBuilderType:j})}catch(k){this.mainHelper.onError("BISafe: failed to report pagesManager.pagesPanelIsLoaded",k.stack)}},a.prototype.addPagePanelIsLoaded=function(){try{var a=this.consumerBiLoggerHelpers.getInstanceId(),b=this.consumerBiLoggerHelpers.getMetaSiteId(),c=this.consumerBiLoggerHelpers.getStoryRevision(),d=this.consumerBiLoggerHelpers.getStructureId(),e=this.consumerBiLoggerHelpers.getIndustryId(),f=this.consumerBiLoggerHelpers.getEsi(),g=this.consumerBiLoggerHelpers.getEditMode(),h=this.consumerBiLoggerHelpers.getPageId(),i=this.consumerBiLoggerHelpers.getAdiBuilderType();return this.mainHelper.validateString(a),this.mainHelper.validateGuid(b),this.mainHelper.validateNumber(c),this.mainHelper.validateString(d),this.mainHelper.validateString(e),this.mainHelper.validateGuid(f),this.mainHelper.validateString(g),this.mainHelper.validateString(h),this.mainHelper.validateString(i),this.mainHelper.log({src:66,evid:351,instanceId:a,msid:b,revision:c,structureId:d,industryId:e,esi:f,editMode:g,pageId:h,adiBuilderType:i})}catch(j){this.mainHelper.onError("BISafe: failed to report pagesManager.addPagePanelIsLoaded",j.stack)}},a.prototype.switchPageTypeInTheAddPagePanel=function(a,b,c){try{var d=this.consumerBiLoggerHelpers.getInstanceId(),e=this.consumerBiLoggerHelpers.getMetaSiteId(),f=this.consumerBiLoggerHelpers.getStoryRevision(),g=this.consumerBiLoggerHelpers.getStructureId(),h=this.consumerBiLoggerHelpers.getIndustryId(),i=this.consumerBiLoggerHelpers.getEsi(),j=this.consumerBiLoggerHelpers.getEditMode(),k=this.consumerBiLoggerHelpers.getPageId(),l=this.consumerBiLoggerHelpers.getAdiBuilderType();return this.mainHelper.validateString(d),this.mainHelper.validateGuid(e),this.mainHelper.validateNumber(f),this.mainHelper.validateString(g),this.mainHelper.validateString(h),this.mainHelper.validateGuid(i),this.mainHelper.validateString(j),this.mainHelper.validateString(a),this.mainHelper.validateString(b),this.mainHelper.validateString(k),this.mainHelper.validateString(c),this.mainHelper.validateString(l),this.mainHelper.log({src:66,evid:352,instanceId:d,msid:e,revision:f,structureId:g,industryId:h,esi:i,editMode:j,sectionType:a,sectionAlias:b,pageId:k,place:c,adiBuilderType:l})}catch(m){this.mainHelper.onError("BISafe: failed to report pagesManager.switchPageTypeInTheAddPagePanel",m.stack)}},a.prototype.clickOnDesiredNewPage=function(a,b,c,d,e,f,g){try{var h=this.consumerBiLoggerHelpers.getInstanceId(),i=this.consumerBiLoggerHelpers.getMetaSiteId(),j=this.consumerBiLoggerHelpers.getStoryRevision(),k=this.consumerBiLoggerHelpers.getStructureId(),l=this.consumerBiLoggerHelpers.getIndustryId(),m=this.consumerBiLoggerHelpers.getEsi(),n=this.consumerBiLoggerHelpers.getEditMode(),o=this.consumerBiLoggerHelpers.getPageId(),p=this.consumerBiLoggerHelpers.getAdiBuilderType();return this.mainHelper.validateString(h),this.mainHelper.validateGuid(i),this.mainHelper.validateNumber(j),this.mainHelper.validateString(k),this.mainHelper.validateString(l),this.mainHelper.validateGuid(m),this.mainHelper.validateString(n),this.mainHelper.validateString(a),this.mainHelper.validateString(b),this.mainHelper.validateString(o),this.mainHelper.validateString(c),this.mainHelper.validateNumber(d),this.mainHelper.validateNumber(e),this.mainHelper.validateString(f),this.mainHelper.validateString(p),this.consumerBiLoggerHelpers.resetLoadTime(),this.mainHelper.log({src:66,evid:353,instanceId:h,msid:i,revision:j,structureId:k,industryId:l,esi:m,editMode:n,sectionType:a,sectionAlias:b,pageId:o,place:c,noOfSuggestions:d,placeOfSelected:e,selectedLayout:f,is_columns:g,adiBuilderType:p})}catch(q){this.mainHelper.onError("BISafe: failed to report pagesManager.clickOnDesiredNewPage",q.stack)}},a.prototype.addNewPageSuccess=function(a,b,c,d,e,f,g,h,i,j,k){try{var l=this.consumerBiLoggerHelpers.getInstanceId(),m=this.consumerBiLoggerHelpers.getMetaSiteId(),n=this.consumerBiLoggerHelpers.getStoryRevision(),o=this.consumerBiLoggerHelpers.getStructureId(),p=this.consumerBiLoggerHelpers.getIndustryId(),q=this.consumerBiLoggerHelpers.getEsi(),r=this.consumerBiLoggerHelpers.getPageId(),s=this.consumerBiLoggerHelpers.getLoadTime(),t=this.consumerBiLoggerHelpers.getAdiBuilderType();return this.mainHelper.validateString(l),this.mainHelper.validateGuid(m),this.mainHelper.validateNumber(n),this.mainHelper.validateString(o),this.mainHelper.validateString(p),this.mainHelper.validateGuid(q),this.mainHelper.validateString(a),this.mainHelper.validateString(b),this.mainHelper.validateString(c),this.mainHelper.validateString(r),this.mainHelper.validateString(d),this.mainHelper.validateString(e),this.mainHelper.validateNumber(f),this.mainHelper.validateNumber(g),this.mainHelper.validateString(h),this.mainHelper.validateString(i),this.mainHelper.validateString(j),this.mainHelper.validateNumber(s),this.mainHelper.validateString(t),this.mainHelper.log({src:66,evid:354,instanceId:l,msid:m,revision:n,structureId:o,industryId:p,esi:q,editMode:a,sectionType:b,sectionAlias:c,pageId:r,nodeId:d,place:e,noOfSuggestions:f,placeOfSelected:g,selectedLayout:h,appId:i,appPageType:j,loadTime:s,is_columns:k,adiBuilderType:t})}catch(u){this.mainHelper.onError("BISafe: failed to report pagesManager.addNewPageSuccess",u.stack)}},a.prototype.duplicatePage=function(a){try{var b=this.consumerBiLoggerHelpers.getInstanceId(),c=this.consumerBiLoggerHelpers.getMetaSiteId(),d=this.consumerBiLoggerHelpers.getStoryRevision(),e=this.consumerBiLoggerHelpers.getStructureId(),f=this.consumerBiLoggerHelpers.getIndustryId(),g=this.consumerBiLoggerHelpers.getEsi(),h=this.consumerBiLoggerHelpers.getEditMode(),i=this.consumerBiLoggerHelpers.getPageId(),j=this.consumerBiLoggerHelpers.getAdiBuilderType();return this.mainHelper.validateString(b),this.mainHelper.validateGuid(c),this.mainHelper.validateNumber(d),this.mainHelper.validateString(e),this.mainHelper.validateString(f),this.mainHelper.validateGuid(g),this.mainHelper.validateString(h),this.mainHelper.validateString(i),this.mainHelper.validateString(a),this.mainHelper.validateString(j),this.consumerBiLoggerHelpers.resetLoadTime(),this.mainHelper.log({src:66,evid:367,instanceId:b,msid:c,revision:d,structureId:e,industryId:f,esi:g,editMode:h,pageId:i,originPageId:a,adiBuilderType:j})}catch(k){this.mainHelper.onError("BISafe: failed to report pagesManager.duplicatePage",k.stack)}},a.prototype.hideShowPage=function(a,b){try{var c=this.consumerBiLoggerHelpers.getInstanceId(),d=this.consumerBiLoggerHelpers.getMetaSiteId(),e=this.consumerBiLoggerHelpers.getStoryRevision(),f=this.consumerBiLoggerHelpers.getStructureId(),g=this.consumerBiLoggerHelpers.getIndustryId(),h=this.consumerBiLoggerHelpers.getEsi(),i=this.consumerBiLoggerHelpers.getEditMode(),j=this.consumerBiLoggerHelpers.getPageId(),k=this.consumerBiLoggerHelpers.getAdiBuilderType();return this.mainHelper.validateString(c),this.mainHelper.validateGuid(d),this.mainHelper.validateNumber(e),this.mainHelper.validateString(f),this.mainHelper.validateString(g),this.mainHelper.validateGuid(h),this.mainHelper.validateString(i),this.mainHelper.validateString(j),this.mainHelper.validateString(a),this.mainHelper.validateString(b),this.mainHelper.validateString(k),this.mainHelper.log({src:66,evid:356,instanceId:c,msid:d,revision:e,structureId:f,industryId:g,esi:h,editMode:i,pageId:j,action:a,appId:b,adiBuilderType:k})}catch(l){this.mainHelper.onError("BISafe: failed to report pagesManager.hideShowPage",l.stack)}},a.prototype.renamePage=function(a){try{var b=this.consumerBiLoggerHelpers.getInstanceId(),c=this.consumerBiLoggerHelpers.getMetaSiteId(),d=this.consumerBiLoggerHelpers.getStoryRevision(),e=this.consumerBiLoggerHelpers.getStructureId(),f=this.consumerBiLoggerHelpers.getIndustryId(),g=this.consumerBiLoggerHelpers.getEsi(),h=this.consumerBiLoggerHelpers.getEditMode(),i=this.consumerBiLoggerHelpers.getPageId(),j=this.consumerBiLoggerHelpers.getAdiBuilderType();return this.mainHelper.validateString(b),this.mainHelper.validateGuid(c),this.mainHelper.validateNumber(d),this.mainHelper.validateString(e),this.mainHelper.validateString(f),this.mainHelper.validateGuid(g),this.mainHelper.validateString(h),this.mainHelper.validateString(i),this.mainHelper.validateString(a),this.mainHelper.validateString(j),this.mainHelper.log({src:66,evid:357,instanceId:b,msid:c,revision:d,structureId:e,industryId:f,esi:g,editMode:h,pageId:i,appId:a,adiBuilderType:j})}catch(k){this.mainHelper.onError("BISafe: failed to report pagesManager.renamePage",k.stack)}},a.prototype.setPageAsSubpageMainPage=function(a,b){try{var c=this.consumerBiLoggerHelpers.getInstanceId(),d=this.consumerBiLoggerHelpers.getMetaSiteId(),e=this.consumerBiLoggerHelpers.getStoryRevision(),f=this.consumerBiLoggerHelpers.getStructureId(),g=this.consumerBiLoggerHelpers.getIndustryId(),h=this.consumerBiLoggerHelpers.getEsi(),i=this.consumerBiLoggerHelpers.getEditMode(),j=this.consumerBiLoggerHelpers.getPageId(),k=this.consumerBiLoggerHelpers.getAdiBuilderType();return this.mainHelper.validateString(c),this.mainHelper.validateGuid(d),this.mainHelper.validateNumber(e),this.mainHelper.validateString(f),this.mainHelper.validateString(g),this.mainHelper.validateGuid(h),this.mainHelper.validateString(i),this.mainHelper.validateString(j),this.mainHelper.validateString(a),this.mainHelper.validateString(b),this.mainHelper.validateString(k),this.mainHelper.log({src:66,evid:358,instanceId:c,msid:d,revision:e,structureId:f,industryId:g,esi:h,editMode:i,pageId:j,direction:a,appId:b,adiBuilderType:k})}catch(l){this.mainHelper.onError("BISafe: failed to report pagesManager.setPageAsSubpageMainPage",l.stack)}},a.prototype.clickOnDeletePage=function(a){try{var b=this.consumerBiLoggerHelpers.getInstanceId(),c=this.consumerBiLoggerHelpers.getMetaSiteId(),d=this.consumerBiLoggerHelpers.getStoryRevision(),e=this.consumerBiLoggerHelpers.getStructureId(),f=this.consumerBiLoggerHelpers.getIndustryId(),g=this.consumerBiLoggerHelpers.getEsi(),h=this.consumerBiLoggerHelpers.getEditMode(),i=this.consumerBiLoggerHelpers.getPageId(),j=this.consumerBiLoggerHelpers.getAdiBuilderType();return this.mainHelper.validateString(b),this.mainHelper.validateGuid(c),this.mainHelper.validateNumber(d),this.mainHelper.validateString(e),this.mainHelper.validateString(f),this.mainHelper.validateGuid(g),this.mainHelper.validateString(h),this.mainHelper.validateString(i),this.mainHelper.validateString(a),this.mainHelper.validateString(j),this.consumerBiLoggerHelpers.resetLoadTime(),this.mainHelper.log({src:66,evid:359,instanceId:b,msid:c,revision:d,structureId:e,industryId:f,esi:g,editMode:h,pageId:i,appId:a,adiBuilderType:j})}catch(k){this.mainHelper.onError("BISafe: failed to report pagesManager.clickOnDeletePage",k.stack)}},a.prototype.deletePageSuccess=function(a){try{var b=this.consumerBiLoggerHelpers.getInstanceId(),c=this.consumerBiLoggerHelpers.getMetaSiteId(),d=this.consumerBiLoggerHelpers.getStoryRevision(),e=this.consumerBiLoggerHelpers.getStructureId(),f=this.consumerBiLoggerHelpers.getIndustryId(),g=this.consumerBiLoggerHelpers.getEsi(),h=this.consumerBiLoggerHelpers.getEditMode(),i=this.consumerBiLoggerHelpers.getPageId(),j=this.consumerBiLoggerHelpers.getLoadTime(),k=this.consumerBiLoggerHelpers.getAdiBuilderType();return this.mainHelper.validateString(b),this.mainHelper.validateGuid(c),this.mainHelper.validateNumber(d),this.mainHelper.validateString(e),this.mainHelper.validateString(f),this.mainHelper.validateGuid(g),this.mainHelper.validateString(h),this.mainHelper.validateString(i),this.mainHelper.validateString(a),this.mainHelper.validateNumber(j),this.mainHelper.validateString(k),this.mainHelper.log({src:66,evid:360,instanceId:b,msid:c,revision:d,structureId:e,industryId:f,esi:g,editMode:h,pageId:i,appId:a,loadTime:j,adiBuilderType:k})}catch(l){this.mainHelper.onError("BISafe: failed to report pagesManager.deletePageSuccess",l.stack)}},a.prototype.clickOnSetPageAsHomepage=function(){try{var a=this.consumerBiLoggerHelpers.getInstanceId(),b=this.consumerBiLoggerHelpers.getMetaSiteId(),c=this.consumerBiLoggerHelpers.getStoryRevision(),d=this.consumerBiLoggerHelpers.getStructureId(),e=this.consumerBiLoggerHelpers.getIndustryId(),f=this.consumerBiLoggerHelpers.getEsi(),g=this.consumerBiLoggerHelpers.getEditMode(),h=this.consumerBiLoggerHelpers.getPageId(),i=this.consumerBiLoggerHelpers.getAdiBuilderType();return this.mainHelper.validateString(a),this.mainHelper.validateGuid(b),this.mainHelper.validateNumber(c),this.mainHelper.validateString(d),this.mainHelper.validateString(e),this.mainHelper.validateGuid(f),this.mainHelper.validateString(g),this.mainHelper.validateString(h),this.mainHelper.validateString(i),this.mainHelper.log({src:66,evid:361,instanceId:a,msid:b,revision:c,structureId:d,industryId:e,esi:f,editMode:g,pageId:h,adiBuilderType:i})}catch(j){this.mainHelper.onError("BISafe: failed to report pagesManager.clickOnSetPageAsHomepage",j.stack)}},a.prototype.seoPanelIsLoaded=function(a){try{var b=this.consumerBiLoggerHelpers.getInstanceId(),c=this.consumerBiLoggerHelpers.getMetaSiteId(),d=this.consumerBiLoggerHelpers.getStoryRevision(),e=this.consumerBiLoggerHelpers.getStructureId(),f=this.consumerBiLoggerHelpers.getIndustryId(),g=this.consumerBiLoggerHelpers.getEsi(),h=this.consumerBiLoggerHelpers.getEditMode(),i=this.consumerBiLoggerHelpers.getPageId(),j=this.consumerBiLoggerHelpers.getAdiBuilderType();return this.mainHelper.validateString(b),this.mainHelper.validateGuid(c),this.mainHelper.validateNumber(d),this.mainHelper.validateString(e),this.mainHelper.validateString(f),this.mainHelper.validateGuid(g),this.mainHelper.validateString(h),this.mainHelper.validateString(i),this.mainHelper.validateString(a),this.mainHelper.validateString(j),this.mainHelper.log({src:66,evid:362,instanceId:b,msid:c,revision:d,structureId:e,industryId:f,esi:g,editMode:h,pageId:i,appId:a,adiBuilderType:j})}catch(k){this.mainHelper.onError("BISafe: failed to report pagesManager.seoPanelIsLoaded",k.stack)}},a.prototype.seoPanelFieldWasUpdated=function(a,b,c,d,e){try{var f=this.consumerBiLoggerHelpers.getInstanceId(),g=this.consumerBiLoggerHelpers.getMetaSiteId(),h=this.consumerBiLoggerHelpers.getStoryRevision(),i=this.consumerBiLoggerHelpers.getStructureId(),j=this.consumerBiLoggerHelpers.getIndustryId(),k=this.consumerBiLoggerHelpers.getEsi(),l=this.consumerBiLoggerHelpers.getEditMode(),m=this.consumerBiLoggerHelpers.getPageId(),n=this.consumerBiLoggerHelpers.getAdiBuilderType();return this.mainHelper.validateString(f),this.mainHelper.validateGuid(g),this.mainHelper.validateNumber(h),this.mainHelper.validateString(i),this.mainHelper.validateString(j),this.mainHelper.validateGuid(k),this.mainHelper.validateString(l),this.mainHelper.validateString(m),this.mainHelper.validateString(a),this.mainHelper.validateString(b),this.mainHelper.validateString(c),this.mainHelper.validateString(d),this.mainHelper.validateNumber(e),this.mainHelper.validateString(n),this.mainHelper.log({src:66,evid:363,instanceId:f,msid:g,revision:h,structureId:i,industryId:j,esi:k,editMode:l,pageId:m,appId:a,fieldName:b,fieldType:c,fieldValue:d,fieldLength:e,adiBuilderType:n})}catch(o){this.mainHelper.onError("BISafe: failed to report pagesManager.seoPanelFieldWasUpdated",o.stack)}},a.prototype.transitionBetweenPagesUpdated=function(a,b){try{var c=this.consumerBiLoggerHelpers.getInstanceId(),d=this.consumerBiLoggerHelpers.getMetaSiteId(),e=this.consumerBiLoggerHelpers.getStoryRevision(),f=this.consumerBiLoggerHelpers.getStructureId(),g=this.consumerBiLoggerHelpers.getIndustryId(),h=this.consumerBiLoggerHelpers.getEsi(),i=this.consumerBiLoggerHelpers.getEditMode(),j=this.consumerBiLoggerHelpers.getPageId(),k=this.consumerBiLoggerHelpers.getAdiBuilderType();return this.mainHelper.validateString(c),this.mainHelper.validateGuid(d),this.mainHelper.validateNumber(e),this.mainHelper.validateString(f),this.mainHelper.validateString(g),this.mainHelper.validateGuid(h),this.mainHelper.validateString(i),this.mainHelper.validateString(j),this.mainHelper.validateString(a),this.mainHelper.validateString(b),this.mainHelper.validateString(k),this.mainHelper.log({src:66,evid:364,instanceId:c,msid:d,revision:e,structureId:f,industryId:g,esi:h,editMode:i,pageId:j,transitionType:a,prevTransitionType:b,adiBuilderType:k})}catch(l){this.mainHelper.onError("BISafe: failed to report pagesManager.transitionBetweenPagesUpdated",l.stack)}},a.prototype.reorderPage=function(a,b,c){try{var d=this.consumerBiLoggerHelpers.getInstanceId(),e=this.consumerBiLoggerHelpers.getMetaSiteId(),f=this.consumerBiLoggerHelpers.getStoryRevision(),g=this.consumerBiLoggerHelpers.getStructureId(),h=this.consumerBiLoggerHelpers.getIndustryId(),i=this.consumerBiLoggerHelpers.getEsi(),j=this.consumerBiLoggerHelpers.getEditMode(),k=this.consumerBiLoggerHelpers.getPageId(),l=this.consumerBiLoggerHelpers.getAdiBuilderType();return this.mainHelper.validateString(d),this.mainHelper.validateGuid(e),this.mainHelper.validateNumber(f),this.mainHelper.validateString(g),this.mainHelper.validateString(h),this.mainHelper.validateGuid(i),this.mainHelper.validateString(j),this.mainHelper.validateString(k),this.mainHelper.validateNumber(a),this.mainHelper.validateNumber(b),this.mainHelper.validateString(c),this.mainHelper.validateString(l),this.mainHelper.log({src:66,evid:365,instanceId:d,msid:e,revision:f,structureId:g,industryId:h,esi:i,editMode:j,pageId:k,position:a,prevPosition:b,appId:c,adiBuilderType:l})}catch(m){this.mainHelper.onError("BISafe: failed to report pagesManager.reorderPage",m.stack)}},a.prototype.pagesPanelWasClosed=function(a){try{var b=this.consumerBiLoggerHelpers.getInstanceId(),c=this.consumerBiLoggerHelpers.getMetaSiteId(),d=this.consumerBiLoggerHelpers.getStoryRevision(),e=this.consumerBiLoggerHelpers.getStructureId(),f=this.consumerBiLoggerHelpers.getIndustryId(),g=this.consumerBiLoggerHelpers.getEsi(),h=this.consumerBiLoggerHelpers.getEditMode(),i=this.consumerBiLoggerHelpers.getAdiBuilderType();return this.mainHelper.validateString(b),this.mainHelper.validateGuid(c),this.mainHelper.validateNumber(d),this.mainHelper.validateString(e),this.mainHelper.validateString(f),this.mainHelper.validateGuid(g),this.mainHelper.validateString(h),this.mainHelper.validateString(a),this.mainHelper.validateString(i),this.mainHelper.log({src:66,evid:366,instanceId:b,msid:c,revision:d,structureId:e,industryId:f,esi:g,editMode:h,name:a,adiBuilderType:i})}catch(j){this.mainHelper.onError("BISafe: failed to report pagesManager.pagesPanelWasClosed",j.stack)}},a.prototype.duplicatePageSuccess=function(a){try{var b=this.consumerBiLoggerHelpers.getEditMode(),c=this.consumerBiLoggerHelpers.getEsi(),d=this.consumerBiLoggerHelpers.getIndustryId(),e=this.consumerBiLoggerHelpers.getInstanceId(),f=this.consumerBiLoggerHelpers.getMetaSiteId(),g=this.consumerBiLoggerHelpers.getPageId(),h=this.consumerBiLoggerHelpers.getStoryRevision(),i=this.consumerBiLoggerHelpers.getStructureId(),j=this.consumerBiLoggerHelpers.getLoadTime(),k=this.consumerBiLoggerHelpers.getAdiBuilderType();return this.mainHelper.validateString(b),this.mainHelper.validateGuid(c),this.mainHelper.validateString(d),this.mainHelper.validateString(e),this.mainHelper.validateGuid(f),this.mainHelper.validateString(a),this.mainHelper.validateString(g),this.mainHelper.validateNumber(h),this.mainHelper.validateString(i),this.mainHelper.validateNumber(j),this.mainHelper.validateString(k),this.mainHelper.log({src:66,evid:355,editMode:b,esi:c,industryId:d,instanceId:e,msid:f,originPageId:a,pageId:g,revision:h,structureId:i,loadTime:j,adiBuilderType:k})}catch(l){this.mainHelper.onError("BISafe: failed to report pagesManager.duplicatePageSuccess",l.stack)}},a.prototype.clickOnPage=function(a,b,c){try{var d=this.consumerBiLoggerHelpers.getEditMode(),e=this.consumerBiLoggerHelpers.getEsi(),f=this.consumerBiLoggerHelpers.getIndustryId(),g=this.consumerBiLoggerHelpers.getInstanceId(),h=this.consumerBiLoggerHelpers.getMetaSiteId(),i=this.consumerBiLoggerHelpers.getPageId(),j=this.consumerBiLoggerHelpers.getStoryRevision(),k=this.consumerBiLoggerHelpers.getStructureId(),l=this.consumerBiLoggerHelpers.getAdiBuilderType();return this.mainHelper.validateString(a),this.mainHelper.validateString(b),this.mainHelper.validateString(c),this.mainHelper.validateString(d),this.mainHelper.validateGuid(e),this.mainHelper.validateString(f),this.mainHelper.validateString(g),this.mainHelper.validateGuid(h),this.mainHelper.validateString(i),this.mainHelper.validateNumber(j),this.mainHelper.validateString(k),this.mainHelper.validateString(l),this.consumerBiLoggerHelpers.resetLoadTime(),this.mainHelper.log({src:66,evid:368,pageName:a,appId:b,source:c,editMode:d,esi:e,industryId:f,instanceId:g,msid:h,pageId:i,revision:j,structureId:k,adiBuilderType:l})}catch(m){this.mainHelper.onError("BISafe: failed to report pagesManager.clickOnPage",m.stack)}},a.prototype.clickOnSettings=function(a){try{var b=this.consumerBiLoggerHelpers.getEditMode(),c=this.consumerBiLoggerHelpers.getEsi(),d=this.consumerBiLoggerHelpers.getIndustryId(),e=this.consumerBiLoggerHelpers.getInstanceId(),f=this.consumerBiLoggerHelpers.getMetaSiteId(),g=this.consumerBiLoggerHelpers.getPageId(),h=this.consumerBiLoggerHelpers.getStoryRevision(),i=this.consumerBiLoggerHelpers.getStructureId(),j=this.consumerBiLoggerHelpers.getAdiBuilderType();return this.mainHelper.validateString(a),this.mainHelper.validateString(b),this.mainHelper.validateGuid(c),this.mainHelper.validateString(d),this.mainHelper.validateString(e),this.mainHelper.validateGuid(f),this.mainHelper.validateString(g),this.mainHelper.validateNumber(h),this.mainHelper.validateString(i),this.mainHelper.validateString(j),this.mainHelper.log({src:66,evid:369,pageName:a,editMode:b,esi:c,industryId:d,instanceId:e,msid:f,pageId:g,revision:h,structureId:i,adiBuilderType:j})}catch(k){this.mainHelper.onError("BISafe: failed to report pagesManager.clickOnSettings",k.stack)}},a.prototype.gotoPageSuccess=function(a,b,c){try{var d=this.consumerBiLoggerHelpers.getEditMode(),e=this.consumerBiLoggerHelpers.getEsi(),f=this.consumerBiLoggerHelpers.getIndustryId(),g=this.consumerBiLoggerHelpers.getInstanceId(),h=this.consumerBiLoggerHelpers.getMetaSiteId(),i=this.consumerBiLoggerHelpers.getPageId(),j=this.consumerBiLoggerHelpers.getStoryRevision(),k=this.consumerBiLoggerHelpers.getStructureId(),l=this.consumerBiLoggerHelpers.getLoadTime(),m=this.consumerBiLoggerHelpers.getAdiBuilderType();return this.mainHelper.validateString(a),this.mainHelper.validateString(b),this.mainHelper.validateString(c),this.mainHelper.validateString(d),this.mainHelper.validateGuid(e),this.mainHelper.validateString(f),this.mainHelper.validateString(g),this.mainHelper.validateGuid(h),this.mainHelper.validateString(i),this.mainHelper.validateNumber(j),this.mainHelper.validateString(k),this.mainHelper.validateNumber(l),this.mainHelper.validateString(m),this.mainHelper.log({src:66,evid:370,pageName:a,appId:b,source:c,editMode:d,esi:e,industryId:f,instanceId:g,msid:h,pageId:i,revision:j,structureId:k,loadTime:l,adiBuilderType:m})}catch(n){this.mainHelper.onError("BISafe: failed to report pagesManager.gotoPageSuccess",n.stack)}},a.prototype.addTpaPackageSuccess=function(a,b,c,d,e){try{var f=this.consumerBiLoggerHelpers.getEditMode(),g=this.consumerBiLoggerHelpers.getEsi(),h=this.consumerBiLoggerHelpers.getIndustryId(),i=this.consumerBiLoggerHelpers.getInstanceId(),j=this.consumerBiLoggerHelpers.getMetaSiteId(),k=this.consumerBiLoggerHelpers.getStoryRevision(),l=this.consumerBiLoggerHelpers.getStructureId(),m=this.consumerBiLoggerHelpers.getAdiBuilderType();return this.mainHelper.validateNumber(a),this.mainHelper.validateString(b),this.mainHelper.validateString(f),this.mainHelper.validateGuid(g),this.mainHelper.validateString(h),this.mainHelper.validateString(i),this.mainHelper.validateNumber(d),this.mainHelper.validateGuid(j),this.mainHelper.validateString(e),this.mainHelper.validateNumber(k),this.mainHelper.validateString(l),this.mainHelper.validateString(m),this.mainHelper.log({src:66,evid:371,numOfPages:a,appId:b,editMode:f,esi:g,industryId:h,instanceId:i,is_columns:c,loadTime:d,msid:j,nodeId:e,revision:k,structureId:l,adiBuilderType:m})}catch(n){this.mainHelper.onError("BISafe: failed to report pagesManager.addTpaPackageSuccess",n.stack)}},a.prototype.pagesDropdownListOpenOnHover=function(){try{var a=this.consumerBiLoggerHelpers.getEditMode(),b=this.consumerBiLoggerHelpers.getEsi(),c=this.consumerBiLoggerHelpers.getIndustryId(),d=this.consumerBiLoggerHelpers.getInstanceId(),e=this.consumerBiLoggerHelpers.getMetaSiteId(),f=this.consumerBiLoggerHelpers.getPageId(),g=this.consumerBiLoggerHelpers.getStoryRevision(),h=this.consumerBiLoggerHelpers.getStructureId(),i=this.consumerBiLoggerHelpers.getAdiBuilderType();return this.mainHelper.validateString(a),this.mainHelper.validateGuid(b),this.mainHelper.validateString(c),this.mainHelper.validateString(d),this.mainHelper.validateGuid(e),this.mainHelper.validateString(f),this.mainHelper.validateNumber(g),this.mainHelper.validateString(h),this.mainHelper.validateString(i),this.mainHelper.log({src:66,evid:372,editMode:a,esi:b,industryId:c,instanceId:d,msid:e,pageId:f,revision:g,structureId:h,adiBuilderType:i})}catch(j){this.mainHelper.onError("BISafe: failed to report pagesManager.pagesDropdownListOpenOnHover",j.stack)}},a}(),ProvisioningConsumerBiLogger=function(){function a(a,b,c){this.consumerBiLoggerHelpers=a,this.clientTopology=b,this.mainHelper=c}return a.prototype.tpaIntent=function(a,b,c,d){try{var e=this.consumerBiLoggerHelpers.getMetaSiteId();return this.mainHelper.validateString(a),this.mainHelper.validateGuid(e),this.mainHelper.validateGuid(b),this.mainHelper.validateString(c),this.mainHelper.validateString(d),this.mainHelper.log({src:75,evid:12,instance_id:a,msid:e,app_id:b,type:c,initiator:d,adapter:"app-sdk"})}catch(f){this.mainHelper.onError("BISafe: failed to report provisioning.tpaIntent",f.stack)}},a.prototype.tpaAppEngagement=function(a,b,c){try{var d=this.consumerBiLoggerHelpers.getMetaSiteId();return this.mainHelper.validateString(a),this.mainHelper.validateGuid(d),this.mainHelper.validateGuid(b),this.mainHelper.validateString(c),this.mainHelper.log({src:75,evid:13,instance_id:a,msid:d,app_id:b,premium_intent:c,adapter:"app-sdk"})}catch(e){this.mainHelper.onError("BISafe: failed to report provisioning.tpaAppEngagement",e.stack)}},a}(),SectionDesignConsumerBiLogger=function(){function a(a,b,c){this.consumerBiLoggerHelpers=a,this.clientTopology=b,this.mainHelper=c}return a.prototype.colorPanelOpened=function(a,b,c){try{var d=this.consumerBiLoggerHelpers.getEditMode(),e=this.consumerBiLoggerHelpers.getEsi(),f=this.consumerBiLoggerHelpers.getIndustryId(),g=this.consumerBiLoggerHelpers.getInstanceId(),h=this.consumerBiLoggerHelpers.getMetaSiteId(),i=this.consumerBiLoggerHelpers.getStoryRevision(),j=this.consumerBiLoggerHelpers.getStructureId(),k=this.consumerBiLoggerHelpers.getAdiBuilderType();return this.mainHelper.validateString(d),this.mainHelper.validateGuid(e),this.mainHelper.validateString(f),this.mainHelper.validateString(g),this.mainHelper.validateGuid(h),this.mainHelper.validateNumber(i),this.mainHelper.validateString(a),this.mainHelper.validateString(b),this.mainHelper.validateString(j),this.mainHelper.validateString(c),this.mainHelper.validateString(k),this.mainHelper.log({src:66,evid:550,editMode:d,esi:e,industryId:f,instanceId:g,msid:h,revision:i,sectionAlias:a,sectionType:b,structureId:j,origin:c,adiBuilderType:k})}catch(l){this.mainHelper.onError("BISafe: failed to report sectionDesign.colorPanelOpened",l.stack)}},a.prototype.fontPanelOpened=function(a,b){try{var c=this.consumerBiLoggerHelpers.getEditMode(),d=this.consumerBiLoggerHelpers.getEsi(),e=this.consumerBiLoggerHelpers.getIndustryId(),f=this.consumerBiLoggerHelpers.getInstanceId(),g=this.consumerBiLoggerHelpers.getMetaSiteId(),h=this.consumerBiLoggerHelpers.getStoryRevision(),i=this.consumerBiLoggerHelpers.getStructureId(),j=this.consumerBiLoggerHelpers.getAdiBuilderType();return this.mainHelper.validateString(c),this.mainHelper.validateGuid(d),this.mainHelper.validateString(e),this.mainHelper.validateString(f),this.mainHelper.validateGuid(g),this.mainHelper.validateNumber(h),this.mainHelper.validateString(a),this.mainHelper.validateString(b),this.mainHelper.validateString(i),
this.mainHelper.validateString(j),this.mainHelper.log({src:66,evid:553,editMode:c,esi:d,industryId:e,instanceId:f,msid:g,revision:h,sectionAlias:a,sectionType:b,structureId:i,adiBuilderType:j})}catch(k){this.mainHelper.onError("BISafe: failed to report sectionDesign.fontPanelOpened",k.stack)}},a.prototype.animationPanelOpened=function(a,b){try{var c=this.consumerBiLoggerHelpers.getEditMode(),d=this.consumerBiLoggerHelpers.getEsi(),e=this.consumerBiLoggerHelpers.getIndustryId(),f=this.consumerBiLoggerHelpers.getInstanceId(),g=this.consumerBiLoggerHelpers.getMetaSiteId(),h=this.consumerBiLoggerHelpers.getStoryRevision(),i=this.consumerBiLoggerHelpers.getStructureId(),j=this.consumerBiLoggerHelpers.getAdiBuilderType();return this.mainHelper.validateString(c),this.mainHelper.validateGuid(d),this.mainHelper.validateString(e),this.mainHelper.validateString(f),this.mainHelper.validateGuid(g),this.mainHelper.validateNumber(h),this.mainHelper.validateString(a),this.mainHelper.validateString(b),this.mainHelper.validateString(i),this.mainHelper.validateString(j),this.mainHelper.log({src:66,evid:556,editMode:c,esi:d,industryId:e,instanceId:f,msid:g,revision:h,sectionAlias:a,sectionType:b,structureId:i,adiBuilderType:j})}catch(k){this.mainHelper.onError("BISafe: failed to report sectionDesign.animationPanelOpened",k.stack)}},a.prototype.backgroundPanelOpened=function(a,b,c,d){try{var e=this.consumerBiLoggerHelpers.getEditMode(),f=this.consumerBiLoggerHelpers.getEsi(),g=this.consumerBiLoggerHelpers.getIndustryId(),h=this.consumerBiLoggerHelpers.getInstanceId(),i=this.consumerBiLoggerHelpers.getMetaSiteId(),j=this.consumerBiLoggerHelpers.getStoryRevision(),k=this.consumerBiLoggerHelpers.getStructureId(),l=this.consumerBiLoggerHelpers.getAdiBuilderType();return this.mainHelper.validateString(a),this.mainHelper.validateString(b),this.mainHelper.validateString(e),this.mainHelper.validateGuid(f),this.mainHelper.validateString(g),this.mainHelper.validateString(h),this.mainHelper.validateGuid(i),this.mainHelper.validateNumber(j),this.mainHelper.validateString(c),this.mainHelper.validateString(d),this.mainHelper.validateString(k),this.mainHelper.validateString(l),this.mainHelper.log({src:66,evid:561,name:a,origin:b,editMode:e,esi:f,industryId:g,instanceId:h,msid:i,revision:j,sectionAlias:c,sectionType:d,structureId:k,adiBuilderType:l})}catch(m){this.mainHelper.onError("BISafe: failed to report sectionDesign.backgroundPanelOpened",m.stack)}},a.prototype.changeFontSizeClick=function(a,b,c,d){try{var e=this.consumerBiLoggerHelpers.getDesignId(),f=this.consumerBiLoggerHelpers.getEditMode(),g=this.consumerBiLoggerHelpers.getEsi(),h=this.consumerBiLoggerHelpers.getIndustryId(),i=this.consumerBiLoggerHelpers.getInstanceId(),j=this.consumerBiLoggerHelpers.getMetaSiteId(),k=this.consumerBiLoggerHelpers.getStoryRevision(),l=this.consumerBiLoggerHelpers.getStructureId(),m=this.consumerBiLoggerHelpers.getAdiBuilderType();return this.mainHelper.validateString(a),this.mainHelper.validateString(b),this.mainHelper.validateString(c),this.mainHelper.validateString(d),this.mainHelper.validateString(e),this.mainHelper.validateString(f),this.mainHelper.validateGuid(g),this.mainHelper.validateString(h),this.mainHelper.validateString(i),this.mainHelper.validateGuid(j),this.mainHelper.validateNumber(k),this.mainHelper.validateString(l),this.mainHelper.validateString(m),this.mainHelper.log({src:66,evid:554,sectionType:a,sectionAlias:b,fontSize:c,setId:d,designId:e,editMode:f,esi:g,industryId:h,instanceId:i,msid:j,revision:k,structureId:l,adiBuilderType:m})}catch(n){this.mainHelper.onError("BISafe: failed to report sectionDesign.changeFontSizeClick",n.stack)}},a.prototype.changeFontSizeSuccess=function(a,b,c,d){try{var e=this.consumerBiLoggerHelpers.getLoadTime(),f=this.consumerBiLoggerHelpers.getDesignId(),g=this.consumerBiLoggerHelpers.getEditMode(),h=this.consumerBiLoggerHelpers.getEsi(),i=this.consumerBiLoggerHelpers.getIndustryId(),j=this.consumerBiLoggerHelpers.getInstanceId(),k=this.consumerBiLoggerHelpers.getMetaSiteId(),l=this.consumerBiLoggerHelpers.getStoryRevision(),m=this.consumerBiLoggerHelpers.getStructureId(),n=this.consumerBiLoggerHelpers.getAdiBuilderType();return this.mainHelper.validateString(a),this.mainHelper.validateString(b),this.mainHelper.validateNumber(e),this.mainHelper.validateString(c),this.mainHelper.validateString(d),this.mainHelper.validateString(f),this.mainHelper.validateString(g),this.mainHelper.validateGuid(h),this.mainHelper.validateString(i),this.mainHelper.validateString(j),this.mainHelper.validateGuid(k),this.mainHelper.validateNumber(l),this.mainHelper.validateString(m),this.mainHelper.validateString(n),this.mainHelper.log({src:66,evid:555,sectionAlias:a,sectionType:b,loadTime:e,fontSize:c,setId:d,designId:f,editMode:g,esi:h,industryId:i,instanceId:j,msid:k,revision:l,structureId:m,adiBuilderType:n})}catch(o){this.mainHelper.onError("BISafe: failed to report sectionDesign.changeFontSizeSuccess",o.stack)}},a.prototype.changeColorSuccess=function(a,b){try{var c=this.consumerBiLoggerHelpers.getLoadTime(),d=this.consumerBiLoggerHelpers.getDesignId(),e=this.consumerBiLoggerHelpers.getEditMode(),f=this.consumerBiLoggerHelpers.getEsi(),g=this.consumerBiLoggerHelpers.getIndustryId(),h=this.consumerBiLoggerHelpers.getInstanceId(),i=this.consumerBiLoggerHelpers.getMetaSiteId(),j=this.consumerBiLoggerHelpers.getStoryRevision(),k=this.consumerBiLoggerHelpers.getStructureId(),l=this.consumerBiLoggerHelpers.getAdiBuilderType();return this.mainHelper.validateString(a),this.mainHelper.validateString(b),this.mainHelper.validateNumber(c),this.mainHelper.validateString(d),this.mainHelper.validateString(e),this.mainHelper.validateGuid(f),this.mainHelper.validateString(g),this.mainHelper.validateString(h),this.mainHelper.validateGuid(i),this.mainHelper.validateNumber(j),this.mainHelper.validateString(k),this.mainHelper.validateString(l),this.mainHelper.log({src:66,evid:552,sectionAlias:a,sectionType:b,loadTime:c,designId:d,editMode:e,esi:f,industryId:g,instanceId:h,msid:i,revision:j,structureId:k,adiBuilderType:l})}catch(m){this.mainHelper.onError("BISafe: failed to report sectionDesign.changeColorSuccess",m.stack)}},a.prototype.changeColorClick=function(a,b){try{var c=this.consumerBiLoggerHelpers.getDesignId(),d=this.consumerBiLoggerHelpers.getEditMode(),e=this.consumerBiLoggerHelpers.getEsi(),f=this.consumerBiLoggerHelpers.getIndustryId(),g=this.consumerBiLoggerHelpers.getInstanceId(),h=this.consumerBiLoggerHelpers.getMetaSiteId(),i=this.consumerBiLoggerHelpers.getStoryRevision(),j=this.consumerBiLoggerHelpers.getStructureId(),k=this.consumerBiLoggerHelpers.getAdiBuilderType();return this.mainHelper.validateString(a),this.mainHelper.validateString(b),this.mainHelper.validateString(c),this.mainHelper.validateString(d),this.mainHelper.validateGuid(e),this.mainHelper.validateString(f),this.mainHelper.validateString(g),this.mainHelper.validateGuid(h),this.mainHelper.validateNumber(i),this.mainHelper.validateString(j),this.mainHelper.validateString(k),this.mainHelper.log({src:66,evid:551,sectionAlias:a,sectionType:b,designId:c,editMode:d,esi:e,industryId:f,instanceId:g,msid:h,revision:i,structureId:j,adiBuilderType:k})}catch(l){this.mainHelper.onError("BISafe: failed to report sectionDesign.changeColorClick",l.stack)}},a.prototype.changeElementAnimationClick=function(a,b,c){try{var d=this.consumerBiLoggerHelpers.getDesignId(),e=this.consumerBiLoggerHelpers.getEditMode(),f=this.consumerBiLoggerHelpers.getEsi(),g=this.consumerBiLoggerHelpers.getIndustryId(),h=this.consumerBiLoggerHelpers.getInstanceId(),i=this.consumerBiLoggerHelpers.getMetaSiteId(),j=this.consumerBiLoggerHelpers.getStoryRevision(),k=this.consumerBiLoggerHelpers.getStructureId(),l=this.consumerBiLoggerHelpers.getAdiBuilderType();return this.mainHelper.validateString(a),this.mainHelper.validateString(b),this.mainHelper.validateString(c),this.mainHelper.validateString(d),this.mainHelper.validateString(e),this.mainHelper.validateGuid(f),this.mainHelper.validateString(g),this.mainHelper.validateString(h),this.mainHelper.validateGuid(i),this.mainHelper.validateNumber(j),this.mainHelper.validateString(k),this.mainHelper.validateString(l),this.mainHelper.log({src:66,evid:557,sectionAlias:a,sectionType:b,name:c,designId:d,editMode:e,esi:f,industryId:g,instanceId:h,msid:i,revision:j,structureId:k,adiBuilderType:l})}catch(m){this.mainHelper.onError("BISafe: failed to report sectionDesign.changeElementAnimationClick",m.stack)}},a.prototype.changeElementAnimationSuccess=function(a,b,c){try{var d=this.consumerBiLoggerHelpers.getLoadTime(),e=this.consumerBiLoggerHelpers.getDesignId(),f=this.consumerBiLoggerHelpers.getEditMode(),g=this.consumerBiLoggerHelpers.getEsi(),h=this.consumerBiLoggerHelpers.getIndustryId(),i=this.consumerBiLoggerHelpers.getInstanceId(),j=this.consumerBiLoggerHelpers.getMetaSiteId(),k=this.consumerBiLoggerHelpers.getStoryRevision(),l=this.consumerBiLoggerHelpers.getStructureId(),m=this.consumerBiLoggerHelpers.getAdiBuilderType();return this.mainHelper.validateString(a),this.mainHelper.validateString(b),this.mainHelper.validateNumber(d),this.mainHelper.validateString(c),this.mainHelper.validateString(e),this.mainHelper.validateString(f),this.mainHelper.validateGuid(g),this.mainHelper.validateString(h),this.mainHelper.validateString(i),this.mainHelper.validateGuid(j),this.mainHelper.validateNumber(k),this.mainHelper.validateString(l),this.mainHelper.validateString(m),this.mainHelper.log({src:66,evid:558,sectionAlias:a,sectionType:b,loadTime:d,name:c,designId:e,editMode:f,esi:g,industryId:h,instanceId:i,msid:j,revision:k,structureId:l,adiBuilderType:m})}catch(n){this.mainHelper.onError("BISafe: failed to report sectionDesign.changeElementAnimationSuccess",n.stack)}},a.prototype.changeScrollAnimationClick=function(a,b,c,d){try{var e=this.consumerBiLoggerHelpers.getDesignId(),f=this.consumerBiLoggerHelpers.getEditMode(),g=this.consumerBiLoggerHelpers.getEsi(),h=this.consumerBiLoggerHelpers.getIndustryId(),i=this.consumerBiLoggerHelpers.getInstanceId(),j=this.consumerBiLoggerHelpers.getMetaSiteId(),k=this.consumerBiLoggerHelpers.getStoryRevision(),l=this.consumerBiLoggerHelpers.getStructureId(),m=this.consumerBiLoggerHelpers.getAdiBuilderType();return this.mainHelper.validateString(a),this.mainHelper.validateString(b),this.mainHelper.validateString(c),this.mainHelper.validateString(d),this.mainHelper.validateString(e),this.mainHelper.validateString(f),this.mainHelper.validateGuid(g),this.mainHelper.validateString(h),this.mainHelper.validateString(i),this.mainHelper.validateGuid(j),this.mainHelper.validateNumber(k),this.mainHelper.validateString(l),this.mainHelper.validateString(m),this.mainHelper.log({src:66,evid:559,sectionAlias:a,sectionType:b,alias:c,name:d,designId:e,editMode:f,esi:g,industryId:h,instanceId:i,msid:j,revision:k,structureId:l,adiBuilderType:m})}catch(n){this.mainHelper.onError("BISafe: failed to report sectionDesign.changeScrollAnimationClick",n.stack)}},a.prototype.changeScrollAnimationSuccess=function(a,b,c,d){try{var e=this.consumerBiLoggerHelpers.getLoadTime(),f=this.consumerBiLoggerHelpers.getDesignId(),g=this.consumerBiLoggerHelpers.getEditMode(),h=this.consumerBiLoggerHelpers.getEsi(),i=this.consumerBiLoggerHelpers.getIndustryId(),j=this.consumerBiLoggerHelpers.getInstanceId(),k=this.consumerBiLoggerHelpers.getMetaSiteId(),l=this.consumerBiLoggerHelpers.getStoryRevision(),m=this.consumerBiLoggerHelpers.getStructureId(),n=this.consumerBiLoggerHelpers.getAdiBuilderType();return this.mainHelper.validateString(a),this.mainHelper.validateString(b),this.mainHelper.validateString(c),this.mainHelper.validateNumber(e),this.mainHelper.validateString(d),this.mainHelper.validateString(f),this.mainHelper.validateString(g),this.mainHelper.validateGuid(h),this.mainHelper.validateString(i),this.mainHelper.validateString(j),this.mainHelper.validateGuid(k),this.mainHelper.validateNumber(l),this.mainHelper.validateString(m),this.mainHelper.validateString(n),this.mainHelper.log({src:66,evid:560,sectionAlias:a,sectionType:b,alias:c,loadTime:e,name:d,designId:f,editMode:g,esi:h,industryId:i,instanceId:j,msid:k,revision:l,structureId:m,adiBuilderType:n})}catch(o){this.mainHelper.onError("BISafe: failed to report sectionDesign.changeScrollAnimationSuccess",o.stack)}},a.prototype.changeBackgroundClick=function(a,b,c,d){try{var e=this.consumerBiLoggerHelpers.getDesignId(),f=this.consumerBiLoggerHelpers.getEditMode(),g=this.consumerBiLoggerHelpers.getEsi(),h=this.consumerBiLoggerHelpers.getIndustryId(),i=this.consumerBiLoggerHelpers.getInstanceId(),j=this.consumerBiLoggerHelpers.getMetaSiteId(),k=this.consumerBiLoggerHelpers.getStoryRevision(),l=this.consumerBiLoggerHelpers.getStructureId(),m=this.consumerBiLoggerHelpers.getAdiBuilderType();return this.mainHelper.validateString(a),this.mainHelper.validateString(b),this.mainHelper.validateString(c),this.mainHelper.validateString(d),this.mainHelper.validateString(e),this.mainHelper.validateString(f),this.mainHelper.validateGuid(g),this.mainHelper.validateString(h),this.mainHelper.validateString(i),this.mainHelper.validateGuid(j),this.mainHelper.validateNumber(k),this.mainHelper.validateString(l),this.mainHelper.validateString(m),this.mainHelper.log({src:66,evid:562,mediaType:a,sectionType:b,sectionAlias:c,name:d,designId:e,editMode:f,esi:g,industryId:h,instanceId:i,msid:j,revision:k,structureId:l,adiBuilderType:m})}catch(n){this.mainHelper.onError("BISafe: failed to report sectionDesign.changeBackgroundClick",n.stack)}},a.prototype.changeBackgroundSuccess=function(a,b,c,d){try{var e=this.consumerBiLoggerHelpers.getLoadTime(),f=this.consumerBiLoggerHelpers.getDesignId(),g=this.consumerBiLoggerHelpers.getEditMode(),h=this.consumerBiLoggerHelpers.getEsi(),i=this.consumerBiLoggerHelpers.getIndustryId(),j=this.consumerBiLoggerHelpers.getInstanceId(),k=this.consumerBiLoggerHelpers.getMetaSiteId(),l=this.consumerBiLoggerHelpers.getStoryRevision(),m=this.consumerBiLoggerHelpers.getStructureId(),n=this.consumerBiLoggerHelpers.getAdiBuilderType();return this.mainHelper.validateString(a),this.mainHelper.validateNumber(e),this.mainHelper.validateString(b),this.mainHelper.validateString(c),this.mainHelper.validateString(d),this.mainHelper.validateString(f),this.mainHelper.validateString(g),this.mainHelper.validateGuid(h),this.mainHelper.validateString(i),this.mainHelper.validateString(j),this.mainHelper.validateGuid(k),this.mainHelper.validateNumber(l),this.mainHelper.validateString(m),this.mainHelper.validateString(n),this.mainHelper.log({src:66,evid:563,mediaType:a,loadTime:e,sectionType:b,sectionAlias:c,name:d,designId:f,editMode:g,esi:h,industryId:i,instanceId:j,msid:k,revision:l,structureId:m,adiBuilderType:n})}catch(o){this.mainHelper.onError("BISafe: failed to report sectionDesign.changeBackgroundSuccess",o.stack)}},a.prototype.showHideListHeaderBackgroundClick=function(a,b,c){try{var d=this.consumerBiLoggerHelpers.getDesignId(),e=this.consumerBiLoggerHelpers.getEditMode(),f=this.consumerBiLoggerHelpers.getEsi(),g=this.consumerBiLoggerHelpers.getIndustryId(),h=this.consumerBiLoggerHelpers.getInstanceId(),i=this.consumerBiLoggerHelpers.getMetaSiteId(),j=this.consumerBiLoggerHelpers.getStoryRevision(),k=this.consumerBiLoggerHelpers.getStructureId(),l=this.consumerBiLoggerHelpers.getAdiBuilderType();return this.mainHelper.validateString(a),this.mainHelper.validateString(b),this.mainHelper.validateString(c),this.mainHelper.validateString(d),this.mainHelper.validateString(e),this.mainHelper.validateGuid(f),this.mainHelper.validateString(g),this.mainHelper.validateString(h),this.mainHelper.validateGuid(i),this.mainHelper.validateNumber(j),this.mainHelper.validateString(k),this.mainHelper.validateString(l),this.mainHelper.log({src:66,evid:564,sectionType:a,sectionAlias:b,action:c,designId:d,editMode:e,esi:f,industryId:g,instanceId:h,msid:i,revision:j,structureId:k,adiBuilderType:l})}catch(m){this.mainHelper.onError("BISafe: failed to report sectionDesign.showHideListHeaderBackgroundClick",m.stack)}},a.prototype.showHideListHeaderBackgroundSuccess=function(a,b,c){try{var d=this.consumerBiLoggerHelpers.getLoadTime(),e=this.consumerBiLoggerHelpers.getDesignId(),f=this.consumerBiLoggerHelpers.getEditMode(),g=this.consumerBiLoggerHelpers.getEsi(),h=this.consumerBiLoggerHelpers.getIndustryId(),i=this.consumerBiLoggerHelpers.getInstanceId(),j=this.consumerBiLoggerHelpers.getMetaSiteId(),k=this.consumerBiLoggerHelpers.getStoryRevision(),l=this.consumerBiLoggerHelpers.getStructureId(),m=this.consumerBiLoggerHelpers.getAdiBuilderType();return this.mainHelper.validateNumber(d),this.mainHelper.validateString(a),this.mainHelper.validateString(b),this.mainHelper.validateString(c),this.mainHelper.validateString(e),this.mainHelper.validateString(f),this.mainHelper.validateGuid(g),this.mainHelper.validateString(h),this.mainHelper.validateString(i),this.mainHelper.validateGuid(j),this.mainHelper.validateNumber(k),this.mainHelper.validateString(l),this.mainHelper.validateString(m),this.mainHelper.log({src:66,evid:565,loadTime:d,sectionType:a,sectionAlias:b,action:c,designId:e,editMode:f,esi:g,industryId:h,instanceId:i,msid:j,revision:k,structureId:l,adiBuilderType:m})}catch(n){this.mainHelper.onError("BISafe: failed to report sectionDesign.showHideListHeaderBackgroundSuccess",n.stack)}},a.prototype.uploadBackgroundClick=function(a,b,c,d){try{var e=this.consumerBiLoggerHelpers.getDesignId(),f=this.consumerBiLoggerHelpers.getEditMode(),g=this.consumerBiLoggerHelpers.getEsi(),h=this.consumerBiLoggerHelpers.getIndustryId(),i=this.consumerBiLoggerHelpers.getInstanceId(),j=this.consumerBiLoggerHelpers.getMetaSiteId(),k=this.consumerBiLoggerHelpers.getStoryRevision(),l=this.consumerBiLoggerHelpers.getStructureId(),m=this.consumerBiLoggerHelpers.getAdiBuilderType();return this.mainHelper.validateString(e),this.mainHelper.validateString(f),this.mainHelper.validateGuid(g),this.mainHelper.validateString(h),this.mainHelper.validateString(i),this.mainHelper.validateString(a),this.mainHelper.validateGuid(j),this.mainHelper.validateString(b),this.mainHelper.validateNumber(k),this.mainHelper.validateString(c),this.mainHelper.validateString(d),this.mainHelper.validateString(l),this.mainHelper.validateString(m),this.mainHelper.log({src:66,evid:566,designId:e,editMode:f,esi:g,industryId:h,instanceId:i,mediaType:a,msid:j,name:b,revision:k,sectionAlias:c,sectionType:d,structureId:l,adiBuilderType:m})}catch(n){this.mainHelper.onError("BISafe: failed to report sectionDesign.uploadBackgroundClick",n.stack)}},a.prototype.openBackgroundImageSettings=function(a,b,c){try{var d=this.consumerBiLoggerHelpers.getDesignId(),e=this.consumerBiLoggerHelpers.getEditMode(),f=this.consumerBiLoggerHelpers.getEsi(),g=this.consumerBiLoggerHelpers.getIndustryId(),h=this.consumerBiLoggerHelpers.getInstanceId(),i=this.consumerBiLoggerHelpers.getMetaSiteId(),j=this.consumerBiLoggerHelpers.getStoryRevision(),k=this.consumerBiLoggerHelpers.getStructureId(),l=this.consumerBiLoggerHelpers.getAdiBuilderType();return this.mainHelper.validateString(d),this.mainHelper.validateString(e),this.mainHelper.validateGuid(f),this.mainHelper.validateString(g),this.mainHelper.validateString(h),this.mainHelper.validateGuid(i),this.mainHelper.validateString(a),this.mainHelper.validateNumber(j),this.mainHelper.validateString(b),this.mainHelper.validateString(c),this.mainHelper.validateString(k),this.mainHelper.validateString(l),this.mainHelper.log({src:66,evid:567,designId:d,editMode:e,esi:f,industryId:g,instanceId:h,msid:i,name:a,revision:j,sectionAlias:b,sectionType:c,structureId:k,adiBuilderType:l})}catch(m){this.mainHelper.onError("BISafe: failed to report sectionDesign.openBackgroundImageSettings",m.stack)}},a.prototype.changeBackgroundImagePositionClick=function(a,b,c,d){try{var e=this.consumerBiLoggerHelpers.getDesignId(),f=this.consumerBiLoggerHelpers.getEditMode(),g=this.consumerBiLoggerHelpers.getEsi(),h=this.consumerBiLoggerHelpers.getIndustryId(),i=this.consumerBiLoggerHelpers.getInstanceId(),j=this.consumerBiLoggerHelpers.getMetaSiteId(),k=this.consumerBiLoggerHelpers.getStoryRevision(),l=this.consumerBiLoggerHelpers.getStructureId(),m=this.consumerBiLoggerHelpers.getAdiBuilderType();return this.mainHelper.validateString(a),this.mainHelper.validateString(e),this.mainHelper.validateString(f),this.mainHelper.validateGuid(g),this.mainHelper.validateString(h),this.mainHelper.validateString(i),this.mainHelper.validateGuid(j),this.mainHelper.validateString(b),this.mainHelper.validateNumber(k),this.mainHelper.validateString(c),this.mainHelper.validateString(d),this.mainHelper.validateString(l),this.mainHelper.validateString(m),this.mainHelper.log({src:66,evid:568,value:a,designId:e,editMode:f,esi:g,industryId:h,instanceId:i,msid:j,name:b,revision:k,sectionAlias:c,sectionType:d,structureId:l,adiBuilderType:m})}catch(n){this.mainHelper.onError("BISafe: failed to report sectionDesign.changeBackgroundImagePositionClick",n.stack)}},a.prototype.changeBackgroundImagePositionSuccess=function(a,b,c,d){try{var e=this.consumerBiLoggerHelpers.getLoadTime(),f=this.consumerBiLoggerHelpers.getDesignId(),g=this.consumerBiLoggerHelpers.getEditMode(),h=this.consumerBiLoggerHelpers.getEsi(),i=this.consumerBiLoggerHelpers.getIndustryId(),j=this.consumerBiLoggerHelpers.getInstanceId(),k=this.consumerBiLoggerHelpers.getMetaSiteId(),l=this.consumerBiLoggerHelpers.getStoryRevision(),m=this.consumerBiLoggerHelpers.getStructureId(),n=this.consumerBiLoggerHelpers.getAdiBuilderType();return this.mainHelper.validateNumber(e),this.mainHelper.validateString(a),this.mainHelper.validateString(f),this.mainHelper.validateString(g),this.mainHelper.validateGuid(h),this.mainHelper.validateString(i),this.mainHelper.validateString(j),this.mainHelper.validateGuid(k),this.mainHelper.validateString(b),this.mainHelper.validateNumber(l),this.mainHelper.validateString(c),this.mainHelper.validateString(d),this.mainHelper.validateString(m),this.mainHelper.validateString(n),this.mainHelper.log({src:66,evid:569,loadTime:e,value:a,designId:f,editMode:g,esi:h,industryId:i,instanceId:j,msid:k,name:b,revision:l,sectionAlias:c,sectionType:d,structureId:m,adiBuilderType:n})}catch(o){this.mainHelper.onError("BISafe: failed to report sectionDesign.changeBackgroundImagePositionSuccess",o.stack)}},a.prototype.changeTextAlignmentClick=function(a,b,c,d){try{var e=this.consumerBiLoggerHelpers.getAdiBuilderType(),f=this.consumerBiLoggerHelpers.getDesignId(),g=this.consumerBiLoggerHelpers.getEditMode(),h=this.consumerBiLoggerHelpers.getEsi(),i=this.consumerBiLoggerHelpers.getIndustryId(),j=this.consumerBiLoggerHelpers.getInstanceId(),k=this.consumerBiLoggerHelpers.getMetaSiteId(),l=this.consumerBiLoggerHelpers.getStoryRevision(),m=this.consumerBiLoggerHelpers.getStructureId();return this.mainHelper.validateString(e),this.mainHelper.validateString(f),this.mainHelper.validateString(g),this.mainHelper.validateGuid(h),this.mainHelper.validateString(a),this.mainHelper.validateString(i),this.mainHelper.validateString(j),this.mainHelper.validateGuid(k),this.mainHelper.validateNumber(l),this.mainHelper.validateString(b),this.mainHelper.validateString(c),this.mainHelper.validateString(d),this.mainHelper.validateString(m),this.mainHelper.log({src:66,evid:570,adiBuilderType:e,designId:f,editMode:g,esi:h,textAlign:a,industryId:i,instanceId:j,msid:k,revision:l,sectionAlias:b,sectionType:c,setId:d,structureId:m})}catch(n){this.mainHelper.onError("BISafe: failed to report sectionDesign.changeTextAlignmentClick",n.stack)}},a.prototype.changeTextAlignmentSuccess=function(a,b,c,d){try{var e=this.consumerBiLoggerHelpers.getLoadTime(),f=this.consumerBiLoggerHelpers.getAdiBuilderType(),g=this.consumerBiLoggerHelpers.getDesignId(),h=this.consumerBiLoggerHelpers.getEditMode(),i=this.consumerBiLoggerHelpers.getEsi(),j=this.consumerBiLoggerHelpers.getIndustryId(),k=this.consumerBiLoggerHelpers.getInstanceId(),l=this.consumerBiLoggerHelpers.getMetaSiteId(),m=this.consumerBiLoggerHelpers.getStoryRevision(),n=this.consumerBiLoggerHelpers.getStructureId();return this.mainHelper.validateNumber(e),this.mainHelper.validateString(f),this.mainHelper.validateString(g),this.mainHelper.validateString(h),this.mainHelper.validateGuid(i),this.mainHelper.validateString(a),this.mainHelper.validateString(j),this.mainHelper.validateString(k),this.mainHelper.validateGuid(l),this.mainHelper.validateNumber(m),this.mainHelper.validateString(b),this.mainHelper.validateString(c),this.mainHelper.validateString(d),this.mainHelper.validateString(n),this.mainHelper.log({src:66,evid:571,loadTime:e,adiBuilderType:f,designId:g,editMode:h,esi:i,textAlign:a,industryId:j,instanceId:k,msid:l,revision:m,sectionAlias:b,sectionType:c,setId:d,structureId:n})}catch(o){this.mainHelper.onError("BISafe: failed to report sectionDesign.changeTextAlignmentSuccess",o.stack)}},a.prototype.changeHeaderTransparencyStart=function(a,b){try{var c=this.consumerBiLoggerHelpers.getPageId(),d=this.consumerBiLoggerHelpers.getAdiBuilderType(),e=this.consumerBiLoggerHelpers.getDesignId(),f=this.consumerBiLoggerHelpers.getEditMode(),g=this.consumerBiLoggerHelpers.getEsi(),h=this.consumerBiLoggerHelpers.getIndustryId(),i=this.consumerBiLoggerHelpers.getInstanceId(),j=this.consumerBiLoggerHelpers.getMetaSiteId(),k=this.consumerBiLoggerHelpers.getStoryRevision(),l=this.consumerBiLoggerHelpers.getStructureId();return this.mainHelper.validateString(c),this.mainHelper.validateString(a),this.mainHelper.validateString(b),this.mainHelper.validateString(d),this.mainHelper.validateString(e),this.mainHelper.validateString(f),this.mainHelper.validateGuid(g),this.mainHelper.validateString(h),this.mainHelper.validateString(i),this.mainHelper.validateGuid(j),this.mainHelper.validateNumber(k),this.mainHelper.validateString(l),this.mainHelper.log({src:66,evid:572,pageId:c,changeBy:a,value:b,adiBuilderType:d,designId:e,editMode:f,esi:g,industryId:h,instanceId:i,msid:j,revision:k,structureId:l})}catch(m){this.mainHelper.onError("BISafe: failed to report sectionDesign.changeHeaderTransparencyStart",m.stack)}},a.prototype.changeHeaderTransparencySuccess=function(a,b){try{var c=this.consumerBiLoggerHelpers.getPageId(),d=this.consumerBiLoggerHelpers.getLoadTime(),e=this.consumerBiLoggerHelpers.getAdiBuilderType(),f=this.consumerBiLoggerHelpers.getDesignId(),g=this.consumerBiLoggerHelpers.getEditMode(),h=this.consumerBiLoggerHelpers.getEsi(),i=this.consumerBiLoggerHelpers.getIndustryId(),j=this.consumerBiLoggerHelpers.getInstanceId(),k=this.consumerBiLoggerHelpers.getMetaSiteId(),l=this.consumerBiLoggerHelpers.getStoryRevision(),m=this.consumerBiLoggerHelpers.getStructureId();return this.mainHelper.validateString(c),this.mainHelper.validateNumber(d),this.mainHelper.validateString(a),this.mainHelper.validateString(b),this.mainHelper.validateString(e),this.mainHelper.validateString(f),this.mainHelper.validateString(g),this.mainHelper.validateGuid(h),this.mainHelper.validateString(i),this.mainHelper.validateString(j),this.mainHelper.validateGuid(k),this.mainHelper.validateNumber(l),this.mainHelper.validateString(m),this.mainHelper.log({src:66,evid:573,pageId:c,loadTime:d,changeBy:a,value:b,adiBuilderType:e,designId:f,editMode:g,esi:h,industryId:i,instanceId:j,msid:k,revision:l,structureId:m})}catch(n){this.mainHelper.onError("BISafe: failed to report sectionDesign.changeHeaderTransparencySuccess",n.stack)}},a}(),SectionManagementConsumerBiLogger=function(){function a(a,b,c){this.consumerBiLoggerHelpers=a,this.clientTopology=b,this.mainHelper=c}return a.prototype.replaceSectionPanelIsLoaded=function(a,b,c,d){try{var e=this.consumerBiLoggerHelpers.getInstanceId(),f=this.consumerBiLoggerHelpers.getMetaSiteId(),g=this.consumerBiLoggerHelpers.getStoryRevision(),h=this.consumerBiLoggerHelpers.getStructureId(),i=this.consumerBiLoggerHelpers.getIndustryId(),j=this.consumerBiLoggerHelpers.getEsi(),k=this.consumerBiLoggerHelpers.getEditMode(),l=this.consumerBiLoggerHelpers.getPageId();return this.mainHelper.validateString(e),this.mainHelper.validateGuid(f),this.mainHelper.validateNumber(g),this.mainHelper.validateString(h),this.mainHelper.validateString(i),this.mainHelper.validateGuid(j),this.mainHelper.validateString(k),this.mainHelper.validateString(a),this.mainHelper.validateString(b),this.mainHelper.validateString(c),this.mainHelper.validateString(l),this.mainHelper.validateString(d),this.mainHelper.log({src:66,evid:250,instanceId:e,msid:f,revision:g,structureId:h,industryId:i,esi:j,editMode:k,nodeId:a,sectionType:b,sectionAlias:c,pageId:l,source:d})}catch(m){this.mainHelper.onError("BISafe: failed to report sectionManagement.replaceSectionPanelIsLoaded",m.stack)}},a.prototype.changeASectionLayout=function(a,b,c,d,e,f,g,h){try{var i=this.consumerBiLoggerHelpers.getInstanceId(),j=this.consumerBiLoggerHelpers.getMetaSiteId(),k=this.consumerBiLoggerHelpers.getStoryRevision(),l=this.consumerBiLoggerHelpers.getStructureId(),m=this.consumerBiLoggerHelpers.getIndustryId(),n=this.consumerBiLoggerHelpers.getEsi(),o=this.consumerBiLoggerHelpers.getEditMode(),p=this.consumerBiLoggerHelpers.getPageId();return this.mainHelper.validateString(i),this.mainHelper.validateGuid(j),this.mainHelper.validateNumber(k),this.mainHelper.validateString(l),this.mainHelper.validateString(m),this.mainHelper.validateGuid(n),this.mainHelper.validateString(o),this.mainHelper.validateString(a),this.mainHelper.validateString(b),this.mainHelper.validateString(c),this.mainHelper.validateString(p),this.mainHelper.validateNumber(d),this.mainHelper.validateNumber(e),this.mainHelper.validateString(f),this.mainHelper.validateString(g),this.consumerBiLoggerHelpers.resetLoadTime(),this.mainHelper.log({src:66,evid:251,instanceId:i,msid:j,revision:k,structureId:l,industryId:m,esi:n,editMode:o,nodeId:a,sectionType:b,sectionAlias:c,pageId:p,noOfSuggestions:d,placeOfSelected:e,selectedLayout:f,appId:g,is_columns:h})}catch(q){this.mainHelper.onError("BISafe: failed to report sectionManagement.changeASectionLayout",q.stack)}},a.prototype.changeSectionLayoutSuccess=function(a,b,c,d,e,f,g,h,i){try{var j=this.consumerBiLoggerHelpers.getInstanceId(),k=this.consumerBiLoggerHelpers.getMetaSiteId(),l=this.consumerBiLoggerHelpers.getStoryRevision(),m=this.consumerBiLoggerHelpers.getStructureId(),n=this.consumerBiLoggerHelpers.getIndustryId(),o=this.consumerBiLoggerHelpers.getEsi(),p=this.consumerBiLoggerHelpers.getPageId(),q=this.consumerBiLoggerHelpers.getLoadTime();return this.mainHelper.validateString(j),this.mainHelper.validateGuid(k),this.mainHelper.validateNumber(l),this.mainHelper.validateString(m),this.mainHelper.validateString(n),this.mainHelper.validateGuid(o),this.mainHelper.validateString(a),this.mainHelper.validateString(b),this.mainHelper.validateString(c),this.mainHelper.validateString(d),this.mainHelper.validateString(p),this.mainHelper.validateNumber(e),this.mainHelper.validateNumber(f),this.mainHelper.validateString(g),this.mainHelper.validateString(h),this.mainHelper.validateNumber(q),this.mainHelper.log({src:66,evid:252,instanceId:j,msid:k,revision:l,structureId:m,industryId:n,esi:o,editMode:a,nodeId:b,sectionType:c,sectionAlias:d,pageId:p,noOfSuggestions:e,placeOfSelected:f,selectedLayout:g,appId:h,is_columns:i,loadTime:q})}catch(r){this.mainHelper.onError("BISafe: failed to report sectionManagement.changeSectionLayoutSuccess",r.stack)}},a.prototype.addSectionPanelIsLoaded=function(){try{var a=this.consumerBiLoggerHelpers.getInstanceId(),b=this.consumerBiLoggerHelpers.getMetaSiteId(),c=this.consumerBiLoggerHelpers.getStoryRevision(),d=this.consumerBiLoggerHelpers.getStructureId(),e=this.consumerBiLoggerHelpers.getIndustryId(),f=this.consumerBiLoggerHelpers.getEsi(),g=this.consumerBiLoggerHelpers.getEditMode(),h=this.consumerBiLoggerHelpers.getPageId();return this.mainHelper.validateString(a),this.mainHelper.validateGuid(b),this.mainHelper.validateNumber(c),this.mainHelper.validateString(d),this.mainHelper.validateString(e),
this.mainHelper.validateGuid(f),this.mainHelper.validateString(g),this.mainHelper.validateString(h),this.mainHelper.log({src:66,evid:253,instanceId:a,msid:b,revision:c,structureId:d,industryId:e,esi:f,editMode:g,pageId:h})}catch(i){this.mainHelper.onError("BISafe: failed to report sectionManagement.addSectionPanelIsLoaded",i.stack)}},a.prototype.switchSectionTypeInTheAddSectionPanel=function(a,b,c){try{var d=this.consumerBiLoggerHelpers.getInstanceId(),e=this.consumerBiLoggerHelpers.getMetaSiteId(),f=this.consumerBiLoggerHelpers.getStoryRevision(),g=this.consumerBiLoggerHelpers.getStructureId(),h=this.consumerBiLoggerHelpers.getIndustryId(),i=this.consumerBiLoggerHelpers.getEsi(),j=this.consumerBiLoggerHelpers.getEditMode(),k=this.consumerBiLoggerHelpers.getPageId();return this.mainHelper.validateString(d),this.mainHelper.validateGuid(e),this.mainHelper.validateNumber(f),this.mainHelper.validateString(g),this.mainHelper.validateString(h),this.mainHelper.validateGuid(i),this.mainHelper.validateString(j),this.mainHelper.validateString(a),this.mainHelper.validateString(b),this.mainHelper.validateString(k),this.mainHelper.validateString(c),this.mainHelper.log({src:66,evid:254,instanceId:d,msid:e,revision:f,structureId:g,industryId:h,esi:i,editMode:j,sectionType:a,sectionAlias:b,pageId:k,place:c})}catch(l){this.mainHelper.onError("BISafe: failed to report sectionManagement.switchSectionTypeInTheAddSectionPanel",l.stack)}},a.prototype.addSectionToPage=function(a,b,c,d,e,f,g,h,i,j,k){try{var l=this.consumerBiLoggerHelpers.getInstanceId(),m=this.consumerBiLoggerHelpers.getMetaSiteId(),n=this.consumerBiLoggerHelpers.getStoryRevision(),o=this.consumerBiLoggerHelpers.getStructureId(),p=this.consumerBiLoggerHelpers.getIndustryId(),q=this.consumerBiLoggerHelpers.getEsi(),r=this.consumerBiLoggerHelpers.getEditMode(),s=this.consumerBiLoggerHelpers.getPageId();return this.mainHelper.validateString(l),this.mainHelper.validateGuid(m),this.mainHelper.validateNumber(n),this.mainHelper.validateString(o),this.mainHelper.validateString(p),this.mainHelper.validateGuid(q),this.mainHelper.validateString(r),this.mainHelper.validateString(a),this.mainHelper.validateString(b),this.mainHelper.validateString(s),this.mainHelper.validateNumber(c),this.mainHelper.validateString(d),this.mainHelper.validateNumber(e),this.mainHelper.validateNumber(f),this.mainHelper.validateString(g),this.mainHelper.validateString(h),this.mainHelper.validateString(i),this.consumerBiLoggerHelpers.resetLoadTime(),this.mainHelper.log({src:66,evid:255,instanceId:l,msid:m,revision:n,structureId:o,industryId:p,esi:q,editMode:r,sectionType:a,sectionAlias:b,pageId:s,position:c,place:d,noOfSuggestions:e,placeOfSelected:f,selectedLayout:g,addType:h,appId:i,is_columns:j,isLinked:k})}catch(t){this.mainHelper.onError("BISafe: failed to report sectionManagement.addSectionToPage",t.stack)}},a.prototype.addSectionToPageSuccess=function(a,b,c,d,e,f,g,h,i,j,k,l,m){try{var n=this.consumerBiLoggerHelpers.getInstanceId(),o=this.consumerBiLoggerHelpers.getMetaSiteId(),p=this.consumerBiLoggerHelpers.getStoryRevision(),q=this.consumerBiLoggerHelpers.getStructureId(),r=this.consumerBiLoggerHelpers.getIndustryId(),s=this.consumerBiLoggerHelpers.getEsi(),t=this.consumerBiLoggerHelpers.getPageId(),u=this.consumerBiLoggerHelpers.getLoadTime();return this.mainHelper.validateString(n),this.mainHelper.validateGuid(o),this.mainHelper.validateNumber(p),this.mainHelper.validateString(q),this.mainHelper.validateString(r),this.mainHelper.validateGuid(s),this.mainHelper.validateString(a),this.mainHelper.validateString(b),this.mainHelper.validateNumber(c),this.mainHelper.validateString(d),this.mainHelper.validateString(e),this.mainHelper.validateString(t),this.mainHelper.validateString(f),this.mainHelper.validateNumber(g),this.mainHelper.validateNumber(h),this.mainHelper.validateString(i),this.mainHelper.validateString(j),this.mainHelper.validateString(k),this.mainHelper.validateNumber(u),this.mainHelper.log({src:66,evid:256,instanceId:n,msid:o,revision:p,structureId:q,industryId:r,esi:s,editMode:a,nodeId:b,position:c,sectionType:d,sectionAlias:e,pageId:t,place:f,noOfSuggestions:g,placeOfSelected:h,selectedLayout:i,addType:j,appId:k,is_columns:l,loadTime:u,isLinked:m})}catch(v){this.mainHelper.onError("BISafe: failed to report sectionManagement.addSectionToPageSuccess",v.stack)}},a.prototype.sectionMenuDeleteSectionClick=function(a,b,c,d,e,f){try{var g=this.consumerBiLoggerHelpers.getInstanceId(),h=this.consumerBiLoggerHelpers.getMetaSiteId(),i=this.consumerBiLoggerHelpers.getStoryRevision(),j=this.consumerBiLoggerHelpers.getStructureId(),k=this.consumerBiLoggerHelpers.getIndustryId(),l=this.consumerBiLoggerHelpers.getEsi(),m=this.consumerBiLoggerHelpers.getEditMode(),n=this.consumerBiLoggerHelpers.getPageId();return this.mainHelper.validateString(g),this.mainHelper.validateGuid(h),this.mainHelper.validateNumber(i),this.mainHelper.validateString(j),this.mainHelper.validateString(k),this.mainHelper.validateGuid(l),this.mainHelper.validateString(m),this.mainHelper.validateString(a),this.mainHelper.validateString(b),this.mainHelper.validateString(c),this.mainHelper.validateString(n),this.mainHelper.validateString(d),this.mainHelper.validateString(e),this.consumerBiLoggerHelpers.resetLoadTime(),this.mainHelper.log({src:66,evid:257,instanceId:g,msid:h,revision:i,structureId:j,industryId:k,esi:l,editMode:m,nodeId:a,sectionType:b,sectionAlias:c,pageId:n,appId:d,origin:e,isLinked:f})}catch(o){this.mainHelper.onError("BISafe: failed to report sectionManagement.sectionMenuDeleteSectionClick",o.stack)}},a.prototype.deleteSectionSuccess=function(a,b,c,d,e,f){try{var g=this.consumerBiLoggerHelpers.getInstanceId(),h=this.consumerBiLoggerHelpers.getMetaSiteId(),i=this.consumerBiLoggerHelpers.getStoryRevision(),j=this.consumerBiLoggerHelpers.getStructureId(),k=this.consumerBiLoggerHelpers.getIndustryId(),l=this.consumerBiLoggerHelpers.getEsi(),m=this.consumerBiLoggerHelpers.getEditMode(),n=this.consumerBiLoggerHelpers.getPageId(),o=this.consumerBiLoggerHelpers.getLoadTime();return this.mainHelper.validateString(g),this.mainHelper.validateGuid(h),this.mainHelper.validateNumber(i),this.mainHelper.validateString(j),this.mainHelper.validateString(k),this.mainHelper.validateGuid(l),this.mainHelper.validateString(m),this.mainHelper.validateString(a),this.mainHelper.validateString(b),this.mainHelper.validateString(c),this.mainHelper.validateString(n),this.mainHelper.validateString(d),this.mainHelper.validateNumber(o),this.mainHelper.validateString(e),this.mainHelper.log({src:66,evid:258,instanceId:g,msid:h,revision:i,structureId:j,industryId:k,esi:l,editMode:m,nodeId:a,sectionType:b,sectionAlias:c,pageId:n,appId:d,loadTime:o,origin:e,isLinked:f})}catch(p){this.mainHelper.onError("BISafe: failed to report sectionManagement.deleteSectionSuccess",p.stack)}},a.prototype.moveSectionWithinThePageStartDragging=function(a,b,c,d,e){try{var f=this.consumerBiLoggerHelpers.getInstanceId(),g=this.consumerBiLoggerHelpers.getMetaSiteId(),h=this.consumerBiLoggerHelpers.getStoryRevision(),i=this.consumerBiLoggerHelpers.getStructureId(),j=this.consumerBiLoggerHelpers.getIndustryId(),k=this.consumerBiLoggerHelpers.getEsi(),l=this.consumerBiLoggerHelpers.getEditMode(),m=this.consumerBiLoggerHelpers.getPageId();return this.mainHelper.validateString(f),this.mainHelper.validateGuid(g),this.mainHelper.validateNumber(h),this.mainHelper.validateString(i),this.mainHelper.validateString(j),this.mainHelper.validateGuid(k),this.mainHelper.validateString(l),this.mainHelper.validateString(a),this.mainHelper.validateString(b),this.mainHelper.validateString(c),this.mainHelper.validateString(m),this.mainHelper.validateNumber(d),this.mainHelper.validateString(e),this.mainHelper.log({src:66,evid:259,instanceId:f,msid:g,revision:h,structureId:i,industryId:j,esi:k,editMode:l,nodeId:a,sectionType:b,sectionAlias:c,pageId:m,originPosition:d,appId:e})}catch(n){this.mainHelper.onError("BISafe: failed to report sectionManagement.moveSectionWithinThePageStartDragging",n.stack)}},a.prototype.moveSectionWithinThePageClick=function(a,b,c,d,e,f,g){try{var h=this.consumerBiLoggerHelpers.getInstanceId(),i=this.consumerBiLoggerHelpers.getMetaSiteId(),j=this.consumerBiLoggerHelpers.getStoryRevision(),k=this.consumerBiLoggerHelpers.getStructureId(),l=this.consumerBiLoggerHelpers.getIndustryId(),m=this.consumerBiLoggerHelpers.getEsi(),n=this.consumerBiLoggerHelpers.getEditMode(),o=this.consumerBiLoggerHelpers.getPageId();return this.mainHelper.validateString(h),this.mainHelper.validateGuid(i),this.mainHelper.validateNumber(j),this.mainHelper.validateString(k),this.mainHelper.validateString(l),this.mainHelper.validateGuid(m),this.mainHelper.validateString(n),this.mainHelper.validateString(a),this.mainHelper.validateString(b),this.mainHelper.validateString(c),this.mainHelper.validateString(o),this.mainHelper.validateNumber(d),this.mainHelper.validateNumber(e),this.mainHelper.validateString(f),this.mainHelper.validateString(g),this.consumerBiLoggerHelpers.resetLoadTime(),this.mainHelper.log({src:66,evid:260,instanceId:h,msid:i,revision:j,structureId:k,industryId:l,esi:m,editMode:n,nodeId:a,sectionType:b,sectionAlias:c,pageId:o,position:d,originPosition:e,direction:f,appId:g})}catch(p){this.mainHelper.onError("BISafe: failed to report sectionManagement.moveSectionWithinThePageClick",p.stack)}},a.prototype.sectionMovedWithinThePageSuccess=function(a,b,c,d,e,f,g){try{var h=this.consumerBiLoggerHelpers.getInstanceId(),i=this.consumerBiLoggerHelpers.getMetaSiteId(),j=this.consumerBiLoggerHelpers.getStoryRevision(),k=this.consumerBiLoggerHelpers.getStructureId(),l=this.consumerBiLoggerHelpers.getIndustryId(),m=this.consumerBiLoggerHelpers.getEsi(),n=this.consumerBiLoggerHelpers.getEditMode(),o=this.consumerBiLoggerHelpers.getPageId(),p=this.consumerBiLoggerHelpers.getLoadTime();return this.mainHelper.validateString(h),this.mainHelper.validateGuid(i),this.mainHelper.validateNumber(j),this.mainHelper.validateString(k),this.mainHelper.validateString(l),this.mainHelper.validateGuid(m),this.mainHelper.validateString(n),this.mainHelper.validateString(a),this.mainHelper.validateString(b),this.mainHelper.validateString(c),this.mainHelper.validateString(o),this.mainHelper.validateNumber(d),this.mainHelper.validateNumber(e),this.mainHelper.validateString(f),this.mainHelper.validateString(g),this.mainHelper.validateNumber(p),this.mainHelper.log({src:66,evid:261,instanceId:h,msid:i,revision:j,structureId:k,industryId:l,esi:m,editMode:n,nodeId:a,sectionType:b,sectionAlias:c,pageId:o,position:d,originPosition:e,direction:f,appId:g,loadTime:p})}catch(q){this.mainHelper.onError("BISafe: failed to report sectionManagement.sectionMovedWithinThePageSuccess",q.stack)}},a.prototype.sectionMenuMoveSectionToAnotherPageClick=function(a,b,c,d){try{var e=this.consumerBiLoggerHelpers.getInstanceId(),f=this.consumerBiLoggerHelpers.getMetaSiteId(),g=this.consumerBiLoggerHelpers.getStoryRevision(),h=this.consumerBiLoggerHelpers.getStructureId(),i=this.consumerBiLoggerHelpers.getIndustryId(),j=this.consumerBiLoggerHelpers.getEsi(),k=this.consumerBiLoggerHelpers.getEditMode(),l=this.consumerBiLoggerHelpers.getPageId();return this.mainHelper.validateString(e),this.mainHelper.validateGuid(f),this.mainHelper.validateNumber(g),this.mainHelper.validateString(h),this.mainHelper.validateString(i),this.mainHelper.validateGuid(j),this.mainHelper.validateString(k),this.mainHelper.validateString(a),this.mainHelper.validateString(b),this.mainHelper.validateString(c),this.mainHelper.validateString(l),this.mainHelper.validateString(d),this.consumerBiLoggerHelpers.resetLoadTime(),this.mainHelper.log({src:66,evid:262,instanceId:e,msid:f,revision:g,structureId:h,industryId:i,esi:j,editMode:k,nodeId:a,sectionType:b,sectionAlias:c,pageId:l,appId:d})}catch(m){this.mainHelper.onError("BISafe: failed to report sectionManagement.sectionMenuMoveSectionToAnotherPageClick",m.stack)}},a.prototype.sectionMovedToANewPageSuccess=function(a,b,c,d,e,f,g){try{var h=this.consumerBiLoggerHelpers.getInstanceId(),i=this.consumerBiLoggerHelpers.getMetaSiteId(),j=this.consumerBiLoggerHelpers.getStoryRevision(),k=this.consumerBiLoggerHelpers.getStructureId(),l=this.consumerBiLoggerHelpers.getIndustryId(),m=this.consumerBiLoggerHelpers.getEsi(),n=this.consumerBiLoggerHelpers.getEditMode(),o=this.consumerBiLoggerHelpers.getPageId(),p=this.consumerBiLoggerHelpers.getLoadTime();return this.mainHelper.validateString(h),this.mainHelper.validateGuid(i),this.mainHelper.validateNumber(j),this.mainHelper.validateString(k),this.mainHelper.validateString(l),this.mainHelper.validateGuid(m),this.mainHelper.validateString(n),this.mainHelper.validateString(a),this.mainHelper.validateString(b),this.mainHelper.validateString(c),this.mainHelper.validateString(o),this.mainHelper.validateString(d),this.mainHelper.validateNumber(e),this.mainHelper.validateNumber(f),this.mainHelper.validateString(g),this.mainHelper.validateNumber(p),this.mainHelper.log({src:66,evid:263,instanceId:h,msid:i,revision:j,structureId:k,industryId:l,esi:m,editMode:n,nodeId:a,sectionType:b,sectionAlias:c,pageId:o,originPageId:d,position:e,originPosition:f,appId:g,loadTime:p})}catch(q){this.mainHelper.onError("BISafe: failed to report sectionManagement.sectionMovedToANewPageSuccess",q.stack)}},a.prototype.sectionMenuDuplicateSectionClick=function(a,b,c){try{var d=this.consumerBiLoggerHelpers.getInstanceId(),e=this.consumerBiLoggerHelpers.getMetaSiteId(),f=this.consumerBiLoggerHelpers.getStoryRevision(),g=this.consumerBiLoggerHelpers.getStructureId(),h=this.consumerBiLoggerHelpers.getIndustryId(),i=this.consumerBiLoggerHelpers.getEsi(),j=this.consumerBiLoggerHelpers.getEditMode(),k=this.consumerBiLoggerHelpers.getPageId();return this.mainHelper.validateString(d),this.mainHelper.validateGuid(e),this.mainHelper.validateNumber(f),this.mainHelper.validateString(g),this.mainHelper.validateString(h),this.mainHelper.validateGuid(i),this.mainHelper.validateString(j),this.mainHelper.validateString(a),this.mainHelper.validateString(b),this.mainHelper.validateString(k),this.mainHelper.validateString(c),this.consumerBiLoggerHelpers.resetLoadTime(),this.mainHelper.log({src:66,evid:264,instanceId:d,msid:e,revision:f,structureId:g,industryId:h,esi:i,editMode:j,sectionType:a,sectionAlias:b,pageId:k,appId:c})}catch(l){this.mainHelper.onError("BISafe: failed to report sectionManagement.sectionMenuDuplicateSectionClick",l.stack)}},a.prototype.sectionDuplicateSuccess=function(a,b,c,d){try{var e=this.consumerBiLoggerHelpers.getInstanceId(),f=this.consumerBiLoggerHelpers.getMetaSiteId(),g=this.consumerBiLoggerHelpers.getStoryRevision(),h=this.consumerBiLoggerHelpers.getStructureId(),i=this.consumerBiLoggerHelpers.getIndustryId(),j=this.consumerBiLoggerHelpers.getEsi(),k=this.consumerBiLoggerHelpers.getEditMode(),l=this.consumerBiLoggerHelpers.getPageId(),m=this.consumerBiLoggerHelpers.getLoadTime();return this.mainHelper.validateString(e),this.mainHelper.validateGuid(f),this.mainHelper.validateNumber(g),this.mainHelper.validateString(h),this.mainHelper.validateString(i),this.mainHelper.validateGuid(j),this.mainHelper.validateString(k),this.mainHelper.validateString(a),this.mainHelper.validateString(b),this.mainHelper.validateString(c),this.mainHelper.validateString(l),this.mainHelper.validateString(d),this.mainHelper.validateNumber(m),this.mainHelper.log({src:66,evid:265,instanceId:e,msid:f,revision:g,structureId:h,industryId:i,esi:j,editMode:k,nodeId:a,sectionType:b,sectionAlias:c,pageId:l,appId:d,loadTime:m})}catch(n){this.mainHelper.onError("BISafe: failed to report sectionManagement.sectionDuplicateSuccess",n.stack)}},a.prototype.showMoreSectionPageLayoutsOnScroll=function(a,b,c,d){try{var e=this.consumerBiLoggerHelpers.getInstanceId(),f=this.consumerBiLoggerHelpers.getMetaSiteId(),g=this.consumerBiLoggerHelpers.getStoryRevision(),h=this.consumerBiLoggerHelpers.getStructureId(),i=this.consumerBiLoggerHelpers.getIndustryId(),j=this.consumerBiLoggerHelpers.getEsi(),k=this.consumerBiLoggerHelpers.getEditMode(),l=this.consumerBiLoggerHelpers.getPageId();return this.mainHelper.validateString(e),this.mainHelper.validateGuid(f),this.mainHelper.validateNumber(g),this.mainHelper.validateString(h),this.mainHelper.validateString(i),this.mainHelper.validateGuid(j),this.mainHelper.validateString(k),this.mainHelper.validateString(a),this.mainHelper.validateString(b),this.mainHelper.validateString(c),this.mainHelper.validateString(l),this.mainHelper.validateString(d),this.mainHelper.log({src:66,evid:266,instanceId:e,msid:f,revision:g,structureId:h,industryId:i,esi:j,editMode:k,nodeId:a,sectionType:b,sectionAlias:c,pageId:l,context:d})}catch(m){this.mainHelper.onError("BISafe: failed to report sectionManagement.showMoreSectionPageLayoutsOnScroll",m.stack)}},a.prototype.sectionPanelClosed=function(a,b,c){try{var d=this.consumerBiLoggerHelpers.getInstanceId(),e=this.consumerBiLoggerHelpers.getMetaSiteId(),f=this.consumerBiLoggerHelpers.getStoryRevision(),g=this.consumerBiLoggerHelpers.getStructureId(),h=this.consumerBiLoggerHelpers.getIndustryId(),i=this.consumerBiLoggerHelpers.getEsi(),j=this.consumerBiLoggerHelpers.getEditMode(),k=this.consumerBiLoggerHelpers.getPageId();return this.mainHelper.validateString(d),this.mainHelper.validateGuid(e),this.mainHelper.validateNumber(f),this.mainHelper.validateString(g),this.mainHelper.validateString(h),this.mainHelper.validateGuid(i),this.mainHelper.validateString(j),this.mainHelper.validateString(a),this.mainHelper.validateString(b),this.mainHelper.validateString(c),this.mainHelper.validateString(k),this.mainHelper.log({src:66,evid:267,instanceId:d,msid:e,revision:f,structureId:g,industryId:h,esi:i,editMode:j,nodeId:a,sectionType:b,sectionAlias:c,pageId:k})}catch(l){this.mainHelper.onError("BISafe: failed to report sectionManagement.sectionPanelClosed",l.stack)}},a.prototype.addSectionClick=function(a){try{var b=this.consumerBiLoggerHelpers.getInstanceId(),c=this.consumerBiLoggerHelpers.getMetaSiteId(),d=this.consumerBiLoggerHelpers.getStoryRevision(),e=this.consumerBiLoggerHelpers.getStructureId(),f=this.consumerBiLoggerHelpers.getIndustryId(),g=this.consumerBiLoggerHelpers.getEsi(),h=this.consumerBiLoggerHelpers.getEditMode();return this.mainHelper.validateString(b),this.mainHelper.validateGuid(c),this.mainHelper.validateNumber(d),this.mainHelper.validateString(e),this.mainHelper.validateString(f),this.mainHelper.validateGuid(g),this.mainHelper.validateString(h),this.mainHelper.validateString(a),this.mainHelper.log({src:66,evid:268,instanceId:b,msid:c,revision:d,structureId:e,industryId:f,esi:g,editMode:h,source:a})}catch(i){this.mainHelper.onError("BISafe: failed to report sectionManagement.addSectionClick",i.stack)}},a.prototype.addSectionToPageStartDragging=function(a,b,c,d,e,f,g,h){try{var i=this.consumerBiLoggerHelpers.getInstanceId(),j=this.consumerBiLoggerHelpers.getMetaSiteId(),k=this.consumerBiLoggerHelpers.getStoryRevision(),l=this.consumerBiLoggerHelpers.getStructureId(),m=this.consumerBiLoggerHelpers.getIndustryId(),n=this.consumerBiLoggerHelpers.getEsi(),o=this.consumerBiLoggerHelpers.getEditMode(),p=this.consumerBiLoggerHelpers.getPageId();return this.mainHelper.validateString(i),this.mainHelper.validateGuid(j),this.mainHelper.validateNumber(k),this.mainHelper.validateString(l),this.mainHelper.validateString(m),this.mainHelper.validateGuid(n),this.mainHelper.validateString(o),this.mainHelper.validateString(a),this.mainHelper.validateString(b),this.mainHelper.validateString(p),this.mainHelper.validateString(c),this.mainHelper.validateNumber(d),this.mainHelper.validateNumber(e),this.mainHelper.validateString(f),this.mainHelper.validateString(g),this.mainHelper.validateString(h),this.mainHelper.log({src:66,evid:269,instanceId:i,msid:j,revision:k,structureId:l,industryId:m,esi:n,editMode:o,sectionType:a,sectionAlias:b,pageId:p,place:c,noOfSuggestions:d,placeOfSelected:e,selectedLayout:f,addType:g,appId:h})}catch(q){this.mainHelper.onError("BISafe: failed to report sectionManagement.addSectionToPageStartDragging",q.stack)}},a.prototype.clickOnMoreActionsMenu=function(a,b){try{var c=this.consumerBiLoggerHelpers.getEditMode(),d=this.consumerBiLoggerHelpers.getEsi(),e=this.consumerBiLoggerHelpers.getIndustryId(),f=this.consumerBiLoggerHelpers.getInstanceId(),g=this.consumerBiLoggerHelpers.getMetaSiteId(),h=this.consumerBiLoggerHelpers.getStoryRevision(),i=this.consumerBiLoggerHelpers.getStructureId();return this.mainHelper.validateString(c),this.mainHelper.validateGuid(d),this.mainHelper.validateString(e),this.mainHelper.validateString(f),this.mainHelper.validateGuid(g),this.mainHelper.validateNumber(h),this.mainHelper.validateString(a),this.mainHelper.validateString(b),this.mainHelper.validateString(i),this.mainHelper.log({src:66,evid:270,editMode:c,esi:d,industryId:e,instanceId:f,msid:g,revision:h,sectionAlias:a,sectionType:b,structureId:i})}catch(j){this.mainHelper.onError("BISafe: failed to report sectionManagement.clickOnMoreActionsMenu",j.stack)}},a.prototype.planToAddTpaInWelcomeTour=function(a,b,c){try{var d=this.consumerBiLoggerHelpers.getEsi(),e=this.consumerBiLoggerHelpers.getIndustryId(),f=this.consumerBiLoggerHelpers.getInstanceId(),g=this.consumerBiLoggerHelpers.getMetaSiteId();return this.mainHelper.validateString(a),this.mainHelper.validateString(b),this.mainHelper.validateString(c),this.mainHelper.validateGuid(d),this.mainHelper.validateString(e),this.mainHelper.validateString(f),this.mainHelper.validateGuid(g),this.mainHelper.log({src:66,evid:271,source:a,appId:b,appName:c,esi:d,industryId:e,instanceId:f,msid:g})}catch(h){this.mainHelper.onError("BISafe: failed to report sectionManagement.planToAddTpaInWelcomeTour",h.stack)}},a.prototype.fetchImagesInAddSectionPanel=function(a,b,c,d){try{var e=this.consumerBiLoggerHelpers.getEditMode(),f=this.consumerBiLoggerHelpers.getEsi(),g=this.consumerBiLoggerHelpers.getIndustryId(),h=this.consumerBiLoggerHelpers.getInstanceId(),i=this.consumerBiLoggerHelpers.getMetaSiteId(),j=this.consumerBiLoggerHelpers.getPageId(),k=this.consumerBiLoggerHelpers.getStoryRevision(),l=this.consumerBiLoggerHelpers.getStructureId();return this.mainHelper.validateNumber(a),this.mainHelper.validateString(e),this.mainHelper.validateGuid(f),this.mainHelper.validateString(g),this.mainHelper.validateString(h),this.mainHelper.validateGuid(i),this.mainHelper.validateString(j),this.mainHelper.validateString(b),this.mainHelper.validateNumber(k),this.mainHelper.validateString(c),this.mainHelper.validateString(d),this.mainHelper.validateString(l),this.mainHelper.log({src:66,evid:272,numOfImages:a,editMode:e,esi:f,industryId:g,instanceId:h,msid:i,pageId:j,place:b,revision:k,sectionAlias:c,sectionType:d,structureId:l})}catch(m){this.mainHelper.onError("BISafe: failed to report sectionManagement.fetchImagesInAddSectionPanel",m.stack)}},a}(),SiteDesignConsumerBiLogger=function(){function a(a,b,c){this.consumerBiLoggerHelpers=a,this.clientTopology=b,this.mainHelper=c}return a.prototype.designPanelIsLoaded=function(a){try{var b=this.consumerBiLoggerHelpers.getInstanceId(),c=this.consumerBiLoggerHelpers.getMetaSiteId(),d=this.consumerBiLoggerHelpers.getStoryRevision(),e=this.consumerBiLoggerHelpers.getStructureId(),f=this.consumerBiLoggerHelpers.getIndustryId(),g=this.consumerBiLoggerHelpers.getEsi(),h=this.consumerBiLoggerHelpers.getEditMode(),i=this.consumerBiLoggerHelpers.getAdiBuilderType();return this.mainHelper.validateString(b),this.mainHelper.validateGuid(c),this.mainHelper.validateNumber(d),this.mainHelper.validateString(e),this.mainHelper.validateString(f),this.mainHelper.validateGuid(g),this.mainHelper.validateString(h),this.mainHelper.validateString(a),this.mainHelper.validateString(i),this.mainHelper.log({src:66,evid:300,instanceId:b,msid:c,revision:d,structureId:e,industryId:f,esi:g,editMode:h,origin:a,adiBuilderType:i})}catch(j){this.mainHelper.onError("BISafe: failed to report siteDesign.designPanelIsLoaded",j.stack)}},a.prototype.clickOnDesiredDesign=function(a,b,c,d){try{var e=this.consumerBiLoggerHelpers.getInstanceId(),f=this.consumerBiLoggerHelpers.getMetaSiteId(),g=this.consumerBiLoggerHelpers.getStoryRevision(),h=this.consumerBiLoggerHelpers.getStructureId(),i=this.consumerBiLoggerHelpers.getIndustryId(),j=this.consumerBiLoggerHelpers.getEsi(),k=this.consumerBiLoggerHelpers.getEditMode(),l=this.consumerBiLoggerHelpers.getNoOfDesigns(),m=this.consumerBiLoggerHelpers.getAdiBuilderType();return this.mainHelper.validateString(e),this.mainHelper.validateGuid(f),this.mainHelper.validateNumber(g),this.mainHelper.validateString(h),this.mainHelper.validateString(i),this.mainHelper.validateGuid(j),this.mainHelper.validateString(k),this.mainHelper.validateString(a),this.mainHelper.validateNumber(b),this.mainHelper.validateNumber(l),this.mainHelper.validateString(c),this.mainHelper.validateString(d),this.mainHelper.validateString(m),this.consumerBiLoggerHelpers.resetLoadTime(),this.mainHelper.log({src:66,evid:301,instanceId:e,msid:f,revision:g,structureId:h,industryId:i,esi:j,editMode:k,prevDesignId:a,designNumber:b,noOfDesigns:l,origin:c,targetDesignId:d,adiBuilderType:m})}catch(n){this.mainHelper.onError("BISafe: failed to report siteDesign.clickOnDesiredDesign",n.stack)}},a.prototype.designChangeSuccess=function(a,b,c,d){try{var e=this.consumerBiLoggerHelpers.getInstanceId(),f=this.consumerBiLoggerHelpers.getMetaSiteId(),g=this.consumerBiLoggerHelpers.getStoryRevision(),h=this.consumerBiLoggerHelpers.getStructureId(),i=this.consumerBiLoggerHelpers.getIndustryId(),j=this.consumerBiLoggerHelpers.getEsi(),k=this.consumerBiLoggerHelpers.getEditMode(),l=this.consumerBiLoggerHelpers.getNoOfDesigns(),m=this.consumerBiLoggerHelpers.getLoadTime(),n=this.consumerBiLoggerHelpers.getAdiBuilderType();return this.mainHelper.validateString(e),this.mainHelper.validateGuid(f),this.mainHelper.validateNumber(g),this.mainHelper.validateString(h),this.mainHelper.validateString(i),this.mainHelper.validateGuid(j),this.mainHelper.validateString(k),this.mainHelper.validateString(a),this.mainHelper.validateNumber(b),this.mainHelper.validateNumber(l),this.mainHelper.validateString(c),this.mainHelper.validateString(d),this.mainHelper.validateNumber(m),this.mainHelper.validateString(n),this.mainHelper.log({src:66,evid:302,instanceId:e,msid:f,revision:g,structureId:h,industryId:i,esi:j,editMode:k,prevDesignId:a,designNumber:b,noOfDesigns:l,origin:c,targetDesignId:d,loadTime:m,adiBuilderType:n})}catch(o){this.mainHelper.onError("BISafe: failed to report siteDesign.designChangeSuccess",o.stack)}},a.prototype.customizeDesignPanelIsLoaded=function(){try{var a=this.consumerBiLoggerHelpers.getInstanceId(),b=this.consumerBiLoggerHelpers.getMetaSiteId(),c=this.consumerBiLoggerHelpers.getStoryRevision(),d=this.consumerBiLoggerHelpers.getStructureId(),e=this.consumerBiLoggerHelpers.getIndustryId(),f=this.consumerBiLoggerHelpers.getEsi(),g=this.consumerBiLoggerHelpers.getEditMode(),h=this.consumerBiLoggerHelpers.getDesignId(),i=this.consumerBiLoggerHelpers.getAdiBuilderType();return this.mainHelper.validateString(a),this.mainHelper.validateGuid(b),this.mainHelper.validateNumber(c),this.mainHelper.validateString(d),this.mainHelper.validateString(e),this.mainHelper.validateGuid(f),this.mainHelper.validateString(g),this.mainHelper.validateString(h),this.mainHelper.validateString(i),this.mainHelper.log({src:66,evid:303,instanceId:a,msid:b,revision:c,structureId:d,industryId:e,esi:f,editMode:g,designId:h,adiBuilderType:i})}catch(j){this.mainHelper.onError("BISafe: failed to report siteDesign.customizeDesignPanelIsLoaded",j.stack)}},a.prototype.customizeDesignSubPanelIsLoaded=function(a,b){try{var c=this.consumerBiLoggerHelpers.getInstanceId(),d=this.consumerBiLoggerHelpers.getMetaSiteId(),e=this.consumerBiLoggerHelpers.getStoryRevision(),f=this.consumerBiLoggerHelpers.getStructureId(),g=this.consumerBiLoggerHelpers.getIndustryId(),h=this.consumerBiLoggerHelpers.getEsi(),i=this.consumerBiLoggerHelpers.getEditMode(),j=this.consumerBiLoggerHelpers.getDesignId(),k=this.consumerBiLoggerHelpers.getAdiBuilderType();return this.mainHelper.validateString(c),this.mainHelper.validateGuid(d),this.mainHelper.validateNumber(e),this.mainHelper.validateString(f),this.mainHelper.validateString(g),this.mainHelper.validateGuid(h),this.mainHelper.validateString(i),this.mainHelper.validateString(j),this.mainHelper.validateString(a),this.mainHelper.validateString(b),this.mainHelper.validateString(k),this.mainHelper.log({src:66,evid:304,instanceId:c,msid:d,revision:e,structureId:f,industryId:g,esi:h,editMode:i,designId:j,name:a,origin:b,adiBuilderType:k})}catch(l){this.mainHelper.onError("BISafe: failed to report siteDesign.customizeDesignSubPanelIsLoaded",l.stack)}},a.prototype.clickOnDesiredColorFontSet=function(a,b,c,d){try{var e=this.consumerBiLoggerHelpers.getInstanceId(),f=this.consumerBiLoggerHelpers.getMetaSiteId(),g=this.consumerBiLoggerHelpers.getStoryRevision(),h=this.consumerBiLoggerHelpers.getStructureId(),i=this.consumerBiLoggerHelpers.getIndustryId(),j=this.consumerBiLoggerHelpers.getEsi(),k=this.consumerBiLoggerHelpers.getEditMode(),l=this.consumerBiLoggerHelpers.getDesignId(),m=this.consumerBiLoggerHelpers.getAdiBuilderType();return this.mainHelper.validateString(e),this.mainHelper.validateGuid(f),this.mainHelper.validateNumber(g),this.mainHelper.validateString(h),this.mainHelper.validateString(i),this.mainHelper.validateGuid(j),this.mainHelper.validateString(k),this.mainHelper.validateString(l),this.mainHelper.validateString(a),this.mainHelper.validateString(b),this.mainHelper.validateNumber(c),this.mainHelper.validateNumber(d),this.mainHelper.validateString(m),this.consumerBiLoggerHelpers.resetLoadTime(),this.mainHelper.log({src:66,evid:305,instanceId:e,msid:f,revision:g,structureId:h,industryId:i,esi:j,editMode:k,designId:l,name:a,setId:b,setNumber:c,noOfSets:d,adiBuilderType:m})}catch(n){this.mainHelper.onError("BISafe: failed to report siteDesign.clickOnDesiredColorFontSet",n.stack)}},a.prototype.colorFontSetChangeSuccess=function(a,b,c,d,e){try{var f=this.consumerBiLoggerHelpers.getInstanceId(),g=this.consumerBiLoggerHelpers.getMetaSiteId(),h=this.consumerBiLoggerHelpers.getStoryRevision(),i=this.consumerBiLoggerHelpers.getStructureId(),j=this.consumerBiLoggerHelpers.getIndustryId(),k=this.consumerBiLoggerHelpers.getEsi(),l=this.consumerBiLoggerHelpers.getDesignId(),m=this.consumerBiLoggerHelpers.getLoadTime(),n=this.consumerBiLoggerHelpers.getAdiBuilderType();return this.mainHelper.validateString(f),this.mainHelper.validateGuid(g),this.mainHelper.validateNumber(h),this.mainHelper.validateString(i),this.mainHelper.validateString(j),this.mainHelper.validateGuid(k),this.mainHelper.validateString(a),this.mainHelper.validateString(l),this.mainHelper.validateString(b),this.mainHelper.validateString(c),this.mainHelper.validateNumber(d),this.mainHelper.validateNumber(e),this.mainHelper.validateNumber(m),this.mainHelper.validateString(n),this.mainHelper.log({src:66,evid:306,instanceId:f,msid:g,revision:h,structureId:i,industryId:j,esi:k,editMode:a,designId:l,name:b,setId:c,setNumber:d,noOfSets:e,loadTime:m,adiBuilderType:n})}catch(o){this.mainHelper.onError("BISafe: failed to report siteDesign.colorFontSetChangeSuccess",o.stack)}},a.prototype.clickOnResetDesign=function(a){try{var b=this.consumerBiLoggerHelpers.getInstanceId(),c=this.consumerBiLoggerHelpers.getMetaSiteId(),d=this.consumerBiLoggerHelpers.getStoryRevision(),e=this.consumerBiLoggerHelpers.getStructureId(),f=this.consumerBiLoggerHelpers.getIndustryId(),g=this.consumerBiLoggerHelpers.getEsi(),h=this.consumerBiLoggerHelpers.getEditMode(),i=this.consumerBiLoggerHelpers.getDesignId(),j=this.consumerBiLoggerHelpers.getAdiBuilderType();return this.mainHelper.validateString(b),this.mainHelper.validateGuid(c),this.mainHelper.validateNumber(d),this.mainHelper.validateString(e),this.mainHelper.validateString(f),this.mainHelper.validateGuid(g),
this.mainHelper.validateString(h),this.mainHelper.validateString(i),this.mainHelper.validateString(j),this.consumerBiLoggerHelpers.resetLoadTime(),this.mainHelper.log({src:66,evid:307,instanceId:b,msid:c,revision:d,structureId:e,industryId:f,esi:g,editMode:h,designId:i,isAdvanced:a,adiBuilderType:j})}catch(k){this.mainHelper.onError("BISafe: failed to report siteDesign.clickOnResetDesign",k.stack)}},a.prototype.resetDesignSuccess=function(a){try{var b=this.consumerBiLoggerHelpers.getInstanceId(),c=this.consumerBiLoggerHelpers.getMetaSiteId(),d=this.consumerBiLoggerHelpers.getStoryRevision(),e=this.consumerBiLoggerHelpers.getStructureId(),f=this.consumerBiLoggerHelpers.getIndustryId(),g=this.consumerBiLoggerHelpers.getEsi(),h=this.consumerBiLoggerHelpers.getEditMode(),i=this.consumerBiLoggerHelpers.getDesignId(),j=this.consumerBiLoggerHelpers.getLoadTime(),k=this.consumerBiLoggerHelpers.getAdiBuilderType();return this.mainHelper.validateString(b),this.mainHelper.validateGuid(c),this.mainHelper.validateNumber(d),this.mainHelper.validateString(e),this.mainHelper.validateString(f),this.mainHelper.validateGuid(g),this.mainHelper.validateString(h),this.mainHelper.validateString(i),this.mainHelper.validateNumber(j),this.mainHelper.validateString(k),this.mainHelper.log({src:66,evid:308,instanceId:b,msid:c,revision:d,structureId:e,industryId:f,esi:g,editMode:h,designId:i,loadTime:j,isAdvanced:a,adiBuilderType:k})}catch(l){this.mainHelper.onError("BISafe: failed to report siteDesign.resetDesignSuccess",l.stack)}},a.prototype.designWindowWasClosed=function(a){try{var b=this.consumerBiLoggerHelpers.getInstanceId(),c=this.consumerBiLoggerHelpers.getMetaSiteId(),d=this.consumerBiLoggerHelpers.getStoryRevision(),e=this.consumerBiLoggerHelpers.getStructureId(),f=this.consumerBiLoggerHelpers.getIndustryId(),g=this.consumerBiLoggerHelpers.getEsi(),h=this.consumerBiLoggerHelpers.getEditMode(),i=this.consumerBiLoggerHelpers.getAdiBuilderType();return this.mainHelper.validateString(b),this.mainHelper.validateGuid(c),this.mainHelper.validateNumber(d),this.mainHelper.validateString(e),this.mainHelper.validateString(f),this.mainHelper.validateGuid(g),this.mainHelper.validateString(h),this.mainHelper.validateString(a),this.mainHelper.validateString(i),this.mainHelper.log({src:66,evid:309,instanceId:b,msid:c,revision:d,structureId:e,industryId:f,esi:g,editMode:h,name:a,adiBuilderType:i})}catch(j){this.mainHelper.onError("BISafe: failed to report siteDesign.designWindowWasClosed",j.stack)}},a.prototype.customizeDesignColorPaletteMode=function(a){try{var b=this.consumerBiLoggerHelpers.getDesignId(),c=this.consumerBiLoggerHelpers.getEditMode(),d=this.consumerBiLoggerHelpers.getEsi(),e=this.consumerBiLoggerHelpers.getIndustryId(),f=this.consumerBiLoggerHelpers.getInstanceId(),g=this.consumerBiLoggerHelpers.getMetaSiteId(),h=this.consumerBiLoggerHelpers.getStoryRevision(),i=this.consumerBiLoggerHelpers.getStructureId(),j=this.consumerBiLoggerHelpers.getAdiBuilderType();return this.mainHelper.validateString(b),this.mainHelper.validateString(c),this.mainHelper.validateGuid(d),this.mainHelper.validateString(e),this.mainHelper.validateString(f),this.mainHelper.validateGuid(g),this.mainHelper.validateNumber(h),this.mainHelper.validateString(i),this.mainHelper.validateString(a),this.mainHelper.validateString(j),this.mainHelper.log({src:66,evid:310,designId:b,editMode:c,esi:d,industryId:e,instanceId:f,msid:g,revision:h,structureId:i,origin:a,adiBuilderType:j})}catch(k){this.mainHelper.onError("BISafe: failed to report siteDesign.customizeDesignColorPaletteMode",k.stack)}},a.prototype.customizeDesignColorPaletteModeChangeColorMainClick=function(){try{var a=this.consumerBiLoggerHelpers.getEditMode(),b=this.consumerBiLoggerHelpers.getEsi(),c=this.consumerBiLoggerHelpers.getIndustryId(),d=this.consumerBiLoggerHelpers.getInstanceId(),e=this.consumerBiLoggerHelpers.getMetaSiteId(),f=this.consumerBiLoggerHelpers.getStoryRevision(),g=this.consumerBiLoggerHelpers.getStructureId(),h=this.consumerBiLoggerHelpers.getAdiBuilderType();return this.mainHelper.validateString(a),this.mainHelper.validateGuid(b),this.mainHelper.validateString(c),this.mainHelper.validateString(d),this.mainHelper.validateGuid(e),this.mainHelper.validateNumber(f),this.mainHelper.validateString(g),this.mainHelper.validateString(h),this.mainHelper.log({src:66,evid:311,editMode:a,esi:b,industryId:c,instanceId:d,msid:e,revision:f,structureId:g,adiBuilderType:h})}catch(i){this.mainHelper.onError("BISafe: failed to report siteDesign.customizeDesignColorPaletteModeChangeColorMainClick",i.stack)}},a.prototype.customizeDesignColorPaletteModeColorSelect=function(a,b){try{var c=this.consumerBiLoggerHelpers.getEditMode(),d=this.consumerBiLoggerHelpers.getEsi(),e=this.consumerBiLoggerHelpers.getIndustryId(),f=this.consumerBiLoggerHelpers.getInstanceId(),g=this.consumerBiLoggerHelpers.getMetaSiteId(),h=this.consumerBiLoggerHelpers.getStoryRevision(),i=this.consumerBiLoggerHelpers.getStructureId(),j=this.consumerBiLoggerHelpers.getAdiBuilderType();return this.mainHelper.validateString(c),this.mainHelper.validateGuid(d),this.mainHelper.validateString(e),this.mainHelper.validateString(f),this.mainHelper.validateGuid(g),this.mainHelper.validateString(b),this.mainHelper.validateNumber(h),this.mainHelper.validateString(i),this.mainHelper.validateString(j),this.consumerBiLoggerHelpers.resetLoadTime(),this.mainHelper.log({src:66,evid:312,advancedEdit:a,editMode:c,esi:d,industryId:e,instanceId:f,msid:g,name:b,revision:h,structureId:i,adiBuilderType:j})}catch(k){this.mainHelper.onError("BISafe: failed to report siteDesign.customizeDesignColorPaletteModeColorSelect",k.stack)}},a.prototype.customizeDesignColorPaletteModeAdvancedEditingColorClick=function(){try{var a=this.consumerBiLoggerHelpers.getEditMode(),b=this.consumerBiLoggerHelpers.getEsi(),c=this.consumerBiLoggerHelpers.getIndustryId(),d=this.consumerBiLoggerHelpers.getInstanceId(),e=this.consumerBiLoggerHelpers.getMetaSiteId(),f=this.consumerBiLoggerHelpers.getStoryRevision(),g=this.consumerBiLoggerHelpers.getStructureId(),h=this.consumerBiLoggerHelpers.getAdiBuilderType();return this.mainHelper.validateString(a),this.mainHelper.validateGuid(b),this.mainHelper.validateString(c),this.mainHelper.validateString(d),this.mainHelper.validateGuid(e),this.mainHelper.validateNumber(f),this.mainHelper.validateString(g),this.mainHelper.validateString(h),this.consumerBiLoggerHelpers.resetLoadTime(),this.mainHelper.log({src:66,evid:313,editMode:a,esi:b,industryId:c,instanceId:d,msid:e,revision:f,structureId:g,adiBuilderType:h})}catch(i){this.mainHelper.onError("BISafe: failed to report siteDesign.customizeDesignColorPaletteModeAdvancedEditingColorClick",i.stack)}},a.prototype.clickOnDesiredPaletteFromCustomizePallete=function(a,b,c,d,e){try{var f=this.consumerBiLoggerHelpers.getDesignId(),g=this.consumerBiLoggerHelpers.getEditMode(),h=this.consumerBiLoggerHelpers.getEsi(),i=this.consumerBiLoggerHelpers.getIndustryId(),j=this.consumerBiLoggerHelpers.getInstanceId(),k=this.consumerBiLoggerHelpers.getMetaSiteId(),l=this.consumerBiLoggerHelpers.getStoryRevision(),m=this.consumerBiLoggerHelpers.getStructureId(),n=this.consumerBiLoggerHelpers.getAdiBuilderType();return this.mainHelper.validateNumber(a),this.mainHelper.validateString(f),this.mainHelper.validateString(g),this.mainHelper.validateGuid(h),this.mainHelper.validateString(i),this.mainHelper.validateString(j),this.mainHelper.validateGuid(k),this.mainHelper.validateNumber(b),this.mainHelper.validateString(c),this.mainHelper.validateNumber(l),this.mainHelper.validateNumber(d),this.mainHelper.validateString(m),this.mainHelper.validateString(e),this.mainHelper.validateString(n),this.mainHelper.log({src:66,evid:314,num_of_colors:a,designId:f,editMode:g,esi:h,industryId:i,instanceId:j,msid:k,noOfSets:b,palleteCreator:c,revision:l,setNumber:d,structureId:m,origin:e,adiBuilderType:n})}catch(o){this.mainHelper.onError("BISafe: failed to report siteDesign.clickOnDesiredPaletteFromCustomizePallete",o.stack)}},a.prototype.openAnimationList=function(){try{var a=this.consumerBiLoggerHelpers.getDesignId(),b=this.consumerBiLoggerHelpers.getEditMode(),c=this.consumerBiLoggerHelpers.getEsi(),d=this.consumerBiLoggerHelpers.getIndustryId(),e=this.consumerBiLoggerHelpers.getInstanceId(),f=this.consumerBiLoggerHelpers.getMetaSiteId(),g=this.consumerBiLoggerHelpers.getStoryRevision(),h=this.consumerBiLoggerHelpers.getStructureId(),i=this.consumerBiLoggerHelpers.getAdiBuilderType();return this.mainHelper.validateString(a),this.mainHelper.validateString(b),this.mainHelper.validateGuid(c),this.mainHelper.validateString(d),this.mainHelper.validateString(e),this.mainHelper.validateGuid(f),this.mainHelper.validateNumber(g),this.mainHelper.validateString(h),this.mainHelper.validateString(i),this.mainHelper.log({src:66,evid:315,designId:a,editMode:b,esi:c,industryId:d,instanceId:e,msid:f,revision:g,structureId:h,adiBuilderType:i})}catch(j){this.mainHelper.onError("BISafe: failed to report siteDesign.openAnimationList",j.stack)}},a.prototype.changeAnimationClick=function(a){try{var b=this.consumerBiLoggerHelpers.getDesignId(),c=this.consumerBiLoggerHelpers.getEditMode(),d=this.consumerBiLoggerHelpers.getEsi(),e=this.consumerBiLoggerHelpers.getIndustryId(),f=this.consumerBiLoggerHelpers.getInstanceId(),g=this.consumerBiLoggerHelpers.getMetaSiteId(),h=this.consumerBiLoggerHelpers.getStoryRevision(),i=this.consumerBiLoggerHelpers.getStructureId(),j=this.consumerBiLoggerHelpers.getAdiBuilderType();return this.mainHelper.validateString(a),this.mainHelper.validateString(b),this.mainHelper.validateString(c),this.mainHelper.validateGuid(d),this.mainHelper.validateString(e),this.mainHelper.validateString(f),this.mainHelper.validateGuid(g),this.mainHelper.validateNumber(h),this.mainHelper.validateString(i),this.mainHelper.validateString(j),this.consumerBiLoggerHelpers.resetLoadTime(),this.mainHelper.log({src:66,evid:316,name:a,designId:b,editMode:c,esi:d,industryId:e,instanceId:f,msid:g,revision:h,structureId:i,adiBuilderType:j})}catch(k){this.mainHelper.onError("BISafe: failed to report siteDesign.changeAnimationClick",k.stack)}},a.prototype.changeAnimationSuccess=function(a){try{var b=this.consumerBiLoggerHelpers.getLoadTime(),c=this.consumerBiLoggerHelpers.getDesignId(),d=this.consumerBiLoggerHelpers.getEditMode(),e=this.consumerBiLoggerHelpers.getEsi(),f=this.consumerBiLoggerHelpers.getIndustryId(),g=this.consumerBiLoggerHelpers.getInstanceId(),h=this.consumerBiLoggerHelpers.getMetaSiteId(),i=this.consumerBiLoggerHelpers.getStoryRevision(),j=this.consumerBiLoggerHelpers.getStructureId(),k=this.consumerBiLoggerHelpers.getAdiBuilderType();return this.mainHelper.validateString(a),this.mainHelper.validateNumber(b),this.mainHelper.validateString(c),this.mainHelper.validateString(d),this.mainHelper.validateGuid(e),this.mainHelper.validateString(f),this.mainHelper.validateString(g),this.mainHelper.validateGuid(h),this.mainHelper.validateNumber(i),this.mainHelper.validateString(j),this.mainHelper.validateString(k),this.mainHelper.log({src:66,evid:317,name:a,loadTime:b,designId:c,editMode:d,esi:e,industryId:f,instanceId:g,msid:h,revision:i,structureId:j,adiBuilderType:k})}catch(l){this.mainHelper.onError("BISafe: failed to report siteDesign.changeAnimationSuccess",l.stack)}},a.prototype.customizeDesignChangeDarkLightMode=function(){try{var a=this.consumerBiLoggerHelpers.getDesignId(),b=this.consumerBiLoggerHelpers.getEditMode(),c=this.consumerBiLoggerHelpers.getEsi(),d=this.consumerBiLoggerHelpers.getIndustryId(),e=this.consumerBiLoggerHelpers.getInstanceId(),f=this.consumerBiLoggerHelpers.getMetaSiteId(),g=this.consumerBiLoggerHelpers.getStoryRevision(),h=this.consumerBiLoggerHelpers.getStructureId(),i=this.consumerBiLoggerHelpers.getAdiBuilderType();return this.mainHelper.validateString(a),this.mainHelper.validateString(b),this.mainHelper.validateGuid(c),this.mainHelper.validateString(d),this.mainHelper.validateString(e),this.mainHelper.validateGuid(f),this.mainHelper.validateNumber(g),this.mainHelper.validateString(h),this.mainHelper.validateString(i),this.consumerBiLoggerHelpers.resetLoadTime(),this.mainHelper.log({src:66,evid:318,designId:a,editMode:b,esi:c,industryId:d,instanceId:e,msid:f,revision:g,structureId:h,adiBuilderType:i})}catch(j){this.mainHelper.onError("BISafe: failed to report siteDesign.customizeDesignChangeDarkLightMode",j.stack)}},a.prototype.customizeDesignChangeDarkLightModeSuccess=function(){try{var a=this.consumerBiLoggerHelpers.getLoadTime(),b=this.consumerBiLoggerHelpers.getDesignId(),c=this.consumerBiLoggerHelpers.getEditMode(),d=this.consumerBiLoggerHelpers.getEsi(),e=this.consumerBiLoggerHelpers.getIndustryId(),f=this.consumerBiLoggerHelpers.getInstanceId(),g=this.consumerBiLoggerHelpers.getMetaSiteId(),h=this.consumerBiLoggerHelpers.getStoryRevision(),i=this.consumerBiLoggerHelpers.getStructureId(),j=this.consumerBiLoggerHelpers.getAdiBuilderType();return this.mainHelper.validateNumber(a),this.mainHelper.validateString(b),this.mainHelper.validateString(c),this.mainHelper.validateGuid(d),this.mainHelper.validateString(e),this.mainHelper.validateString(f),this.mainHelper.validateGuid(g),this.mainHelper.validateNumber(h),this.mainHelper.validateString(i),this.mainHelper.validateString(j),this.mainHelper.log({src:66,evid:319,loadTime:a,designId:b,editMode:c,esi:d,industryId:e,instanceId:f,msid:g,revision:h,structureId:i,adiBuilderType:j})}catch(k){this.mainHelper.onError("BISafe: failed to report siteDesign.customizeDesignChangeDarkLightModeSuccess",k.stack)}},a.prototype.customizeDesignColorPaletteModeColorSelectSuccess=function(a,b){try{var c=this.consumerBiLoggerHelpers.getLoadTime(),d=this.consumerBiLoggerHelpers.getEditMode(),e=this.consumerBiLoggerHelpers.getEsi(),f=this.consumerBiLoggerHelpers.getIndustryId(),g=this.consumerBiLoggerHelpers.getInstanceId(),h=this.consumerBiLoggerHelpers.getMetaSiteId(),i=this.consumerBiLoggerHelpers.getStoryRevision(),j=this.consumerBiLoggerHelpers.getStructureId(),k=this.consumerBiLoggerHelpers.getAdiBuilderType();return this.mainHelper.validateNumber(c),this.mainHelper.validateString(d),this.mainHelper.validateGuid(e),this.mainHelper.validateString(f),this.mainHelper.validateString(g),this.mainHelper.validateGuid(h),this.mainHelper.validateString(b),this.mainHelper.validateNumber(i),this.mainHelper.validateString(j),this.mainHelper.validateString(k),this.mainHelper.log({src:66,evid:320,loadTime:c,advancedEdit:a,editMode:d,esi:e,industryId:f,instanceId:g,msid:h,name:b,revision:i,structureId:j,adiBuilderType:k})}catch(l){this.mainHelper.onError("BISafe: failed to report siteDesign.customizeDesignColorPaletteModeColorSelectSuccess",l.stack)}},a.prototype.customizeDesignColorPaletteModeAdvancedEditingColorClickSuccess=function(){try{var a=this.consumerBiLoggerHelpers.getLoadTime(),b=this.consumerBiLoggerHelpers.getEditMode(),c=this.consumerBiLoggerHelpers.getEsi(),d=this.consumerBiLoggerHelpers.getIndustryId(),e=this.consumerBiLoggerHelpers.getInstanceId(),f=this.consumerBiLoggerHelpers.getMetaSiteId(),g=this.consumerBiLoggerHelpers.getStoryRevision(),h=this.consumerBiLoggerHelpers.getStructureId(),i=this.consumerBiLoggerHelpers.getAdiBuilderType();return this.mainHelper.validateNumber(a),this.mainHelper.validateString(b),this.mainHelper.validateGuid(c),this.mainHelper.validateString(d),this.mainHelper.validateString(e),this.mainHelper.validateGuid(f),this.mainHelper.validateNumber(g),this.mainHelper.validateString(h),this.mainHelper.validateString(i),this.mainHelper.log({src:66,evid:321,loadTime:a,editMode:b,esi:c,industryId:d,instanceId:e,msid:f,revision:g,structureId:h,adiBuilderType:i})}catch(j){this.mainHelper.onError("BISafe: failed to report siteDesign.customizeDesignColorPaletteModeAdvancedEditingColorClickSuccess",j.stack)}},a.prototype.clickOnDesiredPaletteFromCustomizePalleteSuccess=function(a,b,c,d,e,f){try{var g=this.consumerBiLoggerHelpers.getDesignId(),h=this.consumerBiLoggerHelpers.getEditMode(),i=this.consumerBiLoggerHelpers.getEsi(),j=this.consumerBiLoggerHelpers.getIndustryId(),k=this.consumerBiLoggerHelpers.getInstanceId(),l=this.consumerBiLoggerHelpers.getMetaSiteId(),m=this.consumerBiLoggerHelpers.getStoryRevision(),n=this.consumerBiLoggerHelpers.getStructureId(),o=this.consumerBiLoggerHelpers.getAdiBuilderType();return this.mainHelper.validateNumber(a),this.mainHelper.validateString(g),this.mainHelper.validateString(h),this.mainHelper.validateGuid(i),this.mainHelper.validateString(j),this.mainHelper.validateString(k),this.mainHelper.validateGuid(l),this.mainHelper.validateNumber(b),this.mainHelper.validateNumber(c),this.mainHelper.validateString(d),this.mainHelper.validateNumber(m),this.mainHelper.validateNumber(e),this.mainHelper.validateString(n),this.mainHelper.validateString(f),this.mainHelper.validateString(o),this.mainHelper.log({src:66,evid:322,loadTime:a,designId:g,editMode:h,esi:i,industryId:j,instanceId:k,msid:l,num_of_colors:b,noOfSets:c,palleteCreator:d,revision:m,setNumber:e,structureId:n,origin:f,adiBuilderType:o})}catch(p){this.mainHelper.onError("BISafe: failed to report siteDesign.clickOnDesiredPaletteFromCustomizePalleteSuccess",p.stack)}},a.prototype.customizeDesignChangeScrollAnimationClick=function(a,b){try{var c=this.consumerBiLoggerHelpers.getDesignId(),d=this.consumerBiLoggerHelpers.getEditMode(),e=this.consumerBiLoggerHelpers.getEsi(),f=this.consumerBiLoggerHelpers.getIndustryId(),g=this.consumerBiLoggerHelpers.getInstanceId(),h=this.consumerBiLoggerHelpers.getMetaSiteId(),i=this.consumerBiLoggerHelpers.getStoryRevision(),j=this.consumerBiLoggerHelpers.getStructureId(),k=this.consumerBiLoggerHelpers.getAdiBuilderType();return this.mainHelper.validateString(c),this.mainHelper.validateString(d),this.mainHelper.validateGuid(e),this.mainHelper.validateString(f),this.mainHelper.validateString(g),this.mainHelper.validateGuid(h),this.mainHelper.validateString(a),this.mainHelper.validateString(b),this.mainHelper.validateNumber(i),this.mainHelper.validateString(j),this.mainHelper.validateString(k),this.consumerBiLoggerHelpers.resetLoadTime(),this.mainHelper.log({src:66,evid:323,designId:c,editMode:d,esi:e,industryId:f,instanceId:g,msid:h,name:a,alias:b,revision:i,structureId:j,adiBuilderType:k})}catch(l){this.mainHelper.onError("BISafe: failed to report siteDesign.customizeDesignChangeScrollAnimationClick",l.stack)}},a.prototype.customizeDesignChangeScrollAnimationSuccess=function(a,b){try{var c=this.consumerBiLoggerHelpers.getDesignId(),d=this.consumerBiLoggerHelpers.getEditMode(),e=this.consumerBiLoggerHelpers.getEsi(),f=this.consumerBiLoggerHelpers.getIndustryId(),g=this.consumerBiLoggerHelpers.getInstanceId(),h=this.consumerBiLoggerHelpers.getLoadTime(),i=this.consumerBiLoggerHelpers.getMetaSiteId(),j=this.consumerBiLoggerHelpers.getStoryRevision(),k=this.consumerBiLoggerHelpers.getStructureId(),l=this.consumerBiLoggerHelpers.getAdiBuilderType();return this.mainHelper.validateString(c),this.mainHelper.validateString(d),this.mainHelper.validateGuid(e),this.mainHelper.validateString(f),this.mainHelper.validateString(g),this.mainHelper.validateNumber(h),this.mainHelper.validateGuid(i),this.mainHelper.validateString(a),this.mainHelper.validateString(b),this.mainHelper.validateNumber(j),this.mainHelper.validateString(k),this.mainHelper.validateString(l),this.mainHelper.log({src:66,evid:324,designId:c,editMode:d,esi:e,industryId:f,instanceId:g,loadTime:h,msid:i,name:a,alias:b,revision:j,structureId:k,adiBuilderType:l})}catch(m){this.mainHelper.onError("BISafe: failed to report siteDesign.customizeDesignChangeScrollAnimationSuccess",m.stack)}},a.prototype.customizeDesignAdvancedColorsAreHardToReadDisplayed=function(){try{var a=this.consumerBiLoggerHelpers.getEditMode(),b=this.consumerBiLoggerHelpers.getEsi(),c=this.consumerBiLoggerHelpers.getIndustryId(),d=this.consumerBiLoggerHelpers.getInstanceId(),e=this.consumerBiLoggerHelpers.getMetaSiteId(),f=this.consumerBiLoggerHelpers.getStoryRevision(),g=this.consumerBiLoggerHelpers.getStructureId(),h=this.consumerBiLoggerHelpers.getAdiBuilderType();return this.mainHelper.validateString(a),this.mainHelper.validateGuid(b),this.mainHelper.validateString(c),this.mainHelper.validateString(d),this.mainHelper.validateGuid(e),this.mainHelper.validateNumber(f),this.mainHelper.validateString(g),this.mainHelper.validateString(h),this.mainHelper.log({src:66,evid:325,editMode:a,esi:b,industryId:c,instanceId:d,msid:e,revision:f,structureId:g,adiBuilderType:h})}catch(i){this.mainHelper.onError("BISafe: failed to report siteDesign.customizeDesignAdvancedColorsAreHardToReadDisplayed",i.stack)}},a.prototype.customizeDesignAdvancedUserClicksFixColors=function(){try{var a=this.consumerBiLoggerHelpers.getEditMode(),b=this.consumerBiLoggerHelpers.getEsi(),c=this.consumerBiLoggerHelpers.getIndustryId(),d=this.consumerBiLoggerHelpers.getInstanceId(),e=this.consumerBiLoggerHelpers.getMetaSiteId(),f=this.consumerBiLoggerHelpers.getStoryRevision(),g=this.consumerBiLoggerHelpers.getStructureId(),h=this.consumerBiLoggerHelpers.getAdiBuilderType();return this.mainHelper.validateString(a),this.mainHelper.validateGuid(b),this.mainHelper.validateString(c),this.mainHelper.validateString(d),this.mainHelper.validateGuid(e),this.mainHelper.validateNumber(f),this.mainHelper.validateString(g),this.mainHelper.validateString(h),this.mainHelper.log({src:66,evid:326,editMode:a,esi:b,industryId:c,instanceId:d,msid:e,revision:f,structureId:g,adiBuilderType:h})}catch(i){this.mainHelper.onError("BISafe: failed to report siteDesign.customizeDesignAdvancedUserClicksFixColors",i.stack)}},a.prototype.customizeDesignAdvancedFixColorsSuccess=function(){try{var a=this.consumerBiLoggerHelpers.getLoadTime(),b=this.consumerBiLoggerHelpers.getEditMode(),c=this.consumerBiLoggerHelpers.getEsi(),d=this.consumerBiLoggerHelpers.getIndustryId(),e=this.consumerBiLoggerHelpers.getInstanceId(),f=this.consumerBiLoggerHelpers.getMetaSiteId(),g=this.consumerBiLoggerHelpers.getStoryRevision(),h=this.consumerBiLoggerHelpers.getStructureId(),i=this.consumerBiLoggerHelpers.getAdiBuilderType();return this.mainHelper.validateNumber(a),this.mainHelper.validateString(b),this.mainHelper.validateGuid(c),this.mainHelper.validateString(d),this.mainHelper.validateString(e),this.mainHelper.validateGuid(f),this.mainHelper.validateNumber(g),this.mainHelper.validateString(h),this.mainHelper.validateString(i),this.mainHelper.log({src:66,evid:327,loadTime:a,editMode:b,esi:c,industryId:d,instanceId:e,msid:f,revision:g,structureId:h,adiBuilderType:i})}catch(j){this.mainHelper.onError("BISafe: failed to report siteDesign.customizeDesignAdvancedFixColorsSuccess",j.stack)}},a.prototype.changeFontSizeClick=function(a,b){try{var c=this.consumerBiLoggerHelpers.getDesignId(),d=this.consumerBiLoggerHelpers.getEditMode(),e=this.consumerBiLoggerHelpers.getEsi(),f=this.consumerBiLoggerHelpers.getIndustryId(),g=this.consumerBiLoggerHelpers.getInstanceId(),h=this.consumerBiLoggerHelpers.getMetaSiteId(),i=this.consumerBiLoggerHelpers.getStoryRevision(),j=this.consumerBiLoggerHelpers.getStructureId(),k=this.consumerBiLoggerHelpers.getAdiBuilderType();return this.mainHelper.validateString(a),this.mainHelper.validateString(c),this.mainHelper.validateString(d),this.mainHelper.validateGuid(e),this.mainHelper.validateString(f),this.mainHelper.validateString(g),this.mainHelper.validateGuid(h),this.mainHelper.validateNumber(i),this.mainHelper.validateString(b),this.mainHelper.validateString(j),this.mainHelper.validateString(k),this.consumerBiLoggerHelpers.resetLoadTime(),this.mainHelper.log({src:66,evid:328,fontSize:a,designId:c,editMode:d,esi:e,industryId:f,instanceId:g,msid:h,revision:i,setId:b,structureId:j,adiBuilderType:k})}catch(l){this.mainHelper.onError("BISafe: failed to report siteDesign.changeFontSizeClick",l.stack)}},a.prototype.changeFontSizeSuccess=function(a,b){try{var c=this.consumerBiLoggerHelpers.getLoadTime(),d=this.consumerBiLoggerHelpers.getDesignId(),e=this.consumerBiLoggerHelpers.getEditMode(),f=this.consumerBiLoggerHelpers.getEsi(),g=this.consumerBiLoggerHelpers.getIndustryId(),h=this.consumerBiLoggerHelpers.getInstanceId(),i=this.consumerBiLoggerHelpers.getMetaSiteId(),j=this.consumerBiLoggerHelpers.getStoryRevision(),k=this.consumerBiLoggerHelpers.getStructureId(),l=this.consumerBiLoggerHelpers.getAdiBuilderType();return this.mainHelper.validateNumber(c),this.mainHelper.validateString(a),this.mainHelper.validateString(d),this.mainHelper.validateString(e),this.mainHelper.validateGuid(f),this.mainHelper.validateString(g),this.mainHelper.validateString(h),this.mainHelper.validateGuid(i),this.mainHelper.validateNumber(j),this.mainHelper.validateString(b),this.mainHelper.validateString(k),this.mainHelper.validateString(l),this.mainHelper.log({src:66,evid:329,loadTime:c,fontSize:a,designId:d,editMode:e,esi:f,industryId:g,instanceId:h,msid:i,revision:j,setId:b,structureId:k,adiBuilderType:l})}catch(m){this.mainHelper.onError("BISafe: failed to report siteDesign.changeFontSizeSuccess",m.stack)}},a.prototype.customizeDesignOverrideSectionDesignDisplayed=function(a){try{var b=this.consumerBiLoggerHelpers.getEditMode(),c=this.consumerBiLoggerHelpers.getEsi(),d=this.consumerBiLoggerHelpers.getIndustryId(),e=this.consumerBiLoggerHelpers.getInstanceId(),f=this.consumerBiLoggerHelpers.getMetaSiteId(),g=this.consumerBiLoggerHelpers.getStoryRevision(),h=this.consumerBiLoggerHelpers.getStructureId(),i=this.consumerBiLoggerHelpers.getAdiBuilderType();return this.mainHelper.validateString(a),this.mainHelper.validateString(b),this.mainHelper.validateGuid(c),this.mainHelper.validateString(d),this.mainHelper.validateString(e),this.mainHelper.validateGuid(f),this.mainHelper.validateNumber(g),this.mainHelper.validateString(h),this.mainHelper.validateString(i),this.mainHelper.log({src:66,evid:330,name:a,editMode:b,esi:c,industryId:d,instanceId:e,msid:f,revision:g,structureId:h,adiBuilderType:i})}catch(j){this.mainHelper.onError("BISafe: failed to report siteDesign.customizeDesignOverrideSectionDesignDisplayed",j.stack)}},a.prototype.customizeDesignOverrideSectionDesignClickApply=function(a){try{var b=this.consumerBiLoggerHelpers.getEditMode(),c=this.consumerBiLoggerHelpers.getEsi(),d=this.consumerBiLoggerHelpers.getIndustryId(),e=this.consumerBiLoggerHelpers.getInstanceId(),f=this.consumerBiLoggerHelpers.getMetaSiteId(),g=this.consumerBiLoggerHelpers.getStoryRevision(),h=this.consumerBiLoggerHelpers.getStructureId(),i=this.consumerBiLoggerHelpers.getAdiBuilderType();return this.mainHelper.validateString(a),this.mainHelper.validateString(b),this.mainHelper.validateGuid(c),this.mainHelper.validateString(d),this.mainHelper.validateString(e),this.mainHelper.validateGuid(f),this.mainHelper.validateNumber(g),this.mainHelper.validateString(h),this.mainHelper.validateString(i),this.mainHelper.log({src:66,evid:331,name:a,editMode:b,esi:c,industryId:d,instanceId:e,msid:f,revision:g,structureId:h,adiBuilderType:i})}catch(j){this.mainHelper.onError("BISafe: failed to report siteDesign.customizeDesignOverrideSectionDesignClickApply",j.stack)}},a.prototype.customizeDesignOverrideSectionDesignApplySuccess=function(a){try{var b=this.consumerBiLoggerHelpers.getLoadTime(),c=this.consumerBiLoggerHelpers.getEditMode(),d=this.consumerBiLoggerHelpers.getEsi(),e=this.consumerBiLoggerHelpers.getIndustryId(),f=this.consumerBiLoggerHelpers.getInstanceId(),g=this.consumerBiLoggerHelpers.getMetaSiteId(),h=this.consumerBiLoggerHelpers.getStoryRevision(),i=this.consumerBiLoggerHelpers.getStructureId(),j=this.consumerBiLoggerHelpers.getAdiBuilderType();return this.mainHelper.validateNumber(b),this.mainHelper.validateString(a),this.mainHelper.validateString(c),this.mainHelper.validateGuid(d),this.mainHelper.validateString(e),this.mainHelper.validateString(f),this.mainHelper.validateGuid(g),this.mainHelper.validateNumber(h),this.mainHelper.validateString(i),this.mainHelper.validateString(j),this.mainHelper.log({src:66,evid:332,loadTime:b,name:a,editMode:c,esi:d,industryId:e,instanceId:f,msid:g,revision:h,structureId:i,adiBuilderType:j})}catch(k){this.mainHelper.onError("BISafe: failed to report siteDesign.customizeDesignOverrideSectionDesignApplySuccess",k.stack)}},a.prototype.createPaletteFromLogoAlgoStart=function(a){try{var b=this.consumerBiLoggerHelpers.getEsi(),c=this.consumerBiLoggerHelpers.getIndustryId(),d=this.consumerBiLoggerHelpers.getInstanceId(),e=this.consumerBiLoggerHelpers.getMetaSiteId(),f=this.consumerBiLoggerHelpers.getStoryRevision(),g=this.consumerBiLoggerHelpers.getStructureId(),h=this.consumerBiLoggerHelpers.getAdiBuilderType();return this.mainHelper.validateString(a),this.mainHelper.validateGuid(b),this.mainHelper.validateString(c),this.mainHelper.validateString(d),this.mainHelper.validateGuid(e),this.mainHelper.validateNumber(f),this.mainHelper.validateString(g),this.mainHelper.validateString(h),this.mainHelper.log({src:66,evid:333,origin:a,esi:b,industryId:c,instanceId:d,msid:e,revision:f,structureId:g,adiBuilderType:h})}catch(i){this.mainHelper.onError("BISafe: failed to report siteDesign.createPaletteFromLogoAlgoStart",i.stack)}},a.prototype.createPaletteFromLogoAlgoSuccess=function(a,b,c,d,e){try{var f=this.consumerBiLoggerHelpers.getDesignId(),g=this.consumerBiLoggerHelpers.getEsi(),h=this.consumerBiLoggerHelpers.getIndustryId(),i=this.consumerBiLoggerHelpers.getInstanceId(),j=this.consumerBiLoggerHelpers.getMetaSiteId(),k=this.consumerBiLoggerHelpers.getStoryRevision(),l=this.consumerBiLoggerHelpers.getStructureId(),m=this.consumerBiLoggerHelpers.getAdiBuilderType();return this.mainHelper.validateNumber(a),this.mainHelper.validateNumber(b),this.mainHelper.validateString(c),this.mainHelper.validateString(d),this.mainHelper.validateString(f),this.mainHelper.validateGuid(g),this.mainHelper.validateString(h),this.mainHelper.validateString(i),this.mainHelper.validateGuid(j),this.mainHelper.validateNumber(e),this.mainHelper.validateNumber(k),this.mainHelper.validateString(l),this.mainHelper.validateString(m),this.mainHelper.log({src:66,evid:334,loadTime:a,intervalLoadTime:b,name:c,origin:d,designId:f,esi:g,industryId:h,instanceId:i,msid:j,num_of_colors:e,revision:k,structureId:l,adiBuilderType:m})}catch(n){this.mainHelper.onError("BISafe: failed to report siteDesign.createPaletteFromLogoAlgoSuccess",n.stack)}},a}(),TipsConsumerBiLogger=function(){function a(a,b,c){this.consumerBiLoggerHelpers=a,this.clientTopology=b,this.mainHelper=c}return a.prototype.show=function(a,b){try{var c=this.consumerBiLoggerHelpers.getInstanceId(),d=this.consumerBiLoggerHelpers.getMetaSiteId(),e=this.consumerBiLoggerHelpers.getStoryRevision(),f=this.consumerBiLoggerHelpers.getStructureId(),g=this.consumerBiLoggerHelpers.getIndustryId(),h=this.consumerBiLoggerHelpers.getEsi(),i=this.consumerBiLoggerHelpers.getEditMode(),j=this.consumerBiLoggerHelpers.getAdiBuilderType();return this.mainHelper.validateString(c),this.mainHelper.validateGuid(d),this.mainHelper.validateNumber(e),this.mainHelper.validateString(f),this.mainHelper.validateString(g),this.mainHelper.validateGuid(h),this.mainHelper.validateString(i),this.mainHelper.validateString(a),this.mainHelper.validateString(b),this.mainHelper.validateString(j),this.mainHelper.log({src:66,evid:45,instanceId:c,msid:d,revision:e,structureId:f,industryId:g,esi:h,editMode:i,name:a,type:b,adiBuilderType:j})}catch(k){this.mainHelper.onError("BISafe: failed to report tips.show",k.stack)}},a.prototype.close=function(a,b){try{var c=this.consumerBiLoggerHelpers.getInstanceId(),d=this.consumerBiLoggerHelpers.getMetaSiteId(),e=this.consumerBiLoggerHelpers.getStoryRevision(),f=this.consumerBiLoggerHelpers.getStructureId(),g=this.consumerBiLoggerHelpers.getIndustryId(),h=this.consumerBiLoggerHelpers.getEsi(),i=this.consumerBiLoggerHelpers.getEditMode(),j=this.consumerBiLoggerHelpers.getAdiBuilderType();return this.mainHelper.validateString(c),this.mainHelper.validateGuid(d),this.mainHelper.validateNumber(e),
this.mainHelper.validateString(f),this.mainHelper.validateString(g),this.mainHelper.validateGuid(h),this.mainHelper.validateString(i),this.mainHelper.validateString(a),this.mainHelper.validateString(b),this.mainHelper.validateString(j),this.mainHelper.log({src:66,evid:46,instanceId:c,msid:d,revision:e,structureId:f,industryId:g,esi:h,editMode:i,name:a,type:b,adiBuilderType:j})}catch(k){this.mainHelper.onError("BISafe: failed to report tips.close",k.stack)}},a}(),TourConsumerBiLogger=function(){function a(a,b,c){this.consumerBiLoggerHelpers=a,this.clientTopology=b,this.mainHelper=c}return a.prototype.start=function(a){try{var b=this.consumerBiLoggerHelpers.getInstanceId(),c=this.consumerBiLoggerHelpers.getMetaSiteId(),d=this.consumerBiLoggerHelpers.getStoryRevision(),e=this.consumerBiLoggerHelpers.getStructureId(),f=this.consumerBiLoggerHelpers.getIndustryId(),g=this.consumerBiLoggerHelpers.getEsi(),h=this.consumerBiLoggerHelpers.getEditMode(),i=this.consumerBiLoggerHelpers.getAdiBuilderType();return this.mainHelper.validateString(b),this.mainHelper.validateGuid(c),this.mainHelper.validateNumber(d),this.mainHelper.validateString(e),this.mainHelper.validateString(f),this.mainHelper.validateGuid(g),this.mainHelper.validateString(h),this.mainHelper.validateString(a),this.mainHelper.validateString(i),this.mainHelper.log({src:66,evid:50,instanceId:b,msid:c,revision:d,structureId:e,industryId:f,esi:g,editMode:h,name:a,adiBuilderType:i})}catch(j){this.mainHelper.onError("BISafe: failed to report tour.start",j.stack)}},a.prototype.phaseDuringTour=function(a){try{var b=this.consumerBiLoggerHelpers.getInstanceId(),c=this.consumerBiLoggerHelpers.getMetaSiteId(),d=this.consumerBiLoggerHelpers.getStoryRevision(),e=this.consumerBiLoggerHelpers.getStructureId(),f=this.consumerBiLoggerHelpers.getIndustryId(),g=this.consumerBiLoggerHelpers.getEsi(),h=this.consumerBiLoggerHelpers.getEditMode(),i=this.consumerBiLoggerHelpers.getPhaseNumber(),j=this.consumerBiLoggerHelpers.getTotalPhases(),k=this.consumerBiLoggerHelpers.getPhaseName(),l=this.consumerBiLoggerHelpers.getDesignId(),m=this.consumerBiLoggerHelpers.getAdiBuilderType();return this.mainHelper.validateString(b),this.mainHelper.validateGuid(c),this.mainHelper.validateNumber(d),this.mainHelper.validateString(e),this.mainHelper.validateString(f),this.mainHelper.validateGuid(g),this.mainHelper.validateString(h),this.mainHelper.validateNumber(i),this.mainHelper.validateNumber(j),this.mainHelper.validateString(k),this.mainHelper.validateString(a),this.mainHelper.validateString(l),this.mainHelper.validateString(m),this.mainHelper.log({src:66,evid:51,instanceId:b,msid:c,revision:d,structureId:e,industryId:f,esi:g,editMode:h,phaseNumber:i,totalPhases:j,phaseName:k,name:a,designId:l,adiBuilderType:m})}catch(n){this.mainHelper.onError("BISafe: failed to report tour.phaseDuringTour",n.stack)}},a.prototype.complete=function(a){try{var b=this.consumerBiLoggerHelpers.getInstanceId(),c=this.consumerBiLoggerHelpers.getMetaSiteId(),d=this.consumerBiLoggerHelpers.getStoryRevision(),e=this.consumerBiLoggerHelpers.getStructureId(),f=this.consumerBiLoggerHelpers.getIndustryId(),g=this.consumerBiLoggerHelpers.getEsi(),h=this.consumerBiLoggerHelpers.getEditMode(),i=this.consumerBiLoggerHelpers.getAdiBuilderType();return this.mainHelper.validateString(b),this.mainHelper.validateGuid(c),this.mainHelper.validateNumber(d),this.mainHelper.validateString(e),this.mainHelper.validateString(f),this.mainHelper.validateGuid(g),this.mainHelper.validateString(h),this.mainHelper.validateString(a),this.mainHelper.validateString(i),this.mainHelper.log({src:66,evid:52,instanceId:b,msid:c,revision:d,structureId:e,industryId:f,esi:g,editMode:h,name:a,adiBuilderType:i})}catch(j){this.mainHelper.onError("BISafe: failed to report tour.complete",j.stack)}},a.prototype.whatSNextShowMenu=function(){try{var a=this.consumerBiLoggerHelpers.getInstanceId(),b=this.consumerBiLoggerHelpers.getMetaSiteId(),c=this.consumerBiLoggerHelpers.getStoryRevision(),d=this.consumerBiLoggerHelpers.getStructureId(),e=this.consumerBiLoggerHelpers.getIndustryId(),f=this.consumerBiLoggerHelpers.getEsi(),g=this.consumerBiLoggerHelpers.getAdiBuilderType();return this.mainHelper.validateString(a),this.mainHelper.validateGuid(b),this.mainHelper.validateNumber(c),this.mainHelper.validateString(d),this.mainHelper.validateString(e),this.mainHelper.validateGuid(f),this.mainHelper.validateString(g),this.mainHelper.log({src:66,evid:53,instanceId:a,msid:b,revision:c,structureId:d,industryId:e,esi:f,adiBuilderType:g})}catch(h){this.mainHelper.onError("BISafe: failed to report tour.whatSNextShowMenu",h.stack)}},a.prototype.skipTour=function(a){try{var b=this.consumerBiLoggerHelpers.getInstanceId(),c=this.consumerBiLoggerHelpers.getMetaSiteId(),d=this.consumerBiLoggerHelpers.getStoryRevision(),e=this.consumerBiLoggerHelpers.getStructureId(),f=this.consumerBiLoggerHelpers.getIndustryId(),g=this.consumerBiLoggerHelpers.getEsi(),h=this.consumerBiLoggerHelpers.getAdiBuilderType();return this.mainHelper.validateString(b),this.mainHelper.validateGuid(c),this.mainHelper.validateNumber(d),this.mainHelper.validateString(e),this.mainHelper.validateString(f),this.mainHelper.validateGuid(g),this.mainHelper.validateString(a),this.mainHelper.validateString(h),this.mainHelper.log({src:66,evid:54,instanceId:b,msid:c,revision:d,structureId:e,industryId:f,esi:g,name:a,adiBuilderType:h})}catch(i){this.mainHelper.onError("BISafe: failed to report tour.skipTour",i.stack)}},a.prototype.closeAssistant=function(){try{var a=this.consumerBiLoggerHelpers.getInstanceId(),b=this.consumerBiLoggerHelpers.getMetaSiteId(),c=this.consumerBiLoggerHelpers.getStoryRevision(),d=this.consumerBiLoggerHelpers.getStructureId(),e=this.consumerBiLoggerHelpers.getIndustryId(),f=this.consumerBiLoggerHelpers.getEsi(),g=this.consumerBiLoggerHelpers.getAdiBuilderType();return this.mainHelper.validateString(a),this.mainHelper.validateGuid(b),this.mainHelper.validateNumber(c),this.mainHelper.validateString(d),this.mainHelper.validateString(e),this.mainHelper.validateGuid(f),this.mainHelper.validateString(g),this.mainHelper.log({src:66,evid:55,instanceId:a,msid:b,revision:c,structureId:d,industryId:e,esi:f,adiBuilderType:g})}catch(h){this.mainHelper.onError("BISafe: failed to report tour.closeAssistant",h.stack)}},a.prototype.quitTour=function(a){try{var b=this.consumerBiLoggerHelpers.getInstanceId(),c=this.consumerBiLoggerHelpers.getMetaSiteId(),d=this.consumerBiLoggerHelpers.getStoryRevision(),e=this.consumerBiLoggerHelpers.getStructureId(),f=this.consumerBiLoggerHelpers.getIndustryId(),g=this.consumerBiLoggerHelpers.getEsi(),h=this.consumerBiLoggerHelpers.getEditMode(),i=this.consumerBiLoggerHelpers.getAdiBuilderType();return this.mainHelper.validateString(b),this.mainHelper.validateGuid(c),this.mainHelper.validateNumber(d),this.mainHelper.validateString(e),this.mainHelper.validateString(f),this.mainHelper.validateGuid(g),this.mainHelper.validateString(h),this.mainHelper.validateString(a),this.mainHelper.validateString(i),this.mainHelper.log({src:66,evid:56,instanceId:b,msid:c,revision:d,structureId:e,industryId:f,esi:g,editMode:h,name:a,adiBuilderType:i})}catch(j){this.mainHelper.onError("BISafe: failed to report tour.quitTour",j.stack)}},a.prototype.firstStepSelectionForMeOrShowMe=function(a,b){try{var c=this.consumerBiLoggerHelpers.getInstanceId(),d=this.consumerBiLoggerHelpers.getMetaSiteId(),e=this.consumerBiLoggerHelpers.getStoryRevision(),f=this.consumerBiLoggerHelpers.getStructureId(),g=this.consumerBiLoggerHelpers.getIndustryId(),h=this.consumerBiLoggerHelpers.getEsi(),i=this.consumerBiLoggerHelpers.getEditMode(),j=this.consumerBiLoggerHelpers.getAdiBuilderType();return this.mainHelper.validateString(c),this.mainHelper.validateGuid(d),this.mainHelper.validateNumber(e),this.mainHelper.validateString(f),this.mainHelper.validateString(g),this.mainHelper.validateGuid(h),this.mainHelper.validateString(i),this.mainHelper.validateString(a),this.mainHelper.validateString(b),this.mainHelper.validateString(j),this.mainHelper.log({src:66,evid:57,instanceId:c,msid:d,revision:e,structureId:f,industryId:g,esi:h,editMode:i,button:a,name:b,adiBuilderType:j})}catch(k){this.mainHelper.onError("BISafe: failed to report tour.firstStepSelectionForMeOrShowMe",k.stack)}},a.prototype.lastStepSelectionKeepOrTryAnother=function(a,b){try{var c=this.consumerBiLoggerHelpers.getInstanceId(),d=this.consumerBiLoggerHelpers.getMetaSiteId(),e=this.consumerBiLoggerHelpers.getStoryRevision(),f=this.consumerBiLoggerHelpers.getStructureId(),g=this.consumerBiLoggerHelpers.getIndustryId(),h=this.consumerBiLoggerHelpers.getEsi(),i=this.consumerBiLoggerHelpers.getEditMode(),j=this.consumerBiLoggerHelpers.getAdiBuilderType();return this.mainHelper.validateString(c),this.mainHelper.validateGuid(d),this.mainHelper.validateNumber(e),this.mainHelper.validateString(f),this.mainHelper.validateString(g),this.mainHelper.validateGuid(h),this.mainHelper.validateString(i),this.mainHelper.validateString(a),this.mainHelper.validateString(b),this.mainHelper.validateString(j),this.mainHelper.log({src:66,evid:58,instanceId:c,msid:d,revision:e,structureId:f,industryId:g,esi:h,editMode:i,button:a,name:b,adiBuilderType:j})}catch(k){this.mainHelper.onError("BISafe: failed to report tour.lastStepSelectionKeepOrTryAnother",k.stack)}},a.prototype.timeout=function(a,b,c){try{var d=this.consumerBiLoggerHelpers.getLastPhase(),e=this.consumerBiLoggerHelpers.getEditMode(),f=this.consumerBiLoggerHelpers.getEsi(),g=this.consumerBiLoggerHelpers.getIndustryId(),h=this.consumerBiLoggerHelpers.getInstanceId(),i=this.consumerBiLoggerHelpers.getMetaSiteId(),j=this.consumerBiLoggerHelpers.getStoryRevision(),k=this.consumerBiLoggerHelpers.getStructureId(),l=this.consumerBiLoggerHelpers.getAdiBuilderType();return this.mainHelper.validateNumber(d),this.mainHelper.validateNumber(a),this.mainHelper.validateString(b),this.mainHelper.validateString(e),this.mainHelper.validateGuid(f),this.mainHelper.validateString(g),this.mainHelper.validateString(h),this.mainHelper.validateGuid(i),this.mainHelper.validateString(c),this.mainHelper.validateNumber(j),this.mainHelper.validateString(k),this.mainHelper.validateString(l),this.mainHelper.log({src:66,evid:59,lastPhase:d,secondsSinceLastPhase:a,button:b,editMode:e,esi:f,industryId:g,instanceId:h,msid:i,name:c,revision:j,structureId:k,adiBuilderType:l})}catch(m){this.mainHelper.onError("BISafe: failed to report tour.timeout",m.stack)}},a}(),ConsumerBiLogger=function(){function a(a,b,c){var d=this,e=function(a,c){b.production||console.log("bi error",a,c)},f={validateNumber:function(a){null===a||isFinite(a)||e("invalid number",a)},validateString:function(a){null!==a&&"string"!=typeof a&&e("Invalid string",a)},validateGuid:function(a){null===a||"string"==typeof a&&/^[a-f0-9]{8}-[a-f0-9]{4}-[a-f0-9]{4}-[a-f0-9]{4}-[a-f0-9]{12}$/.test(a.toLowerCase())||e("Invalid guid",a)},onError:e,_log:_.noop,log:function(b){var d=a.getOwnerId();d&&(b.ownerId=d);var e=a.getUserRoles();e&&(b.roles=e);var f=_.pick(b,function(a){return null!==a});return c.log(f)}},g=!1;this.pauseBI=function(){g||(f._log=f.log,f.log=_.noop,g=!0)},this.restoreBI=function(){f._log&&g&&(f.log=f._log,g=!1)},this.apps=new AppsConsumerBiLogger(a,b,f),this.automation=new AutomationConsumerBiLogger(a,b,f),this.builder=new BuilderConsumerBiLogger(a,b,f),this.contentEditor=new ContentEditorConsumerBiLogger(a,b,f),this.dialogs=new DialogsConsumerBiLogger(a,b,f),this.intro=new IntroConsumerBiLogger(a,b,f),this.pagesManager=new PagesManagerConsumerBiLogger(a,b,f),this.provisioning=new ProvisioningConsumerBiLogger(a,b,f),this.sectionDesign=new SectionDesignConsumerBiLogger(a,b,f),this.sectionManagement=new SectionManagementConsumerBiLogger(a,b,f),this.siteDesign=new SiteDesignConsumerBiLogger(a,b,f),this.tips=new TipsConsumerBiLogger(a,b,f),this.tour=new TourConsumerBiLogger(a,b,f),this.warn=function(a,b){return d.errorEvent(a,b,20)},this.err=function(a,b){return d.errorEvent(a,b,30)},this.fatal=function(a,b){return d.errorEvent(a,b,40)},this.errorEvent=function(b,d,e){return d=d&&d.substr(0,1600),c.log({adapter:"trg",src:66,evid:10,cat:1,iss:1,sev:e,errc:b,dsc:d,ver:a.getVersion(),did:a.getStoryId(),msid:a.getMetaSiteId()})}}return a.$inject=["consumerBiLoggerHelpers","clientTopology","wixBiLogger"],a}();angular.module("siteGeneratorCommon").service("consumerBiLogger",ConsumerBiLogger);var MiscUtils=function(){function a(a){this.$translate=a}return a.$inject=["$translate"],a.prototype.translateIfPossible=function(a){var b=this.$translate(a);return b===a?"":b},a.prototype.shuffleArray=function(a){Math.seedrandom(Date.now());for(var b=a.length-1;b>0;b--){var c=Math.floor(Math.random()*(b+1)),d=a[b];a[b]=a[c],a[c]=d}return a},a}();angular.module("siteGeneratorStaticsConsumerAppInternal").service("miscUtils",MiscUtils);var DomHelpers=function(){function a(){}return a.prototype.scrollInsideContainer=function(a,b,c){a.animate({scrollTop:b},c)},a}();angular.module("siteGeneratorStaticsConsumerAppInternal").service("domHelpers",DomHelpers),angular.module("siteGeneratorStaticsConsumerAppInternal").factory("BackendStoryLocale",function(){return{build:function(a){return a}}});var BackendStory=function(){function a(a,b,c,d,e,f){this.consumerBiLogger=a,this.flags=b,this.storyManager=c,this.previewService=d,this.introManager=e,this.dbStory=f,this.saving=null,this.publishing=null,this.markingAsMajor=null,this.owner={},this.selectedStyle={},this.selectedPage="",this.bft="{}"}return a.prototype.fromDbStory=function(){var b={revision:this.dbStory.revision,id:a.calcId(this.dbStory)},c={userRoles:this.dbStory.userRoles?this.dbStory.userRoles.split(","):[],ownerId:this.dbStory.ownerId,isDraft:!!this.dbStory.isDraft};return _.extend(b,this.dbStory.blob,c),b},a.prototype.toDbStory=function(a){this.dbStory.blob=_.omit(a,"revision"),this.dbStory.revision=a.revision},a.prototype.saveStory=function(a,b,c){var d=this;if(this.saving)this.checkIfStoryIsHanging();else{this.latestSave=(new Date).getTime();var e=a.id?this.update(a):this.create(b,a,c);this.saving=e["catch"](function(a){return d.consumerBiLogger.err(BIErrorCodes.SaveStoryFailed,JSON.stringify(a))})["finally"](function(){c&&(a.isDraft=!0),d.saving=null})}return this.saving},a.prototype.markCreated=function(b){return this.storyManager.markCreated(this.dbStory,a.BLANK_TEMPLATE_META_SITE_ID,this.dbStory.siteId)},a.prototype.publishStory=function(a){var b=this;return this.publishing||(this.publishing=this.storyManager.publish(this.dbStory).then(function(b){return a.revision=b,a})["catch"](function(a){return b.consumerBiLogger.err(BIErrorCodes.PublishStoryFailed,JSON.stringify(a))})["finally"](function(){return b.publishing=null})),this.publishing},a.prototype.markStoryAsMajorRevision=function(a){var b=this;return this.markingAsMajor||(this.markingAsMajor=this.storyManager.markAsMajorRevision(this.dbStory).then(function(b){return a.revision=b,a})["catch"](function(a){return b.consumerBiLogger.err(BIErrorCodes.MarkMajorRevisionStoryFailed,JSON.stringify(a))})["finally"](function(){b.markingAsMajor=null})),this.markingAsMajor},a.prototype.update=function(a){var b=this;return this.toDbStory(a.getCurrentState(!0)),this.dbStory.htmlRevision=this.previewService.getHtmlRevision(),this.storyManager.update(this.dbStory).then(function(c){return b.dbStory=c,a.revision=c.revision,a})},Object.defineProperty(a.prototype,"websiteUrl",{get:function(){return this.introManager.data.contactDetails?this.introManager.data.contactDetails.website:""},enumerable:!0,configurable:!0}),a.prototype.create=function(b,c,d){var e=this;void 0===d&&(d=!1);var f={templateMetaSiteId:a.BLANK_TEMPLATE_META_SITE_ID,suggestedSiteName:b};return d&&(f.creationPhase="DuringIntro"),this.storyManager.create2(f).then(function(b){c.id=a.calcId(b),c.siteId=b.siteId,e.dbStory=b,c.revision=b.revision,c.flags=_.pick(_.omit(e.flags,_.functions(e.flags)),_.identity);var d=c.getCurrentState();return d.industryId=e.introManager.data.category.industryId,d.structureId=e.introManager.data.category.structureId,d.selectedOffers=e.introManager.data.serviceOffer,e.flags.introWebsiteAddressField&&(d.websiteUrl=e.websiteUrl),e.toDbStory(d),e.storyManager.update(e.dbStory).then(function(a){return c.revision=a.revision,e.dbStory=a,c.setState(e.fromDbStory(),!0),c})})},a.prototype.checkIfStoryIsHanging=function(){var a=(new Date).getTime()-this.latestSave;a>=6e4&&this.consumerBiLogger.warn(BIErrorCodes.SaveStoryHangs,"save story is hanging")},a}();BackendStory.BLANK_TEMPLATE_META_SITE_ID="bb80349d-97a4-48a5-b9f2-8ddc2463709a",angular.module("siteGeneratorStaticsConsumerAppInternal").factory("BackendStory",["consumerBiLogger","flags","$q","storyManager","storyServices","previewService","introManager","clientTopology","wixAngular","metaDataVersion","healthCheck",function(a,b,c,d,e,f,g,h,i,j,k){return BackendStory.build=function(){return new BackendStory(a,b,d,f,g)},BackendStory.find=function(c,e){return d.get(BackendStory.parseId(c),e).then(function(c){return k.validateAndFix(c),new BackendStory(a,b,d,f,g,c)})},BackendStory.parseId=function(a){var b=a.split(":");return{instanceId:b[0],metaSiteId:b[1]}},BackendStory.calcId=function(a){return a.storyId.instanceId+":"+a.storyId.metaSiteId},BackendStory.getContentVersion=function(){return h&&h.contentVersionNumber},BackendStory.getStaticsVersion=function(){return i.staticsUrl.split("/").splice(-2,1)[0]},BackendStory.getMetadataVersion=function(){return j},BackendStory}]);var MetaDataService=function(){function a(a,b,c,d){this.storyApi=a,this.$q=b,this.storyServices=c,this.BackendStory=d}return a.$inject=["storyApi","$q","storyServices","BackendStory"],a.prototype.getMetadata=function(a,b,c){var d=this;return this.storyMetadata&&!c?this.$q.when(this.storyMetadata):this.storyApi.metadata(this.BackendStory.parseId(a)).then(function(a){return d.storyMetadata=a,b&&b(a),d.storyServices.metaSiteId=a.htmlEditorUri.match(/metaSiteId=[^"]*/)[0].split("=")[1],d.storyServices.siteId=a.htmlEditorUri.match(/edit\/[^?]*/)[0].split("/")[1],a})},a}();angular.module("siteGeneratorStaticsConsumerAppInternal").service("metaDataService",MetaDataService),angular.module("siteGeneratorStaticsConsumerAppInternal").service("stories",["$q",function(a){return{loadStoryLocales:function(){return a.when()}}}]);var service;!function(a){var b=function(){function a(a,b,c,d,e,f,g,h,i,j){this.$timeout=a,this.$q=b,this.documentServicesMediator=c,this.obMonitoring=d,this.applicationState=e,this.notification=f,this.storyServices=g,this.spinnerService=h,this.consumerBiLogger=i,this.consumerDialogs=j,this.KNOWN_SERVER_ERRORS=[409],this.saveCount=0}return a.$inject=["$timeout","$q","documentServicesMediator","obMonitoring","applicationState","notification","storyServices","spinnerService","consumerBiLogger","consumerDialogs"],a.prototype.changePageCB=function(){},a.prototype.errorLoadingStory=function(a){if(!this.applicationState.isSilent()){var b=a&&403===a.status?"You do not have access to this site":"Cannot load this site";this.notification.show(b+", Redirecting..")}this.$timeout(function(){location&&(window.onbeforeunload=null,location.href=location.origin+location.pathname+"/?referral=invalid_story&vertical=invalid_story#!/intro")},3e3)},a.prototype.getMetaSiteDetails=function(){return this.$q.when()},a.prototype.customPromise=function(){return this.$q.when()},a.prototype.togglePreview=function(){return!1},a.prototype.saveStory=function(){var a=this,b=this.storyServices.story,c=b?b.save():this.$q.when(!1);return c.then(function(){return a.saveCount=0})["catch"](function(b){return a.onObError(b,"ob save")})},a.prototype.publishStory=function(){var a=this,b=this.storyServices.story,c=b?b.publish():this.$q.when(!1);return c["catch"](function(b){return a.onObError(b,"ob publish")})},a.prototype.onDsSaveStart=function(){this.consumerBiLogger.builder.autosaveStart(!0)},a.prototype.onObError=function(a,b){if(!a.handledEvent){var c=a.status;return this.KNOWN_SERVER_ERRORS.indexOf(c)<0&&(++this.saveCount>=2&&(a.handledEvent=!0,this.consumerDialogs.showDialog(ConsumerDialogTypes.SAVE_VALIDATION_ERROR_POPUP)),this.obMonitoring.error("ob save error: "+JSON.stringify(a))),this.$q.reject()}},a.prototype.onDsSaveError=function(a){if(!a.handledEvent){var b=this.documentServicesMediator.getDsSaveErros();if(a.document)switch(a.document.errorType){case b.DUPLICATE_COMPONENTS:case b.DATA_REFERENCE_MISMATCH:case b.MISSING_CONTAINERS:a.handledEvent=!0,this.spinnerService.forceStop(),this.consumerDialogs.showDialog(ConsumerDialogTypes.SAVE_VALIDATION_ERROR_POPUP);default:this.consumerBiLogger.err(BIErrorCodes.DSSaveFailed,"error during ds save: "+a.document.errorType)}else this.obMonitoring.error("ob save error: "+JSON.stringify(a))}},a}();angular.module("siteGeneratorStaticsConsumerAppInternal").factory("wizardCallbacksService",["$injector","$q","$timeout","storyServices","Story","notification","StoryLocale","modelTree","menuService","BackendStory","$state","applicationState","renderedModelApi","layoutSelectionStoreProvider","documentServicesMediator","consumerDialogs","spinnerService","flags","consumerBiLogger","richTextLinks",function(a,c,d,e,f,g,h,i,j,k,l,m,n,o,p,q,r,s,t,u){function v(a){return{undefined:a?_.omit(a.undefined,["metaSiteId","siteId"]):{}}}return _.extend(f,{create:function(){var a=f.build();return a.storyLocales={en:h.build()},a},find:function(a){return k.find(a,m.previewRevision()).then(function(a){var b=new f(a);return b.setState(a.fromDbStory(),!0),b})},getStoryDataByVersion:function(a,b){return k.find(a,b).then(function(a){return a.fromDbStory()})}}),f.prototype.save=function(a,b){return void 0===b&&(b=!1),this.sourceObject.saveStory(this,a,b)},f.prototype.markAsMajorRevision=function(){return this.sourceObject.markStoryAsMajorRevision(this)},f.prototype.markCreated=function(){return this.sourceObject.markCreated(this)},f.prototype.publish=function(){return this.sourceObject.publishStory(this)},f.prototype.getActiveLocale=function(){var a=this.storyLocales[this.activeLocale];return e.metaSiteId&&e.siteId&&(a.savedSites=a.savedSites||{undefined:{}},a.savedSites.undefined.metaSiteId=e.metaSiteId,a.savedSites.undefined.siteId=e.siteId),a},f.prototype.getCurrentState=function(a){void 0===a&&(a=!1);var b=this.getActiveLocale(),c={description:this.description,selectedPage:this.selectedPage,name:this.name,selectedStyle:this.selectedStyle,contentElements:this.contentElements,activeLocale:this.activeLocale,archived:this.archived,industryId:this.industryId,structureId:this.structureId,selectedOffers:this.selectedOffers,contentVersion:k.getContentVersion(),staticsVersion:k.getStaticsVersion(),metadataVersion:k.getMetadataVersion(),privateMediaFolderId:this.privateMediaFolderId||"",coloration:this.coloration,revision:this.revision,flags:this.flags,locale:{savedSites:v(b.savedSites),contentElements:b.contentElements,layoutSelections:o.getLayoutSelectionStore().serialize(!1,!0),styles:b.styles},userRoles:this.userRoles,ownerId:this.ownerId};return a&&s.saveRenderedModel&&(c.locale.renderedModel=n.getToSave()),c.popupConfigurations=this.popupConfigurations,this.flags.introWebsiteAddressField&&(c.websiteUrl=this.websiteUrl||""),s.storeTourStateInStory&&(c.tourState=this.tourState||{}),i.data&&(c.mainMenu=j.serialize(),c.bft=i.serialize(!0),c.richTextLinks=u.getData()),ob.deepClone(c)},f.prototype.setState=function(a,b){if(_.extend(this,a),a.locale){var c=_.isString(a.locale)?JSON.parse(a.locale):ob.deepClone(a.locale);this.storyLocales[this.activeLocale]=c,this.selectedStyle=_.isString(a.selectedStyle)?JSON.parse(a.selectedStyle):ob.deepClone(a.selectedStyle),a.contentElements=a.contentElements||{},a.flags=a.flags||{},this.contentElements=_.isString(a.contentElements)?JSON.parse(a.contentElements):ob.deepClone(a.contentElements),b||(j.deserialize(a.mainMenu),this.bft=i.deserialize(a.bft),o.getLayoutSelectionStore().deserialize(c.layoutSelections)),b&&s.saveRenderedModel&&a.locale.renderedModel&&n.loadSaved(a.locale.renderedModel)}},a.instantiate(b)}])}(service||(service={}));var UserService=function(){function a(a,b){this.$q=a,this.$http=b}return a.$inject=["$q","$http"],a.prototype.getCurrentUser=function(){return this.$q.when({})},a.prototype.hasUnattachedOwnedDomain=function(){var a=this;return this.$http.get("/premium-management/userHasUnattachedDomains").then(function(b){return 200===b.status?b.data:a.$q.reject(b)})},a}();angular.module("siteGeneratorStaticsConsumerAppInternal").service("userService",UserService),function(){function a(a,b,c,d,e,f){function g(a,b){return a?h(a,b):e.get(l+"LayoutElements/"+encodeURIComponent(b)+".raw.js",{cache:!0}).then(function(a){return a.data})}function h(c,e){var f=c.file(e);if(f){var g=(new Date).getTime(),h=f.asText(),i=(new Date).getTime()-g,j=JSON.parse(h),k=(new Date).getTime()-g-i;return d.debugMode&&b.info("extracted entry with key "+(e||"undefined")+" in zip (extraction: "+i+"ms, parse: "+k+"ms)"),a.resolve(j)}return d.debugMode&&b.info("found no entry with key "+(e||"undefined")+" in zip"),a.reject()}function i(b){var c=a.defer();return JSZipUtils.getBinaryContent(l+b+".zip.js",function(a,b){a?c.reject(a):c.resolve(new JSZip(b))}),c.promise}var j,k=new Set,l=f+"/resources/";this.init=function(a){return i("LayoutElements").then(function(a){j=a}),i("ContactProtoTypeLayoutElements").then(function(b){return h(b,"").then(a)})},this.prepareLEsForFetch=function(b,c,d){var e=b+"_"+c;return k.has(e)?a.when():g(j,e).then(d)["catch"](function(){return void 0})["finally"](function(){return k.add(e)})}}a.$inject=["$q","$log","wixAngularTopology","flags","$http","metaDataBaseUrl"],angular.module("siteGeneratorStaticsConsumerAppInternal").service("layoutElementsFetcher",a)}();var ConsumerDialogTypes;!function(a){a[a.SHOW_POPUP_EVENT=0]="SHOW_POPUP_EVENT",a[a.TIME_TO_PUBLISH_POPUP=1]="TIME_TO_PUBLISH_POPUP",a[a.SESSION_EXPIRED_POPUP=2]="SESSION_EXPIRED_POPUP",a[a.STORY_CONFLICTING_CHANGES_POPUP=3]="STORY_CONFLICTING_CHANGES_POPUP",a[a.SITE_NOT_MANAGED_BY_OB_POPUP=4]="SITE_NOT_MANAGED_BY_OB_POPUP",a[a.STORY_ARCHIVED_POPUP=5]="STORY_ARCHIVED_POPUP",a[a.PUBLISH_FAILED_POPUP=6]="PUBLISH_FAILED_POPUP",a[a.CANT_REMOVE_HEADER_POPUP=7]="CANT_REMOVE_HEADER_POPUP",a[a.CANT_REMOVE_FOOTER_POPUP=8]="CANT_REMOVE_FOOTER_POPUP",a[a.AUTOSAVE_POPUP=9]="AUTOSAVE_POPUP",a[a.SAVE_VALIDATION_ERROR_POPUP=10]="SAVE_VALIDATION_ERROR_POPUP",a[a.DS_SAVE_PUBLISH_DISABLED_ON_SERVER_POPUP=11]="DS_SAVE_PUBLISH_DISABLED_ON_SERVER_POPUP",a[a.PALETTE_COLOR_DIALOG_POPUP=12]="PALETTE_COLOR_DIALOG_POPUP",a[a.BACKGROUND_IMAGE_SETTINGS=13]="BACKGROUND_IMAGE_SETTINGS",a[a.BACKGROUND_VIDEO_SETTINGS=14]="BACKGROUND_VIDEO_SETTINGS",a[a.BACKGROUND_GALLERY_SETTINGS=15]="BACKGROUND_GALLERY_SETTINGS",a[a.NEW_USER_FIRST_TIME_MOBILE_EDITOR_POPUP=16]="NEW_USER_FIRST_TIME_MOBILE_EDITOR_POPUP",a[a.EXISTING_USER_FIRST_TIME_MOBILE_EDITOR_POPUP=17]="EXISTING_USER_FIRST_TIME_MOBILE_EDITOR_POPUP"}(ConsumerDialogTypes||(ConsumerDialogTypes={}));var ConsumerDialogs=function(){function a(a,b,c,d,e,f){var g=this;this.$rootScope=a,this.$window=b,this.$translate=c,this.applicationState=d,this.consumerBiLogger=e,this.CcDialogBuilder=f,this.popups={},this.firstTimeInMobileBiEvents={onNextClick:function(a){g.consumerBiLogger.dialogs.approveChanges(null,null,null,a,null,null)},onShow:function(a){g.consumerBiLogger.dialogs.show(null,null,null,a,null,null)},onHide:function(){g.consumerBiLogger.dialogs.approveChanges(null,null,null,CONSUMER_DIALOGS.AFFECTS_ONLY_MOBILE_EDITOR,null,null)},onCancel:function(a,b){g.consumerBiLogger.dialogs.cancel(null,null,null,a?CONSUMER_DIALOGS.AFFECTS_ONLY_MOBILE_EDITOR:b,null,null)}};var h=this.popups;a.$on(ConsumerDialogTypes[ConsumerDialogTypes.SHOW_POPUP_EVENT],function(a,b){return g.showDialog(b)}),h[ConsumerDialogTypes.TIME_TO_PUBLISH_POPUP]=function(){return f.showFirstTimeNotice({heading:c("popups.time-to-publish.heading"),text:c("popups.time-to-publish.text"),acceptButtonText:c("general.got-it"),icon:"time-to-publish.gif",hideFirstTimeCheckBox:!0,biDialogName:CONSUMER_DIALOGS.TIME_TO_PUBLISH})},h[ConsumerDialogTypes.PALETTE_COLOR_DIALOG_POPUP]=function(a,b,c){var d={color:"#000000",colorType:coloration.ePaletteColorPickerStates.mainColor,state:ePaletteColorDialogStates.NORMAL,layout:"top bottom",onColorSelected:angular.noop},e=angular.extend(d,c);return f.show({parent:"body",templateUrl:"views/design/palette-color-dialog.html",controllerAs:"$ctrl",controller:PaletteColorDialog,clickOutsideToClose:!0,onShowing:function(b,c){a&&a(e.$event,b,c)},onRemoving:function(a,c){b&&b(a,c)},locals:e,biDialogName:CONSUMER_DIALOGS.PALETTE_COLOR})},h[ConsumerDialogTypes.SESSION_EXPIRED_POPUP]=function(){var a="https://users.wix.com/signin?loginDialogContext=login&referralInfo=ONBOARDING&postLogin=https://www.wix.com/my-account/sites/";return f.showNegativeConfirmation({text:c("error.session-expired.text"),acceptButtonText:c("error.session-expired.ok-button"),biDialogName:CONSUMER_DIALOGS.SESSION_EXPIRED,icon:"fail.gif"}).then(function(){return b.open(a,"_blank")})},h[ConsumerDialogTypes.STORY_CONFLICTING_CHANGES_POPUP]=function(){return f.showPositiveConfirmation({text:c("error.conflicting-changes.text"),acceptButtonText:c("error.conflicting-changes.ok-button"),icon:"reload.gif",biDialogName:CONSUMER_DIALOGS.CONFLICTING_CHANGES,noClose:!0}).then(function(){return b.location.reload()})},h[ConsumerDialogTypes.SITE_NOT_MANAGED_BY_OB_POPUP]=function(){return f.showPositiveConfirmation({heading:c("error.site-not-managed-by-ob.heading"),text:c("error.site-not-managed-by-ob.text"),acceptButtonText:c("error.site-not-managed-by-ob.ok-button"),icon:"wrong-way.gif",noClose:!0,biDialogName:CONSUMER_DIALOGS.SITE_NOT_MANAGED_BY_OB}).then(function(){var a=d.getStoryMetadata(),c=a&&a.htmlEditorUri;c&&(b.location.href=c)})},h[ConsumerDialogTypes.STORY_ARCHIVED_POPUP]=function(){return f.showPositiveConfirmation({text:c("error.story-archived.text"),acceptButtonText:"",icon:"fail.gif",noClose:!0,biDialogName:CONSUMER_DIALOGS.STORY_ARCHIVED}).then(function(){return b.location.href=PublishDialog.MyAccountPrefix})},h[ConsumerDialogTypes.PUBLISH_FAILED_POPUP]=function(){return f.showNegativeConfirmation({heading:g.$translate("popups.publish-failed.heading"),text:g.$translate("popups.publish-failed.text"),acceptButtonText:g.$translate("popups.publish-failed.accept"),rejectButtonText:g.$translate("general.cancel"),icon:"fail.gif",biDialogName:CONSUMER_DIALOGS.PUBLISH_FAILED})},h[ConsumerDialogTypes.CANT_REMOVE_HEADER_POPUP]=function(){return f.showPositiveConfirmation({heading:c("popups.cant-delete-header.heading"),text:c("popups.cant-delete-header.text"),acceptButtonText:c("general.got-it"),icon:"fail.gif",biDialogName:CONSUMER_DIALOGS.FIELD_VISIBILITY_SHOW_HIDE})},h[ConsumerDialogTypes.CANT_REMOVE_FOOTER_POPUP]=function(){return f.showPositiveConfirmation({heading:c("popups.cant-delete-footer.heading"),text:c("popups.cant-delete-footer.text"),acceptButtonText:c("general.got-it"),icon:"fail.gif",biDialogName:CONSUMER_DIALOGS.FIELD_VISIBILITY_SHOW_HIDE})},h[ConsumerDialogTypes.AUTOSAVE_POPUP]=function(){return f.showPositiveConfirmation({heading:c("popups.autosave.heading"),text:c("popups.autosave.text"),acceptButtonText:c("general.got-it"),icon:"autosave.gif",biDialogName:CONSUMER_DIALOGS.AUTOSAVE})},h[ConsumerDialogTypes.SAVE_VALIDATION_ERROR_POPUP]=function(){return f.showPositiveConfirmation({text:c("error.save-failure.text"),acceptButtonText:c("error.save-failure.ok-button"),icon:"reload.gif",biDialogName:CONSUMER_DIALOGS.SAVE_VALIDATION_ERROR,noClose:!0}).then(function(){g.$window.onbeforeunload=null,b.location.reload()})},h[ConsumerDialogTypes.DS_SAVE_PUBLISH_DISABLED_ON_SERVER_POPUP]=function(){return f.showPositiveConfirmation({text:c("error.publish-disabled-on-server.text"),acceptButtonText:c("error.publish-disabled-on-server.ok-button"),icon:"fail.gif",biDialogName:CONSUMER_DIALOGS.DS_SAVE_PUBLISH_DISABLED_ON_SERVER,noClose:!0})},h[ConsumerDialogTypes.NEW_USER_FIRST_TIME_MOBILE_EDITOR_POPUP]=function(){
return f.showMultiPagePopup({heading:c("popups.welcome-to-mobile-editor-new.heading"),headingNext:c("popups.welcome-to-mobile-editor-new.heading-next"),text:c("popups.welcome-to-mobile-editor-new.text"),textNext:c("popups.welcome-to-mobile-editor-new.text-next"),nextButtonText:c("intro.next-button"),cancelButtonText:c("general.cancel"),gotItButtonText:c("general.got-it"),icon:"EditMobileFirstTime.svg",iconNext:"EditMobileFirstTime2.svg",customBi:!0,showCancelButton:!1,biEvents:g.firstTimeInMobileBiEvents,dialogName:CONSUMER_DIALOGS.WELCOME_TO_MOBILE_EDITOR_NEW})},h[ConsumerDialogTypes.EXISTING_USER_FIRST_TIME_MOBILE_EDITOR_POPUP]=function(){return f.showMultiPagePopup({heading:c("popups.welcome-to-mobile-editor-existing.heading"),headingNext:c("popups.welcome-to-mobile-editor-existing.heading-next"),text:c("popups.welcome-to-mobile-editor-existing.text"),textNext:c("popups.welcome-to-mobile-editor-existing.text-next"),nextButtonText:c("intro.next-button"),cancelButtonText:c("general.cancel"),gotItButtonText:c("general.got-it"),icon:"EditMobileFirstTime.svg",iconNext:"EditMobileFirstTime2.svg",customBi:!0,showCancelButton:!0,biEvents:g.firstTimeInMobileBiEvents,dialogName:CONSUMER_DIALOGS.WELCOME_TO_MOBILE_EDITOR_EXISTING})}}return a.$inject=["$rootScope","$window","$translate","applicationState","consumerBiLogger","CcDialogBuilder"],a.prototype.showDialog=function(a){for(var b=[],c=1;c<arguments.length;c++)b[c-1]=arguments[c];var d=this.popups[a];if(!d)throw new Error("Couldn't launch popup: Popup doesn't exist");return d.apply(void 0,b)},a}();angular.module("siteGeneratorStaticsConsumerAppInternal").service("consumerDialogs",ConsumerDialogs);var FeatureDetector=function(){function a(a,b,c){this.mediaOverride=a,this.applicationParameters=b,this.PresetMediaType=c}return a.prototype._getNumberOfColumns=function(a){return a&&a[0]&&a[0].length},a.prototype.getMediaType=function(b){if(this.hasMedia(b)){var c=this.getMediaPreferredOverride(b),d=this.getMediaTypeOverride(b);return c?this.isImageGallery(c.name)?a.MediaTypes.gallery:c.name===a.MediaTypes.video?a.MediaTypes.extVideo:"Strip Video"===c.name?a.MediaTypes.video:d===this.PresetMediaType.SHAPE?a.MediaTypes.shape:a.MediaTypes.image:d===this.PresetMediaType.SHAPE?a.MediaTypes.shape:a.MediaTypes.image}},a.prototype._getMediaWidth=function(a){var b=a.match(/m(\d{1,2})/),c=b[1];return c?this.applicationParameters.getPixelsFromGridUnits(c):void 0},a.prototype._getTextPositions=function(a,b,c,d,e){var f=[];return a>-1&&c>-1&&(a>c?f.push("below"):c>a&&f.push("above"),d>b?f.push("left"):b>d&&f.push("right")),e&&e.length>0&&f.push("on"),f},a.prototype._getMediaPositions=function(a,b,c,d){var e=[];return a>-1&&(c>a?e.push("below"):a>c&&e.push("above"),b>d?e.push("left"):d>b&&e.push("right")),e},a.prototype.isImageGallery=function(a){return-1!==this.mediaOverride.imageGalleriesTypes.indexOf(a)},a}();FeatureDetector.MediaTypes={extVideo:"extVideo",image:"image",gallery:"gallery",shape:"shape",video:"video",pattern:"pattern"};var __extends=this&&this.__extends||function(){var a=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(a,b){a.__proto__=b}||function(a,b){for(var c in b)b.hasOwnProperty(c)&&(a[c]=b[c])};return function(b,c){function d(){this.constructor=b}a(b,c),b.prototype=null===c?Object.create(c):(d.prototype=c.prototype,new d)}}(),__assign=this&&this.__assign||Object.assign||function(a){for(var b,c=1,d=arguments.length;d>c;c++){b=arguments[c];for(var e in b)Object.prototype.hasOwnProperty.call(b,e)&&(a[e]=b[e])}return a},PresetFeatureDetector=function(a){function b(b,c,d,e,f,g){var h=a.call(this,b,d,e)||this;return h.clusters=c,h.LayoutUtils=f,h.BoxDecorationTypes=g,h.stripGalleriesTypes=["Strip Image","Strip Slideshow","Strip Showcase","Fullwidth Collage","Strip Video"],h.shortSubtypeToLongForm={t:"title",s:"subTitle",lt:"longText",b:"button",m:"media"},h.DEFAULT_TEXT_ALIGNMENT="left",h}return __extends(b,a),b.$inject=["mediaOverride","clusters","applicationParameters","PresetMediaType","LayoutUtils","BoxDecorationTypes"],b.prototype.enhanceWithRealStructure=function(a,b,c){void 0===c&&(c=this.getNode(a));var d=this.calculateRealStructures(b,c),e=d.structure,f=d.onMediaStructure,g=d.cluster;return __assign({},a,{realStructure:e,realOnMediaStructure:f,cluster:g})},b.prototype.getNumberOfColumns=function(b){return a.prototype._getNumberOfColumns.call(this,this.getLE(b).structure)},b.prototype.getColumns=function(a){var b=this.getLG(a);return b.columns&&b.columns.singleColumnProps},b.prototype.getMediaWidth=function(b){if(!(!this.hasMedia(b)||this.isList(b)&&this.isHeaderHidden(b))){if(this.hasSectionBackgroundImage(b))return 940;var c=a.prototype._getMediaWidth.call(this,this.getLE(b).leId),d=this.getVariations(b).media,e=d&&d.squareImage;return e?d.size*c:c}},b.prototype.getMediaPosition=function(a){if(!this.hasMedia(a)||!this.hasText(a)||this.hasSectionBackgroundImage(a))return[];var b=this.getFirstCoordinateOfElement(this.getStructure(a),"text"),c=b.rowIndex,d=b.columnIndex,e=this.getFirstCoordinateOfElement(this.getStructure(a),"media"),f=e.rowIndex,g=e.columnIndex;return this._getMediaPositions(c,d,f,g)},b.prototype.getTextPosition=function(a){if(!this.hasMedia(a)||!this.hasText(a))return[];if(this.hasSectionBackgroundImage(a))return["on"];var b=this.getFirstCoordinateOfElement(this.getStructure(a),"text"),c=b.rowIndex,d=b.columnIndex,e=this.getFirstCoordinateOfElement(this.getStructure(a),"media"),f=e.rowIndex,g=e.columnIndex;return this._getTextPositions(c,d,f,g,a.realOnMediaStructure)},b.prototype.hasMedia=function(a){if(this.hasSectionBackgroundImage(a)||this.isList(a)&&this.isHeaderHidden(a))return!0;var b=this.getFirstCoordinateOfElement(this.getStructure(a),"media"),c=b.rowIndex,d=b.columnIndex;return c>-1&&d>-1},b.prototype.hasText=function(a){var b=this.getFirstCoordinateOfElement(this.getStructure(a),"text"),c=b.rowIndex,d=b.columnIndex;return c>-1&&d>-1||!!a.realOnMediaStructure},b.prototype.isMediaStrip=function(a){if(!this.hasMedia(a)||this.isList(a)&&this.isHeaderHidden(a))return!1;if(this.hasSectionBackgroundImage(a))return!0;var b=this.getMediaPreferredOverride(a);if(b){var c=b.name;return this.stripGalleriesTypes.indexOf(c)>-1}return!1},b.prototype.isMediaStretched=function(a){if(!this.hasMedia(a)||this.hasSectionBackgroundImage(a)||this.isList(a)&&this.isHeaderHidden(a))return!1;var b=this.getVariations(a);return!(!b.media||!b.media.imageStretch||0===b.media.imageStretch.bottom&&0===b.media.imageStretch.top&&0===b.media.imageStretch.left&&0===b.media.imageStretch.right)},b.prototype.getHorizontalTextAlignment=function(a){var b=this.getVariations(a),c=this.getLE(a).argList,d=c.find(this.isTextArg),e=this.DEFAULT_TEXT_ALIGNMENT;if(this.hasBoxOnMedia(a)&&(e="center"),d)return _.get(b,[this.shortSubtypeToLongForm[d],"align"],e);var f=c.find(function(a){return"b"===a});return _.get(b,[this.shortSubtypeToLongForm[f],"hPosition"],e)},b.prototype.getMediaObjects=function(a){if(!this.hasMedia(a)&&!this.hasPattern(a))return[];if(this.hasSectionBackgroundImage(a))if(a.headerBg){if(!this.headerHasColorBG(a)&&!this.headerHasPatternBG(a))return"gallery"===a.headerBg.mediaType?a.headerBg.mediaItems:[a.headerBg]}else if(!this.hasColorBG(a)&&!this.hasPatternBG(a))return"gallery"===a.bg.mediaType?a.bg.mediaItems:[a.bg];var b,c=this.getMediaType(a),d=this.isList(a)?a.node.children.find(function(a){return!a.userHidden}):a.node,e=d.contentElement.valuesByMediaType;switch(c){case FeatureDetector.MediaTypes.image:case FeatureDetector.MediaTypes.video:case FeatureDetector.MediaTypes.extVideo:b=[e[c][0]];break;case FeatureDetector.MediaTypes.gallery:b=e.image;break;case FeatureDetector.MediaTypes.shape:var f=e.shape&&e.shape[0]||e.clipart&&e.clipart[0];b=[f];break;default:b=[]}return this.hasPattern(a)&&b.push(a.bg),b},b.prototype.getMediaUrls=function(a){return this.getMediaObjects(a).map(function(a){return a.videoUrl||a.relativeUri})},b.prototype.hasPatternBG=function(a){return this.headerHasPatternBG(a)||a.bg&&"pattern"===a.bg.mediaType},b.prototype.hasColorBG=function(a){return this.headerHasColorBG(a)||a.bg&&"color"===a.bg.mediaType},b.prototype.startsWithMedia=function(a){if(!this.hasMedia(a)||this.isList(a)&&this.isHeaderHidden(a))return!1;if(this.hasSectionBackgroundImage(a))return!0;var b=this.getFirstCoordinateOfElement(this.getStructure(a),"media").rowIndex;return 0===b},b.prototype.endsWithMedia=function(a){if(!this.hasMedia(a)||this.isList(a)&&this.isHeaderHidden(a))return!1;if(this.hasSectionBackgroundImage(a))return!0;var b=this.getLastCoordinateOfElement(a,"media").rowIndex;return b===this.getStructure(a).length-1},b.prototype.getTextWidth=function(a){for(var b=this.getStructure(a),c=0,d=b.length;d>c;c++){var e=b[c];if(e[0]===e[e.length-1]&&this.isTextOrButtonArg(e[0]))return"full"}return"part"},b.prototype.isList=function(a){return a.preset.data.isList},b.prototype.isListZigZag=function(a){return!!a.preset.data.zigZagState},b.prototype.getOrCreateMediaPreferredOverride=function(a,b){var c=this.getMediaPreferredOverride(a);if(c)return c;var d=this.getOverrides(a,"media");if(!d)return null;var e=this.getContentType(a);d[e]||(d[e]={});var f=d[e];f._preferred||(f._preferred={});var g=f._preferred;return g[0]||(g[0]=b),g[0]},b.prototype.getMediaPreferredOverride=function(a){var b=this.getOverrides(a,"media",this.getContentType(a));return b&&b._preferred&&b._preferred&&b._preferred[0]},b.prototype.hasBox=function(a){var b=this,c=this.getOverrides(a,"decorations",this.getContentType(a));if(!c)return!1;var d=Object.keys(this.BoxDecorationTypes).map(function(a){return b.BoxDecorationTypes[a]});return Object.keys(c).some(function(a){var b=parseInt(a,10);return isNaN(b)?!1:d.indexOf(b)>-1})},b.prototype.hasColumns=function(a){return!!this.getColumns(a)},b.prototype.isColumnBG=function(a){return this.hasColumns(a)&&this.getColumns(a).some(function(a){return!!a.backgroundMode})},b.prototype.hasPattern=function(a){return a.bg&&"pattern"===a.bg.mediaType},b.prototype.hasListHeader=function(a){return!this.isHeaderHidden(a)},b.prototype.hasBoxOnMedia=function(a){return a.realOnMediaStructure&&!!a.realOnMediaStructure.length},b.prototype.isTextOrButtonArg=function(a){return this.isTextArg(a)||"b"===a},b.prototype.isTextArg=function(a){var b=["t","s","lt"];return b.indexOf(a)>-1},b.prototype.getFirstCoordinateOfElement=function(a,b){for(var c=0,d=a.length;d>c;c++)for(var e=0,f=a[c].length;f>e;e++){var g=a[c][e];if("text"===b&&this.isTextOrButtonArg(g)||"media"===b&&"m"===g)return{rowIndex:c,columnIndex:e}}return{rowIndex:-1,columnIndex:-1}},b.prototype.getLastCoordinateOfElement=function(a,b){for(var c=this.getStructure(a),d=c.length-1;d>=0;d--)for(var e=c[d].length-1;e>=0;e--){var f=c[d][e];if("text"===b&&this.isTextOrButtonArg(f)||"media"===b&&"m"===f)return{rowIndex:d,columnIndex:e}}return{rowIndex:-1,columnIndex:-1}},b.prototype.getOverrides=function(a,b,c){var d=this.getLE(a).selections,e=d&&d.overrides&&d.overrides[b];return c?e&&e[c]:e},b.prototype.getVariations=function(a){var b=this.getLE(a).cluster,c=this.getOverrides(a,"variations",this.getContentType(a));return c?c[b]:{}},b.prototype.getContentType=function(a){return this.getLG(a).isHeader?a.preset.data.contentType+"ListHeaderList":a.preset.data.contentType},b.prototype.getMediaTypeOverride=function(a){return this.getLE(a).mediaType},b.prototype.getLE=function(a){return this.getLG(a).layouts[0]},b.prototype.getLG=function(a){return a.preset.data.groups[0]},b.prototype.getNode=function(a){return this.isList(a)?a.node.children.find(function(a){return!a.userHidden}):a.node},b.prototype.calculateRealStructures=function(a,b){var c=this.LayoutUtils.transformStructureToStringArray(a,a.structure),d=this.LayoutUtils.transformStructureToStringArray(a,a.onMediaStructure),e=b.contentElement.calculateUnwantedArgs(),f=a.argsSignature.split("#"),g=f.filter(function(a){return e.find(function(b){return b===a})}),h=this.clusters.calculateFallBackClusterAndStructure(c,d,g),i=h.structure,j=h.onMediaStructure,k=h.cluster;return{structure:i,onMediaStructure:j,cluster:k}},b.prototype.getStructure=function(a){return a.realStructure},b.prototype.hasSectionBackgroundImage=function(a){return a.bg?["bgImage","video","gallery"].indexOf(a.bg.mediaType)>-1:!1},b.prototype.isHeaderHidden=function(a){return this.isList(a)&&a.node.children[0].userHidden},b.prototype.headerHasPatternBG=function(a){return a.headerBg&&"pattern"===a.headerBg.mediaType},b.prototype.headerHasColorBG=function(a){return a.headerBg&&"color"===a.headerBg.mediaType},b}(FeatureDetector);angular.module("siteGeneratorStaticsConsumerAppInternal").service("presetFeatureDetector",PresetFeatureDetector);var __extends=this&&this.__extends||function(){var a=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(a,b){a.__proto__=b}||function(a,b){for(var c in b)b.hasOwnProperty(c)&&(a[c]=b[c])};return function(b,c){function d(){this.constructor=b}a(b,c),b.prototype=null===c?Object.create(c):(d.prototype=c.prototype,new d)}}(),PresetListItemFeatureDetector=function(a){function b(b,c,d,e,f,g){return a.call(this,b,c,d,e,f,g)||this}return __extends(b,a),b.$inject=["mediaOverride","clusters","applicationParameters","PresetMediaType","LayoutUtils","BoxDecorationTypes"],b.prototype.getNumberOfListItems=function(a){return this.areListItemsInTheSameGroup(a)?this.getLG(a).layouts.length:a.preset.data.groups.filter(function(a){return!a.isHeader&&!a.isFooter}).length},b.prototype.enhanceListItemWithRealStructure=function(a){var b=this.getLG(a),c=this.getLE(a);Object.assign(b,this.enhanceWithRealStructure(b,c,this.getNode(a)))},b.prototype.getNumberOfItemsInRow=function(a){return a.preset.data.itemsInRow},b.prototype.getNode=function(a){return a.node.children.find(function(a){return!a.userHidden&&"ListHeader"!==a.contentElementType})},b.prototype.getContentType=function(a){return a.preset.data.contentType+"List"},b.prototype.getLG=function(a){return a.preset.data.groups.find(function(a){return!a.isHeader&&!a.isFooter})},b.prototype.areListItemsInTheSameGroup=function(a){return this.getLG(a).layouts.length>1},b.prototype.getStructure=function(a){return this.getLG(a).realStructure},b}(PresetFeatureDetector);angular.module("siteGeneratorStaticsConsumerAppInternal").service("presetListItemFeatureDetector",PresetListItemFeatureDetector);var __extends=this&&this.__extends||function(){var a=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(a,b){a.__proto__=b}||function(a,b){for(var c in b)b.hasOwnProperty(c)&&(a[c]=b[c])};return function(b,c){function d(){this.constructor=b}a(b,c),b.prototype=null===c?Object.create(c):(d.prototype=c.prototype,new d)}}(),__assign=this&&this.__assign||Object.assign||function(a){for(var b,c=1,d=arguments.length;d>c;c++){b=arguments[c];for(var e in b)Object.prototype.hasOwnProperty.call(b,e)&&(a[e]=b[e])}return a},SectionFeatureDetector=function(a){function b(b,c,d,e,f){var g=a.call(this,b,d,c)||this;return g.sectionBackgroundService=e,g.BoxDecorationTypes=f,g}return __extends(b,a),b.$inject=["mediaOverride","PresetMediaType","applicationParameters","sectionBackgroundService","BoxDecorationTypes"],b.prototype.getNumberOfColumns=function(b){return a.prototype._getNumberOfColumns.call(this,b.structure)},b.prototype.getColumns=function(a){return a.columns},b.prototype.getMediaPosition=function(a){if(!this.hasContentMedia(a)||this.hasSectionBackgroundImage(a)||!this.hasText(a))return[];if(this.hasColumns(a))return this.getMediaPositionForColumns(a);var b=this.getFirstCoordinateOfElement(a,"text"),c=b.rowIndex,d=b.columnIndex,e=this.getFirstCoordinateOfElement(a,"media"),f=e.rowIndex,g=e.columnIndex;return this._getMediaPositions(c,d,f,g)},b.prototype.getTextPosition=function(a){if(!this.hasMedia(a)||!this.hasText(a))return[];if(this.hasSectionBackgroundImage(a))return["on"];if(this.hasColumns(a))return this.getTextPositionForColumns(a);var b=this.getFirstCoordinateOfElement(a,"text"),c=b.rowIndex,d=b.columnIndex,e=this.getFirstCoordinateOfElement(a,"media"),f=e.rowIndex,g=e.columnIndex;return this._getTextPositions(c,d,f,g,a.onMediaStructure)},b.prototype.isMediaStrip=function(a){return this.hasContentMedia(a)&&this.mediaOverride.isStripType(a)||this.hasSectionBackgroundImage(a)},b.prototype.isMediaStretched=function(a){return this.hasContentMedia(a)&&!!a.getLayoutSelectionStore().getImageStretch(a.containingSegment,a)},b.prototype.getHorizontalTextAlignment=function(a){var b=this.getSectionVariations(a),c=a.argList.find(function(a){return"text"===a.type}),d="left";if(this.hasBoxOnMedia(a)&&(d="center"),c)return _.get(b,[c.subType,"align"],d);var e=a.argList.find(function(a){return"button"===a.type});return _.get(b,[e.subType,"hPosition"],d)},b.prototype.getMediaObjects=function(a){if(!this.hasMedia(a)&&!this.hasPattern(a))return[];var b=[];(this.hasSectionBackgroundImage(a)||this.hasPattern(a))&&(b=this.sectionBackgroundService.extractBackgroundData(a.containingSegment.node,null,a.containingLG).mediaItems);var c=this.getElementArgIndex(a,"media");if(c>-1){var d=_.find(a.containingSegment.node.contentElement.ceFields,function(a){return"media"===a.type});if(d){b.push(d.value[0]);var e=this.getMediaPreferredOverride(a);e&&this.isImageGallery(e.name)&&b.push.apply(b,d.value.slice(1).map(function(a){return __assign({},a,{mediaType:"gallery"})}))}}return b},b.prototype.getMediaUrls=function(a){return this.getMediaObjects(a).filter(function(a){return"pattern"!==a.mediaType}).map(function(a){return a.videoUrl||a.relativeUri})},b.prototype.getMediaWidth=function(a){if(this.hasMedia(a)){if(this.hasSectionBackgroundImage(a))return a.width;var b=a.getLayoutBySubType("image");return b?b.width:void 0}},b.prototype.startsWithMedia=function(a){if(this.hasSectionBackgroundImage(a))return!0;if(!this.hasMedia(a))return!1;if(this.hasColumns(a))return!!a.columns.filter(function(a){return a.hasMedia&&a.doesMediaFill}).length;if(1===a.structure[0].length){var b=a.structure[0][0];return"media"===a.argList[b].type}return!1},b.prototype.endsWithMedia=function(a){if(this.hasSectionBackgroundImage(a))return!0;if(!this.hasMedia(a))return!1;if(this.hasColumns(a))return!!a.columns.filter(function(a){return a.hasMedia&&a.doesMediaFill}).length;if(1===a.structure[0].length){var b=a.structure[a.structure.length-1][0];return"media"===a.argList[b].type}return!1},b.prototype.getTextWidth=function(a){for(var b=0,c=a.structure.length;c>b;b++){var d=a.structure[b],e=a.argList[d[0]].type;if(("text"===e||"button"===e)&&d[0]===d[d.length-1])return"full"}return"part"},b.prototype.hasMedia=function(a){return this.hasContentMedia(a)||this.hasSectionBackgroundImage(a)},b.prototype.hasText=function(a){return!!a.argList.find(function(a){return"text"===a.type||"button"===a.type})},b.prototype.isList=function(a){return a.isList},b.prototype.isListZigZag=function(a){return!!a.node.zigZagState},b.prototype.hasBox=function(a){var b=this,c=Object.keys(this.BoxDecorationTypes).map(function(a){return b.BoxDecorationTypes[a]});return a.boxTypes?a.boxTypes.some(function(a){return c.indexOf(a)>-1}):!1},b.prototype.hasColumns=function(a){return!!this.getColumns(a)},b.prototype.isColumnBG=function(a){return this.hasColumns(a)&&this.getColumns(a).some(function(a){return a.doesMediaFill})},b.prototype.hasPattern=function(a){var b=this.sectionBackgroundService.extractBackgroundData(a.containingSegment.node,null,a.containingLG);return b&&"pattern"===b.mediaType},b.prototype.hasListHeader=function(a){return this.isList(a)&&!!a.groups.find(function(a){return"ListHeader"===a.contentType})},b.prototype.hasBoxOnMedia=function(a){return a.onMediaStructure&&!!a.onMediaStructure.length},b.prototype.hasContentMedia=function(a){return this.getElementArgIndex(a,"media")>-1},b.prototype.getFirstCoordinateOfElement=function(a,b){var c=this.getElementArgIndex(a,b);"text"===b&&-1===c&&(c=this.getElementArgIndex(a,"button"));var d=this.findTypeInStructure(c,a.structure),e=d.rowIndex,f=d.columnIndex;return-1===e&&a.onMediaStructure?this.findTypeInStructure(c,a.onMediaStructure):{rowIndex:e,columnIndex:f}},b.prototype.findTypeInStructure=function(a,b){if(b)for(var c=0,d=b.length;d>c;c++)for(var e=0,f=b[c].length;f>e;e++)if(b[c][e]===a)return{rowIndex:c,columnIndex:e};return{rowIndex:-1,columnIndex:-1}},b.prototype.getMediaPreferredOverride=function(a){var b=this.getOverride(a,"media","_preferred");return b&&b[0]},b.prototype.getOverride=function(a,b,c){return a.getLayoutSelectionStore().getOverride(b,a.containingSegment,c)},b.prototype.getOverrides=function(a,b,c){a.getLayoutSelectionStore().getOverrideMap()[b][c]},b.prototype.getSectionVariations=function(a){var b=a.containingSegment.getTypeForLSSWithoutPartition(),c=a.containingLG.getLayoutSelectionStore();return _.get(c.variations,[b,a.cluster])},b.prototype.getElementArgIndex=function(a,b){return a.argList.findIndex(function(a){return a.type===b})},b.prototype.getMediaTypeOverride=function(a){return this.getOverrides(a,"media","allowedMediaOverrides")},b.prototype.getTextPositionForColumns=function(a){var b=this.getColumns(a),c=b.findIndex(function(a){return a.hasText}),d=b.findIndex(function(a){return a.hasMedia}),e=[];return c>-1&&d>-1&&(c>d?e.push("right"):e.push("left")),e},b.prototype.getMediaPositionForColumns=function(a){var b=this.getColumns(a),c=b.findIndex(function(a){return a.hasText}),d=b.findIndex(function(a){return a.hasMedia}),e=[];return c>-1&&d>-1&&(d>c?e.push("right"):e.push("left")),e},b.prototype.hasSectionBackgroundImage=function(a){return["bgImage","video","gallery"].indexOf(this.sectionBackgroundService.getBackground(a.containingSegment.node).mediaType)>-1},b}(FeatureDetector);angular.module("siteGeneratorStaticsConsumerAppInternal").service("sectionFeatureDetector",SectionFeatureDetector);var __extends=this&&this.__extends||function(){var a=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(a,b){a.__proto__=b}||function(a,b){for(var c in b)b.hasOwnProperty(c)&&(a[c]=b[c])};return function(b,c){function d(){this.constructor=b}a(b,c),b.prototype=null===c?Object.create(c):(d.prototype=c.prototype,new d)}}(),SectionListItemFeatureDetector=function(a){function b(b,c,d,e,f){return a.call(this,b,d,c,e,f)||this}return __extends(b,a),b.$inject=["mediaOverride","PresetMediaType","applicationParameters","sectionBackgroundService","BoxDecorationTypes"],b.prototype.enhanceListItemWithRealStructure=function(a){},b.prototype.getNumberOfItemsInRow=function(a){var b=this.getListItemGroups(a);return b[0].columns?b[0].columns.length:1},b.prototype.getNumberOfListItems=function(a){var b=this.getListItemGroups(a);return b[0].columns?b[0].columns.length:b.length},b.prototype.getListItemGroups=function(a){return a.groups.filter(function(a){return"ListHeader"!==a.contentType&&"ListFooter"!==a.contentType})},b}(SectionFeatureDetector);angular.module("siteGeneratorStaticsConsumerAppInternal").service("sectionListItemFeatureDetector",SectionListItemFeatureDetector);var __assign=this&&this.__assign||Object.assign||function(a){for(var b,c=1,d=arguments.length;d>c;c++){b=arguments[c];for(var e in b)Object.prototype.hasOwnProperty.call(b,e)&&(a[e]=b[e])}return a},__decorate=this&&this.__decorate||function(a,b,c,d){var e,f=arguments.length,g=3>f?b:null===d?d=Object.getOwnPropertyDescriptor(b,c):d;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)g=Reflect.decorate(a,b,c,d);else for(var h=a.length-1;h>=0;h--)(e=a[h])&&(g=(3>f?e(g):f>3?e(b,c,g):e(b,c))||g);return f>3&&g&&Object.defineProperty(b,c,g),g},MEMOIZE_IDENTIFIER={};angular.module("siteGeneratorStaticsConsumerAppInternal").factory("FeatureList",FeatureListFactory);var PrettyAlgoRuleEngine=function(){function a(){}return a.prototype.getScores=function(a,b,c){var d=this,e=a.filter(function(a){return d.isConditionMatching(a.name,a.conditionA,b)});return e.length?c.map(function(a){var c=e.filter(function(b){return d.isConditionMatching(b.name,b.conditionB,a)}).filter(function(c){return d.isCompareConditionMatching(c.compareFeaturesCondition,b,a)}),f=c.reduce(function(a,b){return a+b.score},0);return{rules:c,score:f}}):[]},a.prototype.isConditionMatching=function(a,b,c){var d=function(a){if(Array.isArray(c[a])){if(!c[a].some(function(c){return-1!==b[a].indexOf(c)}))return{value:!1}}else if(b.hasOwnProperty(a)&&b[a]!==c[a])return{value:!1}};for(var e in b){var f=d(e);if("object"==typeof f)return f.value}return!0},a.prototype.isCompareConditionMatching=function(a,b,c){return a?(console.log("same media","undefined"!=typeof a.sameMedia,a.sameMedia,b.isSameMedia(c)!==a.sameMedia),"undefined"!=typeof a.sameMedia&&b.isSameMedia(c)!==a.sameMedia?!1:"undefined"!=typeof a.sameTextAlignment&&b.isSameTextAlignment(c)!==a.sameTextAlignment?!1:!0):!0},a}();angular.module("siteGeneratorStaticsConsumerAppInternal").service("prettyAlgoRuleEngine",PrettyAlgoRuleEngine),angular.module("siteGeneratorStaticsConsumerAppInternal").constant("prettyAlgoRules",[{approved:!1,conditionA:{hasColumns:!0,hasMedia:!0,hasText:!0,mediaPosition:["left"],mediaWidth:620,numberOfColumns:2,textPosition:["right"],textWidth:"part"},conditionB:{hasColumns:!0,hasMedia:!0,hasText:!0,mediaPosition:["left"],mediaWidth:460,numberOfColumns:2},example:"http://prntscr.com/fqzxsr",label:"",name:"2:1 image left to text + 1:1 image left to text",owner:"yanayn",score:-2},{approved:!1,conditionA:{hasColumns:!0,hasMedia:!0,hasText:!0,mediaPosition:["left"],mediaWidth:620,numberOfColumns:2,textPosition:["right"],textWidth:"part"},conditionB:{hasMedia:!0,horizontalTextAlignment:"center",isCoastToCoast:!0},example:"http://prntscr.com/fqzzpi",label:"",name:"2:1 image left to text + c2c media below text aligned center",owner:"yanayn",score:2},{approved:!0,conditionA:{endsWithMedia:!0,hasMedia:!0,isCoastToCoast:!0,mediaPosition:["below"],textWidth:"full"},conditionB:{endsWithMedia:!1,hasBox:!0,hasMedia:!0,isCoastToCoast:!0,mediaPosition:["below"],textPosition:["above"],textWidth:"full"},example:"http://prntscr.com/fliobg",name:"Box between media Pretty",owner:"Yonatan",score:1},{approved:!1,conditionA:{hasMedia:!0,horizontalTextAlignment:"center",isCoastToCoast:!0,textPosition:["below"],textWidth:"full"},conditionB:{hasColumns:!1,hasMedia:!0,hasText:!0,horizontalTextAlignment:"center",isCoastToCoast:!1,mediaPosition:["above"],startsWithMedia:!0,textPosition:["below"],textWidth:"full"},example:"http://prntscr.com/fp8qzl",name:"Center text below C2C image + image above center text",owner:"shayca0",score:1},{approved:!0,conditionA:{hasBox:!1,hasColumns:!0,hasMedia:!0,isCoastToCoast:!1,mediaPosition:["right"],mediaType:["Image"],numberOfColumns:2,textPosition:["left"],textWidth:"part"},conditionB:{hasColumns:!1,hasMedia:!0,mediaPosition:["right"],mediaType:["Image"],textPosition:["left"],textWidth:"part"},example:"https://prnt.sc/fliodp",name:"Columns and non-Column same side",owner:"Yanay",score:-1},{approved:!0,conditionA:{hasBox:!1,hasColumns:!0,hasMedia:!0,mediaPosition:["right"],mediaType:["Image"],numberOfColumns:2,textPosition:["left"]},conditionB:{hasColumns:!0,hasMedia:!0,mediaPosition:["right"],mediaType:["Image"],numberOfColumns:2,textPosition:["left"]},example:"https://prnt.sc/fliodp",name:"Columns same side Ugly",owner:"Yanay",score:-1},{approved:!0,conditionA:{hasMedia:!0,isCoastToCoast:!0,textPosition:["on"],textWidth:"part"},conditionB:{hasMedia:!0,mediaPosition:["left"],textPosition:["right"],textWidth:"part"},example:"https://www.screencast.com/t/u5BvTblf",name:"Diagonal text pretty",owner:"Noa",score:1},{approved:!0,conditionA:{endsWithMedia:!1,hasMedia:!0,isCoastToCoast:!0,textPosition:["below"],textWidth:"full"},conditionB:{hasMedia:!0,textWidth:"part"},example:"https://prnt.sc/fmsyce",name:"Diagonal text pretty 2",owner:"Yonatan",score:1},{approved:!1,conditionA:{hasColumns:!0,hasText:!0,horizontalTextAlignment:"center",mediaPosition:["right"],numberOfColumns:2,textPosition:["left"],textWidth:"part"},conditionB:{hasColumns:!1,hasMedia:!0,hasText:!0,horizontalTextAlignment:"left",isCoastToCoast:!1,mediaPosition:["above"],textPosition:["below"],textWidth:"full"},example:"https://prnt.sc/flir04",name:"Left text column above image with left text",owner:"shayca0",score:1},{approved:!1,conditionA:{isList:!0,listItemTextPosition:["on"],listItemTextWidth:"part",numberOfListItemsInRow:3},conditionB:{hasMedia:!0,hasText:!0,horizontalTextAlignment:"center",isCoastToCoast:!1,mediaPosition:["above"],startsWithMedia:!0},example:"http://prntscr.com/fp9p6q",name:"List 3 columns + image above text centered",owner:"shayca0",score:1},{approved:!0,conditionA:{endsWithMedia:!1,hasText:!0,isList:!0,listItemTextPosition:["below"],numberOfListItemsInRow:3},conditionB:{hasMedia:!0,hasText:!0,mediaPosition:["above"],startsWithMedia:!0},example:"https://prnt.sc/flioo0",name:"List centered and a large image Pretty- should replace to same alignment",owner:"shayca0",score:1},{approved:!0,conditionA:{isList:!0,listItemHorizontalTextAlignment:"center",listItemTextPosition:["below"],numberOfListItemsInRow:3},conditionB:{hasMedia:!0,mediaType:["Gallery"],textPosition:["left"],textWidth:"part"},example:"https://prnt.sc/flixvs",name:"List centered and gallery Ugly",owner:"Inbal",score:-1},{approved:!0,conditionA:{isList:!0,listItemHorizontalTextAlignment:"center",listItemMediaPosition:["above"],listItemTextPosition:["below"],listItemTextWidth:"full",numberOfListItemsInRow:3},conditionB:{hasMedia:!0,mediaPosition:["right"],mediaType:["Gallery"],mediaWidth:620,textPosition:["left"],textWidth:"part"},example:"https://prnt.sc/flixvs",name:"List centered with half left aligned Ugly",owner:"inbal ",score:-1},{approved:!0,conditionA:{hasMedia:!0,isCoastToCoast:!1,mediaPosition:["below"],mediaWidth:940,textPosition:["above"],textWidth:"full"},conditionB:{hasMedia:!0,isCoastToCoast:!1,mediaPosition:["below"],mediaWidth:940,textPosition:["above"],textWidth:"full"},example:"https://screencast.com/t/scEA5cXKJ0V9",name:"Media Pretty 940",owner:"Karina",score:1},{approved:!0,conditionA:{endsWithMedia:!0,hasMedia:!0,isCoastToCoast:!0,mediaType:["Gallery"]},conditionB:{hasColumns:!0,hasMedia:!0,startsWithMedia:!0},example:"https://prnt.sc/fliu1s",name:"Paired C2C Gallery and columns Ugly",owner:"Yonatan",score:-1},{approved:!0,conditionA:{endsWithMedia:!0,hasMedia:!0,isCoastToCoast:!0,mediaPosition:["below"],textPosition:["above"]},conditionB:{hasMedia:!0,isCoastToCoast:!0,mediaPosition:["above"],startsWithMedia:!0,textPosition:["below"]},example:"http://prntscr.com/flimp7",name:"Paired C2C media Ugly 1",owner:"Shay",score:-1},{approved:!0,conditionA:{endsWithMedia:!0,hasMedia:!0,isCoastToCoast:!0,textPosition:["on"]},conditionB:{hasMedia:!0,isCoastToCoast:!0,mediaPosition:["above"],startsWithMedia:!0,textPosition:["below"]},example:"",name:"Paired C2C media Ugly 2",owner:"Shay",score:-1},{approved:!0,conditionA:{endsWithMedia:!0,hasMedia:!0,isCoastToCoast:!0,textPosition:["above"]},conditionB:{hasMedia:!0,isCoastToCoast:!0,startsWithMedia:!0,textPosition:["on"]},example:"https://prnt.sc/fliqrv",name:"Paired C2C media Ugly 3",owner:"Shay",score:-1},{approved:!0,conditionA:{hasMedia:!0,isCoastToCoast:!0,textPosition:["on"]},conditionB:{hasMedia:!0,isCoastToCoast:!0,textPosition:["on"]},example:"https://www.absolutesocialagency.com/",name:"Paired Media 3",owner:"Karina",score:-1},{approved:!0,conditionA:{hasMedia:!0,isCoastToCoast:!0,mediaType:["Gallery"],textPosition:["on"]},conditionB:{hasMedia:!0,isCoastToCoast:!0,mediaType:["Gallery"]},example:"http://bellanightside.wixsite.com/forestdogs",name:"Paired Media Gallery Ugly",owner:"Karina",score:-1},{approved:!0,conditionA:{hasMedia:!0,isCoastToCoast:!0,mediaType:["Video"]},conditionB:{hasMedia:!0,isCoastToCoast:!0,mediaType:["Video"],textPosition:["below"]},example:"http://sachin2panday.wixsite.com/stxaviersnagra",name:"Paired Media Videos Ugly",owner:"Karina",score:-1},{approved:!0,conditionA:{endsWithMedia:!0,hasMedia:!0,isCoastToCoast:!0,mediaType:["Video"]},conditionB:{hasMedia:!0,isCoastToCoast:!0,mediaPosition:["above"],
mediaType:["Video"],startsWithMedia:!0},example:"PARALAX + VIDEO C2C",name:"Paired Video In the meantime",owner:"Shay",score:-1},{approved:!0,conditionA:{isSameMedia:!0},conditionB:{isSameMedia:!0},example:"",name:"Same Media",owner:"Shay",score:-1},{approved:!0,conditionA:{endsWithMedia:!0,hasBox:!1,hasMedia:!0,isCoastToCoast:!0,isList:!1,mediaPosition:["below"],mediaType:["Gallery"],startsWithMedia:!1,textPosition:["above"],textWidth:"full"},conditionB:{endsWithMedia:!1,hasBox:!1,hasMedia:!0,isCoastToCoast:!0,isList:!1,mediaPosition:["above"],mediaType:["Image"],startsWithMedia:!0,textPosition:["below"],textWidth:"full"},example:"https://prnt.sc/flimp7",name:"Strip gallery & Strip Image Ugly",owner:"Yonatan",score:-1},{approved:!0,conditionA:{hasMedia:!0,textPosition:["on"],textWidth:"full"},conditionB:{hasMedia:!0,isCoastToCoast:!1,mediaPosition:["left"],mediaWidth:460,textPosition:["right"],textWidth:"part"},example:"https://www.screencast.com/t/Pq0PWTlbr",name:"Text Alignment Pretty 1",owner:"Karina",score:1},{approved:!0,conditionA:{hasMedia:!0,isCoastToCoast:!0,mediaPosition:["above"],textPosition:["below"],textWidth:"full"},conditionB:{hasMedia:!0,isCoastToCoast:!1,isList:!0,isListZigZag:!1,listItemHorizontalTextAlignment:"center",listItemMediaPosition:["above"],listItemTextPosition:["below"],mediaPosition:["above"],mediaType:["Shape"],mediaWidth:60,numberOfListItemsInRow:3,startsWithMedia:!0,textPosition:["below"],textWidth:"full"},example:"https://www.screencast.com/t/dqqX4ZJzT9",name:"Text Alignment Pretty 1 Lists",owner:"Karina",score:1},{approved:!0,conditionA:{hasMedia:!0,isCoastToCoast:!0,mediaPosition:["above"],textPosition:["below"],textWidth:"full"},conditionB:{isList:!0,isListZigZag:!1,listItemHorizontalTextAlignment:"center",listItemTextPosition:["on"],numberOfListItemsInRow:3},example:"https://www.screencast.com/t/D9i6chZ9kvga",name:"Text Alignment Pretty 1 Lists column",owner:"Karina",score:1},{approved:!0,conditionA:{hasMedia:!0,textWidth:"full"},conditionB:{hasMedia:!0,isCoastToCoast:!1,textWidth:"part"},example:"https://screencast.com/t/w4EdxB810mD",name:"Text Alignment Pretty 2",owner:"Karina",score:1},{approved:!0,conditionA:{hasMedia:!0,textPosition:["on"],textWidth:"full"},conditionB:{hasMedia:!0,isCoastToCoast:!1,mediaPosition:["left"],textPosition:["right"],textWidth:"part"},example:"https://www.screencast.com/t/6dvsEefsSZr",name:"Text Alignment Pretty 3",owner:"Karina",score:1},{approved:!0,conditionA:{hasMedia:!0,isCoastToCoast:!0,mediaPosition:["above"],textPosition:["below"],textWidth:"full"},conditionB:{hasMedia:!0,isCoastToCoast:!1,mediaPosition:["left"],mediaWidth:460,textPosition:["right"],textWidth:"part"},example:"https://www.screencast.com/t/aiFsy2bI87",name:"Text Alignment Pretty 4",owner:"Karina",score:1},{approved:!0,conditionA:{hasMedia:!0,isCoastToCoast:!0,mediaPosition:["above"],textPosition:["below"],textWidth:"full"},conditionB:{hasMedia:!0,isCoastToCoast:!1,mediaPosition:["left"],mediaWidth:620,textPosition:["right"],textWidth:"part"},example:"https://www.screencast.com/t/J0bvg4AK3wR",name:"Text Alignment Pretty 5",owner:"Karina",score:1},{approved:!0,conditionA:{hasMedia:!0,isCoastToCoast:!0,mediaPosition:["above"],textPosition:["below"],textWidth:"full"},conditionB:{hasMedia:!0,isCoastToCoast:!1,mediaPosition:["right"],mediaWidth:620,textPosition:["left"],textWidth:"part"},example:"https://www.screencast.com/t/ezV5N4orPS",name:"Text Alignment Pretty 6",owner:"Karina",score:1},{approved:!0,conditionA:{hasMedia:!0,isCoastToCoast:!1,mediaPosition:["above"],mediaWidth:940,textPosition:["below"],textWidth:"full"},conditionB:{endsWithMedia:!0,hasMedia:!0,isCoastToCoast:!1,mediaPosition:["left"],mediaWidth:460,startsWithMedia:!0,textPosition:["right"],textWidth:"part"},example:"https://www.screencast.com/t/kftMHkt5QaD",name:"Text Alignment Pretty 7",owner:"Karina",score:1},{approved:!0,conditionA:{hasMedia:!0,isCoastToCoast:!1,mediaPosition:["right"],textPosition:["left"],textWidth:"part"},conditionB:{hasMedia:!0,textPosition:["above"],textWidth:"full"},example:"http://12raouff.wixsite.com/website",name:"Text Alignment Ugly 1",owner:"Karina",score:-1},{approved:!0,conditionA:{hasMedia:!0,isCoastToCoast:!1,mediaPosition:["above"],mediaWidth:940,textPosition:["below"],textWidth:"full"},conditionB:{hasMedia:!0,isCoastToCoast:!0,mediaPosition:["below"],textPosition:["above"],textWidth:"full"},example:"https://www.screencast.com/t/dQF4b5NKP",name:"Text Alignment Ugly 10",owner:"Karina",score:-1},{approved:!0,conditionA:{hasMedia:!0,isCoastToCoast:!1,mediaPosition:["above"],mediaWidth:940,textPosition:["below"],textWidth:"full"},conditionB:{hasMedia:!0,isCoastToCoast:!0,mediaPosition:["below"],textPosition:["above"],textWidth:"full"},example:"https://www.screencast.com/t/dQF4b5NKP",name:"Text Alignment Ugly 11",owner:"Karina",score:-1},{approved:!0,conditionA:{hasMedia:!0,isCoastToCoast:!1,mediaPosition:["above"],mediaWidth:940,textPosition:["below"],textWidth:"full"},conditionB:{hasMedia:!0,isCoastToCoast:!1,mediaPosition:["below"],mediaWidth:940,textPosition:["below"],textWidth:"full"},example:"https://www.screencast.com/t/IkMgB5iaM",name:"Text Alignment Ugly 12",owner:"Karina",score:-1},{approved:!0,conditionA:{hasMedia:!1,textWidth:"full"},conditionB:{hasMedia:!1,textWidth:"full"},example:"http://joyanngoodridge.wixsite.com/advancedlearning",name:"Text Alignment Ugly 2",owner:"Karina",score:-1},{approved:!0,conditionA:{hasMedia:!0,isCoastToCoast:!1,mediaPosition:["right"],textPosition:["left"],textWidth:"part"},conditionB:{hasMedia:!0,isCoastToCoast:!1,mediaPosition:["left"],textPosition:["right"],textWidth:"part"},example:"http://smbatha3871.wixsite.com/website",name:"Text Alignment Ugly 3",owner:"Karina",score:-1},{approved:!0,conditionA:{hasMedia:!0,isCoastToCoast:!0,mediaPosition:["above"],textPosition:["below"],textWidth:"full"},conditionB:{hasMedia:!1,textWidth:"full"},example:"http://pattorsiello.wixsite.com/website",name:"Text Alignment Ugly 4",owner:"Karina",score:-1},{approved:!0,conditionA:{hasMedia:!0,isCoastToCoast:!0,textPosition:["on"],textWidth:"full"},conditionB:{hasMedia:!0,isCoastToCoast:!0,textPosition:["on"],textWidth:"full"},example:"http://jordanclark84.wixsite.com/website",name:"Text Alignment Ugly 5",owner:"Karina",score:-1},{approved:!0,conditionA:{hasMedia:!0,textPosition:["on"]},conditionB:{hasMedia:!0,mediaPosition:["below"],textPosition:["above"]},example:"https://rioterradevelopmen.wixsite.com/website",name:"Text Alignment Ugly 6",owner:"Karina",score:-1},{approved:!0,conditionA:{hasMedia:!0,mediaPosition:["right"],textPosition:["left"],textWidth:"part"},conditionB:{hasMedia:!0,mediaPosition:["left"],textPosition:["right"],textWidth:"part"},example:"https://marmoladynka.wixsite.com/kakapo",name:"Text Alignment Ugly 7",owner:"Karina",score:-1},{approved:!0,conditionA:{hasMedia:!0,isCoastToCoast:!1,mediaPosition:["right"],mediaType:["Image"],mediaWidth:460,textPosition:["left"],textWidth:"part"},conditionB:{hasMedia:!0,isCoastToCoast:!1,mediaPosition:["left"],mediaType:["Image"],mediaWidth:460,textPosition:["right"],textWidth:"part"},example:"https://linafacepainting.wixsite.com/website",name:"Text Alignment Ugly 8",owner:"Karina",score:-10},{approved:!0,conditionA:{hasMedia:!0,isCoastToCoast:!0,mediaPosition:["above"],textPosition:["below"],textWidth:"full"},conditionB:{hasMedia:!0,isCoastToCoast:!1,mediaPosition:["above"],mediaType:["Image"],mediaWidth:940,textPosition:["below"],textWidth:"full"},example:"",name:"Text Alignment Ugly 9",owner:"Karina",score:-1},{approved:!0,conditionA:{hasMedia:!0,isCoastToCoast:!0,mediaPosition:["above"],textPosition:["below"],textWidth:"full"},conditionB:{isList:!0,isListZigZag:!1,listItemHorizontalTextAlignment:"center",listItemMediaPosition:["above"],listItemTextPosition:["below"],listItemTextWidth:"full",numberOfListItemsInRow:3},example:"https://www.screencast.com/t/3IF39nJsk",name:"Text Blocks Pretty 1 Lists",owner:"Karina",score:1},{approved:!0,conditionA:{hasMedia:!0,isCoastToCoast:!0,mediaPosition:["above"],textPosition:["below"],textWidth:"full"},conditionB:{isList:!0,isListZigZag:!1,listItemHorizontalTextAlignment:"center",listItemMediaPosition:["above"],listItemTextPosition:["below"],listItemTextWidth:"full",numberOfListItemsInRow:1},example:"https://www.screencast.com/t/QhIXPTmuw",name:"Text Blocks Pretty 2 Lists",owner:"Karina",score:1},{approved:!0,conditionA:{hasMedia:!0,isCoastToCoast:!0,mediaPosition:["above"],textPosition:["below"],textWidth:"full"},conditionB:{hasMedia:!0,isCoastToCoast:!0,mediaPosition:["below"],textPosition:["above"],textWidth:"full"},example:"http://zahratelatela.wixsite.com/website",name:"Text Blocks Ugly 1",owner:"Karina",score:-1},{approved:!0,conditionA:{hasMedia:!0,isCoastToCoast:!0,mediaPosition:["above"],textPosition:["below"],textWidth:"full"},conditionB:{hasMedia:!1,isCoastToCoast:!1,isList:!0,textWidth:"full"},example:"https://www.screencast.com/t/xUTXBDGiQJo",name:"Text Blocks Ugly 1 Lists",owner:"Karina",score:-1},{approved:!0,conditionA:{hasMedia:!0,isCoastToCoast:!0,textPosition:["on"],textWidth:"full"},conditionB:{hasMedia:!0,mediaPosition:["below"],textPosition:["above"],textWidth:"full"},example:"https://www.screencast.com/t/bawiNhytF",name:"Text Blocks Ugly 10",owner:"Karina",score:-1},{approved:!0,conditionA:{hasMedia:!0,isCoastToCoast:!0,textPosition:["on"]},conditionB:{hasMedia:!0,isCoastToCoast:!0,mediaPosition:["below"],textPosition:["above"],textWidth:"full"},example:"http://kimschulz1.wixsite.com/petportraits",name:"Text Blocks Ugly 2",owner:"Karina",score:-1},{approved:!0,conditionA:{hasMedia:!0,isCoastToCoast:!1,mediaPosition:["above"],mediaWidth:460,textPosition:["below"],textWidth:"full"},conditionB:{hasMedia:!0,isCoastToCoast:!1,mediaPosition:["below"],mediaType:["Shape"],textPosition:["above"],textWidth:"full"},example:"https://cleaningangelsllcva.wixsite.com/cleaning",name:"Text Blocks Ugly 4",owner:"Karina",score:-1},{approved:!0,conditionA:{hasMedia:!0,isCoastToCoast:!1,mediaPosition:["above"],mediaWidth:460,textPosition:["below"],textWidth:"full"},conditionB:{hasMedia:!0,isCoastToCoast:!1,mediaPosition:["below"],mediaType:["Shape"],textPosition:["above"],textWidth:"full"},example:"https://andrewrezin.wixsite.com/website",name:"Text Blocks Ugly 5",owner:"Karina",score:-1},{approved:!0,conditionA:{hasMedia:!0,isCoastToCoast:!1,mediaPosition:["above"],mediaWidth:460,textPosition:["below"],textWidth:"full"},conditionB:{hasMedia:!0,isCoastToCoast:!1,mediaPosition:["below"],mediaType:["Shape"],textPosition:["above"],textWidth:"full"},example:"https://ibtnickhalverson.wixsite.com/imagineballet",name:"Text Blocks Ugly 6",owner:"Karina",score:-1},{approved:!0,conditionA:{hasMedia:!1,textWidth:"full"},conditionB:{hasMedia:!1,textWidth:"full"},example:"https://leigh925.wixsite.com/website",name:"Text Blocks Ugly 7",owner:"Karina",score:-1},{approved:!0,conditionA:{hasMedia:!0,mediaPosition:["below"],mediaWidth:940,textPosition:["above"],textWidth:"full"},conditionB:{hasMedia:!0,mediaPosition:["above"],mediaWidth:940,textPosition:["below"],textWidth:"full"},example:"https://cowanmillbaptist.wixsite.com/cowanmill",name:"Text Blocks Ugly 8",owner:"Karina",score:-1},{approved:!0,conditionA:{hasMedia:!0,isCoastToCoast:!0,textPosition:["on"],textWidth:"full"},conditionB:{hasMedia:!0,isCoastToCoast:!0,mediaPosition:["below"],textPosition:["above"],textWidth:"full"},example:"https://www.screencast.com/t/bawiNhytF",name:"Text Blocks Ugly 9",owner:"Karina",score:-1},{approved:!0,conditionA:{hasMedia:!0,isCoastToCoast:!1,mediaPosition:["below"],mediaWidth:940,textPosition:["above"],textWidth:"full"},conditionB:{hasMedia:!0,isCoastToCoast:!1,isList:!0,mediaPosition:["above"],mediaType:["Shape"],mediaWidth:60,startsWithMedia:!0,textPosition:["below"],textWidth:"full"},example:"https://www.screencast.com/t/zUMvGoOfiN0",name:"Text alignment pretty 2 Lists",owner:"Karina",score:1},{approved:!0,conditionA:{hasMedia:!0,isCoastToCoast:!1,isList:!0,listItemHorizontalTextAlignment:"center",listItemMediaPosition:["above"],listItemTextPosition:["below"],listItemTextWidth:"full",mediaPosition:["above"],mediaType:["Shape"],mediaWidth:60,numberOfListItemsInRow:3,startsWithMedia:!0,textPosition:["below"],textWidth:"full"},conditionB:{hasMedia:!0,isCoastToCoast:!0,textPosition:["on"],textWidth:"full"},example:"https://www.screencast.com/t/hj0wyQHXeh",name:"Text alignment pretty 3 Lists",owner:"Karina",score:1},{approved:!0,conditionA:{hasMedia:!0,isCoastToCoast:!1,isList:!0,listItemHorizontalTextAlignment:"center",listItemMediaPosition:["above"],listItemTextPosition:["below"],listItemTextWidth:"full",mediaPosition:["above"],mediaType:["Shape"],mediaWidth:60,numberOfListItemsInRow:3,startsWithMedia:!0,textPosition:["below"],textWidth:"full"},conditionB:{hasMedia:!0,isCoastToCoast:!0,textPosition:["on"],textWidth:"full"},example:"https://www.screencast.com/t/hj0wyQHXeh",name:"Text alignment ugly 1 Lists",owner:"Karina",score:-1},{approved:!0,conditionA:{endsWithMedia:!1,hasMedia:!0,hasText:!0,isCoastToCoast:!0,textPosition:["below"],textWidth:"full"},conditionB:{hasMedia:!0,isCoastToCoast:!0,startsWithMedia:!0,textPosition:["below"]},example:"http://prntscr.com/fmsuwb",name:"Text below C2C + C2C above text",owner:"shayca0",score:-1},{approved:!1,conditionA:{hasMedia:!0,hasText:!0,horizontalTextAlignment:"center",isCoastToCoast:!0,mediaPosition:["above"],textPosition:["below"],textWidth:"full"},conditionB:{hasMedia:!1,hasText:!0,horizontalTextAlignment:"left"},example:"http://prntscr.com/fp8m2h",name:"Text below C2C + only text below",owner:"shayca0",score:-1},{approved:!0,conditionA:{hasMedia:!0,isCoastToCoast:!0,mediaPosition:["above"],textPosition:["below"],textWidth:"full"},conditionB:{hasMedia:!0,hasText:!0,isCoastToCoast:!0,textWidth:"full"},example:"https://prnt.sc/fmt1tl",name:"Text below C2C + text above C2C",owner:"shayca0",score:-1},{approved:!0,conditionA:{endsWithMedia:!0,hasMedia:!0,isCoastToCoast:!0,textPosition:["on"]},conditionB:{hasMedia:!0,isCoastToCoast:!0,textPosition:["above"]},example:"https://screencast.com/t/5Zpik5v3",name:"Text block alignment ugly",owner:"Shay",score:-1},{approved:!1,compareFeaturesCondition:{sameTextAlignment:!1},conditionA:{hasMedia:!0,hasText:!0,horizontalTextAlignment:"left",isCoastToCoast:!0,textPosition:["on"]},conditionB:{hasColumns:!0,hasMedia:!0,hasText:!0,horizontalTextAlignment:"center",isColumnBG:!1,mediaPosition:["right"],numberOfColumns:2,textPosition:["left"],textWidth:"part"},example:"https://prnt.sc/fqz48x",label:"",name:"left text on C2C + centered text left to media",owner:"inbalt3",score:-1},{approved:!1,compareFeaturesCondition:{sameTextAlignment:!1},conditionA:{hasMedia:!0,hasText:!0,horizontalTextAlignment:"left",isCoastToCoast:!1,isList:!0,listItemHorizontalTextAlignment:"left",listItemTextPosition:["below"],mediaPosition:["above"],textPosition:["below"]},conditionB:{hasMedia:!0,hasText:!0,horizontalTextAlignment:"center",isCoastToCoast:!0,mediaPosition:["above"],mediaType:"image",textPosition:["below","on"],textWidth:"full"},example:"https://prnt.sc/fqzjzo",label:"text below image  940 align text + c2c image full text below align center",name:"text below image  940 align text + c2c image full text below align center",owner:"or6793",score:1},{approved:!1,compareFeaturesCondition:{sameTextAlignment:!1},conditionA:{hasMedia:!0,hasText:!0,isCoastToCoast:!0,textPosition:["below"],textWidth:"full"},conditionB:{hasMedia:!0,hasText:!0,isCoastToCoast:!0,mediaPosition:["above"],textPosition:["below"],textWidth:"full"},name:"text below image + C2C above text same alignment",owner:"shayca0",score:1}]);var PageFeatureDetector=function(){function a(a,b,c,d,e){this.FeatureList=a,this.Solution=b,this.layoutSolver=c,this.storyServices=d,this.applicationState=e,this.storyServices.onRenderedPart(this.renderedPartHandler.bind(this)),this._featureListPerPage=new Map}return a.$inject=["FeatureList","Solution","layoutSolver","storyServices","applicationState"],a.prototype._calcPageFeatures=function(a){var b=this,c=this.layoutSolver.getPartSolutions("body",a),d=c.getSelectedSolution(),e=this.Solution.calculateListSpans(d),f=[];return _.each(e,function(a){f=f.concat(new b.FeatureList(a).mediaObjects)}),{pageId:a,allMedia:f}},a.prototype._pageFeatures=function(a){return this.applicationState.isPagePrettyRulesCached?(this._featureListPerPage.get(a)||this._featureListPerPage.set(a,this._calcPageFeatures(a)),this._featureListPerPage.get(a)):this._calcPageFeatures(a)},a.prototype.renderedPartHandler=function(a,b,c,d,e){this._featureListPerPage["delete"](e)},a.prototype.getPatternList=function(a){return _.filter(this._pageFeatures(a).allMedia,function(a){return"pattern"===a.mediaType})},a.prototype.hasAnyPattern=function(a){return this.getPatternList(a).length>0},a.prototype.getImageList=function(a){return _.filter(this._pageFeatures(a).allMedia,function(a){return"image"===a.mediaType})},a.prototype.getVideoList=function(a){return _.filter(this._pageFeatures(a).allMedia,function(a){return"video"===a.mediaType})},a}(),ePrettyPageRulesMode;!function(a){a[a.rulesOff=1]="rulesOff",a[a.ruleOnNoCaching=2]="ruleOnNoCaching",a[a.rulesOnAndCaching=3]="rulesOnAndCaching"}(ePrettyPageRulesMode||(ePrettyPageRulesMode={})),angular.module("siteGeneratorStaticsConsumerAppInternal").service("PageFeatureList",PageFeatureDetector);var DefaultSections=function(){function a(){this.list=[{id:"Welcome",ceType:"Welcome",cardinality:1,item:{hidden:[[]],labels:{}}},{id:"Services",ceType:"Service",cardinality:3,item:{hidden:[[]],labels:{}}},{id:"About",ceType:"About",cardinality:1,item:{hidden:[[]],labels:{}}},{id:"Team Members",ceType:"TeamMember",cardinality:3,item:{hidden:[[]],labels:{}}},{id:"Testimonials",ceType:"Testimonial",cardinality:3,item:{hidden:[[]],labels:{}}},{id:"Projects",ceType:"Project",cardinality:3,item:{hidden:[[]],labels:{}}},{id:"Products",ceType:"Product",cardinality:3,item:{hidden:[[]],labels:{}}},{id:"Clients",ceType:"Client",cardinality:3,item:{hidden:[[]],labels:{}}},{id:"Features",ceType:"Feature",cardinality:3,item:{hidden:[[]],labels:{}}},{id:"FAQ",ceType:"FAQ",cardinality:3,item:{hidden:[[]],labels:{}}},{id:"Events",ceType:"Event",cardinality:3,item:{hidden:[[]],labels:{}}},{id:"News",ceType:"News",cardinality:3,item:{hidden:[[]],labels:{}}},{id:"Contact",ceType:"Contact",cardinality:1,item:{hidden:[[]],labels:{}}},{id:"Opening Hours",ceType:"OpeningHours",cardinality:1,item:{hidden:[[]],labels:{}}},{id:"Quote",ceType:"Quote",cardinality:1,item:{hidden:[[]],labels:{}}},{id:"CV",ceType:"CV",cardinality:3,item:{hidden:[[]],labels:{}}},{id:"Headliner",ceType:"Widget",cardinality:1,item:{hidden:[[]],labels:{}}},{id:"Gallery",ceType:"Portfolio",cardinality:1,item:{hidden:[[]],labels:{}}},{id:"Subscribe",ceType:"GetSubscribers_Widget",uniqOnCeType:!0,cardinality:1,item:{hidden:[[]],labels:{}}},{id:"Featured Product",ceType:"Stores_Product_specific_Widget",uniqOnCeType:!0,cardinality:1,item:{hidden:[[]],labels:{}}},{id:"Product Slider",ceType:"Stores_Slider_Gallery_Widget",uniqOnCeType:!0,cardinality:1,item:{hidden:[[]],labels:{}}},{id:"Product Gallery",ceType:"Stores_Grid_Gallery_Widget",uniqOnCeType:!0,cardinality:1,item:{hidden:[[]],labels:{}}},{id:"Blog Post Gallery",ceType:"Blog_Post_Gallery",uniqOnCeType:!0,cardinality:1,item:{hidden:[[]],labels:{}}},{id:"Music Player",ceType:"Music_Widget",uniqOnCeType:!0,cardinality:1,item:{hidden:[[]],labels:{}}},{id:"Tour Dates",ceType:"BandsInTown_Widget",uniqOnCeType:!0,cardinality:1,item:{hidden:[[]],labels:{}}},{id:"Pro Gallery",ceType:"ProGallery_Widget",uniqOnCeType:!0,cardinality:1,item:{hidden:[[]],labels:{}}},{id:"Bookings Widget",ceType:"Bookings_Widget",uniqOnCeType:!0,cardinality:1,flag:"bookingsWidget",item:{hidden:[[]],labels:{}}}]}return a}();angular.module("siteGeneratorStaticsConsumerAppInternal").constant("defaultSections",new DefaultSections);var ConsumerTooltips=function(){function a(){this.list=[{name:"intro_delete",type:"hint",content:"Delete",appearance:"info"},{name:"intro_card_url_invalid",type:"hint",content:"URL is invalid",appearance:"error"},{name:"intro_card_website_address_invalid",type:"hint",content:"Web address is invalid",appearance:"error"},{name:"intro_card_email_invalid",type:"rich",content:"This is not a valid<br />email address",appearance:"error"},{name:"intro_card_url_default",type:"rich",content:"Change the links so they go to your social pages (and not Wix’s)",appearance:"error"},{name:"menu_home",type:"hint",content:"Add & manage pages",appearance:"info"},{name:"menu_add_section",type:"hint",content:"Add a new section",appearance:"info"},{name:"menu_add_dropdown",type:"hint",content:"Add a page or a section",appearance:"info"},{name:"menu_add_page",type:"hint",content:"Add a new page",appearance:"info"},{name:"menu_undo",type:"hint",content:"Undo",appearance:"info"},{name:"menu_redo",type:"hint",content:"Redo",appearance:"info"},{name:"menu_preview",type:"rich",content:"See what your site looks like on desktop & mobile",appearance:"info"},{name:"menu_publish",type:"hint",content:"Share your website <br />with the world",appearance:"info"},{name:"menu_saved_text",type:"hint",content:"Your changes are<br/> automatically saved",appearance:"info"},{name:"zoom_in",type:"hint",content:"Zoom in",appearance:"info"},{name:"zoom_out",type:"hint",content:"Zoom out",appearance:"info"},{name:"overlay_plus",type:"hint",content:"Add new section here",appearance:"info"},{name:"overlay_edit",type:"hint",content:"Edit content",appearance:"info"},{name:"overlay_settings",type:"hint",content:"Change settings",appearance:"info"},{name:"overlay_change_preset",type:"hint",content:"Change design",appearance:"info"},{name:"suggest_layout_change",type:"rich",content:"Your photos will look better in a different layout, choose one now",appearance:"info"},{name:"overlay_gear",type:"hint",content:"More Actions",appearance:"info"},{name:"overlay_delete",type:"hint",content:"Delete",appearance:"info"},{name:"overlay_move_up",type:"hint",content:"Move up",appearance:"info"},{name:"overlay_move_down",type:"hint",content:"Move down",appearance:"info"},{name:"overlay_move_page",type:"hint",content:"Move",appearance:"info"},{name:"overlay_duplicate_section",type:"hint",content:"Duplicate",appearance:"info"},{name:"overlay_rotate_color_section",type:"hint",content:"Rotate colors",appearance:"info"},{name:"overlay_enlarge_font_section",type:"hint",content:"Enlarge fonts",appearance:"info"},{name:"overlay_shrink_font_section",type:"hint",content:"Shrink fonts",appearance:"info"},{name:"overlay_enlarge_section_height",type:"hint",content:"Enlarge section",appearance:"info"},{name:"overlay_shrink_section_height",type:"hint",content:"Shrink section",appearance:"info"},{name:"overlay_image_fit_section",type:"hint",content:"Toggle image fit",appearance:"info"},{name:"overlay_reset_font_section",type:"hint",content:"Reset fonts",appearance:"info"},{name:"overlay_change_column_position",type:"hint",content:"Change column position",appearance:"info"},{name:"overlay_connect_domain",type:"rich",content:"Connect Your Domain:<br/> Give your site a more professional look with your own branded domain name",appearance:"info"},{name:"preview_toggle_desktop",type:"hint",content:"Desktop Preview",appearance:"info"},{name:"preview_toggle_mobile",type:"hint",content:"Mobile Preview",appearance:"info"},{name:"edit_mode_toggle_desktop",type:"hint",content:"Edit for Desktop",appearance:"info"},{name:"edit_mode_toggle_mobile",type:"hint",content:"Edit for Mobile",appearance:"info"},{name:"social_validation",type:"hint",content:"Update social links to your own profiles!",appearance:"error"},{name:"seo_title_validation",type:"hint",content:"Title length must be 70 characters at most (including white spaces)",appearance:"error"},{name:"seo_description_validation",type:"hint",content:"Description length must be 160 characters at most (including white spaces)",appearance:"error"},{name:"seo_keywords_validation",type:"rich",content:"Can only accept up to 10 keywords and 250 characters at most (including white spaces)",appearance:"error"},{name:"seo_url_validation",type:"rich",content:"Page URL can only contain letters and numbers, and should be with at least one character",appearance:"error"},{name:"seo_title_tooltip",type:"rich",content:"Your site name, page name. and an idea of what you do in 55-70 characters (including spaces)",appearance:"info"},{name:"seo_description_tooltip",type:"rich",content:"Your site's description should be between 50-160 characters (including spaces)",appearance:"info"},{name:"seo_keywords_tooltip",type:"rich",content:"Use up to 10 keywords or phrases, separated by commas",appearance:"info"},{name:"seo_url_tooltip",type:"rich",content:"The page's unique address on the web",appearance:"info"},{name:"next_item",type:"hint",content:"Next",appearance:"info"},{name:"previous_item",type:"hint",content:"Previous",appearance:"info"},{name:"drag_section",type:"hint",content:"Drag section",appearance:"info"},{name:"close_preview",type:"hint",content:"Back to Edit Mode",appearance:"info"},{name:"crop_cancel",type:"hint",content:"Cancel",appearance:"info"},{name:"crop_apply",type:"hint",content:"Apply",appearance:"info"},{name:"publish_error_site_name_is_not_string",type:"hint",content:"Cannot be empty",appearance:"error"},{name:"publish_error_site_name_too_short",type:"rich",content:"Your site name must be<br/>between 4-20 characters.",appearance:"error"},{name:"publish_error_site_name_too_long",type:"rich",content:"Your site name must be<br/>between 4-20 characters.",appearance:"error"},{name:"publish_error_site_name_already_exists",type:"hint",content:"Name already exists",appearance:"error"},{name:"publish_error_site_name_invalid_chars",type:"hint",content:"Invalid character",appearance:"error"},{name:"publish_error_site_name_invalid",type:"hint",content:"Invalid site name",appearance:"error"},{name:"publish_error_site_name_ends_with_hyphen",type:"hint",content:"Name cannot end with hyphen",appearance:"error"},{name:"tpa_bookings_settings",type:"hint",content:"Manage Bookings",appearance:"info"},{name:"tpa_stores_settings",type:"hint",content:"Manage Store",appearance:"info"},{name:"tpa_blog_settings",type:"hint",content:"Manage Blog",appearance:"info"},{name:"header_fixed_header",type:"rich",content:"Keep your header visible, <br/>even when your visitors scroll down the page. <br/>Preview your site to see <br/>it in action",appearance:"info"},{name:"section_name_in_menu",type:"rich",content:"Section name as it appears in your site's header menu",appearance:"info"},{name:"design_coloration_palette_list",type:"rich",content:"These palettes best complement your main color",appearance:"info"},{name:"design_coloration_logo_palette",type:"rich",content:"This color palette has been created automatically from your logo",appearance:"info"},{name:"design_kit_reset",type:"hint",content:"Reset to default settings",appearance:"info"},{name:"design_coloration_palette_edit",type:"hint",content:"Edit Color Settings",appearance:"info"},{name:"design_change_animation",type:"hint",content:"Edit animation settings",appearance:"info"},{name:"design_coloration_help",type:"rich",content:"Help",appearance:"info"},{name:"design_coloration_mode_toggle",type:"rich",content:"Set light or dark<br/>background from<br/>your color palette",appearance:"info"},{name:"design_change_font",type:"hint",content:"Change Fonts",appearance:"info"},{name:"design_coloration_main_color",type:"rich",content:"Choose from a list of recommended colors or add your own",appearance:"info"},{name:"design_coloration_add_color",type:"hint",content:"Add your own custom color",appearance:"info"},{name:"design_advanced_colors_reset",type:"hint",content:"Reset colors",appearance:"info"},{name:"section_menu_clicked",type:"rich",content:'To rename or hide a section in your menu, edit that section. <span class="cc-tooltip-link"><a ng-click="$ctrl.onSectionTooltipLinkClick()" href="">Learn More</a></span>',appearance:"info",compiled:!0},{name:"page_menu_clicked",type:"rich",content:'Manage your menu and navigate between pages in the <span class="cc-tooltip-link"><a ng-click="$ctrl.onPageTooltipLinkClick()" href="">pages manager</a></span>.',appearance:"info",compiled:!0},{name:"animation_animation_type_help",type:"rich",content:"Add a lively animation to the elements in your site",appearance:"info"},{name:"animation_scroll_effects_help",type:"rich",content:"Add impressive scroll effects to your site background images. To see them in action, click Preview and scroll.",appearance:"info"},{name:"animation_page_transition_help",type:"rich",content:"Add fun page transitions to bring your site to life! Click Preview to check them out",appearance:"info"},{name:"intro_website_help",type:"rich",content:"Info from your existing site will be automatically imported to your new Wix ADI site.",appearance:"info"},{name:"design_coloration_readability_positive",type:"rich",content:"The colors in your palette<br/>make your site text easy<br/>to read",appearance:"info"},{name:"design_coloration_readability_negative",type:"rich",content:"The selected colors can<br/>make text hard to read.<br/>Click “Adjust Colors”<br/>to automatically adjust<br/>your colors",appearance:"info"},{name:"design_header_type",type:"rich",content:"TBD",appearance:"info"},{name:"design_header_bgcolor",type:"rich",content:"TBD",appearance:"info"},{name:"section_background_categories_color",type:"rich",content:"Background colors from your palette.",appearance:"info"},{name:"section_background_categories_media",type:"rich",content:"Images, videos and galleries that best complement your website.",appearance:"info"},{name:"section_background_categories_pattern",type:"rich",content:"Pattern colors are taken<br/> from your site's palette. Change your site colors to see other options.",appearance:"info",compiled:!0},{name:"mobile_text_field_disabled",type:"rich",content:"Editing the text is done in the desktop mode only.",appearance:"info"},{name:"user_web_address",type:"rich",content:"",appearance:"info"}]}return a.prototype.registerTooltips=function(a){_.each(this.list,function(b){return a.setToolTip(b.name,_.omit(b,"name"))})},a}();angular.module("siteGeneratorStaticsConsumerAppInternal").constant("consumerTooltips",new ConsumerTooltips).run(["ccTooltipManager","consumerTooltips",function(a,b){return b.registerTooltips(a)}]),angular.module("siteGeneratorStaticsConsumerAppInternal").constant("kitToPrimaryColor",{maison:"#193340",playground:"#50daea",vogue:"#f4e4cc",soho:"#1e1e96",indulge:"#b3894c",bouquet:"#f3dada",midnight:"#9b8158",merlot:"#5f0038",breeze:"#46b5ef",elegant:"#3a3b3f",agile:"#f44345",bounce:"#f270b6",evolution:"#1777cb",cadenza:"#500008",rosewater:"#f5bbb2",minimal:"#ffffff",sugar:"#655773",horizon:"#38c098","hi-rise":"#22384d",fuse:"#207af5",vintage:"#cb5139",bold:"#ffb703",classic:"#ffffff",skyscraper:"#41b7c4",sophisticated:"#f65100",clean:"#e5f0f1",chic:"#fbf883",spark:"#f64028",fresh:"#9db946",forest:"#382a23",intensity:"#31d677",delight:"#fdef8c",upbeat:"#ef4135",smart:"#334ed7","jet-black":"#16161a",timeless:"#e7e9df",rustic:"#0d3a35",innovative:"#17c37b",charming:"#ffbfb3",fun:"#f2d261",funky:"#f73f52",sincere:"#f9e666",army:"#574a3d",royal:"#edeadc",organic:"#a2ce63",tender:"#68cba7",dynamic:"#448d4e",pure:"#f4bb97"});var builder;!function(a){var b=function(){function a(){this.data={agile:{name:"Agile",description:"Vivacious and swift with a dash of spontaneity",fontNameSize:"",fontDescriptionSize:"",fontName:"font_0",fontDescription:"font_9"},army:{name:"Army",description:"A commanding presence, both strong and tenacious",fontNameSize:32,fontDescriptionSize:13,fontName:"font_0",fontDescription:"font_9"},"black-ice":{name:"Black Ice",description:"Compelling and intense with a magnetic nature",fontNameSize:22,fontDescriptionSize:"",fontName:"font_0",
fontDescription:"font_9"},"black-ice-2":{name:"Black Ice 2",description:"Compelling and intense with a magnetic nature",fontNameSize:"",fontDescriptionSize:"",fontName:"font_0",fontDescription:"font_9"},bold:{name:"Bold",description:"An adventurous spirit that's loud and proud",fontNameSize:"",fontDescriptionSize:"",fontName:"font_2",fontDescription:"font_9"},"bold-2":{name:"Bold 2",description:"An adventurous spirit that's loud and proud",fontNameSize:"",fontDescriptionSize:"",fontName:"font_2",fontDescription:"font_9"},bounce:{name:"Bounce",description:"A burst of kinetic energy, bright and animated",fontNameSize:"",fontDescriptionSize:"",fontName:"font_0",fontDescription:"font_9"},bouquet:{name:"Bouquet",description:"Lovely and inviting with a celebratory feel",fontNameSize:"",fontDescriptionSize:"",fontName:"font_2",fontDescription:"font_9"},breeze:{name:"Breeze",description:"A gust of cool mountain air, brisk and refreshing",fontNameSize:"",fontDescriptionSize:"",fontName:"font_0",fontDescription:"font_9"},"breeze-2":{name:"Breeze 2",description:"A gust of cool mountain air, brisk and refreshing",fontNameSize:"",fontDescriptionSize:"",fontName:"font_0",fontDescription:"font_9"},cadenza:{name:"Cadenza",description:"Intense yet harmonious, like the sound of a powerful symphony",fontNameSize:"",fontDescriptionSize:"",fontName:"font_0",fontDescription:"font_9"},"cadenza-2":{name:"Cadenza 2",description:"Intense yet harmonious, like the sound of a powerful symphony",fontNameSize:"",fontDescriptionSize:"",fontName:"font_0",fontDescription:"font_9"},charming:{name:"Charming",description:"A charismatic character, both dashing and suave",fontNameSize:"",fontDescriptionSize:"",fontName:"font_0",fontDescription:"font_9"},chic:{name:"Chic",description:"Effortless style and poise with a hint of glamour",fontNameSize:"",fontDescriptionSize:"",fontName:"font_7",fontDescription:"font_9"},"chic-2":{name:"Chic 2",description:"Effortless style and poise with a hint of glamour",fontNameSize:"",fontDescriptionSize:"",fontName:"font_7",fontDescription:"font_9"},classic:{name:"Classic",description:"A graceful nature, truly tasteful and polished",fontNameSize:"",fontDescriptionSize:"",fontName:"font_0",fontDescription:"font_9"},clean:{name:"Clean",description:"Neat and balanced, like a perfectly blank slate",fontNameSize:"",fontDescriptionSize:"",fontName:"font_0",fontDescription:"font_9"},"clean-2":{name:"Clean 2",description:"Neat and balanced, like a perfectly blank slate",fontNameSize:"",fontDescriptionSize:"",fontName:"font_0",fontDescription:"font_9"},"deep-forest":{name:"Deep Forest",description:"A woodsy, free spirited vibe that's intriguing and pleasant",fontNameSize:"",fontDescriptionSize:"",fontName:"font_0",fontDescription:"font_9"},delight:{name:"Delight",description:"Engaging and joyful with a spark of jubilation",fontNameSize:22,fontDescriptionSize:11,fontName:"font_0",fontDescription:"font_9"},"delight-2":{name:"Delight 2",description:"Engaging and joyful with a spark of jubilation",fontNameSize:"",fontDescriptionSize:"",fontName:"font_0",fontDescription:"font_9"},dynamic:{name:"Dynamic",description:"A thrill-seeking quality, energetic and audacious",fontNameSize:"",fontDescriptionSize:"",fontName:"font_0",fontDescription:"font_9"},elegant:{name:"Elegant",description:"A beauty that never fades, both upscale and exquisite",fontNameSize:"",fontDescriptionSize:"",fontName:"font_2",fontDescription:"font_9"},evolution:{name:"Evolution",description:"Visionary and progressive with a contemporary touch",fontNameSize:"",fontDescriptionSize:"",fontName:"font_0",fontDescription:"font_9"},fresh:{name:"Fresh",description:"Like freshly cut grass on a summer day, crisp and invigorating",fontNameSize:"",fontDescriptionSize:"",fontName:"font_0",fontDescription:"font_9"},"fresh-2":{name:"Fresh 2",description:"Like freshly cut grass on a summer day, crisp and invigorating",fontNameSize:"",fontDescriptionSize:"",fontName:"font_0",fontDescription:"font_9"},fun:{name:"Fun",description:"Bold, bright and buzzing with an upbeat tone",fontNameSize:"",fontDescriptionSize:"",fontName:"font_0",fontDescription:"font_9"},funky:{name:"Funky",description:"An out-of-the-box vibe, uniquely hip and colorful",fontNameSize:"",fontDescriptionSize:"",fontName:"font_0",fontDescription:"font_9"},fuse:{name:"Fuse",description:"Deliberate and strong with unwavering focus",fontNameSize:"",fontDescriptionSize:"",fontName:"font_0",fontDescription:"font_9"},"hi-rise":{name:"Hi Rise",description:"Established and professional, a highly approachable feel",fontNameSize:"",fontDescriptionSize:"",fontName:"font_0",fontDescription:"font_9"},horizon:{name:"Horizon",description:"Simple yet stunning, like a sunset over the ocean",fontNameSize:"",fontDescriptionSize:"",fontName:"font_0",fontDescription:"font_9"},"horizon-2":{name:"Horizon 2",description:"Simple yet stunning, like a sunset over the ocean",fontNameSize:"",fontDescriptionSize:"",fontName:"font_0",fontDescription:"font_9"},indulge:{name:"Indulge",description:"Luxuriously classy while exuding an air of gentle refinement",fontNameSize:"",fontDescriptionSize:"",fontName:"font_0",fontDescription:"font_9"},innovative:{name:"Innovative",description:"Creative and modern with a spark of cutting-edge discovery",fontNameSize:"",fontDescriptionSize:"",fontName:"font_0",fontDescription:"font_9"},intensity:{name:"Intensity",description:"A fierce vibe with electric energy and determination",fontNameSize:"",fontDescriptionSize:"",fontName:"font_0",fontDescription:"font_9"},"jet-black":{name:"Jet black",description:"A serious tone, sleek and striking with a dash of resilience",fontNameSize:32,fontDescriptionSize:13,fontName:"font_0",fontDescription:"font_9"},maison:{name:"Maison",description:"Like a grand estate in the French countryside, elegant and fine",fontNameSize:"",fontDescriptionSize:"",fontName:"font_0",fontDescription:"font_9"},merlot:{name:"Merlot",description:"Rich, tasteful and full-bodied, like a fine red wine",fontNameSize:"",fontDescriptionSize:"",fontName:"font_0",fontDescription:"font_9"},midnight:{name:"Midnight",description:"An unsolved mystery, both vivid and captivating",fontNameSize:"",fontDescriptionSize:"",fontName:"font_0",fontDescription:"font_9"},minimal:{name:"Minimal",description:"Balance and simplicity with a touch of refinement",fontNameSize:"",fontDescriptionSize:"",fontName:"font_0",fontDescription:"font_9"},organic:{name:"Organic",description:"A cheerful nature, authentic and friendly",fontNameSize:"",fontDescriptionSize:"",fontName:"font_0",fontDescription:"font_9"},playground:{name:"Playground",description:"Youthful and lighthearted with a sense of pure joy",fontNameSize:"",fontDescriptionSize:"",fontName:"font_0",fontDescription:"font_9"},"playground-2":{name:"Playground 2",description:"Youthful and lighthearted with a sense of pure joy",fontNameSize:"",fontDescriptionSize:"",fontName:"font_0",fontDescription:"font_9"},pure:{name:"Pure",description:"Wholesome, natural and kind with a genuine quality",fontNameSize:"",fontDescriptionSize:"",fontName:"font_0",fontDescription:"font_9"},rosewater:{name:"Rosewater",description:"Enchanting, delicate and just the right touch of romance",fontNameSize:"",fontDescriptionSize:"",fontName:"font_0",fontDescription:"font_9"},royal:{name:"Royal",description:"An air of aristocratic dignity and a modern, confident feel",fontNameSize:32,fontDescriptionSize:13,fontName:"font_0",fontDescription:"font_9"},rustic:{name:"Rustic",description:"Simple country charm garnished with an urban twist",fontNameSize:"",fontDescriptionSize:"",fontName:"font_0",fontDescription:"font_9"},serene:{name:"Serene",description:"A light, tranquil tone that's pleasant and relaxed",fontNameSize:"",fontDescriptionSize:"",fontName:"font_0",fontDescription:"font_9"},sincere:{name:"Sincere",description:"Cool and candid with an earnest approach",fontNameSize:"",fontDescriptionSize:"",fontName:"font_0",fontDescription:"font_9"},skyscraper:{name:"Skyscraper",description:"Cosmopolitan style with an influential, modern feel",fontNameSize:"",fontDescriptionSize:"",fontName:"font_0",fontDescription:"font_9"},smart:{name:"Smart",description:"Professional and intelligent, with a look that's easy on the eyes",fontNameSize:"",fontDescriptionSize:"",fontName:"font_0",fontDescription:"font_9"},soho:{name:"Soho",description:"Contemporary taste with a touch of downtown class",fontNameSize:"",fontDescriptionSize:"",fontName:"font_0",fontDescription:"font_9"},sophisticated:{name:"Sophisticated",description:"A seasoned world traveler, refined and cultured",fontNameSize:"",fontDescriptionSize:"",fontName:"font_0",fontDescription:"font_9"},spark:{name:"Spark",description:"Sharp and inspired with a flicker of excitement",fontNameSize:"",fontDescriptionSize:"",fontName:"font_2",fontDescription:"font_9"},sugar:{name:"Sugar",description:"Sweet and lively with a hint of spice and everything nice",fontNameSize:"",fontDescriptionSize:"",fontName:"font_6",fontDescription:"font_9"},"sugar-2":{name:"Sugar 2",description:"Sweet and lively with a hint of spice and everything nice",fontNameSize:"",fontDescriptionSize:"",fontName:"font_6",fontDescription:"font_9"},tender:{name:"Tender",description:"Soft and gentle with a warm, welcoming character",fontNameSize:"",fontDescriptionSize:"",fontName:"font_0",fontDescription:"font_9"},timeless:{name:"Timeless",description:"An enduring, ageless look that never goes out of style",fontNameSize:"",fontDescriptionSize:"",fontName:"font_0",fontDescription:"font_9"},unplugged:{name:"Unplugged",description:"An edgy vibe, raw and exposed",fontNameSize:"",fontDescriptionSize:"",fontName:"font_0",fontDescription:"font_9"},upbeat:{name:"Upbeat",description:"Bright and optimistic with a captivating energy",fontNameSize:"",fontDescriptionSize:"",fontName:"font_0",fontDescription:"font_9"},vintage:{name:"Vintage",description:"A retro tone, like a valuable antique that's been renewed",fontNameSize:"",fontDescriptionSize:"",fontName:"font_0",fontDescription:"font_9"},vogue:{name:"Vogue",description:"Striking glamour with a touch of je ne sais quoi",fontNameSize:"",fontDescriptionSize:"",fontName:"font_0",fontDescription:"font_9"}}}return a}();a.FontDataForThumbnail=b}(builder||(builder={})),angular.module("siteGeneratorStaticsConsumerAppInternal").constant("fontDataForThumbnail",new builder.FontDataForThumbnail);var OnstageEvents=function(){function a(){this.HIDE="HIDE",this.RENAME_BUTTON="RENAME_BUTTON",this.EDIT_LIST_ITEM="EDIT_LIST_ITEM",this.HIDE_LIST_ITEM="HIDE_LIST_ITEM",this.DELETE_LIST_ITEM="DELETE_LIST_ITEM",this.DUPLICATE_LIST_ITEM="DUPLICATE_LIST_ITEM",this.LIST_ITEM_TO_PAGE="LIST_ITEM_TO_PAGE",this.OPEN_MEDIA_MANAGER="OPEN_MEDIA_MANAGER",this.CROP_IMAGE="CROP_IMAGE",this.EDIT_BACKGROUND="EDIT_BACKGROUND",this.MANAGE_PAGES="MANAGE_PAGES",this.OPEN_SETTINGS="OPEN_SETTINGS",this.LINK_TO="LINK_TO",this.MEDIA_LINK_TO="MEDIA_LINK_TO",this.TO_SETTING_MEDIA_LINK_TO="TO_SETTING_MEDIA_LINK_TO",this.FOCUS_CONTENT="FOCUS_CONTENT",this.EDIT_CONTENT="EDIT_CONTENT",this.OPEN_SEO="OPEN_SEO",this.OPEN_SOCIAL_PANEL="OPEN_SOCIAL_PANEL",this.CHANGE_GALLERY_TYPE="CHANGE_GALLERY_TYPE"}return a}();angular.module("siteGeneratorStaticsConsumerAppInternal").constant("ONSTAGE_EVENTS",new OnstageEvents);var TpaAppInstanceHolder=function(){function a(){}return a.prototype.updateCurrentlyManagedInstance=function(a,b){this.currentlyManagedTpaInstanceId=b},a.prototype.getCurrentlyManagedInstance=function(){return this.currentlyManagedTpaInstanceId},a}();angular.module("siteGeneratorCommon").constant("tpaAppInstanceHolder",new TpaAppInstanceHolder),angular.module("siteGeneratorContentManagerInternal").constant("contentCMSFallback",{industryAncestry:["9e0d43c23f82998a6ac269b5","0e7f141a196bcc3bd9ed0670"],pages:[{id:"1fe99a018486bb847d2d8fe5",name:"Home",sections:[{id:"Welcome",ceType:"Welcome",cardinality:1,header:{prefix:"",hidden:[],labels:{}},footer:{prefix:"",hidden:[],labels:{}},item:{prefix:"",hidden:[],labels:{longText:"Description"}},dbId:"0cb352d003dfebe801b8a3ea",syncWithBooking:"none",preferredMedia:null},{id:"About",ceType:"Homepage_about",cardinality:1,header:{prefix:"",hidden:[],labels:{}},footer:{prefix:"",hidden:[],labels:{}},item:{prefix:"",hidden:[],labels:{longText:"Description"}},dbId:"7d8e9fb29d64167e6762f2e0",syncWithBooking:"none",preferredMedia:null}],optional:!1}],contentItems:[{industryIds:[],structureIds:["e51e11f3597e0c565deb792f"],sectionIds:["Welcome"],content:{title:["{{GeneralDescription.BusinessName}}"],subTitle:["Doing Business the Right Way"],longText:["Welcome to {{GeneralDescription.BusinessName}}. Our main goal is to always achieve a high level of customer satisfaction with the services and products that we provide. This simple approach has effectively fueled our growth since we opened our doors in {{GeneralDescription.YearFounded}}. We’re thrilled you’ve decided to visit us - please browse our site to discover what we’re all about."],button:["Get in Touch"]},sets:[]},{industryIds:[],structureIds:["e51e11f3597e0c565deb792f"],sectionIds:["About"],content:{title:["About Us"],subTitle:["Our Background"],longText:["As one of the leading local businesses in the {{Contact.City}} area, we attribute our reputation to the lasting customer relationships we’ve developed throughout the years. We believe that all of our customers deserve the highest level of service, and we are committed to providing just that. Get in touch today to learn more."],button:["Contact"]},sets:[]}],kits:["56ea6ad2688a379f00b7d1f1","56a9cb909abbe1240060883c","56dff911433b5a5b001fe394","57021f5f0ac9962e00c8e5d4","56e59effcc38532900200577","579ef944a10db9520021b737","5868d4eb6764341f00cac0c6","56e57bfd917ec97a001e0f1a","571cadb3ff1cf8f8009ba1e7","585fb8e641d27e20005b9b63","570267dce69a766d001fbb20","585fac6a41d27e20005b9b5e","56e6d6d18d7e8364002629da","56e178c9aeeaf64900372cd6","56e0514d203a352000f655b4","56e03c0d40213a5700098eee","56f8e5ff2479f32000bb279a","56dd4d23a23c9120000cdae0","56d45a44952a2d370028a4da","56e52efbe394dda300b8519c","56f7c38a0b19ae2e00eaab27","56e7d6b101e8043700af8382","56f3b343c9e0624900dfb8f1","56e98ace8b6487fc00c58822","56f801b45cd1577600f36112","56e91b1c7471472e009ffa46","5702657d8b893b91002cde69","56dd4bc6ea63ca680027c89e","56f93d103f30a72e0004f8d5","56e80ad06c755b9a00887e26","570243aca24ae92e00ad3204","56f26ee2596068370028f88e","56f9147e2479f32000bb279b","56dff99f9a628e8800362dd4","56e17e13f241a288009888d1","56e52be07e8ffe5b00846e59","570225f6e4b8ef9a00841798","56a49c8dfb85744900a2b2b1","57b05bd92560436d00544050","57b07fc1b0ff73640098ce3e","56e964357ab3fc3700a1197f","584d5fbdc8e7512000dad50f","5682a826a81c70310001c611","5682ae70a81c70310001c64c","5697e4d67bfbe94400385a70","568297b6208c4c310054508b","587b3a36c587ef1400686bc5","587b7e7dc25b1014009cba44","587b9783c587ef1400686bca","587babe4c25b1014009cba49","5869222c7f055d1f00e42a28"],placeholders:[]});var ContentDefaults=function(){function a(){}return a}();ContentDefaults.images=[{Description:"",Link:{},Title:"Misty Slope",fileName:"Misty Slope",height:1280,mediaType:"image",relativeUri:"99ec98fdb81945c29c25a3ad6c5606b1.jpg",width:1920},{Description:"",Link:{},Title:"Taj Mahal",fileName:"Taj Mahal",height:1275,mediaType:"image",relativeUri:"d967ba93f0314c78924edc8a8c8cfa15.jpg",width:1920},{Description:"",Link:{},Title:"Palm Trees",fileName:"Palm Trees",height:1280,mediaType:"image",relativeUri:"3cd1de924697419088c1e033bb3384ef.jpg",width:1920}],ContentDefaults.clipart={Title:"Black and White Star in Circle",fileName:"Black and White Star in Circle",mediaType:"clipart",relativeUri:"cd115295292ab894d58b44978c02d931.png",uri:"cd115295292ab894d58b44978c02d931.png",fileUrl:"media/cd115295292ab894d58b44978c02d931.png",width:378,height:349},ContentDefaults.shape={Description:"",Link:{},Title:"Graphic Shape 4",fileName:"Graphic Shape 4",mediaType:"shape",relativeUri:"shapes/92535d40ff564d3a9f61477bcdceb206.svg"},ContentDefaults.extVideo={videoUrl:"https://youtu.be/Pdq8ddrLd1A",videoId:"Pdq8ddrLd1A",thumbnailUrl:"https://i.ytimg.com/vi/Pdq8ddrLd1A/hqdefault.jpg",width:480,height:360,Title:"Wix default video",Description:"",mediaType:"extVideo",active:!0,controls:1,playmode:{autoplay:!0,loop:!1}},ContentDefaults.bgVideo={mediaType:"video",fileName:"11062b_3e2f37c297534f9ead156265242fbca8",uri:"11062b_3e2f37c297534f9ead156265242fbca8",fileUrl:"video/11062b_3e2f37c297534f9ead156265242fbca8",title:"Urban View",fileInput:{audioBitrate:196,videoBitrate:10082,height:1080,width:1920,fps:25,duration:19600,type:"video",displayAspectRatio:"16:9"},fileOutput:{image:[{status:"READY",secure:!1,format:"jpg",url:"media/11062b_3e2f37c297534f9ead156265242fbca8f000.jpg",height:1080,width:1920,key:"poster.0"},{status:"READY",secure:!1,format:"jpg",url:"media/11062b_3e2f37c297534f9ead156265242fbca8f001.jpg",height:1080,width:1920,key:"poster.1"},{status:"READY",secure:!1,format:"jpg",url:"media/11062b_3e2f37c297534f9ead156265242fbca8f002.jpg",height:1080,width:1920,key:"poster.2"},{status:"READY",secure:!1,format:"jpg",url:"media/11062b_3e2f37c297534f9ead156265242fbca8f003.jpg",height:1080,width:1920,key:"poster.3"}],video:[{status:"READY",audioBitrate:-1,secure:!1,fps:25,format:"mp4",url:"video/11062b_3e2f37c297534f9ead156265242fbca8/480p/mp4/file.mp4",height:480,videoBitrate:877,tag:"High",key:"480p.mp4",duration:19600,displayAspectRatio:"16:9",quality:"480p",width:854},{status:"READY",audioBitrate:-1,secure:!1,fps:25,format:"webm",url:"video/11062b_3e2f37c297534f9ead156265242fbca8/480p/webm/file.webm",height:480,videoBitrate:1457,tag:"High",key:"480p.webm",duration:19600,displayAspectRatio:"16:9",quality:"480p",width:854},{status:"READY",audioBitrate:-1,secure:!1,fps:25,format:"mp4",url:"video/11062b_3e2f37c297534f9ead156265242fbca8/720p/mp4/file.mp4",height:720,videoBitrate:3362,tag:"HD",key:"720p.mp4",duration:19600,displayAspectRatio:"16:9",quality:"720p",width:1280},{status:"READY",audioBitrate:-1,secure:!1,fps:25,format:"webm",url:"video/11062b_3e2f37c297534f9ead156265242fbca8/720p/webm/file.webm",height:720,videoBitrate:3954,tag:"HD",key:"720p.webm",duration:19600,displayAspectRatio:"16:9",quality:"720p",width:1280},{status:"READY",audioBitrate:-1,secure:!1,fps:25,format:"mp4",url:"video/11062b_3e2f37c297534f9ead156265242fbca8/1080p/mp4/file.mp4",height:1080,videoBitrate:5753,tag:"HD",key:"1080p.mp4",duration:19600,displayAspectRatio:"16:9",quality:"1080p",width:1920},{status:"READY",audioBitrate:-1,secure:!1,fps:25,format:"webm",url:"video/11062b_3e2f37c297534f9ead156265242fbca8/1080p/webm/file.webm",height:1080,videoBitrate:7151,tag:"HD",key:"1080p.webm",duration:19600,displayAspectRatio:"16:9",quality:"1080p",width:1920}]},vendor:"bigstock&bigstock&bigstock&clipcanvas",reference:"v49780622&v493478872&v49737086&v318347",fileBaseUrl:"video/11062b_3e2f37c297534f9ead156265242fbca8",relativeUri:"11062b_3e2f37c297534f9ead156265242fbca8",thumbnailUrl:"https://static.wixstatic.com/media/11062b_3e2f37c297534f9ead156265242fbca8f002.jpg/v1/fit/w_288,h_155/11062b_3e2f37c297534f9ead156265242fbca8f002.jpg",Title:"Urban View",Description:"",controls:0,playmode:{autoplay:!0,loop:!0},active:!0},ContentDefaults.BackgroundImages=[{uri:"2379e4390e594221acd483caa3d5afc7.jpg",fileUrl:"media/2379e4390e594221acd483caa3d5afc7.jpg",Description:"",Link:{},Title:"Stormy Sea",fileName:"Stormy Sea",height:938,mediaType:"image",relativeUri:"2379e4390e594221acd483caa3d5afc7.jpg",width:1668},{uri:"cd7b6a553a774ce780addec100682fca.jpg",fileUrl:"media/cd7b6a553a774ce780addec100682fca.jpg",Description:"",Link:{},Title:"Wooden Stairs",fileName:"Wooden Stairs",height:938,mediaType:"image",relativeUri:"cd7b6a553a774ce780addec100682fca.jpg",width:1668},{uri:"4d5f2554f931463aa9fdaef1e0d2ecb9.jpg",fileUrl:"media/4d5f2554f931463aa9fdaef1e0d2ecb9.jpg",Description:"",Link:{},Title:"Foggy Mountains",fileName:"Foggy Mountains",height:938,mediaType:"image",relativeUri:"4d5f2554f931463aa9fdaef1e0d2ecb9.jpg",width:1668},{uri:"bd25f30956dc48209db806fcff2388f6.jpg",fileUrl:"media/bd25f30956dc48209db806fcff2388f6.jpg",Description:"",Link:{},Title:"Sand Desert",fileName:"Sand Desert",height:938,mediaType:"image",relativeUri:"bd25f30956dc48209db806fcff2388f6.jpg",width:1668},{uri:"5dadfd66dd1644648b00e5e817af30f6.jpg",fileUrl:"media/5dadfd66dd1644648b00e5e817af30f6.jpg",Description:"",Link:{},Title:"Black Marble",fileName:"Black Marble",height:938,mediaType:"image",relativeUri:"5dadfd66dd1644648b00e5e817af30f6.jpg",width:1668},{uri:"95017e4b1ba74b09853aa12cdc8a9d62.jpg",fileUrl:"media/95017e4b1ba74b09853aa12cdc8a9d62.jpg",Description:"",Link:{},Title:"Magnified Grass",fileName:"Magnified Grass",height:938,mediaType:"image",relativeUri:"95017e4b1ba74b09853aa12cdc8a9d62.jpg",width:1668},{uri:"1f298e41bf3246d7a52d3bb8be1b084a.jpg",fileUrl:"media/1f298e41bf3246d7a52d3bb8be1b084a.jpg",Description:"",Link:{},Title:"Dark Leaf",fileName:"Dark Leaf",height:938,mediaType:"image",relativeUri:"1f298e41bf3246d7a52d3bb8be1b084a.jpg",width:1668},{uri:"c6df3104034149ba9ca173dfb8bf326c.jpg",fileUrl:"media/c6df3104034149ba9ca173dfb8bf326c.jpg",Description:"",Link:{},Title:"Abstract Architecture",fileName:"Abstract Architecture",height:938,mediaType:"image",relativeUri:"c6df3104034149ba9ca173dfb8bf326c.jpg",width:1668}];var ContentScores=function(){function a(){}return a}();ContentScores.scoreForDefaultContent=.05,ContentScores.scoreForDefaultIndustry=.3,ContentScores.scoreForDefaultSpecificIndustry=.4,ContentScores.scoreForFullSignature=4,ContentScores.scoreForNoIndustrySignature=3,ContentScores.scoreForNoStructureSignature=2,ContentScores.scoreForNoStructureAndIndustrySignature=1,ContentScores.scoreForUsingDefaultValues=.5,ContentScores.scoreForUsingPlaceholderValues=.9,ContentScores.scoreForUsingTemplateValues=1;var ContentInterpolator=function(){function a(a,b){this.$interpolate=a,this.flags=b}return a.$inject=["$interpolate","flags"],a.prototype.interpolateSingleValue=function(a,b,c,d){if(!_.isString(a))return{content:a,score:1,isFinal:!0};var e=this.$interpolate(a,!0,null,!0);if(!e)return{content:a,score:1,isFinal:!0};var f=e({});if(f)return{content:f,score:ContentScores.scoreForUsingDefaultValues,isFinal:!0};var g=e(b);if(g)return{content:g,score:ContentScores.scoreForUsingTemplateValues,isFinal:!0};var h=e(c);if(h)return{content:h,score:ContentScores.scoreForUsingPlaceholderValues,isFinal:!0};var i=e(d),j=void 0!==i,k=this.flags.keepScoreForNonFinalTemplates?j?ContentScores.scoreForUsingDefaultValues:1:ContentScores.scoreForUsingDefaultValues;return{content:i||a,score:k,isFinal:j}},a}();angular.module("siteGeneratorContentManagerInternal").service("contentInterpolator",ContentInterpolator);var ContentElementGenerator=function(){function a(a,b,c,d,e,f,g,h,i,j){this.consumerBiLogger=a,this.ContentElement=b,this.contentAllocator=c,this.contentMapCreator=d,this.siteModelData=e,this.mediaGallery=f,this.contentNormalizer=g,this.contentInterpolator=h,this.nodeTitleManager=i,this.flags=j,this.contentItemElements={},this.backgroundMedia={},this.lastSocialImageCount=0,this.preparedImages=[]}return a.$inject=["consumerBiLogger","ContentElement","contentAllocator","contentMapCreator","siteModelData","mediaGallery","contentNormalizer","contentInterpolator","nodeTitleManager","flags"],a.prototype.initialize=function(a){this.contentItemElements=a,this.flags.sectionBackground&&this.initBackgroundRepository()},a.prototype.generate=function(a,b){return void 0===b&&(b=0),1===a.cardinality?this.generateSingleContentElement(a,b):this.generateListContentElement(a,b)},a.prototype.generateListContentElement=function(a,b){var c=this;void 0===b&&(b=0);var d=a.cardinality;if(this.flags.variableListCardinality&&3===a.cardinality){Math.seedrandom(Date.now());var e=Math.random();e>.75?d=4:.25>e&&(d=2)}var f={self:{items:_.range(0,d).map(function(a){return{}}),header:{},footer:{}}};return{type:a.ceType,items:_.range(0,d).map(function(d){return c.generateSingleContentElement(a,d+b,f.self.items[d],{self:f.self.items[d]},!0,a.ceType)}),header:this.generateSingleContentElement(this.createListSection(a,!0),0,f.self.header,f,!1,a.ceType),footer:this.generateSingleContentElement(this.createListSection(a,!1),0,f.self.footer,f,!1,a.ceType)}},a.prototype.getMediaFieldValue=function(a,b,c){var d=b;a.setValues&&0===b.length&&(d=this.contentAllocator.getMediaValue(a.setValues,c,!1));var e=_.uniq(_.map(d,function(a){return a.mediaType}));return d.concat(this.contentAllocator.getMediaValue(a.itemValues,c,!0,e))},a.prototype.getNonMediaFieldValue=function(a,b,c,d){var e=b.setValues||b.itemValues,f=this.createSortedScoresWithSelfValues(e,d);if(!f.length)return null;var g=c%f.length,h=f[g];return h.setItems&&(this.setItems=h.setItems),this.contentAllocator.getFieldValue(h,a)},a.prototype.generateSingleContentElement=function(a,b,c,d,e,f){var g=this;void 0===b&&(b=0),void 0===c&&(c={}),void 0===d&&(d={self:c}),void 0===e&&(e=!1),void 0===f&&(f="");var h=this.getAdjustedCEType(a),i=new this.ContentElement(h,null),j=this.resolveContentItemElements(a);this.setFallbackDefaultValues(h,e,f),this.resetSets();var k=0,l=function(){g.flags.preferSocialImages&&g.contentMapCreator.settings.socialImageUsagefilter.indexOf(h.toLowerCase())>-1&&g.consumerBiLogger.sectionManagement.fetchImagesInAddSectionPanel(k,"recommended",a.id,h)},m=function(a,c){var e=g.resolveItemValuesForField(j,a,b);if(!e.itemValues)return g.getDefaultValue(h,c);if("media"===a.type){var f=g.useSocialImages(h);return f.length&&(i.usesSocialImages=!0),k=g.preparedImages?g.preparedImages.length:0,g.getMediaFieldValue(e,f,b)}var l=g.getNonMediaFieldValue(a,e,b,d);return l||g.getDefaultValue(h,c)};return _.forEach(i.values,function(a,b){a.value=m(a,b),c[a.subType]=a.value}),l(),this.setupFieldLabels(i,a),this.setHiddenMedia(i),this.flags.sectionBackground&&!e&&this.addBackgroundMedia(i,a),i},a.prototype.getAdjustedCEType=function(a){return this.isListHeader(a)?"ListHeader":this.isListFooter(a)?"ListFooter":a.ceType.trim()},a.prototype.resolveContentItemElements=function(a){var b=this.getSectionCEType(a),c=b in this.contentItemElements?ob.deepClone(this.contentItemElements[b]):{},d=ob.deepClone(c);return a.id&&a.id!==b&&this.handleAliasContentOverride(c,a.id.trim()),this.removeLowerScoredContent(c),this.completeMissingMediaTypes(c.image,d.image),c},a.prototype.handleAliasContentOverride=function(a,b){var c=this.contentItemElements[b]||{};_.keys(c).forEach(function(b){var d=b in a,e=d?_.any(a[b],function(a){return a.setItems}):!1,f=_.any(c[b],function(a){return a.setItems});d&&e&&!f||(a[b]=c[b])})},a.prototype.removeLowerScoredContent=function(a){_.keys(a).forEach(function(b){var c=0,d=0;_.forEach(a[b],function(a){a.setItems&&a.score>d&&(d=a.score),!a.setItems&&a.score>c&&(c=a.score)}),d>0?a[b]=_.filter(a[b],function(a){return a.score===d&&a.setItems}).map(function(a,c){var d=_.find(a.setItems,function(a){return a.field===b});return d&&d.index>c&&(d.index=c),a}):c>0&&(a[b]=_.filter(a[b],function(a){return a.score===c}))})},a.prototype.resetSets=function(){this.setItems=null,this.setContent={}},a.prototype.resolveItemValuesForField=function(a,b,c){var d=a&&a[b.subType],e=ob.deepClone(this.contentItemElements[ContentMapCreator.DefaultSectionKey][b.subType]),f=ob.deepClone(d||e),g=this.tryGetSetValues(b);return g||this.setItems||(f=this.setupSetsIfNeeded(a,d,e,c)),"media"===b.type&&this.completeMissingMediaTypes(f,e),{itemValues:f,setValues:g}},a.prototype.completeMissingMediaTypes=function(a,b){if(a){var c=this.getAllMediaTypes(a),d=this.scoreMissingMediaByType(b,c),e=d.content,f=d.maxScoreByType;this.addMissingMediaByTypeScore(a,e,f)}},a.prototype.getAllMediaTypes=function(a){var b=a.map(function(a){return _.map(a.content,function(a){return a.mediaType})});return _(b).flatten().uniq().value()},a.prototype.scoreMissingMediaByType=function(a,b){var c=this,d=[],e={};return a?(a.forEach(function(a){var f=c.removeContentEntriesByMediaType(a,b);d.push(f),f.content.forEach(function(b){var c=_.get(e,b.mediaType,0);a.score>c&&(e[b.mediaType]=a.score)})}),{content:d,maxScoreByType:e}):{content:d,maxScoreByType:e}},a.prototype.addMissingMediaByTypeScore=function(a,b,c){_.forEach(b,function(b){var d=ob.deepClone(b);_.remove(d.content,function(a){var d=c[a.mediaType];return b.score<d}),a.push(d)})},a.prototype.removeContentEntriesByMediaType=function(a,b){var c=ob.deepClone(a);return _.remove(c.content,function(a){return _.contains(b,a.mediaType)}),c},a.prototype.setupSetsIfNeeded=function(a,b,c,d){var e=null,f=b?d%b.length:0;return b&&b.length>0&&b[f].setItems?(this.setItems=b[f].setItems,this.setContent=a,e=b):c&&c.length>0&&c[0].setItems?(this.setItems=c[0].setItems,this.setContent=ob.deepClone(this.contentItemElements[ContentMapCreator.DefaultSectionKey]),e=c):e=b||c,e},a.prototype.getDefaultValue=function(a,b){var c=this.contentNormalizer.normalizeKey(b),d=a+"."+c;if(_.has(this.contentMapCreator.settings.replacements,d)){var e=_.get(this.contentMapCreator.settings.replacements,d);if("undefined"!=typeof e)return e}return this.fallbackDefaultValues?this.fallbackDefaultValues[b]:"button"===b?{callToAction:"Click Me"}:void 0},a.prototype.setFallbackDefaultValues=function(a,b,c){this.fallbackDefaultValues=this.siteModelData.getDefaultValuesForCeType(a,b,c),_.isArray(this.fallbackDefaultValues)&&this.fallbackDefaultValues.length>0&&(this.fallbackDefaultValues=this.fallbackDefaultValues[0])},a.prototype.tryGetSetValues=function(a){var b=this.setItems?_.find(this.setItems,{field:a.subType}):null;return b?[this.setContent[a.subType][b.index]]:null},a.prototype.createSortedScoresWithSelfValues=function(a,b){var c=this,d=_.map(a,function(a){return c.interpolateNonFinal(a,b)}).filter(function(a){return a.isFinal});return _.sortBy(d,function(a){return-a.score})},a.prototype.interpolateNonFinal=function(a,b){if(!a.isFinal){var c=this.contentInterpolator.interpolateSingleValue(a.content,b,_.merge(this.contentMapCreator.replacementsWithPlaceholders,b),_.merge(this.contentMapCreator.replacementsWithDefaults,b));return c.score*=a.score,c}return a},a.prototype.createListSection=function(a,b){var c=angular.copy(a);return b?(c.id+="_ListHeader",c.item=a.header):(c.id+="_ListFooter",c.item=a.footer),c},a.prototype.getSectionCEType=function(a){return this.isListHeader(a)?a.ceType+"_ListHeader":this.isListFooter(a)?a.ceType+"_ListFooter":a.ceType},a.prototype.isListHeader=function(a){return a.id&&a.id.endsWith("Header")},a.prototype.isListFooter=function(a){return a.id&&a.id.endsWith("Footer")},a.prototype.setHiddenMedia=function(b){var c=this;b.setHiddenMedia({});var d=_.find(b.values,{type:"media"});if(d){var e={},f=_.filter(d.value,function(a){return"image"===a.mediaType});_.drop(f,a.MaxInitialActiveImages).forEach(function(a){e[c.mediaGallery.getItemId(a)]=!0}),b.setHiddenMedia({image:e})}},a.prototype.scoreImage=function(a){var b=1,c=0;if(a.width*a.height*a.fileSize!==0){c+=a.width/1e3>1?b:0,c+=a.height/1e3>1?b:0;var d=a.height/a.width;c+=d>.7&&1.5>d?b:0;var e=Math.log(1e3*a.file_size/(a.width*a.height));c+=e}return c},a.prototype.prepareImages=function(){var a=this,b=this.contentMapCreator.settings.getSocialImages();if(b&&(0===this.lastSocialImageCount||b.length>this.lastSocialImageCount)){var c=_(b).filter(function(a){return"picture"===a.mediaType}).each(function(b){a.contentNormalizer.convertFromWixmpSearchResult(b),b.mediaType="image",b.score=a.scoreImage(b)}).sortByOrder("score","desc").value();this.lastSocialImageCount=b.length,this.preparedImages=c}},a.prototype.useSocialImages=function(a){return this.contentMapCreator.settings.socialImageUsagefilter&&this.contentMapCreator.settings.getSocialImages&&this.contentMapCreator.settings.socialImageUsagefilter.indexOf(a.toLowerCase())>-1?(this.prepareImages(),_.filter(this.preparedImages.slice(20),function(){return _.random(0,20)>2})):[]},a.prototype.getMediaField=function(a){var b=function(a){return"media"===a.type},c=Object.keys(a.values).find(function(c){return b(a.values[c]);
});return c&&a.values[c]},a.prototype.createListMediaField=function(a){return a.values.ListImage={type:"media",subType:"image",value:[]}},a.prototype.addBackgroundMedia=function(a,b){var c=this,d=this.isListHeader(b)||this.isListFooter(b),e=this.getMediaField(a);if(!e&&d&&(e=this.createListMediaField(a)),e){var f={},g=function(a){var b=c.mediaGallery.getItemId(a);b in c.backgroundMedia?(a.usage=core.MediaUsageType.All,f[b]=!0):a.usage=core.MediaUsageType.Content};if(e.value=e.value||[],e.value.forEach(g),"Welcome"!==a.type)_.keys(this.backgroundMedia).forEach(function(a){a in f||e.value.push(c.backgroundMedia[a])});else{var h=ContentDefaults.BackgroundImages.map(function(a){return Object.assign({},a,{usage:core.MediaUsageType.Bg})});(i=e.value).push.apply(i,h)}var i}},a.prototype.initBackgroundRepository=function(){var a=this,b={id:"Welcome",ceType:"Welcome"},c=this.generateSingleContentElement(b),d=c&&c.values.WelcomeMedia;d&&d.value&&d.value.filter(function(a){return"image"===a.mediaType||"video"===a.mediaType}).map(function(a){return Object.assign({},a,{usage:core.MediaUsageType.Bg})}).forEach(function(b){return a.backgroundMedia[a.mediaGallery.getItemId(b)]=b}),ContentDefaults.BackgroundImages.map(function(a){return Object.assign({},a,{usage:core.MediaUsageType.Bg})}).forEach(function(b){return a.backgroundMedia[a.mediaGallery.getItemId(b)]=b})},a.prototype.setupFieldLabels=function(a,b){var c=this,d=b.item,e=null;"ListHeader"===b.ceType||b.id&&b.id.endsWith("ListHeader")?(d=b.header,e="header"):"ListFooter"===b.ceType||b.id&&b.id.endsWith("ListFooter")?(d=b.footer,e="footer"):b.cardinality>1&&(e="item"),_.forEach(a.values,function(b){d&&d.labels&&b.subType in d.labels?b.displayName=d.labels[b.subType]:b.displayName=c.nodeTitleManager.getFieldLabel(b,e,"Contact"===a.type)})},a.prototype.getTpaMetaSiteIds=function(){var a=_(this.contentItemElements).pick(["Blog","Stores","ProGallery_Widget","Pro Gallery widget"]).reduce(function(a,b,c){return a[c]=b.metasite[0].content,a},{});return a.ProGallery_Widget=a.ProGallery_Widget||a["Pro Gallery widget"],a},a}();ContentElementGenerator.MaxInitialActiveImages=6,angular.module("siteGeneratorContentManagerInternal").service("contentElementGenerator",ContentElementGenerator);var ContentManager=function(){function a(b,c,d,e,f,g,h,i,j,k,l,m,n,o,p,q){var r=this;this.consumerBiLogger=b,this.cmsApi=c,this.defaultsService=d,this.contentCMSFallback=e,this.contentElementGenerator=f,this.contentMapCreator=g,this.contentSuggestSections=h,this.contentModelTree=i,this.defaultSections=j,this.contentNormalizer=k,this.applicationState=l,this.storyServices=m,this.$q=n,this.wixmpServices=o,this.applicationParameters=p,this.flags=q,this.socialImageRetryCount=0,this.shouldRetrySocialImages=function(){return r.socialImageRetryCount<=a.socialImageRetryCountMax||!r.socialImages||r.socialImages.length<a.enoughSocialImages},this.mockDefaults={GeneralDescription:_.zipObject(a.mockDefaultsValues,a.mockDefaultsValues)},this.mockDefaults.GeneralDescription.title="Business Name"}return a.$inject=["consumerBiLogger","cmsApi","defaultsService","contentCMSFallback","contentElementGenerator","contentMapCreator","contentSuggestSections","contentModelTree","defaultSections","contentNormalizer","applicationState","storyServices","$q","wixmpServices","applicationParameters","flags"],a.prototype.initialize=function(a){var b=this;return this._initialized?this.initParams.industryId===a.industryId&&this.initParams.structureId===a.structureId?this._initialized.then(function(){return b.initSocialImages()}):(this._initialized.stop(),this._initialized=this.initializeInternal(a),this._initialized):(this._initialized=this.initializeInternal(a),this._initialized)},a.prototype.initializeInternal=function(a){var b=this;this.initParams=a;var c=utils.stoppable(this.cmsApi.load(this.initParams))["catch"](function(){return b.cmsApi.load(_.clone(intro.DEFAULT_CATEGORY))})["catch"](function(){return b.contentCMSFallback}).then(function(a){return b.cmsData=a}).then(function(){return b.initSocialImages()}).then(function(){b.buildContentMap(),b.buildAliasToTypeMap()});return c},a.prototype.isSocialImageEnabled=function(){return this.flags.preferSocialImages&&this.storyServices.story&&this.storyServices.story.privateMediaFolderId},a.prototype.initSocialImages=function(){var a=this;return this.isSocialImageEnabled()&&this.shouldRetrySocialImages()?this.wixmpServices.getSocialImages(this.storyServices.story.privateMediaFolderId,!0).then(function(){a.socialImageRetryCount+=1,a.socialImages=a.wixmpServices.socialImages&&a.wixmpServices.socialImages.data,a.socialImages&&a.consumerBiLogger.warn(BIErrorCodes.GeneralWarning,"Social Images found: "+a.socialImages.length)}):this.$q.when()},a.prototype.buildContentMap=function(){var a=this,b={structureId:this.initParams.structureId,industryId:this.initParams.industryId,contentItems:this.cmsData.contentItems,placeholders:this.cmsData.placeholders,replacements:this.contentModelTree.getValues(),defaultReplacements:this.mockDefaults,getSocialImages:function(){return a.socialImages},socialImageUsagefilter:[]};this.flags.preferSocialImages&&(b.socialImageUsagefilter="all"===this.flags.preferSocialImages?["about","inner_about","homepage_about","welcome","contact"]:["about","inner_about","homepage_about"]),this.contentMap=this.contentMapCreator.createMap(b),this.contentElementGenerator.initialize(this.contentMap)},a.prototype.buildAliasToTypeMap=function(){var a=this;return this.aliasToTypeMap={},_.forEach(this.cmsData.pages,function(b){_.forEach(b.sections,function(b){b.id&&b.id!==b.ceType&&(a.aliasToTypeMap[b.id]=b.ceType)})}),this.aliasToTypeMap},a.prototype.getAliasForType=function(a){return _.findKey(this.aliasToTypeMap,function(b){return b===a})},a.prototype.getKitIds=function(){return this.cmsData&&this.cmsData.kits},a.prototype.suggestedSections=function(a){return this.throwIfNotInitialized(),this.contentSuggestSections.suggest(this.cmsData.pages,this.defaultSections.list,a)},a.prototype.suggestedSectionsByPage=function(a){this.throwIfNotInitialized();var b=_.find(this.cmsData.pages,function(b){return b.name===a}),c=_.map(b.sections,function(a){return{ceType:a.ceType,id:a.id,section:a,isCurrentPage:!1,isRecommendedPage:!0,isRecommendedForSite:!1,rawSectionBrief:a}});return c},a.prototype.suggestedPages=function(a,b){void 0===b&&(b=!0),this.throwIfNotInitialized();var c=this.contentSuggestSections.suggestPages(this.cmsData.pages,this.defaultSections.list,a);return b&&c.pageSuggestions.push({id:"Blank",pageTitle:"Blank",isBlank:!0,ceType:"Blank",rawSectionBrief:{}}),c},a.prototype.prepareDrafts=function(a,b,c){var d=this;void 0===b&&(b=1),void 0===c&&(c=0);var e=this.generateRandomOffset(a);return _.range(b).map(function(b){return d.contentElementGenerator.generate(a.rawSectionBrief,c+b+e)})},a.prototype.generateRandomOffset=function(a){return this.applicationState.generateRandomOffset(a.id?a.id:a.ceType)},a.prototype.getTpaMetaSiteIds=function(){var a=this.contentElementGenerator.getTpaMetaSiteIds(),b=this.applicationParameters.tpaTypes.Stores.type,c=this.applicationParameters.tpaTypes.Blog.type;return a[b]=a[b]||"e681103e-6662-41ca-8196-f995c9f0558d",a[c]=a[c]||"b0ee2dd4-d99b-42b4-a04e-d3a80588ed27",a},a.prototype.contentOptions=function(a,b,c,d){var e=this;if(void 0===d&&(d=!1),!this.contentMap[a]||!this.contentMap[a][b])return[];if(d){var f=_.find(this.contentMap[a][b],function(a){return e.isTextMatch(a,c)&&e.setHasImage(a)});return f?_.filter(this.contentMap[a][b],function(a){return e.isTextMatch(a,c)&&e.setHasImage(a)}).map(function(b){return e.createMediaTextOption(a,b)}):[]}return _.filter(this.contentMap[a][b],function(a){return e.isTextMatch(a,c)&&!a.setItems}).map(function(a){return e.contentNormalizer.normalizeText(a.content)})},a.prototype.createMediaTextOption=function(a,b){var c=_.find(b.setItems,{field:"image"}),d=this.contentMap[a][c.field][c.index];return{text:this.contentNormalizer.normalizeText(b.content),media:this.contentNormalizer.normalizeMedia(d.content.length?d.content[0]:d.content)}},a.prototype.isTextMatch=function(a,b){return a.isFinal&&-1!==a.content.indexOf(b)},a.prototype.setHasImage=function(a){return a.setItems&&!!_.find(a.setItems,{field:"image"})},a.prototype.throwIfNotInitialized=function(){if(!this.cmsData)throw"Content Manager called without proper initialization";this.initSocialImages()},a}();ContentManager.mockDefaultsValues=["title","practice1","practice3","teamMember1","teamMember3","newsItemTitle2","clientName2","eventName2","eventName3","industry2","service","typeOfTrip1","typeOfTrip3","vacationSpecial1","vacationSpecial3","newsItem1","newsItem3","customerName1","customerName3","jobTitle2","date","industry1","industry3","travelDestination1","travelDestination3","newsItemDate","companySize","practice2","yearFounded","city","teamMember2","year","openingHours"],ContentManager.enoughSocialImages=10,ContentManager.socialImageRetryCountMax=5,angular.module("siteGeneratorContentManagerInternal").service("contentManager",ContentManager);var ContentSource=function(){function a(a){this.contentManager=a,this.provider=this.contentManager}return a.$inject=["contentManager"],a.prototype.useProvider=function(a){this.provider=a},a.prototype.suggestedSections=function(a){return this.provider.suggestedSections(a)},a.prototype.prepareDrafts=function(a,b,c){return void 0===b&&(b=1),void 0===c&&(c=0),this.provider.prepareDrafts(a,b,c)},a}();angular.module("siteGeneratorContentManagerInternal").service("contentSource",ContentSource);var ContentModelTree=function(){function a(a,b,c){this.modelTree=a,this.storyServices=b,this.contentNormalizer=c}return a.$inject=["modelTree","storyServices","contentNormalizer"],a.prototype.isSectionInTree=function(a){var b=this.storyServices.story.selectedPage,c=this.modelTree.getPageNodeById(b),d=c&&c.children;return _.filter(d,function(b){var c=b.getContentElementType()===a.ceType||b.parentContentElementType===a.ceType,d=a.id===a.ceType||a.id===b.alias,e="Homepage_about"===a.ceType||"OpeningHours"===a.ceType||"Contact"===a.ceType;return(e||!a.id||d)&&c}).length>0},a.prototype.getPageTitleValues=function(){return _.map(this.modelTree.getPagesNodes(),function(a){return a.alias})},a.prototype.getValues=function(){var a=this,b={};return this.modelTree.traverse(function(c){var d=c.getContentElementType();return d&&(b[d]=a.getNodeValues(c)),0}),b},a.prototype.getNodeValues=function(a){var b=this,c={},d=a.getContentElement();return d&&d.values?(_.forEach(d.values,function(a,d){if(a.value){var e=b.contentNormalizer.normalizeKey(d);c[e]=a.value}}),c):c},a}();angular.module("siteGeneratorContentManagerInternal").service("contentModelTree",ContentModelTree);var ContentMapCreator=function(){function a(a,b,c){this.contentInterpolator=a,this.contentNormalizer=b,this.flags=c}return a.$inject=["contentInterpolator","contentNormalizer","flags"],a.prototype.createMap=function(a){return this.settings=a,this.initReplacements(),this.sortMapByScore(this.initMap())},a.prototype.initMap=function(){var b=this,c={};return c[a.DefaultSectionKey]={},this.settings.contentItems?(this.settings.contentItems.forEach(function(d){var e=d.sectionIds.length>0&&d.sectionIds[0]!==a.DefaultSectionKey;if(e)_.forEach(d.sectionIds,function(a){a=b.contentNormalizer.normalizeSectionId(a),_.has(c,a)||(c[a]={});var e=c[a],f=b.calculateItemSignatureScore(d);b.addContent(e,d,f)});else{var f=b.calculateItemSignatureScore(d,!0),g=c[a.DefaultSectionKey];b.addContent(g,d,f)}}),c):c},a.prototype.calculateItemSignatureScore=function(a,b){void 0===b&&(b=!1);var c=a.structureIds&&a.structureIds.length>0,d=a.industryIds&&a.industryIds.length>0;return b?this.scoreDefaultContent(a):c&&d?ContentScores.scoreForFullSignature:c&&!d?ContentScores.scoreForNoIndustrySignature:!c&&d?ContentScores.scoreForNoStructureSignature:ContentScores.scoreForNoStructureAndIndustrySignature},a.prototype.scoreDefaultContent=function(a){var b=a.industryIds&&a.industryIds.length>0,c=b&&_.contains(a.industryIds,this.settings.industryId);return b?c?ContentScores.scoreForDefaultSpecificIndustry:ContentScores.scoreForDefaultIndustry:ContentScores.scoreForDefaultContent},a.prototype.addContent=function(a,b,c){var d=this,e={};_.forEach(b.content,function(b,f){var g=b.map(function(a,b){var e=d.contentInterpolator.interpolateSingleValue(a,d.settings.replacements,d.replacementsWithPlaceholders,d.replacementsWithDefaults);return e.score*=c,e}),h=a[f];e[f]=h?h.length:0,a[f]=(h||[]).concat(g)}),this.buildSets(b.sets,a,e)},a.prototype.buildSets=function(a,b,c){_.forEach(a,function(a){var d=_.map(a,function(a,b){return{field:b,index:a+c[b]}});_.forEach(d,function(a){var c=b[a.field][a.index];c.setItems=d})})},a.prototype.sortMapByScore=function(a){return _.mapValues(a,function(a){return _.mapValues(a,function(a){return _.sortBy(a,function(a){return a.isFinal&&-a.score})})})},a.prototype.initReplacements=function(){this.preprocessReplacements();var a=this.createPlaceholderReplacements();this.replacementsWithPlaceholders=_.merge({},a,this.settings.replacements),this.replacementsWithDefaults=_.merge({},this.settings.defaultReplacements,a,this.settings.replacements)},a.prototype.preprocessReplacements=function(){var a=this;this.settings.replacements&&this.iterateValues(this.settings.replacements,function(b){return a.contentNormalizer.normalizeRichText(b)})},a.prototype.iterateValues=function(a,b){for(var c in a)a.hasOwnProperty(c)&&("object"==typeof a[c]?this.iterateValues(a[c],b):a[c]=b(a[c]))},a.prototype.createPlaceholderReplacements=function(){var a=this;if(!this.settings.placeholders)return{};var b={};return _.forEach(this.settings.placeholders,function(c){var d=c.structureId&&c.structureId===a.settings.structureId,e=!c.structureId&&!_.has(b,c.name);(e||d)&&(_.set(b,c.name,c["default"]),_.set(b,"placeholder."+c.name,c["default"]),c.value&&!c.value.startsWith("self.")&&_.set(b,c.value,c["default"]))}),b},a}();ContentMapCreator.DefaultSectionKey="#DEFAULT#",angular.module("siteGeneratorContentManagerInternal").service("contentMapCreator",ContentMapCreator);var ContentAllocator=function(){function a(a,b){this.contentNormalizer=a,this.flags=b}return a.$inject=["contentNormalizer","flags"],a.prototype.fillDefaultValue=function(a,b,c){return(!a||0===a.length&&c)&&(a=[].concat(ContentDefaults[b])),a},a.prototype.getMediaValue=function(a,b,c,d){var e=this;void 0===c&&(c=!1),void 0===d&&(d=[]);var f=this.getMediaContent(a,b,"video"),g=this.getMediaContent(a,b,"image"),h=this.getMediaContent(a,b,"shape"),i=this.getMediaContent(a,b,"clipart"),j=this.getMediaContent(a,b,"extVideo");return f=this.fillDefaultValue(f,"bgVideo",c),g=this.fillDefaultValue(g,"images",c),h=this.fillDefaultValue(h,"shape",c),i=this.fillDefaultValue(i,"clipart",c),j=this.fillDefaultValue(j,"extVideo",c),g.concat(h).concat(i).concat(f).concat(j).filter(function(a){return!_.contains(d,a.mediaType)}).map(function(a){return e.contentNormalizer.normalizeMedia(a)})},a.prototype.getFieldValue=function(a,b){var c=a&&a.content;return"string"==typeof c&&(c=this.contentNormalizer.normalizeText(c)),"button"===b.type?{callToAction:c}:c},a.prototype.getMediaContent=function(a,b,c){var d=this,e={},f=0;if(_.filter(a,function(a){return a.score}).forEach(function(a){var b=_.filter(a.content,function(a){return a.mediaType===c});if(b.length>0){var d=e[a.score]||[];a.score>f&&(f=a.score),e[a.score]=d.concat(b)}}),0===f)return[];var g=e[f];return _.range(0,g.length).map(function(a){var c=d.cycleIndex(b+a,g.length);return d.contentNormalizer.normalizeMedia(g[c])})},a.prototype.cycleIndex=function(a,b){return a%b},a}();angular.module("siteGeneratorContentManagerInternal").service("contentAllocator",ContentAllocator);var ContentNormalizer=function(){function a(a){this.richTextService=a}return a.$inject=["richTextService"],a.prototype.convertFromWixmpSearchResult=function(a){_.assign(a,{Link:{},Description:"",Title:"Untitled",fileName:"Untitled",mediaType:"image",relativeUri:a.id})},a.prototype.normalizeMedia=function(a){return"shape"===a.mediaType?a=this.normalizeShape(a):"video"===a.mediaType&&(a=this.normalizeVideo(a)),a.title&&(a.Title=a.title,delete a.title),_.defaults(a,{Description:"",Link:{},Title:""})},a.prototype.normalizeShape=function(a){return a.fileUrl&&(a.relativeUri=a.fileUrl),a.relativeUri=(a.relativeUri||"").replace(/\.js$/,".svg"),a.relativeUri&&!a.relativeUri.startsWith("shapes/")&&(a.relativeUri="shapes/"+a.relativeUri),a},a.prototype.normalizeVideo=function(a){return a.fileOutput||(a=this.simulateWixVideoItem(a)),!_.has(a,"thumbnailUrl")&&a.posters&&a.posters.length>0&&(a.thumbnailUrl="https://static.wixstatic.com/media/"+a.posters[0].uri+"_srz_p_100_70_75_22_0.50_1.20_0.00_jpg_srz"),a},a.prototype.simulateWixVideoItem=function(a){var b=a.fileName,c=a.width,d=a.height,e=a.duration,f=a.displayAspectRatio,g=a.videoBitrate,h=a.audioBitrate,i=a.fps,j=a.title;return{mediaType:"video",fileName:b,uri:b,fileUrl:"video/"+b,title:j,fileInput:{audioBitrate:h/1e3,videoBitrate:g/1e3,height:d,width:c,fps:i,duration:e,type:"video",displayAspectRatio:f},fileOutput:{image:[{status:"READY",secure:!1,format:"jpg",url:"media/"+b+"f000.jpg",height:d,width:c,key:"poster.0"},{status:"READY",secure:!1,format:"jpg",url:"media/"+b+"f001.jpg",height:d,width:c,key:"poster.1"},{status:"READY",secure:!1,format:"jpg",url:"media/"+b+"f002.jpg",height:d,width:c,key:"poster.2"},{status:"READY",secure:!1,format:"jpg",url:"media/"+b+"f003.jpg",height:d,width:c,key:"poster.3"}],video:[{status:"READY",audioBitrate:-1,secure:!1,fps:i,format:"mp4",url:"video/"+b+"/480p/mp4/file.mp4",height:480,videoBitrate:877,tag:"High",key:"480p.mp4",duration:e,displayAspectRatio:f,quality:"480p",width:Math.round(480*c/d)},{status:"READY",audioBitrate:-1,secure:!1,fps:i,format:"webm",url:"video/"+b+"/480p/webm/file.webm",height:480,videoBitrate:1457,tag:"High",key:"480p.webm",duration:e,displayAspectRatio:f,quality:"480p",width:Math.round(480*c/d)},{status:"READY",audioBitrate:-1,secure:!1,fps:i,format:"mp4",url:"video/"+b+"/720p/mp4/file.mp4",height:720,videoBitrate:3362,tag:"HD",key:"720p.mp4",duration:e,displayAspectRatio:f,quality:"720p",width:Math.round(720*c/d)},{status:"READY",audioBitrate:-1,secure:!1,fps:i,format:"webm",url:"video/"+b+"/720p/webm/file.webm",height:720,videoBitrate:3954,tag:"HD",key:"720p.webm",duration:e,displayAspectRatio:f,quality:"720p",width:Math.round(720*c/d)},{status:"READY",audioBitrate:-1,secure:!1,fps:i,format:"mp4",url:"video/"+b+"/1080p/mp4/file.mp4",height:1080,videoBitrate:5753,tag:"HD",key:"1080p.mp4",duration:e,displayAspectRatio:f,quality:"1080p",width:Math.round(1080*c/d)},{status:"READY",audioBitrate:-1,secure:!1,fps:i,format:"webm",url:"video/"+b+"/1080p/webm/file.webm",height:1080,videoBitrate:7151,tag:"HD",key:"1080p.webm",duration:e,displayAspectRatio:f,quality:"1080p",width:Math.round(1080*c/d)}]},vendor:"bigstock&bigstock&bigstock&clipcanvas",reference:"v49780622&v493478872&v49737086&v318347",fileBaseUrl:"video/"+b,relativeUri:b,thumbnailUrl:"https://static.wixstatic.com/media/"+b+"f002.jpg/v1/fit/w_288,h_155/"+b+"f002.jpg",Title:j,Description:"",controls:0,playmode:{autoplay:!0,loop:!0},active:!0}},a.prototype.normalizeText=function(a){var b=a.replace(/^\s+|\s+$/g,"").replace(/</g,"_").replace(/>/g,"_").replace(/\{\{(\w|\s|^\.)*\}\}/g,this.normalizeToken);return b?b:"no-text"},a.prototype.normalizeRichText=function(a){if(!this.richTextService.isRichText(a))return a;var b=this.richTextService.unMarkRichText(a);return this.richTextService.resetFormatting(b)},a.prototype.normalizeKey=function(a){if(-1===a.indexOf(" "))return a;var b=a.replace(/\w\S*/g,function(a){return a.charAt(0).toUpperCase()+a.substr(1).toLowerCase()});return b.replace(/\s/g,"")},a.prototype.normalizeSectionId=function(a){var b=a.indexOf("_");return-1!==b&&(a=a.substr(0,b+1)+a[b+1].toUpperCase()+a.substr(b+2)),a.trim()},a.prototype.normalizeToken=function(a){var b=a.replace("{{","").replace("}}","").trim();return-1!==b.indexOf(" ")&&(b="'"+b+"'"),b?"{{"+b+"}}":""},a}();angular.module("siteGeneratorContentManagerInternal").service("contentNormalizer",ContentNormalizer);var ContentSuggestSections=function(){function a(a,b,c,d){this.contentModelTree=a,this.storyServices=b,this.modelTree=c,this.flags=d}return a.$inject=["contentModelTree","storyServices","modelTree","flags"],a.prototype.suggest=function(b,c,d){var e=this,f=_.filter(c,function(a){return!a.flag||e.flags[a.flag]}),g=this.sectionListFromPageList(b).concat(this.suggestDefaults(f)),h=this.generateUniqueSuggestions(g);d&&(h=_.filter(h,function(b){return-1===a.blacklistedAliasesForStore.indexOf(b.rawSectionBrief.id)}));var i=_.findIndex(h,function(a){return!e.contentModelTree.isSectionInTree(a.rawSectionBrief)}),j=_.filter(h,function(a){return!e.contentModelTree.isSectionInTree(a.rawSectionBrief)&&a.isRecommendedForPage}).length;return{suggestions:h,selectedIndex:i,remainingSuggestedSections:j}},a.prototype.suggestPages=function(b,c,d){var e=this,f=_.filter(b,function(a){return!e.isHomePage(a)}).map(function(a){return{ceType:a.sections[0].ceType,id:a.sections[0].id,pageTitle:a.name,isRecommendedPage:!a.optional,isRecommendedForSite:!0,rawSectionBrief:a.sections[0]}});d&&(f=_.filter(f,function(b){return-1===a.blacklistedPageNamesForStore.indexOf(b.id)}));var g=this.contentModelTree.getPageTitleValues(),h=_.findIndex(f,function(a){return-1===g.indexOf(a.pageTitle)});return{pageSuggestions:f,selectedIndex:h}},a.prototype.suggestDefaults=function(a){return _.map(a,function(a){return{section:a,isCurrentPage:!1,isRecommendedPage:!1,isRecommendedForSite:!1}})},a.prototype.generateUniqueSuggestions=function(a){var b=this,c=a.map(function(a){var c=a.section,d=a.isCurrentPage,e=a.isRecommendedPage,f=a.isRecommendedForSite;return{ceType:c.ceType,id:c.id?c.id:c.ceType,isRecommendedForPage:d,isRecommendedPage:e,isRecommendedForSite:f,isUsedAlready:b.modelTree.isTypeUsedInPage(c.id,c.ceType),rawSectionBrief:c}}),d=_.sortBy(c,function(a){return a.isRecommendedPage?0:1}),e=_.sortBy(d,function(a){return a.isRecommendedForPage?0:1});return _.uniq(e,!1,"id")},a.prototype.sectionListFromPageList=function(a){var b=this;return _.flatten(a.map(function(a){return a.sections.map(function(c){return{section:c,isCurrentPage:b.isCurrentPage(a),isRecommendedPage:!a.optional,isRecommendedForSite:!0}})}))},a.prototype.isCurrentPage=function(a){var b=this.storyServices.story&&this.storyServices.story.selectedPage;if(!b)return!1;var c=this.modelTree.getPageNodeById(b);if(!c)return!1;var d=a.name.trim().toLowerCase(),e=c.alias;return e?(e=e.trim().toLowerCase(),e===d):!1},a.prototype.isHomePage=function(b){return b.name.trim().toLowerCase()===a.DefaultHomePageName},a}();ContentSuggestSections.DefaultHomePageName="home",ContentSuggestSections.blacklistedAliasesForStore=["All Products","Collections","Products","Custom Design","Customer Favorites","Featured Inventory","Gift Cards","Gift Certificates","Gift Certificates","Gift Shop","Home & Personal","Inventory","Merchandise","My Products","New Collection","New Releases","Our Collection","Our Inventory","Packing Supplies","Parts","Shop","Wedding Arrangements","Special Offers","Specialty Items","Used Products","Used Collection","What we buy","Our Products"],ContentSuggestSections.blacklistedPageNamesForStore=["Products","Our Products","Special Offers","Shop","Merchandise","Store","Packing Supplies","Guided Tours","Gift Shop","Business Travel","Mobile App","Our Inventory","Inventory","My Products","Products By Request","Custom Design","Gift Cards","Gift Certificates","Home & Personal","Books","Parts","Specialty Items"],angular.module("siteGeneratorContentManagerInternal").service("contentSuggestSections",ContentSuggestSections);var NodeTitleManager=function(){function a(a,b,c){this.applicationState=a,this.sitePartTypes=b,this.richTextService=c}return a.$inject=["applicationState","sitePartTypes","richTextService"],a.prototype.getNodeTitleValue=function(a){var b="title";"Testimonial"===a.getContentElementType()&&(b="subTitle");var c=_.findKey(a.contentElement.values,function(a){return a.subType===b}),d=c?this.humanize(a.contentElement.values[c].value):null;return d},a.prototype.isListHeaderFooter=function(a){return a.isListItem&&("ListHeader"===a.contentElement.type||"ListFooter"===a.contentElement.type)},a.prototype.getNodeTitle=function(a){var b="",c=this.applicationState.getContentFocus();if(a.contentElement){var d=a.alias,e=a.contentElement.type;b=d?this.isListHeaderFooter(a)?d+e:d:"GeneralDescription"===e&&c?c.sitePart===this.sitePartTypes.HEADER?"Header":"Footer":"Homepage_about"===e||"Inner_about"===e?"About":e}else b=a.alias?a.alias:a.getContentElementType();return this.humanize(b)},a.prototype.getFieldLabel=function(a,b,c){var d=a.displayName;return"undefined"==typeof a.displayName&&(d="media"===a.type?"Media":this.normalizeSubType(a.subType,b,c)),d},a.prototype.normalizeSubType=function(a,b,c){if(void 0===b&&(b=null),void 0===c&&(c=!1),a){var d=a;switch(a){case"title":d="item"===b?"Name":"Title";break;case"subTitle":d="Subtitle";break;case"longText":d="item"===b||c?"Description":"Paragraph";break;case"form":d="Contact Form"}switch(d=_.capitalize(d),b){case"header":return"Header "+d;case"footer":return"Footer "+d;case"item":return"button"===a?d:"Item "+d}return d}},a.prototype.humanize=function(a){if(!a)return"";this.richTextService.isRichText(a)&&(a=this.richTextService.unMarkRichText(a),a=this.richTextService.resetFormatting(a));var b=a.replace(/_/g,"").replace(/([A-Z])/g," $1").trim();return 0===b.length?"":b[0].toUpperCase()+b.substring(1).replace(/([a-z])(?=[A-Z])/g,"$1 ")},a}();angular.module("siteGeneratorContentManagerInternal").service("nodeTitleManager",NodeTitleManager);var WizContentManager=function(){function a(a,b,c){this.contentManager=a,this.defaultSections=b,this.ContentElement=c,this.nSingleSectionsAdded=0}return a.$inject=["contentManager","defaultSections","ContentElement"],a.prototype.resetState=function(){this.nSingleSectionsAdded=0},a.prototype.suggestedSections=function(a){var b=this;return this.resetState(),{suggestions:this.getSectionsFromWizPage(this.getWizMainPage()).map(function(a){return b.extractSectionSuggestionFromWizBlock(a)}).filter(_.isObject),selectedIndex:0,remainingSuggestedSections:null}},a.prototype.prepareDrafts=function(a,b,c){return a.data?[this.generateContentElement(a)]:this.contentManager.prepareDrafts(a,b,c)},a.prototype.isListHeader=function(a){return a.id&&a.id.endsWith("Header")},a.prototype.isListFooter=function(a){return a.id&&a.id.endsWith("Footer")},a.prototype.getAdjustedCEType=function(a){return this.isListHeader(a)?"ListHeader":this.isListFooter(a)?"ListFooter":a.ceType.trim()},a.prototype.generateContentElement=function(a){return 1===a.rawSectionBrief.cardinality?this.generateSingleContentElement(a):this.generateListContentElement(a)},a.prototype.generateSingleContentElement=function(a,b,c,d,e,f){void 0===b&&(b=0),void 0===c&&(c={}),void 0===d&&(d={self:c}),void 0===e&&(e=!1),void 0===f&&(f="");var g=this.getAdjustedCEType(a.rawSectionBrief),h=new this.ContentElement(g,null),i=e?a.data.contents.list[b]:a.data.contents;return h.setArgsMatchingPolicy({}),this.populateValuesInContentElement(h,i),h},a.prototype.populateValuesInContentElement=function(a,b){var c=this;_.forEach(a.values,function(d,e){var f=null;switch(d.subType){case"image":f=c.getMediaFromWizMediaArray(b.media);break;case"longText":f=b.paragraph||"";break;case"subTitle":f=b.subtitle||"";break;case"title":f=b.title||"";break;case"button":f=c.getButtonValueFromWizLink(b.button)}if(null!==f){a.values[e].value=f;var g=a.getArgsMatchingPolicy();g[e]=g[e]||!!f}})},a.prototype.generateListContentElement=function(a){var b=this,c={self:{items:_.range(0,a.rawSectionBrief.cardinality).map(function(a){return{}}),header:{},footer:{}}};return{type:a.ceType,items:_.range(0,a.rawSectionBrief.cardinality).map(function(d){return b.generateSingleContentElement(a,d,c.self.items[d],{self:c.self.items[d]},!0,a.ceType)}),header:this.generateSingleContentElement(this.createListSection(a,!0),0,c.self.header,c,!1,a.ceType),footer:this.generateSingleContentElement(this.createListSection(a,!1),0,c.self.footer,c,!1,a.ceType)}},a.prototype.createListSection=function(a,b){var c=angular.copy(a);return b?(c.id+="_ListHeader",c.rawSectionBrief.id+="_ListHeader",c.rawSectionBrief.item=a.rawSectionBrief.header):(c.id+="_ListFooter",c.rawSectionBrief.id+="_ListFooter",c.rawSectionBrief.item=a.rawSectionBrief.footer),c},a.prototype.getURLFromWizLink=function(a){return a.url},a.prototype.getMediaFromWizMedia=function(a){var b={Description:"",Link:{targetUrl:"https://www.facebook.com/wix"},Title:"",fileName:"facebook",height:200,mediaType:"image",platform:"facebook",relativeUri:"0fdef751204647a3bbd7eaa2827ed4f9.png",width:200};return b},a.prototype.getMediaFromWizMediaArray=function(a){var b=this;return a?a.map(function(a){return b.getMediaFromWizMedia(a)}):""},a.prototype.getButtonValueFromWizLink=function(a){if(!a)return{callToAction:"",media:[],targetUrl:""};var b={callToAction:a.text||"",media:[this.getMediaFromWizMedia(a.media)],targetUrl:this.getURLFromWizLink(a),isPageRef:!1};return b},a.prototype.getSectionsFromWizPage=function(a){return a.sections.filter(function(a){return"single"===a.type||"list"===a.type})},a.prototype.extractSectionSuggestionFromWizBlock=function(a){var b,c;switch(a.type){case"single":b=this.getSingleCEType(),c=1,this.nSingleSectionsAdded++;break;case"list":b=this.getListCEType(),c=a.list.length;break;case"menu":return null}var d=this.defaultSections.list.filter(function(a){return a.ceType===b})[0].id,e={id:d,ceType:b,cardinality:c,item:{prefix:"",hidden:[[]],labels:{}},header:{prefix:"",hidden:[[]],labels:{}},footer:{prefix:"",hidden:[[]],labels:{}}},f={ceType:b,id:d,isRecommendedForPage:!0,rawSectionBrief:e,origin:"wiz",data:{type:"wizBlock",contents:a}};return f},a.prototype.getSingleCEType=function(){return 0===this.nSingleSectionsAdded?"Welcome":"About"},a.prototype.getListCEType=function(){return"Service"},a.prototype.getWizMainPage=function(){return _.first(this.getWizAnalysis().pages.filter(function(a){return"/"===a.path}))},a.prototype.getWizAnalysis=function(){return{pages:[{title:"Bass Fishing Florida Everglades - Catch the fish of a lifetime with Captain Brett Isackson",path:"/",sections:[{type:"single",title:"Bass Fishing Florida Everglades",paragraph:" Catch the fish of a lifetime with Captain Brett Isackson Captain Brett - (954) 445-4516"},{type:"single",title:"",paragraph:"",media:[{type:"image",url:"https://i0.wp.com/bassfishingfloridaeverglades.com/wp-content/uploads/2017/06/Brett-SL-boat.jpg?fit=960%2C375&ssl=1"}]},{type:"list",list:[{type:"single",title:"Everglades Fishing",paragraph:" Bass Fishing Florida Everglades.com gives you all the information you could ever want to know about Everglades Fishing in South Florida. If you live in Florida or are looking to take a bass fishing trip in the Sunshine state, you should definitely check this location out. I offer great bass fishing …",media:[{type:"image",url:"https://i2.wp.com/bassfishingfloridaeverglades.com/wp-content/uploads/P1000859.jpg?resize=150%2C150&ssl=1"}],button:{text:"{Read more...}",url:"https://bassfishingfloridaeverglades.com/everglades/everglades-fishing/",type:"internal"}},{type:"single",title:"Peacock Bass",paragraph:"You're probably wondering what Peacock Bass has to do with South Florida? Well South Florida has the Amazon Butterfly Peacock Bass stocked right here in the United States in South Florida areas of Miami, in an a round Ft. Lauderdale and Palm Beach. Why these Peacock Bass aren't the big brutes of …",media:[{type:"image",url:"https://i0.wp.com/bassfishingfloridaeverglades.com/wp-content/uploads/100_0003-web.jpg?resize=150%2C150&ssl=1"}],button:{text:"{Read More...}",url:"https://bassfishingfloridaeverglades.com/peacock-bass/",type:"internal"}},{type:"single",title:"Lake Okeechobee",paragraph:" Lake Okeechobee is a Seminole name that means “Big Water,” is the second largest lake in the United States. Lake Okeechobee is approximately 45 miles north to south and 32 plus miles east to west and covers over 740 square miles. It is typically a very shallow lake with an average depth of 6 …",
media:[{type:"image",url:"https://i2.wp.com/bassfishingfloridaeverglades.com/wp-content/uploads/Obrien3.jpg?resize=150%2C150&ssl=1"}],button:{text:"{Read more...}",url:"https://bassfishingfloridaeverglades.com/lake-okeechobee/",type:"internal"}},{type:"single",title:"Snakehead Fishing",paragraph:" Florida Snakehead fishing can only be described as being extremely aggressive and voracious, but based on our personal observations the species collected in Florida appears to be one of the more aggressive species of snakeheads. The species got to Florida by a illegal introduction of exotics in the …",media:[{type:"image",url:"https://i0.wp.com/bassfishingfloridaeverglades.com/wp-content/uploads/Richard-and-Jay-snakeheads.-e13343580901822-150x150.jpg?resize=150%2C150&ssl=1"}],button:{text:"{Read More...}",url:"https://bassfishingfloridaeverglades.com/snakehead-fishing/",type:"internal"}}]},{type:"single",title:"",paragraph:" Leave a message",media:[{type:"image",url:"https://s7.mylivechat.com/Customization/Template/InPageBubbleTop_Offline_3.png"}]},{type:"list",list:[{type:"single",title:"South Florida Bass Fishing Trip With Capt Brett Isackson",paragraph:" South Florida Bass Fishing Trip With Capt Brett Isackson Hi everyone this is Capt Brett Isackson with your South Florida bass fishing report. I have had with Dana and Mathew out on the water and we have been fishing from Lake Okeechobee to Lake Ida, today has been the best day we caught over 35 […]",media:[{type:"image",url:"https://i2.wp.com/bassfishingfloridaeverglades.com/wp-content/uploads/2016/12/Untitled-1-7.jpg?resize=150%2C150&ssl=1"}]},{type:"single",title:"Everglades Bass Fishing Guide Capt Brett Isackson",paragraph:" Everglades Bass Fishing Guide Capt Brett Isackson hey there this is your Everglades Bass Fishing Guide Capt Brett Isackson with a fishing report i was out today in the everglades doing an artificial trip with repeat customer we caught about 40 fish 45 fish and an eight hour day on artificial a lot of top […]",media:[{type:"image",url:"https://i1.wp.com/bassfishingfloridaeverglades.com/wp-content/uploads/2016/12/bi1.jpg?resize=150%2C150&ssl=1"}]}],header:{type:"single",title:"Latest Fishing Reports",paragraph:""}},{type:"single",title:"",paragraph:"",media:[{type:"image",url:"https://bassfishingfloridaeverglades.com/wp-content/plugins/sam-images/Southern%20Sportsman%20250.gif"}]},{type:"single",title:"24/7 ONLINE BOOKINGS",paragraph:"",media:[{type:"image",url:"https://i1.wp.com/bassfishingfloridaeverglades.com/wp-content/uploads/2014/12/EVERGLADES-FISHING.gif?ssl=1"}]},{type:"list",list:[{type:"single",title:"",paragraph:"",media:[{type:"image",url:"https://i2.wp.com/bassfishingfloridaeverglades.com/wp-content/uploads/2017/06/logo-penn-250.jpg?fit=250%2C250&ssl=1"}]},{type:"single",title:"",paragraph:"",media:[{type:"image",url:"https://i0.wp.com/bassfishingfloridaeverglades.com/wp-content/uploads/2017/06/fitzgerald-rods-logo-250.jpg?fit=250%2C250&ssl=1"}]},{type:"single",title:"",paragraph:"",media:[{type:"image",url:"https://i2.wp.com/bassfishingfloridaeverglades.com/wp-content/uploads/2017/06/Bang-Lures-Logo-250.jpg?fit=250%2C250&ssl=1"}]}]},{type:"menu",menus:[[{url:"https://bassfishingfloridaeverglades.com/",text:"Home",index:[0,-1],type:"internal"},{url:"https://bassfishingfloridaeverglades.com/about/",text:"About Me",index:[1,-1],type:"internal"},{url:"https://bassfishingfloridaeverglades.com/everglades/everglades-fishing/",text:"Everglades Fishing",index:[2,-1],type:"internal"},{url:"https://bassfishingfloridaeverglades.com/peacock-bass/",text:"Peacock Bass",index:[3,-1],type:"internal"},{url:"https://bassfishingfloridaeverglades.com/snakehead-fishing/",text:"Snakehead Fishing",index:[4,-1],type:"internal"},{url:"https://bassfishingfloridaeverglades.com/category/south-florida-fishing-reports/",text:"Fishing Reports",index:[5,-1],type:"internal"},{url:"https://bassfishingfloridaeverglades.com/fishing-partners/",text:"Fishing Partners",index:[6,-1],type:"internal"},{url:"https://bassfishingfloridaeverglades.com/contact-me/",text:"Contact",index:[7,-1],type:"internal"},{url:"https://bassfishingfloridaeverglades.com/",text:"",index:[8,-1],type:"internal"},{url:"https://bassassassin.com/",text:"",index:[9,-1],type:"external"},{url:"https://myfwc.com/",text:"",index:[10,-1],type:"external"},{url:"https://www.abugarcia.com/",text:"",index:[11,-1],type:"external"},{url:"https://facebook.com/BASSonline",text:"Join Florida Fishing on FACEBOOK",index:[12,-1],type:"external"}],[{url:"https://bassonline.com/",text:"Florida Fishing",index:[0,-1],type:"external"},{url:"https://www.floridafishingnetwork.com/",text:"Network",index:[1,-1],type:"external"},{url:"https://www.outdoorwebdesigns.com/",text:"Outdoor Website Designs",index:[2,-1],type:"external"}]]}]}]}},a}();angular.module("siteGeneratorContentManagerInternal").service("wizContentManager",WizContentManager);var ConsumerMediaUtils=function(){function a(a,b,c,d,e){this.mediaOverrideManager=a,this.mediaGalleryAdapter=b,this.mediaOrganizeAdapter=c,this.consumerBiLogger=d,this.PresetMediaType=e}return a.$inject=["mediaOverrideManager","mediaGalleryAdapter","mediaOrganizeAdapter","consumerBiLogger","PresetMediaType"],a.prototype.getChangeMediaMethod=function(a,b){var c=this.mediaOverrideManager.getAllowedMediaOverride(a)===this.PresetMediaType.COAST2COAST;switch(b){case cc.MediaPreviewType.SingleImage:return this.mediaGalleryAdapter.selectImage.bind(this.mediaGalleryAdapter,c);case cc.MediaPreviewType.MultipleImages:return this.mediaOrganizeAdapter.selectGallery.bind(this.mediaOrganizeAdapter);case cc.MediaPreviewType.ExtVideo:return this.mediaOrganizeAdapter.selectExtVideo.bind(this.mediaOrganizeAdapter);case cc.MediaPreviewType.Video:return this.mediaGalleryAdapter.selectVideo.bind(this.mediaGalleryAdapter);case cc.MediaPreviewType.Shape:return this.mediaGalleryAdapter.selectShape.bind(this.mediaGalleryAdapter);case cc.MediaPreviewType.Clipart:return this.mediaGalleryAdapter.selectClipart.bind(this.mediaGalleryAdapter)}},a.prototype.biSwitchMediaTypeClick=function(a,b){this.consumerBiLogger.contentEditor.switchMediaTypeClick(a.getId(),a.getSpecificContentElementType(),a.alias,this.mediaTypeToString(b))},a.prototype.biReplaceMediaClick=function(a,b){this.consumerBiLogger.contentEditor.clickOnReplaceOrganizeMedia(a.getId(),a.getSpecificContentElementType(),a.alias,this.mediaTypeToString(b))},a.prototype.biCheckIfReplaceLogoClick=function(a,b){"Header"===a.getSpecificContentElementType()&&this.consumerBiLogger.intro.clickOnReplaceLogoIntroWelcometourBuilder("no-tour",b)},a.prototype.biReplaceMediaLoaded=function(a,b,c){this.consumerBiLogger.contentEditor.replaceMediaWindowIsLoaded(a.getId(),a.getSpecificContentElementType(),a.alias,this.mediaTypeToString(b),this.mediaTypeToGalleryType(b),c,null)},a.prototype.biReplaceMediaClosed=function(a,b,c){this.consumerBiLogger.contentEditor.closeMediaWindow(a.getId(),a.getContentElementType(),a.alias,this.mediaTypeToString(b),this.mediaTypeToGalleryType(b),c)},a.prototype.biReplaceMediaApproved=function(a,b,c,d){this.consumerBiLogger.contentEditor.approveChangesInTheMediaWindow(d,a.getId(),a.getContentElementType(),a.alias,this.mediaTypeToString(b),this.mediaTypeToGalleryType(b),c)},a.prototype.mediaTypeToString=function(a){switch(a){case cc.MediaPreviewType.SingleImage:case cc.MediaPreviewType.MultipleImages:return"image";case cc.MediaPreviewType.ExtVideo:return"extVideo";case cc.MediaPreviewType.Shape:return"shape";case cc.MediaPreviewType.Clipart:return"clipart";case cc.MediaPreviewType.Video:return"bgVideo";default:return"unknown_type"}},a.prototype.mediaTypeToGalleryType=function(a){switch(a){case cc.MediaPreviewType.SingleImage:case cc.MediaPreviewType.Shape:case cc.MediaPreviewType.Clipart:case cc.MediaPreviewType.Video:return"single item";case cc.MediaPreviewType.MultipleImages:return"gallery";case cc.MediaPreviewType.ExtVideo:return"external video"}return null},a}();angular.module("siteGeneratorStaticsConsumerAppInternal").service("consumerMediaUtils",ConsumerMediaUtils);var MediaOrganizeDataAdapter=function(){function a(a){this.mediaGallery=a}return a.$inject=["mediaGallery"],a.prototype.prepareData=function(a,b){var c=this;return _(a.media).filter(function(a){return b===a.mediaType}).unique(function(a){return c.mediaGallery.getItemId(a)}).map(function(d){var e=_.get(a.contentElement.hiddenMedia,b,{}),f=e[c.mediaGallery.getItemId(d)]||!1;return _.assign(d,{active:!f})}).value()},a.prototype.handleResult=function(a,b,c,d){var e=this;this.normalizeMedia(a,c);var f=b.media.filter(function(a){return a.mediaType!==c}),g=b.media.filter(function(a){return a.mediaType===c}),h=_.map(g,function(a){return e.mediaGallery.getItemId(a)}),i=_.map(a,function(a){return e.mediaGallery.getItemId(a)}),j=b.contentElement.hiddenMedia[c]||{};if(d){var k=_.difference(i,h),l=_.difference(h,i),m=ob.deepClone(j);_.each(k,function(a){m[a]=!0}),_.each(l,function(a){delete m[a]});var n=_.find(g,function(a){return!j[e.mediaGallery.getItemId(a)]}),o=_.find(a,function(a){return a.active}),p=m[this.mediaGallery.getItemId(o)];delete m[this.mediaGallery.getItemId(o)],p&&n&&(m[this.mediaGallery.getItemId(n)]=p),_.pull(a,o),a.unshift(o),b.contentElement.hiddenMedia[c]=m}else{var q=a.filter(function(a){return!a.active}).map(function(a){return e.mediaGallery.getItemId(a)});b.contentElement.hiddenMedia[c]=_.zipObject(q,_.times(q.length,_.constant(!0)))}b.media.length=0,b.media.push.apply(b.media,a.concat(f));var r=!_.isEqual(g,a),s=!_.isEqual(j,b.contentElement.hiddenMedia[c]),t=r||s;return{isChanged:t,numTotal:a.filter(function(a){return a.active}).length,data:a}},a.prototype.normalizeMedia=function(a,b){_.each(a,function(a){a.mediaType=b})},a}();angular.module("siteGeneratorEditorInternal").service("mediaOrganizeDataAdapter",MediaOrganizeDataAdapter);var MediaOrganizeAdapter=function(){function a(a,b,c,d,e,f,g){this.organizeMedia=a,this.mediaOrganizeDataAdapter=b,this.linkDetailsManager=c,this.$translate=d,this.mediaGalleryCustomTabBuilder=e,this.staticsUrls=f,this.mediaGallery=g}return a.$inject=["organizeMedia","mediaOrganizeDataAdapter","linkDetailsManager","$translate","mediaGalleryCustomTabBuilder","staticsUrls","mediaGallery"],a.prototype.selectImage=function(a){var b=this;return this.organizeMedia.open({mediaGalleryCSSOverridesURL:this.staticsUrls.mediaGalleryCssUrl,title:"Media Manager",subtitle:"Select Image",suggestionsTitle:"Other suggested images, select an image to replace the one on top",dataSource:this.mediaOrganizeDataAdapter.prepareData(a,"image"),type:"image",mode:"single",linkDetailsHandler:this.linkDetailsManager.getLinkDetailsHandler()}).then(function(c){return b.mediaOrganizeDataAdapter.handleResult(c,a,"image",!0)})},a.prototype.selectGallery=function(a,b,c,d){var e,f=this,g=this.mediaOrganizeDataAdapter.prepareData(a,"image");return e=d?d:a?g:[],this.mediaGalleryCustomTabBuilder.buildCustomTabData(e,"image").then(function(a){return f.organizeMedia.open({mediaGalleryCSSOverridesURL:f.staticsUrls.mediaGalleryCssUrl,title:"Organize Your Gallery Images",subtitle:"Drag and drop your media into position to get your gallery nicely organized.",dataSource:e,customData:a,type:"image",mode:"gallery",linkDetailsHandler:f.linkDetailsManager.getLinkDetailsHandler(),mediaGalleryHelpPage:f.$translate("help.mediagallery.imagegallery"),helpPage:f.$translate("help.organizemedia.imagegallery")})}).then(function(b){var d=_.unique(b.concat(g),function(a){return f.mediaGallery.getItemId(a)});if(a){c&&(b=b.filter(function(a){return a.active}),b.map(function(a){var b=f.mediaGallery.getItemId(a);a.active=!!_.get(_.find(g,function(a){return f.mediaGallery.getItemId(a)===b}),"active")}),d=_.unique(g.concat(b),function(a){return f.mediaGallery.getItemId(a)}));var e=f.mediaOrganizeDataAdapter.handleResult(d,a,"image",!1);return e.data=b,e}return d})},a.prototype.selectVideo=function(a){var b=this;return this.organizeMedia.open({mediaGalleryCSSOverridesURL:this.staticsUrls.mediaGalleryCssUrl,title:"Media Manager",subtitle:"Select Video",suggestionsTitle:"Other suggested videos, select a video to replace the one on top",dataSource:this.mediaOrganizeDataAdapter.prepareData(a,"video"),type:"video",mode:"single"}).then(function(c){return b.mediaOrganizeDataAdapter.handleResult(c,a,"video",!1)})},a.prototype.selectExtVideo=function(a){var b=this;return this.organizeMedia.open({mediaGalleryCSSOverridesURL:this.staticsUrls.mediaGalleryCssUrl,title:"Media Manager",subtitle:"Select Video",suggestionsTitle:"Other suggested videos, select a video to replace the one on top",dataSource:this.mediaOrganizeDataAdapter.prepareData(a,"extVideo"),type:"extVideo",mode:"single",helpPage:this.$translate("help.organizemedia.singleextvideo")}).then(function(c){return b.mediaOrganizeDataAdapter.handleResult(c,a,"extVideo",!1)})},a.prototype.selectShape=function(a){var b=this;return this.organizeMedia.open({mediaGalleryCSSOverridesURL:this.staticsUrls.mediaGalleryCssUrl,title:"Media Manager",subtitle:"Select Shape",suggestionsTitle:"Other suggested shapes, select a shape to replace the one on top",dataSource:this.mediaOrganizeDataAdapter.prepareData(a,"shape"),type:"shape",mode:"single",linkDetailsHandler:this.linkDetailsManager.getLinkDetailsHandler()}).then(function(c){return b.mediaOrganizeDataAdapter.handleResult(c,a,"shape",!1)})},a.prototype.selectClipart=function(a){var b=this;return this.organizeMedia.open({mediaGalleryCSSOverridesURL:this.staticsUrls.mediaGalleryCssUrl,title:"Media Manager",subtitle:"Select Clipart",suggestionsTitle:"Other suggested cliparts, select a clipart to replace the one on top",dataSource:this.mediaOrganizeDataAdapter.prepareData(a,"clipart"),type:"clipart",mode:"single",linkDetailsHandler:this.linkDetailsManager.getLinkDetailsHandler()}).then(function(c){return b.mediaOrganizeDataAdapter.handleResult(c,a,"clipart",!1)})},a}();angular.module("siteGeneratorEditorInternal").service("mediaOrganizeAdapter",MediaOrganizeAdapter);var ContentElementFieldManager=function(){function a(a,b,c,d,e,f,g,h,i,j,k,l,m,n,o,p,q,r){var s=this;this.$rootScope=a,this.modelTree=b,this.applicationState=c,this.contentManager=d,this.consumerBiLogger=e,this.mediaOverrideManager=f,this.createGuid=g,this.PresetMediaType=h,this.flags=i,this.nodeFetcher=j,this.$timeout=k,this.onstageActionsManager=l,this.ONSTAGE_EVENTS=m,this.editorEventManager=n,this.nodeEditorManager=o,this.linkDetailsManager=p,this.fieldEditorConfiguration=q,this.pubSub=r,this.referenceFieldsMap={},this.nodeFieldsMap={},this.resetMaps=function(){s.referenceFieldsMap={},s.nodeFieldsMap={}},this.resetFocus=function(a){var b=a||s.nodeFetcher.getCorrectNodeId(s.applicationState.getContentFocus()),c=s.nodeFetcher.getNode(b);if(c){var d=c.node,e=s.extractFieldsFromNode(d),f=e.find(function(a){return a.focused});f&&(f.focused=null)}},n.nodeChangedOnFieldChanged(this.createEditEvent.bind(this)),n.onNodeChanged(function(a){s.nodeEditorManager.updateViewer(a)}),this.flags.onStageIndications&&(this.resetMaps(),l.subscribe(this.ONSTAGE_EVENTS.EDIT_CONTENT,function(a){var b=s.getFields(a.contentElement,s.nodeFetcher.getCurrentActiveNode());b.forEach(function(a){return a.focused=!1}),s.$timeout(function(){b.forEach(function(b){return b.focused=b===a}),r.fire(PubSub.events.BLINK_FIELD,a)})}),l.subscribe(this.ONSTAGE_EVENTS.HIDE,function(a){var b=s.nodeFetcher.getCurrentNode();s.consumerBiLogger.contentEditor.clickOnHideUnhideComponent(b.getId(),b.getSpecificContentElementType(),b.alias,a.key,a.data.subType,"hide",BIOrigins.OSIDropdown),a.active=!1,n.fieldChanged(a,!0,IEditEventType.VisibilityChange,BIOrigins.OSIDropdown)}),l.subscribe(this.ONSTAGE_EVENTS.LINK_TO,function(a){s.onLinkItemEdit(a)}),r.subscribe(PubSub.events.SWITCH_MODE,this.resetMaps),r.subscribe(PubSub.events.NEW_STATE_STORY_WAS_SET,this.resetMaps))}return a.$inject=["$rootScope","modelTree","applicationState","contentManager","consumerBiLogger","mediaOverrideManager","createGuid","PresetMediaType","flags","nodeFetcher","$timeout","onstageActionsManager","ONSTAGE_EVENTS","editorEventManager","nodeEditorManager","linkDetailsManager","fieldEditorConfiguration","pubSub"],a.prototype.extractFieldsFromNode=function(a){var b=this,c=a.isList()?a.children:[a];return c.reduce(function(a,c){return a.concat(b.getFields(c.contentElement,c))},[])},a.prototype.getFields=function(a,b){return this.getNodeFields(a,b).concat(this.getReferencedFields(a,b))},a.prototype.onLinkItemEdit=function(a){var b=this;this.linkDetailsManager.openLinkDetailsDialog(a.data.value,this.nodeFetcher.getCurrentActiveNode(),"button").then(function(c){a.data.value=c,b.editorEventManager.fieldChanged(a,!1,IEditEventType.ValueChange,BIOrigins.OSIDropdown),a.data.linkAsILink=b.fieldEditorConfiguration.getILink(a.data)})},a.prototype.createEditEvent=function(a){var b=a.contentElementField.contentElement,c=this.nodeFetcher.getCurrentNode(),d=this.nodeFetcher.getNodeByContentElement(c,b),e=this.getReferencedFields(d.contentElement,d),f=e&&_.findIndex(e,{key:a.key});return _.assign(a,{node:d,parent:null,isReferencedField:e&&-1!==f})},a.prototype.defineVisibleProperty=function(a,b,c,d){this.applicationState.isInDesktopEditMode()?c.visible=!0:d?c.visible=this.isReferencedFieldActive(a,b):c.visible=this.isFieldActive(a,b)},a.prototype.defineActiveProperty=function(a,b,c,d){var e=this;this.applicationState.isInMobileEditMode()?Object.defineProperty(d,"active",{get:function(){return!e.isFieldHiddenMobile(b,c)},set:function(a){var d=b.getMobileArgsPolicy();d[c]=!a},enumerable:!0,configurable:!0}):Object.defineProperty(d,"active",{get:function(){return e.isFieldActive(b,c)},set:function(a){var d=b.getArgsMatchingPolicy();d[c]=a},enumerable:!0,configurable:!0})},a.prototype.defineActiveReferenceProperty=function(a,b,c,d){var e=this;this.applicationState.isInMobileEditMode()?Object.defineProperty(d,"active",{get:function(){return!e.isReferencedFieldHiddenMobile(b,c)},set:function(a){var d=b.getMobileReferenceFields();d[c]=!a}}):Object.defineProperty(d,"active",{get:function(){return e.isReferencedFieldActive(b,c)},set:function(a){var d=b.getReferenceFields();d[c]=a}})},a.prototype.getNodeFields=function(a,b,c){if(void 0===c&&(c=!0),!a||!a.values)return[];var d;return this.flags.onStageIndications&&_.isUndefined(a.id)&&(a.id=this.createGuid()),this.flags.onStageIndications&&this.nodeFieldsMap[a.id]||(d=this.generateNodeFields(a,b,c).sort(function(b,c){return a.sortFields(b.key)-a.sortFields(c.key)}),this.flags.onStageIndications&&(this.nodeFieldsMap[a.id]=d)),this.flags.onStageIndications?this.nodeFieldsMap[a.id]:d},a.prototype.generateNodeFields=function(a,b,c){var d=this;void 0===c&&(c=!0);var e=this.getSupportedMediaType(b),f=b&&b.alias,g=this.getRelevantFields(a);return _.map(g,function(g,h){var i=b&&b.getContentElementType?b.getContentElementType():a.type,j=c?d.calculateSuggestedContent(f?f:i,i,g.subType,e):[];d.overrideFieldLabel(i,g);var k={key:h,data:g,contentElement:a,suggestedContent:j};return d.defineActiveProperty(b,a,h,k),d.defineVisibleProperty(a,h,k,!1),k})},a.prototype.getReferencedFields=function(a,b){if(!a||!a.type)return[];var c=[];return this.flags.onStageIndications&&_.isUndefined(a.id)&&(a.id=this.createGuid()),this.flags.onStageIndications&&this.referenceFieldsMap[a.id]||(c=this.generateReferenceFields(a,b),this.flags.onStageIndications&&(this.referenceFieldsMap[a.id]=c)),this.flags.onStageIndications?this.referenceFieldsMap[a.id]:c},a.prototype.generateReferenceFields=function(a,b){var c=this,d=[],e=this.modelTree.getAllVisibleContentElements(),f=this.getContentElementReferencedFields(a);return _.keys(f).forEach(function(g){var h=_.find(e,{type:g});if(h){var i=_.map(f[g],function(d){var e=g+"."+d,f=h.values[d];if(f){var i={key:e,data:f,contentElement:a};return c.defineVisibleProperty(a,e,i,!0),c.overrideFieldLabel(g,f),c.defineActiveReferenceProperty(b,a,e,i),i}});d.push.apply(d,i)}}),d},a.prototype.getRelevantFields=function(a){var b=[];return"GeneralDescription"===a.type?b=this.applicationState.isFooterContent()?["BusinessTagline","Logo","logoText","Menu"]:["logoText","CopyrightMessage","fax","address for display"]:"Testimonial"===a.type?b=["CustomerPosition"]:"Contact"===a.type?b=["Contact form title"]:"ListFooter"===a.type&&b.push("ListImage"),_.omit(a.values,b)},a.prototype.overrideFieldLabel=function(a,b){if("GeneralDescription"===a)switch(b.subType){case"title":b.displayName="Business Name";break;case"subTitle":b.displayName="Tagline";break;case"copyrightMSG":b.displayName="Copyright Message";break;case"menu":b.displayName="Menu";break;case"email":b.displayName="Site Email"}else"Contact"===a&&"phoneNumber"===b.subType&&(b.displayName="Phone Number")},a.prototype.getSupportedMediaType=function(a){if(null===a)return"";var b=this.mediaOverrideManager.getAllowedMediaOverride(a);return b===this.PresetMediaType.SHAPE?"shape":b===this.PresetMediaType.IMAGE?"image":null},a.prototype.getHeaderReferencedFields=function(){return{Contact:["phone number"],Social:["SocialButtons"]}},a.prototype.getFooterReferencedFields=function(){return{Contact:["phone number","fax","address for display"],Social:["SocialButtons"]}},a.prototype.getContactReferencedFields=function(){return{Social:["SocialButtons"]}},a.prototype.getContentElementReferencedFields=function(a){return"Contact"===a.type?this.getContactReferencedFields():"GeneralDescription"===a.type?this.applicationState.isFooterContent()?this.getFooterReferencedFields():this.getHeaderReferencedFields():{}},a.prototype.isFieldActive=function(a,b){return null===a.getArgsMatchingPolicy?!0:!!a.getArgsMatchingPolicy()[b]},a.prototype.isFieldHiddenMobile=function(a,b){return null===a.getMobileArgsPolicy?!1:a.getMobileArgsPolicy()[b]},a.prototype.isReferencedFieldActive=function(a,b){var c=a.getReferenceFields();return null!==c&&b in c?c[b]:!1},a.prototype.isReferencedFieldHiddenMobile=function(a,b){var c=a.getMobileReferenceFields();return null!==c&&b in c?c[b]:!1},a.prototype.calculateSuggestedContent=function(a,b,c,d){var e="Service"===b||"FAQ"===b||"Feature"===b||"Client"===b;if(!e||"title"!==c)return[];var f="Feature"===b||"Client"===b,g=this.contentManager.contentOptions(a,c,"",f),h=this.enforceSupportedMediaType(g,d);if(0===h.options.length&&a!==b){var i=this.contentManager.contentOptions(b,c,"",f),j=this.enforceSupportedMediaType(i,d);return j.options}return h.options},a.prototype.enforceSupportedMediaType=function(a,b){if(0===a.length)return{options:[],hasMedia:!1};var c=!1;return _.has(a[0],"media")&&(a=_.map(a,function(a){return a.media.mediaType===b?a:a.text}),c=!0),{options:a,hasMedia:c}},a}();angular.module("siteGeneratorEditorInternal").service("contentElementFieldManager",ContentElementFieldManager);var MediaOverrideManager=function(){function a(b,c,d,e,f,g){this.flags=b,this.mediaOverride=c,this.simpleSolutionManager=d,this.modelTree=e,this.PresetMediaType=f,this.layoutSelectionStoreProvider=g,this.imageAlignmentOptions=[{label:"Top",value:"top"},{label:"Center",value:"center"},{label:"Bottom",value:"bottom"}],b.moreStripGalleries&&(a.MEDIA_DEFAULTS.coast2coast.Accordion=[{name:"stripaccordion",displayName:"Full Width Accordion Slider",properties:{stretch:"coast2coast"}}],a.MEDIA_DEFAULTS.coast2coast["Animated Grid"]=[{name:"stripanimatedgrid3",displayName:"Full Width Animated Grid",properties:{columns:3,stretch:"coast2coast"}}],a.MEDIA_DEFAULTS.coast2coast.Masonry=[{name:"stripmasonry",displayName:"Full Width Masonry",properties:{columns:3}}],a.MEDIA_DEFAULTS.coast2coast.Slider=[{name:"stripslider",displayName:"Full Width Slider",properties:{stretch:"coast2coast"}}],a.MEDIA_DEFAULTS.coast2coast.Thumbnails=[{name:"stripthumbnails",displayName:"Full Width Thumbnail Slideshow",properties:{stretch:"coast2coast"}}],a.MEDIA_DEFAULTS.coast2coast["Grid (with margins)"]=[{name:"stripgrid6",displayName:"Full Width 6 Column Grid",properties:{columns:6}},{name:"stripgrid4",displayName:"Full Width 4 Column Grid",properties:{columns:4}},{name:"stripgrid3",displayName:"Full Width 3 Column Grid",properties:{columns:3}},{name:"stripgrid2",displayName:"Full Width 2 Column Grid",properties:{columns:2}}])}return a.$inject=["flags","mediaOverride","simpleSolutionManager","modelTree","PresetMediaType","layoutSelectionStoreProvider"],a.prototype.findSegment=function(a){var b=this.simpleSolutionManager.getSectionSolution(a.containerPageId,this.modelTree.findIdentifyingNodeId(a)),c=_(b).collect("segments").flatten().find(function(b){return b.node.getId()===a.getId()});return c},a.prototype.getAlignmentOption=function(a){return _.find(this.imageAlignmentOptions,{value:a})},a.prototype.listAlignmentOptions=function(){return this.imageAlignmentOptions},a.prototype.isFitMode=function(a){var b=this.getGallery(a),c=_.get(b,["properties","displayMode"])||"fill";return"full"===c},a.prototype.setFitMode=function(a,b){var c=this.getGallery(a);c&&(c.properties.displayMode=b?"full":"fill",this.setGallery(a,c))},a.prototype.getAvailableGalleries=function(b){var c=this,d=this.getAllowedMediaOverride(b)===this.PresetMediaType.COAST2COAST,e=this.findSegment(b),f=e.getLE(),g=f.getMediaLayout(),h=this.mediaOverride.makeListOfValidatedGalleries(g.argIndex,e),i=this.mediaOverride.getGallery(f,g,e);this.flags.renderedModel&&i&&i.properties&&(i.properties=_.omit(i.properties,"zIndex"));var j=d?a.MEDIA_DEFAULTS.coast2coast:a.MEDIA_DEFAULTS.base;return _(h.valid).filter(function(a){return j[a.name]}).map(function(a){return _(j[a.name]).map(function(b){var e=_.clone(b.properties);d&&(e.stretch="coast2coast");var f=c.mediaOverride.transformGallery(a,e);if(!e.columns||e.columns===f.properties.numCols)return{gallery:f,selected:_.eq(f,i),cssKey:b.name,name:b.displayName||a.name}}).filter().value()}).flatten().sortBy(function(a){return a.selected&&-1||0}).value()},a.prototype.setGallery=function(a,b){if("GeneralDescription"!==a.getContentElementType()){var c=this.findSegment(a);if(!c)return cc.MediaPreviewType.SingleImage;var d=c.getLE(),e=d.getMediaLayout();return this.mediaOverride.setGallery(d,e,c,b)}},a.prototype.getGallery=function(a){var b=this.findSegment(a);if(!b)return null;var c=b.getLE(),d=c.getMediaLayout();return c&&d&&this.mediaOverride.getGallery(c,d,b)},a.prototype.setMediaOverride=function(a,b){if("GeneralDescription"!==a.getContentElementType()){var c=this.findSegment(a),d=c.getLE(),e=d.getMediaLayout();return this.mediaOverride.setGalleryByNameAndValues(d,e,c,b,{})}},a.prototype.getFieldDataType=function(a,b){return"image"===a?this.getSelectedMediaName(b):a},a.prototype.getSelectedMediaName=function(a){var b=this.getCurrentSelectedMediaPreviewType(a);return this.getSelectedMediaNameByTabIndex(b)},a.prototype.getSelectedMediaNameByTabIndex=function(a){return a===cc.MediaPreviewType.ExtVideo||a===cc.MediaPreviewType.Video?"video":"image"},a.prototype.getCurrentSelectedMediaPreviewType=function(a){if("GeneralDescription"===a.getContentElementType())return a.contentElement.getValuesByMediaType().shape&&cc.MediaPreviewType.Shape||cc.MediaPreviewType.Clipart;var b=this.getAllowedMediaOverride(a),c=_.first(this.layoutSelectionStoreProvider.getLayoutSelectionStore(a.containerPageId).getOverrideByNode("media",a,"_preferred")),d=c&&c.name||"Image";return b===this.PresetMediaType.COLUMNBG&&"Wix Video"!==d?cc.MediaPreviewType.SingleImage:-1!==this.mediaOverride.imageGalleriesTypes.indexOf(d)?cc.MediaPreviewType.MultipleImages:"video"===d?cc.MediaPreviewType.ExtVideo:"Strip Video"===d?cc.MediaPreviewType.Video:"Wix Video"===d?cc.MediaPreviewType.Video:b===this.PresetMediaType.SHAPE?a.contentElement.getValuesByMediaType().shape&&cc.MediaPreviewType.Shape||cc.MediaPreviewType.Clipart:cc.MediaPreviewType.SingleImage},a.prototype.typeToLabel=function(a){switch(a){case cc.MediaPreviewType.SingleImage:return"Image";case cc.MediaPreviewType.Shape:case cc.MediaPreviewType.Clipart:return"Shape";case cc.MediaPreviewType.ExtVideo:case cc.MediaPreviewType.Video:return"Video";case cc.MediaPreviewType.MultipleImages:return"Gallery"}},a.prototype.getCurrentSelectedMediaTypeLabel=function(a){var b=this.getCurrentSelectedMediaPreviewType(a);return this.typeToLabel(b)},a.prototype.getAllowedMediaOverride=function(a){return"GeneralDescription"===a.getContentElementType()?this.PresetMediaType.SHAPE:this.layoutSelectionStoreProvider.getLayoutSelectionStore(a.containerPageId).getOverrideByNode("media",a,"allowedMediaOverrides")},a.prototype.getMediaValues=function(a){return this.extractActiveMediaValues(a,this.getCurrentSelectedMediaPreviewType(a))},a.prototype.getActiveMediaValue=function(a){var b=this.getMediaValues(a);return b[0]},a.prototype.extractActiveMediaValues=function(a,b){var c=this.convertToMediaTypeName(b);return a.contentElement.allValuesByMediaType[c]},a.prototype.convertToMediaTypeName=function(a){var b=cc.MediaPreviewType[a];return"SingleImage"===b?"image":"MultipleImages"===b?"image":""+b.slice(0,1).toLowerCase()+b.slice(1)},a}();MediaOverrideManager.MO_IMAGE="Image",MediaOverrideManager.MO_STRIP_IMAGE="Strip Image",MediaOverrideManager.MO_SLIDESHOW="Slideshow",MediaOverrideManager.MO_STRIP_SLIDESHOW="Strip Slideshow",MediaOverrideManager.MO_VIDEO="video",MediaOverrideManager.MO_STRIP_VIDEO="Strip Video",MediaOverrideManager.MO_WIX_VIDEO="Wix Video",MediaOverrideManager.MEDIA_DEFAULTS={base:{Slideshow:[{name:"slideshow",properties:{}}],"Grid (with margins)":[{name:"grid6",displayName:"6 Column Grid",properties:{columns:6}},{name:"grid4",displayName:"4 Column Grid",properties:{columns:4}},{name:"grid3",displayName:"3 Column Grid",properties:{columns:3}},{name:"grid2",displayName:"2 Column Grid",properties:{columns:2}}],"Animated Grid":[{name:"animatedgrid3",properties:{columns:3}}],Collage:[{name:"collage",properties:{columns:3,maxImageSize:2}}],Slider:[{name:"slider",properties:{}}],Thumbnails:[{name:"thumbnails",displayName:"Thumbnail Slideshow",properties:{}}],Masonry:[{name:"masonry",properties:{columns:3}}],Accordion:[{name:"accordion",displayName:"Accordion Slider",properties:{}}]},coast2coast:{"Fullwidth Collage":[{name:"fullwidthcollage",displayName:"Full Width Collage",properties:{}}],"Strip Slideshow":[{name:"stripslideshow",displayName:"Full Width Slideshow",properties:{}}],"Strip Showcase":[{name:"stripshowcase",displayName:"Full Width Showcase",properties:{}}]}},angular.module("siteGeneratorEditorInternal").service("mediaOverrideManager",MediaOverrideManager);var LinkDetailsDialog=function(){function a(a,b,c,d,e,f,g,h,i,j){this.$scope=a,this.$mdDialog=b,this.defer=c,this.linkDetails=d,this.$q=e,this.CcDialogBuilder=f,this.$translate=g,this.consumerBiLogger=h,this.node=i,this.biSource=j,this.consumerBiLogger.contentEditor.linkDialogIsLoaded(this.node.getId(),this.node.getSpecificContentElementType(),this.node.alias,this.biSource)}return a.$inject=["$scope","$mdDialog","defer","linkDetails","$q","CcDialogBuilder","$translate","consumerBiLogger","node","biSource"],a.prototype.close=function(){this.$mdDialog.destroy(),this.defer.reject(),this.consumerBiLogger.contentEditor.linkDialogClosed(this.node.getId(),this.node.getSpecificContentElementType(),this.node.alias,this.biSource)},a.prototype.save=function(){var b=this,c=this.$q.defer();this.$scope.$broadcast("linkDetails.save",c),c.promise.then(function(c){b.$mdDialog.destroy(),b.defer.resolve(c);var d=a.resolveLinkToType(c),e=a.resolveTargetPage(c),f=b.resolvePlace(c);b.consumerBiLogger.contentEditor.linkDialogDoneClicked(b.node.getId(),b.node.getSpecificContentElementType(),b.node.alias,d,e,f,b.biSource)})},a.prototype.help=function(){this.CcDialogBuilder.showSupportIframe(this.$translate("help.link.menu"),CONSUMER_DIALOGS.LINK_DETAILS_HELP)},a.prototype.resolvePlace=function(a){return a.isPageRef===!0&&void 0===a.targetPage?a.link.nodeId:""},a.resolveTargetPage=function(a){return LinkDetailsManager.isPage(a)?a.targetPage||a.link.targetPage:LinkDetailsManager.isWeb(a)?a.targetUrl:""},a.resolveLinkToType=function(a){if(LinkDetailsManager.isNone(a))return"none";
if(LinkDetailsManager.isPhone(a))return"phone";if(LinkDetailsManager.isEmail(a))return"email";if(LinkDetailsManager.isPage(a))return"page";if(LinkDetailsManager.isWeb(a))return"web";if(LinkDetailsManager.isDocument(a))return"document";throw new Error("linkTo type unknown")},a}(),LinkDetailsManager=function(){function a(a,b,c,d,e,f,g,h,i,j,k){this.$q=a,this.$rootScope=b,this.$compile=c,this.$log=d,this.modelTree=e,this.pagesManager=f,this.$mdDialog=g,this.$translate=h,this.validation=i,this.flags=j,this.clientTopology=k}return a.$inject=["$q","$rootScope","$compile","$log","modelTree","pagesManager","$mdDialog","$translate","validation","flags","clientTopology"],a.prototype.getLinkDetailsHandler=function(){var a=this;return{editLinkCallback:function(b,c){return a.getEditLinkCallback(b,c)},linkDetailsToILink:function(b){return a.generateILink(b)}}},a.prototype.getEditLinkCallback=function(a,b){var c=this,d=_.assign(this.$rootScope.$new(),{value:b}),e=this.$compile('<link-details value="value"></link-details>')(d);return e.appendTo(angular.element(a)),{save:function(){var a=c.$q.defer();return d.$broadcast("linkDetails.save",a),a.promise.then(function(a){return c.$log.log(a),a})}}},a.prototype.getAnchorType=function(a){return"page-anchor"===a.type?"page":"anchor"},a.prototype.ensureHttpPrefix=function(a){return!a||/^(http):\/\//i.test(a)||-1!=="http://".indexOf(a)||/^(https):\/\//i.test(a)||-1!=="https://".indexOf(a)?a:"http://"+a},a.prototype.convertLinkDetailsToStateWeb=function(a,b){return a.isPageRef=!1,a.targetUrl=this.ensureHttpPrefix(b),this.validation.isUrl(b)?(delete a.link,delete a.targetPage,delete a.targetEmail,delete a.targetPhone,this.$q.when(a)):this.$q.reject("linkDetailsManager: invalid url")},a.prototype.convertLinkDetailsToStateEmail=function(a,b){return a.isPageRef=!1,a.targetEmail=b,this.validation.isEmail(b)?(delete a.link,delete a.targetPage,delete a.targetUrl,delete a.targetPhone,this.$q.when(a)):this.$q.reject("linkDetailsManager: invalid email")},a.prototype.convertLinkDetailsToStatePhone=function(a,b){return a.isPageRef=!1,a.targetPhone=b,this.validation.isPhone(b)?(delete a.link,delete a.targetPage,delete a.targetUrl,delete a.targetEmail,this.$q.when(a)):this.$q.reject("linkDetailsManager: invalid phone number")},a.prototype.convertLinkDetailsToStateNone=function(a){return delete a.isPageRef,delete a.link,delete a.targetPage,delete a.targetUrl,delete a.targetEmail,delete a.targetPhone,this.$q.when(a)},a.prototype.convertLinkDetailsToStatePage=function(a,b){return delete a.targetUrl,delete a.targetEmail,delete a.targetPhone,this.setPageLink(a,b),this.$q.when(a)},a.prototype.convertLinkDetailsToStateDocument=function(a){return a.file?(a.isPageRef=!1,a.file={id:a.file.id,url:a.file.fileUrl,name:a.file.title},a.targetUrl=this.getTargetUrlForDocument(a.file),this.$q.when(a)):this.convertLinkDetailsToStateNone(a)},a.prototype.setPageLink=function(a,b){var c=this.getAnchorType(b);a.isPageRef=!0,"page"===c?(delete a.link,a.targetPage=b.id):"anchor"===c&&(a.link=this.addAnchor(b),delete a.targetPage)},a.prototype.getTargetUrlForDocument=function(a){return this.clientTopology.filesBaseUrl+a.url},a.prototype.getAnchorId=function(a){return"anchor"===this.getAnchorType(a)?a.getId():a.id},a.isNone=function(a){return!(a.hasOwnProperty("isPageRef")||a.hasOwnProperty("link")||a.hasOwnProperty("targetPage")||a.hasOwnProperty("targetUrl")||a.hasOwnProperty("targetEmail")||a.hasOwnProperty("targetPhone"))},a.isDocument=function(a){return!!a.file},a.isPage=function(a){return a.isPageRef===!0},a.isWeb=function(a){return a.isPageRef===!1&&!a.file&&a.targetUrl},a.isEmail=function(a){return!a.file&&a.targetEmail},a.isPhone=function(a){return!a.file&&a.targetPhone},a.prototype.getPages=function(){var a=this.modelTree.getPagesNodes();return _.filter(a,function(a){return!a.userHidden})},a.prototype.openLinkDetailsDialog=function(a,b,c){var d={},e=this.$q.defer();return d.locals={isValid:!1,linkDetails:a,node:b,defer:e,biSource:c},d.templateUrl="views/editor/link-details-dialog.html",d.controllerAs="$ctrl",d.controller=LinkDetailsDialog,this.$mdDialog.show(d),e.promise},a.prototype.isLinkBroken=function(b){var c=a.isPage(b);if(!c)return!1;var d=b.link&&b.link.nodeId||b.targetPage,e=this.findNodeById(d);return!e},a.prototype.findNodeById=function(a){var b;return this.getPages().forEach(function(c){return b?!1:a===c.getId()?(b=c,!1):void c.children.forEach(function(c){return a===c.getId()?(b=c,!1):void 0})}),b},a.prototype.linkDetailsToString=function(b){return b&&b.hasOwnProperty("isPageRef")?this.isLinkBroken(b)?null:a.isDocument(b)?b.file.name:a.isWeb(b)?b.targetUrl:a.isEmail(b)?b.targetEmail:a.isPhone(b)?b.targetPhone:b.targetPage?this.modelTree.getPageById(b.targetPage):b.link.anchorName:null},a.prototype.generateILink=function(a){var b=this.linkDetailsToString(a),c={value:b||this.$translate("general.no-link"),state:!!b};return c},a.prototype.generateAnchorLink=function(a){var b=this.pagesManager.getAnchorLinkObj(a);return{nodeId:a.getId(),targetPage:a.containerPageId,type:b.type,anchorName:this.modelTree.getAnchorName(a)}},a.prototype.addAnchor=function(a){return this.pagesManager.addAnchorLink(a),this.generateAnchorLink(a)},a.prototype.targetUrlIsDocument=function(a){return _(a).contains(this.clientTopology.filesBaseUrl)},a}();angular.module("siteGeneratorEditorInternal").service("linkDetailsManager",LinkDetailsManager);var MediaGalleryCustomTabBuilder=function(){function a(a,b,c,d){this.wixmp=a,this.RECOMMENDED_TAB_PARAMS=b,this.storyServices=c,this.$q=d}return a.$inject=["wixmp","RECOMMENDED_TAB_PARAMS","storyServices","$q"],a.prototype.getPrivateMedia=function(a){if("video"===a||"shape"===a)return{data:[]};var b=this.wixmp.Source(this.wixmp.sources.PRIVATE);return b.items.list(this.storyServices.story.privateMediaFolderId)},a.prototype.getPublicMedia=function(a,b){if("document"===a)return this.$q.when({data:[]});var c=b?this.RECOMMENDED_TAB_PARAMS.BG_IMAGE_PUBLIC_ROOT_GUID:this.RECOMMENDED_TAB_PARAMS[a.toUpperCase()+"_PUBLIC_ROOT_GUID"],d=this.wixmp.Source(this.wixmp.sources.PUBLIC);return d.items.list(c)},a.prototype.prepareRecommendedSection=function(a){return{title:"Recommended especially for your section",data:a}},a.prototype.prepareSectionPreview=function(a,b,c,d){var e,f,g;return b.length>c?(f=d,g=c-1):(f=void 0,g=c),e={title:a,data:b.slice(0,g),action:f}},a.prototype.preparePrivateSection=function(a){return this.prepareSectionPreview("Images from your business",a,this.RECOMMENDED_TAB_PARAMS.PRIVATE_IMAGES_AMOUNT,{url:"private/"+this.storyServices.story.privateMediaFolderId,title:"Show All"})},a.prototype.preparePublicSection=function(a){return this.prepareSectionPreview("Free from Wix",a,this.RECOMMENDED_TAB_PARAMS.PUBLIC_IMAGES_AMOUNT,{url:"public",title:"Show All"})},a.prototype.convertToPictureFormat=function(a){return Object.assign({},a,{name:a.Title,width:a.width,height:a.height,fileUrl:"media/"+a.relativeUri,id:a.relativeUri,mediaType:"picture",originalUrl:"//static.wixstatic.com/media/"+a.relativeUri,previewUrl:"//static.wixstatic.com/media/"+a.relativeUri+"_srb_375_375_75_22_0.5_1.20_0.00_jpg_srb",thumbnailUrl:"//static.wixstatic.com/media/"+a.relativeUri+"_srz_210_210_75_22_0.5_1.20_0.00_jpg_srz"})},a.prototype.convertToShapeFormat=function(a){return Object.assign({},a,{name:a.Title,fileUrl:a.relativeUri,id:a.relativeUri,mediaType:"shape",originalUrl:"//static.wixstatic.com/"+a.relativeUri,previewUrl:"//static.wixstatic.com/"+a.relativeUri,thumbnailUrl:"//static.wixstatic.com/"+a.relativeUri})},a.prototype.convertToVideoFormat=function(a){return Object.assign({},a,{name:a.Title,id:a.relativeUri,originalUrl:"//static.wixstatic.com/"+a.fileUrl,videoPreviewUrls:["//video.wixstatic.com/video/"+a.relativeUri+"/1080p/mp4/file.mp4"],thumbnailUrl:a.thumbnailUrl,previewUrl:a.thumbnailUrl})},a.prototype.convertToMediaGalleryFormat=function(a,b){switch(b){case"image":case"clipart":return this.convertToPictureFormat(a);case"shape":return this.convertToShapeFormat(a);case"video":return this.convertToVideoFormat(a)}},a.prototype.buildCustomTabData=function(a,b,c){var d=this;return this.$q.all([this.getPrivateMedia(b),this.getPublicMedia(b,c)]).then(function(c){var e=d.prepareRecommendedSection(a.map(function(a){return d.convertToMediaGalleryFormat(a,b)})),f=d.preparePrivateSection(c[0].data),g=d.preparePublicSection(c[1].data);return{title:"Recommended",sections:[e,f,g]}})},a}();angular.module("siteGeneratorStaticsConsumerAppInternal").service("mediaGalleryCustomTabBuilder",MediaGalleryCustomTabBuilder);var FieldEditorConfiguration=function(){function a(a,b,c){this.linkDetailsManager=a,this.applicationState=b,this.flags=c}return a.$inject=["linkDetailsManager","applicationState","flags"],a.prototype.isTextType=function(a){return"text"===a.type},a.prototype.isTextSubType=function(a){return"text"===a.subType||"title"===a.subType||"subTitle"===a.subType||"longText"===a.subType||"address"===a.subType||"email"===a.subType||"copyrightMSG"===a.subType||"phoneNumber"===a.subType||"fax"===a.subType||"logoText"===a.subType||"map"===a.subType||"ContactFormTitle"===a.subType},a.prototype.isMobile=function(){return this.applicationState.isInMobileEditMode()},a.prototype.isTextInput=function(a){return this.isMobile()?this.isTextType(a)&&this.isTextSubType(a)||this.isButton(a):this.isTextType(a)&&this.isTextSubType(a)&&!this.isRichTextField(a)},a.prototype.isLongTextInput=function(a){return!1},a.prototype.isRichTextInput=function(a){return this.isMobile()?!1:this.isTextType(a)&&this.isRichTextField(a)},a.prototype.isRichTextField=function(a){return-1!==["title","subTitle","longText","address","copyrightMSG"].indexOf(a.subType)},a.prototype.isButtonInput=function(a){return this.isButton(a)&&!this.isMobile()},a.prototype.isButton=function(a){return"button"===a.type&&"button"===a.subType},a.prototype.isImage=function(a){return"media"===a.type&&"image"===a.subType},a.prototype.isSocial=function(a){return"media"===a.type&&"social"===a.subType},a.prototype.isSocialInput=function(a){return this.isSocial(a)&&!this.isMobile()},a.prototype.isBoolean=function(a){return"menu"===a.type||"fixedHeader"===a.type||"form"===a.subType||this.isSocial(a)&&this.isMobile()},a.prototype.isMedia=function(a){return this.isImage(a)&&!this.isSocial(a)},a.prototype.isCheckbox=function(a){return"menu"===a.type||"form"===a.subType||this.isSocial(a)&&this.isMobile()},a.prototype.getDebounceDelay=function(b){if(b.data&&"image"===b.data.subType)return 0;var c=this.flags.editingDebounce?parseInt(this.flags.editingDebounce,10):a.DEFAULT_DEBOUNCE,d=b.suggestedContent&&b.suggestedContent.length>0;return d?a.DEFAULT_SUGGESTION_DEBOUNCE:c},a.prototype.getFieldTitle=function(a){return a.displayName||a.subType},a.prototype.getILink=function(a){return this.linkDetailsManager.generateILink(a.value)},a}();FieldEditorConfiguration.DEFAULT_DEBOUNCE=1e3,FieldEditorConfiguration.DEFAULT_SUGGESTION_DEBOUNCE=500,angular.module("siteGeneratorEditorInternal").service("fieldEditorConfiguration",FieldEditorConfiguration);var LogoHandler=function(){function a(a,b,c,d){this.mediaOverrideManager=a,this.colorationUtils=b,this.logoExtractionPopupService=c,this.undoRedo=d,this.logoOrigin=BIOrigins.UnknownSource}return a.$inject=["mediaOverrideManager","colorationUtils","logoExtractionPopupService","undoRedo"],a.prototype.handleLogoChange=function(a,b){var c=this;this.colorationUtils.saveLogoPaletteAsCustom();var d=a.whatChanged===IEditEventType.VisibilityChange&&!b,e=this.mediaOverrideManager.getCurrentSelectedMediaPreviewType(a.node),f=e!==cc.MediaPreviewType.Clipart;if(d||f)return void this.logoExtractionPopupService.hideLogoPopup();var g=a.node.contentElement.getFieldValue("Logo"),h=g.value[0];this.logoOrigin=BIOrigins.HeaderPanel;var i=function(){return c.lazyGetLogoColorationPromise(h)};a.whatChanged===IEditEventType.ValueChange?this.logoExtractionPopupService.showLogoPopup(this.logoOrigin,".c4-preview-wrapper",i,1e3):i()},a.prototype.lazyGetLogoColorationPromise=function(a){return this.prevPromise&&_.isEqual(a,this.prevPromiseImageDescription)?this.prevPromise:(this.prevPromiseImageDescription=a,this.prevPromise=this.getLogoColoration(a),this.prevPromise)},a.prototype.getLogoColoration=function(a){var b=this;return this.colorationUtils.initialize().then(function(){return b.colorationUtils.preparePaletteFromLogo(a,b.logoOrigin)}).then(function(a){return null!==a.mode&&b.logoOrigin!==BIOrigins.UnknownSource&&b.colorationUtils.setColorationMode(a.mode),b.colorationUtils.setLogoColors(a),b.undoRedo.captureOperation(!1,!0),a})},a}();angular.module("siteGeneratorEditorInternal").service("logoHandler",LogoHandler);var GOOGLE_CUSTOM_SEARCH_PARAMS={API_KEY:"AIzaSyDpFJq5nEyslcM84d8vtPDSebsD2MDaKvI",ENGINE_ID:"002755370288863419013:qihq0vmslui"};angular.module("siteGeneratorEditorInternal").constant("GOOGLE_CUSTOM_SEARCH_PARAMS",GOOGLE_CUSTOM_SEARCH_PARAMS);var RECOMMENDED_TAB_PARAMS={IMAGE_PUBLIC_ROOT_GUID:"8aa61c23-bff9-4426-ae8c-c1fd569764bf",SHAPE_PUBLIC_ROOT_GUID:"b1dbbe33-cc31-4b23-b865-a81680f70976",CLIPART_PUBLIC_ROOT_GUID:"cfad1a19-5cae-4d27-9cb7-fbf39ab6b644",VIDEO_PUBLIC_ROOT_GUID:"d6b6b972-952c-4ab0-b46a-a6c05a0a94a5",BG_IMAGE_PUBLIC_ROOT_GUID:"c2a37dfc-36cf-4bfd-b940-55bac7bdc9e6",PRIVATE_IMAGES_AMOUNT:8,PUBLIC_IMAGES_AMOUNT:24,MEDIA_GALLERY_VERSION:"1.485.0"};angular.module("siteGeneratorStaticsConsumerAppInternal").constant("RECOMMENDED_TAB_PARAMS",RECOMMENDED_TAB_PARAMS);var GoogleImageSearch=function(){function a(a,b,c){this.GOOGLE_CUSTOM_SEARCH_PARAMS=a,this.$window=b,this.$http=c}return a.$inject=["GOOGLE_CUSTOM_SEARCH_PARAMS","$window","$http"],a.prototype.fromGoogleImage=function(a){return{link:a.link,title:a.title,width:a.image.width,height:a.image.height,webpageLink:a.image.contextLink}},a.prototype.search=function(a){var b=this,c=a.query.split(/\s/);return a.png&&c.indexOf("png")<0&&c.push("-png"),a.video&&c.indexOf("video")<0&&c.push("-video"),this.$http.get("https://www.googleapis.com/customsearch/v1",{params:{q:c.join(" "),num:a.maxResults,searchType:"image",rights:"(cc_publicdomain|cc_attribute|cc_sharealike|cc_noncommercial).-(cc_nonderived)",googlehost:"google.com",imgColorType:"color",imgType:"photo",cx:this.GOOGLE_CUSTOM_SEARCH_PARAMS.ENGINE_ID,key:this.GOOGLE_CUSTOM_SEARCH_PARAMS.API_KEY}}).then(function(c){return(c.data.items||[]).filter(function(c){if(0===a.hostnames.length)return!0;var d=b.$window.document.createElement("a");return d.href=c.link,a.hostnames.some(function(a){return d.hostname.endsWith("."+a)||d.hostname===a})}).map(function(a){return b.fromGoogleImage(a)})})},a}();angular.module("siteGeneratorStaticsConsumerAppInternal").service("googleImageSearch",GoogleImageSearch);var ManageTpaButton=function(){function a(a,b,c,d,e,f,g){this.tpaService=a,this.tpaSettings=b,this.$element=c,this.$scope=d,this.consumerBiLogger=e,this.osUtils=f,this.$attrs=g}return a.$inject=["tpaService","tpaSettings","$element","$scope","consumerBiLogger","osUtils","$attrs"],a.prototype.$postLink=function(){var a=this;this.$scope.$watch(function(){return a.tpaType},function(b){a.tpaSettings.registerTpaHandlers(b,a.node)}),this.$element.bind("click",function(){return a.$scope.$apply(function(){a.osUtils.isIE&&$(document.body).addClass(TpaSettings.BODY_HIDE_DIALOG);var b=a.tpaService.getAppIdByType(a.tpaType);a.consumerBiLogger.apps.clickOnManageApp(a.origin,b,a.tpaType);var c=a.tpaService.getInstanceId(a.node);a.consumerBiLogger.provisioning.tpaIntent(c,b,a.getProvisionType(a.origin),"ADI"),a.tpaSettings.openManagement(a.origin,a.node,a.tpaType)})})},a.prototype.getProvisionType=function(a){return a===TpaSettings.SECTION_ORIGIN?"GFPP_MANAGE":"TOP_BAR_MANAGE"},Object.defineProperty(a.prototype,"tpaType",{get:function(){return this.tpaService.getNaiveType(this.$scope.$eval(this.$attrs[a.DIRECTIVE_NAME]))},enumerable:!0,configurable:!0}),Object.defineProperty(a.prototype,"node",{get:function(){var b=this.$attrs[a.ATTR_KEYS.NODE];return b&&this.$scope.$eval(b)},enumerable:!0,configurable:!0}),Object.defineProperty(a.prototype,"origin",{get:function(){return this.$attrs[a.ATTR_KEYS.ORIGIN]},enumerable:!0,configurable:!0}),a}();ManageTpaButton.DIRECTIVE_NAME="manageTpaButton",ManageTpaButton.ATTR_KEYS={NODE:"tpaNode",ORIGIN:"manageTpaButtonOrigin"},angular.module("siteGeneratorStaticsConsumerAppInternal").directive(ManageTpaButton.DIRECTIVE_NAME,function(){return{controller:ManageTpaButton,restrict:"A"}});var LocationManager=function(){function a(a,b){var c=this;this.locationApi=a,this.geoCoder=b,this.decodeLocation=function(a){return c.geoCoder.decode(a)}}return a.$inject=["locationApi","geoCoder"],a.prototype.getLocation=function(){return this.locationApi.getGeoLocation().then(this.decodeLocation)},a}();angular.module("siteGeneratorLocationManagerInternal").service("locationManager",LocationManager);var GeoCoder=function(){function a(a){this.$q=a}return a.$inject=["$q"],a.prototype.decode=function(a){var b={location:{lat:a.latitude,lng:a.longitude}},c=new google.maps.Geocoder,d=this.$q.defer();return c.geocode(b,function(a,b){switch(b){case google.maps.GeocoderStatus.OK:d.resolve(a[0]);break;case google.maps.GeocoderStatus.ZERO_RESULTS:d.resolve(null);break;default:d.reject(b)}}),d.promise},a}();angular.module("siteGeneratorLocationManagerInternal").service("geoCoder",GeoCoder);var SectionManager=function(){function a(a,b,c,d,e,f,g,h,i,j,k,l,m,n,o,p,q,r,s,t,u,v,w,x,y,z,A,B,C,D,E,F,G,H,I,J,K,L,M,N,O,P,Q,R,S,T,U){this.$q=a,this.$timeout=b,this.layoutSolver=c,this.$translate=d,this.modelTree=e,this.notification=f,this.storyServices=g,this.mediaOverride=h,this.undoRedo=i,this.tpaService=j,this.flags=k,this.applicationState=l,this.applicationParameters=m,this.sitePartTypes=n,this.simpleSolutionManager=o,this.mobileSolutionManager=p,this.layoutSelectionStoreProvider=q,this.localStorageService=r,this.designKit=s,this.LayoutGroup=t,this.siteModelData=u,this.contentElementGenerator=v,this.pagesManager=w,this.previewService=x,this.nodeManipulationService=y,this.contentManager=z,this.contentSource=A,this.defaultsService=B,this.presetHelpers=C,this.presetPreviewGenerator=D,this.presetPreviewSorter=E,this.$log=F,this.wizardService=G,this.CcDialogBuilder=H,this.consumerBiLogger=I,this.consumerBiLoggerHelpers=J,this.overlayManager=K,this.solutionManager=L,this.miscUtils=M,this.consumerDialogs=N,this.consumerMenu=O,this.healthCheck=P,this.errorReportService=Q,this.Solution=R,this.sectionBackgroundService=S,this.initBI=T,this.mergedHeaderService=U,this.totalSteps=0,this.currentStep=0,this.customAddMode=!1}return a.$inject=["$q","$timeout","layoutSolver","$translate","modelTree","notification","storyServices","mediaOverride","undoRedo","tpaService","flags","applicationState","applicationParameters","sitePartTypes","simpleSolutionManager","mobileSolutionManager","layoutSelectionStoreProvider","localStorageService","designKit","LayoutGroup","siteModelData","contentElementGenerator","pagesManager","previewService","nodeManipulationService","contentManager","contentSource","defaultsService","presetHelpers","presetPreviewGenerator","presetPreviewSorter","$log","wizardService","CcDialogBuilder","consumerBiLogger","consumerBiLoggerHelpers","overlayManager","solutionManager","miscUtils","consumerDialogs","consumerMenu","healthCheck","errorReportService","Solution","sectionBackgroundService","initBI","mergedHeaderService"],a.prototype.setConfigurationForSection=function(a,b){var c,d=this.storyServices.story.selectedPage,e=this.layoutSolver.getSelectedSolution(this.sitePartTypes.BODY,d);if(this.flags.sectionBackground&&(c={bg:this.sectionBackgroundService.getBackground(a.node,"body",a.solution)},a.node.isList()&&(c.headerBg=this.sectionBackgroundService.getBackground(a.node,"header",a.solution))),this.isAddMode){var f=void 0,g=void 0;this.applicationState.isAddPage()||(b=b||this.overlayManager.dropTargetId,f="0"===b?void 0:_.last(this.simpleSolutionManager.getSectionSolution(d,b)),g=e&&e[e.indexOf(f)+1]),this.designKit.setConfigurationForSection(a.solution,f,g,void 0,c),this.presetHelpers.preparePresetPreviewForRender(this.sitePartTypes.BODY,a)}else{var h=this.applicationState.getContentFocus();if(!h||!a.preset||this.applicationState.isSectionColorsMode())return;if(h.sitePart===this.sitePartTypes.BODY){var i=this.simpleSolutionManager.getSectionSolution(d,a.node.id);this.designKit.setSpecificConfigurationForSection(a.solution,i,void 0,c)}else this.designKit.setConfigurationForHeaderFooter(a.solution,h.sitePart);this.presetHelpers.preparePresetPreviewForRender(h.sitePart,a)}},a.prototype.forceAddMode=function(a){this.customAddMode=a},Object.defineProperty(a.prototype,"isAddMode",{get:function(){return this.customAddMode||this.applicationState.isAddSectionMode()||this.applicationState.isAddPage()},enumerable:!0,configurable:!0}),a.prototype.getDefaultAnimationDefinition=function(){return{type:this.simpleSolutionManager.Animation.Type.NO_TRANSITION,direction:this.simpleSolutionManager.Animation.Direction.NORMAL}},a.prototype.getSectionSolution=function(a,b,c){return a===this.sitePartTypes.BODY?this.simpleSolutionManager.getSectionSolution(b,c):this.layoutSolver.getSelectedSolution(a)},a.isNodeDuplicated=function(a){if(!a)return!1;var b=_.filter(_.map(a.getDependencies(),function(a){return a.containerPageId}),function(b){return!!b&&b!==a.containerPageId});return b.length>0},a.prototype.startAnimatedRender=function(a,b){return void 0===b&&(b=this.getDefaultAnimationDefinition()),this.storyServices.renderAnimated(a,ListSpanManager.MinBodyHeight,b)},a.prototype.popupAfterTpaAdded=function(a,b){var c=this;void 0===b&&(b=!1);var d=a.toLowerCase(),e="popups.after-tpa-"+d+"-add",f=this.storyServices.story.popupConfigurations[e];if(!f){var g=b?"-section":"",h=this.$translate("popups.after-tpa-"+d+"-add"+g+".text",{TPA:a});if(d===this.applicationParameters.tpaTypes.GetSubscribers.type.toLowerCase()){var i=this.$translate("popups.after-tpa-getsubscribers-learn-more");h=h+' <button class="p9b-text-button" ng-click="$ctrl.runCallback(\'open-learn-more\')">'+i+"</button>"}var j={heading:this.$translate("popups.after-tpa-"+d+"-add.heading",{TPA:a}),text:h,acceptButtonText:this.miscUtils.translateIfPossible("popups.after-tpa-"+d+"-add.button")||this.$translate("general.got-it"),hideFirstTimeCheckBox:!0,icon:d+".gif",biDialogName:CONSUMER_DIALOGS.TPA_AFTER_UPDATE,callback:function(a){"open-learn-more"===a&&c.CcDialogBuilder.showSupportIframe(c.$translate("help.tpa.getsubscribers-learn-more"),"tpa-added-help")}};this.CcDialogBuilder.showFirstTimeNotice(j).then(function(a){c.storyServices.story.popupConfigurations[e]=!0})}},a.prototype.userCanPublish=function(){return!this.applicationState.isSupportStaffEditing(!1)},a.prototype.shouldPublish=function(a){return a.getContentElementType()!==this.applicationParameters.tpaTypes.GetSubscribers.type&&this.userCanPublish()},a.prototype.shouldPublishForTpaWidget=function(a){if(a.isTpaWidget){var b=this.tpaService.getNaiveType(a.getContentElementType());return this.applicationParameters.tpaTypes[b].publishAfterAddition&&this.userCanPublish()}},a.prototype.provisionTpaForWidget=function(a){var b=this,c=this.$q.defer(),d=a.getContentElementType(),e=this.tpaService.getNaiveType(d),f=this.tpaService.hasSection(e);if(!f||this.tpaService.isTpaAdded(e))return this.$q.when(!0);var g=_.find(this.modelTree.getTpaNodes(),{contentElementType:e});if(!g)throw"something very wrong when we have no tpa";return this.addTpa(g,void 0,{showMSG:!0}).then(function(){var a=b.$q.when();e===b.applicationParameters.tpaTypes.Stores.type&&(a=b.recalculateSiteHeader().then(function(){return b.storyServices.reRender("header")})),a.then(function(){return b.shouldPublish(g)?b.wizardService.publishStory(void 0,void 0,!0)["catch"](function(){return b.$q.when()}):void 0}).then(function(){c.resolve()})}),c.promise},a.prototype.handleTpaPreviewSelected=function(a,b,c,d){var e=this,f=this.$q.defer();return this.isAddMode?b.node.isTpaWidget?this.handleTpaWidgetPreviewSelected(a,b.node,b.preset,c,d).then(function(a){e.consumerMenu.calcMenuAnchors().then(function(){var c=b.node.contentElementType;c=e.tpaService.getNaiveType(c),f.resolve(a),d||e.undoRedo.captureOperation(),e.popupAfterTpaAdded(c,!0)})}):b.node.isTpa&&this.addTpa(b.node,b.preset).then(function(a){e.consumerMenu.calcMenuAnchors().then(function(){var c=b.node.contentElementType,g=_.find(a.children,{contentElementType:c});f.resolve(g),d||e.undoRedo.captureOperation(!0,!1,!0),e.popupAfterTpaAdded(c)}).then(function(){return e.storyServices.recalculateCurrentPage()})}):this.tpaService.updateStyle(b.node,b.preset,function(){e.storyServices.reRender("body").then(function(){e.undoRedo.captureOperation(!0,!1,!1,!0),f.resolve(b.node)})}),f.promise},a.prototype.handleTpaWidgetPreviewSelected=function(a,b,c,d,e){var f=this,g=this.$q.defer(),h=d||this.overlayManager.dropTargetId,i="0"===h?!1:h;return this.provisionTpaForWidget(b).then(function(){f.nodeManipulationService.addNewContentElement(b,!1,a,function(b){f.getSectionForTpa(b,f.flags.invertTpaPalette,a.id).then(function(c){return f.flags.renderedModel&&f.setTpaInitialHeight(c),f.simpleSolutionManager.addSectionToPage(a.id,b.id,c,i).then(function(){return f.createMobileSolution(f.sitePartTypes.BODY,c),e?f.$q.when():f.storyServices.reRender("body").then(function(){return f.shouldPublishForTpaWidget(b)?f.wizardService.publishStory(void 0,void 0,!0):void 0})}).then(function(){return e?f.$q.when():f.waitForHeightChanged(c[0])}).then(function(){g.resolve(b)})})},c,i)}),g.promise},a.prototype.waitForHeightChanged=function(a){var b=this,c=a.getBoundingHeight(),d=500,e=6,f=0;return _.whilePromises(function(a){return!a&&e>f},function(){return b.$timeout(function(){f++;var b=a.getBoundingHeight();return b!==c},d)})},a.prototype.getSectionForTpa=function(a,b,c){var d={id:"5680125272e7a231006e2621",isGenerator:!0,name:"single object full width h: 60",targetWidth:940,targetHeight:100,sitePart:"body",segments:[{forContent:["AnyWidget","AnyTpaSection"],top:0,left:0,height:100,width:940}],sourceName:"single object full width"},e=a.contentElement,f=new this.LayoutGroup;angular.copy(d,f),f.segments[0].contentElement=e,f.segments[0].node=a,f.setLgData([e]),f.segments[0].selectedOption=0,f.setPage(c);var g=f.getLgData();return g.strip.color=this.designKit.getDefaultBackgroundColor(),b&&(g.strip.color=this.designKit.invertColor(g.strip.color)),f.calculateLayoutGroupStatus().then(function(){return[f]})},a.prototype.addTpa=function(a,b,c){var d=this;void 0===b&&(b=void 0),void 0===c&&(c={navigate:!0,showMSG:!0});var e,f=this.$q.defer(),g=a.contentElementType;return this.consumerBiLoggerHelpers.resetExtraPagesCount(),this.nodeManipulationService.addTpa(a,function(b){e=b[0],_.sequencePromises(b,function(b,e){b.alias=a.getContentElementType();var f=_.find(b.children,function(b){return-1!==b.contentElementType.indexOf(a.contentElementType)});return d.getSectionForTpa(f,d.flags.invertTpaPalette,b.id).then(function(a){return d.simpleSolutionManager.addSectionToPage(b.id,f.id,a).then(function(){d.createMobileSolution(d.sitePartTypes.BODY,a),0!==e||c.navigate||d.consumerBiLogger.pagesManager.addNewPageSuccess(d.consumerBiLoggerHelpers.getEditMode(),f.getContentElementType(),b.getDisplayName(),f.getId(),"",0,0,"",d.tpaService.getAppId(f),"by app",!1),d.consumerBiLogger.pagesManager.addNewPageSuccess(d.consumerBiLoggerHelpers.getEditMode(),f.getContentElementType(),b.getDisplayName(),f.getId(),"",0,0,"",d.tpaService.getAppId(f),"by app",!1),d.consumerBiLoggerHelpers.incExtraPagesCount()})})}).then(function(){return c.navigate?(d.storyServices.story.selectedPage=e.id,d.pagesManager.goToPage(e.id).then(function(){return g===d.applicationParameters.tpaTypes.Stores.type?d.recalculateSiteHeader():void 0}).then(function(){return d.shouldPublish(a)?d.wizardService.publishStory(void 0,void 0,!0)["catch"](function(){return d.$q.when()}):void 0}).then(function(){var a=d.layoutSolver.getPartSolutions("body",d.storyServices.story.selectedPage),b=a.getSelectedSolution();return d.storyServices.emitRenderedPart("body",b,a.getSolutionHeight(),d.storyServices.story.selectedPage),g===d.applicationParameters.tpaTypes.Stores.type?d.storyServices.reRender("header"):void 0})):void 0}).then(function(){return c.showMSG&&d.notification.show(d.$translate("popups.after-tpa-add.text",{TPA:a.getContentElementType()}),2e3),f.resolve(e)})},b),f.promise},a.prototype.handlePreviewSelected=function(a,b){var c=this.storyServices.story.selectedPage,d=this.modelTree.getPageNodeById(c);if(a.isTpa)return this.handleTpaPreviewSelected(d,a);if(a.previewNode.crop&&(a.node.crop=a.node.crop||[],_.defaults(a.node.crop,a.previewNode.crop)),a.previewNode.imageErrors&&a.previewNode.imageErrors.length>0&&this.errorReportService.reportError(a.node.containerPageId,a.node.id,"changeLayout",a.previewNode.imageErrors),b){var e=this.applicationState.getContentFocus();return e.sitePart!==this.sitePartTypes.BODY?this.applyHeaderOrFooterPreset(a,e.sitePart):this.replaceSection(a,d)}return this.addSectionToPage(a,d,this.overlayManager.dropTargetId)},a.prototype.applyHeaderOrFooterPreset=function(a,b){var c=this;return this.$q.when().then(function(){return a.preset?c.layoutSolver.applyLayoutPreset(b,void 0,a.node,a.preset.data):(c.layoutSelectionStoreProvider.mergeLayoutSelectionStoreFromPresetPreview(a.lss.clone(),b,b,c.layoutSelectionStoreProvider.getKeyMap(a.solution)),c.designKit.setSectionSelections(a.solution,a.selections),_.each(c.layoutSolver.getSelectedSolution(b),function(a){a.isDirty=!0}),c.layoutSolver.calculateSolverStatus(void 0,void 0,!0))}).then(function(){if(c.flags.mergedHeader){var b=_(a.flags).includes("fix");c.wizardService.setFixedHeader(b);var d=_(a.flags).includes("mergeHeader");c.mergedHeaderService.setHeaderMerged(d,!1)}}).then(function(){return c.storyServices.reRender(b)}).then(function(){if(c.flags.mobileEditor){var a=c.mobileSolutionManager.getMobileSitePartSolution(b);c.simpleSolutionManager.setSolutionDirty(a)}}).then(function(){return c.undoRedo.captureOperation(),a.node})},a.prototype.replaceSection=function(a,b){var c=this;return this.$q.when().then(function(){c.modelTree.replaceNode(a.previewNode,b),_.each(a.solution,function(a){return a.setPage(b.id)});var d,e=c.simpleSolutionManager.getSectionSolution(b.id,a.previewNode.getId()),f=e.reduce(function(a,b){return b.getBoundingHeight()+a},0);c.flags.mobileEditor&&(d=c.mobileSolutionManager.getMobileSolution(e)),c.layoutSelectionStoreProvider.mergeLayoutSelectionStoreFromPresetPreview(a.lss,a.dummyPageId,b.id,c.layoutSelectionStoreProvider.getKeyMap(a.solution,a.previewNode),void 0,!1),a.selections&&c.designKit.setSectionSelections(a.solution,a.selections);var g={type:c.applicationState.isSectionColorsMode()?c.simpleSolutionManager.Animation.Type.NO_TRANSITION:c.simpleSolutionManager.Animation.Type.SLIDE_HORIZONTAL,direction:c.simpleSolutionManager.Animation.Direction.NORMAL};return c.simpleSolutionManager.replaceSectionOnPage(b.id,a.previewNode.getId(),a.solution).then(function(a){return a.oldHeight=f,c.startAnimatedRender(a,g)}).then(function(){c.flags.mobileEditor&&(c.mobileSolutionManager.setMobileSolution(a.solution,d),c.simpleSolutionManager.setSolutionDirty(d))}).then(function(){return c.undoRedo.captureOperation(),a.previewNode})})},a.prototype.addSectionToPage=function(a,b,c,d){var e=this;return void 0===c&&(c="0"),void 0===d&&(d=!1),this.$q.when().then(function(){var f=e.layoutSelectionStoreProvider.getKeyMap(a.solution,a.previewNode);e.modelTree.addNewNodeWithValues(a.previewNode,b,c),_.each(a.solution,function(a){a.clearCache(),a.setPage(b.getId())}),e.layoutSelectionStoreProvider.mergeLayoutSelectionStoreFromPresetPreview(a.lss,a.dummyPageId,b.getId(),e.layoutSelectionStoreProvider.getKeyMap(a.solution,a.previewNode),f);var g="0"===c?!1:c,h=a.previewNode.getId();return e.simpleSolutionManager.addSectionToPage(b.getId(),h,a.solution,g).then(function(b){if(e.createMobileSolution(e.sitePartTypes.BODY,a.solution),
!d){b.oldHeight=OverlayManager.DropTargetHeight;var c={type:e.simpleSolutionManager.Animation.Type.CROSS_FADE,direction:e.simpleSolutionManager.Animation.Direction.NORMAL,duration:.5};return e.startAnimatedRender(b,c).then(function(){if(!a.previewNode.isList()){var b=e.overlayManager.listSpanManager.getSegmentByNodeId(h,e.sitePartTypes.BODY),c=b&&b.getLENoError(),d=c&&c.getLayoutBySubType("image"),f=d&&e.mediaOverride.isUnexpectedHeight(c,d);if(f)return e.waitForHeightChanged(a.solution[0])}}).then(function(){return e.consumerMenu.calcMenuAnchors()}).then(function(){e.undoRedo.captureOperation()})}}).then(function(){return a.previewNode})})},a.prototype.duplicateSection=function(a){var b=this,c=this.storyServices.story.selectedPage,d=this.modelTree.duplicateNode(a,this.modelTree.getPageNodeById(c));this.simpleSolutionManager.duplicateSection(c,a,d).then(function(e){var f=b.layoutSelectionStoreProvider.getLayoutSelectionStore().clone(),g=b.layoutSelectionStoreProvider.getKeyMap(e.sourceSection,a),h=b.layoutSelectionStoreProvider.getKeyMap(e.newSection,d);if(b.layoutSelectionStoreProvider.mergeLayoutSelectionStoreFromPresetPreview(f,c,c,h,g,!0),b.flags.mobileEditor){var i=b.mobileSolutionManager.getMobileSolution(e.sourceSection),j=b.layoutSelectionStoreProvider.getKeyMap(i,a),k=b.createMobileSolution(b.sitePartTypes.BODY,e.newSection),l=b.layoutSelectionStoreProvider.getKeyMap(k,d);b.layoutSelectionStoreProvider.mergeLayoutSelectionStoreFromPresetPreview(f,c,c,l,j,!0,!0)}return b.simpleSolutionManager.addSectionToPage(c,d.id,e.newSection,a.id,!0,void 0,!0)}).then(function(a){return b.startAnimatedRender(a,{direction:b.simpleSolutionManager.Animation.Direction.REVERSE,type:b.simpleSolutionManager.Animation.Type.CROSS_FADE,duration:.5})}).then(function(){return b.consumerMenu.calcMenuAnchors()}).then(function(){b.consumerBiLogger.sectionManagement.sectionDuplicateSuccess(d.id,d.getContentElementType(),d.alias,b.tpaService.getAppId(d)),b.undoRedo.captureOperation()})},a.prototype.duplicatePage=function(a){var b=this,c=a.getId();return this.consumerBiLogger.pagesManager.duplicatePage(c),this.pagesManager.duplicatePage(a).then(function(d){var e=b.layoutSelectionStoreProvider.getNodesMap(a,d),f=b.layoutSelectionStoreProvider.getLayoutSelectionStore(),g=f.clone(),h=_(a.children).map(function(c){var d=b.simpleSolutionManager.getSectionSolution(a.id,c.id);return b.layoutSelectionStoreProvider.getKeyMap(d,c)}).flatten().value(),i=b.layoutSelectionStoreProvider.getMergedKeyMap(h,e);if(b.layoutSelectionStoreProvider.mergeLayoutSelectionStoreFromPresetPreview(g,a.getId(),d.getId(),i,h,!0),b.flags.mobileEditor){var j=_(a.children).map(function(c){var d=b.simpleSolutionManager.getSectionSolution(a.id,c.id),e=b.mobileSolutionManager.getMobileSolution(d);return b.layoutSelectionStoreProvider.getKeyMap(e,c)}).flatten().value(),k=b.layoutSelectionStoreProvider.getMergedKeyMap(j,e);b.layoutSelectionStoreProvider.mergeLayoutSelectionStoreFromPresetPreview(g,a.getId(),d.getId(),k,j,!0,!0)}var l=_.mapKeys(f.getSolutionLGs(a.getId()),function(a,b){return e[b]});f.setSolutionLGs(d.id,l),b.consumerBiLogger.pagesManager.duplicatePageSuccess(c)})},a.prototype.moveSectionToAnotherPage=function(a,b){var c,d=this,e=this.modelTree.getPageNodeById(this.storyServices.story.selectedPage),f=null;if(e&&b&&a&&e!==b){var g=_.last(b.children),h=g.getId();this.nodeManipulationService.moveNodeToPage(a,e,b)&&(this.applicationState.setSteady(!1),f=this.simpleSolutionManager.removeSectionOnPage(e.getId(),a.getId()).then(function(a){return c=a.oldSolution.slice(a.startIndex,a.startIndex+a.length),d.startAnimatedRender(a,{direction:d.simpleSolutionManager.Animation.Direction.REVERSE,type:d.simpleSolutionManager.Animation.Type.CROSS_FADE,duration:.5})}).then(function(){return d.applicationState.clearContentFocus(),d.storyServices.story.selectedPage=b.getId(),d.pagesManager.goToPage(b.getId())}).then(function(){return d.storyServices.recalculateCurrentPage()}).then(function(){d.nodeManipulationService.reassignSolutionSectionToPage(c,e,b);var f=d.layoutSelectionStoreProvider.getLayoutSelectionStore().clone(),g=d.layoutSelectionStoreProvider.getKeyMap(c,a);if(d.layoutSelectionStoreProvider.mergeLayoutSelectionStoreFromPresetPreview(f,e.getId(),b.getId(),g,g,!0),d.flags.mobileEditor){var i=d.mobileSolutionManager.getMobileSolution(c);d.nodeManipulationService.reassignSolutionSectionToPage(i,e,b);var j=d.layoutSelectionStoreProvider.getKeyMap(i,a);d.layoutSelectionStoreProvider.mergeLayoutSelectionStoreFromPresetPreview(f,e.getId(),b.getId(),j,j,!0,!0)}return d.simpleSolutionManager.addSectionToPage(b.getId(),a.getId(),c,h,!1,void 0,!0)}).then(function(a){return d.startAnimatedRender(a,{direction:d.simpleSolutionManager.Animation.Direction.REVERSE,type:d.simpleSolutionManager.Animation.Type.CROSS_FADE,duration:.5})}).then(function(){return d.consumerMenu.calcMenuAnchors()}).then(function(){d.undoRedo.captureOperation()})["finally"](function(){d.applicationState.setSteady(!0)}))}return this.$q.when(f)},a.prototype.makeIntoPage=function(a){var b,c,d=this,e=this.modelTree.findIdentifyingNode(a),f=e.isList()?e:a,g=this.storyServices.story.selectedPage;return this.applicationState.clearContentFocus(),this.applicationState.goToBuilder(!1),this.consumerBiLogger.contentEditor.switchListItemToPage(f.getId(),this.storyServices.story.selectedPage,f.getSpecificContentElementType(),f.alias),this.nodeManipulationService.makePageFromNode(a).then(function(c){b=c.containerPageId;var e=d.layoutSelectionStoreProvider.getLayoutSelectionStore().getOverrideByNode("media",a,"allowedMediaOverrides");return d.defaultsService.getPresetsForNode(c).then(function(a){var b=_.sortBy(a,function(a){return e!==_.get(a.data,["groups",0,"layouts",0,"mediaType"])});return _.whilePromises(function(a){return!(a&&a[0]||!b.length)},function(){var a=b.shift();return a&&a.data&&!a.data.isTpa?d.layoutSolver.createLayoutPresetPreviewSolutions([a],c,!0):void 0})}).then(function(a){var e=a&&a[0];return e?(d.designKit.setConfigurationForSection(e.solution),d.layoutSelectionStoreProvider.mergeLayoutSelectionStoreFromPresetPreview(e.lss,e.dummyPageId,b,d.layoutSelectionStoreProvider.getKeyMap(e.solution)),_.each(e.solution,function(a){a.setPage(b)}),d.modelTree.setContainerPageId(c,b),d.createMobileSolution(d.sitePartTypes.BODY,e.solution),d.simpleSolutionManager.addSectionToPage(b,c.id,e.solution)):(d.$log.warn("cannot find applicable preset for created node "+c.id),d.modelTree.setContainerPageId(c,b),d.simpleSolutionManager.createJokerSection(c).then(function(a){return d.simpleSolutionManager.addSectionToPage(b,c.id,a,void 0,!0,c.contentElement,!0)}))})}).then(function(a){return c=a,d.storyServices.story.selectedPage=b,d.pagesManager.goToPage(b)}).then(function(){return c?d.startAnimatedRender(c,{direction:d.simpleSolutionManager.Animation.Direction.REVERSE,type:d.simpleSolutionManager.Animation.Type.CROSS_FADE,duration:.5}):void 0}).then(function(){return d.consumerMenu.calcMenuAnchors()}).then(function(){d.undoRedo.captureOperation(),d.applicationState.goToPageManager(),d.consumerBiLogger.contentEditor.itemMovedToAnotherPageSuccess(f.getId(),g,f.getSpecificContentElementType(),f.alias)})},a.prototype.addListItem=function(a,b,c){var d,e=this,f=a.containerPageId,g=a.getId(),h={direction:this.simpleSolutionManager.Animation.Direction.REVERSE,type:this.simpleSolutionManager.Animation.Type.CROSS_FADE};if(this.flags.mobileEditor){var i=this.simpleSolutionManager.getSectionSolution(f,g);d=this.mobileSolutionManager.getMobileSolution(i),this.mobileSolutionManager.addListItem(d,b,c)}return this.simpleSolutionManager.addListItem(f,g,b,c).then(function(a){if(e.flags.mobileEditor){var b=a.newSolution;e.mobileSolutionManager.setMobileSolution(b,d),e.simpleSolutionManager.setSolutionDirty(d)}return e.startAnimatedRender(a,h)})},a.prototype.removeListItem=function(a,b,c){var d,e=this,f=a.containerPageId,g=a.getId(),h={direction:this.simpleSolutionManager.Animation.Direction.REVERSE,type:this.simpleSolutionManager.Animation.Type.CROSS_FADE};if(this.flags.mobileEditor){var i=this.simpleSolutionManager.getSectionSolution(f,g);d=this.mobileSolutionManager.getMobileSolution(i),this.mobileSolutionManager.removeListItem(d,c)}return this.simpleSolutionManager.removeListItem(f,g,b,c).then(function(a){if(e.flags.mobileEditor){var b=a.newSolution;e.mobileSolutionManager.setMobileSolution(b,d),e.simpleSolutionManager.setSolutionDirty(d)}return e.startAnimatedRender(a,h)})},a.prototype.getNodeIndexInPage=function(a){var b=this.modelTree.getPageNodeById(this.storyServices.story.selectedPage),c=_.filter(b.children,function(a){return!a.isUserHidden()}),d=_.findIndex(c,function(b){return b.getId()===a});return d},a.prototype.getAddSectionPosition=function(){var a=this.overlayManager.dropTargetId,b="0"===a?!1:a;return b?this.getNodeIndexInPage(b)+1:0},a.prototype.geSectionPositionInPage=function(a){return this.getNodeIndexInPage(a.getId())},a.prototype.showDeleteSectionPopup=function(b,c,d){var e=this;this.consumerBiLogger.sectionManagement.sectionMenuDeleteSectionClick(b.getId(),b.getContentElementType(),b.alias,this.tpaService.getAppId(b),c,a.isNodeDuplicated(b));var f={heading:this.$translate("popups.deletesection.heading"),text:this.$translate("popups.deletesection.text"),acceptButtonText:this.$translate("general.delete"),rejectButtonText:this.$translate("general.cancel"),icon:"delete-single.gif",biDialogName:CONSUMER_DIALOGS.DELETE_SECTION,onHelp:function(){e.CcDialogBuilder.showSupportIframe(e.$translate("help.popup.deleteSection"),CONSUMER_DIALOGS.DELETE_SECTION_HELP)}},g=this.applicationState.isSilent()?this.$q.resolve():this.CcDialogBuilder.showNegativeConfirmation(f);g.then(function(){b.identifyingNode&&b.identifyingNode.isList()&&(b=b.identifyingNode),e.deleteSection(b,c)},function(){d&&d()})},a.prototype.showHideNodePopup=function(a){var b;if(a===this.sitePartTypes.HEADER)b=ConsumerDialogTypes.CANT_REMOVE_HEADER_POPUP;else{if(a!==this.sitePartTypes.FOOTER)return this.$q.when();b=ConsumerDialogTypes.CANT_REMOVE_FOOTER_POPUP}return this.consumerDialogs.showDialog(b)},a.prototype.deleteSection=function(b,c){var d=this,e=b.containerPageId;this.nodeManipulationService.deleteNode(b,e,void 0,function(){var f={direction:d.simpleSolutionManager.Animation.Direction.REVERSE,type:d.simpleSolutionManager.Animation.Type.CROSS_FADE,duration:.5};d.applicationState.clearContentFocus(),d.simpleSolutionManager.removeSectionOnPage(e,b.getId()).then(function(a){return d.startAnimatedRender(a,f)}).then(function(){return d.consumerMenu.calcMenuAnchors()}).then(function(){d.applicationState.goToBuilder(!1),d.undoRedo.captureOperation()}).then(function(){return d.shouldPublishForTpaWidget(b)?d.wizardService.publishStory():void 0}).then(function(){d.consumerBiLogger.sectionManagement.deleteSectionSuccess(b.getId(),b.getContentElementType(),b.alias,d.tpaService.getAppId(b),c,a.isNodeDuplicated(b)),d.notification.show("toasters.section-deleted","general.undo",function(){d.undoRedo.undo()})})})},a.prototype.addSection=function(a,b){var c="0";if(b)"GeneralDescription"!==a.contentElementType&&(c=a.getId());else{var d=a.containerPageId,e=this.overlayManager.listSpanManager.getAllInBody();if("footer"===d)e.length>0&&(c=e[e.length-1].node.getId());else{var f=_.findIndex(e,{node:a});f>0&&(c=e[f-1].node.getId())}}this.overlayManager.lockDropTarget(c),this.applicationState.goToAddSectionMode()},a.prototype.recalculateSiteHeader=function(){var a=this,b=this.layoutSolver.getSelectedSolution(this.sitePartTypes.HEADER);return b[0].isDirty=!0,b[0].calculateLayoutGroupStatus().then(function(){return a.simpleSolutionManager.detectAndHandleHeaderOrFooterFailure(a.sitePartTypes.HEADER)})},a.prototype.makeTpaSectionObject=function(a,b){return b&&(a.alias=b),{id:b||a.contentElementType,ceType:a.contentElementType,isTpa:!0,widgetNode:a,isRecommendedForPage:!0}},a.prototype.modifySectionRecommendationsBySelectedOffer=function(a,b){var c,d,e,f=this,g=function(g,h){if(b[f.applicationParameters.tpaTypes[g].type]){if(-1!==c.indexOf(h))return!1;var i=_.find(e,function(a){return a.contentElementType===h});if(i)return a.suggestions.splice(d,0,f.makeTpaSectionObject(i,AddSection.tpaWidgetAliases[h])),d++,!0}};_.any(_.values(b))&&(c=a.suggestions.filter(function(a){return a.isRecommendedForPage}).map(function(a){return a.ceType}),d=_.findIndex(a.suggestions,function(a){return!a.isRecommendedForPage}),e=this.modelTree.getAvailableWidgetsNodes(),g("Stores","Stores_Slider_Gallery_Widget")||g("Blog","Blog_Post_Gallery"),g("GetSubscribers","GetSubscribers_Widget"))},a.prototype.utilCreateSelectedOffersMap=function(){return _.reduce(this.storyServices.story.selectedOffers,function(a,b){return a[b.type]=b.checked||b.autoProvisioned,a},{})},a.prototype.postProcessSuggestedTpaSections=function(a){var b=this.modelTree.getAvailableWidgetsNodes();_.each(a,function(a){if(!a.isTpa){var c=_.find(b,function(b){return b.contentElementType===a.ceType});c&&(a.isTpa=!0,a.widgetNode=c)}})},a.prototype.addStepMessage=function(a){this.notification.showOnSpinner({totalSteps:this.totalSteps,currentStep:this.currentStep++,message:a})},a.prototype.makeSectionsInGeneralPage=function(a,b){var c=this;void 0===b&&(b=!0),this.forceAddMode(!0);var d=this.contentManager.suggestedSectionsByPage(a.alias);b&&(this.totalSteps=d.length+1,this.currentStep=0);var e="0";return _.sequencePromises(d,function(d){return b&&c.addStepMessage("Adding "+(d.id||d.ceType)+" Section"),c.makeSectionInPage(a,d,e).then(function(a){e=a&&a.id||e})}).then(function(){c.forceAddMode(!1),b&&c.addStepMessage("Adding the finishing touches")})},a.prototype.addNewPage=function(a){var b=this;return this.pagesManager.addPage(a).then(function(a){return a&&a.id?b.makeSectionsInGeneralPage(a,!1):b.$q.when()})},a.prototype.makeSectionsInPage=function(a,b){var c=this;this.forceAddMode(!0);var d="0",e=this.utilCreateSelectedOffersMap(),f=this.contentSource.suggestedSections(e.Stores),g=b&&"Blog"===b.contentElementType;g||this.modifySectionRecommendationsBySelectedOffer(f,e),this.postProcessSuggestedTpaSections(f.suggestions);var h=this.contentManager.isSocialImageEnabled(),i=f.suggestions.filter(function(a){return a.isRecommendedForPage}),j=[];this.flags.fullSiteBuilder&&(j=this.contentManager.suggestedPages(e[this.applicationParameters.tpaTypes.Stores.type],!1).pageSuggestions.filter(function(a){return a.isRecommendedPage})),this.totalSteps=2+i.length+j.length+(h?1:0),this.currentStep=0,this.addStepMessage(""),this.addStepMessage("Arranging your Header and Footer");var k=this.$q.when();return h&&(k=this.contentManager.initSocialImages(),this.addStepMessage("Getting some of your online content")),k.then(function(){return _.sequencePromises(i,function(e){return c.addStepMessage("Adding "+(e.id||e.ceType)+" Section"),g&&"Blog"===e.ceType?(d=b.id,c.$q.when()):c.makeSectionInPage(a,e,d).then(function(a){d=a&&a.id||d})})}).then(function(){return _.sequencePromises(j,function(a){return c.addStepMessage("Adding "+a.pageTitle+" Page"),c.addNewPage(a.pageTitle)})}).then(function(){c.forceAddMode(!1),c.addStepMessage("Adding the finishing touches")})},a.prototype.makeSectionInPage=function(a,b,c){var d,e=this,f=[];if(b.isTpa&&(d=b.widgetNode,d.alias||(d.alias=b.rawSectionBrief&&b.rawSectionBrief.id)),!d){var g=this.modelTree.getDataHoldersAndExistingNodesForPage(a,b.ceType,b.rawSectionBrief.cardinality>1);"Contact"===b.ceType?(f=g.existingNodes,this.prepareDrafts(b,f),d=_.first(f)):d=_.first(this.prepareDrafts(b,f)),this.overrideDraftsContent([d],g.dataHolders)}var h=b.ceType.indexOf("Widget")>-1&&"Widget"!==b.ceType||d.isTpaNode&&d.isTpaNode();return d.isTpaWidget=h,this.defaultsService.getPresetsForNode(d,b.ceType,!0).then(function(b){h||(b=e.presetPreviewSorter.sort(b,d));var f=Math.floor(Math.random()*Math.min(b.length,5));return e.flags.noRandomForAutomationTests&&(f=0),h?e.solveTPACE(b,f,a,d,c):e.flags.prettyAlgo?e.solvePrettyAlgo(d,b,a,c):e.solveCE(f,d,f,b,a,c)})},a.prototype.solvePrettyAlgo=function(a,b,c,d){var e=10,f=5,g=this.presetPreviewGenerator.generateNewPreviews([a],b,0),h=this.layoutSolver.getPartSolutions(this.sitePartTypes.BODY,c.id,!0),i=h.getSelectedSolution(),j=this.Solution.calculateListSpans(i),k=c.children[c.children.length-1].id,l=j[k];l&&(g=this.presetHelpers.orderPresetsByPrettyAlgo(g,l));var m=g.filter(function(a){return a.score>0}),n=(m.length?m:g).slice(0,e).map(function(a,b,c){var d=Math.pow(a.score,f);return"undefined"==typeof a.score?a.stackedScore=b:a.stackedScore=0===b?d:c[b-1].stackedScore+d,a});return this.applyPreviewToPage(n,c,d)},a.prototype.applyPreviewToPage=function(a,b,c){var d=this,e=this.getPrettyAlgoWeightedRandomPreview(a);return this.presetHelpers.calculateSolution(e,this.sitePartTypes.BODY).then(function(a){return d.setConfigurationForSection(a,c),d.addSectionToPage(a,b,c,!0).then(function(a){return a})},function(){return a.splice(a.indexOf(e),1),a.length?d.applyPreviewToPage(a,b,c):void 0})},a.prototype.getPrettyAlgoWeightedRandomPreview=function(a){var b=a[a.length-1].stackedScore,c=Math.floor(Math.random()*b),d=a.find(function(a){return c<=a.stackedScore});return d},a.prototype.solveTPACE=function(a,b,c,d,e){var f=this,g=a[b],h=this.presetHelpers.generateFlattenedListOfPreviewsForTpa(d,[g])[0];return this.handleTpaPreviewSelected(c,h,e,!0).then(function(a){return f.previewService.waitForChanges().then(function(){return a})})},a.prototype.solveCE=function(a,b,c,d,e,f){var g=this,h=this.presetPreviewGenerator.generateNewPreviews([b],[d[c]],0)[0];return this.presetHelpers.calculateSolution(h,this.sitePartTypes.BODY).then(function(a){return g.setConfigurationForSection(a,f),g.addSectionToPage(a,e,f,!0).then(function(a){return a})},function(){return c++,c===d.length&&(c=0),c===a?g.$q.when():g.solveCE(a,b,c,d,e,f)})},a.prototype.draftsToPrepare=function(b){return b.rawSectionBrief.cardinality>1||b.ceType===AddSection.OpeningHours?a.ContentDraftsPerListSection:a.ContentDraftsPerSingleSection},a.prototype.prepareDrafts=function(a,b){var c=this;if("Contact"===a.ceType){var d=[];if(0===b.length){_.each(this.modelTree.data.children,function(c){c.getContentElementType()===a.ceType&&b.push(c)});var e=this.siteModelData.getDefaultValuesForCeType(a.ceType);_.each(b,function(b){c.contentElementGenerator.setupFieldLabels(b.contentElement,a),_.each(b.contentElement.values,function(a,c){""===a.value&&(b.contentElement.values[c].value=e[c])})})}return d}var f=this.contentSource.prepareDrafts(a,this.draftsToPrepare(a)),g=a.rawSectionBrief.syncWithBooking,h=a.rawSectionBrief.preferredMedia,i=_.map(f,function(b,d){var e=c.modelTree.createNodeFromCE(b,"999."+b.type+"_"+d);return e.syncWithBooking=g,e.preferredMedia=h,e.alias=a.id?a.id:null,_.forEach(e.children,function(a){return a.alias=e.alias}),b.items||(e.hiddenMedia=angular.copy(b.getHiddenMedia())),e.isDraft=!0,e});return i},a.prototype.restoreRemovedNode=function(a,b){var c=this;this.$log.warn("restoring node "+JSON.stringify(a));var d=_.find(b,function(b){return b.ceType===a.ceType}),e=this.modelTree.getPageNodeById(a.pageId);if(d&&e){var f=e.children[a.index-1];return this.makeSectionInPage(e,d,f&&!f.userHidden&&f.id||"0").then(function(a){a&&c.$log.warn("restored node "+a.id)})}},a.prototype.onPageCalculated=function(a){var b=this;return this.detectAndHandlePageSolutionFailure(a).then(function(){if(b.flags.renderedModel&&"header"!==a&&"footer"!==a){var c=b.layoutSolver.getSelectedSolution(b.sitePartTypes.BODY,a);b.setTpaInitialHeight(c)}b.createPageMobileSolution(a)})},a.prototype.setTpaInitialHeight=function(a){var b=this;a.filter(function(a){return SolutionManager.isTpaNode(a)}).forEach(function(a){var c,d=a.contentType===b.applicationParameters.tpaTypes.Blog.type;c=d?b.tpaService.getBlogFeedHeight():b.tpaService.getHeightOfPreset(a.segments[0].node);var e=a.segments[0].getLE(),f=b.applicationParameters.gridStep;c&&(e.layout[0].height=Math.ceil(c/f)*f),a.targetHeight=e.layout[0].height,a.segments[0].height=a.targetHeight})},a.prototype.createMobileSolution=function(a,b){var c=this;if(this.flags.mobileEditor){var d=[];return _.each(b,function(b){_.each(b.segments,function(b){d.push(c.mobileSolutionManager.createMobileLg(a,b))})}),d}},a.prototype.createPageMobileSolution=function(a){if(this.flags.mobileEditor){var b=void 0,c=void 0;"header"===a||"footer"===a?(c=a,b=this.layoutSolver.getSelectedSolution(c)):(c=this.sitePartTypes.BODY,b=this.layoutSolver.getSelectedSolution(c,a)),this.createMobileSolution(c,b)}},a.prototype.detectAndHandlePageSolutionFailure=function(a){var b=this;if("header"===a||"footer"===a)return this.simpleSolutionManager.detectAndHandleHeaderOrFooterFailure(a);var c=this.simpleSolutionManager.getSectionMap(a);return _.sequencePromises(c,function(c,d){return b.simpleSolutionManager.detectAndHandleSolutionFailure(a,d,void 0,c)}).then(function(){if(b.healthCheck.fixLog&&b.healthCheck.fixLog.removedNodes&&b.healthCheck.fixLog.removedNodes.length){var c=_.remove(b.healthCheck.fixLog.removedNodes,function(b){return b.pageId===a});if(c.length)return b.contentManager.initialize(b.storyServices.story).then(function(){var a=b.contentManager.suggestedSections().suggestions;return _.sequencePromises(c,function(c){return b.restoreRemovedNode(c,a)})})}})},a.prototype.recalculatePagesWithRemovedNodes=function(){var a=this;if(this.healthCheck.fixLog&&this.healthCheck.fixLog.removedNodes&&this.healthCheck.fixLog.removedNodes.length){this.flags.newBIInitEvents||this.consumerBiLogger.builder.existingSiteLoadstoryRecalculatePages(),this.initBI.reportStart({name:BIInitSteps.RecalculatePages,init:!0});var b=_(this.healthCheck.fixLog.removedNodes).groupBy("pageId").keys().value();return _.sequencePromises(b,function(b){return a.layoutSolver.calculatePage(b,!0)}).then(function(){return a.initBI.reportEnd({name:BIInitSteps.RecalculatePages,init:!0})})}return this.$q.resolve()},a.prototype.overrideDraftsContent=function(a,b){var c=this;if(b&&0!==b.length){var d=b[0].isList();if(d){var e=0;_.forEach(a[0].children,function(a,d){var f=a.getContentElementType(),g="ListHeader"!==f&&"ListFooter"!==f;if(g){var h=c.getListItemByIndexAndType(e,f,b[0]),i=c.getContentKeysToOverride(f);_.forEach(i,function(b){a.contentElement.values[b].value=_.clone(h.contentElement.values[b].value)}),e++}})}else _.forEach(a,function(a,d){var e=a.getContentElement().usesSocialImages,f=a.getContentElementType(),g=b[d%b.length],h=c.getContentKeysToOverride(f);_.forEach(h,function(b){e&&"media"===a.contentElement.values[b].type||(a.contentElement.values[b].value=_.clone(g.contentElement.values[b].value))})})}},a.prototype.getListItemByIndexAndType=function(a,b,c){return"ListHeader"===b?this.modelTree.getListHeader(c):"ListFooter"===b?this.modelTree.getListFooter(c):this.modelTree.getListItems(c)[a]},a.prototype.getContentKeysToOverride=function(a){switch(a){case"Homepage_about":case"Inner_about":return["AboutBody"];case"OpeningHours":return["OpeningHoursDescription"];case"Welcome":return["WelcomeBody","WelcomeMedia"];case"Testimonial":return["CustomerQuote","CustomerName"];case"ListHeader":return["listTitle","listSubTitle"];case"ListFooter":return["button","listDescription"]}return[]},a}();SectionManager.ContentDraftsPerSingleSection=3,SectionManager.ContentDraftsPerListSection=1,angular.module("siteGeneratorBuilderInternal").service("sectionManager",SectionManager);var builder;!function(a){var b=function(){function a(a,b,c,d,e){this.simpleSolutionManager=a,this.sectionManager=b,this.modelTree=c,this.spinnerService=d,this.undoRedo=e}return a.$inject=["simpleSolutionManager","sectionManager","modelTree","spinnerService","undoRedo"],a.prototype.isPartial=function(a){return 0===a.id.indexOf("Partial lg ")},a.prototype.switchColumnPosition=function(a){var b=this;this.spinnerService.waitForMe("switchColumnPosition");var c=a.containerPageId,d=a.id,e=this.simpleSolutionManager.getSectionSolution(c,d);if(!(1!==e.length||e[0].getSegmentSignature().length<2)){var f=e[0],g=f.getSegmentSignature(),h=this.switchColumnPositionInSignature(g),i=this.simpleSolutionManager.createSingleSegementLg(a,h,void 0,c,this.modelTree.getAllVisibleContentElements());return i.getLayoutSelectionStore().copyLgRelatedData(c,f.getUniqueIdForSolution(),i.getUniqueIdForSolution()),this.simpleSolutionManager.replaceSectionOnPage(c,d,[i]).then(function(a){var c={direction:b.simpleSolutionManager.Animation.Direction.REVERSE,type:b.simpleSolutionManager.Animation.Type.CROSS_FADE,duration:.1};return b.sectionManager.startAnimatedRender(a,c)}).then(function(){b.spinnerService.imDone("switchColumnPosition"),b.undoRedo.captureOperation()})}},a.prototype.switchColumnPositionInSignature=function(a){var b=a.split(""),c=b.pop();return b.unshift(c),b.join("")},a}();a.PartialSectionManager=b,angular.module("siteGeneratorBuilderInternal").service("partialSectionManager",b)}(builder||(builder={}));var builder;!function(a){var b=function(){function a(a,b,c,d,e,f,g,h,i,j,k){this.simpleSolutionManager=a,this.sectionManager=b,this.layoutSolver=c,this.storyServices=d,this.mobileSolutionManager=e,this.layoutSelectionStoreProvider=f,this.applicationState=g,this.sitePartTypes=h,this.modelTree=i,this.undoRedo=j,this.$q=k}return a.$inject=["simpleSolutionManager","sectionManager","layoutSolver","storyServices","mobileSolutionManager","layoutSelectionStoreProvider","applicationState","sitePartTypes","modelTree","undoRedo","$q"],a.prototype.handlePreviewSelected=function(a){var b=this,c=this.storyServices.story.selectedPage,d=this.applicationState.getContentFocus();return this.$q.when().then(function(){var e=!0;_.each(a.solution,function(a){return a.setPage(c)});var f=b.sectionManager.getSectionSolution(d.sitePart,c,a.previewNode.getId()),g=b.mobileSolutionManager.getMobileSolution(f);b.layoutSelectionStoreProvider.mergeLayoutSelectionStoreFromPresetPreview(a.lss,a.dummyPageId,c,b.layoutSelectionStoreProvider.getKeyMap(a.solution,a.previewNode),void 0,!1,e),b.mobileSolutionManager.setMobileSolution(f,a.solution);var h=b.mobileSolutionManager.getMobileSolution(f);return b.storyServices.renderMobileSolution(d.sitePart,c,h,g).then(function(){})["catch"](function(a){console.log(a)})}).then(function(){b.undoRedo.captureOperation()})},a.prototype.onPartCalculated=function(a,b){var c=this;if(a===this.sitePartTypes.BODY){var d=this.simpleSolutionManager.getSectionMap(b);return _.sequencePromises(d,function(d,e){var f=c.modelTree.findById(e,b);return c.mobileSolutionManager.detectAndHandleMobileSolutionFailure(a,b,f,d)})}var e=void 0;return e=a===this.sitePartTypes.HEADER?this.modelTree.getGeneralInformation():this.modelTree.getFooterInformation(),this.mobileSolutionManager.detectAndHandleMobileSolutionFailure(a,a,e,this.layoutSolver.getSelectedSolution(a))},a.prototype.validateMobileSolution=function(a,b,c,d){var e=this.sectionManager.getSectionSolution(b,c,d);return this.mobileSolutionManager.isMobileSolutionFitsDesktopSolution(b,a,e)},a}();a.MobileSectionManager=b,angular.module("siteGeneratorBuilderInternal").service("mobileSectionManager",b)}(builder||(builder={}));var ListSpanOverlay=function(){function a(a,b,c,d,e,f,g,h,i,j,k,l,m,n,o,p){var q=this;this.$scope=a,this.$element=b,this.$timeout=c,this.previewScale=d,this.applicationState=e,this.consumerBiLoggerHelpers=f,this.storyServices=g,this.modelTree=h,this.assistantManager=i,this.overlayManager=j,this.overlaySegmentManager=k,this.consumerBiLogger=l,this.sectionManager=m,this.sitePartTypes=n,this.listSpanUtils=o,this.flags=p,this.clearLgList=!1,this.canAddSection=!1,this.isHeaderContent=function(){var a=q.applicationState.getContentFocus();return a&&a.sitePart===q.sitePartTypes.HEADER},this.isFooterContent=function(){var a=q.applicationState.getContentFocus();return a&&a.sitePart===q.sitePartTypes.FOOTER},this.$scope.$watch(function(){return q.storyServices.story&&q.storyServices.story.selectedPage},function(){return q.refresh()}),this.$scope.$watch(function(){return q.listSpan},function(){return q.refresh()}),this.$scope.$watch(function(){return q.overlayManager.data.focusedListSpan},function(){return q.refresh()}),this.$scope.$watch(function(){return q.previewScale.getScale()},function(a){return q.refresh()})}return a.$inject=["$scope","$element","$timeout","previewScale","applicationState","consumerBiLoggerHelpers","storyServices","modelTree","assistantManager","overlayManager","overlaySegmentManager","consumerBiLogger","sectionManager","sitePartTypes","listSpanUtils","flags"],a.prototype.isMobileEditMode=function(){return this.applicationState.isInMobileEditMode()},a.prototype.isFocused=function(){return this.flags.onStageIndicationsAll||this.isCurrentSection()},a.prototype.isCurrentSection=function(){var a=this.applicationState.getContentFocus();return a&&a.nodeId===this.listSpan.node.getId()&&a.sitePart===this.listSpan.sitePart},a.prototype.areAddButtonsEnabled=function(){return!this.applicationState.isAddSectionMode()},a.prototype.onAdd=function(a){this.consumerBiLogger.sectionManagement.addSectionClick("plus button"),this.sectionManager.addSection(this.listSpan.node,a)},a.prototype.blockMouse=function(){if(this.flags.enableChangeLayoutTourForTPAs){var a=this.assistantManager.isInActiveTask()&&"changeLayoutTask"===this.assistantManager.getActiveTask().id;if(a)return this.isTpa()&&!this.hasPresets()}return this.isTpa()&&this.assistantManager.isInActiveTask()},a.prototype.handleListSpanOverlayDblClick=function(){this.blockMouse()||this.applicationState.isEditMode()||(this.consumerBiLoggerHelpers.setPanelSource("double-click on overlay"),this.goToEditMode())},a.prototype.isGoToDesignPanel=function(){return this.flags.newNavigationWhenPanelIsOpen&&(this.applicationState.isSwitchPresetMode()||this.applicationState.isInSectionBackgroundPanel()||this.applicationState.isInSectionAnimationPanel()||this.applicationState.isInSectionColorPanel()||this.applicationState.isInSectionFontPanel())&&(this.isTpa()||this.isHeaderContent()||this.isFooterContent())},a.prototype.handleListSpanOverlayClick=function(){if(!this.blockMouse()){if(this.consumerBiLoggerHelpers.setPanelSource("click on overlay"),this.isCurrentSection()&&!this.applicationState.isEditMode())return void this.goToEditMode();this.applicationState.setContentFocus(this.listSpan.node.id,this.listSpan.sitePart),this.isGoToDesignPanel()?this.applicationState.goToSwitchPresetMode("overlay"):this.applicationState.goToSectionPanel("overlay")}},a.prototype.isTpa=function(){var a=this.getSingleSegment();return a&&a.node&&a.node.isTpaNode&&a.node.isTpaNode()},a.prototype.hasPresets=function(){return this.listSpanUtils.ceHasPresets(this.listSpan.node.contentElementType)},a.prototype.printPrettyAlgoInfo=function(){console.log(this.listSpan&&this.listSpan.prettyAlgo)},a.prototype.getPrettyAlgoScore=function(){return this.listSpan&&this.listSpan.prettyAlgo&&this.listSpan.prettyAlgo.score||"N/A"},a.prototype.prettyAlgoGetRuleNames=function(){return this.listSpan&&this.listSpan.prettyAlgo&&this.listSpan.prettyAlgo.rules?this.listSpan.prettyAlgo.rules.map(function(a){return a.name}):[]},a.prototype.printBgOpacityData=function(){console.log("opacityDebugData: "),_.each(this.listSpan.groups,function(a){_.each(a.opacityDebugData,function(a,b){console.log(b,":",a)})})},a.prototype.refresh=function(){if(void 0!==this.listSpan){var a=this.previewScale.getScale();this.refreshGroups(a),this.refreshPosition(a),this.refreshIndications()}},a.prototype.refreshIndications=function(){if(this.canAddSection=!1,this.storyServices.story){var a=this.modelTree.getPageNodeById(this.storyServices.story.selectedPage),b="Blog_Single_Post_Widget"!==a.tpaExtraPage&&_.some(a.children,{userHidden:!1});this.canAddSection=b&&!this.isMobileEditMode()&&this.areAddButtonsEnabled()&&!this.assistantManager.isInActiveTask()}},a.prototype.refreshPosition=function(a){var b=this.overlayManager.listSpanManager.getListSpanLayout(this.listSpan).scale(a);this.$element.css({top:b.top,height:b.height})},a.prototype.refreshGroups=function(a){
var b=this;this.isFocused()&&this.$timeout(function(){b.listSpan.groups.forEach(function(c,d){b.refreshLayoutGroup(c,d,a)})},0,!1)},a.prototype.refreshLayoutGroup=function(a,b,c){var d=this.$element.find(".layout-group-overlay:eq("+b+")"),e=this.overlayManager.listSpanManager.calcLayoutGroupLayout(a);d.css({height:e.height*c,width:a.targetWidth*c})},a.prototype.goToEditMode=function(){var a=this.getSingleSegment();a?this.overlaySegmentManager.editSegment(a):this.applicationState.goToEditMode()},a.prototype.getSingleSegment=function(){return _.get(this,"listSpan.groups[0].segments[0]")},a.prototype.isShowSegmentOverlay=function(){return this.isFocused()&&!this.clearLgList&&!this.isMobileEditMode()},a}();angular.module("siteGeneratorStaticsConsumerAppInternal").component("listSpanOverlay",{templateUrl:"views/list-span-overlay.html",controller:ListSpanOverlay,bindings:{listSpan:"="}});var SegmentOverlay=function(){function a(a,b,c,d,e,f,g,h,i,j,k,l,m,n,o,p,q,r,s,t,u,v){var w=this;this.createGuid=a,this.$scope=b,this.$element=c,this.modelTree=d,this.$translate=e,this.applicationState=f,this.overlaySegmentManager=g,this.consumerBiLoggerHelpers=h,this.nodeTitleManager=i,this.mediaOverrideManager=j,this.contentElementFieldManager=k,this.mediaEditorManager=l,this.listPanelManager=m,this.previewScale=n,this.columnService=o,this.applicationParameters=p,this.CcDialogBuilder=q,this.PresetMediaType=r,this.onstageActionsManager=s,this.consumerMenu=t,this.richTextService=u,this.flags=v,this.leArgList=[],this.tooltipOptions={trigger:"click",timer:7e3,interactive:!0},this.isComponentHighlight=function(a){return w.isLayoutArgsFitsLayout(w.overlaySegmentManager.lastHoveredArgs,a)},this.isComponentActive=function(a){return w.isLayoutArgsFitsLayout(w.overlaySegmentManager.lastClickedArgs,a)},this.isSectionActive=function(){return w.flags.onStageIndications?w.overlaySegmentManager.isActiveSegmentNodeIdAnyEdit(w.segment.getSafeId(),w.segment.contentElement.isSpecialListItem()):w.overlaySegmentManager.isActiveSegmentNodeId(w.segment.getSafeId(),w.segment.contentElement.isSpecialListItem())},this.onMouseEnterComponent=function(a){return w.overlaySegmentManager.lastHoveredArgs=w.getLayoutArgs(a)},this.onMouseLeaveComponent=function(){return w.overlaySegmentManager.lastHoveredArgs=null},this.onClickComponent=function(a,b){return w.overlaySegmentManager.lastClickedArgs=w.getLayoutArgs(a,b)},this.node=this.getNode(),this.isListItem=this.node.isListItem&&["ListFooter","ListHeader"].every(function(a){return a!==w.node.contentElementType}),this.initComponents(),this.overlaySegmentManager.onSegmentOverlayCreate(this.node,this.$element),this.$scope.$watch(function(){return w.segment},function(){return w.updateLayout()}),this.$scope.$watch(function(){return w.segment.renderTime},function(){return w.initComponents()}),this.$scope.$watch(function(){return w.segment.getLENoError()},function(){return w.initComponents()}),this.$scope.$watch(function(){return w.previewScale.getScale()},function(a){return w.updateLayout(a)}),this.$scope.$on("$stateChangeSuccess",function(a,b){(b.name===config.STATES.BUILDER_EDIT||b.name===config.STATES.BUILDER_SWITCH_PRESET)&&w.updateLayout()})}return a.$inject=["createGuid","$scope","$element","modelTree","$translate","applicationState","overlaySegmentManager","consumerBiLoggerHelpers","nodeTitleManager","mediaOverrideManager","contentElementFieldManager","mediaEditorManager","listPanelManager","previewScale","columnService","applicationParameters","CcDialogBuilder","PresetMediaType","onstageActionsManager","consumerMenu","richTextService","flags"],a.prototype.$onDestroy=function(){this.overlaySegmentManager.onSegmentOverlayDestroy(this.node)},a.prototype.editSection=function(a){a.stopPropagation(),this.consumerBiLoggerHelpers.setPanelSource("click on overlay"),this.overlaySegmentManager.editSegment(this.segment)},a.prototype.getTitle=function(){if(this.flags.onStageIndications&&this.isListItem){var a=this.components.find(function(a){return"title"===a.field.data.subType});if(!a)return"List Item";var b=a.field.data.value;return this.richTextService.isRichText(b)?_.extractPlainText(this.richTextService.unMarkRichText(b)):b}var c=this.nodeTitleManager.getNodeTitle(this.node),d="general."+c,e=this.$translate(d);return e===d?c:e},a.prototype.getLayoutTitle=function(a){if(this.flags.onStageIndications){if("shoppingCart"===a.le.type)return"Store";if("media"===a.field.data.type)return"Logo"===a.field.key?"Logo":"Social.SocialButtons"===a.field.key?"Social":this.mediaOverrideManager.getCurrentSelectedMediaTypeLabel(this.node);var b=a.field?a.field.data.displayName:a.le.displayName;return b?b:this.nodeTitleManager.normalizeSubType(a.field.data.subType)}return a.field?a.field.data.displayName:a.le.displayName},a.prototype.updateLayout=function(a){var b=this;void 0===a&&(a=this.previewScale.getScale()),this.style=this.getSegmentLayout(this.segment,a),this.componentsStyle={},this.flags.onStageIndications?this.components.concat(this.tpaComponents).forEach(function(c){b.componentsStyle[c.id]=b.getComponentLayout(c.le,a)}):this.components.forEach(function(c){b.componentsStyle[c.id]=b.getComponentLayout(c.le,a)})},a.prototype.getTpaType=function(a){switch(a.le.type){case"shoppingCart":return this.applicationParameters.tpaTypes.Stores.type;default:return""}},a.prototype.getTpaNode=function(a){return _.find(this.modelTree.getTpaNodes(),{contentElementType:this.getTpaType(a)})},a.prototype.getSegmentLayout=function(a,b){var c=a.containingLG.getLgData(),d=c.strip.paddingTop||0;c.topLine.enable&&"space"===c.topLine.line&&(d+=c.topLine.space);var e=a.left,f=a.width;if(this.isRegularColumns){var g=this.columns.findIndex(function(b){return b.segment===a}),h=this.columns[g];e=this.calculateColumnLeft(h,g),"image"===h.currentSettings.backgroundMode&&(f=this.columnsUnitWidth*h.width)}else this.isVirtualColumns?(f=this.columnsWidth,e-=(f-940)/2):this.mediaType===this.PresetMediaType.COAST2COAST&&(e-=(this.applicationState.previewFrameWidth-940)/2,f=this.applicationState.previewFrameWidth);var i=(d+a.top)*b,j=e*b,k=a.getRenderedHeight()*b,l=f*b;return this.spaceLayout(i,j,k,l)},a.prototype.getComponentLayout=function(a,b){var c=this;if(!this.flags.onStageIndicationsAll&&!this.isSectionActive())return{visibility:"hidden"};var d,e,f=a.absoluteLeft,g=a.absoluteTop,h=a.height,i=a.width;if(this.isRegularColumns){d=this.columns.findIndex(function(a){return a.segment===c.segment}),e=this.columns[d];var j=this.columnService.getAlignment(this.columns,d);j&&(f-=(e.renderedMinWidth-this.segment.width)*j/100,"image"===e.currentSettings.backgroundMode&&(f+=(this.columnsUnitWidth*e.width-e.segment.width)*j/100)),e.renderedLayoutLeftOffset&&(f+=e.renderedLayoutLeftOffset)}else this.isVirtualColumns?(d=a.colIndex,e=this.columns[d],f-=e.offset*(this.columnService.totalPageWidth/this.columnService.totalStructureColumns),f+=this.calculateColumnLeft(e,d),e.renderedLayoutLeftOffset&&(f+=e.renderedLayoutLeftOffset)):this.mediaType===this.PresetMediaType.COAST2COAST&&(f+=(this.applicationState.previewFrameWidth-940)/2);return this.layoutElement.isMediaLayout(a)&&(e&&"image"===e.currentSettings.backgroundMode?(g=0,f=this.isRegularColumns?0:this.calculateColumnLeft(e,d,0),h=this.segment.height,i=this.columnsUnitWidth*e.width):this.mediaType===this.PresetMediaType.COAST2COAST&&(f=0,i=this.applicationState.previewFrameWidth)),this.spaceLayout(g*b,f*b,h*b,i*b,!0)},a.prototype.calculateColumnLeft=function(a,b,c){var d=a.offset*this.columnsUnitWidth+this.columnSpacing*b,e=a.renderedMinWidth;return this.isRegularColumns?(d-=(this.columnsWidth-940)/2,e="image"===a.currentSettings.backgroundMode?this.columnsUnitWidth*a.width:a.segment.width):d+=this.columnsMargin,isNaN(c)&&(c=this.columnService.getAlignment(this.columns,b)),c&&(d+=(a.width*this.columnsUnitWidth-e)*c/100),d},a.prototype.initComponents=function(){var a=this,b=this.segment.getLENoError();if(b&&b.argList&&(this.layoutElement=b,this.leArgList=b.argList,this.components=this.calculateComponents(b),this.flags.onStageIndications&&(this.tpaComponents=b.layoutArray.filter(function(a){return"shoppingCart"===a.type}).map(function(b){return{le:b,id:a.createGuid}})),this.isMobileColumns=_.any(this.columns,function(a){return a.isMobile}),this.isVirtualColumns=_.any(this.columns,function(a){return a.isVirtual}),this.isRegularColumns=!this.isVirtualColumns&&_.any(this.columns,function(a){return a.allSettings})&&this.columns.length>1,this.mediaType=this.segment.getLayoutSelectionStore().getOverride("media",this.segment,"allowedMediaOverrides"),(this.isVirtualColumns||this.isRegularColumns)&&!this.isMobileColumns)){var c=this.columnService.getColumnsContainerProps(this.columns),d=c.fullWidth,e=c.siteMargin,f=c.columnsMargin,g=c.frameMargin;this.columnsWidth=d?this.applicationState.previewFrameWidth-2*(e||0):this.applicationParameters.desktopPageWidth,this.columnSpacing=f,this.columnsMargin=g,this.columnsUnitWidth=(this.columnsWidth-this.columnSpacing*(this.columns.length-1)-2*this.columnsMargin)/this.columnService.totalStructureColumns}this.updateLayout()},a.prototype.isNotEnoughSpaceInComponent=function(a){var b=this.$element.find(".segment-component")[a],c=b.getElementsByClassName("interact-wrap")[0];return b.clientHeight<36||c.clientWidth+6>b.clientWidth},a.prototype.isNotEnoughSpaceInTpaComponent=function(a){var b=this.$element.find(".tpa-component")[a],c=b.getElementsByClassName("interact-wrap")[0];return b.clientHeight<36||c.clientWidth+6>b.clientWidth},a.prototype.doClickOnSegmentOverlay=function(a){this.flags.onStageIndications&&this.isListItem&&this.runListClickAction(a,this.node),!this.flags.onStageIndications&&this.editSection(a)},a.prototype.getNode=function(){return"header"===this.segment.getSafeId()?this.modelTree.getGeneralInformation():this.segment.node},a.prototype.calculateComponents=function(a){var b=this;if(!a||!Array.isArray(a.layoutArray))return[];var c=this.contentElementFieldManager.getNodeFields(this.segment.contentElement,this.node,!1),d=this.contentElementFieldManager.getReferencedFields(this.segment.contentElement,this.node),e=c.concat(d);return e.length>0&&(e[e.length-1].lastField=!0),a.calculateAbsoluteLocations(),_.chain(a.layoutArray).filter(function(a){return a.argIndex>-1&&"label"!==a.subType}).map(function(c){var d={type:a.argList[c.argIndex].type,subType:a.argList[c.argIndex].subType},f=_.find(e,{data:d});return b.generateComponentObject(c,f)}).value()},a.prototype.generateComponentObject=function(a,b){return{le:a,field:b,id:this.createGuid()}},a.prototype.getLayoutArgs=function(a,b){return b&&this.doTooltip(b),{contentElementType:this.segment.contentElement.type,type:this.leArgList[a.argIndex].type,subType:this.leArgList[a.argIndex].subType}},a.prototype.doTooltip=function(a){var b=$(a.target);this.domHasTooltip(b)&&this.activateTooltip(b,a)},a.prototype.domHasTooltip=function(a){return a&&a.tooltipster()&&a.tooltipster().length>0},a.prototype.activateTooltip=function(a,b){var c=a.get(0).getBoundingClientRect(),d=(c.left+c.right)/2;a.tooltipster("option","offsetX",b.clientX-d),a.tooltipster("reposition")},a.prototype.isLayoutArgsFitsLayout=function(a,b){if(a&&this.isSectionActive()){if(b){var c=this.leArgList[b.argIndex];return a.contentElementType===this.segment.contentElement.type&&a.type===c.type&&a.subType===c.subType}return!!a}return!1},a.prototype.spaceLayout=function(b,c,d,e,f){void 0===f&&(f=!1);var g=e+2*a.BorderWidth+2*a.Padding,h=d+2*a.Padding,i=b-(f?a.BorderWidth:a.Padding),j=c-(f?a.BorderWidth:a.BorderWidth+a.Padding);return{width:g,height:h,top:i,left:j}},a.prototype.getMenuTooltipOptions=function(){return this.tooltipOptions},a.prototype.getMenuTooltip=function(a){return"menu"===a.le.type?1===this.consumerMenu.getVisiblePageNodes().length?"section_menu_clicked":"page_menu_clicked":void 0},a.prototype.onPageTooltipLinkClick=function(){this.consumerBiLoggerHelpers.setPanelSource("menu tooltip"),this.applicationState.goToPageManager()},a.prototype.onSectionTooltipLinkClick=function(){this.CcDialogBuilder.showSupportIframe(this.$translate("help.tooltip.sectionTooltip"),CONSUMER_DIALOGS.MENU_TOOLTIP_HELP)},a.prototype.runListClickAction=function(a,b){this.consumerBiLoggerHelpers.setPanelSource("click on list item"),this.runAction(a,this.onstageActionsManager.getActionsByType("LIST_ITEM").click,b)},a.prototype.runAction=function(a,b,c){a.stopPropagation(),this.onstageActionsManager.executeAction(b,c)},a.prototype.getListActionsMenu=function(){return this.onstageActionsManager.getActionsByType("LIST_ITEM").menu},a.prototype.stopPropagation=function(a){a.preventDefault(),a.stopPropagation()},a}();SegmentOverlay.BorderWidth=1,SegmentOverlay.Padding=0,angular.module("siteGeneratorStaticsConsumerAppInternal").component("segmentOverlay",{templateUrl:"views/segment-overlay.html",controller:SegmentOverlay,bindings:{segment:"=",columns:"="}});var ComponentOverlay=function(){function a(a,b,c,d,e,f,g,h,i,j,k,l,m){var n=this;this.consumerMenu=a,this.onstageActionsManager=b,this.overlaySegmentManager=c,this.mediaOverrideManager=d,this.nodeTitleManager=e,this.consumerBiLoggerHelpers=f,this.consumerBiLogger=g,this.applicationState=h,this.CcDialogBuilder=i,this.$translate=j,this.$timeout=k,this.$element=l,this.flags=m,this.menuIsShown=!1,this.MENU_BI_TIMEOUT=1e3,this.clicksCount=0,this.isComponentHighlight=function(){return n.isLayoutArgsFitsLayout(n.overlaySegmentManager.lastHoveredArgs,n.component.le)}}return a.$inject=["consumerMenu","onstageActionsManager","overlaySegmentManager","mediaOverrideManager","nodeTitleManager","consumerBiLoggerHelpers","consumerBiLogger","applicationState","CcDialogBuilder","$translate","$timeout","$element","flags"],a.prototype.getLayoutTitle=function(){if("shoppingCart"===this.component.le.type)return this.$translate("general.Stores");if("media"===this.component.field.data.type)return"Logo"===this.component.field.key?this.$translate("general.logo"):"Social.SocialButtons"===this.component.field.key?this.$translate("general.social"):this.mediaOverrideManager.getCurrentSelectedMediaTypeLabel(this.node);var a=this.component.field?this.component.field.data.displayName:this.component.le.displayName;return a?a:this.nodeTitleManager.normalizeSubType(this.component.field.data.subType)},a.prototype.getMenuTooltipOptions=function(){return a.tooltipOptions},a.prototype.getMenuTooltip=function(){return"menu"===this.component.le.type?1===this.consumerMenu.getVisiblePageNodes().length?"section_menu_clicked":"page_menu_clicked":void 0},a.prototype.onPageTooltipLinkClick=function(){this.consumerBiLoggerHelpers.setPanelSource("menu tooltip"),this.applicationState.goToPageManager()},a.prototype.onSectionTooltipLinkClick=function(){this.CcDialogBuilder.showSupportIframe(this.$translate("help.tooltip.sectionTooltip"),CONSUMER_DIALOGS.MENU_TOOLTIP_HELP)},a.prototype.doTooltip=function(a){var b=$(a.target);this.domHasTooltip(b)&&this.activateTooltip(b,a)},a.prototype.domHasTooltip=function(a){return a&&a.tooltipster()&&a.tooltipster().length>0},a.prototype.activateTooltip=function(a,b){var c=a.get(0).getBoundingClientRect(),d=(c.left+c.right)/2;a.tooltipster("option","offsetX",b.clientX-d),a.tooltipster("reposition")},a.prototype.isLayoutArgsFitsLayout=function(a,b){if(a&&this.overlaySegmentManager.isActiveSegmentNodeId(this.segment.getSafeId(),this.segment.contentElement.isSpecialListItem())){if(b){var c=this.leArgList[b.argIndex];return a.contentElementType===this.segment.contentElement.type&&a.type===c.type&&a.subType===c.subType}return!!a}return!1},a.prototype.setPositionClass=function(){var a,b=this.$element.find(".segment-component")[0];return this.isNotEnoughHeightInComponent(b)&&(a="ontop"),this.isNotEnoughWidthInComponent(b)&&(a="ontop"),a&&this.isNotEnoughMarginFromFakeBrowserEdge(b)?"onbottom":a},a.prototype.isNotEnoughWidthInComponent=function(a){var b=a.getElementsByClassName("interact-wrap")[0],c=Array.prototype.reduce.call(b.children,function(a,b){return a+=b.clientWidth},0);return c+6>a.clientWidth},a.prototype.isNotEnoughHeightInComponent=function(b){return b.clientHeight<a.MinComponentHeight},a.prototype.isNotEnoughMarginFromFakeBrowserEdge=function(a){var b=this.$element.parents(".overlay-viewport")[0];if(b){var c=a.getBoundingClientRect().top,d=b.getBoundingClientRect().top;return 24>c-d}},a.prototype.hasActionsMenu=function(){return this.getActionsMenu().length},a.prototype.getActionsMenu=function(){return this.onstageActionsManager.getMenuActions(this.component.field)},a.prototype.onShowActionsMenu=function(){var a=this;this.menuIsShown=!0,this.$timeout(function(){a.menuIsShown&&a.consumerBiLogger.contentEditor.onstageQuickActionsTooltipShown(a.component.field.key,a.node.getId(),a.node.alias,a.component.field.contentElement.type)},this.MENU_BI_TIMEOUT)},a.prototype.onHidenActionsMenu=function(){this.menuIsShown=!1},a.prototype.runAction=function(a){this.onstageActionsManager.executeAction(a,this.component.field),this.consumerBiLogger.builder.onstageOsiQuickAction("OSI",a.name,this.component.field.key,this.node.getId(),this.component.field.contentElement.type,this.node.alias)},a.prototype.runDblClickAction=function(){this.onstageActionsManager.runDblClickAction(this.component.field)},a.prototype.runClickAction=function(a){this.doTooltip(a),this.onstageActionsManager.runClickAction(this.component.field)},a.prototype.handleClicks=function(a){this.onstageActionsManager.hasDoubleClickAction(this.component.field)?this.doSingleOrDoubleClick(a):this.runClickAction(a)},a.prototype.doSingleOrDoubleClick=function(b){var c=this;0===this.clicksCount?(this.clicksCount++,this.singleClickTimeout=this.$timeout(function(){c.runClickAction(b),c.clicksCount=0},a.timeMarginForDblClick)):(this.$timeout.cancel(this.singleClickTimeout),this.runDblClickAction(),this.clicksCount=0)},a}();ComponentOverlay.tooltipOptions={trigger:"click",timer:7e3,interactive:!0},ComponentOverlay.MinComponentHeight=60,ComponentOverlay.timeMarginForDblClick=300,angular.module("siteGeneratorStaticsConsumerAppInternal").component("componentOverlay",{templateUrl:"views/component-overlay.html",controller:ComponentOverlay,bindings:{component:"=",componentsStyle:"=",node:"=",segment:"=",leArgList:"=?"}});var Zoom=function(){function a(a,b,c,d){var e=this;this.previewScale=a,this.applicationState=b,this.consumerBiLogger=c,this.flags=d,this.onZoomIn=_.debounce(function(){e.canZoomIn()&&(e.previewScale.zoomIn(!0),e.consumerBiLogger.builder.zoomInOut("zoom in",Math.round(100*e.previewScale.getScaleFactor())))},150),this.onZoomOut=_.debounce(function(){e.canZoomOut()&&(e.previewScale.zoomOut(!0),e.consumerBiLogger.builder.zoomInOut("zoom out",Math.round(100*e.previewScale.getScaleFactor())))},150)}return a.$inject=["previewScale","applicationState","consumerBiLogger","flags"],a.prototype.canZoomIn=function(){return this.isZoomEnabled()&&this.previewScale.getScaleFactor()<PreviewScale.MaxScaleFactor&&this.applicationState.isInDesktopEditMode()},a.prototype.canZoomOut=function(){return this.isZoomEnabled()&&this.previewScale.getScaleFactor()>PreviewScale.MinScaleFactor&&this.applicationState.isInDesktopEditMode()},a.prototype.isZoomEnabled=function(){return!this.applicationState.isOnAddState()},a}();angular.module("siteGeneratorStaticsConsumerAppInternal").component("zoom",{templateUrl:"views/zoom.html",controller:Zoom});var DropTargetOverlay=function(){function a(a,b,c,d,e,f,g,h,i,j,k,l,m,n){var o=this;this.$scope=a,this.$element=b,this.$translate=c,this.applicationState=d,this.previewScale=e,this.previewService=f,this.overlayManager=g,this.sectionDrag=h,this.sectionManager=i,this.spinnerService=j,this.sitePartTypes=k,this.consumerBiLogger=l,this.consumerBiLoggerHelpers=m,this.flags=n,this.TranslateKeys={DEFAULT_TEXT:"builder.drop-target-hint",DRAG_OVER:"builder.drop-target-drag-over"},this.$scope.$watch(function(){return o.overlayManager.dropTargetData.dropTargetPosition},function(){return o.updatePosition()}),this.setDropTargetText(this.TranslateKeys.DEFAULT_TEXT),this.setDragListeners()}return a.$inject=["$scope","$element","$translate","applicationState","previewScale","previewService","overlayManager","sectionDrag","sectionManager","spinnerService","sitePartTypes","consumerBiLogger","consumerBiLoggerHelpers","flags"],a.prototype.setDropTargetText=function(a){this.dragText=this.$translate(a)},a.prototype.setDragListeners=function(){var a=this;this.$element.on("dragleave",function(){return a.setDropTargetText(a.TranslateKeys.DEFAULT_TEXT)}),this.$element.on("dragenter",function(){return a.setDropTargetText(a.TranslateKeys.DRAG_OVER)})},a.prototype.updatePosition=function(){this.$element.css("top",this.overlayManager.dropTargetData.dropTargetPosition)},a}();DropTargetOverlay.SpinnerKey="addsection",angular.module("siteGeneratorStaticsConsumerAppInternal").component("dropTargetOverlay",{templateUrl:"views/preview/drop-target-overlay.html",controller:DropTargetOverlay,bindings:{sitePart:"="}});var ListSpanTools=function(){function a(a,b,c,d,e,f,g,h,i,j,k,l,m,n,o,p,q,r,s,t,u,v,w,x,y,z,A,B,C,D,E,F,G,H,I,J,K){this.$element=a,this.$q=b,this.$translate=c,this.$scope=d,this.$stateParams=e,this.$timeout=f,this.autoSaveNotifier=g,this.CcDialogBuilder=h,this.modelTree=i,this.nodeManipulationService=j,this.notification=k,this.overlayManager=l,this.pagesManager=m,this.previewService=n,this.previewScale=o,this.sectionManager=p,this.mediaOverride=q,this.simpleSolutionManager=r,this.designKit=s,this.sitePartTypes=t,this.storyServices=u,this.undoRedo=v,this.applicationState=w,this.themeChooser=x,this.layoutSelectionStoreProvider=y,this.consumerBiLogger=z,this.tpaService=A,this.tpaUrlBuilder=B,this.flags=C,this.layoutSolver=D,this.consumerBiLoggerHelpers=E,this.errorReportService=F,this.selections=G,this.$state=H,this.assistantManager=I,this.listSpanUtils=J,this.partialSectionManager=K,this.showMoreActions=!1,this.canAddSection=!1,this.presetPreview=null,this.shouldSuggestLayoutChange=!1,this.layoutChangeTooltipOptions={},this.scale=1,this.flags.textualSectionMenu&&(this.MarginMenuTopBottom=38,this.MarginFromEdgesOfBrowser=6,this.MenuButtonHeight=36)}return a.$inject=["$element","$q","$translate","$scope","$stateParams","$timeout","autoSaveNotifier","CcDialogBuilder","modelTree","nodeManipulationService","notification","overlayManager","pagesManager","previewService","previewScale","sectionManager","mediaOverride","simpleSolutionManager","designKit","sitePartTypes","storyServices","undoRedo","applicationState","themeChooser","layoutSelectionStoreProvider","consumerBiLogger","tpaService","tpaUrlBuilder","flags","layoutSolver","consumerBiLoggerHelpers","errorReportService","selections","$state","assistantManager","listSpanUtils","partialSectionManager"],a.prototype.$postLink=function(){var a=this;this.setScale(this.previewScale.getScale(),!1),this.initColorationItems(),this.$scope.$watch(function(){return a.previewScale.getScale()},function(b,c){b!==c&&(a.setScale(b),a.updatePosition())}),(this.flags.suggestLayoutChange||this.flags.reportLayoutErrors)&&this.$scope.$watch(function(){return a.errorReportService.hasError(a.storyServices.story.selectedPage,a.contentDesignatedListSpan.node.id,"changeLayout")},function(b){a.shouldSuggestLayoutChange=b,a.shouldSuggestLayoutChange&&a.suggestLayoutChange()}),this.$scope.$watch(function(){return a.contentDesignatedListSpan&&a.contentDesignatedListSpan.listNodeId},function(b,c){b!==c&&a.update()}),this.$scope.$on(ViewerScrollController.PreviewScrollEvent,function(){a.updateButtonsStripPosition()}),this.$scope.$watch(function(){if(a.contentDesignatedListSpan){var b=a.overlayManager.listSpanManager.getListSpanAbsoluteLayout(a.contentDesignatedListSpan);return b.top+"-"+b.height}},function(){return a.update()})},a.prototype.update=function(){this.updateViewState(),this.updatePosition()},a.prototype.updateViewState=function(){this.isManage=this.canManage(),this.isDesigns=this.shouldShowSwitchBtn(),this.isEdit=this.shouldShowEditBtn()},a.prototype.updateLssProperty=function(a,b){var c=this.layoutSelectionStoreProvider.getLayoutSelectionStore();_.set(c.siteOverrides,a,b)},a.prototype.headerColorationItemClicked=function(a){this.updateLssProperty("headerBackground",a),this.themeChooser.updateHeaderBg(),this.undoRedo.captureOperation(!1,!0)},a.prototype.isListItem=function(){return this.contentDesignatedListSpan.isList},a.prototype.toggleSlideShow=function(){var a=this.contentDesignatedListSpan.node,b=this.selections.getForNode(a);b.isSlideShow=!b.isSlideShow,this.storyServices.reRender(),this.undoRedo.captureOperation()},a.prototype.footerColorationItemClicked=function(a){this.updateLssProperty("footerBackground",a),this.themeChooser.updateFooterBg(),this.undoRedo.captureOperation(!1,!0)},a.prototype.initColorationItems=function(){this.colorationItems={},this.colorationItems.header={},this.colorationItems.header.lightItems=this.getLightColorationItems(),this.colorationItems.header.darkItems=this.getDarkColorationItems(),this.colorationItems.footer={},this.colorationItems.footer.lightItems=this.getLightColorationItems(),this.colorationItems.footer.darkItems=this.getDarkColorationItems()},a.prototype.getLightColorationItems=function(){return[{text:"L1",value:"L1"},{text:"L2",value:"L2"},{text:"L3",value:"L3"}]},a.prototype.getDarkColorationItems=function(){return[{text:"D1",value:"D1"},{text:"D2",value:"D2"},{text:"D3",value:"D3"}]},a.prototype.suggestLayoutChange=function(){var b=this,c=this.$element.find(a.ChangeLayoutButtonSelector);this.shouldSuggestLayoutChange&&(this.layoutChangeTooltipOptions.trigger="",this.$timeout(function(){if(c.addClass("-active"),c.tooltipster("show"),b.flags.debug){var a=b.errorReportService.getError(b.storyServices.story.selectedPage,b.contentDesignatedListSpan.node.id,"changeLayout");a&&a.length>0&&console.log("changeLayout error was reported with messages:\n",a.join(",\n"))}b.$timeout(function(){c.removeClass("-active"),c.tooltipster("hide"),delete b.layoutChangeTooltipOptions.trigger,b.errorReportService.clearError(b.storyServices.story.selectedPage,b.contentDesignatedListSpan.node.id,"changeLayout")},7e3)}))},a.prototype.getSwitchButtonTooltip=function(){return(this.flags.suggestLayoutChange||this.flags.reportLayoutErrors)&&this.shouldSuggestLayoutChange?"suggest_layout_change":"overlay_change_preset"},a.prototype.getLayoutChangeTooltipOptions=function(){return this.layoutChangeTooltipOptions},a.prototype.shouldShowButtons=function(){return(this.stateIsHover()||!this.overlayManager.data.hoveredListSpan)&&!this.assistantManager.getCustomTaskData("hideListSpanButtons")},a.prototype.isContentFocused=function(){var a=this.applicationState.getContentFocus(),b={nodeId:this.contentDesignatedListSpan.node.getId(),sitePart:this.contentDesignatedListSpan.sitePart};return _.isEqual(b,a)},a.prototype.isHeader=function(){return this.contentDesignatedListSpan.sitePart===this.sitePartTypes.HEADER},a.prototype.isOnBody=function(){return this.contentDesignatedListSpan.sitePart===this.sitePartTypes.BODY},a.prototype.isMobileEditMode=function(){return this.applicationState.isInMobileEditMode()},a.prototype.isFooter=function(){return"footer"===this.contentDesignatedListSpan.node.containerPageId},a.prototype.canManipulate=function(){return!this.contentDesignatedListSpan.node.isTpaMultiSection()&&!this.contentDesignatedListSpan.node.isTpa},a.prototype.canDuplicate=function(){return this.canManipulate()&&"Contact"!==this.contentDesignatedListSpan.node.getContentElementType()},a.prototype.setScale=function(b,c){void 0===c&&(c=!0),this.scale=b;var d=this.applicationState.isInMobileEditMode()?Viewer.ViewerMobileBaseSize:Viewer.ViewerDesktopBaseSize,e=d*b;$(a.MiddleSectionSelector).css("flex-basis",e+"px")},a.prototype.onDelete=function(){var a=this.contentDesignatedListSpan.node;this.sectionManager.showDeleteSectionPopup(a,"more-actions")},a.prototype.canMove=function(a){if(!this.nodeManipulationService||!this.contentDesignatedListSpan)return!1;var b=this.contentDesignatedListSpan.node.containerPageId;return this.nodeManipulationService.canMove(this.contentDesignatedListSpan.node.id,b,a)},a.prototype.duplicateSection=function(){var a=this.contentDesignatedListSpan.node;this.consumerBiLogger.sectionManagement.sectionMenuDuplicateSectionClick(a.getContentElementType(),a.alias,this.tpaService.getAppId(a)),this.applicationState.clearContentFocus(),this.sectionManager.duplicateSection(this.contentDesignatedListSpan.node)},a.prototype.canMoveAwayFlow=function(){if(!this.pageList){this.pageList=_(this.modelTree.getValidPagesForNode(this.contentDesignatedListSpan.node)).collect(function(a){return{name:a.getDisplayName(),value:a.getId()}}).value();var b={name:this.$translate("general.new-page"),value:a.BlankPageId};this.pageList.unshift(b)}return _.keys(this.pageList).length>0},a.prototype.moveAwayFlow=function(){var a=this,b=this.contentDesignatedListSpan.node;this.consumerBiLogger.sectionManagement.sectionMenuMoveSectionToAnotherPageClick(b.getId(),b.getContentElementType(),b.alias,this.tpaService.getAppId(b)),this.CcDialogBuilder.showPositiveContinuedAction({heading:this.$translate("popups.movesection.heading"),text:this.$translate("popups.movesection.text"),acceptButtonText:this.$translate("general.move"),rejectButtonText:this.$translate("general.cancel"),dropDownItems:this.pageList,dropDown:this.pageList[0],biDialogName:CONSUMER_DIALOGS.MOVE_SECTION,onHelp:function(){a.CcDialogBuilder.showSupportIframe(a.$translate("help.popup.moveSection"),CONSUMER_DIALOGS.MOVE_SECTION_HELP)}}).then(function(b){return a.createOrGetPage(b.selected.value)}).then(function(b){return a.sectionManager.moveSectionToAnotherPage(a.contentDesignatedListSpan.node,b)}).then(function(c){var d=a.sectionManager.geSectionPositionInPage(b),e=a.storyServices.story.selectedPage,f=a.sectionManager.geSectionPositionInPage(b),g=a.tpaService.getAppId(b);return a.consumerBiLogger.sectionManagement.sectionMovedToANewPageSuccess(b.getId(),b.getContentElementType(),b.alias,e,d,f,g),null!==c?(a.applicationState.setContentFocus(b.getId(),a.sitePartTypes.BODY,!0),a.notifySectionMoved()):void 0})},a.prototype.notifySectionMoved=function(){var a=this;return this.notification.show("toasters.section-moved","general.undo",function(){a.undoRedo.undo()})},a.prototype.stateIsHover=function(){return"hover"===this.state},a.prototype.shouldShowDragHandle=function(){return this.isOnBody()&&this.overlayManager.listSpanManager.getAllInBody().length>1&&this.showAllButtons()&&!this.stateIsHover()},a.prototype.isDragEnabled=function(){var a="saving"===this.autoSaveNotifier.savingState;return!this.contentDesignatedListSpan.node.isTpaNode()&&!a},a.prototype.toggleShowMoreActions=function(){this.showMoreActions||this.logBI_ClickOnMoreActionsMenu(),this.showMoreActions=!this.showMoreActions,this.showMoreActions||this.mamMouseLeave()},a.prototype.mamMouseEnter=function(){this.showMoreActions&&this.$element.addClass(a.IN_MORE_MENU_CLASS)},a.prototype.mamMouseLeave=function(){this.$element.removeClass(a.IN_MORE_MENU_CLASS)},a.prototype.logBI_ClickOnMoreActionsMenu=function(){var a=this.contentDesignatedListSpan.node,b=a.alias,c=a.getContentElementType();this.consumerBiLogger.sectionManagement.clickOnMoreActionsMenu(b,c)},a.prototype.showActions=function(){return this.isOnBody()&&!this.showMoreActions&&this.canManipulate()&&this.showAllButtons()},a.prototype.showAllButtons=function(){return!this.applicationState.isInCropperMode()},a.prototype.dragHandleClick=function(){this.applicationState.setContentFocus(this.contentDesignatedListSpan.node.id,this.contentDesignatedListSpan.sitePart)},a.prototype.createOrGetPage=function(a){var b="_blank"===a;return b?this.pagesManager.addPage(this.$translate("general.blank")):this.$q.when(this.modelTree.getPageNodeById(a))},a.prototype.getSwitchButtonText=function(){return"general.designs"},a.prototype.shouldAddNoSwitchClass=function(){return!this.shouldShowSwitchBtn()&&!this.canManage()},a.prototype.shouldShowSwitchBtn=function(){
return this.applicationState.isInCropperMode()||(this.isTpa()||"footer"===this.contentDesignatedListSpan.sitePart)&&this.isMobileEditMode()?!1:this.listSpanUtils.ceHasPresets(this.contentDesignatedListSpan.node.contentElementType)},a.prototype.shouldShowEditBtn=function(){return this.applicationState.isInCropperMode()?!1:this.isTpa()?this.tpaService.getEditWidgetUrl(this.contentDesignatedListSpan.node):!0},a.prototype.isDifferentContentFocus=function(){var a=this.applicationState.getContentFocus();return!a||a.nodeId!==this.contentDesignatedListSpan.node.id||a.sitePart!==this.contentDesignatedListSpan.sitePart},a.prototype.onToggleEditMode=function(){var a=this.isDifferentContentFocus();if(this.applicationState.setContentFocus(this.contentDesignatedListSpan.node.id,this.contentDesignatedListSpan.sitePart),this.consumerBiLoggerHelpers.setPanelSource(BIOrigins.ClickEditButton),this.isTpa()){var b=this.tpaService.getAppId(this.contentDesignatedListSpan.node),c=this.tpaService.getInstanceId(this.contentDesignatedListSpan.node);this.consumerBiLogger.provisioning.tpaIntent(c,b,"GFPP_SETTINGS","ADI"),this.consumerBiLogger.apps.clickOnEditAppTpaSettings(BIOrigins.ClickEditButton,b,this.tpaService.getNaiveType(this.contentDesignatedListSpan.node.getContentElementType()))}a||!this.applicationState.isInEditMode()?this.applicationState.goToEditMode():this.applicationState.goToBuilder(!0)},a.prototype.onTogglePresetState=function(){var a=this.isDifferentContentFocus();this.applicationState.setContentFocus(this.contentDesignatedListSpan.node.id,this.contentDesignatedListSpan.sitePart),a||!this.applicationState.isSwitchPresetMode()?this.applicationState.goToSwitchPresetMode("section"):this.applicationState.goToBuilder()},a.prototype.canManage=function(){if(this.isTpa()){var a=this.tpaUrlBuilder.getManagementUrl(this.getTpaType(),this.contentDesignatedListSpan.node);return!!a}return!1},a.prototype.getTpaType=function(){var a="";return this.contentDesignatedListSpan.node.contentElement&&this.isTpa()&&(a=this.contentDesignatedListSpan.node.contentElement.type,a=this.tpaService.getNaiveType(a)),a},a.prototype.getTpaTooltip=function(){return"tpa_"+this.getTpaType().toLowerCase()+"_settings"},a.prototype.getEditButtonTooltip=function(){return this.isTpa()?"overlay_settings":"overlay_edit"},a.prototype.showSectionSizeButtons=function(){return this.flags.internalFeatureSectionHeight},a.prototype.showMoveColumnButton=function(){var a=this.contentDesignatedListSpan.node,b=_.first(this.contentDesignatedListSpan.groups);return this.flags.internalColumnBackground&&a&&!a.isList()&&!a.isTpaNode()&&b&&this.partialSectionManager.isPartial(b)},a.prototype.moveColumn=function(){this.partialSectionManager.switchColumnPosition(this.contentDesignatedListSpan.node)},a.prototype.changeSectionHeight=function(a){var b=this;if(1===this.contentDesignatedListSpan.groups.length){var c=_.first(this.contentDesignatedListSpan.groups);c.changeLgHeight(a,3).then(function(){return b.storyServices.debounceLayoutSolutionChanged()})}else _.sequencePromises(this.contentDesignatedListSpan.groups,function(c){return"ListFooter"===c.segments[0].contentElement.type||"ListHeader"===c.segments[0].contentElement.type?b.$q.when():c.changeLgHeight(a,3).then(function(){return b.storyServices.debounceLayoutSolutionChanged()})}).then(function(){return b.storyServices.debounceLayoutSolutionChanged()})},a.prototype.getLayoutMedia=function(){var a=_.first(this.contentDesignatedListSpan.groups),b=_.first(a.segments),c=b.getLE(),d=c.getMediaLayout();return{layout:d,segment:b,LE:c}},a.prototype.isTpa=function(){return this.contentDesignatedListSpan.node&&this.contentDesignatedListSpan.node.isTpaNode()},a.prototype.updateButtonsStripPosition=function(b){if(void 0===b&&(b=this.contentDesignatedListSpan),b){var c,d=this.overlayManager.listSpanManager.getListSpanAbsoluteLayout(b).scale(this.scale);if(this.flags.textualSectionMenu){var e=0,f=[!!this.canManage(),!!this.shouldShowSwitchBtn(),!!this.shouldShowEditBtn()];f.forEach(function(a){return a&&e++});var g=this.MenuButtonHeight*e;c=this.newCalculateButtonStripRelativeTop(d,g,b.sitePart)}else c=this.calculateButtonStripRelativeTop(d);var h=this.$element.find(a.ButtonsStripSelector);h.css({top:c-d.top})}},a.prototype.newCalculateButtonStripRelativeTop=function(a,b,c){var d,e=this.MarginFromEdgesOfBrowser,f=b/2+this.MarginMenuTopBottom,g=this.previewService.getOverlayContainer().scrollTop,h=a.height>b+e,i=a.height>b+2*this.MarginMenuTopBottom;switch(c){case this.sitePartTypes.HEADER:d=h?this.middleOfSection(a):b/2+e;break;case this.sitePartTypes.FOOTER:d=h?this.middleOfSection(a):a.top+(a.height-(e+b/2));break;default:d=i?this.marginFromTopOfSectionOrBrowser(a,g,f):this.middleOfSection(a)}return d},a.prototype.marginFromTopOfSectionOrBrowser=function(a,b,c){var d=a.top+a.height,e=b>a.top?b:a.top;return Math.min(e+c,d-c)},a.prototype.middleOfSection=function(a){return a.top+a.height/2},a.prototype.calculateButtonStripRelativeTop=function(b){var c=this.previewService.getOverlayContainer().scrollTop,d=this.previewService.getOverlay().clientHeight,e=d/2+c,f=a.ButtonStripMargin*this.scale;return b.height<=2*f?b.top+b.height/2:e>b.top+f?Math.min(b.top+b.height-f,e):Math.max(b.top+f,e)},a.prototype.scrollPreviewToListSpan=function(a,b,c){void 0===b&&(b=null),void 0===c&&(c=!1);var d=this.overlayManager.listSpanManager.getListSpanAbsoluteLayout(a).scale(this.scale);if(this.shouldScroll(a,d)){var e=this.calculateScrollPosition(d),f=this.overlayManager.listSpanManager.getNodeTopRelativeToListSpan(b,a),g=this.previewService.getOverlayContainer();g.scrollTop=e+f}},a.prototype.shouldScroll=function(a,b){return b.top<0?!1:!this.overlayManager.isListSpanHovered(a)},a.prototype.calculateScrollPosition=function(a){var b=a.top,c=this.previewService.getOverlay().clientHeight;if(a.height<c){var d=(c-a.height)/2;return Math.max(b-d,0)}return b-36},a.prototype.updatePosition=function(a){void 0===a&&(a=this.contentDesignatedListSpan),a&&(this.updateButtonsStripPosition(a),a&&!this.stateIsHover()&&this.scrollPreviewToListSpan(a,this.$stateParams.childId),this.pageList=null,this.scaleLayout(a))},a.prototype.scaleLayout=function(a){var b=this.overlayManager.listSpanManager.getListSpanAbsoluteLayout(a).scale(this.scale);this.$element.css({top:b.top,height:b.height})},a.prototype.showMapStyles=function(){var a=this.contentDesignatedListSpan.node;return this.flags.internalMapStyling&&"Contact"===a.contentElementType},a.prototype.changeMapStyle=function(){var a=this;if(this.showMapStyles()){var b=this.getLayoutMedia().segment,c=b.getLayoutSelectionStore(),d=c.getOverride("extra",b,"map")||{},e=[{name:"Regular",value:"r"},{name:"Stunning blue",value:"sb"},{name:"Surprising green",value:"sg"},{name:"Pinky swear pink",value:"psp"},{name:"Satellite",value:"slt"}];this.CcDialogBuilder.showPositiveContinuedAction({heading:"Map style",text:"Change map style to",acceptButtonText:"ok",rejectButtonText:"cancel",dropDownItems:e,dropDown:e[0],biDialogName:CONSUMER_DIALOGS.DEBUG_MAP_STYLE,onHelp:function(){a.CcDialogBuilder.showSupportIframe("Change the style of the map","map-style-help")}}).then(function(e){console.log("MAP STYLE: "+e.selected.value),d.stylingIndex=e.selected.value,c.setOverride("extra",b,"map",d),a.flags.renderedModel?a.storyServices.reRender():b.reRender()})}},a}();ListSpanTools.ButtonStripMargin=80,ListSpanTools.BlankPageId="_blank",ListSpanTools.ButtonsStripSelector='[data-hook="buttons-strip"]',ListSpanTools.ChangeLayoutButtonSelector='[data-hook="change-layout-button"]',ListSpanTools.MiddleSectionSelector=".overlay-tools-center",ListSpanTools.IN_MORE_MENU_CLASS="in-more",angular.module("siteGeneratorEditorInternal").component("listSpanTools",{templateUrl:"views/builder/list-span-tools.html",controller:ListSpanTools,bindings:{contentDesignatedListSpan:"=",state:"@?"}});var PreviewScale=function(){function a(b,c,d,e,f,g,h){this.provider=b,this.$rootScope=c,this.$state=d,this.$timeout=e,this.$window=f,this.applicationParameters=g,this.flags=h,this.currentScale=a.DefaultScale,this.manualScale=null,this.disabled=!1,this.disabled=this.$state.includes(config.STATES.BUILDER_STORY_PREVIEW),this.ranges=b.rangesConfig,this.scaleFactor=this.flags.scaleFactor,this.init()}return a.$inject=["provider","$rootScope","$state","$timeout","$window","applicationParameters","flags"],a.prototype.reset=function(a){void 0===a&&(a=!1),(!this.manualScale||a)&&(this.manualScale=this.applicationParameters.isInMobileEditMode()?1:null,this.currentScale=this.disabled?this.getDefaultScale():this.getScaleForCurrentResolution())},a.prototype.getScaleFactor=function(){return this.scaleFactor},a.prototype.setScale=function(a){this.manualScale=this.ensureValidScale(a)},a.prototype.getScale=function(){return this.manualScale||this.currentScale},a.prototype.setScaleFactor=function(a){this.scaleFactor=+a.toFixed(2),this.reset()},a.prototype.zoomIn=function(b,c){void 0===c&&(c=1);var d=this.getScaleFactor();this.changeScaleFactor(d+a.ScaleFactorStep*c,b)},a.prototype.zoomOut=function(b,c){void 0===c&&(c=1);var d=this.getScaleFactor();this.changeScaleFactor(d-a.ScaleFactorStep*c,b)},a.prototype.changeScaleFactor=function(a,b){this.setScaleFactor(a),b&&this.enable()},a.prototype.getScaleForCurrentResolution=function(){var b=this,c=this.getViewportWidth(),d=this.getStageWidth(),e=_.find(this.ranges,function(a){return b.isValidConfiguration(a,c,d)});if(!e)return a.DefaultScale;var f=e.scale(c,d);return this.ensureValidScale(f*this.scaleFactor)},a.prototype.isValidConfiguration=function(a,b,c){return this.isInRange(b,a.viewport)?a.stage?this.isInRange(c,a.stage):!0:!1},a.prototype.isInRange=function(a,b){var c=b[0],d=b[1];return _.inRange(a,c,d)},a.prototype.init=function(){var a=this;this.reset(!0),this.$rootScope.$on("$stateChangeSuccess",function(b,c,d,e,f){if(e.name===config.STATES.BUILDER_STORY_PREVIEW)a.$timeout(function(){return a.enable()});else switch(c.name){case config.STATES.BUILDER_ADD_SECTION:break;case config.STATES.BUILDER_STORY_PREVIEW:a.disable();break;case config.STATES.BUILDER_STORY:a.$timeout(function(){return a.enable()});break;default:a.reset(!0)}})},a.prototype.ensureValidScale=function(b){return this.isValidScale(b)?b>a.MaxScale?a.MaxScale:b<a.MinScale?a.MinScale:b:this.getDefaultScale()},a.prototype.isValidScale=function(a){return"number"==typeof a&&!isNaN(a)},a.prototype.getDefaultScale=function(){return a.DefaultScale*this.scaleFactor},a.prototype.getStageWidth=function(){return this.getViewportWidth()-this.getPanelWidth()},a.prototype.getViewportWidth=function(){return this.$window.innerWidth},a.prototype.getPanelWidth=function(){return this.getPanelWidthFromState(this.$state.current)},a.prototype.getPanelWidthFromState=function(b){var c=b&&b.data&&b.data.panelWidth;return c||a.DefaultPanelWidth},a.prototype.enable=function(){this.disabled=!1,this.reset()},a.prototype.disable=function(){this.disabled=!0,this.reset()},a}();PreviewScale.MinScale=.384615385,PreviewScale.MaxScale=10,PreviewScale.DefaultScale=.71,PreviewScale.DefaultPanelWidth=0,PreviewScale.MaxScaleFactor=1,PreviewScale.MinScaleFactor=.5,PreviewScale.ScaleFactorStep=.1;var PreviewScaleProvider=function(){function a(){this.rangesConfig=[]}return a.prototype.reset=function(){this.rangesConfig.length=0},a.prototype.range=function(a){if(!this.isRangeValid(a))throw"range: is not valid!, it won't be added";return this.rangesConfig.push(a),this.sortRanges(),this},a.prototype.sortRanges=function(){this.rangesConfig=this.rangesConfig.sort(function(a,b){return a.stage?-1:b.stage?1:0})},a.prototype.isRangeValid=function(a){var b=a.viewport,c=b[0],d=b[1];if(c>=d)return!1;if(a.stage){var e=a.stage,f=e[0],g=e[1];return g>f&&f>=c&&d>=g}return!0},a.prototype.$get=function(a){return a.instantiate(PreviewScale,{provider:this})},a.prototype.$get.$inject=["$injector"],a}();angular.module("siteGeneratorStaticsConsumerAppInternal").provider("previewScale",PreviewScaleProvider);var FakeBrowserBar=function(){function a(a,b){this.flags=a,this.applicationState=b}return a.$inject=["flags","applicationState"],a.prototype.getShortUrl=function(a){return a.replace(/^(?:https?:\/\/)?(?:www\.)?/,"")},a.prototype.tooltipOptions=function(){return{content:"Your web address is <br><a class='fake_browser_bar_tooltip_url'>"+this.getShortUrl(this.url)+"</a>"}},a}();angular.module("siteGeneratorStaticsConsumerAppInternal").component("fakeBrowserBar",{templateUrl:"views/preview/fake-browser-bar.html",controller:FakeBrowserBar,bindings:{label:"@",url:"@",onBarClick:"&"}});var LinkType;!function(a){a[a.None=0]="None",a[a.Page=1]="Page",a[a.Web=2]="Web",a[a.Document=3]="Document",a[a.Email=4]="Email",a[a.Phone=5]="Phone"}(LinkType||(LinkType={}));var LinkDetails=function(){function a(a,b,c,d,e,f,g,h,i,j){var k=this;this.$scope=a,this.pagesManager=b,this.$q=c,this.linkDetailsManager=d,this.validation=e,this.$log=f,this.$translate=g,this.flags=h,this.clientTopology=i,this.CcDialogBuilder=j,this.ensureValueNotBroken(),this.initLinkOptions(),this.pageItemList=[],this.anchorItemList=void 0,this.draft=angular.copy(this.value),this.draft.file&&this.adjustFileToPanel(this.draft.file),this.setCurrentLinkType(),this.setCurrentPage(),this.setCurrentAnchor(),a.$on("linkDetails.save",function(a,b){k.save().then(function(a){b.resolve(a)})}),a.$watch("$ctrl.draft.targetPhone",function(a){k.draft.targetPhone=k.transformPhone(a),k.validate()}),this.validate()}return a.$inject=["$scope","pagesManager","$q","linkDetailsManager","validation","$log","$translate","flags","clientTopology","CcDialogBuilder"],a.prototype.transformPhone=function(a){var b=this;return a?a.split("").filter(function(a){return b.validation.isPhone(a)}).join(""):""},a.prototype.onLinkOptionChanged=function(){this.currentLinkType===LinkType.Web&&this.linkDetailsManager.targetUrlIsDocument(this.draft.targetUrl)&&(this.draft.targetUrl=""),this.currentLinkType===LinkType.Page&&this.linkDetailsManager.setPageLink(this.draft,this.currentAnchor),this.validate()},a.prototype.onPageSelectionChanged=function(a){this.currentPage=a,this.draft.targetPage=this.currentPage.getId(),this.refreshAnchors(),this.currentAnchor=_.first(this.anchors)},a.prototype.onAnchorSelectionChanged=function(a){this.draft.link="anchor"===this.linkDetailsManager.getAnchorType(a)?this.linkDetailsManager.generateAnchorLink(a):void 0,this.currentAnchor=a},a.prototype.onFileChange=function(a){this.draft.file=a,this.draft.file.name=a.title},a.prototype.validate=function(){switch(this.currentLinkType){case LinkType.Web:this.isValid=void 0===this.draft.targetUrl||""===this.draft.targetUrl||this.validation.isUrl(this.draft.targetUrl);break;case LinkType.Email:this.isValid=void 0===this.draft.targetEmail||""===this.draft.targetEmail||this.validation.isEmail(this.draft.targetEmail);break;case LinkType.Phone:this.isValid=void 0===this.draft.targetPhone||""===this.draft.targetPhone||this.validation.isPhone(this.draft.targetPhone);break;default:this.isValid=!0}},Object.defineProperty(a.prototype,"isOptionNone",{get:function(){return this.currentLinkType===LinkType.None},enumerable:!0,configurable:!0}),Object.defineProperty(a.prototype,"isOptionWeb",{get:function(){return this.currentLinkType===LinkType.Web},enumerable:!0,configurable:!0}),Object.defineProperty(a.prototype,"isOptionPage",{get:function(){return this.currentLinkType===LinkType.Page},enumerable:!0,configurable:!0}),Object.defineProperty(a.prototype,"isOptionEmail",{get:function(){return this.currentLinkType===LinkType.Email},enumerable:!0,configurable:!0}),Object.defineProperty(a.prototype,"isOptionDocument",{get:function(){return this.currentLinkType===LinkType.Document},enumerable:!0,configurable:!0}),Object.defineProperty(a.prototype,"isOptionPhone",{get:function(){return this.currentLinkType===LinkType.Phone},enumerable:!0,configurable:!0}),a.prototype.save=function(){var a=this,b=this.createLinkDetails(),c=this.$q.defer();return b.then(function(){return a.removeOldAnchor()}),b.then(function(b){return a.removeFile(b)}),b.then(function(b){return a.setNewValue(b)}),b.then(function(a){return c.resolve(a)}),c.promise},a.prototype.initLinkOptions=function(){this.linkOptions=[{label:this.$translate("link-details.none.label"),value:LinkType.None},{label:this.$translate("link-details.page.label"),value:LinkType.Page},{label:this.$translate("link-details.web.label"),value:LinkType.Web},{label:this.$translate("link-details.document.label"),value:LinkType.Document},{label:this.$translate("link-details.email.label"),value:LinkType.Email},{label:this.$translate("link-details.phone.label"),value:LinkType.Phone}]},a.prototype.adjustFileToPanel=function(a){a.title=a.name,a.fileUrl=a.url},a.prototype.removeFile=function(a){return this.currentLinkType!==LinkType.Document&&delete a.file,this.$q.when(a)},a.prototype.setNewValue=function(a){this.value=a,this.draft=angular.copy(a)},a.prototype.setCurrentLinkType=function(){LinkDetailsManager.isDocument(this.draft)?this.currentLinkType=LinkType.Document:LinkDetailsManager.isPage(this.draft)?this.currentLinkType=LinkType.Page:LinkDetailsManager.isEmail(this.draft)?this.currentLinkType=LinkType.Email:LinkDetailsManager.isPhone(this.draft)?this.currentLinkType=LinkType.Phone:LinkDetailsManager.isWeb(this.draft)?(this.linkDetailsManager.targetUrlIsDocument(this.draft.targetUrl)&&(this.draft.targetUrl=""),this.currentLinkType=LinkType.Web):this.currentLinkType=LinkType.None},a.prototype.setCurrentPage=function(){var a,b=this;if(!_.isEmpty(this.draft.link)||this.draft.targetPage){var c=this.draft&&this.draft.link&&this.draft.link.nodeId||this.draft.targetPage,d=this.linkDetailsManager.findNodeById(c);a=d?d.isPage()?d:this.pages.find(function(a){return b.draft.link.targetPage?a.getId()===b.draft.link.targetPage:"#"+b.pagesManager.getSantaPageIdByPageNodeId(a.getId())===b.draft.link.pageId}):_.first(this.pages)}else a=_.first(this.pages);this.currentPage=a},a.prototype.setCurrentAnchor=function(){var a,b=this;a=_.isEmpty(this.draft.link)?_.first(this.anchors):this.anchors.find(function(a){return b.linkDetailsManager.getAnchorId(a)===b.draft.link.nodeId}),this.currentAnchor=a},Object.defineProperty(a.prototype,"pages",{get:function(){return _.isEmpty(this.pageItemList)&&(this.pageItemList=this.linkDetailsManager.getPages()),this.pageItemList},enumerable:!0,configurable:!0}),Object.defineProperty(a.prototype,"anchors",{get:function(){return _.isUndefined(this.anchorItemList)&&(this.anchorItemList=_.filter(this.currentPage.children,function(a){return a.alias||(a.alias=a.getContentElementType()),!a.userHidden}),this.anchorItemList.unshift({alias:"Top Of Page",id:this.currentPage.getId(),type:"page-anchor"})),this.anchorItemList},enumerable:!0,configurable:!0}),a.prototype.refreshAnchors=function(){this.anchorItemList=void 0},a.prototype.createLinkDetails=function(){var a=this.value,b=angular.copy(this.draft);switch(this.currentLinkType){case LinkType.Page:return a.targetPage===b.targetPage&&_.isEqual(a.link,b.link)?this.$q.when(a):this.linkDetailsManager.convertLinkDetailsToStatePage(b,this.currentAnchor);case LinkType.Web:return""!==b.targetUrl&&a.targetUrl!==b.targetUrl?this.linkDetailsManager.convertLinkDetailsToStateWeb(b,this.draft.targetUrl):this.$q.when(a);case LinkType.None:return this.linkDetailsManager.convertLinkDetailsToStateNone(b);case LinkType.Document:return a.file!==b.file?this.linkDetailsManager.convertLinkDetailsToStateDocument(b):this.$q.when(a);case LinkType.Email:return""!==b.targetEmail&&a.targetEmail!==b.targetEmail?this.linkDetailsManager.convertLinkDetailsToStateEmail(b,this.draft.targetEmail):this.$q.when(a);case LinkType.Phone:return""!==b.targetPhone&&a.targetPhone!==b.targetPhone?this.linkDetailsManager.convertLinkDetailsToStatePhone(b,this.draft.targetPhone):this.$q.when(a)}},a.prototype.removeLinkDetails=function(a){var b,c=this;return a.link&&(b=this.anchors.find(function(b){return"anchor"===c.linkDetailsManager.getAnchorType(b)?b.getId()===a.link.nodeId:void 0})),b&&this.pagesManager.removeAnchorLink(b),this.$q.when(null)},a.prototype.removeOldAnchor=function(){return this.removeLinkDetails(this.value)},a.prototype.ensureValueNotBroken=function(){_.isObject(this.value)||(this.$log.warn("linkDetails: empty value"),this.value={}),this.linkDetailsManager.isLinkBroken(this.value)&&(this.$log.warn("linkDetails: broken link, probably page or anchor was deleted"),this.value={})},a.prototype.openPhoneHelp=function(){this.CcDialogBuilder.showSupportIframe(this.$translate("help.link.phone"),CONSUMER_DIALOGS.LINK_DETAILS_HELP)},a}();angular.module("siteGeneratorStaticsConsumerAppInternal").component("linkDetails",{templateUrl:"views/editor/link-details.html",controller:LinkDetails,bindings:{value:"=",isValid:"="}});var LinkDetailsDocument=function(){function a(a,b,c,d){var e=this;this.mediaGalleryAdapter=a,this.$filter=b,this.$scope=c,this.$timeout=d,this.draft=angular.copy(this.file),c.$watch(function(){return e.file},function(){e.draft=angular.copy(e.file)})}return a.$inject=["mediaGalleryAdapter","$filter","$scope","$timeout"],Object.defineProperty(a.prototype,"hasFile",{get:function(){return!!this.draft},enumerable:!0,configurable:!0}),a.prototype.openFileDialog=function(){var a=this;this.mediaGalleryAdapter.selectDocument().then(function(b){if(a.onFileChange){var c=b[0];a.draft||(a.draft={}),a.onFileChange({result:c})}})},a}();angular.module("siteGeneratorStaticsConsumerAppInternal").component("linkDetailsDocument",{templateUrl:"views/editor/link-details-document.html",controller:LinkDetailsDocument,bindings:{file:"=?",onFileChange:"&?"}});var Tester=function(){function a(){this.animationIcons=["Fade","Float","Fly","Fold","None","Slide","Turn"]}return a}();angular.module("siteGeneratorStaticsConsumerAppInternal").component("tester",{templateUrl:"views/tester.html",controller:Tester});var LogoColorPlayground=function(){function a(a){this.logoColorService=a,this.listOfLogos=[{url:"logos/0.png"}]}return a.$inject=["logoColorService"],a.prototype.calcPalette=function(a){var b=this,c=$('img[src="'+a.url+'"]'),d=c[0],e=c[1];a.palette=_.map(this.logoColorService.colorsFromImage(d),function(a){return b.logoColorService.rgbToHex(a)}),e.height=d.height,e.width=d.width},a}();angular.module("siteGeneratorStaticsConsumerAppInternal").component("logoColorPlayground",{templateUrl:"views/logo-color-playground.html",controller:LogoColorPlayground}).directive("logoonload",function(){return{restrict:"A",link:function(a,b,c){b.bind("load",function(){})}}});var AnalysisPlayground=function(){function a(a,b,c,d,e){var f=this;this.$http=a,this.$timeout=b,this.CcDialogBuilder=c,this.$interval=d,this.$window=e,this.data={analyzer:"",userName:"",count:"10",comment:"",onlyPremium:!1,onlyPublished:!1,onlyMyTasks:!1,specialAnalyzerName:"SpecialAnalyzer",metasiteIds:"",specialAnalyzer:"// Use the Comment field for a description\nfunction SpecialAnalyzer() {}\nSpecialAnalyzer.prototype = new BasicDataAnalyzer();\nSpecialAnalyzer.prototype.getName = function () { return 'SpecialAnalyzer'; };\nSpecialAnalyzer.prototype.getDescription = function () { return 'Return special data'; };\n\nSpecialAnalyzer.prototype.parseData = function () {\n    var data = BasicDataAnalyzer.prototype.parseData.call(this);\n\n    // JsonPath documentation can be found at http://goessner.net/articles/JsonPath/\n    data['Number of pages'] =  blobJson.read('$..[?(@.type == \"page\")]').length;\n\n    // Find the editing distance of the Welcome section from the word \"Potpourri\"\n    data['welcome-distance'] = AnalyzerEngineHelpers.getLevenshteinDistance('Potpourri', cleanRichText(getSectionLongText(getSectionId('Welcome'))));\n\n    // Can either return an array, or a single hash\n    // Note that records do not have to include all of the same fields\n    return [\n       _.merge(_.clone(data), {'Life': 'good', 'I am': 'special'}),\n       _.merge(_.clone(data), {'I am not': 'very special', 'Life': 'meep'})\n    ];\n}\n\naddAnalyzer(new SpecialAnalyzer());\n"},this.results=[],this.analyzers=[],this.refreshingTasks=!1,this.superSecretEnabled=0,this.tasksRefreshInterval=3e3,this.data.userName=this.getUsername(),this.refreshTasksList(),this.refreshAnalyzersList(),d(function(){f.refreshTasksList()},this.tasksRefreshInterval)}return a.$inject=["$http","$timeout","CcDialogBuilder","$interval","$window"],a.prototype.getColorByStatus=function(a){return"done"===a?"#006400":"error"===a?"#c70000":"stale"===a?"#c70000":"started"===a?"#00009c":"processing"===a?"#00009c":"post-processing"===a?"#00009c":"#000000"},a.prototype.pz=function(a){return 1===(""+a).length?"0"+a:a},a.prototype.formatDateTime=function(a){return a.getFullYear()+"/"+this.pz(a.getUTCMonth())+"/"+this.pz(a.getDate())+" "+this.pz(a.getHours())+":"+this.pz(a.getMinutes())+":"+this.pz(a.getSeconds())},a.prototype.formatDateTimeString=function(a){return this.formatDateTime(new Date(a))},a.prototype.dateFromTask=function(a){return new Date(a[1].createdAt).getTime()},a.prototype.getTaskInfoLine=function(a){var b="--";return a[2].extra&&a[2].extra.length>0?a[2].extra:(("started"===a[2].status||"processing"===a[2].status||"post-processing"===a[2].status)&&(b="Running for "+Math.floor((Date.now()-new Date(a[1].createdAt).getTime())/1e3)+" seconds"),"error"===a[2].status&&(b=a[2].extra),"done"===a[2].status&&(b="Took "+Math.floor((new Date(a[2].endedAt).getTime()-new Date(a[1].createdAt).getTime())/1e3)+" seconds"),b)},a.prototype.refreshTasksList=function(){var a=this;this.refreshingTasks=!0,this.$http.get("/_api/onboarding-bo-server/analyzers/tasks/list").then(function(b){a.results=b.data.sort(function(a,b){return-1*(new Date(a[1].createdAt).getTime()-new Date(b[1].createdAt).getTime())}),a.refreshingTasks=!1})},a.prototype.refreshAnalyzersList=function(){var a=this;this.$http.get("/_api/onboarding-bo-server/analyzers/list").then(function(b){a.analyzers=b.data})},a.prototype.submitTask=function(){var a=this,b={name:this.data.analyzer,count:this.data.count,preFilterOnlyPremium:this.data.onlyPremium,preFilterOnlyPublished:this.data.onlyPublished,comment:this.data.comment,specialAnalyzer:"",specialAnalyzerName:"",metasiteIds:this.data.metasiteIds};this.superSecretEnabled&&(b.specialAnalyzer=this.data.specialAnalyzer,b.specialAnalyzerName=this.data.specialAnalyzerName),this.$http.post("/_api/onboarding-bo-server/analyzers/tasks/analyze/submit",b).then(function(){a.refreshTasksList()})},a.prototype.removeTask=function(a){var b=this;this.CcDialogBuilder.showNegativeConfirmation({heading:"Remove task",text:"Are you sure you want to remove this task?",acceptButtonText:"Remove",rejectButtonText:"Cancel",icon:"delete-single.gif",biDialogName:"bo-remove-task"}).then(function(){b.$http.get("/_api/onboarding-bo-server/analyzers/tasks/remove?id="+a).then(function(){b.refreshTasksList()})})},a.prototype.readCookie=function(a){for(var b,c=this.$window.document.cookie.split("; "),d=0;d<c.length;d++)0===c[d].indexOf(a+"=")&&(b=c[d].replace(/.*=/g,""));return b},a.prototype.getUsername=function(){var a=this.readCookie("wixClient");return a?a.split("|")[0].replace(/"/,""):void 0},a}();angular.module("siteGeneratorStaticsConsumerAppInternal").component("analysisPlayground",{templateUrl:"views/analysis-playground.html",controller:AnalysisPlayground});var ImageSearchDebug=function(){function a(a,b,c,d,e){var f=this;this.$scope=a,this.googleImageSearch=b,this.$q=c,this.$window=d,this.$http=e,this.availablePOS=[{name:"Dollar",code:"$"},{name:"Colon",code:":"},{name:"Comma",code:","},{name:"Period",code:"."},{name:"Left Quote",code:"````"},{name:"Right Quote",code:"''"},{name:"Left bracket",code:"-LRB-"},{name:"Right bracket",code:"-RRB-"},{name:"Email",code:"ADD"},{name:"Affix",code:"AFX"},{name:"Coordinating conjunction",code:"CC"},{name:"Cardinal number",code:"CD"},{name:"Determiner",code:"DT"},{name:"Existential there",code:"EX"},{name:"Foreign word",code:"FW"},{name:"Go with",code:"GW"},{name:"Hyphen",code:"HYPH"},{name:"Preposition or subordinating conjunction",code:"IN"},{name:"Adjective",code:"JJ"},{name:"Adjective, comparative",code:"JJR"},{name:"Adjective, superlative",code:"JJS"},{name:"List item marker",code:"LS"},{name:"Modal",code:"MD"},{name:"Superfluous punctuation",code:"NFP"},{name:"Noun, singular or mass",code:"NN"},{name:"Noun, plural",code:"NNS"},{name:"Proper noun, singular",code:"NNP"},{name:"Proper noun, plural",code:"NNPS"},{name:"Predeterminer",code:"PDT"},{name:"Possessive ending",code:"POS"},{name:"Personal pronoun",code:"PRP"},{name:"Possessive pronoun",code:"PRP$"},{name:"Adverb",code:"RB"},{name:"Adverb, comparative",code:"RBR"},{name:"Adverb, superlative",code:"RBS"},{name:"Particle",code:"RP"},{name:"Symbol",code:"SYM"},{name:"To",code:"TO"},{name:"Interjection",code:"UH"},{name:"Verb, base form",code:"VB"},{name:"Verb, past tense",code:"VBD"},{name:"Verb, gerund or present participle",code:"VBG"},{name:"Verb, past participle",code:"VBN"},{name:"Verb, non-3rd person singular present",code:"VBP"},{name:"Verb, 3rd person singular present",code:"VBZ"},{name:"Wh-determiner",code:"WDT"},{name:"Wh-pronoun",code:"WP"},{name:"Wh-pronoun, possessive",code:"WP$"},{name:"Wh-adverb",code:"WRB"},{name:"Unknown",code:"XX"}],this.selectedPOS={},this.availablePOS.forEach(function(a){return f.selectedPOS[a.code]=!0}),this.selectedPOS.VB=!1,this.selectedPOS.VBD=!1,this.selectedPOS.VBP=!1,this.selectedPOS.VBZ=!1,this.availableNLPEngines=["natural","nltk","nlp4j"],this.selectedNLPEngines={},this.availableNLPEngines.forEach(function(a){return f.selectedNLPEngines[a]=!0}),this.initDomains(),this.options={query:"",maxResults:5,png:!0,video:!0,hostnames:[]}}return a.$inject=["$scope","googleImageSearch","$q","$window","$http"],a.prototype.initDomains=function(){var a=this;this.domainGroups={public_domain:["pixabay.com","pexels.com","public-domain-image.com","publicdomainpictures.net","pdpics.com"],creative_commons:["wikipedia.org","upload.wikimedia.org","commons.wikimedia.org","flickr.com","geograph.org.uk","freestockphotos.biz","goodfreephotos.com","deviantart.com","vimeo.com","youtube.com"],all:[]},this.availableDomains=this.domainGroups.public_domain.concat(this.domainGroups.creative_commons),this.selectedDomains={},this.domainGroup="public_domain",this.$scope.$watch("$ctrl.domainGroup",function(){a.availableDomains.forEach(function(b){a.selectedDomains[b]=!1}),a.domainGroups[a.domainGroup].forEach(function(b){a.selectedDomains[b]=!0})})},a.prototype.getTerms=function(a){var b=this,c=[];return this.$http({method:"GET",url:"http://www.wix.com/_api/site-generator-http-api/health/parts_of_speech",params:{sentence:a}})["catch"](function(a){return void 0}).then(function(d){if(void 0===d)console.log("no http-api");else{if(console.log("http-api",d.data),d.data.nltk){var e=d.data.nltk.map(function(a){return{text:a[0],pos:a[1]}});c.push({engine:"nltk",terms:e})}if(d.data.natural){var e=d.data.natural.map(function(a){return{text:a[0],pos:"N"===a[1]?"NN":a[1]}});c.push({engine:"natural",terms:e})}}return b.$http({method:"GET",url:"http://localhost:8080/",params:{sentence:a}})})["catch"](function(a){return void 0}).then(function(a){if(void 0===a)console.log("no nlp4j");else{console.log("nlp4j",a.data);var b=[];a.data.split("\n").slice(2).filter(function(a){return a.length>0}).forEach(function(a,c,d){c%2===0&&b.push({text:d[c],pos:d[c+1]})}),c.push({engine:"nlp4j",terms:b})}return c})},a.prototype.getName=function(a){var b="";return this.availablePOS.some(function(c){return c.code===a?(b=c.name,!0):void 0}),""===b&&(b="unrecognized code "+a),b},a.prototype.applyPOS=function(){var a=this;return this.$q.when(this.queries.trim().split("\n")).then(function(b){var c=b.map(function(b){return b=b.trim(),a.getTerms(b).then(function(a){return{query:b,results:a}})});return a.$q.all(c)}).then(function(b){var c=["Description of POS Tagging application:"];a.queries=b.map(function(b){var d=b;return console.log(d),d.results.filter(function(b){return a.selectedNLPEngines[b.engine];
}).map(function(b){var d=b.terms.map(function(b){return b.text+" ("+(a.selectedPOS[b.pos]?"":"skipped, ")+a.getName(b.pos)+")"}).join(" ");return c.push("<"+b.engine+"> "+d),b}).map(function(b){return b.terms.filter(function(b){return a.selectedPOS[b.pos]}).map(function(a){return a.text})}).concat([d.query.split(" ")]).map(function(a){return a.join(" ")}).join("\n")}).join("\n"),c.push("<original>"),a.message=c.join("\n")})},a.prototype.search=function(){var a=this,b=this.queries.trim().split("\n");return b.length>100?void(this.message="Error: please enter no more than 100 queries"):(this.message="",void this.$q.all(b.map(function(b){return a.googleImageSearch.search(angular.extend(angular.copy(a.options),{query:b,hostnames:Object.keys(a.selectedDomains).filter(function(b){return a.selectedDomains[b]})})).then(function(a){return{query:b,images:a}})})).then(function(b){a.results=b}))},a}();angular.module("siteGeneratorStaticsConsumerAppInternal").component("imageSearchDebug",{template:'\n    <style>\n    image-search-debug {\n      width: 100%;\n      overflow: auto;\n    }\n    .result:hover .image {\n      visibility: visible;\n    }\n    .image {\n      visibility: hidden;\n    }\n    </style>\n    <textarea ng-model="$ctrl.queries" style="width: 100%;height: 300px;border: 1px solid black"></textarea>\n    <textarea style="width: 100%; height: 200px; font-family: monospace; white-space: nowrap; overflow: auto">{{$ctrl.message}}</textarea>\n    <p>\n      <label ng-repeat="pos in $ctrl.availablePOS">\n        <input type="checkbox" ng-model="$ctrl.selectedPOS[pos.code]">{{pos.name}}\n      </label>\n    </p>\n    <p>\n      <label ng-repeat="engine in $ctrl.availableNLPEngines">\n        <input type="checkbox" ng-model="$ctrl.selectedNLPEngines[engine]">{{engine}}\n      </label>\n      <button class="md-button md-raised" ng-click="$ctrl.applyPOS();">Apply Parts-of-Speech Tagging</button>\n    </p>\n    <p>\n      <select ng-model="$ctrl.domainGroup">\n        <option ng-repeat="(name, group) in $ctrl.domainGroups">{{name}}</option>\n      </select>\n      <label ng-repeat="domain in $ctrl.availableDomains">\n        <input type="checkbox" ng-model="$ctrl.selectedDomains[domain]">{{domain}}\n      </label>\n    </p>\n    <p>\n      <label><input type="checkbox" ng-model="$ctrl.options.png">Exclude png</label>\n      <label><input type="checkbox" ng-model="$ctrl.options.video">Exclude video</label>\n      <button class="md-button md-raised md-primary" ng-click="$ctrl.search();">Search</button>\n      <label><input type="number" ng-model="$ctrl.options.maxResults" step="1" min="1" max="10"> (from 1 to 10)</label>\n    </p>\n    <div ng-repeat="result in $ctrl.results" style="overflow: hidden" class="result">\n      <p style="float:left;padding:20px;font-weight:bold;font-size:1.5em">{{result.query}}</p>\n      <div class="image" style="float:left;" ng-repeat="image in result.images">\n        <a ng-href="{{image.webpageLink}}"><img title="{{image.title}}" alt="{{image.title}}" ng-src="{{image.link}}" style="width: 200px;"></a>\n        <span style="display: inherit;">{{image.width}}x{{image.height}}</span>\n      </div>\n    </div>\n    ',controller:ImageSearchDebug});var ServerSideTest=function(){function a(a,b,c){var d=this;this.cmsApi=a,this.serverSideRenderApi=b,this.$scope=c,this.businessName="",this.businessTypes=[],this.previousSuggestions=[],this.$scope.$watch("$ctrl.businessType",function(){var a=d.previousSuggestions.filter(function(a){return a.term===d.businessType});return 1===a.length?(d.industryId=a[0].industryId,void(d.structureId=a[0].structureId)):void d.cmsApi.suggest(d.businessType).then(function(a){d.previousSuggestions=a.filter(function(a){return"category"===a.type&&a.industryId&&a.structureId}),d.businessTypes=d.previousSuggestions.map(function(a){return a.term})})})}return a.$inject=["cmsApi","serverSideRenderApi","$scope"],a.prototype.reset=function(){this.taskId=void 0,this.siteId=void 0,this.industryId=void 0,this.structureId=void 0,this.businessName="",this.businessType=void 0,this.businessTypes=[],this.previousSuggestions=[],this.resetResults()},a.prototype.resetResults=function(){this.status=void 0,this.siteUrl=void 0,this.screenshotUrl=void 0},a.prototype.canRenderHomePage=function(){return void 0!==this.taskId?!1:!!this.siteId},a.prototype.canCreateAndRender=function(){return void 0!==this.taskId?!1:this.businessName&&void 0!==this.industryId&&void 0!==this.structureId},a.prototype.checkTaskState=function(){var a=this;void 0!==this.taskId&&this.serverSideRenderApi.getTaskStatus(this.taskId).then(function(b){if(void 0!==a.taskId)if(a.status="state: "+b.state+"\nstarted: "+new Date(b.createdAt),"wontfinish"===b.state)a.taskId=void 0;else{if("finished"!==b.state)return Promise.delay(1e3).then(function(){a.checkTaskState()});a.status+="\nfinished: "+new Date(b.updatedAt),a.screenshotUrl=b.screenshot,a.siteUrl="http://www.wix.com/website/builder#!/builder/story/"+b.siteId.instanceId+":"+b.siteId.metaSiteId,a.taskId=void 0}})},a.prototype.renderHomePage=function(){var a=this;this.canRenderHomePage()&&(console.log("render home page"),this.resetResults(),this.taskId=null,this.serverSideRenderApi.renderHomePage(this.siteId,void 0).then(function(b){console.log("the task is "+b),a.taskId=b,a.checkTaskState()}))},a.prototype.createAndRender=function(){var a=this;this.canCreateAndRender()&&(console.log("create and render"),this.resetResults(),this.taskId=null,this.serverSideRenderApi.createAndRender(this.structureId,this.industryId,this.businessName,void 0).then(function(b){console.log("the task is "+b),a.taskId=b,a.checkTaskState()}))},a}();angular.module("siteGeneratorStaticsConsumerAppInternal").component("serverSideTest",{template:'\n    <style>\n.server-side-test {\n  background: white;\n  color: black;\n  width: 100%;\n  height: 100%;\n}\n.server-side-test .cc-panel-content {\n  float: left;\n}\n.server-side-test pre {\n  margin: 30px;\n  overflow: hidden;\n}\n    </style>\n    <div class="server-side-test">\n      <div class="cc-panel-content">\n        <p><c2-text-input label="Business name" value="$ctrl.businessName" disable-toggle="true"></c2-text-input></p>\n        <p><c2-text-input label="Business type" value="$ctrl.businessType" disable-toggle="true" autocomplete="$ctrl.businessTypes"></c2-text-input></p>\n        <p><button ng-class="{\'p9-primary\': true, \'-purple\': true, \'-disabled\': !$ctrl.canCreateAndRender()}" ng-disabled="!$ctrl.canCreateAndRender()" ng-click="$ctrl.createAndRender()">Create site and render it</button></p>\n\n        <p><c2-text-input label="Site id" value="$ctrl.siteId" disable-toggle="true"></c2-text-input></p>\n        <p><button ng-class="{\'p9-primary\': true, \'-purple\': true, \'-disabled\': !$ctrl.canRenderHomePage()}" ng-disabled="!$ctrl.canRenderHomePage()" ng-click="$ctrl.renderHomePage()">Render home page</button></p>\n\n        <pre>\n{{$ctrl.status}}\n<a ng-if="$ctrl.siteUrl" ng-href="{{$ctrl.siteUrl}}">Site</a>\n<a ng-if="$ctrl.screenshotUrl" ng-href="{{$ctrl.screenshotUrl}}">Screenshot</a>\n        </pre>\n        <p>\n          <button ng-class="{\'p9-primary\': true, \'-red\': true}" ng-click="$ctrl.reset()">reset</button>\n        </p>\n      </div>\n      <div class="cc-panel-content">\n      </div>\n    </div>\n    ',controller:ServerSideTest});var NotificationService=function(){function a(a,b,c,d,e,f){this.$rootScope=a,this.notify=b,this.spinnerService=c,this.defaultToastDuration=d,this.$translate=e,this.applicationState=f,this.spinnerMessages=[]}return a.$inject=["$rootScope","notify","spinnerService","defaultToastDuration","$translate","applicationState"],a.prototype.showOnSpinner=function(a){a&&this.spinnerMessages.push(a)},a.prototype.getSpinnerMessage=function(){return this.spinnerMessages.length?_.first(this.spinnerMessages):void 0},a.prototype.popSpinnerMessage=function(){return this.spinnerMessages.length?this.spinnerMessages.shift():void 0},a.prototype.show=function(a,b,c,d){if(!this.applicationState.isSilent()){var e=this,f=e.$rootScope,g=e.notify,h=e.$translate,i=e.defaultToastDuration;"undefined"==typeof d&&(d="number"==typeof b?b:i);var j,k={message:h(a),templateUrl:"views/pu2-notification.html",duration:Math.max(d,0)||"0"};b&&c&&(j=f.$new(),j.actionName=h(b),j.action=c,k.scope=j),g(k)}},a}();angular.module("siteGeneratorStaticsConsumerAppInternal").service("notification",NotificationService),angular.module("siteGeneratorStaticsConsumerAppInternal").directive("adiAutomation",["previewScale",function(a){return{restrict:"A",scope:!1,link:function(a,b,c){var d=c.adiAutomation;angular.element(b).attr("adi-automation-label",d.toLowerCase().replace(/\s+/g,"-"))}}}]);var CnDrag=function(){function a(){this.DEFAULT_DRAG_CONFIG={autoScroll:1,dragClickables:!0,minimumMovement:5,type:"x,y",zIndexBoost:!0}}return a.prototype.wrapConfig=function(a,b){return _.assign({},this.DEFAULT_DRAG_CONFIG,b)},a.prototype.createDraggable=function(a,b){var c=this.wrapConfig(a,b);return Draggable.create(a,c)},a.prototype.removeDraggable=function(a){a&&a.kill()},a}();angular.module("siteGeneratorStaticsBackdropInternal").service("cnDrag",CnDrag);var SectionDrag=function(){function a(a,b,c,d,e,f,g,h,i,j,k,l,m,n,o){var p=this;this.overlayManager=a,this.dropTargetCalculator=b,this.solutionSantaMediator=c,this.storyServices=d,this.applicationState=e,this.$rootScope=f,this.simpleSolutionManager=g,this.undoRedo=h,this.previewScale=i,this.sitePartTypes=j,this.nodeManipulationService=k,this.sectionManager=l,this.tpaService=m,this.consumerMenu=n,this.consumerBiLogger=o,this.$rootScope.$on("$stateChangeSuccess",function(a,b){b.name===config.STATES.BUILDER_ADD_SECTION&&p.calculateDropTarget()}),this.$rootScope.$on(ViewerScrollController.PreviewScrollEvent,function(){p.overlayManager.dropTargetId&&p.calculateDropTarget()}),this.listSpanManager=this.overlayManager.listSpanManager}return a.$inject=["overlayManager","dropTargetCalculator","solutionSantaMediator","storyServices","applicationState","$rootScope","simpleSolutionManager","undoRedo","previewScale","sitePartTypes","nodeManipulationService","sectionManager","tpaService","consumerMenu","consumerBiLogger"],a.prototype.onDragMouseMove=function(a){var b=this.getVisibleListSpans(),c=this.dropTargetCalculator.getClosestDropTargetInViewPort(a.clientY,b);this.overlayManager.setDropTarget(c)},a.prototype.startDrag=function(){var b=this;this.listSpansInSitePart=this.listSpanManager.getAllInBody();var c=_.findIndex(this.listSpansInSitePart,this.draggedListSpan),d=this.listSpanManager.getListSpanLayout(this.draggedListSpan),e=this.listSpansInSitePart.slice(c+1);return this.listSpanManager.toggleListSpanVisibility(this.draggedListSpan,!1).then(function(){return b.listSpanManager.setListSpanTop(b.draggedListSpan,a.HiddenListSpanTop)}).then(function(){return b.listSpanManager.moveListSpansByOffset(e,-d.height)}).then(function(){b.setPagePlaceholder(),b.previewScale.setScale(PreviewScale.MinScale)})},a.prototype.drop=function(){var a=this,b=this.draggedListSpan.node,c=this.sectionManager.geSectionPositionInPage(b),d=this.tpaService.getAppId(b),e=this.overlayManager.dropTargetId,f=this.storyServices.story.selectedPage,g=this.sectionManager.getAddSectionPosition();return g>c&&(g-=1),this.consumerBiLogger.sectionManagement.moveSectionWithinThePageClick(b.getId(),b.getContentElementType(),b.alias,g,c,"scroll",d),this.overlayManager.clearDropTarget(),this.simpleSolutionManager.moveSectionOnPage(f,b.id,e).then(function(){return a.nodeManipulationService.insertNodeAfter(f,b.id,e)}).then(function(){return a.insertListSpanBelowNodeId(e)}).then(function(){return a.applicationState.setContentFocus(b.id,a.sitePartTypes.BODY),a.endDrag()}).then(function(){a.overlayManager.calculateBodyHeight(),a.consumerMenu.calcMenuAnchors(),a.consumerBiLogger.sectionManagement.sectionMovedWithinThePageSuccess(b.getId(),b.getContentElementType(),b.alias,g,c,"scroll",d),a.undoRedo.captureOperation()})},a.prototype.cancelDrag=function(){var a=this;return this.listSpanManager.rerenderFromIndex().then(function(){return a.endDrag()})},a.prototype.endDrag=function(){var a=this;return this.listSpanManager.toggleListSpanVisibility(this.draggedListSpan,!0).then(function(){a.reset(),a.previewScale.reset(!0)})},a.prototype.setPagePlaceholder=function(){var a=this,b=_.sum(this.getVisibleListSpans(),function(b){return a.listSpanManager.getListSpanLayout(b).height});return this.listSpanManager.setPlaceholder(0,OverlayManager.DropTargetHeight+b)},a.prototype.insertListSpanBelowNodeId=function(a){return this.listSpanManager.moveListSpanBelowNodeId(this.draggedListSpan.node.id,a)},a.prototype.getVisibleListSpans=function(){var a=this,b=_.isEmpty(this.listSpansInSitePart)?this.listSpanManager.getAllInBody():this.listSpansInSitePart;return _.reject(b,function(b){var c=b.node.id;return a.draggedListSpan&&c===a.draggedListSpan.node.id})},a.prototype.reset=function(){this.overlayManager.data.draggedListSpan=null,this.listSpansInSitePart=null,this.listSpanManager.clearPlaceholder()},a.prototype.calculateDropTarget=function(){!this.applicationState.isOnAddState()||this.overlayManager.data.draggedPresetPreview||this.overlayManager.dropTargetData.isDropTargetLocked||this.overlayManager.setDropTarget(this.dropTargetCalculator.getDropTargetInViewPort())},Object.defineProperty(a.prototype,"draggedListSpan",{get:function(){return this.overlayManager.data.draggedListSpan},enumerable:!0,configurable:!0}),a}();SectionDrag.HiddenListSpanTop=-9999,angular.module("siteGeneratorStaticsConsumerAppInternal").service("sectionDrag",SectionDrag);var DropTargetCalculator=function(){function a(a,b,c,d,e){this.overlayManager=a,this.previewService=b,this.previewScale=c,this.sitePartTypes=d,this.$timeout=e}return a.$inject=["overlayManager","previewService","previewScale","sitePartTypes","$timeout"],a.prototype.initDropTarget=function(){var a=this;if(this.previewScale.setScale(PreviewScale.MinScale),this.overlayManager.dropTargetId){var b=this.overlayManager.listSpanManager.getAllInBody();this.scrollToDropTargetCandidate(this.overlayManager.dropTargetId,b),this.$timeout(function(){a.overlayManager.unlockDropTarget()},0)}},a.prototype.scrollToDropTargetCandidate=function(b,c){var d=this.generateDropTargetCandidates(c),e=this.getYPositionByID(d,b),f=e-a.DistanceFromDropTarget;document.querySelector(Overlay.ViewportSelector).scrollTop=f},a.prototype.updateDropTarget=function(){this.overlayManager.setDropTarget(this.getDropTargetInViewPort())},a.prototype.getDropTargetInViewPort=function(){var b=document.querySelector(Overlay.ViewportSelector),c=this.overlayManager.listSpanManager.getAllInBody();return b&&0!==c.length?this.isAlmostTotallyScrolled(b)?c[c.length-1].node.id:this.calculateClosestDropTargetInViewPort(c,this.getSiteYScrollPosition()):a.FirstDropTargetId},a.prototype.isAlmostTotallyScrolled=function(a){return a.scrollHeight-a.scrollTop-a.clientHeight<=48},a.prototype.getClosestDropTargetInViewPort=function(a,b){var c=this.getActualClientY(a);return this.calculateClosestDropTargetInViewPort(b,c)},a.prototype.getActualClientY=function(b){return b+this.getSiteYScrollPosition()-a.TopBarHeight-a.OverlayTopOffset},a.prototype.calculateClosestDropTargetInViewPort=function(a,b){var c=this.generateDropTargetCandidates(a);return this.isLockedDropTargetInViewport(c)?this.overlayManager.dropTargetId:(this.overlayManager.unlockDropTarget(),this.detectBestDropTargetCandidate(c,b))},a.prototype.generateDropTargetCandidates=function(b){var c=this,d=this.previewScale.getScale(),e=this.overlayManager.listSpanManager.getHeaderHeight()*d,f={yPosition:e+a.OverlayTopOffset,nodeId:a.FirstDropTargetId},g=b.map(function(a){return{yPosition:c.overlayManager.listSpanManager.getListSpanAbsoluteLayout(a).scale(d).getBottom(),nodeId:a.node.id}});return[f].concat(g)},a.prototype.isLockedDropTargetInViewport=function(a){return this.overlayManager.dropTargetData.isDropTargetLocked&&this.isInViewPort(document.querySelector(Overlay.ViewportSelector),this.getYPositionByID(a,this.overlayManager.dropTargetId))},a.prototype.getYPositionByID=function(a,b){return _.find(a,{nodeId:this.overlayManager.dropTargetId}).yPosition},a.prototype.detectBestDropTargetCandidate=function(a,b){var c=this,d=document.querySelector(Overlay.ViewportSelector),e=_.filter(a,function(a){var b=a.yPosition;return c.isInViewPort(d,b)}),f=_.isEmpty(e)?a:e,g=_.min(f,function(a){var c=a.yPosition;return Math.abs(b-c)}).nodeId;return g},a.prototype.isInViewPort=function(a,b){var c=this.getSiteYScrollPosition(),d=c+a.clientHeight;return b>=c&&d>=b},a.prototype.getSiteYScrollPosition=function(){var a=this.previewService.getDocumentServices();return a.site.getScroll().y},a}();DropTargetCalculator.TopBarHeight=72,DropTargetCalculator.OverlayTopOffset=54,DropTargetCalculator.DistanceFromDropTarget=100,DropTargetCalculator.FirstDropTargetId="0",angular.module("siteGeneratorStaticsConsumerAppInternal").service("dropTargetCalculator",DropTargetCalculator);try{angular.module("siteGeneratorStaticsPreload")}catch(e){angular.module("siteGeneratorStaticsPreload",[])}angular.module("siteGeneratorStaticsPreload").run(["$templateCache",function(a){a.put("views/main.html","<div class='main-container'>\n<div class='main' ng-transclude=''></div>\n<div class='main-helpers'>\n<spinner></spinner>\n<visual-validation></visual-validation>\n<div class='header-layout-solver' header-layout-solver=''></div>\n</div>\n<open-site-loader adi-automation='open-site-loader' class='animate-if' ng-if='$ctrl.preloaderService.isShown'></open-site-loader>\n<assistant-dock class='tour-dock-interactive tour-dock-stationary' ng-if='!$ctrl.applicationState.isInMobileEditMode()'></assistant-dock>\n</div>\n")}]);try{angular.module("siteGeneratorStaticsPreload")}catch(e){angular.module("siteGeneratorStaticsPreload",[])}angular.module("siteGeneratorStaticsPreload").run(["$templateCache",function(a){a.put("views/intro/intro.html","<div class='backdrop' data-hook='animation-backdrop'></div>\n<div class='intro-loading' data-hook='loading'>\n<div class='message' translate='intro.loading-message'></div>\n</div>\n<div class='intro-content' data-hook='animation-content'>\n<ui-view></ui-view>\n<div class='cc-icon-wix-logo intro-logo'></div>\n</div>\n<svg>\n<filter id='intro-image-blur'>\n<feGaussianBlur stdDeviation='60'></feGaussianBlur>\n</filter>\n</svg>\n")}]);try{angular.module("siteGeneratorStaticsPreload")}catch(e){angular.module("siteGeneratorStaticsPreload",[])}angular.module("siteGeneratorStaticsPreload").run(["$templateCache",function(a){a.put("views/intro/intro-category-search.html","<div class='intro-box-content' ng-style='$ctrl.contentPosition'>\n<form class='search-form b01-big-text-field' data-hook='type-form' ng-submit='$ctrl.next()'>\n<label data-hook='input-label' translate='{{::$ctrl.getVerticalTranslation(&quot;intro.business-type.label&quot;)}}'></label>\n<md-autocomplete data-hook='input-container' hidden-override='false' intro-md-autocomplete intro-md-loaded='$ctrl.isListLoaded()' intro-md-on-select='$ctrl.onSelectedFromList($term)' md-autofocus='true' md-autoselect='false' md-delay='100' md-input-name='businessTypeInput' md-item-text='$ctrl.getDisplayText(category)' md-items='category in $ctrl.search()' md-menu-class='c01-big-list' md-no-cache='true' md-search-changed='$ctrl.onSearchChanged($term, $matches)' md-search-text='$ctrl.searchTerm' md-select-on-focus='true' md-select-on-match='true' md-selected-item='$ctrl.selected'>\n<md-item-templates data-hook='search-result-entry' intro-md-item-disabled='{{category.isTitle}}' ng-class='{&quot;is-related&quot;: category.isRelated, &quot;isExactMatch&quot;: category.isExactMatch}' ng-click='$ctrl.itemClicked($event, category.isTitle)' ng-mouseenter='$ctrl.relatedResultsEnter(category.isTitle)' ng-mouseleave='$ctrl.relatedResultsLeave()'>\n<span md-highlight-flags='gi' md-highlight-text='$ctrl.getHighlightText(category)'>{{ $ctrl.getDisplayText(category) }}</span>\n</md-item-templates>\n</md-autocomplete>\n<i class='cc-icon-search'></i>\n<intro-box-buttons is-next-disabled='!$ctrl.validCategory'></intro-box-buttons>\n</form>\n<div class='examples faded' data-hook='search-example-label' ng-if='!$ctrl.searchTerm'>\n<ul class='md-autocomplete-suggestions examplesList c01-big-list'>\n<li class='exampleTitle intro-md-item-disabled'>{{$ctrl.examplesTitle}}</li>\n<li class='exampleItem' ng-class='{&quot;is-related&quot;: true, &quot;isExactMatch&quot;: false}' ng-click='$ctrl.onExampleClick($event)' ng-mouseenter='$ctrl.relatedResultsEnter(false)' ng-mouseleave='$ctrl.relatedResultsLeave()' ng-repeat='example in $ctrl.getPreSuggestionsByVertical()'>{{example}}</li>\n</ul>\n</div>\n<div class='invalid-characters-title' data-hook='invalid-characters-message' ng-show='!$ctrl.isValidTerm()' translate='intro.category-search.invalid-characters-label'></div>\n<div class='no-category-matches' data-hook='no-category-matches' ng-if='$ctrl.isEmptySearch()'>\n<div class='icon'></div>\n<div class='title' translate='intro.category-search.no-result-label'></div>\n</div>\n</div>\n<div class='generic-popover' data-hook='empty-message' ng-if='$ctrl.shouldShowGenericPopover()' ng-style='$ctrl.genericPopoverPosition'>\n<div class='title' translate='intro.category-search.no-result-popover-label'></div>\n<ul>\n<li class='generic-item' data-hook='empty-suggestion' ng-click='$ctrl.onSelectFromEmptyList(category, $index)' ng-repeat='category in $ctrl.defaultCategories track by category.term'>\n{{category.term}}\n</li>\n</ul>\n</div>\n<div class='search-tip-title' data-hook='search-tip' ng-style='$ctrl.boxTipStyle' translate='intro.category-search.search-tip'></div>\n<div class='a01-buttons end'>\n<button data-hook='skip' ng-attr-type='button' ng-click='$ctrl.skip()'>\n<span class='button-text skip-button' translate='intro.skip-button'></span>\n<i class='cc-icon-intro-next-arrow'></i>\n<i class='cc-icon-intro-next-arrow'></i>\n</button>\n</div>\n")}]);try{angular.module("siteGeneratorStaticsPreload")}catch(e){angular.module("siteGeneratorStaticsPreload",[])}angular.module("siteGeneratorStaticsPreload").run(["$templateCache",function(a){a.put("views/intro/intro-business-type.html","<div class='intro-box-content' ng-style='$ctrl.contentPosition'>\n<form class='business-type-form b01-big-text-field' data-hook='type-form' ng-submit='$ctrl.next()'>\n<label translate='{{:: $ctrl.getLabelByVertical()}}'></label>\n<md-autocomplete data-hook='input-container' intro-md-autocomplete md-autofocus='true' md-autoselect='false' md-delay='$ctrl.inputDebounceRate' md-input-name='businessTypeInput' md-item-text='$ctrl.getCategoryDisplayText(searchResult)' md-items='searchResult in $ctrl.search($ctrl.searchTerm)' md-list-hidden-changed='$ctrl.viewListIsHidden = $hidden' md-menu-class='c01-big-list' md-no-cache='true' md-search-changed='$ctrl.onSearchChanged($term, $matches)' md-search-text='$ctrl.searchTerm' md-select-on-focus='true' md-select-on-match='true' md-selected-item-change='$ctrl.onSelectedFromList()' md-selected-item='$ctrl.selected'>\n<md-item-templates>\n<span md-highlight-flags='gi' md-highlight-text='$ctrl.escapedSearchTerm'>{{ $ctrl.getCategoryDisplayText(searchResult) }}</span>\n</md-item-templates>\n</md-autocomplete>\n<intro-box-buttons is-next-disabled='!$ctrl.isResultValid()'></intro-box-buttons>\n</form>\n<div ng-show='$ctrl.viewListIsHidden'>\n<div class='examples' ng-show='!$ctrl.searchTerm &amp;&amp; !$ctrl.isInvalidSearch'>\n<div class='example-title' translate='intro.business-type.examples-label'></div>\n<ul class='c02-small-list'>\n<li ng-repeat='suggestion in $ctrl.getPreSuggestionsByVertical()'>\n<span data-hook='pre-suggestion' ng-click='$ctrl.onSelectFromPreSuggestion(suggestion, $index)'>{{suggestion}}</span>\n</li>\n</ul>\n</div>\n<div data-hook='blocked-message' ng-if='$ctrl.shouldShowBlock() || $ctrl.shouldShowBlockOnEmpty()'>\n<div class='block-title t02a-medium' translate='intro.business-type.block-details'></div>\n<a class='block-link a03-text-button' data-hook='blocked-message-link' ng-click='$ctrl.onBlockClicked()' ng-href='{{ $ctrl.blockedRedirectUrl }}' target='_blank'>\n<span class='button-text' translate='intro.business-type.block-link'></span>\n<i class='cc-icon-intro-next-arrow'></i>\n</a>\n</div>\n<div data-hook='empty-message' ng-show='$ctrl.showShowEmptyMessage() &amp;&amp; !$ctrl.treatEmptyAsBlocked'>\n<div class='empty-title' translate='intro.business-type.no-result-label'></div>\n<ul class='empty-option c01-big-list'>\n<li ng-repeat='category in $ctrl.defaultCategories'>\n<span data-hook='empty-suggestion' ng-click='$ctrl.onSelectFromEmptyList(category, $index)'>{{category.term}}</span>\n</li>\n</ul>\n</div>\n<div data-hook='invalid-characters-message' ng-show='$ctrl.isInvalidSearch'>\n<div class='invalid-characters-title t03b-small' translate='intro.business-type.invalid-characters-label'></div>\n</div>\n</div>\n</div>\n<div class='a01-buttons end'>\n<button data-hook='skip' ng-attr-type='button' ng-click='$ctrl.skip()'>\n<span class='button-text skip-button' translate='intro.skip-button'></span>\n<i class='cc-icon-intro-next-arrow'></i>\n<i class='cc-icon-intro-next-arrow'></i>\n</button>\n</div>\n")}]);try{angular.module("siteGeneratorStaticsPreload")}catch(e){angular.module("siteGeneratorStaticsPreload",[])}angular.module("siteGeneratorStaticsPreload").run(["$templateCache",function(a){a.put("views/intro/intro-box-buttons.html","<button class='intro-box-back a02-text-button' data-hook='back' ng-click='$ctrl.onBack()' ng-if='$ctrl.back' ng-style='$ctrl.backStyle' type='button'>\n<i class='cc-icon-intro-next-arrow'></i>\n<span class='button-text' translate='intro.back-button'></span>\n</button>\n<button class='intro-box-next a02-text-button' data-hook='next' focus-if='$ctrl.focusNext' ng-click='$ctrl.onNext()' ng-disabled='$ctrl.isNextDisabled' ng-style='$ctrl.nextStyle'>\n<span class='button-text' translate='intro.next-button'></span>\n<i class='cc-icon-intro-next-arrow'></i>\n<i class='active-decorator big'></i>\n<i class='active-decorator medium'></i>\n<i class='active-decorator small'></i>\n</button>\n")}]);try{angular.module("siteGeneratorStaticsPreload")}catch(e){angular.module("siteGeneratorStaticsPreload",[])}angular.module("siteGeneratorStaticsPreload").run(["$templateCache",function(a){a.put("views/builder.html","<div class='builder' ng-class='{&#39;preview-mode&#39; : $builder.isPreview()}' ng-if='$builder.flags.initDuringIntro !== &#39;preview&#39; || $builder.renderBuilder' ng-show='$builder.flags.initDuringIntro !== &#39;preview&#39; || $builder.showBuilder' state-class=''>\n<top-bar class='not-in-preview'></top-bar>\n<div class='stage'>\n<div class='builder-panel-inner' ng-if='!$builder.flags.initDuringIntro' ng-style='{width: $builder.panelWidth + &#39;px&#39;}' ui-view></div>\n<div class='builder-panel-inner' ng-if='$builder.flags.initDuringIntro' ng-style='{width: $builder.panelWidth + &#39;px&#39;}' ui-view='builder-panel'></div>\n<preview></preview>\n<preview-mode-toggle ng-if='$builder.shouldShowPreviewToggle()'></preview-mode-toggle>\n<div class='mobile-preview-wrapper' ng-if='$builder.isMobilePreviewDisplay()'>\n<mobile-preview page='{{$builder.getMobilePreviewPageId()}}' preview-url='{{$builder.getMobilePreviewUrl()}}'></mobile-preview>\n</div>\n</div>\n<floating-undo-redo class='not-in-preview'></floating-undo-redo>\n<zoom class='not-in-preview'></zoom>\n<div class='builder-overlay'></div>\n<logo-extraction-popup data-hook='logo-extraction-popup' ng-if='$builder.logoExtractionPopupService.shouldShowPopup()'></logo-extraction-popup>\n</div>\n")}]);try{angular.module("siteGeneratorStaticsPreload")}catch(e){angular.module("siteGeneratorStaticsPreload",[])}angular.module("siteGeneratorStaticsPreload").run(["$templateCache",function(a){a.put("views/loaders/open-site-loader.html","<div class='container'>\n<video autoplay loop ng-attr-poster='{{::$ctrl.wixAngularTopology.staticsUrl + &#39;/images/loaders/open-site-fallback.png&#39;}}' ng-attr-src='{{::$ctrl.getVideoUrl()}}' ng-show='$ctrl.currentMessage'></video>\n<div class='video-text text-t2' ng-show='$ctrl.currentMessage'>{{ ::'builder.open-site-loader.video-title' | translate }}</div>\n<div class='loader-messages'>\n<div class='loader-message message-1 font-t2'>{{ $ctrl.currentMessage }}</div>\n<div class='loader-message message-2 font-t2'>{{ $ctrl.currentMessage }}</div>\n</div>\n</div>\n")}]);try{angular.module("siteGeneratorStaticsPreload")}catch(e){angular.module("siteGeneratorStaticsPreload",[])}angular.module("siteGeneratorStaticsPreload").run(["$templateCache",function(a){a.put("views/preview/preview.html","<div class='preview-container'>\n<div class='preview-padding' ng-style='{ &#39;flex-basis&#39;: $ctrl.getPanelWidth() }'></div>\n<div class='preview-content' id='preview-content'>\n<div class='preset-preview-container'>\n<div class='draggable-ghost'>\n<div class='layout-preset-preview' data-hook='draggable-ghost' layout-preset-preview='' ng-if='!$ctrl.flags.mergedHeader &amp;&amp; $ctrl.presetPreview' preset-preview='$ctrl.presetPreview' scale='0.24' static='true'></div>\n<preset-preview data-hook='draggable-ghost' ng-if='$ctrl.flags.mergedHeader &amp;&amp; $ctrl.presetPreview' preset-preview='$ctrl.presetPreview' scale='0.24' static='true'></preset-preview>\n</div>\n</div>\n<overlay></overlay>\n<fake-browser></fake-browser>\n</div>\n</div>\n")}]);try{angular.module("siteGeneratorStaticsPreload")}catch(e){angular.module("siteGeneratorStaticsPreload",[])}angular.module("siteGeneratorStaticsPreload").run(["$templateCache",function(a){a.put("views/floating-undo-redo.html","<div class='floating-button-box undo-redo -second-top-bar' ng-class='{&#39;no-zoom&#39;: $ctrl.applicationState.isInMobileEditMode()}'>\n<div cc-tooltip-position='left' cc-tooltip='menu_undo'>\n<div class='cc-icon-undo cc-icon-circle' data-hook='undo' ng-click='$ctrl.onClickUndo()' ng-disabled='!$ctrl.canUndo()'></div>\n</div>\n<div cc-tooltip-position='right' cc-tooltip='menu_redo'>\n<div class='cc-icon-redo cc-icon-circle' data-hook='redo' ng-click='$ctrl.onClickRedo()' ng-disabled='!$ctrl.canRedo()'></div>\n</div>\n</div>\n")}]);try{angular.module("siteGeneratorStaticsPreload")}catch(e){angular.module("siteGeneratorStaticsPreload",[])}angular.module("siteGeneratorStaticsPreload").run(["$templateCache",function(a){a.put("views/top-bar/top-bar.html","<div class='wix-logo-icon wix-logo-old-design cc-icon-wix-logo' ng-show='!$ctrl.isPreviewDisplay()'></div>\n<div class='top-bar-sections -no-padding -force-tab-spacing' ng-show='!$ctrl.isPreviewDisplay()'>\n<div class='top-bar-section'>\n<pages-panel-dropdown active-tab='$ctrl.activeTab' class='dropdown-with-underline top-bar-tab tab-margin-right -accent-hover-text' ng-if='!$ctrl.isShowPagesDropDown()'></pages-panel-dropdown>\n<pages-dropdown-new-design active-tab='$ctrl.activeTab' class='dropdown-with-underline top-bar-tab tab-margin-right -accent-hover-text' ng-if='$ctrl.isShowPagesDropDown()'></pages-dropdown-new-design>\n<div class='top-bar-tab drop-down design-tab tab-margin-right -accent-hover-text' data-hook='design-tab-drop-down-section' ng-class='{&#39;active&#39;: $ctrl.activeTab === &#39;design&#39;}' ng-click='$ctrl.showSiteDesignDropdown()' ng-if='$ctrl.isInDesktopEditMode() &amp;&amp; !$ctrl.flags.popover' ng-mouseenter='$ctrl.showSiteDesignDropdown()' ng-mouseleave='$ctrl.hideSiteDesignDropdown()'>\n<div class='flex-center-grow'>\n<span>{{::'builder.design' | translate }}</span>\n<i class='top-bar-menu-arrow-icon cc-icon-arrow-down'></i>\n<div class='sub-menu-container'>\n<div class='sub-menu-shadow design-tab-dropdown' data-hook='site-design-dropdown-menu' ng-attr-style='{{$ctrl.getSiteDesignDropdownStyle()}}' ng-show='$ctrl.shouldShowDropDownDesign()'>\n<ul class='sub-menu'>\n<li class='sub-menu-item site-design-sub-menu-padding site-design-text-with-icon' data-hook='open-themes-button' ng-click='$ctrl.onClickDesign()'>\n<span>\n<span class='sub-menu-icon cc-icon-themes'></span>\n<span class='sub-menu-label'>{{::'design.themes.title' | translate }}</span>\n</span>\n</li>\n<li class='sub-menu-item site-design-sub-menu-padding divider-container'>\n<span class='sub-menu-divider'></span>\n</li>\n<li class='sub-menu-item site-design-sub-menu-padding site-design-text-with-icon' data-hook='open-colors-button' ng-click='$ctrl.openNewColorationPanel()'>\n<span>\n<span class='sub-menu-icon cc-icon-colours margin-style'></span>\n<span class='sub-menu-label'>{{::'design.colors.title' | translate }}</span>\n</span>\n</li>\n<li class='sub-menu-item site-design-sub-menu-padding site-design-text-with-icon' data-hook='open-fonts-button' ng-click='$ctrl.openFonts()'>\n<span>\n<span class='sub-menu-icon cc-icon-fonts margin-style'></span>\n<span class='sub-menu-label'>{{::'design.fonts.title' | translate }}</span>\n</span>\n</li>\n<li class='sub-menu-item site-design-sub-menu-padding site-design-text-with-icon' data-hook='open-animations-button' ng-click='$ctrl.openAnimationPanel()'>\n<span>\n<span class='sub-menu-icon cc-icon-animations margin-style'></span>\n<span class='sub-menu-label'>{{::'design.animations.title' | translate }}</span>\n</span>\n</li>\n</ul>\n</div>\n</div>\n</div>\n</div>\n<site-design-dropdown active-tab='$ctrl.activeTab' class='top-bar-tab tab-margin-right -accent-hover-text' data-hook='design-tab-drop-down-section' ng-if='$ctrl.isInDesktopEditMode() &amp;&amp; $ctrl.flags.popover'></site-design-dropdown>\n<add-tab-dropdown active-tab='$ctrl.activeTab' class='top-bar-tab tab-margin-right -accent-hover-text' ng-if='$ctrl.isInDesktopEditMode()'></add-tab-dropdown>\n<div class='top-bar-tab divider design-section-divider' ng-if='$ctrl.showSingleTpa() || $ctrl.showMultiTpa()'></div>\n<div class='top-bar-tab tab-with-underline tab-margin-left manage-single-tpa -accent-hover-text' data-hook='manage-single-tpa' manage-tpa-button-origin='ADI-topbar-single' manage-tpa-button='$ctrl.singleTpaType()' ng-if='$ctrl.showSingleTpa()' tpa-node='$ctrl.getRelevantTPANode(&#39;{{ $ctrl.singleTpaType() }}&#39;)'>\n<div class='flex-center-grow'>\n<span>{{:: 'builder.manage-tpa-button' | translate }} {{$ctrl.singleTpa().menuItem.nameAsObject}}</span>\n</div>\n</div>\n<div class='top-bar-tab drop-down manage-multiple-tpa tab-margin-left -accent-hover-text' ng-if='$ctrl.showMultiTpa()' ng-mouseenter='$ctrl.shouldShowManage = true' ng-mouseleave='$ctrl.shouldShowManage = false'>\n<div class='flex-center-grow'>\n<span data-hook='manage-multiple-apps-button'>{{::'builder.manage-apps' | translate }}</span>\n<i class='top-bar-menu-arrow-icon cc-icon-arrow-down'></i>\n<div class='sub-menu-container'>\n<div class='sub-menu-shadow' ng-show='$ctrl.shouldShowManageDropDown()' ng-style='$ctrl.getManageDropdownStyle()'>\n<ul class='sub-menu' data-hook='manage-multiple-apps-sub-menu'>\n<li class='sub-menu-item text-with-icon' manage-tpa-button-origin='ADI-topbar-multiple' manage-tpa-button='tpaNaiveType' ng-repeat='(tpaNaiveType, manageableTPA) in $ctrl.getManageableTPAs()' tpa-node='$ctrl.getRelevantTPANode(&#39;{{ tpaNaiveType }}&#39;)'>\n<span>\n<span class='sub-menu-icon' ng-class='manageableTPA.menuItem.icon'></span>\n<span class='sub-menu-label'>{{manageableTPA.menuItem.nameAsObject}}</span>\n</span>\n</li>\n</ul>\n</div>\n</div>\n</div>\n</div>\n</div>\n<div class='top-bar-section'>\n<div class='top-bar-tab drop-down' ng-if='$ctrl.debugFeatures()'>\n<div class='flex-center-grow' ng-mouseenter='$ctrl.shouldShowStartOver = true' ng-mouseleave='$ctrl.shouldShowStartOver = false'>\nDebug\n<div class='sub-menu-container'>\n<div class='sub-menu-shadow' ng-show='$ctrl.shouldShowStartOver'>\n<ul class='sub-menu'>\n<li class='sub-menu-item' ng-click='$ctrl.startOver()'>Start Over</li>\n</ul>\n</div>\n</div>\n</div>\n</div>\n<simple-saving-animation class='top-bar-tab wix-saving-old-design -attached-to-logo' data-hook='simple-saving-indicator' is-currently-saving='$ctrl.showSavingMessage' is-saved='$ctrl.showSavedMessage'></simple-saving-animation>\n<div class='top-bar-tab tab-with-underline wix-saving-old-design -accent-hover-text' data-hook='merge-button' ng-click='$ctrl.togglePageMerge()' ng-if='$ctrl.showMergeButton()'>\n<div class='flex-center-grow'>\n<span>{{ $ctrl.mergeButtonText() | translate }}</span>\n</div>\n</div>\n<div cc-tooltip-position='bottom' cc-tooltip='menu_save' class='top-bar-tab tab-with-underline wix-saving-old-design -accent-hover-text' data-hook='topbar-manual-save' ng-click='$ctrl.onManualSave()' ng-if='$ctrl.isManualSave()'>\n<div class='flex-center-grow'>\n<span>{{::'builder.save' | translate }}</span>\n</div>\n</div>\n<switch-edit-mode-dropdown class='top-bar-tab drop-down tab-margin-right -accent-hover-text' ng-if='$ctrl.shouldShowSwitchEditMode()'></switch-edit-mode-dropdown>\n<div class='top-bar-tab divider switch-edit-mode-divider' ng-if='$ctrl.shouldShowSwitchEditMode()'></div>\n<div class='top-bar-tab tab-with-underline help-tab tab-margin-right tab-margin-left -accent-hover-text' data-hook='help-tab' ng-click='$ctrl.openMainHelp()'>\n<div class='flex-center-grow'>\n<span class='top-bar-help-text'>{{::'general.help' | translate }}</span>\n<span class='top-bar-help-symbol cc-icon-help-12x7'></span>\n</div>\n</div>\n<upgrade-tab-popup class='top-bar-tab tab-margin-right tab-margin-left upgrade-tab-popup' meta-site-id='$ctrl.storyServices.metaSiteId'></upgrade-tab-popup>\n<div class='top-bar-tab divider site-upgrade-divider'></div>\n<site-dropdown class='top-bar-tab tab-margin-right -accent-hover-text'></site-dropdown>\n<div cc-tooltip-position='bottom' cc-tooltip='menu_preview' class='top-bar-tab tab-with-underline preview-tab tab-margin-right -accent-hover-text -second-top-bar' data-hook='topbar-preview' ng-click='$ctrl.onClickPreview()'>\n<div class='flex-center-grow'>\n<span>{{::'builder.preview' | translate }}</span>\n</div>\n</div>\n<div cc-tooltip-position='bottom' cc-tooltip='menu_publish' class='top-bar-tab tab-with-underline publish-tab tab-margin-right -invert -second-top-bar' data-hook='topbar-publish' ng-class='{ &#39;publish-tab-loader&#39;: $ctrl.whilePublishing || $ctrl.afterPublishing }' ng-click='$ctrl.onClickPublish($event)'>\n<div class='flex-center-grow'>\n<span>{{::'builder.publish' | translate }}</span>\n<preloader-publish-completed completed='$ctrl.afterPublishing &amp;&amp; $ctrl.showPublishAnimation' in-progress='$ctrl.whilePublishing' inverted='true'></preloader-publish-completed>\n</div>\n</div>\n</div>\n</div>\n");
}]);try{angular.module("siteGeneratorStaticsPreload")}catch(e){angular.module("siteGeneratorStaticsPreload",[])}angular.module("siteGeneratorStaticsPreload").run(["$templateCache",function(a){a.put("views/top-bar/pages-panel-dropdown/pages-panel-dropdown.html","<div class='flex-center-grow'>\n<div class='drop-down pages-dropdown pages-panel-dropdown' data-hook='second-top-bar-pages-panel' ng-class='$ctrl.getCssClassesForPageTab()' ng-click='$ctrl.handlePagesDropDownClick($event)'>\n<span>\n{{::\"general.page\" | translate }}:&nbsp;\n</span>\n<span class='page-tab-title cc-ellipsis' data-hook='page-tab-title' ng-if='!$ctrl.flags.mergedHeader'>\n{{$ctrl.getSelectedPageName()}}\n</span>\n<span class='page-tab-title' data-hook='page-tab-title' ng-if='$ctrl.flags.mergedHeader'>\n<span class='cc-ellipsis'>{{$ctrl.getSelectedPageName()}}</span>\n<i class='top-bar-menu-home-icon cc-icon-home' data-hook='home-icon' ng-if='$ctrl.shouldShowHomeIcon()'></i>\n</span>\n<i class='top-bar-menu-arrow-icon cc-icon-arrow-down'></i>\n<div class='sub-menu-container'>\n<div class='sub-menu-shadow pages-dropdown' ng-style='$ctrl.getPagesDropdownStyle()'>\n<ul cc-scrollbar class='sub-menu'>\n<li class='sub-menu-item' ng-click='$ctrl.goToPage(item, $event)' ng-repeat='item in ::$ctrl.menuService.menuItems | filter: { page:true } track by item.id'>\n<span class='cc-ellipsis sub-menu-label' ng-class='{&#39;-selected&#39;: $ctrl.pagesManager.isSelectedPage(item.id) }'>\n{{ item.name }}\n<i class='icon cc-icon-hide-eye' ng-if='item.hide'></i>\n</span>\n<ul>\n<li class='sub-menu-item -child' ng-click='$ctrl.goToPage(child, $event)' ng-repeat='child in ::item.children | filter: { page:true } track by child.id'>\n<span class='cc-ellipsis sub-menu-label' ng-class='{&#39;-selected&#39;: $ctrl.pagesManager.isSelectedPage(child.id) }'>\n{{ child.name }}\n<i class='icon cc-icon-hide-eye' ng-if='child.hide'></i>\n</span>\n</li>\n</ul>\n</li>\n</ul>\n<div class='manage-pages-div' data-hook='manage-pages'>\n<button class='p9-primary -small cc-x-height manage-pages' ng-click='$ctrl.onClickPages()'>\n<div class='cc-x-height'>{{::\"dropdown.manage-pages\" | translate }}</div>\n</button>\n</div>\n</div>\n</div>\n</div>\n</div>\n")}]);try{angular.module("siteGeneratorStaticsPreload")}catch(e){angular.module("siteGeneratorStaticsPreload",[])}angular.module("siteGeneratorStaticsPreload").run(["$templateCache",function(a){a.put("views/top-bar/pages-panel-dropdown/pages-dropdown-new-design.html","<div class='flex-center-grow' ng-mouseenter='$ctrl.showPagesDropdownNewDesign()' ng-mouseleave='$ctrl.hidePagesDropdownNewDesign()'>\n<div class='drop-down pages-dropdown pages-panel-dropdown' data-hook='second-top-bar-pages-panel' ng-class='$ctrl.getCssClassesForPageTab()' ng-click='$ctrl.handlePagesDropDownClick($event)'>\n<span>\n{{::\"general.page\" | translate }}:&nbsp;\n</span>\n<span class='page-tab-title cc-ellipsis' data-hook='page-tab-title'>\n{{$ctrl.getSelectedPageName()}}\n</span>\n<i class='top-bar-menu-arrow-icon cc-icon-arrow-down'></i>\n<div class='sub-menu-container'>\n<div class='sub-menu-shadow pages-dropdown' ng-class='$ctrl.getDropdownAdditionalStyleBasedOnDevice()' ng-show='$ctrl.shouldShowDropDownDesign()' ng-style='$ctrl.getPagesDropdownStyle()'>\n<div class='site-pages-div' data-hook='site-pages'>\n<button class='site-pages-in-drop-down -small cc-x-height site-pages' ng-click='$ctrl.onClickPages(&#39;site pages&#39;)'>\n<div class='cc-x-height'>{{::\"dropdown.site-pages\" | translate }}</div>\n</button>\n</div>\n<div class='site-pages-dropdown-divider'></div>\n<ul cc-scrollbar class='sub-menu pages-dropdown-list' ng-class='$ctrl.getSubMenuAdditionalStyleBasedOnDevice()'>\n<li class='sub-menu-item' ng-class='{&#39;-selected-in-pages-dropdown&#39;: $ctrl.isMarkAsSelected(item.id) }' ng-click='$ctrl.goToPage(item, $event)' ng-repeat='item in $ctrl.menuService.getMenuItems($ctrl.applicationState.isInMobileEditMode()) track by item.id'>\n<span class='pages-dropdown-page-name cc-ellipsis sub-menu-label'>\n{{ item.name }}\n<i class='icon cc-icon-hide-eye' ng-if='item.hide'></i>\n</span>\n<ul>\n<li class='sub-menu-item -child no-padding-left' ng-class='{&#39;-selected-in-pages-dropdown&#39;: $ctrl.isMarkAsSelected(child.id) }' ng-click='$ctrl.goToPage(child, $event)' ng-repeat='child in item.children | filter: { page:true } track by child.id'>\n<span class='pages-dropdown-page-name cc-ellipsis sub-menu-label'>\n{{ child.name }}\n<i class='icon cc-icon-hide-eye' ng-if='child.hide'></i>\n</span>\n</li>\n</ul>\n</li>\n</ul>\n<div class='pages-dropdown-divider' ng-if='!$ctrl.isInMobileEditMode()'></div>\n<div class='manage-pages-div' data-hook='manage-pages' ng-if='!$ctrl.isInMobileEditMode()'>\n<button class='manage-pages-in-drop-down -small cc-x-height manage-pages sub-menu-label' ng-click='$ctrl.onClickPages(&#39;manage pages&#39;)'>\n<div class='cc-x-height'>{{::\"dropdown.manage-pages\" | translate }}</div>\n</button>\n</div>\n</div>\n</div>\n</div>\n</div>\n")}]);try{angular.module("siteGeneratorStaticsPreload")}catch(e){angular.module("siteGeneratorStaticsPreload",[])}angular.module("siteGeneratorStaticsPreload").run(["$templateCache",function(a){a.put("views/top-bar/add-tab-dropdown/add-tab-dropdown.html","<div adi-automation='topbar-add-dropdown' class='flex-center-grow drop-down add-tab add-tab-dropdown' data-hook='second-top-bar-add-section' ng-click='$ctrl.showAddSectionDropdown()' ng-mouseenter='$ctrl.showAddSectionDropdown()' ng-mouseleave='$ctrl.hideAddSectionDropdown()'>\n<span>{{::'general.add' | translate }}</span>\n<i class='top-bar-menu-arrow-icon cc-icon-arrow-down'></i>\n<div class='sub-menu-container'>\n<div class='sub-menu-shadow add-tab-dropdown' data-hook='add-dropdown-menu' ng-attr-style='{{$ctrl.getAddSectionDropdownStyle()}}' ng-show='$ctrl.shouldShowDropDownDesign()'>\n<ul class='sub-menu'>\n<li class='sub-menu-item text-with-icon' data-hook='add-section-button' ng-class='$ctrl.getCssClassesForAddSectionTab()' ng-click='$ctrl.onClickAddSection()'>\n<span>\n<span class='sub-menu-icon cc-icon-section'></span>\n<span class='sub-menu-label'>{{::'builder.top-bar.add-section' | translate }}</span>\n</span>\n</li>\n<li class='sub-menu-item text-with-icon' data-hook='add-page-button' ng-click='$ctrl.onClickAddPage()'>\n<span>\n<span class='sub-menu-icon cc-icon-page'></span>\n<span class='sub-menu-label'>{{::'general.page' | translate }}</span>\n</span>\n</li>\n</ul>\n</div>\n</div>\n</div>\n")}]);try{angular.module("siteGeneratorStaticsPreload")}catch(e){angular.module("siteGeneratorStaticsPreload",[])}angular.module("siteGeneratorStaticsPreload").run(["$templateCache",function(a){a.put("views/top-bar/site-design-dropdown/site-design-dropdown.html","<cc-popover class='design-tab flex-center-grow' margin-distance='21' ng-class='{&#39;active&#39;: $ctrl.activeTab === &#39;design&#39;}'>\n<cc-popover-trigger>\n<div class='flex-center-grow'>\n<span>{{::'builder.design' | translate }}</span>\n<i class='top-bar-menu-arrow-icon cc-icon-arrow-down'></i>\n</div>\n</cc-popover-trigger>\n<cc-popover-content ng-attr-style='{{$ctrl.getSiteDesignDropdownStyle()}}'>\n<ul class='drop-down sub-menu'>\n<li class='sub-menu-item site-design-sub-menu-padding site-design-text-with-icon' data-hook='open-themes-button' ng-click='$ctrl.onClickDesign()'>\n<span>\n<span class='sub-menu-icon cc-icon-themes'></span>\n<span class='sub-menu-label'>{{::'design.themes.title' | translate }}</span>\n</span>\n</li>\n<li class='sub-menu-item site-design-sub-menu-padding divider-container'>\n<span class='sub-menu-divider'></span>\n</li>\n<li class='sub-menu-item site-design-sub-menu-padding site-design-text-with-icon' data-hook='open-colors-button' ng-click='$ctrl.openNewColorationPanel()'>\n<span>\n<span class='sub-menu-icon cc-icon-colours margin-style'></span>\n<span class='sub-menu-label'>{{::'design.colors.title' | translate }}</span>\n</span>\n</li>\n<li class='sub-menu-item site-design-sub-menu-padding site-design-text-with-icon' data-hook='open-fonts-button' ng-click='$ctrl.openFonts()'>\n<span>\n<span class='sub-menu-icon cc-icon-fonts margin-style'></span>\n<span class='sub-menu-label'>{{::'design.fonts.title' | translate }}</span>\n</span>\n</li>\n<li class='sub-menu-item site-design-sub-menu-padding site-design-text-with-icon' data-hook='open-animations-button' ng-click='$ctrl.openAnimationPanel()'>\n<span>\n<span class='sub-menu-icon cc-icon-animations margin-style'></span>\n<span class='sub-menu-label'>{{::'design.animations.title' | translate }}</span>\n</span>\n</li>\n</ul>\n</cc-popover-content>\n</cc-popover>\n")}]);try{angular.module("siteGeneratorStaticsPreload")}catch(e){angular.module("siteGeneratorStaticsPreload",[])}angular.module("siteGeneratorStaticsPreload").run(["$templateCache",function(a){a.put("views/top-bar/site-dropdown/site-dropdown.html","<div class='drop-down site-tab flex-center-grow' data-hook='site-tab' ng-if='!$ctrl.flags.popover' ng-mouseenter='$ctrl.showDropDown()' ng-mouseleave='$ctrl.hideDropDown()'>\n<span>{{::'builder.site' | translate }}</span>\n<i class='top-bar-menu-arrow-icon cc-icon-arrow-down'></i>\n<div class='sub-menu-container'>\n<div class='sub-menu-shadow' ng-show='$ctrl.isShowDropDown()'>\n<ul class='sub-menu' ng-show='$ctrl.getMetadata()'>\n<li class='sub-menu-item business-info' data-hook='business-info' ng-click='$ctrl.onClickMyBusinessInfo($event)' ng-if='$ctrl.showBusinessInfo'>\n<span class='sub-menu-label'>{{::'builder.site-menu.my-business-info' | translate }}</span>\n</li>\n<li class='sub-menu-item my-dashboard' data-hook='my-dashboard' ng-click='$ctrl.onClickMyDashboard()'>\n<span class='sub-menu-label'>\n{{::'builder.site-menu.my-dashboard' | translate }}\n<div class='cc-icon-new-tab'></div>\n</span>\n</li>\n<li class='sub-menu-item site-settings' data-hook='site-settings' ng-click='$ctrl.onClickSiteSettings()'>\n<span class='sub-menu-label'>\n{{::'builder.site-menu.settings' | translate }}\n<div class='cc-icon-new-tab'></div>\n</span>\n</li>\n<li class='sub-menu-item connect-domain' data-hook='connect-domain' ng-click='$ctrl.onClickConnectDomain($event)'>\n<span class='sub-menu-label'>{{::'builder.site-menu.connect-domain' | translate }}</span>\n</li>\n<li class='sub-menu-item seo-wiz' data-hook='seo-wiz' ng-click='$ctrl.onClickSEOWiz()'>\n<span class='sub-menu-label'>\n{{::'builder.site-menu.seo-wiz' | translate }}\n<div class='cc-icon-new-tab'></div>\n</span>\n</li>\n<li class='sub-menu-item new-site' data-hook='new-site' ng-click='$ctrl.onClickStartNewSite()'>\n<span class='sub-menu-label'>\n{{::'builder.site-menu.start-new-site' | translate }}\n<div class='cc-icon-new-tab'></div>\n</span>\n</li>\n<li class='sub-menu-item view-site' data-hook='view-site' ng-click='$ctrl.onClickViewLiveSite()' ng-if='$ctrl.isSitePublished()'>\n<span class='sub-menu-label'>\n{{::'builder.site-menu.view-live' | translate }}\n<div class='cc-icon-new-tab'></div>\n</span>\n</li>\n<li class='sub-menu-item feedback' data-hook='feedback' ng-click='$ctrl.onClickFeedback()'>\n<span class='sub-menu-label'>\n{{::'builder.site-menu.feedback' | translate }}\n<div class='cc-icon-new-tab'></div>\n</span>\n</li>\n<li class='sub-menu-item go-to-editor' data-hook='go-to-editor' ng-click='$ctrl.onClickEditor()' ng-if='!$ctrl.isManualSave()'>\n<span class='sub-menu-label'>{{::'builder.site-menu.' + $ctrl.flags.moveToEditorText + '-to-editor' | translate }}</span>\n</li>\n</ul>\n</div>\n</div>\n</div>\n<cc-popover class='site-tab flex-center-grow' margin-distance='21' ng-if='$ctrl.flags.popover' on-trigger-off='$ctrl.handleClosed()' on-trigger-on='$ctrl.handleOpened()'>\n<cc-popover-trigger>\n<div class='flex-center-grow' data-hook='site-tab'>\n<span>{{::'builder.site' | translate }}</span>\n<i class='top-bar-menu-arrow-icon cc-icon-arrow-down'></i>\n</div>\n</cc-popover-trigger>\n<cc-popover-content>\n<ul class='drop-down sub-menu' ng-show='$ctrl.getMetadata()'>\n<li class='sub-menu-item business-info' data-hook='business-info' ng-click='$ctrl.onClickMyBusinessInfo($event)' ng-if='$ctrl.showBusinessInfo'>\n<span class='sub-menu-label'>{{::'builder.site-menu.my-business-info' | translate }}</span>\n</li>\n<li class='sub-menu-item my-dashboard' data-hook='my-dashboard' ng-click='$ctrl.onClickMyDashboard()'>\n<span class='sub-menu-label'>\n{{::'builder.site-menu.my-dashboard' | translate }}\n<div class='cc-icon-new-tab'></div>\n</span>\n</li>\n<li class='sub-menu-item site-settings' data-hook='site-settings' ng-click='$ctrl.onClickSiteSettings()'>\n<span class='sub-menu-label'>\n{{::'builder.site-menu.settings' | translate }}\n<div class='cc-icon-new-tab'></div>\n</span>\n</li>\n<li class='sub-menu-item connect-domain' data-hook='connect-domain' ng-click='$ctrl.onClickConnectDomain($event)'>\n<span class='sub-menu-label'>{{::'builder.site-menu.connect-domain' | translate }}</span>\n</li>\n<li class='sub-menu-item seo-wiz' data-hook='seo-wiz' ng-click='$ctrl.onClickSEOWiz()'>\n<span class='sub-menu-label'>\n{{::'builder.site-menu.seo-wiz' | translate }}\n<div class='cc-icon-new-tab'></div>\n</span>\n</li>\n<li class='sub-menu-item new-site' data-hook='new-site' ng-click='$ctrl.onClickStartNewSite()'>\n<span class='sub-menu-label'>\n{{::'builder.site-menu.start-new-site' | translate }}\n<div class='cc-icon-new-tab'></div>\n</span>\n</li>\n<li class='sub-menu-item view-site' data-hook='view-site' ng-click='$ctrl.onClickViewLiveSite()' ng-if='$ctrl.isSitePublished()'>\n<span class='sub-menu-label'>\n{{::'builder.site-menu.view-live' | translate }}\n<div class='cc-icon-new-tab'></div>\n</span>\n</li>\n<li class='sub-menu-item feedback' data-hook='feedback' ng-click='$ctrl.onClickFeedback()'>\n<span class='sub-menu-label'>\n{{::'builder.site-menu.feedback' | translate }}\n<div class='cc-icon-new-tab'></div>\n</span>\n</li>\n<li class='sub-menu-item go-to-editor' data-hook='go-to-editor' ng-click='$ctrl.onClickEditor()' ng-if='!$ctrl.isManualSave()'>\n<span class='sub-menu-label'>{{::'builder.site-menu.' + $ctrl.flags.moveToEditorText + '-to-editor' | translate }}</span>\n</li>\n</ul>\n</cc-popover-content>\n</cc-popover>\n")}]);try{angular.module("siteGeneratorStaticsPreload")}catch(e){angular.module("siteGeneratorStaticsPreload",[])}angular.module("siteGeneratorStaticsPreload").run(["$templateCache",function(a){a.put("views/top-bar/upgrade-tab-popup/upgrade-tab-popup.html","<div class='flex-center-grow drop-down upgrade-tab' data-hook='upgrade-tab' ng-mouseenter='$ctrl.showDropDown()' ng-mouseleave='$ctrl.hideDropDown()'>\n<a class='upgrade-tab-text' ng-href='https://premium.wix.com/wix/api/premiumStart?siteGuid={{$ctrl.metaSiteId}}&amp;referralAdditionalInfo=onboarding-upgrade-direct' target='_blank'>{{::'builder.upgrade' | translate }}</a>\n<div class='sub-menu-container'>\n<div class='sub-menu-shadow upgrade-tab-sub-menu' ng-show='$ctrl.isShowDropDown()'>\n<upgrade-popup-default data-hook='top-bar-upgrade-popup-default' meta-site-id='$ctrl.metaSiteId' ng-if='!$ctrl.saleService.isSale()'></upgrade-popup-default>\n<upgrade-popup-seasonal-campaign data-hook='top-bar-upgrade-popup-seasonal-campaign' meta-site-id='$ctrl.metaSiteId' ng-if='$ctrl.saleService.isSale()'></upgrade-popup-seasonal-campaign>\n</div>\n</div>\n</div>\n")}]);try{angular.module("siteGeneratorStaticsPreload")}catch(e){angular.module("siteGeneratorStaticsPreload",[])}angular.module("siteGeneratorStaticsPreload").run(["$templateCache",function(a){a.put("views/top-bar/upgrade-tab-popup/upgrade-popup-default.html","<div class='upgrade-drop-down'>\n<div class='upgrade-drop-down-content'>\n<div class='upgrade-drop-down-title'>{{::'builder.upgrade-dropdown.title' | translate }}</div>\n<ul class='upgrade-drop-down-list'>\n<li class='upgrade-drop-down-list-item'>\n<i class='cc-icon-check'></i>\n{{::'builder.upgrade-dropdown.bullet-1' | translate }}\n</li>\n<li class='upgrade-drop-down-list-item'>\n<i class='cc-icon-check'></i>\n{{::'builder.upgrade-dropdown.bullet-2' | translate }}\n</li>\n<li class='upgrade-drop-down-list-item'>\n<i class='cc-icon-check'></i>\n{{::'builder.upgrade-dropdown.bullet-3' | translate }}\n</li>\n</ul>\n<div class='buttons'>\n<a class='upgrade-drop-down-button p9a-secondary -inverse -purple -small' data-hook='compare-plans-button' ng-href='https://premium.wix.com/wix/api/premiumStart?siteGuid={{$ctrl.metaSiteId}}&amp;referralAdditionalInfo=onboarding-upgrade' target='_blank'>{{::'builder.upgrade-dropdown.compare-plans' | translate }}</a>\n<a class='upgrade-drop-down-button p9-primary -purple -small' data-hook='upgrade-button' ng-href='https://premium.wix.com/wix/api/premiumStart?siteGuid={{$ctrl.metaSiteId}}&amp;referralAdditionalInfo=onboarding-upgrade-direct' target='_blank'>{{::'builder.upgrade-dropdown.get-yearly-unlimited' | translate }}</a>\n</div>\n</div>\n</div>\n")}]);try{angular.module("siteGeneratorStaticsPreload")}catch(e){angular.module("siteGeneratorStaticsPreload",[])}angular.module("siteGeneratorStaticsPreload").run(["$templateCache",function(a){a.put("views/top-bar/upgrade-tab-popup/upgrade-popup-seasonal-campaign.html","<div class='upgrade-drop-down -sale'>\n<div class='upgrade-drop-down-content'>\n<div class='upgrade-drop-down-title' ng-bind-html=':: &#39;builder.upgrade-dropdown.sale-title&#39; | translate'></div>\n<ul class='upgrade-drop-down-list'>\n<li class='upgrade-drop-down-list-item'>\n<i class='cc-icon-check'></i>\n{{::'builder.upgrade-dropdown.bullet-1' | translate }}\n</li>\n<li class='upgrade-drop-down-list-item'>\n<i class='cc-icon-check'></i>\n{{::'builder.upgrade-dropdown.bullet-2' | translate }}\n</li>\n<li class='upgrade-drop-down-list-item'>\n<i class='cc-icon-check'></i>\n{{::'builder.upgrade-dropdown.bullet-3' | translate }}\n</li>\n</ul>\n<div class='buttons'>\n<a class='upgrade-drop-down-button p9a-secondary -inverse -purple -small' data-hook='compare-plans-button' ng-href='https://premium.wix.com/wix/api/premiumStart?siteGuid={{$ctrl.metaSiteId}}&amp;referralAdditionalInfo=onboarding-upgrade' target='_blank'>{{::'builder.upgrade-dropdown.compare-plans' | translate }}</a>\n<a class='upgrade-drop-down-button p9-primary -purple -small' data-hook='upgrade-button' ng-href='https://premium.wix.com/wix/api/premiumStart?siteGuid={{$ctrl.metaSiteId}}&amp;referralAdditionalInfo=onboarding-upgrade-direct' target='_blank'>{{::'builder.upgrade-dropdown.upgrade-save-50' | translate }}</a>\n</div>\n</div>\n</div>\n")}]);try{angular.module("siteGeneratorStaticsPreload")}catch(e){angular.module("siteGeneratorStaticsPreload",[])}angular.module("siteGeneratorStaticsPreload").run(["$templateCache",function(a){a.put("views/zoom.html","<div class='floating-button-box -second-top-bar' ng-show='!$ctrl.applicationState.isInMobileEditMode()'>\n<div cc-tooltip-position='left' cc-tooltip='zoom_out' title='zoom out'>\n<div class='cc-icon-zoom-out cc-icon-circle' ng-click='$ctrl.onZoomOut()' ng-disabled='!$ctrl.canZoomOut()'></div>\n</div>\n<div cc-tooltip-position='left' cc-tooltip='zoom_in' title='zoom in'>\n<div class='cc-icon-zoom-in cc-icon-circle' ng-click='$ctrl.onZoomIn()' ng-disabled='!$ctrl.canZoomIn()'></div>\n</div>\n</div>\n")}]);try{angular.module("siteGeneratorStaticsPreload")}catch(e){angular.module("siteGeneratorStaticsPreload",[])}angular.module("siteGeneratorStaticsPreload").run(["$templateCache",function(a){a.put("views/builder/list-span-tools.html","<div class='list-span-tools'>\n<div class='dynamic-layer' data-hook='buttons-strip' ng-show='$ctrl.shouldShowButtons()'>\n<div class='spacer-elastic header-coloration-style' ng-if='$ctrl.isHeader() &amp;&amp; $ctrl.flags.debugHeaderFooterColoration'>\n<div class='vertical-menu'>\n<div class='column'>\n<button class='stage-btn round edit edit-icon' ng-class='{&#39;-active&#39;: true}' ng-click='$ctrl.headerColorationItemClicked(item.value)' ng-repeat='item in ::$ctrl.colorationItems.header.lightItems track by $index' ng-show='true'>{{ ::item.text }}</button>\n</div>\n</div>\n</div>\n<div class='spacer-elastic header-coloration-style header-coloration-dark-style' ng-if='$ctrl.isHeader() &amp;&amp; $ctrl.flags.debugHeaderFooterColoration'>\n<div class='vertical-menu'>\n<div class='column'>\n<button class='stage-btn round edit edit-icon' ng-class='{&#39;-active&#39;: true}' ng-click='$ctrl.headerColorationItemClicked(item.value)' ng-repeat='item in ::$ctrl.colorationItems.header.darkItems track by $index' ng-show='true'>{{ ::item.text }}</button>\n</div>\n</div>\n</div>\n<div class='spacer-elastic footer-coloration-style' ng-if='$ctrl.isFooter() &amp;&amp; $ctrl.flags.debugHeaderFooterColoration'>\n<div class='vertical-menu'>\n<div class='column'>\n<button class='stage-btn round edit edit-icon' ng-class='{&#39;-active&#39;: true}' ng-click='$ctrl.footerColorationItemClicked(item.value)' ng-repeat='item in ::$ctrl.colorationItems.footer.lightItems track by $index' ng-show='true'>{{ ::item.text }}</button>\n</div>\n</div>\n</div>\n<div class='spacer-elastic footer-coloration-style footer-coloration-dark-style' ng-if='$ctrl.isFooter() &amp;&amp; $ctrl.flags.debugHeaderFooterColoration'>\n<div class='vertical-menu'>\n<div class='column'>\n<button class='stage-btn round edit edit-icon' ng-class='{&#39;-active&#39;: true}' ng-click='$ctrl.footerColorationItemClicked(item.value)' ng-repeat='item in ::$ctrl.colorationItems.footer.darkItems track by $index' ng-show='true'>{{ ::item.text }}</button>\n</div>\n</div>\n</div>\n<div class='spacer-elastic slide-show-button' ng-if='$ctrl.flags.listItemSlideShow &amp;&amp; !$ctrl.isMobileEditMode() &amp;&amp; $ctrl.isListItem()'>\n<div class='vertical-menu'>\n<div class='column'>\n<button class='stage-btn round edit edit-icon' ng-class='{&#39;-active&#39;: true}' ng-click='$ctrl.toggleSlideShow()'>SlideShow</button>\n</div>\n</div>\n</div>\n<div class='spacer-elastic'>\n<div class='edit-menu main-action-modified vertical-menu' ng-class='{&#39;no-switch&#39;: $ctrl.shouldAddNoSwitchClass()}' ng-if='!$ctrl.flags.textualSectionMenu'>\n<div class='column'>\n<button cc-tooltip-position='top' cc-tooltip='overlay_edit' class='stage-btn round edit edit-icon cc-icon-edit' data-hook='edit-button' ng-class='{&#39;-active&#39;: $ctrl.applicationState.isInEditMode() &amp;&amp; !$ctrl.stateIsHover()}' ng-click='$ctrl.onToggleEditMode()' ng-show='$ctrl.shouldShowEditBtn()'></button>\n</div>\n</div>\n</div>\n<div class='overlay-tools-center'>\n<div class='vertical-menu switch-and-tpa-menu' ng-class='{&#39;has-manage-and-switch&#39;: $ctrl.canManage() &amp;&amp; $ctrl.shouldShowSwitchBtn()}'>\n<div class='column' ng-if='!$ctrl.flags.textualSectionMenu'>\n<button cc-tooltip-options='{{ $ctrl.getLayoutChangeTooltipOptions() }}' cc-tooltip-position='top' cc-tooltip='{{ $ctrl.getSwitchButtonTooltip() }}' class='stage-btn round tour-element-switch-layout edit' data-hook='change-layout-button' ng-class='{&#39;-active&#39;: $ctrl.applicationState.isSwitchPresetMode() &amp;&amp; $ctrl.isContentFocused()}' ng-click='$ctrl.onTogglePresetState()' ng-show='$ctrl.shouldShowSwitchBtn()'>{{::$ctrl.getSwitchButtonText() | translate}}</button>\n<button cc-tooltip='{{ $ctrl.getTpaTooltip() }}' class='stage-btn round manage' data-hook='manage-tpa-button' manage-tpa-button-origin='ADI-section' manage-tpa-button='$ctrl.getTpaType()' ng-if='$ctrl.canManage()' tpa-node='$ctrl.contentDesignatedListSpan.node'>{{::'builder.manage-tpa-button' | translate}}</button>\n</div>\n<div class='column left-menu' ng-if='$ctrl.flags.textualSectionMenu &amp;&amp; $ctrl.shouldShowButtons()'>\n<button cc-tooltip-position='top' cc-tooltip='{{ $ctrl.getEditButtonTooltip() }}' class='stage-btn round edit' data-hook='edit-button' ng-class='{&#39;-active&#39;: $ctrl.applicationState.isInEditMode() &amp;&amp; !$ctrl.stateIsHover()}' ng-click='$ctrl.onToggleEditMode()' ng-if='::$ctrl.flags.changeTPAEditButtonText' ng-show='$ctrl.isEdit'>{{ $ctrl.isTpa() ? 'tpa.settings' : 'builder.edit-section-button' | translate}}</button>\n<button cc-tooltip-position='top' cc-tooltip='overlay_edit' class='stage-btn round edit' data-hook='edit-button' ng-class='{&#39;-active&#39;: $ctrl.applicationState.isInEditMode() &amp;&amp; !$ctrl.stateIsHover()}' ng-click='$ctrl.onToggleEditMode()' ng-if='::!$ctrl.flags.changeTPAEditButtonText' ng-show='$ctrl.isEdit'>{{ ::'builder.edit-section-button' | translate}}</button>\n<button cc-tooltip-options='{{ $ctrl.getLayoutChangeTooltipOptions() }}' cc-tooltip-position='top' cc-tooltip='{{ $ctrl.getSwitchButtonTooltip() }}' class='stage-btn round tour-element-switch-layout edit' data-hook='change-layout-button' ng-class='{&#39;-active&#39;: $ctrl.applicationState.isSwitchPresetMode() &amp;&amp; $ctrl.isContentFocused()}' ng-click='$ctrl.onTogglePresetState()' ng-show='$ctrl.isDesigns'>{{::$ctrl.getSwitchButtonText() | translate}}</button>\n<button cc-tooltip='{{ $ctrl.getTpaTooltip() }}' class='stage-btn round manage' data-hook='manage-tpa-button' manage-tpa-button-origin='ADI-section' manage-tpa-button='$ctrl.getTpaType()' ng-if='$ctrl.isManage' tpa-node='$ctrl.contentDesignatedListSpan.node'>{{::'builder.manage-tpa-button' | translate}}</button>\n</div>\n</div>\n</div>\n<div class='spacer-elastic'>\n<div class='vertical-menu more-actions-panel' ng-if='$ctrl.isOnBody() &amp;&amp; !$ctrl.isMobileEditMode()'>\n<div class='column'>\n<button cc-tooltip-position='top' cc-tooltip='overlay_gear' class='stage-btn cc-icon-actions cc-icon-circle tour-more-actions-panel' data-hook='more-actions' ng-click='$ctrl.toggleShowMoreActions()' ng-if='$ctrl.showActions()'></button>\n<div class='more-actions-menu' ng-if='$ctrl.showMoreActions' ng-mouseenter='$ctrl.mamMouseEnter()' ng-mouseleave='$ctrl.mamMouseLeave()'>\n<button class='stage-btn cc-icon-close-12 cc-icon-circle cc-icon-white close-more-actions-btn' data-hook='close-more-actions' ng-click='$ctrl.toggleShowMoreActions()'></button>\n<button cc-tooltip-position='top' cc-tooltip='overlay_delete' class='stage-btn cc-icon-delete cc-icon-circle' ng-click='$ctrl.onDelete()' ng-hide='!$ctrl.canManipulate()'></button>\n<button cc-tooltip-position='top' cc-tooltip='overlay_move_page' class='stage-btn cc-icon-move-to cc-icon-circle' ng-click='$ctrl.moveAwayFlow()' ng-disabled='!$ctrl.canMoveAwayFlow()' ng-hide='!$ctrl.canManipulate()'></button>\n<button cc-tooltip-position='top' cc-tooltip='overlay_duplicate_section' class='stage-btn cc-icon-duplicate cc-icon-circle' ng-click='$ctrl.duplicateSection()' ng-hide='!$ctrl.canDuplicate()'></button>\n<button cc-tooltip-position='top' cc-tooltip='overlay_duplicate_section' class='stage-btn cc-icon-replace cc-icon-circle' ng-click='$ctrl.incrementColor()' ng-hide='!$ctrl.showSectionColorButton()'></button>\n<button cc-tooltip-position='top' cc-tooltip='overlay_enlarge_section_height' class='stage-btn cc-icon-play cc-icon-circle' ng-click='$ctrl.changeSectionHeight(true)' ng-hide='!$ctrl.showSectionSizeButtons()'></button>\n<button cc-tooltip-position='top' cc-tooltip='overlay_shrink_section_height' class='stage-btn cc-icon-pause cc-icon-circle' ng-click='$ctrl.changeSectionHeight(false)' ng-hide='!$ctrl.showSectionSizeButtons()'></button>\n<button cc-tooltip-position='top' cc-tooltip='Change map style' class='stage-btn cc-icon-customise-design cc-icon-circle' ng-click='$ctrl.changeMapStyle()' ng-hide='!$ctrl.showMapStyles()'></button>\n<button cc-tooltip-position='top' cc-tooltip='overlay_change_column_position' class='stage-btn cc-icon-intro-next-arrow cc-icon-circle' ng-click='$ctrl.moveColumn()' ng-hide='!$ctrl.showMoveColumnButton()'></button>\n</div>\n</div>\n</div>\n<drag-handle arrow-down-disabled='!$ctrl.canMove(true)' arrow-up-disabled='!$ctrl.canMove(false)' class='stage-btn tour-drag-handle' data-hook='drag-handle' drag-disabled='!$ctrl.isDragEnabled()' list-span='$ctrl.contentDesignatedListSpan' ng-if='$ctrl.shouldShowDragHandle() &amp;&amp; !$ctrl.isMobileEditMode()'></drag-handle>\n</div>\n</div>\n</div>\n")}]);try{angular.module("siteGeneratorStaticsPreload")}catch(e){angular.module("siteGeneratorStaticsPreload",[])}angular.module("siteGeneratorStaticsPreload").run(["$templateCache",function(a){a.put("views/builder/logo-extraction-popup.html","<div class='logo-extraction-popup'>\n<div class='popup-tooltip-arrow'></div>\n<logo-color-extraction-wizard auto-start-prepare-palette='false' context='builder' enable-replace-logo='false' first-step='$ctrl.getFirstStep()' get-prepare-palette-promise='$ctrl.getPreparePalettePromise(logoOrigin)' logo-persistence='$ctrl.getPersistenceHandler()' on-create-palette-click='$ctrl.createLogoPaletteClick(logoExtractorStep)' on-done='$ctrl.onDone(logoColoration)' on-save-palette-click='$ctrl.saveLogoPaletteClick(logoColoration)' on-skip-click='$ctrl.skipLogoPaletteClick(logoExtractorStep)'></logo-color-extraction-wizard>\n</div>\n")}]);try{angular.module("siteGeneratorStaticsPreload")}catch(e){angular.module("siteGeneratorStaticsPreload",[])}angular.module("siteGeneratorStaticsPreload").run(["$templateCache",function(a){a.put("views/preview/fake-browser.html","<div class='browser-wrapper' ng-class='{ preview: $ctrl.isPreviewDisplay() }' ng-style='$ctrl.extraWidthIfDefined()'>\n<div class='stage-cover'></div>\n<fake-browser-bar label='{{ $ctrl.getBarLabel() }}' ng-if='!$ctrl.isPreviewDisplay()' on-bar-click='$ctrl.openConnectDomainDialog($event)' url='{{ $ctrl.getSiteUrl() }}'></fake-browser-bar>\n<div ng-class='{&#39;mobile-preview-wrapper&#39;:$ctrl.isPreviewDisplay() &amp;&amp; $ctrl.isInMobileEditMode()}'>\n<div ng-class='{&#39;mobile-preview&#39;:$ctrl.isPreviewDisplay() &amp;&amp; $ctrl.isInMobileEditMode()}'>\n<div class='mobile-frame previewMode' ng-if='$ctrl.isPreviewDisplay() &amp;&amp; $ctrl.isInMobileEditMode()'>\n<div class='mobile-frame-top'></div>\n<div class='site-shadow'></div>\n<div class='mobile-frame-bottom'></div>\n</div>\n<div ng-class='{&#39;mobile-preview-container&#39;:$ctrl.isPreviewDisplay() &amp;&amp; $ctrl.isInMobileEditMode()}'>\n<viewer class='inner-wrapper' ng-class='{&#39;preview&#39;: $ctrl.isPreviewDisplay()}' ng-style='$ctrl.extraWidthIfDefined()'></viewer>\n</div>\n</div>\n</div>\n</div>\n")}]);try{angular.module("siteGeneratorStaticsPreload")}catch(e){angular.module("siteGeneratorStaticsPreload",[])}angular.module("siteGeneratorStaticsPreload").run(["$templateCache",function(a){a.put("views/preview/overlay.html","<div class='overlay-backdrop' ng-show='$overlay.overlayManager.showBackdrop'></div>\n<div class='overlay-viewport' ng-show='!$overlay.isPreviewDisplay()'>\n<div class='hover-highlight' overlay-highlight-style='hover'></div>\n<div class='active-highlight' overlay-highlight-style='active'></div>\n<div class='overlay-on-top' ng-mouseleave='$overlay.onMouseLeave(listSpan)'>\n<list-span-tools content-designated-list-span='$overlay.getFocusedListSpan()' ng-class='{&#39;no-transition&#39;: !$overlay.shouldAddTransition()}' ng-if='$overlay.showFocusedListSpan' state='focus'></list-span-tools>\n<list-span-tools content-designated-list-span='$overlay.getHoveredListSpan()' ng-class='{&#39;no-transition&#39;: true}' ng-if='$overlay.showHoveredListSpan' state='hover'></list-span-tools>\n<div class='overlay-padding' data-hook='site-overlay'>\n<div class='overlay-container'>\n<solution-overlay class='header-overlay' data-hook='overlay-header' ng-if='$overlay.header' render-data='$overlay.header'></solution-overlay>\n<solution-overlay data-hook='overlay-body' ng-if='$overlay.body' render-data='$overlay.body'></solution-overlay>\n<solution-overlay class='footer-overlay' data-hook='overlay-footer' ng-if='$overlay.footer' render-data='$overlay.footer'></solution-overlay>\n</div>\n</div>\n</div>\n</div>\n")}]);try{angular.module("siteGeneratorStaticsPreload")}catch(e){angular.module("siteGeneratorStaticsPreload",[])}angular.module("siteGeneratorStaticsPreload").run(["$templateCache",function(a){a.put("views/animations/preloader-completed.html","<div class='preloader-completed'>\n<div class='completed-icon cc-icon-check'></div>\n<div class='completed-icon-mask cc-icon-check'></div>\n<div class='circle'></div>\n</div>\n");
}]);try{angular.module("siteGeneratorStaticsPreload")}catch(e){angular.module("siteGeneratorStaticsPreload",[])}angular.module("siteGeneratorStaticsPreload").run(["$templateCache",function(a){a.put("views/animations/preloader-publish-completed.html","<div class='publish-completed-container' data-hook='publish-completed-container' ng-class='{ &#39;in-progress&#39; : $ctrl.inProgress, &#39;completed&#39; : $ctrl.completed, &#39;inverted&#39;: $ctrl.inverted }' ng-show='$ctrl.inProgress || $ctrl.completed'>\n<svg class='circle'>\n<circle class='circle-path'></circle>\n</svg>\n<svg class='checkmark' viewbox='0 0 9.76 9.07'>\n<polyline class='checkmark-path' points='0.36 5.03 3.5 8.29 9.36 0.29'></polyline>\n</svg>\n<svg class='floating f1 star-cross' viewbox='0 0 5.25 5.25'>\n  <line x1='5.25' y1='2.63' y2='2.63'></line>\n  <line x1='2.63' x2='2.62' y2='5.25'></line>\n</svg>\n<svg class='floating f2 star-cross' viewbox='0 0 5.25 5.25'>\n  <line x1='5.25' y1='2.63' y2='2.63'></line>\n  <line x1='2.63' x2='2.62' y2='5.25'></line>\n</svg>\n<svg class='floating f3 small-circle'>\n  <circle></circle>\n</svg>\n<svg class='floating f4 small-circle'>\n  <circle></circle>\n</svg>\n</div>\n")}]);try{angular.module("siteGeneratorStaticsPreload")}catch(e){angular.module("siteGeneratorStaticsPreload",[])}angular.module("siteGeneratorStaticsPreload").run(["$templateCache",function(a){a.put("views/animations/simple-saving-animation.html","<div class='save-state-tab flex-center-grow'>\n<div class='saving-animated' ng-show='$ctrl.isCurrentlySaving'>{{ ::'builder.saving' | translate }}</div>\n<div cc-tooltip-options='{{ {offsetY: 24} }}' cc-tooltip-position='bottom' cc-tooltip='menu_saved_text' class='saved-message' ng-show='!$ctrl.isCurrentlySaving'>{{ ::'builder.saved' | translate }}</div>\n<preloader-completed ng-show='$ctrl.isSaved'></preloader-completed>\n</div>\n")}]);try{angular.module("siteGeneratorStaticsPreload")}catch(e){angular.module("siteGeneratorStaticsPreload",[])}angular.module("siteGeneratorStaticsPreload").run(["$templateCache",function(a){a.put("views/preview/fake-browser-bar.html","<div class='browser-toolbar' ng-class='{&quot;mobile-toolbar&quot;: $ctrl.applicationState.isInMobileEditMode()}'>\n<span class='browser-address-bar'>\n<div class='browser-url' data-hook='url' ng-if='!$ctrl.applicationState.isInMobileEditMode()'>{{ $ctrl.url }}</div>\n<div cc-tooltip-options='{{ $ctrl.tooltipOptions() }}' cc-tooltip-position='top' cc-tooltip='user_web_address' class='browser-url cursor-pointer' ng-if='$ctrl.applicationState.isInMobileEditMode()'>{{ $ctrl.getShortUrl($ctrl.url) }}</div>\n</span>\n<button cc-tooltip-position='top' cc-tooltip='overlay_connect_domain' class='browser-label' data-hook='label' ng-click='$ctrl.onBarClick()' ng-if='$ctrl.label'>{{ $ctrl.label }}</button>\n</div>\n<progress-bar ng-if='$ctrl.flags.mobileEditor'>;</progress-bar>\n")}]);try{angular.module("siteGeneratorStaticsPreload")}catch(e){angular.module("siteGeneratorStaticsPreload",[])}angular.module("siteGeneratorStaticsPreload").run(["$templateCache",function(a){a.put("views/preview/solution-overlay.html","<empty-page adjust-to-scale base-height='{{$solutionOverlay.dropTargetHeight}}' base-width='{{$solutionOverlay.dropTargetWidth}}' ng-if='$solutionOverlay.isInDesktopEditMode &amp;&amp; $solutionOverlay.isBodySitePart() &amp;&amp; $solutionOverlay.overlayManager.isCurrentPageEmpty'></empty-page>\n<list-span-overlay class='list-span-overlay-wrapper' list-span='listSpan' ng-click='$solutionOverlay.isAddMode() &amp;&amp; $solutionOverlay.handleSolutionOverlayClick(listSpan)' ng-if='$solutionOverlay.renderData' ng-mouseenter='$solutionOverlay.handleSolutionOverlayMouseEnter(listSpan)' ng-repeat='listSpan in $solutionOverlay.renderData.listSpans track by listSpan.node.getId()'></list-span-overlay>\n<drop-target-overlay adjust-to-scale='' base-height='{{$solutionOverlay.dropTargetHeight}}' base-width='{{$solutionOverlay.dropTargetWidth}}' class='drop-target-overlay-wrapper' ng-if='$solutionOverlay.isBodySitePart()' ng-show='$solutionOverlay.shouldShowDropStrip()'></drop-target-overlay>\n")}]);try{angular.module("siteGeneratorStaticsPreload")}catch(e){angular.module("siteGeneratorStaticsPreload",[])}angular.module("siteGeneratorStaticsPreload").run(["$templateCache",function(a){a.put("views/preview/drop-target-overlay.html","<ul class='wrapper'>\n<li class='inner-block'>\n<span>{{ $ctrl.dragText }}</span>\n</li>\n</ul>\n")}]);try{angular.module("siteGeneratorStaticsPreload")}catch(e){angular.module("siteGeneratorStaticsPreload",[])}angular.module("siteGeneratorStaticsPreload").run(["$templateCache",function(a){a.put("views/preview/empty-page.html","<div class='drop-area' data-hook='empty-page-overlay' dnd-drop='$ctrl.onDrop()' dnd-list='[]' ng-click='$ctrl.onAdd()'>\n<div class='empty-indicator'>\n<button cc-tooltip-position='top' cc-tooltip='overlay_plus' class='stage-btn insert cc-icon-add-large' ng-show='!$ctrl.isOnAddState()'></button>\n<div class='title' translate='{{$ctrl.isOnAddState()? &#39;builder.empty-page-title-active&#39;: &#39;builder.empty-page-title&#39;}}'></div>\n</div>\n</div>\n")}]);try{angular.module("siteGeneratorStaticsPreload")}catch(e){angular.module("siteGeneratorStaticsPreload",[])}angular.module("siteGeneratorStaticsPreload").run(["$templateCache",function(a){a.put("views/list-span-overlay.html","<div class='list-span-overlay' data-hook='focus-list-span' ng-class='{&#39;span-focused&#39;: !$ctrl.flags.onStageIndications &amp;&amp; $ctrl.isFocused(), &#39;tpa-span&#39;: $ctrl.isTpa(), &#39;has-presets&#39;: $ctrl.hasPresets()}' ng-click='$ctrl.handleListSpanOverlayClick()' ng-dblclick='$ctrl.handleListSpanOverlayDblClick()'>\n<div class='layout-group-overlay' data-hook='layout-group-overlay' ng-if='$ctrl.isShowSegmentOverlay()' ng-repeat='lg in $ctrl.listSpan.groups'>\n<segment-overlay columns='lg.renderedColumns' ng-repeat='segment in lg.segments' segment='segment'></segment-overlay>\n</div>\n</div>\n<button cc-tooltip-position='top' cc-tooltip='overlay_plus' class='stage-btn insert insert-above cc-icon-add-large' ng-click='$ctrl.onAdd(false); $event.stopPropagation();' ng-if='$ctrl.canAddSection &amp;&amp; $ctrl.listSpan.sitePart !== &#39;header&#39;'></button>\n<button cc-tooltip-position='top' cc-tooltip='overlay_plus' class='stage-btn insert insert-below cc-icon-add-large' ng-click='$ctrl.onAdd(true); $event.stopPropagation();' ng-if='$ctrl.canAddSection &amp;&amp; $ctrl.listSpan.sitePart !== &#39;footer&#39;'></button>\n<div class='list-span-overlay-debug-info' ng-click='$ctrl.printPrettyAlgoInfo()' ng-if=':: $ctrl.flags.prettyAlgo &amp;&amp; $ctrl.flags.debug'>\n<p>\nScore: {{:: $ctrl.getPrettyAlgoScore()}}\n</p>\n<p>\nRules:\n<ul>\n<li ng-repeat='ruleName in ::$ctrl.prettyAlgoGetRuleNames()'>\n{{:: ruleName}}\n</li>\n</ul>\n</p>\n</div>\n<div class='list-span-overlay-debug-info list-span-overlay-opacity-debug' ng-click='$ctrl.printBgOpacityData()' ng-if='$ctrl.flags.sectionBackground &amp;&amp; $ctrl.flags.debug'>Opacity</div>\n")}]);try{angular.module("siteGeneratorStaticsPreload")}catch(e){angular.module("siteGeneratorStaticsPreload",[])}angular.module("siteGeneratorStaticsPreload").run(["$templateCache",function(a){a.put("views/builder/add-section.html","<div class='builder-left-panel'>\n<div class='add-section'>\n<p16-panel-header label='{{($ctrl.pageMode ? &#39;builder.add-page&#39; : &#39;builder.add-section&#39;) | translate }}' on-close='$ctrl.back()' on-help='$ctrl.onHelp()' show-close-button='true' show-help-button='true'></p16-panel-header>\n<div class='content'>\n<div class='section-list-wrap'>\n<div cc-scrollbar class='section-list'>\n<div class='remaining-suggested-sections' ng-show='false'>{{$ctrl.remainingSuggestedSections}}</div>\n<span class='section-subtitle' ng-if='$ctrl.recommendedSections &amp;&amp; $ctrl.recommendedSections.length'>{{::'builder.add-section-recommended' | translate }}</span>\n<div class='section-button-container tour-element-recommended-section' data-hook='section' ng-class='{selected: $ctrl.isSectionSelected(section)}' ng-repeat='section in $ctrl.recommendedSections track by section.id'>\n<div class='section-button' data-hook='section-button' ng-class='{&#39;already-used&#39;: $ctrl.isOnPage(section)}' ng-click='$ctrl.setSelectedSection(section, true)'>\n<span>{{$ctrl.pageMode ? section.pageTitle : section.id}}</span>\n<div class='already-used-check cc-icon-check'></div>\n</div>\n</div>\n<span class='section-subtitle' ng-if='$ctrl.otherSections &amp;&amp; $ctrl.otherSections.length'>{{::'builder.add-section-others' | translate }}</span>\n<div class='section-button-container' data-hook='section' ng-class='{selected: $ctrl.isSectionSelected(section)}' ng-repeat='section in $ctrl.otherSections track by section.id'>\n<div class='section-button' data-hook='section-button' ng-class='{&#39;already-used&#39;: $ctrl.isOnPage(section)}' ng-click='$ctrl.setSelectedSection(section, true)'>\n<span>{{$ctrl.pageMode ? section.pageTitle : section.id}}</span>\n<div class='already-used-check cc-icon-check'></div>\n</div>\n</div>\n<span class='more-sections' ng-click='$ctrl.toggleMoreSections()' ng-if='!$ctrl.showMoreSections &amp;&amp; $ctrl.moreSections &amp;&amp; $ctrl.moreSections.length'>\n{{::'builder.add-section-see-all' | translate }}\n<div class='cc-icon-arrow-down'></div>\n</span>\n<div class='section-button-container' data-hook='section' ng-class='{selected: $ctrl.isSectionSelected(section)}' ng-if='$ctrl.showMoreSections' ng-repeat='section in $ctrl.moreSections track by section.id'>\n<div class='section-button' data-hook='section-button' ng-class='{&#39;already-used&#39;: $ctrl.isOnPage(section)}' ng-click='$ctrl.setSelectedSection(section, true)'>\n<span>{{$ctrl.pageMode ? section.pageTitle : section.id}}</span>\n<div class='already-used-check cc-icon-check'></div>\n</div>\n</div>\n<span class='more-sections less-sections' ng-click='$ctrl.toggleMoreSections()' ng-if='$ctrl.showMoreSections &amp;&amp; $ctrl.moreSections &amp;&amp; $ctrl.moreSections.length'>\n{{::'builder.add-section-see-less' | translate }}\n<div class='cc-icon-arrow-up'></div>\n</span>\n</div>\n</div>\n<div class='preview-list-wrap'>\n<preview-list data-page-mode='$ctrl.pageMode' data-page-name='$ctrl.pageName' draggable='!$ctrl.pageMode' intent='$ctrl.addSectionIntent' ng-if='$ctrl.nodes' nodes='$ctrl.nodes' reload-after-add='$ctrl.reloadAfterAddingSection($nodeId)' selected-section='$ctrl.selectedSection' strategy='$ctrl.addSectionStrategy'></preview-list>\n</div>\n</div>\n</div>\n</div>\n")}]);try{angular.module("siteGeneratorStaticsPreload")}catch(e){angular.module("siteGeneratorStaticsPreload",[])}angular.module("siteGeneratorStaticsPreload").run(["$templateCache",function(a){a.put("views/builder/preview-list.html","<div class='preview-list-container' is-done-loading='{{$ctrl.isDoneLoading}}'>\n<div cc-scrollbar class='preview-list' data-hook='preview-list-container'>\n<div class='page-blank' ng-if='$ctrl.pageMode &amp;&amp; $ctrl.showBlankPage'>\n<div class='browser-toolbar'></div>\n<div class='page-blank-label'>\n{{:: 'general.blank' | translate }}\n</div>\n<div class='browser-bottom'></div>\n<div class='page-blank-overlay' ng-click='$ctrl.createBlankPage()'>\n<div class='page-blank-overlay-title'>{{::$ctrl.overlayTitle}}</div>\n</div>\n</div>\n<div class='preview-section sections faded' cn-canceled='$ctrl.onCanceled(event)' cn-disable-if='!$ctrl.draggable || $ctrl.pageMode' cn-dragend='$ctrl.onDragEnd(event)' cn-draggable='preview' cn-dragstart='$ctrl.onDragStart(event, draggable)' cn-drop='$ctrl.onDrop(event, draggable)' data-hook='preset-preview' ghost-selector='&gt; [data-hook=&#39;draggable-preview&#39;]' ng-class='{selected: $ctrl.isSelected(preview), &#39;mobile-width&#39;: $ctrl.applicationState.isInMobileEditMode()}' ng-if='!$ctrl.showBlankPage' ng-repeat='preview in $ctrl.previews' preset-preview='preview' section-ready>\n<div class='preview-section-container'>\n<div class='preview-section-loading' ng-class='{selected: $ctrl.isSelected(preview), &#39;smaller-border&#39;: $ctrl.isSelected(preview) &amp;&amp; $ctrl.applicationState.isInMobileEditMode(), &#39;smaller-dimensions&#39;: $ctrl.applicationState.isInMobileEditMode(), &#39;page-mode&#39;: $ctrl.pageMode}' ng-mouseenter='$ctrl.onHoverPreview($event, true)' ng-mouseleave='$ctrl.onHoverPreview($event, false)'>\n<div class='preview-linked-message' ng-if='preview.sourcePageName'>{{:: 'builder.preview-linked-page-content' | translate }} {{preview.sourcePageName}}</div>\n<div class='preview-linked-message' ng-if='$ctrl.flags.useColumnsDebug &amp;&amp; $ctrl.isPresetResponsive(preview)'>Responsive</div>\n<div class='preview-flag-message' ng-if='$ctrl.flags.mergedHeader &amp;&amp; preview.flags[0] === &#39;fix&#39;'>{{:: 'builder.preview-flags.fix' | translate }}</div>\n<div class='preview-linked-message-bottom-left' ng-click='$ctrl.printBgOpacityData(preview)' ng-if='$ctrl.flags.sectionBackground &amp;&amp; $ctrl.flags.debug'>Opacity</div>\n<div class='preview-linked-message' ng-if='preview.sourceName &amp;&amp; !preview.sourcePageName'>{{:: 'builder.preview-linked-content' | translate }} {{preview.sourceName}}</div>\n<div class='preview-linked-message' ng-click='$ctrl.printPrettyAlgoInfo(preview)' ng-if=':: $ctrl.flags.prettyAlgo &amp;&amp; $ctrl.flags.debug'>\n<p>\n{{:: preview.prettyAlgo.score}}\n</p>\n<p ng-repeat='ruleName in ::$ctrl.prettyAlgoGetRuleNames(preview)'>\n{{:: ruleName}}\n</p>\n</div>\n<div class='browser-toolbar' ng-if='$ctrl.pageMode'></div>\n<div class='preview-content'>\n<div class='layout-preset-preview' data-hook='draggable-preview' layout-preset-preview ng-if='!preview.isTpa &amp;&amp; !$ctrl.flags.mergedHeader' on-before-render='$ctrl.onPresetPreviewBeforeRender(preview)' preset-preview='preview' preview-position='$ctrl.overlayManager.dropTargetId' scale='$ctrl.scale'></div>\n<preset-preview data-hook='draggable-preview' flags='preview.flags' ng-if='!preview.isTpa &amp;&amp; $ctrl.flags.mergedHeader' on-before-render='$ctrl.onPresetPreviewBeforeRender(preview)' preset-preview='$ctrl.wrapWithSiblingsIfNeeded(preview)' preview-position='$ctrl.overlayManager.dropTargetId' scale='$ctrl.scale'></preset-preview>\n<tpa-preview data-hook='draggable-preview' ng-if='preview.isTpa' tpa-preset='preview.preset'></tpa-preview>\n</div>\n<div class='browser-bottom' ng-if='$ctrl.pageMode'></div>\n<div class='preview-overlay' data-hook='preview-overlay' ng-click='$ctrl.selectPreset(preview, $event)' ng-if='!$ctrl.isSelected(preview)' preset-type='{{preview.node.contentElementType + &#39; &#39; + preview.node.alias}}'>\n<div class='preview-overlay-title'>{{::$ctrl.overlayTitle}}</div>\n<div class='info' ng-click='$event.stopPropagation();$ctrl.debugInfo(preview);' ng-if=':: $ctrl.isDebugMode()'></div>\n</div>\n<span data-hook='selected-overlay' ng-if='$ctrl.isSelected(preview)'>\n<div class='preview-overlay-selected'>\n<cc-svg-icon data-hook='selected-icon' icon='coloration:selected' is-corner-icon='true'></cc-svg-icon>\n</div>\n</span>\n</div>\n</div>\n<div class='customize-design-container' ng-class='{&#39;transition-delay&#39;: $ctrl.unsettingPreviewIsInView, &#39;selected&#39;: $ctrl.isSelected(preview)}' ng-if='::$ctrl.shouldShowCustomizeDesignDropdown(preview)' ng-show='$ctrl.isSelected(preview)'>\n<div class='customize-design' ng-if='$ctrl.isSelected(preview)'>\n<div class='customize-design-button p9-primary -small' data-hook='customize-design-button' ng-if='!$ctrl.flags.popover' ng-mouseenter='$ctrl.showSectionDesignMenu()' ng-mouseleave='$ctrl.hideSectionDesignMenu()'>\n{{::'builder.section-design.customize-design' | translate }}\n<div class='cc-icon-arrow-down'></div>\n<section-design-menu-deprecated item='preview' ng-if='!$ctrl.flags.mergedHeader &amp;&amp; $ctrl.isSelected(preview) &amp;&amp; $ctrl.isMenuVisible' on-option-clicked='$ctrl.hideSectionDesignMenu()'></section-design-menu-deprecated>\n<section-design-menu item='preview' ng-if='$ctrl.flags.mergedHeader &amp;&amp; $ctrl.isSelected(preview) &amp;&amp; $ctrl.isMenuVisible' on-option-clicked='$ctrl.hideSectionDesignMenu()'></section-design-menu>\n</div>\n<cc-popover ng-if='$ctrl.isSelected(preview) &amp;&amp; $ctrl.flags.popover'>\n<cc-popover-trigger>\n<div class='customize-design-button p9-primary -small' data-hook='customize-design-button'>\n{{::'builder.section-design.customize-design' | translate }}\n<div class='cc-icon-arrow-down'></div>\n</div>\n</cc-popover-trigger>\n<cc-popover-content>\n<section-design-menu-deprecated item='preview' ng-if='::!$ctrl.flags.mergedHeader'></section-design-menu-deprecated>\n<section-design-menu item='preview' ng-if='::$ctrl.flags.mergedHeader'></section-design-menu>\n</cc-popover-content>\n</cc-popover>\n<p17-divider></p17-divider>\n</div>\n</div>\n</div>\n<div class='preview-section-placeholder preview-section' ng-class='{&#39;mobile-width&#39;: $ctrl.applicationState.isInMobileEditMode()}'>\n<div class='placeholders faded stagger darkest-stage-background placeholder-opacity faded' ng-class='$ctrl.getPlaceholderClassName()' ng-if=':: $ctrl.isShowPlaceholdersInPresets' ng-repeat='placeholder in $ctrl.placeholders' ng-style=':: $ctrl.getPlaceholderBackgroundColor()'></div>\n</div>\n</div>\n</div>\n")}]);try{angular.module("siteGeneratorStaticsPreload")}catch(e){angular.module("siteGeneratorStaticsPreload",[])}angular.module("siteGeneratorStaticsPreload").run(["$templateCache",function(a){a.put("views/design/design-panel.html","<cc-panel-frame data-hook='panel-frame' label='{{:: &#39;builder.design-panel.title&#39; | translate }}' on-close='$ctrl.closeDesignPanel()' on-help='$ctrl.openDesignPanelHelp()' show-close-button='true' show-help-button='true'>\n<cc-panel-fixed-top>\n<c11-paragraph html=':: &#39;builder.design_description&#39; | translate'></c11-paragraph>\n</cc-panel-fixed-top>\n<cc-panel-body>\n<div class='kits'>\n<div class='kit-option clickable' data-hook='kit' ng-class='{&#39;transition-delay&#39;: $ctrl.unsettingKitIsInView, selected: $ctrl.isActiveKit(kit)}' ng-click='!$ctrl.isActiveKit(kit) &amp;&amp; $ctrl.setKit(kit, $index)' ng-init='$last &amp;&amp; $ctrl.scrollToSelectedKit(&#39;immediate&#39;)' ng-repeat='kit in ::$ctrl.colorThemeKits' ng-style='{backgroundColor: $ctrl.getKitDisplayColor(kit)}'>\n<kit-thumbnail kit='kit' ng-class='{selected: $ctrl.isActiveKit(kit)}'></kit-thumbnail>\n<div class='customize-design' ng-if='$ctrl.isActiveKit(kit)'>\n<button adi-automation='customize-button' class='customize-design-button p9-primary -small' data-hook='customize-button' ng-click='!$ctrl.flags.siteDesignKitMenu &amp;&amp; $ctrl.customizeKit()' ng-if='!$ctrl.flags.popover' ng-mouseenter='$ctrl.flags.siteDesignKitMenu &amp;&amp; $ctrl.showSiteDesignMenu()' ng-mouseleave='$ctrl.flags.siteDesignKitMenu &amp;&amp; $ctrl.hideSiteDesignMenu()'>\n{{::'design.kit.customize-design'|translate}}\n<div class='cc-icon-arrow-down' ng-if='$ctrl.flags.siteDesignKitMenu'></div>\n<site-design-menu data-hook='site-design-menu' kit='kit' ng-if='$ctrl.flags.siteDesignKitMenu &amp;&amp; $ctrl.isActiveKit(kit) &amp;&amp; $ctrl.isMenuVisible' on-option-clicked='$ctrl.hideSiteDesignMenu()'></site-design-menu>\n</button>\n<cc-popover ng-if='$ctrl.flags.popover'>\n<cc-popover-trigger>\n<button adi-automation='customize-button' class='customize-design-button p9-primary -small' data-hook='customize-button' ng-click='!$ctrl.flags.siteDesignKitMenu &amp;&amp; $ctrl.customizeKit()' ng-mouseenter='$ctrl.flags.siteDesignKitMenu &amp;&amp; $ctrl.showSiteDesignMenu()' ng-mouseleave='$ctrl.flags.siteDesignKitMenu &amp;&amp; $ctrl.hideSiteDesignMenu()'>\n{{::'design.kit.customize-design'|translate}}\n<div class='cc-icon-arrow-down' ng-if='$ctrl.flags.siteDesignKitMenu'></div>\n</button>\n</cc-popover-trigger>\n<cc-popover-content>\n<site-design-menu data-hook='site-design-menu' kit='kit' ng-if='$ctrl.flags.siteDesignKitMenu &amp;&amp; $ctrl.isActiveKit(kit)' on-option-clicked='$ctrl.hideSiteDesignMenu()'></site-design-menu>\n</cc-popover-content>\n</cc-popover>\n<p17-divider></p17-divider>\n</div>\n</div>\n</div>\n</cc-panel-body>\n</cc-panel-frame>\n")}]);try{angular.module("siteGeneratorStaticsPreload")}catch(e){angular.module("siteGeneratorStaticsPreload",[])}angular.module("siteGeneratorStaticsPreload").run(["$templateCache",function(a){a.put("views/design/design-panel-kit.html","<cc-panel-frame class='-with-p16a-header' data-hook='cc-panel-frame' label='{{$ctrl.getKitName()}}' on-close='$ctrl.close()' on-help='$ctrl.onHelp()' on-reset='$ctrl.onReset()' on-return='$ctrl.backToDesign()' show-close-button='true' show-help-button='true' show-reset-button='$ctrl.kitHasOverrides()' show-return-button='true'>\n<div class='design-panel-content-new' ng-if='$ctrl.isLoaded'>\n<div class='design-subpanel color-palette-panel'>\n<div class='p8-label'>{{:: 'design.coloration.palette.title' | translate }}</div>\n<div class='color-palette'>\n<kit-palette data-hook='color-palette' kit-colors='$ctrl.kitColors' ng-click='$ctrl.openNewColorationPanel()'></kit-palette>\n<button cc-tooltip='design_coloration_palette_edit' class='edit-palette-icon-button p9a-secondary -icon-only' data-hook='color-palette-edit-button-six-colors' ng-click='$ctrl.openNewColorationPanel()' ng-if='$ctrl.is6ColorsPalette()'>\n<i class='cc-icon-edit'></i>\n</button>\n<button cc-tooltip='design_coloration_palette_edit' class='p9a-secondary -controlbtn' data-hook='color-palette-edit-button' ng-click='$ctrl.openNewColorationPanel()' ng-if='!$ctrl.is6ColorsPalette()'>\n{{:: 'design.coloration.palette.edit' | translate }}\n</button>\n</div>\n</div>\n<p17-divider></p17-divider>\n<div class='design-subpanel'>\n<div class='p8-label'>{{:: 'design.fonts.title' | translate }}</div>\n<div class='font-container'>\n<font-thumbnail font-data='$ctrl.selectedFontData' has-background='false' ng-click='$ctrl.goToFontsPanel()'></font-thumbnail>\n<button cc-tooltip='design_change_font' class='p9a-secondary -controlbtn font-edit-button' ng-click='$ctrl.goToFontsPanel()'>{{:: 'design.kit.font.edit' | translate }}</button>\n</div>\n</div>\n<p17-divider></p17-divider>\n<div class='design-subpanel animations-container'>\n<div class='p8-label'>{{:: 'design.animations.title' | translate }}</div>\n<div animation-name='{{$ctrl.getActiveAnimation()}}' class='animations-thumbnail -with-button' data-hook='animations-control'>\n<div class='icon-container' ng-click='$ctrl.goToAnimationPanel()'>\n<c20-graphic-radio icon='&#39;animation:&#39; + $ctrl.getActiveAnimation()' label='icon'></c20-graphic-radio>\n<span class='animation-label' data-hook='animation-label'>\n{{$ctrl.getActiveAnimation()}}\n</span>\n</div>\n<button cc-tooltip='design_change_animation' class='p9a-secondary -controlbtn' data-hook='animation-edit-button' ng-click='$ctrl.goToAnimationPanel()'>\n{{:: 'design.coloration.palette.edit' | translate }}\n</button>\n</div>\n</div>\n</div>\n</cc-panel-frame>\n")}]);try{angular.module("siteGeneratorStaticsPreload")}catch(e){angular.module("siteGeneratorStaticsPreload",[])}angular.module("siteGeneratorStaticsPreload").run(["$templateCache",function(a){a.put("views/design/coloration-panel.html","<coloration-panel-overlay loader-text='{{:: &#39;design.coloration.basic.loader.text&#39; | translate}}' show-backdrop='$ctrl.showBackdrop' show-loader='$ctrl.showLoader'></coloration-panel-overlay>\n<cc-panel-frame class='-with-p16a-header' data-hook='coloration-panel' help-tooltip='design_coloration_help' label='{{:: &#39;design.coloration.basic.panelheader&#39; | translate}}' ng-if='$ctrl.isReadyToBeDisplayed' on-close='$ctrl.closePanel()' on-help='$ctrl.openHelp()' on-return='$ctrl.backToDesignKit()' show-close-button='true' show-return-button='true' show-scroll='false'>\n<cc-panel-fixed-top>\n<div class='coloration-panel-content'>\n<div class='coloration-panel-your-palette' data-hook='coloration-panel-your-palette'>\n<div class='main-color-label p8-label -centered'>{{:: 'design.coloration.basic.palettetitle' | translate }}</div>\n<p21-color-tag color='{{$ctrl.mainColor}}' data-main-color icon='edit' ng-class='{&#39;loading&#39;: $ctrl.showLoader}' on-click='$ctrl.changeMainColor(color)' show-icon='true' size='lg' tooltip='design_coloration_main_color'></p21-color-tag>\n</div>\n<p17-divider></p17-divider>\n<div class='coloration-panel-light-dark-mode'>\n<coloration-mode-selector></coloration-mode-selector>\n</div>\n<div class='palettes-top-spacer'></div>\n<div class='logo-palette' data-hook='logo-palette-section' ng-if='$ctrl.isLogoPaletteAvailable()'>\n<p6-control-header help-tooltip='design_coloration_logo_palette' hide-toggle-button='true' label=':: &#39;design.coloration.basic.logoPalette.title&#39; | translate' show-help-button='true'></p6-control-header>\n<div class='palettes-header-spacer above-single-palette'></div>\n<kit-palette data-hook='logo-palette' is-selectable='true' is-selected='$ctrl.isLogoPaletteSelected()' kit-colors='$ctrl.getLogoColors()' ng-class='{&#39;-selected&#39;: $ctrl.isLogoPaletteSelected()}' ng-click='$ctrl.selectLogoPalette()'></kit-palette>\n<div class='palettes-top-spacer'></div>\n</div>\n<p6-control-header help-tooltip='design_coloration_palette_list' hide-toggle-button='true' label=':: &#39;design.coloration.basic.palettes.title&#39; | translate' show-help-button='true'></p6-control-header>\n<div class='palettes-header-spacer' ng-show='!$ctrl.showLoader'></div>\n</div>\n</cc-panel-fixed-top>\n<cc-panel-body>\n<div class='coloration-panel-content'>\n<div class='palettes-header-spacer' ng-show='$ctrl.showLoader'></div>\n<palette-list on-animation-end='$ctrl.onPaletteListGenerated()'></palette-list>\n</div>\n</cc-panel-body>\n<cc-panel-footer>\n<button class='p9a-secondary -inverse advanced-editing-button' ng-click='$ctrl.goToAdvancedPaletteEditing()'>\n{{:: 'design.coloration.basic.advanced' | translate}}\n</button>\n</cc-panel-footer>\n</cc-panel-frame>\n")}]);try{angular.module("siteGeneratorStaticsPreload")}catch(e){angular.module("siteGeneratorStaticsPreload",[])}angular.module("siteGeneratorStaticsPreload").run(["$templateCache",function(a){a.put("views/design/coloration-panel-overlay.html","<div class='overlay-backdrop' data-hook='backdrop' ng-class='{&#39;loading&#39;: $ctrl.showLoader}' ng-show='$ctrl.showBackdrop'>\n<div class='coloration-panel-loader' data-hook='loader' ng-show='$ctrl.showLoader'>\n<div class='spinner-icon'>\n<cc-svg-icon icon='coloration:replace'></cc-svg-icon>\n</div>\n<div class='text' ng-bind-html='$ctrl.loaderText'></div>\n</div>\n</div>\n")}]);try{angular.module("siteGeneratorStaticsPreload")}catch(e){angular.module("siteGeneratorStaticsPreload",[])}angular.module("siteGeneratorStaticsPreload").run(["$templateCache",function(a){a.put("views/design/animation-panel.html","<cc-panel-frame class='-with-p16a-header animation-panel' label='{{ ::&#39;design.animations.panel-title&#39; | translate }}' on-close='$ctrl.closePanel()' on-help='$ctrl.onHelp()' on-return='$ctrl.backToDesignKit()' show-close-button='true' show-help-button='true' show-return-button='true'>\n<cc-panel-fixed-top></cc-panel-fixed-top>\n<cc-panel-body>\n<div class='animation-panel-content'>\n<p6-control-header class='animation-panel-label' help-tooltip='animation_animation_type_help' hide-toggle-button='true' label=':: &#39;design.animations.component-animation.title&#39; | translate' show-help-button='true'></p6-control-header>\n<div class='cc-primitives-in-row flex-wrap animation-thumbnails' data-hook='animation-thumbnails'>\n<c20-graphic-radio icon='&#39;animation:&#39; + pattern.iconClass' is-selected='pattern == $ctrl.activeAnimationPattern' label='pattern.label' ng-mouseenter='$ctrl.previewAnimationPattern(pattern)' ng-repeat='pattern in $ctrl.animationPatterns' on-click='$ctrl.setAnimationPattern(pattern)' selected-icon='&#39;animation:&#39; + pattern.iconClass + &#39;Selected&#39;'></c20-graphic-radio>\n</div>\n<section-override-warning data-hook='animation-section-override' on-override-sections='$ctrl.overrideAnimationPatternOnSections()' override-message=':: &#39;builder.section-override-warning.animations&#39; | translate' show='$ctrl.askOverrideAnimationPatternSections'></section-override-warning>\n<p17-divider></p17-divider>\n<p6-control-header class='animation-panel-label -separated-label' help-tooltip='animation_scroll_effects_help' hide-toggle-button='true' label=':: &#39;design.animations.scroll-type.title&#39; | translate' show-help-button='true'></p6-control-header>\n<p3-dropdown-list class='transition-dropdown-list' container-class='scroll-type-dropdown-container' data-hook='scroll-type-dropdown' items='$ctrl.scrollTypeOptions' label-key='label' on-selection-change='$ctrl.setScrollType(item.value)' track-by-key='value' value='$ctrl.activeScrollType'></p3-dropdown-list>\n<section-override-warning data-hook='scroll-type-section-override' divider='true' on-override-sections='$ctrl.overrideScrollTypeOnSections()' override-message=':: &#39;builder.section-override-warning.scroll-type&#39; | translate' show='$ctrl.askOverrideScrollTypeSections'></section-override-warning>\n<p6-control-header class='animation-panel-label -separated-label' help-tooltip='animation_page_transition_help' hide-toggle-button='true' label=':: &#39;design.animations.page-transition.title&#39; | translate' show-help-button='true'></p6-control-header>\n<p3-dropdown-list class='transition-dropdown-list' container-class='page-transition-dropdown-container' data-hook='page-transition-dropdown' items='$ctrl.pagesTransitionNames' on-selection-change='$ctrl.setPagesTransition(item)' value='$ctrl.activePagesTransition'></p3-dropdown-list>\n</div>\n</cc-panel-body>\n</cc-panel-frame>\n")}]);try{angular.module("siteGeneratorStaticsPreload")}catch(e){angular.module("siteGeneratorStaticsPreload",[])}angular.module("siteGeneratorStaticsPreload").run(["$templateCache",function(a){a.put("views/design/font-panel.html","<cc-panel-frame class='-with-p16a-header font-panel' label=' {{ ::&#39;design.fonts.panel-title&#39; | translate }}' on-close='$ctrl.closePanel()' on-help='$ctrl.showHelp()' on-return='$ctrl.backToDesignKit()' show-close-button='true' show-help-button='true' show-return-button='true'>\n<cc-panel-fixed-top>\n<c11-paragraph html=':: &#39;design.fonts.site-tip&#39; | translate'></c11-paragraph>\n</cc-panel-fixed-top>\n<cc-panel-body>\n<div class='font-panel-content' ng-if='$ctrl.ready'>\n<div class='font-item' data-hook='font-item' ng-init='$last &amp;&amp; $ctrl.scrollToSelectedFont(&#39;immediate&#39;)' ng-repeat='kit in $ctrl.fontOptions'>\n<font-thumbnail font-data='kit' font-scale='$ctrl.getFontScale(kit)' is-selectable='!$ctrl.isSelectedKit(kit)' is-selected='$ctrl.isSelectedKit(kit)' on-click='$ctrl.setFontKit(kit, $index)'></font-thumbnail>\n<div class='selected-section' ng-if='$ctrl.isSelectedKit(kit)'>\n<div class='font-panel-set-size-container'>\n<font-size-slider on-set-value='$ctrl.setFontSize(value)' value='$ctrl.selectedFontSize'></font-size-slider>\n</div>\n<section-override-warning data-hook='font-size-section-override' on-override-sections='$ctrl.overrideFontSizeOnSections()' override-message=':: &#39;builder.section-override-warning.font-size&#39; | translate' show='$ctrl.askOverrideFontSizeSections'></section-override-warning>\n<p17-divider></p17-divider>\n</div>\n</div>\n</div>\n</cc-panel-body>\n</cc-panel-frame>\n")}]);try{angular.module("siteGeneratorStaticsPreload")}catch(e){angular.module("siteGeneratorStaticsPreload",[])}angular.module("siteGeneratorStaticsPreload").run(["$templateCache",function(a){a.put("views/design/section-animation-panel.html","<cc-panel-frame class='-with-p16a-header animation-panel' label='{{ ::&#39;design.animations.section-panel-title&#39; | translate }}' on-close='$ctrl.closePanel()' on-help='$ctrl.showSectionAnimationHelp()' on-return='$ctrl.back()' show-close-button='true' show-help-button='true' show-return-button='true'>\n<cc-panel-fixed-top></cc-panel-fixed-top>\n<cc-panel-body>\n<div class='animation-panel-content'>\n<c11-paragraph class='c11-paragraph section-explanation' compile=':: &#39;design.animations.section-tip&#39; | translate' data-hook='title-paragraph'></c11-paragraph>\n<p6-control-header class='animation-panel-label' hide-toggle-button='true' label=':: &#39;design.animations.component-animation.title&#39; | translate'></p6-control-header>\n<div class='cc-primitives-in-row flex-wrap animation-thumbnails -section' data-hook='animation-thumbnails'>\n<c20-graphic-radio icon='&#39;animation:&#39; + pattern.iconClass' is-selected='pattern == $ctrl.activeAnimationPattern' label='pattern.label' ng-mouseenter='$ctrl.previewAnimationPattern(pattern)' ng-repeat='pattern in $ctrl.animationPatterns' on-click='$ctrl.setAnimationPattern(pattern)' selected-icon='&#39;animation:&#39; + pattern.iconClass + &#39;Selected&#39;'></c20-graphic-radio>\n</div>\n<div ng-if='$ctrl.scrollTypeChangeable'>\n<p17-divider></p17-divider>\n<p6-control-header class='animation-panel-label -separated-label' hide-toggle-button='true' label=':: &#39;design.animations.scroll-type.title&#39; | translate'></p6-control-header>\n<p3-dropdown-list class='transition-dropdown-list' container-class='scroll-type-dropdown-container' data-hook='scroll-type-dropdown' items='$ctrl.scrollTypeOptions' label-key='label' on-selection-change='$ctrl.setScrollType(item.value)' track-by-key='value' value='$ctrl.activeScrollType'></p3-dropdown-list>\n</div>\n</div>\n</cc-panel-body>\n</cc-panel-frame>\n");
}]);try{angular.module("siteGeneratorStaticsPreload")}catch(e){angular.module("siteGeneratorStaticsPreload",[])}angular.module("siteGeneratorStaticsPreload").run(["$templateCache",function(a){a.put("views/design/section-background-panel.html","<cc-panel-frame adi-automation='{{:: $ctrl.automationAttribute }}' class='-with-p16a-header' label='{{:: $ctrl.label}}' on-close='$ctrl.closePanel()' on-help='$ctrl.onHelp()' on-return='$ctrl.goToPrevState()' scroll-disabled='$ctrl.shouldShowBackdrop' show-close-button='true' show-help-button='true' show-return-button='true'>\n<cc-panel-fixed-top>\n<hidden-background node='$ctrl.sectionBackgroundManager.node()'></hidden-background>\n<div class='c11-paragraph' data-hook='panel-paragraph-text' ng-if='$ctrl.shouldShowParagraph'>\n<span wix-translate-compile='{{:: $ctrl.paragraphTextKey }}'></span>\n</div>\n<div class='c11-paragraph hidden-background-paragraph' data-hook='hidden-background-paragraph' ng-if='$ctrl.shouldShowHiddenParts'>\n<span wix-translate-compile='builder.section-background.hidden-background-p'></span>\n<span class='cc-x-height p9b-text-button -medium list-background' data-hook='goto-list-mode-button' ng-click='$ctrl.goToListModeClick()'>\n{{:: 'builder.section-background.hidden-background-button' | translate}}\n</span>\n</div>\n<div class='show-background-toggle-wrapper' data-hook='show-background-toggle' ng-if='$ctrl.isHeaderMode'>\n<c19-toggle help-tooltip='TOOLTIP' label='{{ &#39;builder.section-background.show-background&#39; | translate }}' on-value-change='$ctrl.onShowBackgroundToggleValueChange(value)' type='c19a' value='$ctrl.showBackground'></c19-toggle>\n</div>\n</cc-panel-fixed-top>\n<cc-panel-body>\n<div class='background-panel' data-hook='background-panel' ng-class='{&#39;show-background-off&#39;: !$ctrl.showBackground}'>\n<div adi-automation='overlay-backdrop' class='overlay-backdrop' ng-class='{&#39;-soft&#39;: $ctrl.shouldShowHiddenParts, &#39;under-selected&#39;: !$ctrl.shouldShowHiddenParts}' ng-if='$ctrl.shouldShowBackdrop'></div>\n<div class='background-items'>\n<div class='category-spacer' ng-if='background.label &amp;&amp; $index &gt; 0' ng-repeat-start='background in $ctrl.backgrounds track by $id(background)'></div>\n<div class='background-item' data-hook='background' ng-class='{&#39;-selected&#39;: background.isSelected, &#39;-with-label&#39;: background.label}' ng-repeat-end>\n<div class='category-label' data-hook='category-label' ng-if='background.label'>\n<p6-control-header help-tooltip='{{:: $ctrl.getCategoryTooltipPrefix(background.label)}}' hide-toggle-button='true' label=':: $ctrl.getCategoryLabelPrefix(background.label) | translate' show-help-button='true'></p6-control-header>\n</div>\n<p25-background-preview data='background.data' is-selected='background.isSelected' on-click='$ctrl.selectBackground(background)' size='&#39;big&#39;'></p25-background-preview>\n<div class='selected-section' ng-if='$ctrl.showSettings(background)'>\n<button class='p9a-secondary -small -with-icon settings-btn' data-hook='edit-settings' ng-click='$ctrl.settingsButtonClick(background)'>\n<cc-svg-icon icon='design:color' ng-if='::$ctrl.getSettingsButtonIcon(background.data.type) === &#39;color&#39;'></cc-svg-icon>\n<div class='cc-icon-settings' ng-if='::$ctrl.getSettingsButtonIcon(background.data.type) === &#39;settings&#39;'></div>\n<span class='text' data-hook='settings-button-text'>{{::$ctrl.getSettingsButtonText(background.data.type) | translate}}</span>\n</button>\n<section-background-settings data-hook='section-background-settings' ng-if='$ctrl.displaySettingsPopup' on-close='$ctrl.backgroundSettingsClose()' type='background.data.type'></section-background-settings>\n<p17-divider></p17-divider>\n</div>\n</div>\n</div>\n</div>\n</cc-panel-body>\n<cc-panel-footer>\n<div class='overlay-backdrop' ng-class='{&#39;-soft&#39;: $ctrl.shouldShowHiddenParts}' ng-if='$ctrl.shouldShowBackdrop'></div>\n<section-background-upload on-click='$ctrl.uploadMedia(mediaType)'></section-background-upload>\n</cc-panel-footer>\n</cc-panel-frame>\n")}]);try{angular.module("siteGeneratorStaticsPreload")}catch(e){angular.module("siteGeneratorStaticsPreload",[])}angular.module("siteGeneratorStaticsPreload").run(["$templateCache",function(a){a.put("views/design/section-background-options/section-background-settings.html","<div class='background-settings p4-action-menu' ng-if='!$ctrl.flags.imagePositionsAsRectangles'>\n<div class='close-button' data-hook='close' ng-click='$ctrl.onClose()'>\n<i class='cc-icon-close-12'></i>\n</div>\n<section-background-settings-image data-hook='image-settings' ng-if='$ctrl.isImage()'></section-background-settings-image>\n</div>\n<div class='background-settings p4-action-menu image-positions' ng-show='$ctrl.flags.imagePositionsAsRectangles'>\n<c26-image-position body='{{:: $ctrl.getHeaderBody()}}' footer-content-text='{{:: $ctrl.getFooterTextForParallax()}}' footer-link='$ctrl.goToPreview()' header-title='{{:: $ctrl.getHeaderTitle()}}' ng-if='$ctrl.isImage()' on-close='$ctrl.onClose()' on-position-clicked='$ctrl.positionClicked({index})' rectangles-count-each-row='3' rectangles-count='9' selected-rectangle='{{ $ctrl.selectedPositionIndex}}' show-footer='$ctrl.shouldShowParallaxParagraph'></c26-image-position>\n</div>\n")}]);try{angular.module("siteGeneratorStaticsPreload")}catch(e){angular.module("siteGeneratorStaticsPreload",[])}angular.module("siteGeneratorStaticsPreload").run(["$templateCache",function(a){a.put("views/design/section-background-options/section-background-settings-image.html","<div class='image-settings'>\n<p6-control-header hide-toggle-button='true' label=':: &#39;builder.section-background.background-settings.image.title&#39; | translate'></p6-control-header>\n<div class='c11-paragraph' data-hook='parallax-paragraph' ng-if='$ctrl.shouldShowParallaxParagraph'>\n<span wix-translate-compile='builder.section-background.background-settings.image.parallax-paragraph'></span>\n</div>\n<div class='cc-primitives-in-row flex-wrap radios' data-hook='animation-thumbnails'>\n<c20-graphic-radio icon='&#39;background-options:&#39; + option.iconClass' is-selected='option.key == $ctrl.activeAligmentOption' label='option.label' ng-repeat='option in $ctrl.options' on-click='$ctrl.setAligmentOption(option)' selected-icon='&#39;background-options:&#39; + option.iconClass + &#39;Selected&#39;'></c20-graphic-radio>\n</div>\n</div>\n")}]);try{angular.module("siteGeneratorStaticsPreload")}catch(e){angular.module("siteGeneratorStaticsPreload",[])}angular.module("siteGeneratorStaticsPreload").run(["$templateCache",function(a){a.put("views/design/section-font-panel.html","<cc-panel-frame class='-with-p16a-header section-font-panel' label='{{ ::$ctrl.panelTitle}}' on-close='$ctrl.closePanel()' on-help='$ctrl.showHelp()' on-return='$ctrl.backToSectionDesign()' show-close-button='true' show-help-button='true' show-return-button='true'>\n<cc-panel-fixed-top>\n<c11-paragraph class='c11-paragraph' compile='$ctrl.panelDescription' data-hook='title-paragraph'></c11-paragraph>\n</cc-panel-fixed-top>\n<cc-panel-body>\n<div class='font-panel-content' ng-if='$ctrl.ready'>\n<font-thumbnail font-data='$ctrl.selectedFont' font-scale='$ctrl.selectedFontSize' is-selectable='false' large-bg='true'></font-thumbnail>\n<div class='font-panel-set-size-container'>\n<font-size-slider on-set-value='$ctrl.setFontSize(value)' value='$ctrl.selectedFontSize'></font-size-slider>\n</div>\n<p17-divider></p17-divider>\n<div data-hook='alignment-toolbar' ng-if='$ctrl.isAlignmentFeature'>\n<p0-spacer size='medium'></p0-spacer>\n<div class='p8-label'>Alignment</div>\n<p0-spacer></p0-spacer>\n<div class='cc-primitives-in-row flex-wrap'>\n<c20-graphic-radio complex='false' icon='&#39;alignment:AlignLeft&#39;' is-selected='$ctrl.isAlignmentSelected(&#39;left&#39;)' label='&#39;Left&#39;' on-click='$ctrl.alignSection(&#39;left&#39;)' small='true'></c20-graphic-radio>\n<p0-spacer is-horizontal='true' size='medium'></p0-spacer>\n<c20-graphic-radio complex='false' icon='&#39;alignment:AlignCenter&#39;' is-selected='$ctrl.isAlignmentSelected(&#39;center&#39;)' label='&#39;Center&#39;' on-click='$ctrl.alignSection(&#39;center&#39;)' small='true'></c20-graphic-radio>\n<p0-spacer is-horizontal='true' size='medium'></p0-spacer>\n<c20-graphic-radio complex='false' icon='&#39;alignment:AlignRight&#39;' is-selected='$ctrl.isAlignmentSelected(&#39;right&#39;)' label='&#39;Right&#39;' on-click='$ctrl.alignSection(&#39;right&#39;)' small='true'></c20-graphic-radio>\n</div>\n</div>\n<div ng-if='$ctrl.isPositionFeature'>\n<div>\n<div>Positions</div>\n<div ng-click='$ctrl.alignSection($index, true)' ng-repeat='button in $ctrl.buttonRows[0] track by $index' ng-style=':: $ctrl.buttonStyle'>{{button}}</div>\n<br>\n<div ng-click='$ctrl.alignSection($index+3, true)' ng-repeat='button in $ctrl.buttonRows[1] track by $index' ng-style=':: $ctrl.buttonStyle'>{{button}}</div>\n<br>\n<div ng-click='$ctrl.alignSection($index+6, true)' ng-repeat='button in $ctrl.buttonRows[2] track by $index' ng-style=':: $ctrl.buttonStyle'>{{button}}</div>\n</div>\n</div>\n</div>\n</cc-panel-body>\n</cc-panel-frame>\n")}]);try{angular.module("siteGeneratorStaticsPreload")}catch(e){angular.module("siteGeneratorStaticsPreload",[])}angular.module("siteGeneratorStaticsPreload").run(["$templateCache",function(a){a.put("views/design/section-design/body-section-design-menu.html","<div class='body-section-design-menu'>\n<cc-menu-item data-hook='background-button' label='{{:: &quot;builder.section-design.menu.background&quot; | translate }}' ng-click='$ctrl.openBackgroundPanel()' ng-if='$ctrl.flags.sectionBackground &amp;&amp; $ctrl.showBackground &amp;&amp; !$ctrl.isListNode' svg-icon='design:background'></cc-menu-item>\n<cc-menu-item data-hook='background-button' label='{{:: &quot;builder.section-design.menu.background&quot; | translate }}' ng-click='$ctrl.openListBackgroundPanel()' ng-if='$ctrl.flags.sectionBackground &amp;&amp; $ctrl.showBackground &amp;&amp; $ctrl.isListNode &amp;&amp; !$ctrl.listBackgroundOptions' svg-icon='design:background'></cc-menu-item>\n<div class='section-list' ng-if='$ctrl.flags.sectionBackground &amp;&amp; $ctrl.showBackground &amp;&amp; $ctrl.listBackgroundOptions'>\n<div class='p4-item just-text'>{{::\"builder.section-design.menu.background\" | translate }}</div>\n<cc-menu-item data-hook='headerbg-button' label='{{:: &quot;builder.section-design.menu.headerbg&quot; | translate }}' ng-click='$ctrl.openHeaderBackgroundPanel()' svg-icon-from-inline='true' svg-icon-hover='design:headerbg_hover' svg-icon='design:headerbg'></cc-menu-item>\n<cc-menu-item data-hook='listbg-button' label='{{:: &quot;builder.section-design.menu.listbg&quot; | translate }}' ng-click='$ctrl.openListBackgroundPanel()' svg-icon-from-inline='true' svg-icon-hover='design:listbg_hover' svg-icon='design:listbg'></cc-menu-item>\n<p17-divider></p17-divider>\n</div>\n<cc-menu-item data-hook='color-button' label='{{::&quot;builder.section-design.menu.color&quot; | translate }}' ng-click='$ctrl.openColorPanel()' ng-if='!$ctrl.isHeader' svg-icon='design:color'></cc-menu-item>\n<cc-menu-item data-hook='font-button' label='{{ ::$ctrl.fontPanelTitle}}' ng-click='$ctrl.openFontPanel()' ng-if='!$ctrl.isHeader' svg-icon='design:font'></cc-menu-item>\n<cc-menu-item data-hook='animations-button' label='{{::&quot;builder.section-design.menu.animations&quot; | translate }}' ng-click='$ctrl.openAnimationPanel()' ng-if='!$ctrl.isHeader' svg-icon='design:animations'></cc-menu-item>\n</div>\n")}]);try{angular.module("siteGeneratorStaticsPreload")}catch(e){angular.module("siteGeneratorStaticsPreload",[])}angular.module("siteGeneratorStaticsPreload").run(["$templateCache",function(a){a.put("views/design/section-design/header-design-menu.html","<div class='header-design-menu' data-hook='header-design-menu'>\n<p6-control-header help-tooltip='design_header_type' hide-toggle-button='true' label=':: &#39;design.header.type.title&#39; | translate' show-help-button='true'></p6-control-header>\n<header-type></header-type>\n<p17-divider></p17-divider>\n<p6-control-header help-tooltip='design_header_bgcolor' hide-toggle-button='true' label=':: &#39;design.header.bgcolor.title&#39; | translate' show-help-button='true'></p6-control-header>\n<header-background></header-background>\n</div>\n")}]);try{angular.module("siteGeneratorStaticsPreload")}catch(e){angular.module("siteGeneratorStaticsPreload",[])}angular.module("siteGeneratorStaticsPreload").run(["$templateCache",function(a){a.put("views/design/section-design/section-design-menu.html","<div aria-describedby='list-item-menu' aria-label='{{ $ctrl.item.label }}' class='section-design-menu' data-hook='section-design-menu' ng-class='{&#39;top&#39;: $ctrl.isAllMenuVisible === false, &#39;notready&#39;: $ctrl.notReady(), &#39;p4-action-menu&#39;: !$ctrl.flags.popover, &#39;header&#39;: $ctrl.isHeader}' role='menu' tabindex='-1'>\n<body-section-design-menu item='::$ctrl.item' ng-if='::!$ctrl.isHeader' on-option-clicked='$ctrl.onOptionClicked()'></body-section-design-menu>\n<header-design-menu item='::$ctrl.item' ng-if='::$ctrl.isHeader'></header-design-menu>\n</div>\n")}]);try{angular.module("siteGeneratorStaticsPreload")}catch(e){angular.module("siteGeneratorStaticsPreload",[])}angular.module("siteGeneratorStaticsPreload").run(["$templateCache",function(a){a.put("views/design/section-design/section-design-menu-deprecated.html","<div aria-describedby='list-item-menu' aria-label='{{ $ctrl.item.label }}' class='section-design-menu' data-hook='section-design-menu' ng-class='{&#39;top&#39;: $ctrl.isAllMenuVisible === false, &#39;notready&#39;: $ctrl.notReady(), &#39;p4-action-menu&#39;: !$ctrl.flags.popover}' role='menu' tabindex='-1'>\n<cc-menu-item data-hook='background-button' label='{{:: &quot;builder.section-design.menu.background&quot; | translate }}' ng-click='$ctrl.openBackgroundPanel()' ng-if='$ctrl.flags.sectionBackground &amp;&amp; $ctrl.showBackground &amp;&amp; !$ctrl.isListNode' svg-icon='design:background'></cc-menu-item>\n<cc-menu-item data-hook='background-button' label='{{:: &quot;builder.section-design.menu.background&quot; | translate }}' ng-click='$ctrl.openListBackgroundPanel()' ng-if='$ctrl.flags.sectionBackground &amp;&amp; $ctrl.showBackground &amp;&amp; $ctrl.isListNode &amp;&amp; !$ctrl.listBackgroundOptions' svg-icon='design:background'></cc-menu-item>\n<div class='section-list' ng-if='$ctrl.flags.sectionBackground &amp;&amp; $ctrl.showBackground &amp;&amp; $ctrl.listBackgroundOptions'>\n<div class='p4-item just-text'>{{::\"builder.section-design.menu.background\" | translate }}</div>\n<cc-menu-item data-hook='headerbg-button' label='{{:: &quot;builder.section-design.menu.headerbg&quot; | translate }}' ng-click='$ctrl.openHeaderBackgroundPanel()' svg-icon-from-inline='true' svg-icon-hover='design:headerbg_hover' svg-icon='design:headerbg'></cc-menu-item>\n<cc-menu-item data-hook='listbg-button' label='{{:: &quot;builder.section-design.menu.listbg&quot; | translate }}' ng-click='$ctrl.openListBackgroundPanel()' svg-icon-from-inline='true' svg-icon-hover='design:listbg_hover' svg-icon='design:listbg'></cc-menu-item>\n<p17-divider></p17-divider>\n</div>\n<cc-menu-item data-hook='color-button' label='{{::&quot;builder.section-design.menu.color&quot; | translate }}' ng-click='$ctrl.openColorPanel()' ng-if='!$ctrl.isHeader' svg-icon='design:color'></cc-menu-item>\n<cc-menu-item data-hook='font-button' label='{{ ::$ctrl.fontPanelTitle}}' ng-click='$ctrl.openFontPanel()' ng-if='!$ctrl.isHeader' svg-icon='design:font'></cc-menu-item>\n<cc-menu-item data-hook='animations-button' label='{{::&quot;builder.section-design.menu.animations&quot; | translate }}' ng-click='$ctrl.openAnimationPanel()' ng-if='!$ctrl.isHeader' svg-icon='design:animations'></cc-menu-item>\n</div>\n")}]);try{angular.module("siteGeneratorStaticsPreload")}catch(e){angular.module("siteGeneratorStaticsPreload",[])}angular.module("siteGeneratorStaticsPreload").run(["$templateCache",function(a){a.put("views/design/header-design/header-background.html","<div class='header-background' data-hook='header-background' ng-if='$ctrl.shouldShowHeaderBackground'>\n<palette-color-picker colors-size='xs' colors=':: $ctrl.colors' on-color-selected='$ctrl.onColorSelected(selection)' selected-color=':: $ctrl.current'></palette-color-picker>\n</div>\n")}]);try{angular.module("siteGeneratorStaticsPreload")}catch(e){angular.module("siteGeneratorStaticsPreload",[])}angular.module("siteGeneratorStaticsPreload").run(["$templateCache",function(a){a.put("views/design/header-design/header-type.html","<div class='header-type cc-primitives-in-row flex-wrap'>\n<c20-graphic-radio data-hook='header-type-solid' icon='::&#39;design:header-solid&#39;' is-selected='$ctrl.isSolid' label='::&#39;design.header.type.solid&#39; | translate' on-click='$ctrl.setSolid()' selected-icon='::&#39;design:header-solid-selected&#39;'></c20-graphic-radio>\n<c20-graphic-radio data-hook='header-type-transparent' icon='::&#39;design:header-transparent&#39;' is-selected='$ctrl.isTransparent' label='::&#39;design.header.type.transparent&#39; | translate' on-click='$ctrl.setTransparent()' selected-icon='::&#39;design:header-transparent-selected&#39;'></c20-graphic-radio>\n<c20-graphic-radio data-hook='header-type-fixed' icon='::&#39;design:header-fixed&#39;' is-selected='$ctrl.isFixed' label='::&#39;design.header.type.fixed&#39; | translate' on-click='$ctrl.setFixed()' selected-icon='::&#39;design:header-fixed-selected&#39;'></c20-graphic-radio>\n</div>\n")}]);try{angular.module("siteGeneratorStaticsPreload")}catch(e){angular.module("siteGeneratorStaticsPreload",[])}angular.module("siteGeneratorStaticsPreload").run(["$templateCache",function(a){a.put("views/design/site-design-menu.html","<div aria-describedby='list-item-menu' aria-label='{{ $ctrl.item.label }}' class='site-design-menu' data-hook='site-design-menu' ng-class='{&#39;top&#39;: $ctrl.isAllMenuVisible === false, &#39;notready&#39;: $ctrl.notReady(), &#39;p4-action-menu&#39;: !$ctrl.flags.popover}' role='menu' tabindex='-1'>\n<cc-menu-item data-hook='color-button' label='{{::&#39;design.colors.title&#39; | translate }}' ng-click='$ctrl.openColorPanel()' svg-icon='design:color'></cc-menu-item>\n<cc-menu-item data-hook='font-button' label='{{::&#39;design.fonts.title&#39; | translate }}' ng-click='$ctrl.openFontPanel()' svg-icon='design:font'></cc-menu-item>\n<cc-menu-item data-hook='animations-button' label='{{::&#39;design.animations.title&#39; | translate }}' ng-click='$ctrl.openAnimationPanel()' svg-icon='design:animations'></cc-menu-item>\n<p17-divider ng-if='$ctrl.kitHasOverrides()'></p17-divider>\n<cc-menu-item data-hook='reset-button' label='{{:: &#39;design.kit.reset.button&#39; | translate }}' ng-click='$ctrl.onReset()' ng-if='$ctrl.kitHasOverrides()' svg-icon='design:reset'></cc-menu-item>\n</div>\n")}]);try{angular.module("siteGeneratorStaticsPreload")}catch(e){angular.module("siteGeneratorStaticsPreload",[])}angular.module("siteGeneratorStaticsPreload").run(["$templateCache",function(a){a.put("views/design/section-override-warning.html","<div class='style-d section-override-warning-container' data-hook='section-override-warning-body' ng-if='$ctrl.show'>\n<p class='c11-paragraph'>\n<span compile='$ctrl.overrideMessage + $ctrl.$translate(&#39;builder.section-override-warning.replace-sections&#39;)' data-hook='initial-message' ng-if='$ctrl.showOverrideQuery()'></span>\n<span data-hook='success-message' ng-if='$ctrl.showSuccess()'>\n<i class='cc-icon-checkbox-check confirm'></i>\n{{ :: 'builder.section-override-warning.success' | translate }}\n</span>\n</p>\n<p17-divider ng-if='$ctrl.divider'></p17-divider>\n</div>\n")}]);try{angular.module("siteGeneratorStaticsPreload")}catch(e){angular.module("siteGeneratorStaticsPreload",[])}angular.module("siteGeneratorStaticsPreload").run(["$templateCache",function(a){a.put("views/design/hex-input.html","<p1-text-input class='palette-color-input' data-hook='hex-input-input' max-length='8' on-blur='$ctrl.setColor()' on-change-value='$ctrl.colorChange(value)' on-focus='$ctrl.selectColorText($event)' select-on-focus='false' value='$ctrl.editableColor.value'></p1-text-input>\n")}]);try{angular.module("siteGeneratorStaticsPreload")}catch(e){angular.module("siteGeneratorStaticsPreload",[])}angular.module("siteGeneratorStaticsPreload").run(["$templateCache",function(a){a.put("views/design/palette-color.html","<div class='palette-color-container'>\n<p21-color-tag color='{{$ctrl.color}}' on-click='$ctrl.onIconClick({$event: $event, color: $ctrl.color})' show-icon='true' size='md'></p21-color-tag>\n<div class='palette-color-info'>\n<div class='palette-color-label' data-hook='palette-color-label'>\n{{:: $ctrl.label}}\n</div>\n<hex-input color='$ctrl.color' on-text-change='$ctrl.onTextChange()'></hex-input>\n</div>\n</div>\n")}]);try{angular.module("siteGeneratorStaticsPreload")}catch(e){angular.module("siteGeneratorStaticsPreload",[])}angular.module("siteGeneratorStaticsPreload").run(["$templateCache",function(a){a.put("views/design/palette-list.html","<div class='palette-list' ng-class='{&#39;animate-palettes&#39;: $ctrl.showAnimation}'>\n<kit-palette data-hook='palette-list-item' is-selectable='true' is-selected='$ctrl.isCustomSelected' kit-colors='$ctrl.customPalette.colors' ng-class='{&#39;-selected&#39;: $ctrl.isCustomSelected}' ng-click='$ctrl.selectCustom()' ng-if='!!$ctrl.customPalette'></kit-palette>\n<kit-palette data-hook='palette-list-item' is-selectable='true' is-selected='$index === $ctrl.selectedIndex' kit-colors='palette.colors' list-enter-end='$ctrl.onListAnimationEnd' ng-class='{&#39;-selected&#39;: $index === $ctrl.selectedIndex}' ng-click='$ctrl.select($index)' ng-repeat='palette in $ctrl.palettes track by ($index + palette.colors.mainColor)'></kit-palette>\n</div>\n")}]);try{angular.module("siteGeneratorStaticsPreload")}catch(e){angular.module("siteGeneratorStaticsPreload",[])}angular.module("siteGeneratorStaticsPreload").run(["$templateCache",function(a){a.put("views/design/kit-palette.html","<p24-palette colors='$ctrl.colors' is-selectable='$ctrl.isSelectable' is-selected='$ctrl.isSelected'></p24-palette>\n")}]);try{angular.module("siteGeneratorStaticsPreload")}catch(e){angular.module("siteGeneratorStaticsPreload",[])}angular.module("siteGeneratorStaticsPreload").run(["$templateCache",function(a){a.put("views/design/advanced-palette-editing.html","<coloration-panel-overlay loader-text='{{:: &#39;design.coloration.advanced.readability.loader&#39; | translate}}' show-backdrop='$ctrl.showLoader' show-loader='$ctrl.showLoader'></coloration-panel-overlay>\n<cc-panel-frame class='-with-p16a-header' data-hook='advanced-palette-editing-panel' label='{{:: &#39;design.coloration.advanced.panelheader&#39; | translate}}' ng-class='{&#39;-colors-not-readable&#39;: $ctrl.areColorsReadable === false}' on-close='$ctrl.closePanel()' on-help='$ctrl.openHelp()' on-return='$ctrl.backToColoration()' show-close-button='true' show-footer='true' show-help-button='false' show-return-button='true'>\n<div class='advanced-editing-header'>\n<div class='advanced-editing-title'>\n<span class='advanced-editing-title-text' data-hook='advanced-editing-title-text'>{{:: 'design.coloration.advanced.title' | translate }}</span>\n<div cc-tooltip='design_advanced_colors_reset' class='p9b-text-button cc-x-height advanced-editing-reset' data-hook='advanced-editing-reset' ng-click='$ctrl.resetColors()' ng-show='$ctrl.shouldShowReset()'>\n{{:: 'design.coloration.advanced.reset' | translate }}\n</div>\n</div>\n<div class='advanced-editing-description' data-hook='advanced-editing-description'>\n{{:: 'design.coloration.advanced.description' | translate }}\n</div>\n</div>\n<div class='palette-colors'>\n<palette-color color='$ctrl.colors.mainColor' label='{{:: &#39;design.coloration.advanced.main.color&#39; | translate }}' on-icon-click='$ctrl.openColorPicker($event, color, $ctrl.colorsStateEnum.mainColor)' on-text-change='$ctrl.changeColorsByHex()'></palette-color>\n<palette-color color='$ctrl.colors.secondaryColor' label='{{:: &#39;design.coloration.advanced.secondary.color&#39; | translate }}' ng-if='$ctrl.colors.secondaryColor' on-icon-click='$ctrl.openColorPicker($event, color, $ctrl.colorsStateEnum.secondaryColor)' on-text-change='$ctrl.changeColorsByHex()'></palette-color>\n<palette-color color='$ctrl.colors.thirdColor' label='{{:: &#39;design.coloration.advanced.third.color&#39; | translate }}' ng-if='$ctrl.colors.thirdColor' on-icon-click='$ctrl.openColorPicker($event, color, $ctrl.colorsStateEnum.thirdColor)' on-text-change='$ctrl.changeColorsByHex()'></palette-color>\n<palette-color color='$ctrl.colors.fourthColor' label='{{:: &#39;design.coloration.advanced.fourth.color&#39; | translate }}' ng-if='$ctrl.colors.fourthColor' on-icon-click='$ctrl.openColorPicker($event, color, $ctrl.colorsStateEnum.fourthColor)' on-text-change='$ctrl.changeColorsByHex()'></palette-color>\n<palette-color color='$ctrl.colors.white' label='{{:: &#39;design.coloration.advanced.light.color&#39; | translate }}' ng-if='$ctrl.colors.white' on-icon-click='$ctrl.openColorPicker($event, color, $ctrl.colorsStateEnum.white)' on-text-change='$ctrl.changeColorsByHex()'></palette-color>\n<palette-color color='$ctrl.colors.black' label='{{:: &#39;design.coloration.advanced.dark.color&#39; | translate }}' ng-if='$ctrl.colors.black' on-icon-click='$ctrl.openColorPicker($event, color, $ctrl.colorsStateEnum.black)' on-text-change='$ctrl.changeColorsByHex()'></palette-color>\n</div>\n<cc-panel-footer>\n<div class='readability-expert'>\n<cc-svg-icon icon='coloration:positive-validation-outline-small' ng-show='$ctrl.areColorsReadable'></cc-svg-icon>\n<div class='readability-expert-message -positive' ng-show='$ctrl.areColorsReadable'>\n<div class='message-line'>{{:: 'design.coloration.advanced.readability.positive' | translate }}</div>\n<button cc-tooltip='design_coloration_readability_positive' class='p9b-text-button -medium'>\n{{:: 'design.coloration.advanced.readability.learn.more' | translate }}\n</button>\n</div>\n<div class='readability-expert-message -negative' ng-show='$ctrl.areColorsReadable === false'>\n<div class='message-line'>{{:: 'design.coloration.advanced.readability.negative' | translate }}</div>\n<button cc-tooltip-options='{{ {offsetX: 24} }}' cc-tooltip='design_coloration_readability_negative' class='p9b-text-button -medium'>\n{{:: 'design.coloration.advanced.readability.learn.more' | translate }}\n</button>\n</div>\n</div>\n<button class='fix-readability p9-primary -small -with-icon' data-hook='fix-readability-button' ng-click='$ctrl.fixColors()' ng-show='$ctrl.areColorsReadable === false'>\n<cc-svg-icon icon='coloration:magic-wand'></cc-svg-icon>\n<span>{{:: 'design.coloration.advanced.readability.fix' | translate }}</span>\n</button>\n</cc-panel-footer>\n</cc-panel-frame>\n")}]);try{angular.module("siteGeneratorStaticsPreload")}catch(e){angular.module("siteGeneratorStaticsPreload",[])}angular.module("siteGeneratorStaticsPreload").run(["$templateCache",function(a){a.put("views/design/advanced-color-picker.html","<div class='advanced-color-picker-inner' ng-class='{&#39;loaded&#39;: $ctrl.loaded}'>\n<color-picker api='$ctrl.api' event-api='$ctrl.eventAPI' ng-model='$ctrl.selectedColor' options='$ctrl.options'></color-picker>\n<div class='color-picker-hue-hor' data-hue ng-mousedown='$ctrl.changeHue($event)'>\n<div class='handle' data-handle></div>\n</div>\n<div class='hex-input-wrapper'>\n<div class='color-picker-swatch' data-hook='swatch' ng-style='{backgroundColor: $ctrl.selectedColor}'></div>\n<label class='hex-value'>{{:: 'design.coloration.basic.hex-value' | translate}}</label>\n<hex-input color='$ctrl.selectedColor' on-text-change='$ctrl.textChange(color)' on-text-changing='$ctrl.textChanging(color)' on-text-fixed='$ctrl.onTextFixed()'></hex-input>\n</div>\n<div class='dialog-buttons'>\n<button class='p9a-secondary -small -inverse' data-hook='palette-color-dialog-cancel' ng-click='$ctrl.cancelClick()'>\n<div class='cc-x-height'>{{ ::'general.cancel' | translate }}</div>\n</button>\n<button class='p9-primary -small' data-hook='palette-color-dialog-confirm' ng-class='{&#39;-disabled&#39;: !$ctrl.hexIsValid}' ng-click='$ctrl.confirmClick()' ng-disabled='!$ctrl.hexIsValid'>\n<div class='cc-x-height'>{{ ::'general.apply' | translate }}</div>\n</button>\n</div>\n</div>\n")}]);try{angular.module("siteGeneratorStaticsPreload")}catch(e){angular.module("siteGeneratorStaticsPreload",[])}angular.module("siteGeneratorStaticsPreload").run(["$templateCache",function(a){a.put("views/design/coloration-mode-selector.html","<p3-dropdown-list data-hook='coloration-mode-selector-dropdown' help-tooltip='design_coloration_mode_toggle' items='$ctrl.dropdownItems' label-key='label' no-hover='true' on-selection-change='$ctrl.onDropdownSelectionChange(item)' track-by-key='value' value='$ctrl.dropdownValue'></p3-dropdown-list>\n")}]);try{angular.module("siteGeneratorStaticsPreload")}catch(e){angular.module("siteGeneratorStaticsPreload",[])}angular.module("siteGeneratorStaticsPreload").run(["$templateCache",function(a){a.put("views/design/kit-thumbnail.html","<ng-include src='$ctrl.thumbnailTemplate()'></ng-include>\n")}]);try{angular.module("siteGeneratorStaticsPreload")}catch(e){angular.module("siteGeneratorStaticsPreload",[])}angular.module("siteGeneratorStaticsPreload").run(["$templateCache",function(a){a.put("views/design/font/font-thumbnail.html","<div class='font-thumbnail' data-hook='font-thumbnail' ng-class='{ &quot;selected&quot; : $ctrl.isSelected, &quot;selectable&quot;: $ctrl.isSelectable, &quot;has-background&quot;: $ctrl.hasBackground, &quot;background-lg&quot;: $ctrl.hasBackground &amp;&amp; $ctrl.largeBg }' ng-click='$ctrl.onClick({value: $ctrl.fontData})' ng-style='$ctrl.getThumbnailStyle()'>\n<div class='font-name' data-hook='font-title' ng-style='$ctrl.getNameFontStyle()'>{{ $ctrl.fontData.name.title }}</div>\n<div class='font-description' data-hook='font-description' ng-style='$ctrl.getDescriptionFontStyle()'>{{ $ctrl.fontData.description.title }}</div>\n<cc-svg-icon data-hook='font-selected' icon='coloration:selected' is-corner-icon='true' ng-if='$ctrl.isSelected'></cc-svg-icon>\n</div>\n")}]);try{angular.module("siteGeneratorStaticsPreload")}catch(e){angular.module("siteGeneratorStaticsPreload",[])}angular.module("siteGeneratorStaticsPreload").run(["$templateCache",function(a){a.put("views/design/font/font-size-slider.html","<div class='font-size-slider'>\n<div class='font-size-slider-label p8-label' data-hook='label'>{{ 'design.fonts.font-size.label' | translate: {sizeLabel: $ctrl.sizeLabel} }}</div>\n<p5-slider class='font-size-slider-control' data-hook='slider' icon-after='design:font-size-large' icon-before='design:font-size-small' max='$ctrl.maxFontSize' min='$ctrl.minFontSize' on-value-change='$ctrl.onFontSizeChange(value)' on-value-settle='$ctrl.setFontSize(value)' step='1' stepper-ticks='false' stepper='true' type='p5a' value='$ctrl.value'></p5-slider>\n</div>\n")}]);try{angular.module("siteGeneratorStaticsPreload")}catch(e){angular.module("siteGeneratorStaticsPreload",[])}angular.module("siteGeneratorStaticsPreload").run(["$templateCache",function(a){a.put("views/design/kits/agile-kit.html","<div class='agile-bg' ng-style='{backgroundColor: $ctrl.getColorAccordingToPalette(&#39;L3&#39;, $ctrl.ePaletteColorPickerStates.mainColor)}'>\n<div class='agile-box' ng-style='{backgroundColor: $ctrl.getBoxColor(&#39;L1&#39;)}'>\n<label data-hook='kit-thumbnail-label' ng-class='$ctrl.getTextClass()' ng-style='{color: $ctrl.getTextColor(&#39;D2&#39;), fontFamily: $ctrl.getFontFaceOfKit(&#39;font_0&#39;)}'>{{ $ctrl.getDisplayName() }}</label>\n</div>\n</div>\n")}]);try{angular.module("siteGeneratorStaticsPreload")}catch(e){angular.module("siteGeneratorStaticsPreload",[])}angular.module("siteGeneratorStaticsPreload").run(["$templateCache",function(a){
a.put("views/design/kits/army-kit.html","<div class='army-bg' ng-style='{backgroundColor: $ctrl.getColorAccordingToPalette(&#39;D1&#39;, $ctrl.ePaletteColorPickerStates.secondaryColor)}'>\n<div class='army-bg-top' ng-style='{backgroundColor: $ctrl.getColorAccordingToPalette(&#39;D2&#39;, $ctrl.ePaletteColorPickerStates.mainColor)}'></div>\n<div class='army-left-line' ng-style='{backgroundColor: $ctrl.getColorAccordingToPalette(&#39;L1&#39;, $ctrl.ePaletteColorPickerStates.white)}'></div>\n<div class='army-right-line' ng-style='{backgroundColor: $ctrl.getColorAccordingToPalette(&#39;L1&#39;, $ctrl.ePaletteColorPickerStates.white)}'></div>\n<div class='army-box' ng-style='{backgroundColor: $ctrl.getBoxColor(&#39;L3&#39;)}'>\n<label data-hook='kit-thumbnail-label' ng-class='$ctrl.getTextClass()' ng-style='{color: $ctrl.getTextColor(&#39;D2&#39;), fontFamily: $ctrl.getFontFaceOfKit(&#39;font_0&#39;)}'>{{ $ctrl.getDisplayName() }}</label>\n</div>\n</div>\n")}]);try{angular.module("siteGeneratorStaticsPreload")}catch(e){angular.module("siteGeneratorStaticsPreload",[])}angular.module("siteGeneratorStaticsPreload").run(["$templateCache",function(a){a.put("views/design/kits/black-ice-kit.html","<div class='black-ice-bg' ng-style='{backgroundColor: $ctrl.getColorAccordingToPalette(&#39;D2&#39;, $ctrl.ePaletteColorPickerStates.secondaryColor)}'>\n<div class='black-ice-line' ng-style='{backgroundColor: $ctrl.getColorAccordingToPalette(&#39;L2&#39;, $ctrl.ePaletteColorPickerStates.mainColor)}'></div>\n<div class='black-ice-box' ng-style='{backgroundColor: $ctrl.getBoxColor(&#39;D1&#39;)}'>\n<label data-hook='kit-thumbnail-label' ng-class='$ctrl.getTextClass()' ng-style='{color: $ctrl.getTextColor(&#39;L3&#39;), fontFamily: $ctrl.getFontFaceOfKit(&#39;font_0&#39;)}'>{{ $ctrl.getDisplayName() }}</label>\n</div>\n</div>\n")}]);try{angular.module("siteGeneratorStaticsPreload")}catch(e){angular.module("siteGeneratorStaticsPreload",[])}angular.module("siteGeneratorStaticsPreload").run(["$templateCache",function(a){a.put("views/design/kits/bold-kit.html","<div class='bold-bg' ng-style='{backgroundColor: $ctrl.getColorAccordingToPalette(&#39;D1&#39;, $ctrl.ePaletteColorPickerStates.mainColor)}'>\n<div class='bold-bg-left' ng-style='{backgroundColor: $ctrl.getColorAccordingToPalette(&#39;L3&#39;, $ctrl.ePaletteColorPickerStates.mainColor)}'></div>\n<div class='bold-box' ng-style='{backgroundColor: $ctrl.getBoxColor(&#39;L1&#39;)}'>\n<label data-hook='kit-thumbnail-label' ng-class='$ctrl.getTextClass()' ng-style='{color: $ctrl.getTextColor(&#39;D1&#39;), fontFamily: $ctrl.getFontFaceOfKit(&#39;font_0&#39;)}'>{{ $ctrl.getDisplayName() }}</label>\n</div>\n</div>\n")}]);try{angular.module("siteGeneratorStaticsPreload")}catch(e){angular.module("siteGeneratorStaticsPreload",[])}angular.module("siteGeneratorStaticsPreload").run(["$templateCache",function(a){a.put("views/design/kits/bounce-kit.html","<div class='bounce-bg' ng-style='{backgroundColor: $ctrl.getColorAccordingToPalette(&#39;D1&#39;, $ctrl.ePaletteColorPickerStates.mainColor)}'>\n<div class='bounce-big-line' ng-style='{backgroundColor: $ctrl.getColorAccordingToPalette(&#39;L1&#39;, $ctrl.ePaletteColorPickerStates.white)}'></div>\n<div class='bounce-small-line' ng-style='{backgroundColor: $ctrl.getColorAccordingToPalette(&#39;L1&#39;, $ctrl.ePaletteColorPickerStates.white)}'></div>\n<div class='bounce-box' ng-style='{backgroundColor: $ctrl.getBoxColor(&#39;L1&#39;)}'>\n<label data-hook='kit-thumbnail-label' ng-class='$ctrl.getTextClass()' ng-style='{color: $ctrl.getTextColor(&#39;D3&#39;), fontFamily: $ctrl.getFontFaceOfKit(&#39;font_0&#39;)}'>{{ $ctrl.getDisplayName() }}</label>\n</div>\n</div>\n")}]);try{angular.module("siteGeneratorStaticsPreload")}catch(e){angular.module("siteGeneratorStaticsPreload",[])}angular.module("siteGeneratorStaticsPreload").run(["$templateCache",function(a){a.put("views/design/kits/bouquet-kit.html","<div class='bouquet-bg' ng-style='{backgroundColor: $ctrl.getColorAccordingToPalette(&#39;L2&#39;, $ctrl.ePaletteColorPickerStates.secondaryColor)}'>\n<div class='bouquet-top-line' ng-style='{backgroundColor: $ctrl.getColorAccordingToPalette(&#39;L1&#39;, $ctrl.ePaletteColorPickerStates.white)}'></div>\n<div class='bouquet-bottom-line' ng-style='{backgroundColor: $ctrl.getColorAccordingToPalette(&#39;L3&#39;, $ctrl.ePaletteColorPickerStates.mainColor)}'></div>\n<div class='bouquet-box' ng-style='{backgroundColor: $ctrl.getBoxColor(&#39;L1&#39;)}'>\n<label data-hook='kit-thumbnail-label' ng-class='$ctrl.getTextClass()' ng-style='{color: $ctrl.getTextColor(&#39;D2&#39;), fontFamily: $ctrl.getFontFaceOfKit(&#39;font_0&#39;)}'>{{ $ctrl.getDisplayName() }}</label>\n</div>\n</div>\n")}]);try{angular.module("siteGeneratorStaticsPreload")}catch(e){angular.module("siteGeneratorStaticsPreload",[])}angular.module("siteGeneratorStaticsPreload").run(["$templateCache",function(a){a.put("views/design/kits/breeze-kit.html","<div class='breeze-bg' ng-style='{backgroundColor: $ctrl.getColorAccordingToPalette(&#39;L3&#39;, $ctrl.ePaletteColorPickerStates.mainColor)}'>\n<div class='breeze-box-left' ng-style='{backgroundColor: $ctrl.getColorAccordingToPalette(&#39;D2&#39;, $ctrl.ePaletteColorPickerStates.secondaryColor)}'></div>\n<div class='breeze-box' ng-style='{backgroundColor: $ctrl.getBoxColor(&#39;L1&#39;)}'>\n<label data-hook='kit-thumbnail-label' ng-class='$ctrl.getTextClass()' ng-style='{color: $ctrl.getTextColor(&#39;D3&#39;), fontFamily: $ctrl.getFontFaceOfKit(&#39;font_0&#39;)}'>{{ $ctrl.getDisplayName() }}</label>\n</div>\n</div>\n")}]);try{angular.module("siteGeneratorStaticsPreload")}catch(e){angular.module("siteGeneratorStaticsPreload",[])}angular.module("siteGeneratorStaticsPreload").run(["$templateCache",function(a){a.put("views/design/kits/cadenza-kit.html","<div class='cadenza-bg' ng-style='{backgroundColor: $ctrl.getColorAccordingToPalette(&#39;D2&#39;, $ctrl.ePaletteColorPickerStates.secondaryColor)}'>\n<div class='cadenza-top-line' ng-style='{backgroundColor: $ctrl.getColorAccordingToPalette(&#39;L3&#39;, $ctrl.ePaletteColorPickerStates.fourthColor)}'></div>\n<div class='cadenza-bottom-line' ng-style='{backgroundColor: $ctrl.getColorAccordingToPalette(&#39;D3&#39;, $ctrl.ePaletteColorPickerStates.mainColor)}'></div>\n<div class='cadenza-box' ng-style='{backgroundColor: $ctrl.getBoxColor(&#39;D1&#39;)}'>\n<label data-hook='kit-thumbnail-label' ng-class='$ctrl.getTextClass()' ng-style='{color: $ctrl.getTextColor(&#39;L1&#39;), fontFamily: $ctrl.getFontFaceOfKit(&#39;font_0&#39;)}'>{{ $ctrl.getDisplayName() }}</label>\n</div>\n</div>\n")}]);try{angular.module("siteGeneratorStaticsPreload")}catch(e){angular.module("siteGeneratorStaticsPreload",[])}angular.module("siteGeneratorStaticsPreload").run(["$templateCache",function(a){a.put("views/design/kits/charming-kit.html","<div class='charming-bg' ng-style='{backgroundColor: $ctrl.getColorAccordingToPalette(&#39;D2&#39;, $ctrl.ePaletteColorPickerStates.thirdColor)}'>\n<div class='charming-box-left' ng-style='{backgroundColor: $ctrl.getColorAccordingToPalette(&#39;D3&#39;, $ctrl.ePaletteColorPickerStates.mainColor)}'></div>\n<div class='charming-box-middle' ng-style='{backgroundColor: $ctrl.getColorAccordingToPalette(&#39;L2&#39;, $ctrl.ePaletteColorPickerStates.secondaryColor)}'></div>\n<div class='charming-box-right' ng-style='{backgroundColor: $ctrl.getColorAccordingToPalette(&#39;L3&#39;, $ctrl.ePaletteColorPickerStates.fourthColor)}'></div>\n<div class='charming-box' ng-style='{backgroundColor: $ctrl.getBoxColor(&#39;L1&#39;)}'>\n<label data-hook='kit-thumbnail-label' ng-class='$ctrl.getTextClass()' ng-style='{color: $ctrl.getTextColor(&#39;D1&#39;), fontFamily: $ctrl.getFontFaceOfKit(&#39;font_0&#39;)}'>{{ $ctrl.getDisplayName() }}</label>\n</div>\n</div>\n")}]);try{angular.module("siteGeneratorStaticsPreload")}catch(e){angular.module("siteGeneratorStaticsPreload",[])}angular.module("siteGeneratorStaticsPreload").run(["$templateCache",function(a){a.put("views/design/kits/chic-kit.html","<div class='chic-bg' ng-style='{backgroundColor: $ctrl.getColorAccordingToPalette(&#39;L3&#39;, $ctrl.ePaletteColorPickerStates.mainColor)}'>\n<div class='chic-box-left' ng-style='{backgroundColor: $ctrl.getColorAccordingToPalette(&#39;L1&#39;, $ctrl.ePaletteColorPickerStates.mainColor)}'></div>\n<div class='chic-box-right' ng-style='{backgroundColor: $ctrl.getColorAccordingToPalette(&#39;D1&#39;, $ctrl.ePaletteColorPickerStates.black)}'></div>\n<div class='chic-box' ng-style='{backgroundColor: $ctrl.getBoxColor(&#39;L2&#39;)}'>\n<label data-hook='kit-thumbnail-label' ng-class='$ctrl.getTextClass()' ng-style='{color: $ctrl.getTextColor(&#39;D1&#39;), fontFamily: $ctrl.getFontFaceOfKit(&#39;font_0&#39;)}'>{{ $ctrl.getDisplayName() }}</label>\n</div>\n</div>\n")}]);try{angular.module("siteGeneratorStaticsPreload")}catch(e){angular.module("siteGeneratorStaticsPreload",[])}angular.module("siteGeneratorStaticsPreload").run(["$templateCache",function(a){a.put("views/design/kits/classic-kit.html","<div class='classic-bg' ng-style='{backgroundColor: $ctrl.getColorAccordingToPalette(&#39;L1&#39;, $ctrl.ePaletteColorPickerStates.white)}'>\n<div class='classic-box' ng-style='{backgroundColor: $ctrl.getBoxColor(&#39;L1&#39;), borderColor: $ctrl.getTextColor(&#39;D3&#39;)}'>\n<label data-hook='kit-thumbnail-label' ng-class='$ctrl.getTextClass()' ng-style='{color: $ctrl.getTextColor(&#39;D2&#39;), fontFamily: $ctrl.getFontFaceOfKit(&#39;font_0&#39;)}'>{{ $ctrl.getDisplayName() }}</label>\n</div>\n</div>\n")}]);try{angular.module("siteGeneratorStaticsPreload")}catch(e){angular.module("siteGeneratorStaticsPreload",[])}angular.module("siteGeneratorStaticsPreload").run(["$templateCache",function(a){a.put("views/design/kits/clean-kit.html","<div class='clean-bg' ng-style='{backgroundColor: $ctrl.getColorAccordingToPalette(&#39;L3&#39;, $ctrl.ePaletteColorPickerStates.mainColor)}'>\n<div class='clean-box-left' ng-style='{backgroundColor: $ctrl.getColorAccordingToPalette(&#39;L2&#39;, $ctrl.ePaletteColorPickerStates.secondaryColor)}'></div>\n<div class='clean-box' ng-style='{backgroundColor: $ctrl.getBoxColor(&#39;L1&#39;)}'>\n<label data-hook='kit-thumbnail-label' ng-class='$ctrl.getTextClass()' ng-style='{color: $ctrl.getTextColor(&#39;D2&#39;), fontFamily: $ctrl.getFontFaceOfKit(&#39;font_0&#39;)}'>{{ $ctrl.getDisplayName() }}</label>\n</div>\n</div>\n")}]);try{angular.module("siteGeneratorStaticsPreload")}catch(e){angular.module("siteGeneratorStaticsPreload",[])}angular.module("siteGeneratorStaticsPreload").run(["$templateCache",function(a){a.put("views/design/kits/deep-forest-kit.html","<div class='deep-forest-bg' ng-style='{backgroundColor: $ctrl.getColorAccordingToPalette(&#39;L1&#39;, $ctrl.ePaletteColorPickerStates.white)}'>\n<div class='deep-forest-bg-left' ng-style='{backgroundColor: $ctrl.getColorAccordingToPalette(&#39;L3&#39;, $ctrl.ePaletteColorPickerStates.secondaryColor)}'></div>\n<div class='deep-forest-bg-right' ng-style='{backgroundColor: $ctrl.getColorAccordingToPalette(&#39;D2&#39;, $ctrl.ePaletteColorPickerStates.main)}'></div>\n<div class='deep-forest-box' ng-style='{backgroundColor: $ctrl.getBoxColor(&#39;L1&#39;)}'>\n<label data-hook='kit-thumbnail-label' ng-class='$ctrl.getTextClass()' ng-style='{color: $ctrl.getTextColor(&#39;D2&#39;), fontFamily: $ctrl.getFontFaceOfKit(&#39;font_0&#39;)}'>{{ $ctrl.getDisplayName() }}</label>\n</div>\n</div>\n")}]);try{angular.module("siteGeneratorStaticsPreload")}catch(e){angular.module("siteGeneratorStaticsPreload",[])}angular.module("siteGeneratorStaticsPreload").run(["$templateCache",function(a){a.put("views/design/kits/delight-kit.html","<div class='delight-bg' ng-style='{backgroundColor: $ctrl.getColorAccordingToPalette(&#39;L2&#39;, $ctrl.ePaletteColorPickerStates.secondaryColor)}'>\n<div class='delight-bg-left' ng-style='{backgroundColor: $ctrl.getColorAccordingToPalette(&#39;L3&#39;, $ctrl.ePaletteColorPickerStates.mainColor)}'></div>\n<div class='delight-bg-right' ng-style='{backgroundColor: $ctrl.getColorAccordingToPalette(&#39;D2&#39;, $ctrl.ePaletteColorPickerStates.white)}'></div>\n<div class='delight-box' ng-style='{backgroundColor: $ctrl.getBoxColor(&#39;L1&#39;)}'>\n<label data-hook='kit-thumbnail-label' ng-class='$ctrl.getTextClass()' ng-style='{color: $ctrl.getTextColor(&#39;D1&#39;), fontFamily: $ctrl.getFontFaceOfKit(&#39;font_0&#39;)}'>{{ $ctrl.getDisplayName() }}</label>\n</div>\n</div>\n")}]);try{angular.module("siteGeneratorStaticsPreload")}catch(e){angular.module("siteGeneratorStaticsPreload",[])}angular.module("siteGeneratorStaticsPreload").run(["$templateCache",function(a){a.put("views/design/kits/elegant-kit.html","<div class='elegant-bg' ng-style='{backgroundColor: $ctrl.getColorAccordingToPalette(&#39;L1&#39;, $ctrl.ePaletteColorPickerStates.mainColor)}'>\n<div class='elegant-line' ng-style='{backgroundColor: $ctrl.getColorAccordingToPalette(&#39;D3&#39;, $ctrl.ePaletteColorPickerStates.secondaryColor)}'></div>\n<div class='elegant-box' ng-style='{backgroundColor: $ctrl.getBoxColor(&#39;L3&#39;)}'>\n<label data-hook='kit-thumbnail-label' ng-class='$ctrl.getTextClass()' ng-style='{color: $ctrl.getTextColor(&#39;D2&#39;), fontFamily: $ctrl.getFontFaceOfKit(&#39;font_0&#39;)}'>{{ $ctrl.getDisplayName() }}</label>\n</div>\n</div>\n")}]);try{angular.module("siteGeneratorStaticsPreload")}catch(e){angular.module("siteGeneratorStaticsPreload",[])}angular.module("siteGeneratorStaticsPreload").run(["$templateCache",function(a){a.put("views/design/kits/evolution-kit.html","<div class='evolution-bg' ng-style='{backgroundColor: $ctrl.getColorAccordingToPalette(&#39;D3&#39;, $ctrl.ePaletteColorPickerStates.mainColor)}'>\n<div class='evolution-box-right' ng-style='{backgroundColor: $ctrl.getColorAccordingToPalette(&#39;L2&#39;, $ctrl.ePaletteColorPickerStates.secondaryColor)}'></div>\n<div class='evolution-box-bottom' ng-style='{backgroundColor: $ctrl.getColorAccordingToPalette(&#39;D1&#39;, $ctrl.ePaletteColorPickerStates.black)}'></div>\n<div class='evolution-box' ng-style='{backgroundColor: $ctrl.getBoxColor(&#39;L1&#39;)}'>\n<label data-hook='kit-thumbnail-label' ng-class='$ctrl.getTextClass()' ng-style='{color: $ctrl.getTextColor(&#39;D2&#39;), fontFamily: $ctrl.getFontFaceOfKit(&#39;font_0&#39;)}'>{{ $ctrl.getDisplayName() }}</label>\n</div>\n</div>\n")}]);try{angular.module("siteGeneratorStaticsPreload")}catch(e){angular.module("siteGeneratorStaticsPreload",[])}angular.module("siteGeneratorStaticsPreload").run(["$templateCache",function(a){a.put("views/design/kits/fresh-kit.html","<div class='fresh-bg' ng-style='{backgroundColor: $ctrl.getColorAccordingToPalette(&#39;D3&#39;, $ctrl.ePaletteColorPickerStates.mainColor)}'>\n<div class='fresh-box' ng-style='{backgroundColor: $ctrl.getBoxColor(&#39;L1&#39;)}'>\n<label data-hook='kit-thumbnail-label' ng-class='$ctrl.getTextClass()' ng-style='{color: $ctrl.getTextColor(&#39;D3&#39;), fontFamily: $ctrl.getFontFaceOfKit(&#39;font_0&#39;)}'>{{ $ctrl.getDisplayName() }}</label>\n</div>\n</div>\n")}]);try{angular.module("siteGeneratorStaticsPreload")}catch(e){angular.module("siteGeneratorStaticsPreload",[])}angular.module("siteGeneratorStaticsPreload").run(["$templateCache",function(a){a.put("views/design/kits/fun-kit.html","<div class='fun-bg' ng-style='{backgroundColor: $ctrl.getColorAccordingToPalette(&#39;D1&#39;, $ctrl.ePaletteColorPickerStates.secondaryColor)}'>\n<div class='fun-bg-left' ng-style='{backgroundColor: $ctrl.getColorAccordingToPalette(&#39;D3&#39;, $ctrl.ePaletteColorPickerStates.mainColor)}'></div>\n<div class='fun-big-line' ng-style='{backgroundColor: $ctrl.getColorAccordingToPalette(&#39;D2&#39;, $ctrl.ePaletteColorPickerStates.thirdColor)}'></div>\n<div class='fun-small-line' ng-style='{backgroundColor: $ctrl.getColorAccordingToPalette(&#39;L3&#39;, $ctrl.ePaletteColorPickerStates.fourthColor)}'></div>\n<div class='fun-small-line-1' ng-style='{backgroundColor: $ctrl.getColorAccordingToPalette(&#39;L1&#39;, $ctrl.ePaletteColorPickerStates.white)}'></div>\n<div class='fun-box' ng-style='{backgroundColor: $ctrl.getBoxColor(&#39;L2&#39;)}'>\n<label data-hook='kit-thumbnail-label' ng-class='$ctrl.getTextClass()' ng-style='{color: $ctrl.getTextColor(&#39;D1&#39;), fontFamily: $ctrl.getFontFaceOfKit(&#39;font_0&#39;)}'>{{ $ctrl.getDisplayName() }}</label>\n</div>\n</div>\n")}]);try{angular.module("siteGeneratorStaticsPreload")}catch(e){angular.module("siteGeneratorStaticsPreload",[])}angular.module("siteGeneratorStaticsPreload").run(["$templateCache",function(a){a.put("views/design/kits/funky-kit.html","<div class='funky-bg' ng-style='{backgroundColor: $ctrl.getColorAccordingToPalette(&#39;D2&#39;, $ctrl.ePaletteColorPickerStates.secondaryColor)}'>\n<div class='funky-left-line' ng-style='{backgroundColor: $ctrl.getColorAccordingToPalette(&#39;L2&#39;, $ctrl.ePaletteColorPickerStates.thirdColor)}'></div>\n<div class='funky-middle-line' ng-style='{backgroundColor: $ctrl.getColorAccordingToPalette(&#39;L3&#39;, $ctrl.ePaletteColorPickerStates.mainColor)}'></div>\n<div class='funky-right-line' ng-style='{backgroundColor: $ctrl.getColorAccordingToPalette(&#39;D3&#39;, $ctrl.ePaletteColorPickerStates.fourthColor)}'></div>\n<div class='funky-box' ng-style='{backgroundColor: $ctrl.getBoxColor(&#39;D1&#39;)}'>\n<label data-hook='kit-thumbnail-label' ng-class='$ctrl.getTextClass()' ng-style='{color: $ctrl.getTextColor(&#39;L1&#39;), fontFamily: $ctrl.getFontFaceOfKit(&#39;font_0&#39;)}'>{{ $ctrl.getDisplayName() }}</label>\n</div>\n</div>\n")}]);try{angular.module("siteGeneratorStaticsPreload")}catch(e){angular.module("siteGeneratorStaticsPreload",[])}angular.module("siteGeneratorStaticsPreload").run(["$templateCache",function(a){a.put("views/design/kits/fuse-kit.html","<div class='fuse-bg' ng-style='{backgroundColor: $ctrl.getColorAccordingToPalette(&#39;D1&#39;, $ctrl.ePaletteColorPickerStates.thirdColor)}'>\n<div class='fuse-small-line' ng-style='{backgroundColor: $ctrl.getColorAccordingToPalette(&#39;L2&#39;, $ctrl.ePaletteColorPickerStates.secondaryColor)}'></div>\n<div class='fuse-big-line' ng-style='{backgroundColor: $ctrl.getColorAccordingToPalette(&#39;L2&#39;, $ctrl.ePaletteColorPickerStates.mainColor)}'></div>\n<div class='fuse-box' ng-style='{backgroundColor: $ctrl.getBoxColor(&#39;D3&#39;)}'>\n<label data-hook='kit-thumbnail-label' ng-class='$ctrl.getTextClass()' ng-style='{color: $ctrl.getTextColor(&#39;L2&#39;), fontFamily: $ctrl.getFontFaceOfKit(&#39;font_0&#39;)}'>{{ $ctrl.getDisplayName() }}</label>\n</div>\n</div>\n")}]);try{angular.module("siteGeneratorStaticsPreload")}catch(e){angular.module("siteGeneratorStaticsPreload",[])}angular.module("siteGeneratorStaticsPreload").run(["$templateCache",function(a){a.put("views/design/kits/horizon-kit.html","<div class='horizon-bg' ng-style='{backgroundColor: $ctrl.getColorAccordingToPalette(&#39;L3&#39;, $ctrl.ePaletteColorPickerStates.mainColor)}'>\n<div class='horizon-box-top' ng-style='{backgroundColor: $ctrl.getColorAccordingToPalette(&#39;D2&#39;, $ctrl.ePaletteColorPickerStates.black)}'></div>\n<div class='horizon-box' ng-style='{backgroundColor: $ctrl.getBoxColor(&#39;L1&#39;)}'>\n<label data-hook='kit-thumbnail-label' ng-class='$ctrl.getTextClass()' ng-style='{color: $ctrl.getTextColor(&#39;D1&#39;), fontFamily: $ctrl.getFontFaceOfKit(&#39;font_0&#39;)}'>{{ $ctrl.getDisplayName() }}</label>\n</div>\n</div>\n")}]);try{angular.module("siteGeneratorStaticsPreload")}catch(e){angular.module("siteGeneratorStaticsPreload",[])}angular.module("siteGeneratorStaticsPreload").run(["$templateCache",function(a){a.put("views/design/kits/hi-rise-kit.html","<div class='hi-rise-bg' ng-style='{backgroundColor: $ctrl.getColorAccordingToPalette(&#39;D1&#39;, $ctrl.ePaletteColorPickerStates.secondaryColor)}'>\n<div class='hi-rise-box' ng-style='{backgroundColor: $ctrl.getBoxColor(&#39;L3&#39;)}'>\n<label data-hook='kit-thumbnail-label' ng-class='$ctrl.getTextClass()' ng-style='{color: $ctrl.getTextColor(&#39;D2&#39;), fontFamily: $ctrl.getFontFaceOfKit(&#39;font_0&#39;)}'>{{ $ctrl.getDisplayName() }}</label>\n</div>\n</div>\n")}]);try{angular.module("siteGeneratorStaticsPreload")}catch(e){angular.module("siteGeneratorStaticsPreload",[])}angular.module("siteGeneratorStaticsPreload").run(["$templateCache",function(a){a.put("views/design/kits/indulge-kit.html","<div class='indulge-bg' ng-style='{backgroundColor: $ctrl.getColorAccordingToPalette(&#39;L1&#39;, $ctrl.ePaletteColorPickerStates.black)}'>\n<div class='indulge-box-left' ng-style='{backgroundColor: $ctrl.getColorAccordingToPalette(&#39;L3&#39;, $ctrl.ePaletteColorPickerStates.mainColor)}'></div>\n<div class='indulge-box-right' ng-style='{backgroundColor: $ctrl.getColorAccordingToPalette(&#39;L3&#39;, $ctrl.ePaletteColorPickerStates.mainColor)}'></div>\n<div class='indulge-box' ng-style='{backgroundColor: $ctrl.getBoxColor(&#39;L1&#39;)}'>\n<label data-hook='kit-thumbnail-label' ng-class='$ctrl.getTextClass()' ng-style='{color: $ctrl.getTextColor(&#39;D1&#39;), fontFamily: $ctrl.getFontFaceOfKit(&#39;font_0&#39;)}'>{{ $ctrl.getDisplayName() }}</label>\n</div>\n</div>\n")}]);try{angular.module("siteGeneratorStaticsPreload")}catch(e){angular.module("siteGeneratorStaticsPreload",[])}angular.module("siteGeneratorStaticsPreload").run(["$templateCache",function(a){a.put("views/design/kits/intensity-kit.html","<div class='intensity-bg' ng-style='{backgroundColor: $ctrl.getColorAccordingToPalette(&#39;D1&#39;, $ctrl.ePaletteColorPickerStates.mainColor)}'>\n<div class='intensity-box-right' ng-style='{backgroundColor: $ctrl.getColorAccordingToPalette(&#39;L1&#39;, $ctrl.ePaletteColorPickerStates.white)}'></div>\n<div class='intensity-box' ng-style='{backgroundColor: $ctrl.getBoxColor(&#39;L1&#39;)}'>\n<label data-hook='kit-thumbnail-label' ng-class='$ctrl.getTextClass()' ng-style='{color: $ctrl.getTextColor(&#39;D1&#39;), fontFamily: $ctrl.getFontFaceOfKit(&#39;font_0&#39;)}'>{{ $ctrl.getDisplayName() }}</label>\n</div>\n</div>\n")}]);try{angular.module("siteGeneratorStaticsPreload")}catch(e){angular.module("siteGeneratorStaticsPreload",[])}angular.module("siteGeneratorStaticsPreload").run(["$templateCache",function(a){a.put("views/design/kits/innovative-kit.html","<div class='innovative-bg' ng-style='{backgroundColor: $ctrl.getColorAccordingToPalette(&#39;L3&#39;, $ctrl.ePaletteColorPickerStates.secondaryColor)}'>\n<div class='innovative-small-line' ng-style='{backgroundColor: $ctrl.getColorAccordingToPalette(&#39;L1&#39;, $ctrl.ePaletteColorPickerStates.white)}'></div>\n<div class='innovative-big-line' ng-style='{backgroundColor: $ctrl.getColorAccordingToPalette(&#39;D3&#39;, $ctrl.ePaletteColorPickerStates.mainColor)}'></div>\n<div class='innovative-box' ng-style='{backgroundColor: $ctrl.getBoxColor(&#39;L1&#39;)}'>\n<label data-hook='kit-thumbnail-label' ng-class='$ctrl.getTextClass()' ng-style='{color: $ctrl.getTextColor(&#39;D3&#39;), fontFamily: $ctrl.getFontFaceOfKit(&#39;font_0&#39;)}'>{{ $ctrl.getDisplayName() }}</label>\n</div>\n</div>\n")}]);try{angular.module("siteGeneratorStaticsPreload")}catch(e){angular.module("siteGeneratorStaticsPreload",[])}angular.module("siteGeneratorStaticsPreload").run(["$templateCache",function(a){a.put("views/design/kits/jet-black-kit.html","<div class='jet-black-bg' ng-style='{backgroundColor: $ctrl.getColorAccordingToPalette(&#39;D1&#39;, $ctrl.ePaletteColorPickerStates.mainColor)}'>\n<div class='jet-black-box' ng-style='{backgroundColor: $ctrl.getBoxColor(&#39;D3&#39;)}'>\n<label data-hook='kit-thumbnail-label' ng-class='$ctrl.getTextClass()' ng-style='{color: $ctrl.getTextColor(&#39;L1&#39;), fontFamily: $ctrl.getFontFaceOfKit(&#39;font_0&#39;)}'>{{ $ctrl.getDisplayName() }}</label>\n</div>\n</div>\n")}]);try{angular.module("siteGeneratorStaticsPreload")}catch(e){angular.module("siteGeneratorStaticsPreload",[])}angular.module("siteGeneratorStaticsPreload").run(["$templateCache",function(a){a.put("views/design/kits/maison-kit.html","<div class='maison-bg' ng-style='{backgroundColor: $ctrl.getColorAccordingToPalette(&#39;L1&#39;, $ctrl.ePaletteColorPickerStates.white)}'>\n<div class='maison-box-right' ng-style='{backgroundColor: $ctrl.getColorAccordingToPalette(&#39;L1&#39;, $ctrl.ePaletteColorPickerStates.white), borderColor: $ctrl.getColorAccordingToPalette(&#39;D3&#39;, $ctrl.ePaletteColorPickerStates.black)}'></div>\n<div class='maison-box' ng-style='{backgroundColor: $ctrl.getBoxColor(&#39;L1&#39;)}'>\n<label data-hook='kit-thumbnail-label' ng-class='$ctrl.getTextClass()' ng-style='{color: $ctrl.getTextColor(&#39;D1&#39;), fontFamily: $ctrl.getFontFaceOfKit(&#39;font_0&#39;)}'>{{ $ctrl.getDisplayName() }}</label>\n</div>\n</div>\n")}]);try{angular.module("siteGeneratorStaticsPreload")}catch(e){angular.module("siteGeneratorStaticsPreload",[])}angular.module("siteGeneratorStaticsPreload").run(["$templateCache",function(a){a.put("views/design/kits/merlot-kit.html","<div class='merlot-bg' ng-style='{backgroundColor: $ctrl.getColorAccordingToPalette(&#39;L3&#39;, $ctrl.ePaletteColorPickerStates.white)}'>\n<div class='merlot-bg-left' ng-style='{backgroundColor: $ctrl.getColorAccordingToPalette(&#39;D1&#39;, $ctrl.ePaletteColorPickerStates.secondaryColor)}'></div>\n<div class='merlot-bg-right' ng-style='{backgroundColor: $ctrl.getColorAccordingToPalette(&#39;L1&#39;, $ctrl.ePaletteColorPickerStates.white)}'></div>\n<div class='merlot-box' ng-style='{backgroundColor: $ctrl.getBoxColor(&#39;L1&#39;)}'>\n<label data-hook='kit-thumbnail-label' ng-class='$ctrl.getTextClass()' ng-style='{color: $ctrl.getTextColor(&#39;D1&#39;), fontFamily: $ctrl.getFontFaceOfKit(&#39;font_0&#39;)}'>{{ $ctrl.getDisplayName() }}</label>\n</div>\n</div>\n")}]);try{angular.module("siteGeneratorStaticsPreload")}catch(e){angular.module("siteGeneratorStaticsPreload",[])}angular.module("siteGeneratorStaticsPreload").run(["$templateCache",function(a){a.put("views/design/kits/midnight-kit.html","<div class='midnight-bg' ng-style='{backgroundColor: $ctrl.getColorAccordingToPalette(&#39;D1&#39;, $ctrl.ePaletteColorPickerStates.mainColor)}'>\n<div class='midnight-box' ng-style='{backgroundColor: $ctrl.getBoxColor(&#39;D3&#39;)}'>\n<label data-hook='kit-thumbnail-label' ng-class='$ctrl.getTextClass()' ng-style='{color: $ctrl.getTextColor(&#39;L1&#39;), fontFamily: $ctrl.getFontFaceOfKit(&#39;font_0&#39;)}'>{{ $ctrl.getDisplayName() }}</label>\n</div>\n</div>\n")}]);try{angular.module("siteGeneratorStaticsPreload")}catch(e){angular.module("siteGeneratorStaticsPreload",[])}angular.module("siteGeneratorStaticsPreload").run(["$templateCache",function(a){a.put("views/design/kits/minimal-kit.html","<div class='minimal-bg' ng-style='{backgroundColor: $ctrl.getColorAccordingToPalette(&#39;L1&#39;, $ctrl.ePaletteColorPickerStates.white)}'>\n<div class='minimal-box-left' ng-style='{backgroundColor: $ctrl.getColorAccordingToPalette(&#39;D3&#39;, $ctrl.ePaletteColorPickerStates.black)}'></div>\n<div class='minimal-box-right' ng-style='{backgroundColor: $ctrl.getColorAccordingToPalette(&#39;L2&#39;, $ctrl.ePaletteColorPickerStates.mainColor)}'></div>\n<div class='minimal-box' ng-style='{backgroundColor: $ctrl.getBoxColor(&#39;L1&#39;)}'>\n<label data-hook='kit-thumbnail-label' ng-class='$ctrl.getTextClass()' ng-style='{color: $ctrl.getTextColor(&#39;D1&#39;), fontFamily: $ctrl.getFontFaceOfKit(&#39;font_0&#39;)}'>{{ $ctrl.getDisplayName() }}</label>\n</div>\n</div>\n")}]);try{angular.module("siteGeneratorStaticsPreload")}catch(e){angular.module("siteGeneratorStaticsPreload",[])}angular.module("siteGeneratorStaticsPreload").run(["$templateCache",function(a){a.put("views/design/kits/organic-kit.html","<div class='organic-bg' ng-style='{backgroundColor: $ctrl.getColorAccordingToPalette(&#39;L2&#39;, $ctrl.ePaletteColorPickerStates.secondaryColor)}'>\n<div class='organic-line-1' ng-style='{backgroundColor: $ctrl.getColorAccordingToPalette(&#39;L3&#39;, $ctrl.ePaletteColorPickerStates.mainColor)}'></div>\n<div class='organic-line-2' ng-style='{backgroundColor: $ctrl.getColorAccordingToPalette(&#39;D2&#39;, $ctrl.ePaletteColorPickerStates.thirdColor)}'></div>\n<div class='organic-line-3' ng-style='{backgroundColor: $ctrl.getColorAccordingToPalette(&#39;D3&#39;, $ctrl.ePaletteColorPickerStates.fourthColor)}'></div>\n<div class='organic-box' ng-style='{backgroundColor: $ctrl.getBoxColor(&#39;L1&#39;)}'>\n<label data-hook='kit-thumbnail-label' ng-class='$ctrl.getTextClass()' ng-style='{color: $ctrl.getTextColor(&#39;D1&#39;), fontFamily: $ctrl.getFontFaceOfKit(&#39;font_0&#39;)}'>{{ $ctrl.getDisplayName() }}</label>\n</div>\n</div>\n")}]);try{angular.module("siteGeneratorStaticsPreload")}catch(e){angular.module("siteGeneratorStaticsPreload",[])}angular.module("siteGeneratorStaticsPreload").run(["$templateCache",function(a){a.put("views/design/kits/playground-kit.html","<div class='playground-bg' ng-style='{backgroundColor: $ctrl.getColorAccordingToPalette(&#39;D3&#39;, $ctrl.ePaletteColorPickerStates.secondaryColor)}'>\n<div class='playground-line' ng-style='{backgroundColor: $ctrl.getColorAccordingToPalette(&#39;L2&#39;, $ctrl.ePaletteColorPickerStates.mainColor)}'></div>\n<div class='playground-box' ng-style='{backgroundColor: $ctrl.getBoxColor(&#39;L1&#39;)}'>\n<label data-hook='kit-thumbnail-label' ng-class='$ctrl.getTextClass()' ng-style='{color: $ctrl.getTextColor(&#39;D1&#39;), fontFamily: $ctrl.getFontFaceOfKit(&#39;font_0&#39;)}'>{{ $ctrl.getDisplayName() }}</label>\n</div>\n</div>\n")}]);try{angular.module("siteGeneratorStaticsPreload")}catch(e){angular.module("siteGeneratorStaticsPreload",[])}angular.module("siteGeneratorStaticsPreload").run(["$templateCache",function(a){a.put("views/design/kits/pure-kit.html","<div class='pure-bg' ng-style='{backgroundColor: $ctrl.getColorAccordingToPalette(&#39;D3&#39;, $ctrl.ePaletteColorPickerStates.fourthColor)}'>\n<div class='pure-line-left' ng-style='{backgroundColor: $ctrl.getColorAccordingToPalette(&#39;D2&#39;, $ctrl.ePaletteColorPickerStates.thirdColor)}'></div>\n<div class='pure-line-middle' ng-style='{backgroundColor: $ctrl.getColorAccordingToPalette(&#39;L2&#39;, $ctrl.ePaletteColorPickerStates.fourthColor)}'></div>\n<div class='pure-line-right' ng-style='{backgroundColor: $ctrl.getColorAccordingToPalette(&#39;L3&#39;, $ctrl.ePaletteColorPickerStates.mainColor)}'></div>\n<div class='pure-box' ng-style='{backgroundColor: $ctrl.getBoxColor(&#39;D1&#39;)}'>\n<label data-hook='kit-thumbnail-label' ng-class='$ctrl.getTextClass()' ng-style='{color: $ctrl.getTextColor(&#39;L1&#39;), fontFamily: $ctrl.getFontFaceOfKit(&#39;font_0&#39;)}'>{{ $ctrl.getDisplayName() }}</label>\n</div>\n</div>\n")}]);try{angular.module("siteGeneratorStaticsPreload")}catch(e){angular.module("siteGeneratorStaticsPreload",[])}angular.module("siteGeneratorStaticsPreload").run(["$templateCache",function(a){a.put("views/design/kits/rosewater-kit.html","<div class='rosewater-bg' ng-style='{backgroundColor: $ctrl.getColorAccordingToPalette(&#39;L2&#39;, $ctrl.ePaletteColorPickerStates.secondaryColor)}'>\n<div class='rosewater-box-left' ng-style='{backgroundColor: $ctrl.getColorAccordingToPalette(&#39;L3&#39;, $ctrl.ePaletteColorPickerStates.mainColor)}'></div>\n<div class='rosewater-box' ng-style='{backgroundColor: $ctrl.getBoxColor(&#39;L1&#39;)}'>\n<label data-hook='kit-thumbnail-label' ng-class='$ctrl.getTextClass()' ng-style='{color: $ctrl.getTextColor(&#39;D1&#39;), fontFamily: $ctrl.getFontFaceOfKit(&#39;font_0&#39;)}'>{{ $ctrl.getDisplayName() }}</label>\n</div>\n</div>\n")}]);try{angular.module("siteGeneratorStaticsPreload")}catch(e){angular.module("siteGeneratorStaticsPreload",[])}angular.module("siteGeneratorStaticsPreload").run(["$templateCache",function(a){a.put("views/design/kits/royal-kit.html","<div class='royal-bg' ng-style='{backgroundColor: $ctrl.getColorAccordingToPalette(&#39;L3&#39;, $ctrl.ePaletteColorPickerStates.mainColor)}'>\n<div class='royal-big-line' ng-style='{backgroundColor: $ctrl.getColorAccordingToPalette(&#39;D2&#39;, $ctrl.ePaletteColorPickerStates.secondaryColor)}'></div>\n<div class='royal-small-line' ng-style='{backgroundColor: $ctrl.getColorAccordingToPalette(&#39;D2&#39;, $ctrl.ePaletteColorPickerStates.secondaryColor)}'></div>\n<div class='royal-box' ng-style='{backgroundColor: $ctrl.getBoxColor(&#39;L1&#39;)}'>\n<label data-hook='kit-thumbnail-label' ng-class='$ctrl.getTextClass()' ng-style='{color: $ctrl.getTextColor(&#39;D1&#39;), fontFamily: $ctrl.getFontFaceOfKit(&#39;font_0&#39;)}'>{{ $ctrl.getDisplayName() }}</label>\n</div>\n</div>\n");
}]);try{angular.module("siteGeneratorStaticsPreload")}catch(e){angular.module("siteGeneratorStaticsPreload",[])}angular.module("siteGeneratorStaticsPreload").run(["$templateCache",function(a){a.put("views/design/kits/rustic-kit.html","<div class='rustic-bg' ng-style='{backgroundColor: $ctrl.getColorAccordingToPalette(&#39;L2&#39;, $ctrl.ePaletteColorPickerStates.secondaryColor)}'>\n<div class='rustic-box-left' ng-style='{backgroundColor: $ctrl.getColorAccordingToPalette(&#39;D2&#39;, $ctrl.ePaletteColorPickerStates.mainColor)}'></div>\n<div class='rustic-box' ng-style='{backgroundColor: $ctrl.getBoxColor(&#39;L1&#39;)}'>\n<label data-hook='kit-thumbnail-label' ng-class='$ctrl.getTextClass()' ng-style='{color: $ctrl.getTextColor(&#39;D2&#39;), fontFamily: $ctrl.getFontFaceOfKit(&#39;font_0&#39;)}'>{{ $ctrl.getDisplayName() }}</label>\n</div>\n</div>\n")}]);try{angular.module("siteGeneratorStaticsPreload")}catch(e){angular.module("siteGeneratorStaticsPreload",[])}angular.module("siteGeneratorStaticsPreload").run(["$templateCache",function(a){a.put("views/design/kits/serene-kit.html","<div class='serene-bg' ng-style='{backgroundColor: $ctrl.getColorAccordingToPalette(&#39;D1&#39;, $ctrl.ePaletteColorPickerStates.black)}'>\n<div class='serene-left-line' ng-style='{backgroundColor: $ctrl.getColorAccordingToPalette(&#39;D2&#39;, $ctrl.ePaletteColorPickerStates.secondaryColor)}'></div>\n<div class='serene-middle-line' ng-style='{backgroundColor: $ctrl.getColorAccordingToPalette(&#39;D2&#39;, $ctrl.ePaletteColorPickerStates.secondaryColor)}'></div>\n<div class='serene-right-line' ng-style='{backgroundColor: $ctrl.getColorAccordingToPalette(&#39;D3&#39;, $ctrl.ePaletteColorPickerStates.mainColor)}'></div>\n<div class='serene-box' ng-style='{backgroundColor: $ctrl.getBoxColor(&#39;L1&#39;)}'>\n<label data-hook='kit-thumbnail-label' ng-class='$ctrl.getTextClass()' ng-style='{color: $ctrl.getTextColor(&#39;D1&#39;), fontFamily: $ctrl.getFontFaceOfKit(&#39;font_0&#39;)}'>{{ $ctrl.getDisplayName() }}</label>\n</div>\n</div>\n")}]);try{angular.module("siteGeneratorStaticsPreload")}catch(e){angular.module("siteGeneratorStaticsPreload",[])}angular.module("siteGeneratorStaticsPreload").run(["$templateCache",function(a){a.put("views/design/kits/sincere-kit.html","<div class='sincere-bg' ng-style='{backgroundColor: $ctrl.getColorAccordingToPalette(&#39;L3&#39;, $ctrl.ePaletteColorPickerStates.mainColor)}'>\n<div class='sincere-line-left' ng-style='{backgroundColor: $ctrl.getColorAccordingToPalette(&#39;D1&#39;, $ctrl.ePaletteColorPickerStates.black)}'></div>\n<div class='sincere-line-middle' ng-style='{backgroundColor: $ctrl.getColorAccordingToPalette(&#39;D2&#39;, $ctrl.ePaletteColorPickerStates.secondaryColor)}'></div>\n<div class='sincere-line-right' ng-style='{backgroundColor: $ctrl.getColorAccordingToPalette(&#39;D2&#39;, $ctrl.ePaletteColorPickerStates.secondaryColor)}'></div>\n<div class='sincere-box' ng-style='{backgroundColor: $ctrl.getBoxColor(&#39;L1&#39;)}'>\n<label data-hook='kit-thumbnail-label' ng-class='$ctrl.getTextClass()' ng-style='{color: $ctrl.getTextColor(&#39;D1&#39;), fontFamily: $ctrl.getFontFaceOfKit(&#39;font_0&#39;)}'>{{ $ctrl.getDisplayName() }}</label>\n</div>\n</div>\n")}]);try{angular.module("siteGeneratorStaticsPreload")}catch(e){angular.module("siteGeneratorStaticsPreload",[])}angular.module("siteGeneratorStaticsPreload").run(["$templateCache",function(a){a.put("views/design/kits/smart-kit.html","<div class='smart-bg' ng-style='{backgroundColor: $ctrl.getColorAccordingToPalette(&#39;D1&#39;, $ctrl.ePaletteColorPickerStates.mainColor)}'>\n<div class='smart-box-left' ng-style='{backgroundColor: $ctrl.getColorAccordingToPalette(&#39;L1&#39;, $ctrl.ePaletteColorPickerStates.white)}'></div>\n<div class='smart-box' ng-style='{backgroundColor: $ctrl.getBoxColor(&#39;L1&#39;)}'>\n<label data-hook='kit-thumbnail-label' ng-class='$ctrl.getTextClass()' ng-style='{color: $ctrl.getTextColor(&#39;D1&#39;), fontFamily: $ctrl.getFontFaceOfKit(&#39;font_0&#39;)}'>{{ $ctrl.getDisplayName() }}</label>\n</div>\n</div>\n")}]);try{angular.module("siteGeneratorStaticsPreload")}catch(e){angular.module("siteGeneratorStaticsPreload",[])}angular.module("siteGeneratorStaticsPreload").run(["$templateCache",function(a){a.put("views/design/kits/soho-kit.html","<div class='soho-bg' ng-style='{backgroundColor: $ctrl.getColorAccordingToPalette(&#39;L2&#39;, $ctrl.ePaletteColorPickerStates.mainColor)}'>\n<div class='soho-bg-right' ng-style='{backgroundColor: $ctrl.getColorAccordingToPalette(&#39;D2&#39;, $ctrl.ePaletteColorPickerStates.black)}'></div>\n<div class='soho-bg-left' ng-style='{backgroundColor: $ctrl.getColorAccordingToPalette(&#39;L3&#39;, $ctrl.ePaletteColorPickerStates.mainColor)}'></div>\n<div class='soho-box' ng-style='{backgroundColor: $ctrl.getBoxColor(&#39;L1&#39;)}'>\n<label data-hook='kit-thumbnail-label' ng-class='$ctrl.getTextClass()' ng-style='{color: $ctrl.getTextColor(&#39;D1&#39;), fontFamily: $ctrl.getFontFaceOfKit(&#39;font_0&#39;)}'>{{ $ctrl.getDisplayName() }}</label>\n</div>\n</div>\n")}]);try{angular.module("siteGeneratorStaticsPreload")}catch(e){angular.module("siteGeneratorStaticsPreload",[])}angular.module("siteGeneratorStaticsPreload").run(["$templateCache",function(a){a.put("views/design/kits/sophisticated-kit.html","<div class='sophisticated-bg' ng-style='{backgroundColor: $ctrl.getColorAccordingToPalette(&#39;D2&#39;, $ctrl.ePaletteColorPickerStates.secondaryColor)}'>\n<div class='sophisticated-box-left' ng-style='{backgroundColor: $ctrl.getColorAccordingToPalette(&#39;L2&#39;, $ctrl.ePaletteColorPickerStates.mainColor)}'></div>\n<div class='sophisticated-box-right' ng-style='{backgroundColor: $ctrl.getColorAccordingToPalette(&#39;D3&#39;, $ctrl.ePaletteColorPickerStates.mainColor)}'></div>\n<div class='sophisticated-box' ng-style='{backgroundColor: $ctrl.getBoxColor(&#39;L1&#39;)}'>\n<label data-hook='kit-thumbnail-label' ng-class='$ctrl.getTextClass()' ng-style='{color: $ctrl.getTextColor(&#39;D1&#39;), fontFamily: $ctrl.getFontFaceOfKit(&#39;font_0&#39;)}'>{{ $ctrl.getDisplayName() }}</label>\n</div>\n</div>\n")}]);try{angular.module("siteGeneratorStaticsPreload")}catch(e){angular.module("siteGeneratorStaticsPreload",[])}angular.module("siteGeneratorStaticsPreload").run(["$templateCache",function(a){a.put("views/design/kits/spark-kit.html","<div class='spark-bg' ng-style='{backgroundColor: $ctrl.getColorAccordingToPalette(&#39;D1&#39;, $ctrl.ePaletteColorPickerStates.black)}'>\n<div class='spark-box-left' ng-style='{backgroundColor: $ctrl.getColorAccordingToPalette(&#39;L2&#39;, $ctrl.ePaletteColorPickerStates.secondaryColor)}'></div>\n<div class='spark-box-right' ng-style='{backgroundColor: $ctrl.getColorAccordingToPalette(&#39;D3&#39;, $ctrl.ePaletteColorPickerStates.mainColor)}'></div>\n<div class='spark-box' ng-style='{backgroundColor: $ctrl.getBoxColor(&#39;D1&#39;)}'>\n<label data-hook='kit-thumbnail-label' ng-class='$ctrl.getTextClass()' ng-style='{color: $ctrl.getTextColor(&#39;L1&#39;), fontFamily: $ctrl.getFontFaceOfKit(&#39;font_0&#39;)}'>{{ $ctrl.getDisplayName() }}</label>\n</div>\n</div>\n")}]);try{angular.module("siteGeneratorStaticsPreload")}catch(e){angular.module("siteGeneratorStaticsPreload",[])}angular.module("siteGeneratorStaticsPreload").run(["$templateCache",function(a){a.put("views/design/kits/skyscraper-kit.html","<div class='skyscraper-bg' ng-style='{backgroundColor: $ctrl.getColorAccordingToPalette(&#39;D1&#39;, $ctrl.ePaletteColorPickerStates.black)}'>\n<div class='skyscraper-box-left' ng-style='{backgroundColor: $ctrl.getColorAccordingToPalette(&#39;D2&#39;, $ctrl.ePaletteColorPickerStates.secondaryColor)}'></div>\n<div class='skyscraper-box-middle' ng-style='{backgroundColor: $ctrl.getColorAccordingToPalette(&#39;D2&#39;, $ctrl.ePaletteColorPickerStates.secondaryColor)}'></div>\n<div class='skyscraper-box-right' ng-style='{backgroundColor: $ctrl.getColorAccordingToPalette(&#39;D2&#39;, $ctrl.ePaletteColorPickerStates.secondaryColor)}'></div>\n<div class='skyscraper-box' ng-style='{backgroundColor: $ctrl.getBoxColor(&#39;L1&#39;)}'>\n<label data-hook='kit-thumbnail-label' ng-class='$ctrl.getTextClass()' ng-style='{color: $ctrl.getTextColor(&#39;D1&#39;), fontFamily: $ctrl.getFontFaceOfKit(&#39;font_0&#39;)}'>{{ $ctrl.getDisplayName() }}</label>\n</div>\n</div>\n")}]);try{angular.module("siteGeneratorStaticsPreload")}catch(e){angular.module("siteGeneratorStaticsPreload",[])}angular.module("siteGeneratorStaticsPreload").run(["$templateCache",function(a){a.put("views/design/kits/sugar-kit.html","<div class='sugar-bg' ng-style='{backgroundColor: $ctrl.getColorAccordingToPalette(&#39;D3&#39;, $ctrl.ePaletteColorPickerStates.mainColor)}'>\n<div class='sugar-small-line' ng-style='{backgroundColor: $ctrl.getColorAccordingToPalette(&#39;D1&#39;, $ctrl.ePaletteColorPickerStates.black)}'></div>\n<div class='sugar-big-line' ng-style='{backgroundColor: $ctrl.getColorAccordingToPalette(&#39;L2&#39;, $ctrl.ePaletteColorPickerStates.secondaryColor)}'></div>\n<div class='sugar-box' ng-style='{backgroundColor: $ctrl.getBoxColor(&#39;L2&#39;)}'>\n<label data-hook='kit-thumbnail-label' ng-class='$ctrl.getTextClass()' ng-style='{color: $ctrl.getTextColor(&#39;D3&#39;), fontFamily: $ctrl.getFontFaceOfKit(&#39;font_0&#39;)}'>{{ $ctrl.getDisplayName() }}</label>\n</div>\n</div>\n")}]);try{angular.module("siteGeneratorStaticsPreload")}catch(e){angular.module("siteGeneratorStaticsPreload",[])}angular.module("siteGeneratorStaticsPreload").run(["$templateCache",function(a){a.put("views/design/kits/tender-kit.html","<div class='tender-bg' ng-style='{backgroundColor: $ctrl.getColorAccordingToPalette(&#39;D3&#39;, $ctrl.ePaletteColorPickerStates.mainColor)}'>\n<div class='tender-line-left' ng-style='{backgroundColor: $ctrl.getColorAccordingToPalette(&#39;D2&#39;, $ctrl.ePaletteColorPickerStates.secondaryColor)}'></div>\n<div class='tender-line-middle' ng-style='{backgroundColor: $ctrl.getColorAccordingToPalette(&#39;L2&#39;, $ctrl.ePaletteColorPickerStates.thirdColor)}'></div>\n<div class='tender-line-right' ng-style='{backgroundColor: $ctrl.getColorAccordingToPalette(&#39;L3&#39;, $ctrl.ePaletteColorPickerStates.fourthColor)}'></div>\n<div class='tender-box' ng-style='{backgroundColor: $ctrl.getBoxColor(&#39;D1&#39;)}'>\n<label data-hook='kit-thumbnail-label' ng-class='$ctrl.getTextClass()' ng-style='{color: $ctrl.getTextColor(&#39;L1&#39;), fontFamily: $ctrl.getFontFaceOfKit(&#39;font_0&#39;)}'>{{ $ctrl.getDisplayName() }}</label>\n</div>\n</div>\n")}]);try{angular.module("siteGeneratorStaticsPreload")}catch(e){angular.module("siteGeneratorStaticsPreload",[])}angular.module("siteGeneratorStaticsPreload").run(["$templateCache",function(a){a.put("views/design/kits/timeless-kit.html","<div class='timeless-bg' ng-style='{backgroundColor: $ctrl.getColorAccordingToPalette(&#39;L3&#39;, $ctrl.ePaletteColorPickerStates.mainColor)}'>\n<div class='timeless-box-right' ng-style='{backgroundColor: $ctrl.getColorAccordingToPalette(&#39;L2&#39;, $ctrl.ePaletteColorPickerStates.secondaryColor)}'></div>\n<div class='timeless-box' ng-style='{backgroundColor: $ctrl.getBoxColor(&#39;D1&#39;)}'>\n<label data-hook='kit-thumbnail-label' ng-class='$ctrl.getTextClass()' ng-style='{color: $ctrl.getTextColor(&#39;L1&#39;), fontFamily: $ctrl.getFontFaceOfKit(&#39;font_0&#39;)}'>{{ $ctrl.getDisplayName() }}</label>\n</div>\n</div>\n")}]);try{angular.module("siteGeneratorStaticsPreload")}catch(e){angular.module("siteGeneratorStaticsPreload",[])}angular.module("siteGeneratorStaticsPreload").run(["$templateCache",function(a){a.put("views/design/kits/unplugged-kit.html","<div class='unplugged-bg' ng-style='{backgroundColor: $ctrl.getColorAccordingToPalette(&#39;D3&#39;, $ctrl.ePaletteColorPickerStates.mainColor)}'>\n<div class='unplugged-line-1' ng-style='{backgroundColor: $ctrl.getColorAccordingToPalette(&#39;D1&#39;, $ctrl.ePaletteColorPickerStates.black)}'></div>\n<div class='unplugged-line-2' ng-style='{backgroundColor: $ctrl.getColorAccordingToPalette(&#39;D1&#39;, $ctrl.ePaletteColorPickerStates.black)}'></div>\n<div class='unplugged-line-3' ng-style='{backgroundColor: $ctrl.getColorAccordingToPalette(&#39;D1&#39;, $ctrl.ePaletteColorPickerStates.black)}'></div>\n<div class='unplugged-line-4' ng-style='{backgroundColor: $ctrl.getColorAccordingToPalette(&#39;D1&#39;, $ctrl.ePaletteColorPickerStates.black)}'></div>\n<div class='unplugged-box' ng-style='{backgroundColor: $ctrl.getBoxColor(&#39;L1&#39;)}'>\n<label data-hook='kit-thumbnail-label' ng-class='$ctrl.getTextClass()' ng-style='{color: $ctrl.getTextColor(&#39;D1&#39;), fontFamily: $ctrl.getFontFaceOfKit(&#39;font_0&#39;)}'>{{ $ctrl.getDisplayName() }}</label>\n</div>\n</div>\n")}]);try{angular.module("siteGeneratorStaticsPreload")}catch(e){angular.module("siteGeneratorStaticsPreload",[])}angular.module("siteGeneratorStaticsPreload").run(["$templateCache",function(a){a.put("views/design/kits/upbeat-kit.html","<div class='upbeat-bg' ng-style='{backgroundColor: $ctrl.getColorAccordingToPalette(&#39;D2&#39;, $ctrl.ePaletteColorPickerStates.mainColor)}'>\n<div class='upbeat-line' ng-style='{backgroundColor: $ctrl.getColorAccordingToPalette(&#39;L3&#39;, $ctrl.ePaletteColorPickerStates.white)}'></div>\n<div class='upbeat-box' ng-style='{backgroundColor: $ctrl.getBoxColor(&#39;L1&#39;)}'>\n<label data-hook='kit-thumbnail-label' ng-class='$ctrl.getTextClass()' ng-style='{color: $ctrl.getTextColor(&#39;D1&#39;), fontFamily: $ctrl.getFontFaceOfKit(&#39;font_0&#39;)}'>{{ $ctrl.getDisplayName() }}</label>\n</div>\n</div>\n")}]);try{angular.module("siteGeneratorStaticsPreload")}catch(e){angular.module("siteGeneratorStaticsPreload",[])}angular.module("siteGeneratorStaticsPreload").run(["$templateCache",function(a){a.put("views/design/kits/vintage-kit.html","<div class='vintage-bg' ng-style='{backgroundColor: $ctrl.getColorAccordingToPalette(&#39;D1&#39;, $ctrl.ePaletteColorPickerStates.black)}'>\n<div class='vintage-top-line' ng-style='{backgroundColor: $ctrl.getColorAccordingToPalette(&#39;L2&#39;, $ctrl.ePaletteColorPickerStates.white)}'></div>\n<div class='vintage-bottom-line' ng-style='{backgroundColor: $ctrl.getColorAccordingToPalette(&#39;D3&#39;, $ctrl.ePaletteColorPickerStates.mainColor)}'></div>\n<div class='vintage-box' ng-style='{backgroundColor: $ctrl.getBoxColor(&#39;L1&#39;)}'>\n<label data-hook='kit-thumbnail-label' ng-class='$ctrl.getTextClass()' ng-style='{color: $ctrl.getTextColor(&#39;D2&#39;), fontFamily: $ctrl.getFontFaceOfKit(&#39;font_0&#39;)}'>{{ $ctrl.getDisplayName() }}</label>\n</div>\n</div>\n")}]);try{angular.module("siteGeneratorStaticsPreload")}catch(e){angular.module("siteGeneratorStaticsPreload",[])}angular.module("siteGeneratorStaticsPreload").run(["$templateCache",function(a){a.put("views/design/kits/vogue-kit.html","<div class='vogue-bg' ng-style='{backgroundColor: $ctrl.getColorAccordingToPalette(&#39;L3&#39;, $ctrl.ePaletteColorPickerStates.mainColor)}'>\n<div class='vogue-small-line' ng-style='{backgroundColor: $ctrl.getColorAccordingToPalette(&#39;L1&#39;, $ctrl.ePaletteColorPickerStates.white)}'></div>\n<div class='vogue-big-line' ng-style='{backgroundColor: $ctrl.getColorAccordingToPalette(&#39;D2&#39;, $ctrl.ePaletteColorPickerStates.black)}'></div>\n<div class='vogue-box' ng-style='{backgroundColor: $ctrl.getBoxColor(&#39;L1&#39;)}'>\n<label data-hook='kit-thumbnail-label' ng-class='$ctrl.getTextClass()' ng-style='{color: $ctrl.getTextColor(&#39;D2&#39;), fontFamily: $ctrl.getFontFaceOfKit(&#39;font_0&#39;)}'>{{ $ctrl.getDisplayName() }}</label>\n</div>\n</div>\n")}]);try{angular.module("siteGeneratorStaticsPreload")}catch(e){angular.module("siteGeneratorStaticsPreload",[])}angular.module("siteGeneratorStaticsPreload").run(["$templateCache",function(a){a.put("views/editor/tpa-manage-dialog.html","<md-dialog aria-describedby='tpa-manage-dialog' aria-label='tpa-manage-dialog' class='tpa-manage-dialog md-transition-in' ng-class='[{ &#39;-fullscreen&#39;: $ctrl.fullScreen }, &#39;-type-&#39; + $ctrl.type]' role='dialog' tabindex='-1'>\n<iframe ng-if='$ctrl.fullScreen' ng-src='{{$ctrl.manageUrl | trustUrl}}'></iframe>\n<cc-panel-frame label='{{$ctrl.title}}' ng-if='!$ctrl.fullScreen' on-close='$ctrl.close()' on-help='$ctrl.help()' show-close-button='true' show-help-button='true'>\n<iframe ng-src='{{$ctrl.manageUrl | trustUrl}}'></iframe>\n</cc-panel-frame>\n</md-dialog>\n")}]);try{angular.module("siteGeneratorStaticsPreload")}catch(e){angular.module("siteGeneratorStaticsPreload",[])}angular.module("siteGeneratorStaticsPreload").run(["$templateCache",function(a){a.put("views/design/palette-color-picker.html","<div class='colors-container'>\n<div class='color-wrapper' ng-repeat='selection in $ctrl.colors track by $index'>\n<p21-color-tag color='{{selection.color}}' is-selected='$ctrl.isSelected(selection)' on-click='$ctrl.colorClick(selection)' size='{{$ctrl.colorsSize || &#39;sm&#39;}}'></p21-color-tag>\n</div>\n<div class='color-wrapper' ng-if='$ctrl.showAddColor'>\n<p21-color-tag is-placeholder='true' on-click='$ctrl.placeholderClick()' size='{{$ctrl.colorsSize || &#39;sm&#39;}}' tooltip='design_coloration_add_color'></p21-color-tag>\n</div>\n</div>\n")}]);try{angular.module("siteGeneratorStaticsPreload")}catch(e){angular.module("siteGeneratorStaticsPreload",[])}angular.module("siteGeneratorStaticsPreload").run(["$templateCache",function(a){a.put("views/design/palette-color-dialog.html","<md-dialog aria-label='Coose Color dialog' class='colors-dialog' ng-class='[$ctrl.layout, {&#39;has-paragraph&#39;: $ctrl.getParagraph()}]'>\n<div class='dialog-arrow'></div>\n<div class='dialog-inner'>\n<p16-panel-header label='{{::&#39;design.coloration.customize-palette.title&#39; | translate: {colorTypeName: $ctrl.colorTypeName} }}' ng-class='{&#39;show-return-button&#39;: $ctrl.showReturnButton}' on-close='$ctrl.onClose()' on-return='$ctrl.onReturn()' show-close-button='true' show-return-button='$ctrl.showReturnButton'></p16-panel-header>\n<c11-paragraph html='$ctrl.getParagraph()' ng-show='$ctrl.getParagraph()'></c11-paragraph>\n<palette-color-picker colors='$ctrl.colors' data-hook='palette-color-picker' ng-if='!$ctrl.isAdvancedMode()' on-color-selected='$ctrl.colorSelected(selection)' on-placeholder-click='$ctrl.placeholderClick()' selected-color='$ctrl.selectedColor' show-add-color='true'></palette-color-picker>\n<advanced-color-picker data-hook='advanced-color-picker' ng-if='$ctrl.isAdvancedMode()' on-cancel='$ctrl.onClose()' on-color-selected='$ctrl.colorSelected(selection)' selected-color='$ctrl.selectedColor' show-buttons='true'></advanced-color-picker>\n</div>\n</md-dialog>\n")}]);try{angular.module("siteGeneratorStaticsPreload")}catch(e){angular.module("siteGeneratorStaticsPreload",[])}angular.module("siteGeneratorStaticsPreload").run(["$templateCache",function(a){a.put("views/tester.html","<open-site-loader></open-site-loader>\n")}]);try{angular.module("siteGeneratorStaticsPreload")}catch(e){angular.module("siteGeneratorStaticsPreload",[])}angular.module("siteGeneratorStaticsPreload").run(["$templateCache",function(a){a.put("views/logo-color-playground.html","<cc-panel-frame>\n<h2>Logo Color Extraction</h2>\n<p0-spacer></p0-spacer>\n<div ng-repeat='image in $ctrl.listOfLogos' style='background: repeating-linear-gradient(45deg, #EEE, #EEE 5px, #CCC 5px, #CCC 10px); width: 1500px'>\n<img logoonload='$ctrl.calcPalette(image)' ng-src='{{ image.url }}'>\n<div ng-style='{&#39;background-color&#39;:image.palette[0]}' style='padding: 20px; display: inline-block'>\n<img ng-src='{{ image.url }}'>\n</div>\n<p24-palette colors='image.palette'></p24-palette>\n<p0-spacer></p0-spacer>\n</div>\n</cc-panel-frame>\n")}]);try{angular.module("siteGeneratorStaticsPreload")}catch(e){angular.module("siteGeneratorStaticsPreload",[])}angular.module("siteGeneratorStaticsPreload").run(["$templateCache",function(a){a.put("views/common/hidden-background.html","<div class='hidden-background c11-paragraph' data-hook='inner' ng-class='{&#39;-with-hide-link&#39;: $ctrl.shouldShowHideLink}' ng-if='$ctrl.showElement'>\n<span class='label' data-hook='label' wix-translate-compile='common.hidden-background.label'></span>\n<span class='hide-media' data-hook='hide-media' ng-if='$ctrl.shouldShowHideLink' wix-translate-compile='common.hidden-background.hide-media'></span>\n</div>\n")}]);try{angular.module("siteGeneratorStaticsPreload")}catch(e){angular.module("siteGeneratorStaticsPreload",[])}angular.module("siteGeneratorStaticsPreload").run(["$templateCache",function(a){a.put("views/assistant-tip.html","<div class='assistant-tip' ng-class='$ctrl.componentClass'>\n<div class='header' ng-if='$ctrl.showTitle'>\n<cc-svg-icon icon='coloration:magic-wand'></cc-svg-icon>\n{{$ctrl.titleText}}\n</div>\n<p17-divider ng-if='$ctrl.showDivider'></p17-divider>\n<div class='message'>{{$ctrl.text}}</div>\n<div class='action'>\n<button ng-class='$ctrl.buttonClass' ng-click='$ctrl.onAction()'>\n{{$ctrl.actionText}}\n</button>\n</div>\n</div>\n")}]);var ValuesDiff=function(){function a(a,b){this.oldValue=a,this.newValue=b}return a}(),NodeChangeReporterService=function(){function a(a,b,c,d){this.applicationState=a,this.modelTree=b,this.socialLinkManager=c,this.consumerBiLogger=d}return a.$inject=["applicationState","modelTree","socialLinkManager","consumerBiLogger"],a.prototype.handleValuesChanges=function(a,b){var c=_.last(b.key.split("."));if(a.contentElement&&this.isFieldRelevant(a.contentElement.type,b.key)&&this.clonedNode[c]){var d=this.getChangedValuesOfObjects(this.clonedNode[c],b);d&&d.newValue!==d.oldValue&&(this.sendBiEvents(b,c,d),this.init(a))}},a.prototype.init=function(a){var b=this.modelTree.getNodeByContentElementName("Social"),c=this.modelTree.getNodeByContentElementName("Contact"),d=a.contentElement?a.contentElement.values:{};this.clonedNode=_.merge({},b.contentElement.values,c.contentElement.values,d)},a.prototype.isFieldRelevant=function(a,b){return"GeneralDescription"===a&&("BusinessName"===b||"Logo"===b||"MainEmail"===b||"Contact.phone number"===b||"Social.SocialButtons"===b)},a.prototype.getAction=function(a,b){var c="edit";return b?a||(c="remove"):c="add",c},a.prototype.sendBiEvents=function(a,b,c){var d=this.getFieldName(b,a,c.newValue),e=this.getFieldType(b),f=this.getAction(c.newValue,c.oldValue);this.consumerBiLogger.intro.infoCardAddEditRemoveInfo(d,e,c.newValue.length,f,"header",null)},a.prototype.getChangedObject=function(a,b){if(a.length>b.length){var c=a[a.length-1];return new ValuesDiff(c.targetUrl,"")}if(a.length<b.length){var d=b[b.length-1];return new ValuesDiff("",d.targetUrl)}var e;return _.find(a,function(a,c){_.isEqual(a,b[c])||(e=new ValuesDiff(a.targetUrl,b[c].targetUrl))}),e?new ValuesDiff(e.oldValue,e.newValue):new ValuesDiff("","")},a.prototype.getRelevantFieldsFromObjects=function(a,b){return a.map(function(a){var c={};return b.forEach(function(b){var d=_.get(a,b),e=_.last(b.split(".")).toString();c[e]=d}),c})},a.prototype.getChangedValuesForSocial=function(a,b){var c=["Link.targetUrl"],d=this.getRelevantFieldsFromObjects(a.value,c),e=this.getRelevantFieldsFromObjects(b,c),f=this.getChangedObject(d,e);return new ValuesDiff(f.oldValue,f.newValue)},a.prototype.getChangedValuesForLogo=function(a,b){var c=["active","relativeUri"],d=this.getRelevantFieldsFromObjects(a.value,c),e=this.getRelevantFieldsFromObjects(b.node.contentElement.values.Logo.value,c),f=d.find(function(a){return a.active===!0}),g=e.find(function(a){return a.active===!0});return f&&g?new ValuesDiff(f.relativeUri,g.relativeUri):new ValuesDiff("","")},a.prototype.getChangedValuesOfObjects=function(a,b){if("media"===a.type){if("social"===a.subType){var c=b.field.value||b.field;return this.getChangedValuesForSocial(a,c)}return this.getChangedValuesForLogo(a,b)}return new ValuesDiff(a.value,b.field.value)},a.prototype.getFieldType=function(a){return"SocialButtons"===a?"social":"Logo"===a?"logo":"text"},a.prototype.getFieldName=function(a,b,c){return"SocialButtons"===a?this.socialLinkManager.getPlatformNameByUrl(c)||this.socialLinkManager.invalidPlatformName:"MainEmail"===a?"email":"BusinessName"===a?"company name":"Logo"===a?"logo":"phone number"===a?"phone":b.key},a}();angular.module("siteGeneratorStaticsConsumerAppInternal").service("nodeChangeReporter",NodeChangeReporterService);var NodeEditorManager=function(){function a(a,b,c,d,e,f,g,h,i,j,k,l,m,n,o,p,q,r,s,t,u,v,w,x,y,z){var A=this;this.$stateParams=a,this.flags=b,this.editorEventManager=c,this.applicationState=d,this.spinnerService=e,this.nodeChangeReporter=f,this.consumerBiLogger=g,this.consumerBiLoggerHelpers=h,this.wizardService=i,this.nodeFetcher=j,this.undoRedo=k,this.sectionManager=l,this.simpleSolutionManager=m,this.modelTree=n,this.logoHandler=o,this.mobileSolutionManager=p,this.storyServices=q,this.notification=r,this.osUtils=s,this.focusKeeper=t,this.mediaOverrideManager=u,this.pubSub=v,this.onstageActionsManager=w,this.ONSTAGE_EVENTS=x,this.listPanelManager=y,this.$injector=z,w.subscribe(x.EDIT_LIST_ITEM,function(a){!A.consumerBiLoggerHelpers.getPanelSource()&&A.consumerBiLoggerHelpers.setPanelSource(BIOrigins.OSIDropdown),A.loadItemEditor(A.listPanelManager.generateItem(a))}),w.subscribe(x.LIST_ITEM_TO_PAGE,function(a){A.makeIntoPage(a)}),w.subscribe(this.ONSTAGE_EVENTS.OPEN_SOCIAL_PANEL,function(){if(!A.isSocialEditor()){var a=z.get("contentElementFieldManager");a.resetFocus(),A.loadSocialEditor()}})}return a.$inject=["$stateParams","flags","editorEventManager","applicationState","spinnerService","nodeChangeReporter","consumerBiLogger","consumerBiLoggerHelpers","wizardService","nodeFetcher","undoRedo","sectionManager","simpleSolutionManager","modelTree","logoHandler","mobileSolutionManager","storyServices","notification","osUtils","focusKeeper","mediaOverrideManager","pubSub","onstageActionsManager","ONSTAGE_EVENTS","listPanelManager","$injector"],a.prototype.loadSocialEditor=function(){this.applicationState.goToEditMode(a.SOCIAL_ID)},a.prototype.loadItemEditor=function(a){this.applicationState.goToEditMode(a.id)},a.prototype.isSocialEditor=function(){return this.$stateParams.childId===a.SOCIAL_ID},a.prototype.makeIntoPage=function(a){var b=this;this.spinnerService.waitForMe("makeIntoPage"),this.sectionManager.makeIntoPage(a).then(function(){b.linkButtonFieldIfEmpty(a,b.storyServices.story.selectedPage),b.spinnerService.imDone("makeIntoPage")})},a.prototype.linkButtonFieldIfEmpty=function(a,b){var c=a.contentElement,d=_.find(c.values,function(a){return"button"===a.type}),e=d?d.value:{};LinkDetailsManager.isNone(e)&&(e.isPageRef=!0,e.targetPage=b,e.link={pageId:b})},a.prototype.updateViewer=function(a){var b=this,c=this.nodeFetcher.getCurrentNodeResult(),d=c.node,e=c.sitePart;if(this.applicationState.isInMobileEditMode())return this.updateMobileViewer(a);var f,g,h;if(this.nodeChangeReporter.handleValuesChanges(d,a),"fixedHeader"===a.field.type)return this.consumerBiLogger.contentEditor.fieldWasUpdatedSuccess(a.node.getId(),a.node.getSpecificContentElementType(),a.node.alias||"",a.key,"boolean",this.wizardService.isFixedHeader(),0,0),void this.afterUpdateComplete();if(a.maskChanged){h=a.isReferencedField?a.node.getReferenceFields():a.node.getArgsMatchingPolicy();var i=a.node.hasVisibleFields();f=!i,g=i&&a.node.isUserHidden()}if("media"===a.field.type&&"Logo"===a.key){var j=!h||!!h.Logo;this.logoHandler.handleLogoChange(a,j)}if(f&&this.canBeRemoved(a.node))this.sectionManager.showDeleteSectionPopup(a.node,"hide-or-delete-all-elements",function(){b.restoreFieldMask(a,h)});else if(f&&"GeneralDescription"===a.node.contentElement.type)this.sectionManager.showHideNodePopup(e)["finally"](function(){return b.restoreFieldMask(a,h)});else{var k=void 0;if(a.isReferencedField)k=this.handleReferenceFieldChanged(a);else{a.maskChanged&&this.spinnerService.waitForMe("editingNode");var l=this.modelTree.findIdentifyingNode(a.node);l=l.isList()?l:null;var m=void 0,n=!1;if(f&&a.node.contentElement.isSpecialListItem()){m=this.simpleSolutionManager.removeListSpecialItem(a.node.containerPageId,d.getId(),a.node.getId()),this.modelTree.updateNodeVisibility(a.node,l,!1);var o=a.node.getContentElement().getDependencies();_.each(o,function(c){if(c!==a.node&&c.containerPageId){var d=b.modelTree.findIdentifyingNode(c);b.modelTree.updateFieldsVisibility(c,d,a.key),b.modelTree.updateNodeVisibility(c,d),c.userHidden&&(b.modelTree.markPageAsDirty(c.containerPageId),b.simpleSolutionManager.removeListSpecialItemFromSolutionLGs(c.containerPageId,d.getId(),c.getContentElementType()))}})}else if(g&&a.node.contentElement.isSpecialListItem())m=this.addListSpecialItem(a),this.modelTree.updateFieldsVisibility(a.node,l,a.key,!0),this.modelTree.updateNodeVisibility(a.node,l,!0);else{var p,q=a.node.containerPageId,r=this.nodeFetcher.getCurrentCorrectNodeId(),s=this.getSectionSolution(),t=s.reduce(function(a,b){return b.getBoundingHeight()+a},0);this.flags.mobileEditor&&(p=this.mobileSolutionManager.getMobileSolution(s)),m=this.wizardService.onSynchronousFieldChanged(a.node,a.key,l,a.maskChanged).then(function(){return b.simpleSolutionManager.detectAndHandleSolutionFailure(q,r,a.node.getContentElement())}).then(function(a){if(a)return n=!0,a.oldHeight=t,a;if(b.doReplaceSectionOnFieldChanged()){var c=b.getSectionSolution(),d=c.reduce(function(a,b){return b.getBoundingHeight()+a},0);if(d!==t)return b.simpleSolutionManager.replaceSectionOnPage(q,r,c).then(function(a){return a.oldHeight=t,a})}}).then(function(a){if(b.flags.mobileEditor){var c=a&&a.newSolution||b.getSectionSolution();b.mobileSolutionManager.setMobileSolution(c,p),b.simpleSolutionManager.setSolutionDirty(p)}return a})}k=m.then(function(c){return b.handleLayoutChanged(c,n,"GeneralDescription"===a.node.getContentElementType()||b.modelTree.isReferenceField(a.node.getContentElementType(),a.field.name))})}k.then(function(){return b.finishUpdateViewer(a,h)})}},a.prototype.addListSpecialItem=function(a){var b,c=this;this.flags.mobileEditor&&(b=this.mobileSolutionManager.getMobileSolution(this.getSectionSolution()),this.mobileSolutionManager.addListItem(b,a.node));var d=this.nodeFetcher.getCurrentNode();return this.simpleSolutionManager.addListSpecialItem(a.node.containerPageId,d.getId(),a.node).then(function(a){if(c.flags.mobileEditor){var d=a&&a.newSolution||c.getSectionSolution();c.mobileSolutionManager.setMobileSolution(d,b),c.simpleSolutionManager.setSolutionDirty(b)}return a})},a.prototype.doReplaceSectionOnFieldChanged=function(){var a=this.nodeFetcher.getCurrentCorrectNodeId();return"header"!==a&&"footer"!==a},a.prototype.updateMobileViewer=function(a){var b=this,c=this.nodeFetcher.getCurrentActiveNode();this.spinnerService.waitForMe("mobileNodeChange");var d=this.getSectionSolution(),e=this.mobileSolutionManager.getMobileSolution(d);this.simpleSolutionManager.setSolutionDirty(e),this.mobileSolutionManager.calculatePart(this.nodeFetcher.getCurrentNodeResult().sitePart,c.containerPageId).then(function(){var a=b.mobileSolutionManager.getMobileSolution(d);return b.storyServices.renderMobileSolution(b.nodeFetcher.getCurrentNodeResult().sitePart,c.containerPageId,a,e)}).then(function(){b.afterUpdateComplete(),b.spinnerService.imDone("mobileNodeChange")})},a.prototype.getSectionSolution=function(){var a=this.nodeFetcher.getCurrentNodeResult();return this.sectionManager.getSectionSolution(a.sitePart,a.node.containerPageId,this.nodeFetcher.getCurrentCorrectNodeId())},a.prototype.canBeRemoved=function(a){return!a.contentElement.isSpecialListItem()&&"GeneralDescription"!==a.contentElement.type},a.prototype.restoreFieldMask=function(a,b){var c=this;if(b[a.key]=!0,!a.field.value){var d=void 0;return d=a.isReferencedField?this.wizardService.onReferenceFieldChanged(a.node,a.key,!0):this.wizardService.onSynchronousFieldChanged(a.node,a.key,null,!0,!0),d.then(function(){return c.simpleSolutionManager.detectAndHandleSolutionFailure(a.node.containerPageId,c.nodeFetcher.getCurrentCorrectNodeId(),a.node.getContentElement());
}).then(function(){return c.handleLayoutChanged(void 0,void 0,!0)}).then(function(){return c.finishUpdateViewer(a,b)})}},a.prototype.handleLayoutChanged=function(a,b,c){var d,e=this;if(!a||this.flags.renderedModel&&this.sameSolution(a.newSolution,a.oldSolution))d=c?this.storyServices.reRender():this.storyServices.reRenderParts();else{var f={direction:this.simpleSolutionManager.Animation.Direction.REVERSE,type:this.simpleSolutionManager.Animation.Type.CROSS_FADE,duration:.1};d=this.sectionManager.startAnimatedRender(a,f).then(function(){b&&e.notification.show("toasters.could-not-fit-text",2e3)})}return this.osUtils.isIE&&(d=d.then(function(){e.focusKeeper.restoreFocus()})),d},a.prototype.finishUpdateViewer=function(a,b){var c=this;return this.simpleSolutionManager.ensureHeaderAndFooterVisibility().then(function(a){return a?c.handleLayoutChanged(void 0,void 0,!0):void 0}).then(function(){if(a.maskChanged)c.consumerBiLogger.contentEditor.componentWasHiddenSuccess(a.node.getId(),a.node.getSpecificContentElementType(),a.node.alias||"",a.key,a.field.subType,b[a.key]?"unhide":"hide",a.BIOrigin);else if("text"===a.field.type)c.consumerBiLogger.contentEditor.fieldWasUpdatedSuccess(a.node.getId(),a.node.getSpecificContentElementType(),a.node.alias||"",a.key,a.field.subType,a.field.value,a.field.value.length,0);else if(a.subField)c.consumerBiLogger.contentEditor.fieldWasUpdatedSuccess(a.node.getId(),a.node.getSpecificContentElementType(),a.node.alias||"",a.subField.name,a.subField.type,a.subField.value,a.subField.value.length,0);else{var d=a.field.subType,e=0;if("image"===d){var f=a.node.contentElement.getValuesByMediaType();if(f.image){var g=f.image[0];e=_.get(g,"fileInput.face.length")||0}}var h=c.mediaOverrideManager.getFieldDataType(d,a.node);c.consumerBiLogger.contentEditor.fieldWasUpdatedSuccess(a.node.getId(),a.node.getSpecificContentElementType(),a.node.alias||"",a.key,h,"",0,e)}c.afterUpdateComplete(),a.maskChanged&&c.spinnerService.imDone("editingNode")})},a.prototype.afterUpdateComplete=function(){this.undoRedo.captureOperation(!1),this.pubSub.fire(PubSub.events.CONTENT_UPDATED)},a.prototype.sameSolution=function(a,b){var c=a.reduce(function(a,c,d){return a&&c===b[d]},!0);return c&&a.length===b.length},a.prototype.handleReferenceFieldChanged=function(a){var b,c=this;return this.flags.mobileEditor&&(b=this.mobileSolutionManager.getMobileSolution(this.getSectionSolution())),this.wizardService.onReferenceFieldChanged(a.node,a.key,a.maskChanged).then(function(){return c.simpleSolutionManager.detectAndHandleSolutionFailure(a.node.containerPageId,c.nodeFetcher.getCurrentCorrectNodeId(),a.node.getContentElement())}).then(function(){if(c.flags.mobileEditor){var a=c.getSectionSolution();c.mobileSolutionManager.setMobileSolution(a,b),c.simpleSolutionManager.setSolutionDirty(b)}}).then(function(){return c.handleLayoutChanged(void 0,void 0,!0)})},a}();NodeEditorManager.SOCIAL_ID="social",angular.module("siteGeneratorEditorInternal").service("nodeEditorManager",NodeEditorManager);var ListPanelManager=function(){function a(a,b,c,d,e,f,g,h,i,j,k,l,m,n,o,p,q,r){var s=this;this.$q=a,this.$translate=b,this.flags=c,this.onstageActionsManager=d,this.ONSTAGE_EVENTS=e,this.editorEventManager=f,this.nodeTitleManager=g,this.nodeFetcher=h,this.modelTree=i,this.nodeManipulationService=j,this.spinnerService=k,this.sectionManager=l,this.undoRedo=m,this.consumerBiLogger=n,this.notification=o,this.CcDialogBuilder=p,this.storyServices=q,this.pubSub=r,d.subscribe(e.HIDE_LIST_ITEM,function(a){s.onToggle(s.generateItem(a)).then(function(){r.fire(PubSub.events.LIST_ITEMS_UPDATED)})}),d.subscribe(e.DELETE_LIST_ITEM,function(a){s.onDelete(s.generateItem(a)).then(function(){r.fire(PubSub.events.LIST_ITEMS_UPDATED)})}),d.subscribe(e.DUPLICATE_LIST_ITEM,function(a){s.onDuplicate(s.generateItem(a)).then(function(){r.fire(PubSub.events.LIST_ITEMS_UPDATED)})})}return a.$inject=["$q","$translate","flags","onstageActionsManager","ONSTAGE_EVENTS","editorEventManager","nodeTitleManager","nodeFetcher","modelTree","nodeManipulationService","spinnerService","sectionManager","undoRedo","consumerBiLogger","notification","CcDialogBuilder","storyServices","pubSub"],a.prototype.generateItem=function(a){return{id:a.id,label:this.nodeTitleManager.getNodeTitleValue(a),hidden:a.isUserHidden()}},a.prototype.onDuplicate=function(a,b){var c=this.nodeFetcher.getCurrentNode();b&&this.consumerBiLogger.contentEditor.clickOnAddDuplicateItemInAList(c.getId(),c.getSpecificContentElementType(),c.alias,"duplicate");var d=this.realIndexAndStatus(a,c);this.spinnerService.waitForMe("onDuplicate");var e=c.children.length;c.children[e-1].isListFooter()&&e--;var f=this.modelTree.duplicateListItem(d.childNode,c,e);return this.addListItem(f,e,"toasters.list-item-duplicated","onDuplicate")},a.prototype.onDelete=function(a){var b=this,c=this.nodeFetcher.getCurrentNode(),d=this.getVisibleItems(c);if(1===d.length&&d[0].getId()===a.id)return this.sectionManager.showDeleteSectionPopup(c,"hide-or-delete-all-elements"),this.$q.when();var e=this.realIndexAndStatus(a,c),f={heading:this.$translate("popups.delete-list-item.heading"),text:this.$translate("popups.delete-list-item.text"),acceptButtonText:this.$translate("general.delete"),rejectButtonText:this.$translate("general.cancel"),icon:"delete-single.gif",biDialogName:CONSUMER_DIALOGS.CONFIRM_DELETE_LIST_ITEM},g=this.CcDialogBuilder.showNegativeConfirmation(f);return g.then(function(){b.spinnerService.waitForMe("onDelete");var a=b;b.nodeManipulationService.deleteNode(e.childNode,b.storyServices.story.selectedPage,!1,function(){b.removeListItem(e.indexInVisibleItemsIgnoringHeader,null,"onDelete",e.childNode).then(function(){b.notification.show("toasters.list-item-deleted","general.undo",function(){a.undoRedo.undo()}),b.consumerBiLogger.contentEditor.valueWasDeleted(c.getId(),c.getSpecificContentElementType(),c.alias,"list","list item")})})})},a.prototype.onToggle=function(a,b){var c=this,d=this.nodeFetcher.getCurrentNode(),e=this.realIndexAndStatus(a,d);if(this.nodeManipulationService.toggleNodeInlist(d,e.childNode),e.shown){var f=this.getVisibleItems(d);return 0===f.length?(this.sectionManager.showDeleteSectionPopup(d,"hide-or-delete-all-elements",function(){d.userHidden=!1,e.childNode.userHidden=!1,a.hidden=!1}),this.$q.when()):(this.spinnerService.waitForMe("onToggleHide"),b&&this.consumerBiLogger.contentEditor.clickOnHideShowOnItemInListItems("hide",d.getId(),d.getSpecificContentElementType(),d.alias),this.removeListItem(e.indexInVisibleItemsIgnoringHeader,"List item hidden","onToggleHide",e.childNode).then(function(){b&&c.consumerBiLogger.contentEditor.clickOnHideShowOnItemInListItemsSuccess("hide",d.getId(),d.getSpecificContentElementType(),d.alias)}))}return this.spinnerService.waitForMe("onToggleShow"),b&&this.consumerBiLogger.contentEditor.clickOnHideShowOnItemInListItems("unhide",d.getId(),d.getSpecificContentElementType(),d.alias),this.addListItem(e.childNode,e.indexInVisibleItemsIgnoringHeader,"List item shown","onToggleShow").then(function(){b&&c.consumerBiLogger.contentEditor.clickOnHideShowOnItemInListItemsSuccess("unhide",d.getId(),d.getSpecificContentElementType(),d.alias)})},a.prototype.addListItem=function(a,b,c,d){var e=this,f=this.nodeFetcher.getCurrentNode();return this.sectionManager.addListItem(f,a,b).then(function(){e.handleAfterUpdateList(c,d),e.consumerBiLogger.contentEditor.addDuplicateItemSuccess(f.getId(),f.getSpecificContentElementType(),f.alias,"onAdd"===d?"new":"duplicate")})},a.prototype.removeListItem=function(a,b,c,d){var e=this,f=this.$q.when(),g="onDelete"!==c||!d.userHidden;return g&&(f=this.sectionManager.removeListItem(this.nodeFetcher.getCurrentNode(),d,a)),f.then(function(){e.handleAfterUpdateList(b,c)})},a.prototype.getVisibleItems=function(a){var b=a.getContentElementType(),c=_.filter(a.children,function(a){return a.getContentElementType()===b&&!a.userHidden});return c},a.prototype.handleAfterUpdateList=function(a,b){this.undoRedo.captureOperation(!1),a&&this.notification.show(a,2e3),this.spinnerService.imDone(b)},a.prototype.realIndexAndStatus=function(a,b){var c=this.getRealItem(a,b),d=this.nodeManipulationService.nodeIndexAndStatus(b,c);if(!d)throw"cannot toggle a non list item from this flow";return d.childNode=c,d},a.prototype.getRealItem=function(a,b){return _.find(b.children,function(b){return b.id===a.id})},a}();angular.module("siteGeneratorEditorInternal").service("listPanelManager",ListPanelManager);var __assign=this&&this.__assign||Object.assign||function(a){for(var b,c=1,d=arguments.length;d>c;c++){b=arguments[c];for(var e in b)Object.prototype.hasOwnProperty.call(b,e)&&(a[e]=b[e])}return a},MediaEditorManager=function(){function a(a,b,c,d,e,f,g,h,i,j,k,l,m,n,o,p,q,r,s,t,u,v,w){var x=this;this.$timeout=a,this.flags=b,this.storyServices=c,this.mediaGallery=d,this.$mdDialog=e,this.undoRedo=f,this.cropFaceService=g,this.linkDetailsManager=h,this.editorEventManager=i,this.applicationState=j,this.consumerBiLogger=k,this.nodeFetcher=l,this.mediaOverrideManager=m,this.PresetMediaType=n,this.ONSTAGE_EVENTS=o,this.consumerMediaUtils=p,this.consumerBiLoggerHelpers=q,this.overlaySegmentManager=r,this.previewScale=s,this.overlayManager=t,this.onstageActionsManager=u,this.nodeEditorManager=v,this.pubSub=w,this.handleMediaChange=function(a,b,c,d,e,f,g){return x.consumerMediaUtils.biReplaceMediaApproved(a,d,f,g),e&&(c.fillValuesByMediaType(),x.pubSub.fire(PubSub.events.CONTENT_UPDATED),x.updateViewer(a,b,BIOrigins.OSIDropdown)),{changed:e,numTotal:f,mediaType:d}},this.handleCancellingOfMediaChange=function(a,b,c){x.consumerMediaUtils.biReplaceMediaClosed(a,b,c)},this.flags.onStageIndications&&(u.subscribe(o.OPEN_MEDIA_MANAGER,function(a){var b=x.nodeFetcher.getCurrentActiveNode(),c=x.mediaOverrideManager.getCurrentSelectedMediaPreviewType(b);x.mediaChange(c,a,a.contentElement,BIOrigins.OSIDropdown)}),u.subscribe(o.CROP_IMAGE,function(a){x.openCropper()}),u.subscribe(o.MEDIA_LINK_TO,function(a){x.changeLink()}),u.subscribe(o.CHANGE_GALLERY_TYPE,function(a){x.changeGallery()}),u.subscribe(o.OPEN_SETTINGS,function(a){x.openSettingsPanel()}))}return a.$inject=["$timeout","flags","storyServices","mediaGallery","$mdDialog","undoRedo","cropFaceService","linkDetailsManager","editorEventManager","applicationState","consumerBiLogger","nodeFetcher","mediaOverrideManager","PresetMediaType","ONSTAGE_EVENTS","consumerMediaUtils","consumerBiLoggerHelpers","overlaySegmentManager","previewScale","overlayManager","onstageActionsManager","nodeEditorManager","pubSub"],a.prototype.openSettingsPanel=function(){var a=this.nodeFetcher.getCurrentActiveNode(),b=this.mediaOverrideManager.getCurrentSelectedMediaPreviewType(a);this.consumerBiLogger.contentEditor.mediaSettingsShow(a.getId(),a.getContentElementType(),a.alias,this.consumerMediaUtils.mediaTypeToString(b),this.consumerMediaUtils.mediaTypeToGalleryType(b))},a.prototype.changeGallery=function(){var a=this,b=this.nodeFetcher.getCurrentActiveNode(),c=this.mediaOverrideManager.getAvailableGalleries(b),d=this.mediaOverrideManager.getAllowedMediaOverride(b),e=!1;this.$mdDialog.show({autoWrap:!1,hasBackdrop:!1,templateUrl:"views/editor/gallery-picker.html",clickOutsideToClose:!0,onRemoving:function(){e||a.consumerBiLogger.contentEditor.galleryLayoutWindowClosed(b.getId(),b.getSpecificContentElementType(),b.alias,null,c.length,d===a.PresetMediaType.SHAPE?"shape":d===a.PresetMediaType.COAST2COAST?"full width":d===a.PresetMediaType.IMAGE?"image":"")},controller:["$scope","$mdDialog",function(f,g){f.galleries=c,f.onSelect=function(f){f&&f.gallery&&a.mediaOverrideManager.setGallery(b,f.gallery)&&(e=!0,a.nodeEditorManager.updateViewer(a.createEvent(BIOrigins.OSIDropdown,IEditEventType.GalleryLayoutChange)),a.consumerBiLogger.contentEditor.galleryLayoutChanged(b.getId(),b.getSpecificContentElementType(),b.alias,f.gallery.name,c.length,c.indexOf(f),d===a.PresetMediaType.SHAPE?"shape":d===a.PresetMediaType.COAST2COAST?"full width":d===a.PresetMediaType.IMAGE?"image":"")),g.hide()},f.getDisplayName=function(a){return a.name},a.consumerBiLogger.contentEditor.galleryLayoutWindowOpened(b.getId(),b.getSpecificContentElementType(),b.alias,c.length,d===a.PresetMediaType.SHAPE?"shape":d===a.PresetMediaType.COAST2COAST?"full width":d===a.PresetMediaType.IMAGE?"image":"")}]})},a.prototype.createEvent=function(a,b,c,d,e){void 0===b&&(b=IEditEventType.ValueChange),c=c||this.getMediaValueProjection(),d=d||Object.keys(c)[0];var f=this.nodeFetcher.getCurrentActiveNode();return{key:d,field:c[d],subField:e,maskChanged:!1,whatChanged:b,node:f,isReferencedField:!1,BIOrigin:a}},a.prototype.getMediaValueProjection=function(){var a=this.nodeFetcher.getCurrentActiveNode();return _.reduce(a.contentElement.values,function(a,b,c){return"media"===b.type&&(a[c]=b),a},{})},a.prototype.mediaChange=function(a,b,c,d){var e=this;if(!this.applicationState.isInMobileEditMode()){var f=this.nodeFetcher.getCurrentActiveNode(),g=this.consumerMediaUtils.getChangeMediaMethod(f,a),h={contentElement:c,media:c.getMediaField().value};return this.consumerBiLoggerHelpers.organizeMediaNode=f,this.consumerMediaUtils.biReplaceMediaLoaded(f,a,d),g(h,this.getSeg()).then(function(g){return e.handleMediaChange(f,b,c,a,g.isChanged,g.numTotal,d)},function(){return e.handleCancellingOfMediaChange(f,a,d)})}},a.prototype.changeLink=function(){var a=this,b=this.nodeFetcher.getCurrentActiveNode(),c=this.mediaOverrideManager.getActiveMediaValue(b);this.linkDetailsManager.openLinkDetailsDialog(c.Link,b,"media").then(function(b){c.Link=b,a.nodeEditorManager.updateViewer(a.createEvent(BIOrigins.OSIDropdown))})},a.prototype.openCropper=function(a,b){var c=this,d=this,e=this.getSeg(),f=this.nodeFetcher.getCurrentActiveNode(),g=e.getLE(),h=this.overlaySegmentManager.getMediaOverlayPosition(f.getId()),i=this.previewScale.getScale();this.imageLayout=g.getMediaLayout();var j=this.calculateViewportStyle(h,e,i),k=$(".overlay-viewport"),l=k.height(),m=64;if(!a){var n=j.height+m;if(n>l)return this.previewScale.setScaleFactor((l/n).toFixed(1)-.1),this.$timeout(function(){return c.openCropper(!0,b)},300)}if(!b){var o=$(".browser-toolbar"),p=o.offset().top+o.outerHeight(),q=j.top,r=q+j.height;if(p>q||r>l&&q>p){var s=k.scrollTop();return $(".overlay-viewport").animate({scrollTop:s-p+(this.flags.updatedCropper?j.top-m:j.top)},500),this.$timeout(function(){return c.openCropper(a,!0)},550)}}var t=[g.getArgValue(this.imageLayout.argIndex)[0]];this.imgData=_.map(t,function(a){var b=d.cropFaceService.getLimitingAlpha(4e3,4e3,a.width,a.height),c=d.mediaGallery.itemToThumbnailUrl(a,Math.round(b*a.width),Math.round(b*a.height));return{uri:c,width:a.width,height:a.height,relativeUri:a.relativeUri}});var u=!0,v=_.map(t,function(a){var b=e.node.getCropOfImage(d.imageLayout.argIndex,a.relativeUri,d.imageLayout);return b?{x:b.x,y:b.y,h:b.height,w:b.width}:void 0});this.$mdDialog.show({template:'\n        <md-dialog class="cropper-md-dialog">\n          <cropper-controller\n            node="node"\n            crop="crop"\n            autoclose="autoClose"\n            imgdata="imgData"\n            viewport="viewport"\n            consumer-bi-logger="consumerBiLogger"\n            oncropclose="onCropClose"\n            bindoutsideclick="bindOutsideClick"\n          ></cropper-controller>\n        </md-dialog>',hasBackdrop:!1,locals:{node:f,crop:v,autoclose:u,imgData:this.imgData,viewport:j,consumerBiLogger:d.consumerBiLogger,onCropClose:this.onCropClose.bind(this)},onRemoving:function(){c.applicationState.setCropperMode(!1),i&&c.previewScale.setScaleFactor(i)},controller:["$scope","$mdDialog","crop","autoclose","imgData","viewport","onCropClose","node","consumerBiLogger","applicationState",function(a,b,c,e,f,g,h,i,j,k){k.setCropperMode(!0),a.crop=c,a.autoclose=e,a.imgData=f,a.viewport=g,a.consumerBiLogger=j,a.node=i,a.bindOutsideClick=function(b){a.onOutsideClick=b},a.onCropClose=function(a,c){b.hide(),h(a,c)},d.consumerBiLogger.contentEditor.cropImageDialogIsShown(i.getId(),i.getSpecificContentElementType(),i.alias)}]})},a.prototype.onCropClose=function(a,b){var c=this;if("ok"===a){_.forEach(this.imgData,function(a,d){if(b[d]){var e=c.nodeFetcher.getCurrentActiveNode();e.setCropData(c.imageLayout.argIndex,a.relativeUri,c.imageLayout,b[d])}});var d=void 0;d=this.flags.renderedModel?this.storyServices.reRender():this.getSeg().reRender(),d.then instanceof Function&&d.then(function(){c.pubSub.fire(PubSub.events.CONTENT_UPDATED)}),this.undoRedo.captureOperation()}},a.prototype.calculateViewportStyle=function(a,b,c){var d=b.getLE(),e=b.getLayoutSelectionStore().getImageStretch(b,d);return{left:a.left-(e&&e.left||0)*c,top:a.top-(e&&e.top||0)*c,width:a.width+((e&&e.left||0)+(e&&e.right||0))*c,height:a.height+((e&&e.top||0)+(e&&e.bottom||0))*c}},a.prototype.getSeg=function(){var a=this.nodeFetcher.getCurrentNodeResult().sitePart,b=this.nodeFetcher.getCurrentActiveNode();return"header"!==a?b&&this.applicationState&&this.applicationState.getContentFocus()&&this.overlayManager.listSpanManager.getSegmentByNodeId(b.getId(),a):void 0},a.prototype.updateViewer=function(a,b,c){var d=this.overrideFieldDataValue(b,null),e=this.mediaOverrideManager.getFieldDataType(b.data.subType,a);this.consumerBiLogger.contentEditor.updateField(a.getId(),a.getSpecificContentElementType(),a.alias||"",b.key,e),this.editorEventManager.fieldChanged(d,!1,IEditEventType.ValueChange,c)},a.prototype.overrideFieldDataValue=function(a,b){var c=_.clone(a.data);return c.value=b,__assign({},a,{data:c})},a}();angular.module("siteGeneratorEditorInternal").service("mediaEditorManager",MediaEditorManager);var AssistiveMessage=function(){function a(a,b,c,d,e){this.$q=a,this.TourAttachedTooltip=b,this.$compile=c,this.$timeout=d,this.$rootScope=e}return a.$inject=["$q","TourAttachedTooltip","$compile","$timeout","$rootScope"],a.prototype.show=function(a){var b=this,c=new this.TourAttachedTooltip,d=angular.element("<div>"),e=150,f=250,g=150,h=this.$q.defer(),i=function(){d.remove(),c.element.css({opacity:"0"}),b.$timeout(function(){return c.destroy()},g+200),h.resolve()},j=Object.assign({titleText:"ADI Assistant",actionText:"Got it",xOffset:0,showTitle:!1,showDivider:!1,onAction:i},a);d.on("click",i),d.css({position:"fixed",top:"0px",left:"0px",width:"calc(100%)",height:"calc(100%)",zIndex:"1000"}),angular.element("body").append(d);var k=Object.assign(this.$rootScope.$new(),j,{componentClass:"no-title-with-p9-primary-button",buttonClass:"p9-primary -small"});return c.setContent(this.$compile('<assistant-tip\n      text="text" title-text="titleText" component-class="componentClass" action-text="actionText" button-class="buttonClass" show-title="showTitle" show-divider="showDivider" on-action="onAction()"\n      ></assistant-tip>')(k)),c.attachTo(j.target,builders.AssistantPositionX.Right,builders.AssistantPositionY.Center),this.$timeout(function(){c.element.find("."+TourAttachedTooltip.CONTENT_CLASS).css({transform:"translateX("+j.xOffset+"px)"}),c.arrowElement.css({transform:"translateX("+j.xOffset+"px)"}),c.element.css({marginTop:"12px",opacity:"0",zIndex:"1001",display:"block"}),b.$timeout(function(){return c.element.css({opacity:"1",marginTop:"0px",transition:"margin-top "+f+"ms ease-in-out, opacity "+f+"ms ease-in-out"})},e),b.$timeout(function(){return c.element.css({transition:"margin-top "+g+"ms ease-in-out, opacity "+g+"ms ease-in-out"})},e+f+200)}),h.promise},a}();angular.module("siteGeneratorStaticsConsumerAppInternal").service("assistiveMessage",AssistiveMessage);var AssistantTip=function(){function a(){}return a}();angular.module("siteGeneratorStaticsConsumerAppInternal").component("assistantTip",{controller:AssistantTip,templateUrl:"views/assistant-tip.html",bindings:{text:"=",titleText:"=?",buttonClass:"=",showTitle:"=?",showDivider:"=?",componentClass:"=?",actionText:"=",onAction:"&"}});var TipManager=function(){function a(a,b,c,d,e,f,g,h){var i=this;this.ccTip=a,this.tipContent=b,this.tipStorageManager=c,this.TipManagerTypeMap=d,this.$rootScope=e,this.$injector=f,this.flags=g,this.consumerBiLogger=h,this.$rootScope.$on("$stateChangeSuccess",function(){i.hide()}),this.typeMap=d,this.createNewTipDebounce=_.debounce(function(a,b){i.createNewTip(a,b)},800)}return a.$inject=["ccTip","tipContent","tipStorageManager","TipManagerTypeMap","$rootScope","$injector","flags","consumerBiLogger"],a.prototype.show=function(a,b){var c=this;this.shouldDisplayTip(a,b)?this.tipStorageManager.getTip(b+"-"+a).then(function(){c.hide()})["catch"](function(){c.showTip(a,b)}):this.hide()},a.prototype.hide=function(){this.lastTip&&this.ccTip.hide(this.lastTip)},a.prototype.shouldDisplayTip=function(a,b){return!1},a.prototype.showTip=function(a,b){this.consumerBiLogger.tips.show(b,a),this.lastTip?this.lastTipType===a?this.ccTip.update(this.lastTip,this.tipContent.get(a,b.toLowerCase())):(this.hide(),this.createNewTipDebounce(a,b)):this.createNewTipDebounce(a,b)},a.prototype.isClickEvent=function(a){return a&&"click"===a.type},a.prototype.createNewTip=function(a,b){var c=this;this.lastTipType=a,this.lastTip=this.ccTip.build(angular.extend(this.tipContent.get(a,b.toLowerCase()),{style:angular.extend(this.getPosition(a),{zIndex:1}),onHide:function(d){c.isClickEvent(d)&&c.consumerBiLogger.tips.close(a,b),c.lastTip=void 0}})),this.ccTip.show(this.lastTip)},a.prototype.getPosition=function(a){var b={top:"109px",left:"335px"},c={top:"93px",left:"497px"};return a===this.TipManagerTypeMap.ADD?c:b},a}();angular.module("siteGeneratorStaticsConsumerAppInternal").service("tipManager",TipManager);var TipManagerTypeMap=function(){function a(){this.ADD="add",this.EDIT="edit"}return a}();angular.module("siteGeneratorStaticsConsumerAppInternal").constant("TipManagerTypeMap",new TipManagerTypeMap);var TipContent=function(){function a(a,b){this.TipContentTypeMap=a,this.$translate=b}return a.$inject=["TipContentTypeMap","$translate"],a.prototype.getKey=function(a){return"tip_content."+this.currentName.toLowerCase()+"-tip."+this.currentType+"-mode."+a},a.prototype.getTranslation=function(a){return this.$translate(this.getKey(a))},a.prototype.initParams=function(a,b){this.currentType=a,this.currentName=b},a.prototype.isTitle=function(a,b){return this.initParams(a,b),this.getTranslation("title")!==this.getKey("title")},a.prototype.get=function(a,b){return this.initParams(a,b),{scope:{contact:{name:this.$translate("tip_content.contact.name"),profession:this.$translate("tip_content.contact.profession"),img:"images/tip/rachael.jpg"},title:this.getTranslation("title"),footer:{closeButton:this.getTranslation("footer_button")}},template:this.getTranslation("content_template")}},a}();angular.module("siteGeneratorStaticsConsumerAppInternal").service("tipContent",TipContent);var TipContentTypeMap=function(){function a(){this.WELCOME="Welcome",this.ABOUT="About",this.PRODUCTS="Products",this.HOURS="Hours",this.ABOUT_US="About Us",this.OUR_HISTORY="Our History",this.ALL_PRUDUCTS="All Products",this.SPECIAL_EVENTS="Special Events",this.WEDDING_SERVICES="Wedding Services",this.SPECIALITY_ITEMS="Specialty Items",this.BAKING_CLASSES="Baking Classes",this.NEWS_AND_UPDATES="News & Updates",this.SUBSCRIBE="Subscribe",this.MEET_THE_TEAM="Meet the Team",this.OPENING_HOURS="Opening Hours",this.CONTACT="Contact"}return a}();angular.module("siteGeneratorStaticsConsumerAppInternal").constant("TipContentTypeMap",new TipContentTypeMap);var TipStorageManager=function(){function a(a,b,c){this.wixCache=a,this.$q=b,this.storyServices=c}return a.$inject=["wixCache","$q","storyServices"],a.prototype.getTip=function(a){var b=this;return this.getCache().then(function(c){return b.$q(function(d,e){b.isNameExists(c,a)?d():(b.setStorageName(c,a),e())})})},a.prototype.getStorageKey=function(){return"cc-tip-"+this.storyServices.story.id},a.prototype.getNameId=function(a){return a.toLowerCase().replace(/ /g,"-")},a.prototype.getCache=function(){return this.wixCache.get(this.getStorageKey(),{namespace:"ob"}).then(function(a){return a})["catch"](function(){return{}})},a.prototype.setStorageName=function(a,b){a[this.getNameId(b)]=!0,this.wixCache.set(this.getStorageKey(),a,{namespace:"ob"})},a.prototype.isNameExists=function(a,b){return!!a[this.getNameId(b)]},a}();angular.module("siteGeneratorStaticsConsumerAppInternal").service("tipStorageManager",TipStorageManager);var DragHandle=function(){function a(a,b,c,d,e,f,g,h,i,j,k){var l=this;this.sectionManager=a,this.consumerBiLogger=b,this.undoRedo=c,this.applicationState=d,this.overlayManager=e,this.sectionDrag=f,this.simpleSolutionManager=g,this.nodeManipulationService=h,this.consumerMenu=i,this.sitePartTypes=j,this.tpaService=k,this.upClick=function(){return l.moveSection(!1)},this.downClick=function(){return l.moveSection(!0)}}return a.$inject=["sectionManager","consumerBiLogger","undoRedo","applicationState","overlayManager","sectionDrag","simpleSolutionManager","nodeManipulationService","consumerMenu","sitePartTypes","tpaService"],a.prototype.moveSection=function(a){var b=this,c=this.listSpan.node,d=this.sectionManager.geSectionPositionInPage(c),e=a?d+1:d-1,f=a?"down":"up",g=this.tpaService.getAppId(c);this.consumerBiLogger.sectionManagement.moveSectionWithinThePageClick(c.getId(),c.getContentElementType(),c.alias,e,d,f,g);var h={direction:this.simpleSolutionManager.Animation.Direction.NORMAL,type:this.simpleSolutionManager.Animation.Type.CROSS_FADE},i=c.containerPageId,j=c.id;this.nodeManipulationService.moveNode(j,i,a,function(k){if(-1!==k){var l=a?[j,k]:[k,j],m=l[0],n=l[1];b.applicationState.clearContentFocus(),b.simpleSolutionManager.swapAdjacentSectionsOnPage(i,m,n).then(function(a){return b.sectionManager.startAnimatedRender(a,h)}).then(function(){b.applicationState.setContentFocus(j,b.sitePartTypes.BODY),b.overlayManager.calculateBodyHeight(),b.consumerMenu.calcMenuAnchors(),b.consumerBiLogger.sectionManagement.sectionMovedWithinThePageSuccess(c.getId(),c.getContentElementType(),c.alias,e,d,f,g),b.undoRedo.captureOperation()})}})},a.prototype.dragHandleClick=function(){this.applicationState.setContentFocus(this.listSpan.node.id,this.listSpan.sitePart)},a.prototype.dragStart=function(){var a=this.listSpan.node,b=this.sectionManager.geSectionPositionInPage(a),c=this.tpaService.getAppId(a);return this.consumerBiLogger.sectionManagement.moveSectionWithinThePageStartDragging(a.getId(),a.getContentElementType(),a.alias,b,c),this.undoRedo.disableAutoSave(),this.applicationState.setSteady(!1),this.overlayManager.data.draggedListSpan=this.listSpan,this.sectionDrag.startDrag()},a.prototype.dragEnd=function(){this.applicationState.setSteady(!0),this.undoRedo.enableAutoSave()},a.prototype.dragCanceled=function(){var a=this;return this.sectionDrag.cancelDrag().then(function(){a.overlayManager.clearDropTarget(),a.applicationState.setContentFocus(a.listSpan.node.id,a.listSpan.sitePart)})},a.prototype.drop=function(){this.sectionDrag.drop()},a}();angular.module("siteGeneratorStaticsConsumerAppInternal").component("dragHandle",{templateUrl:"views/builder/drag-handle.html",controller:DragHandle,bindings:{listSpan:"=",dragDisabled:"=",arrowUpDisabled:"=",arrowDownDisabled:"="}});var MediaGalleryAdapter=function(){function a(a,b,c,d,e,f,g,h){this.mediaFrame=a,this.mediaOrganizeDataAdapter=b,this.$q=c,this.RECOMMENDED_TAB_PARAMS=d,this.$translate=e,this.mediaGalleryCustomTabBuilder=f,this.staticsUrls=g,this.mediaGallery=h,this.onMediaFrameItemsWrapperBound=this.onMediaFrameItemsWrapper.bind(this),this.onMediaFrameCancelWrapperBound=this.onMediaFrameCancelWrapper.bind(this)}return a.$inject=["mediaFrame","mediaOrganizeDataAdapter","$q","RECOMMENDED_TAB_PARAMS","$translate","mediaGalleryCustomTabBuilder","staticsUrls","mediaGallery"],a.prototype.onMediaFrameItemsWrapper=function(a){this.mediaFrame.off("close",this.onMediaFrameCancelWrapperBound),this.onMediaFrameItems&&this.onMediaFrameItems(a)},a.prototype.onMediaFrameCancelWrapper=function(){this.mediaFrame.off("items",this.onMediaFrameItemsWrapperBound),this.onMediaFrameCancel&&this.onMediaFrameCancel()},a.prototype.openMediaGallery=function(a,b,c){var d,e,f,g="custom,private,external,public,photoStock",h="picture";switch(b){case"image":d=c?"backgrounds":"photos",e=g;break;case"video":d="videos",e="custom,private,public",h="video",f="video";break;case"shape":d="shapes",e="custom,public",f="shape";break;case"clipart":d="clipart",e=g;break;case"document":d="document",e="private",h="document",f="document";break;default:d="photos",e=g}this.mediaFrame.one("items",this.onMediaFrameItemsWrapperBound),this.mediaFrame.one("close",this.onMediaFrameCancelWrapperBound),this.mediaFrame.open({cssUrl:this.staticsUrls.mediaGalleryCssUrl,vision:["face"],mediaGalleryBaseHost:"https://www.wix.com/_partials/media-gallery-g5/"+this.RECOMMENDED_TAB_PARAMS.MEDIA_GALLERY_VERSION+"/",publicMediaRoot:d,mediaType:h,selectionType:"single",tabsList:e,path:"custom",customData:a,translations:{help_url:this.$translate("help.mediagallery.single"+b)},i18nPrefix:f})},a.prototype.convertToMediaOrganizerFormat=function(a,b){return Object.assign({},a,{fileName:a.title||"",relativeUri:("shape"===b?a.fileUrl:a.uri)||"",width:Number(a.width)||0,height:Number(a.height)||0,Title:a.title||a.Title||"",Description:a.Description||"",Link:a.Link||{},mediaType:b,active:!0})},a.convertToMediaObject=function(a){var b={Link:{},Description:"",Title:"Untitled",fileName:"Untitled",mediaType:"image"},c=a.data,d={fileName:c.name,fileUrl:c.fileUrl,height:c.height,width:c.width,relativeUri:c.id};return _.defaults(d,b)},a.prototype.selectMediaByType=function(a,b,c,d){var e=this;return void 0===b&&(b=[]),this.mediaGalleryCustomTabBuilder.buildCustomTabData(b,a,c).then(function(f){return e.openMediaGallery(f,a,c),e.managingResultsActiveState(b,a,d)})},a.prototype.selectContentElementMediaByType=function(a,b,c,d){var e=this,f=this.mediaOrganizeDataAdapter.prepareData(a||{contentElement:{},media:[]},b);return this.selectMediaByType(b,f,c,d).then(function(c){e.handleInvalidrelativeUri(c);var g=_.unique(c.concat(f),"relativeUri"),h=e.mediaOrganizeDataAdapter.handleResult(g,a,b,"video"!==b);return d&&(h.data=c),h})},a.prototype.selectImage=function(a,b,c,d){return this.segment=c,this.selectContentElementMediaByType(b,"image",a,d)},a.prototype.selectVideo=function(a,b,c){return this.selectContentElementMediaByType(a,"video",null,c)},a.prototype.selectShape=function(a){return this.selectContentElementMediaByType(a,"shape")},a.prototype.selectClipart=function(a){return this.selectContentElementMediaByType(a,"clipart")},a.prototype.selectLogo=function(){return this.selectMediaByType("image")},a.prototype.selectDocument=function(){return this.selectMediaByType("document")},a.prototype.handleInvalidrelativeUri=function(a){void 0===a&&(a=[]);var b=a.filter(function(a){return"file"===a.relativeUri});b.forEach(function(a){var b=a.fileBaseUrl.match(/\d+.*/);b&&""!==b[0]&&(a.relativeUri=a.uri=b[0])})},a.prototype.managingResultsActiveState=function(a,b,c){var d=this;return this.$q(function(e,f){d.onMediaFrameItems=function(f){var g=function(a){return"video"===b?a:a.map(function(a){return a.active=!1,a})},h=function(b){var c=a.map(function(a){return a.active=!1,a}),e=b.filter(function(a){var b=d.mediaGallery.getItemId(a),e=c.find(function(a){return d.mediaGallery.getItemId(a)===b});return e?(e.active=!0,!1):!0});return e.concat(c)},i=f.items.map(function(a){return d.convertToMediaOrganizerFormat(a,b)}),j=c?g(i):h(i);e(j)},d.onMediaFrameCancel=function(){f()}})},a}();angular.module("siteGeneratorStaticsConsumerAppInternal").service("mediaGalleryAdapter",MediaGalleryAdapter),angular.module("siteGeneratorEditorInternal").factory("mediaFrame",["$window",function(a){return a.MediaFrame}]),angular.module("siteGeneratorCommon").factory("wixmp",["$window",function(a){return a.wixmp}]);var WixmpServices=function(){function a(a,b){this.consumerBiLogger=a,this.$q=b}return a.$inject=["consumerBiLogger","$q"],a.prototype.getSocialImages=function(a,b){var c=this;if(this.itemList&&!b)return this.$q.when(this.itemList);
var d=this.$q.defer();return this.privateMediaSource||(this.privateMediaSource=new wixmp.Source(wixmp.sources.PRIVATE)),this.privateMediaSource.items.search(a," ").then(function(a){c.itemList=a,d.resolve(a)}),d.promise},Object.defineProperty(a.prototype,"socialImages",{get:function(){return this.itemList&&this.itemList.data&&this.itemList.data.length?this.itemList:void 0},enumerable:!0,configurable:!0}),a}();angular.module("siteGeneratorStaticsConsumerAppInternal").service("wixmpServices",WixmpServices);var videoControlOptions;!function(a){a[a.NEVER=0]="NEVER",a[a.ON_HOVER=1]="ON_HOVER",a[a.ALWAYS=2]="ALWAYS"}(videoControlOptions||(videoControlOptions={}));var MediaSettingsPanel=function(){function a(a,b,c,d,e,f,g,h,i,j,k,l,m,n,o){var p=this;this.$scope=a,this.mediaOverrideManager=b,this.linkDetailsManager=c,this.consumerMediaUtils=d,this.CcDialogBuilder=e,this.consumerBiLoggerHelpers=f,this.consumerBiLogger=g,this.$translate=h,this.flags=i,this.videoProvidersUtils=j,this.storyServices=k,this.documentServicesMediator=l,this.mediaEditorManager=m,this.nodeFetcher=n,this.initService=o,this.FIELD_CHANGE_DEBOUNCE_IN_MS=500,this.mediaTypes=cc.MediaPreviewType,this.mediaPreviewTypes=[this.mediaTypes.SingleImage,this.mediaTypes.Video,this.mediaTypes.ExtVideo,this.mediaTypes.Shape,this.mediaTypes.Clipart],this.videoControlOptions=[{id:videoControlOptions.NEVER,label:"Never"},{id:videoControlOptions.ON_HOVER,label:"On Hover"},{id:videoControlOptions.ALWAYS,label:"Always"}],this.updateOnBlur=this.flags.updateOnBlur,this.init=function(){var a=p.node||p.nodeFetcher.getCurrentNode();p._node=a.isList()?a.children[0]:a,p.mediaType=p.extractMediaType(p._node),p.flags.onStageIndications?(p.mediaValues=p.mediaOverrideManager.getMediaValues(p._node),p.mediaValue=p.mediaOverrideManager.getActiveMediaValue(p._node)):(p.mediaValues=p.extractActiveMediaValues(p._node,p.mediaType),p.mediaValue=p.mediaValues[0]),p.updateILink(),p.mediaType===p.mediaTypes.ExtVideo&&(p.mediaValue.controls||(p.mediaValue.controls=videoControlOptions.ALWAYS),p.setCurrentVideoControlOption(p.mediaValue)),p.consumerBiLoggerHelpers.openedPanelStack.push("media settings"),p.consumerBiLogger.contentEditor.panelIsLoaded(p._node.getId(),p._node.getSpecificContentElementType(),p._node.alias,p.consumerBiLoggerHelpers.popPanelSource())},this.handleMediaChange=function(a,b,c,d){p.consumerMediaUtils.biReplaceMediaApproved(p._node,p.mediaType,b,BIOrigins.MediaSettingsPanel),a&&p._node.contentElement.fillValuesByMediaType(),p.init(),p.change({event:p.mediaEditorManager.createEvent(BIOrigins.EditPanel,IEditEventType.ValueChange,c,d)})},this.handleCancellingOfMediaChange=function(){p.consumerMediaUtils.biReplaceMediaClosed(p._node,p.mediaType,BIOrigins.MediaSettingsPanel)},this.changeVideoUrl=_.debounce(function(a,b){try{var c=p.videoProvidersUtils.getVideoThumbnailUrl(a);if(c)p.lastValidVideoUrl=a;else{if(!b)return;p.mediaValue.videoUrl=p.lastValidVideoUrl,c=p.videoProvidersUtils.getVideoThumbnailUrl(p.lastValidVideoUrl)}p.mediaValue.thumbnailUrl="string"==typeof c?c:"",p.videoProvidersUtils.isVimeo(a)?p.mediaValue.uri="/videos/"+p.videoProvidersUtils.getVimeoId(a):delete p.mediaValue.uri,p.handleVideoSettingsChanged()}catch(d){}},this.FIELD_CHANGE_DEBOUNCE_IN_MS),this.disableMediaChangeButton=!1,this.debug=this.flags.debug,this.segment&&this.segment.shouldAlignImage()&&(this.imageAlignmentOptions=this.mediaOverrideManager.listAlignmentOptions(),this.$scope.$watch(function(){return p.segment.getAlignment()},function(a){p.selectedImageAlignment=p.mediaOverrideManager.getAlignmentOption(a)})),this.flags.imagePositionsAsRectangles&&this.segment&&this.segment.shouldAlignImage()&&this.$scope.$watch(function(){return p.segment.getAlignment()},function(a){var b=ImagePositions.getLabelDetailsByPosName(a);p.selectedPositionName=b.selectedPosition,p.selectedPositionImage=b.imagePosition,p.selectedPositionIndex=ImagePositions.invertedPosToDetails[a]})}return a.$inject=["$scope","mediaOverrideManager","linkDetailsManager","consumerMediaUtils","CcDialogBuilder","consumerBiLoggerHelpers","consumerBiLogger","$translate","flags","videoProvidersUtils","storyServices","documentServicesMediator","mediaEditorManager","nodeFetcher","initService"],a.prototype.$onInit=function(){this.initService.loaded().then(this.init)},Object.defineProperty(a.prototype,"title",{get:function(){switch(this.mediaType){case this.mediaTypes.SingleImage:return"Image Settings";case this.mediaTypes.Video:return"Video Settings";case this.mediaTypes.ExtVideo:return"Video Settings";case this.mediaTypes.Shape:return"Shape Settings";case this.mediaTypes.Clipart:return"Clipart Settings"}},enumerable:!0,configurable:!0}),Object.defineProperty(a.prototype,"changeButtonText",{get:function(){switch(this.mediaType){case this.mediaTypes.ExtVideo:return"Search";default:return"Replace"}},enumerable:!0,configurable:!0}),a.prototype.extractMediaType=function(a){return this.mediaOverrideManager.getCurrentSelectedMediaPreviewType(this._node)},a.prototype.convertToMediaTypeName=function(a){var b=this.mediaTypes[a];return"SingleImage"===b?"image":"MultipleImages"===b?"image":""+b.slice(0,1).toLowerCase()+b.slice(1)},a.prototype.extractActiveMediaValues=function(a,b){var c=this.convertToMediaTypeName(b);return this._node.contentElement.allValuesByMediaType[c]},a.prototype.setCurrentVideoControlOption=function(a){this.selectedVideoControlOption=this.videoControlOptions[a.controls],this.lastValidVideoUrl=a.videoUrl},a.prototype.openMediaSettingsPanelHelp=function(){var a="help.mediasettings.image";switch(this.mediaType){case this.mediaTypes.SingleImage:a="help.mediasettings.image";break;case this.mediaTypes.Video:a="help.mediasettings.bgVideo";break;case this.mediaTypes.ExtVideo:a="help.mediasettings.extVideo";break;case this.mediaTypes.Shape:a="help.mediasettings.shape";break;case this.mediaTypes.Clipart:a="help.mediasettings.clipart"}this.CcDialogBuilder.showSupportIframe(this.$translate(a),CONSUMER_DIALOGS.MEDIA_SETTINGS_PANEL_HELP)},a.prototype.closeMediaSettingsPanel=function(){this.consumerBiLogger.contentEditor.panelClosed(this._node.getId(),this._node.getSpecificContentElementType(),this._node.alias),this.consumerBiLoggerHelpers.openedPanelStack.pop(),this.close()},a.prototype.changeMedia=function(){var a=this;if(!this.disableMediaChangeButton){this.disableMediaChangeButton=!0,this.consumerMediaUtils.biReplaceMediaClick(this._node,this.mediaType),this.consumerMediaUtils.biCheckIfReplaceLogoClick(this._node,BIOrigins.ClipartSettingsPanel);var b=this.mediaEditorManager.getMediaValueProjection(),c=Object.keys(b)[0],d=this.consumerMediaUtils.getChangeMediaMethod(this._node,this.mediaType),e={contentElement:this._node.contentElement,media:this._node.contentElement.values[c].value};this.consumerBiLoggerHelpers.organizeMediaNode=this._node,this.consumerMediaUtils.biReplaceMediaLoaded(this._node,this.mediaType,BIOrigins.MediaSettingsPanel),d(e,this.segment).then(function(d){return a.handleMediaChange(d.isChanged,d.numTotal,b,c)},function(){return a.handleCancellingOfMediaChange()})["finally"](function(){a.disableMediaChangeButton=!1})}},a.prototype.handleVideoSettingsChanged=function(){this.change({event:this.mediaEditorManager.createEvent(BIOrigins.EditPanel,IEditEventType.VideoSettingsChange)})},a.prototype.onChangeMediaTitle=function(a){a.length>DocumentServicesMediator.GENERAL_VALIDATIONS.MAX_MEDIA_TITLE_LENGTH&&(a=a.substr(0,DocumentServicesMediator.GENERAL_VALIDATIONS.MAX_MEDIA_TITLE_LENGTH)),this.mediaValue.Title=a,this.change({event:this.mediaEditorManager.createEvent(BIOrigins.EditPanel,IEditEventType.MediaTitleChange)})},a.prototype.onChangeMediaDescription=function(a){a.length>DocumentServicesMediator.GENERAL_VALIDATIONS.MAX_MEDIA_DESCRIPTION_LENGTH&&(a=a.substr(0,DocumentServicesMediator.GENERAL_VALIDATIONS.MAX_MEDIA_DESCRIPTION_LENGTH)),this.mediaValue.Description=a,this.change({event:this.mediaEditorManager.createEvent(BIOrigins.EditPanel,IEditEventType.MediaDescriptionChange)})},a.prototype.showFaces=function(){var a=this.mediaValue,b=_.get(a,"fileInput.face"),c=document.createElement("div"),d=document.createElement("IMG"),e=500/a.height;c.appendChild(d),d.src="http://static.wixstatic.com/"+a.fileUrl,d.style.height="500px",d.style.position="fixed",d.style.overflowY="scroll",d.style.overflowX="scroll",d.style.top="0",d.style.left="0",document.body.appendChild(c),_.each(b,function(a){var b=document.createElement("div");b.style.position="fixed",b.style.top=a.y*e+"px",b.style.left=a.x*e+"px",b.style.height=a.height*e+"px",b.style.width=a.width*e+"px",b.style.border="2px solid red",c.appendChild(b)});var f=function(a){"Escape"===a.key&&document.body.removeChild(c),angular.element(window).unbind("keydown",f)};angular.element(window).keydown(f)},a.prototype.changeVideoControlOption=function(a){this.mediaValue.controls=a.id,this.handleVideoSettingsChanged()},a.prototype.changeLink=function(){var a=this;this.linkDetailsManager.openLinkDetailsDialog(this.mediaValue.Link,this._node,"media").then(function(b){a.mediaValue.Link=b,a.updateILink(),a.handleVideoSettingsChanged()})},a.prototype.updateILink=function(){this.linkAsILink=this.linkDetailsManager.generateILink(this.mediaValue.Link)},a.prototype.canChangeAlignment=function(){return this.segment&&this.segment.shouldAlignImage()},a.prototype.onAlignmentChange=function(a){var b=_.get(this,"segment.node.contentElement.allValuesByMediaType.image[0].relativeUri");this.segment.updateAlignment(b,a.value),this.change({event:this.mediaEditorManager.createEvent(BIOrigins.EditPanel,IEditEventType.AlignmentChange,void 0,void 0,{name:"image position",type:"dropdown",value:a.value})})},a}();angular.module("siteGeneratorEditorInternal").component("mediaSettingsPanel",{templateUrl:"views/editor/media-settings-panel.html",controller:MediaSettingsPanel,bindings:{change:"&",close:"&",node:"=",segment:"="}});var __extends=this&&this.__extends||function(){var a=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(a,b){a.__proto__=b}||function(a,b){for(var c in b)b.hasOwnProperty(c)&&(a[c]=b[c])};return function(b,c){function d(){this.constructor=b}a(b,c),b.prototype=null===c?Object.create(c):(d.prototype=c.prototype,new d)}}(),ImagePositions=function(a){function b(b,c,d,e,f){var g=a.call(this,c)||this;return g.$translate=b,g.$timeout=c,g.nodeFetcher=d,g.applicationState=e,g.backgroundScrollService=f,g.initScrollType(),g}return __extends(b,a),b.$inject=["$translate","$timeout","nodeFetcher","applicationState","backgroundScrollService"],b.prototype.initScrollType=function(){var a=this.nodeFetcher.getCurrentNode();if(a){var b=this.backgroundScrollService.getActiveScrollType(a);this.shouldShowParallaxParagraph=_([this.backgroundScrollService.SCROLL_TYPE.PARALLAX,this.backgroundScrollService.SCROLL_TYPE.PARALLAX_ZOOM]).contains(b)}},b.prototype.toggleDropDown=function(){this.isShowDropDown()?this.hideDropDown():this.showDropDown(),this.isShowDropDown()?this.closeWhenClickOutside(["image-positions"]):this.onDropdownClose()},b.getLabelDetailsByPosName=function(a){return{imagePosition:"image-positions:"+a.replace("_","-"),selectedPosition:a.replace("_"," ")}},b.prototype.positionClicked=function(a){var c=a.index,d=b.posToDetails[c],e=b.getLabelDetailsByPosName(d);this.selectedPositionImage=e.imagePosition,this.selectedPositionName=e.selectedPosition,this.onAlignmentChanged&&this.onAlignmentChanged({value:d})},b.prototype.goToPreview=function(){this.applicationState.goToPreview(!0)},b.prototype.getHeaderTitle=function(){return this.$translate("builder.section-background.background-settings.image.lower-title")},b.prototype.getHeaderBody=function(){return this.$translate("builder.section-background.background-settings.image.body")},b.prototype.getFooterTextForParallax=function(){return this.$translate("builder.section-background.background-settings.image.parallax-paragraph")},b}(BaseDropDown);ImagePositions.posToDetails={1:"top_left",2:"top",3:"top_right",4:"left",5:"center",6:"right",7:"bottom_left",8:"bottom",9:"bottom_right"},ImagePositions.invertedPosToDetails=_.invert(ImagePositions.posToDetails),angular.module("siteGeneratorBuilderInternal").component("imagePositions",{templateUrl:"views/editor/image-positions.html",controller:ImagePositions,bindings:{onAlignmentChanged:"&",selectedPositionName:"@",selectedPositionImage:"@",selectedPositionIndex:"@",shouldShowParallaxParagraph:"&"}});var ImagePositionsControl=function(){function a(a){this.$translate=a}return a.$inject=["$translate"],a.prototype.getLabelTitle=function(){return this.$translate(this.labelTitle)},a}();angular.module("siteGeneratorBuilderInternal").component("imagePositionsControl",{templateUrl:"views/editor/image-positions-control.html",controller:ImagePositionsControl,bindings:{labelTitle:"@",onAlignmentChanged:"&",selectedPositionName:"@",selectedPositionImage:"@",selectedPositionIndex:"@",shouldShowParallaxParagraph:"&"}}),angular.module("siteGeneratorStaticsConsumerAppInternal").directive("obRightClick",["$parse",function(a){return function(b,c,d){var e=a(d.obRightClick);c.bind("contextmenu",function(a){b.$apply(function(){a.preventDefault(),e(b,{$event:a})})})}}]);var GotoBuilderPopup=function(){function a(a,b,c,d,e,f,g,h,i,j){this.$scope=a,this.$window=b,this.$mdDialog=c,this.wizardService=d,this.spinnerService=e,this.consumerBiLogger=f,this.wixAngularTopology=g,this.applicationState=h,this.storyServices=i,this.flags=j,f.builder.goToEditorNotificationPageView()}return a.$inject=["$scope","$window","$mdDialog","wizardService","spinnerService","consumerBiLogger","wixAngularTopology","applicationState","storyServices","flags"],a.prototype.goToEditor=function(){var a=this;this.consumerBiLogger.builder.goToEditorContinueToProEditorClick(),this.$mdDialog.cancel(),this.spinnerService.waitForMe("renderForEditor"),this.applicationState.setGoToEditorState(!0),this.wizardService.publishStory("",!0).then(function(){return a.flags.sendPublishToServer?a.storyServices.story&&a.storyServices.story.markAsMajorRevision():void 0}).then(function(){a.applicationState.setGoToEditorState(!1),a.$window.onbeforeunload=null,a.spinnerService.imDone("renderForEditor"),a.onGoToEditor()})},a.prototype.cancel=function(){this.consumerBiLogger.builder.goToEditorClosePage(),this.$mdDialog.cancel()},a}();angular.module("siteGeneratorStaticsConsumerAppInternal").component("gotoEditorDialog",{templateUrl:"views/editor/goto-editor-dialog.html",controller:GotoBuilderPopup,bindings:{onGoToEditor:"&"}}),angular.module("siteGeneratorStaticsConsumerAppInternal").directive("cropperController",["$window","flags","consumerBiLogger",function(a,b,c){return{restrict:"E",link:function(b,d){var e,f,g,h=b.onOutsideClick;b.consumerBiLogger=c,a.requestAnimationFrame(function(){e=d.find(".controllers"),f=d.find(".cropper-tool-overlay"),g=d.find(".cropper-tool-outline-container"),f.on("click",h),g.on("click",h)})}}}]);var CnDraggable=function(){function a(a,b,c,d,e,f){var g=this;this.$element=a,this.$scope=b,this.$q=c,this.cnDrag=d,this.sectionDrag=e,this.previewService=f,this.$ghostContainer=this.createGhostContainer(),this.$ghostContainer.appendTo(this.previewService.getOverlay()),b.$watch(function(){return g.cnDraggable},function(){return b.$evalAsync(function(){return g.setDraggable()})}),b.$on("$destroy",function(){return g.$ghostContainer.remove()})}return a.$inject=["$element","$scope","$q","cnDrag","sectionDrag","previewService"],a.prototype.createGhostContainer=function(){return angular.element("<div></div>").addClass("cn-ghost-container")},a.prototype.getGhostElem=function(){if(this.ghostSelector){if(0===this.ghostSelector.indexOf(">"))return this.$element.find(this.ghostSelector.replace(/>/,""));var a=angular.element(this.ghostSelector);return!_.isEmpty(a)&&a}return this.$element},a.prototype.getDropTarget=function(){return angular.element(a.DROP_TARGET_SELECTOR)},a.prototype.moveGhostUnderCursor=function(a){var b=this.$ghostContainer,c=b.get(0).getBoundingClientRect(),d=(c.left+c.right)/2,e=(c.top+c.bottom)/2,f=a.clientX-d-50,g=a.clientY-e+20;TweenMax.set(b,{x:0>f?"-="+-f:"+="+f,y:0>g?"-="+-g:"+="+g})},a.prototype.toggleDropTarget=function(b,c){var d=this;this.hasHoverStateChanged(b,c)&&setTimeout(function(){c?b.addClass(a.DROP_TARGET_HOVERED_CLASS).trigger("dragenter"):b.removeClass(a.DROP_TARGET_HOVERED_CLASS).trigger("dragleave"),b.data("hovered",c),d.$scope.$apply()})},a.prototype.hasHoverStateChanged=function(a,b){return a.data("hovered")!==b},a.prototype.cloneGhost=function(a){var b=a.get(0).cloneNode(!0),c=a.get(0).getBoundingClientRect(),d=c.height,e=c.width;this.$ghostContainer.css({height:d,width:e}).empty().append(b)},a.prototype.cleanGhost=function(){var a=this,b=this.$q.defer(),c=1,d=function(){c-=.2,TweenMax.set(a.$ghostContainer,{opacity:c}),c>0?requestAnimationFrame(d):b.resolve()};return requestAnimationFrame(d),b.promise},a.prototype.setDraggable=function(){this.cnDrag.removeDraggable(this.draggedInstance),this.draggedInstance=this.createDraggable(),this.cnDisableIf&&this.draggedInstance.disable("dndDragover")},a.prototype.createDraggable=function(){var b=this,c=this.getDropTarget();this.$ghostContainer.css("transform","rotate(-2deg)");var d=this.cnDrag.createDraggable(this.$ghostContainer,{trigger:this.$element,cursor:"-webkit-grab",onDragStart:function(a){b.cloneGhost(b.getGhostElem()),b.moveGhostUnderCursor(a),d.update(!0),b.cnDragstart({event:a,draggable:b.cnDraggable})},onDragEnd:function(e){b.cleanGhost().then(function(){d.hitTest(a.DROP_TARGET_SELECTOR)?b.cnDrop({event:e,draggable:b.cnDraggable}):b.cnCanceled({event:e}),b.toggleDropTarget(c,!1),TweenMax.set(b.$ghostContainer,{clearProps:"transform,scale,opacity"}),b.cnDragend({event:e,item:b.cnDraggable})})},onDrag:function(e){b.moveGhostUnderCursor(e),d.update(!0),b.toggleDropTarget(c,d.hitTest(a.DROP_TARGET_SELECTOR)),b.sectionDrag.onDragMouseMove(e)}})[0];return d},a}();CnDraggable.DROP_TARGET_HOVERED_CLASS="dndDragover",CnDraggable.DROP_TARGET_SELECTOR="drop-target-overlay",angular.module("siteGeneratorStaticsConsumerAppInternal").directive("cnDraggable",function(){return{controller:CnDraggable,controllerAs:"$draggable",bindToController:!0,restrict:"A",scope:{cnDraggable:"=",cnDragstart:"&",cnDragend:"&",cnCanceled:"&",cnDrop:"&",cnDisableIf:"=",ghostSelector:"@"}}});var FloatingUndoRedo=function(){function a(a,b,c){var d=this;this.flags=a,this.applicationState=b,this.undoRedo=c,this.onClickUndo=function(){return d.undoRedo.undo(!0)},this.onClickRedo=function(){return d.undoRedo.redo(!0)},this.canUndo=function(){return d.undoRedo.canUndo()},this.canRedo=function(){return d.undoRedo.canRedo()}}return a.$inject=["flags","applicationState","undoRedo"],a}();angular.module("siteGeneratorStaticsConsumerAppInternal").component("floatingUndoRedo",{templateUrl:"views/floating-undo-redo.html",controller:FloatingUndoRedo});var SaleService=function(){function a(a,b,c,d){this.dealerApi=a,this.previewService=b,this.consumerBiLogger=c,this.flags=d}return a.$inject=["dealerApi","previewService","consumerBiLogger","flags"],a.prototype.loadCampaign=function(){var a=this,b=this.previewService.getMetaSiteId();return this.campaignID=null,this.dealerApi.getCampaign(b).then(function(b){a.campaignID=b.campaignId})["catch"](function(b){return a.consumerBiLogger.err(BIErrorCodes.GetCampaignFailed,"failed to get campaign"+b)})},a.prototype.isSale=function(){return this.campaignID&&this.campaignID.length>0},a}();SaleService.SaleCampaignId="seasonal-campaign",SaleService.NewUserPersonalCampaignId="new-user-personal-campaign",angular.module("siteGeneratorStaticsConsumerAppInternal").service("saleService",SaleService);var LogoManager=function(){function a(a,b,c,d){this.$rootScope=a,this.clientTopology=b,this.wixmp=c,this.$timeout=d,this.UPLOAD_ERROR_TIMEOUT=5e3,this.registerUploadHandler()}return a.$inject=["$rootScope","clientTopology","wixmp","$timeout"],a.prototype.setContext=function(a){this.ctx=a,this.ctx.persistence.init&&this.ctx.persistence.init(),this.uploadingLogo=!1,this.hasUploadError=!1,this.updateLogoUrl()},a.prototype.doneWithThisContext=function(){this.ctx=void 0,this.uploadingLogo=!1,this.hasUploadError=!1,this.logoUrl=void 0},a.prototype.registerUploadHandler=function(){var a=this;this.wixmp.Uploader.on("uploadQueueFinished",function(b){var c=a.ctx.persistence.getLogoURL();a.ctx.persistence.setLogo(b[0]),a.logoUrl=a.ctx.persistence.getLogoURL(),a.uploadingLogo=!1,a.ctx.onFieldChanged("business logo","logo",c,a.logoUrl,Date.now()-a.uploadStartTime),a.$rootScope.$apply()})},a.prototype.deleteLogo=function(){this.ctx.usePlaceholderOnDelete&&(this.ctx.onFieldChanged("business logo display","logo",this.ctx.persistence.isLogoVisible(),!1),this.ctx.persistence.hideLogo(),this.updateLogoUrl())},a.prototype.updateLogoUrl=function(){var a=this.ctx.persistence.isLogoVisible(),b=this.ctx.persistence.getLogoURL();if(!a||!b){var c=Math.floor(4*Math.random())+2;b=this.clientTopology.staticsUrl+"/images/intro/logo-placeholder"+c+".png"}this.logoUrl=b},a.prototype.getMediaUrl=function(){return this.logoUrl},a.prototype.uploadLogo=function(a){var b=this;if(!this.uploadingLogo){if(this.$timeout.cancel(this.uploadErrorTimeout),this.hasUploadError=!1,!a)return void this.deleteLogo();this.uploadingLogo=!0;var c=this.wixmp.Source(this.wixmp.sources.PRIVATE),d=_.assign(a,{mediaType:"picture",file:a});try{this.uploadStartTime=Date.now();var e=this.wixmp.Uploader.upload([{uploadFn:c.item.upload,source:d}]);e[0].deferred.promise["catch"](function(a){console.log(a),b.setUploadError()})}catch(f){this.setUploadError()}this.$rootScope.$apply()}},a.prototype.setUploadError=function(){var a=this;this.uploadingLogo=!1,this.hasUploadError=!0,this.uploadErrorTimeout=this.$timeout(function(){return a.hasUploadError=!1},this.UPLOAD_ERROR_TIMEOUT)},a.prototype.cleanUp=function(){this.ctx&&this.ctx.persistence.cleanUp&&this.ctx.persistence.cleanUp()},a}();angular.module("siteGeneratorStaticsCoreAppInternal").service("logoManager",LogoManager);var PreloaderService=function(){function a(){this.isActive=!1}return Object.defineProperty(a.prototype,"isShown",{get:function(){return this.isActive},enumerable:!0,configurable:!0}),a.prototype.start=function(){this.isActive=!0},a.prototype.stop=function(){this.isActive=!1},a}();angular.module("siteGeneratorStaticsConsumerAppInternal").service("preloaderService",PreloaderService);
//# sourceMappingURL=scripts.js.map